"use strict";
var __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
    function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
    var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
    var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
    var _, done = false;
    for (var i = decorators.length - 1; i >= 0; i--) {
        var context = {};
        for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
        for (var p in contextIn.access) context.access[p] = contextIn.access[p];
        context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
        var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
        if (kind === "accessor") {
            if (result === void 0) continue;
            if (result === null || typeof result !== "object") throw new TypeError("Object expected");
            if (_ = accept(result.get)) descriptor.get = _;
            if (_ = accept(result.set)) descriptor.set = _;
            if (_ = accept(result.init)) initializers.unshift(_);
        }
        else if (_ = accept(result)) {
            if (kind === "field") initializers.unshift(_);
            else descriptor[key] = _;
        }
    }
    if (target) Object.defineProperty(target, contextIn.name, descriptor);
    done = true;
};
var __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {
    var useValue = arguments.length > 2;
    for (var i = 0; i < initializers.length; i++) {
        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
    }
    return useValue ? value : void 0;
};
var FudgeCore;
(function (FudgeCore) {
    /**
     * Base class for the different DebugTargets, mainly for technical purpose of inheritance
     */
    class DebugTarget {
        /**
         * Merge the given message and arguments into a single string, separated by ', '
         */
        static mergeArguments(_message, ..._args) {
            let out = _message.toString(); //JSON.stringify(_message);
            for (let arg of _args)
                if (arg instanceof Number)
                    out += ", " + arg.toPrecision(2).toString(); //JSON.stringify(arg, null, 2);
                else
                    out += ", " + arg.toString(); //JSON.stringify(arg, null, 2);
            return out;
        }
    }
    FudgeCore.DebugTarget = DebugTarget;
})(FudgeCore || (FudgeCore = {}));
// <reference path="DebugAlert.ts"/>
var FudgeCore;
// <reference path="DebugAlert.ts"/>
(function (FudgeCore) {
    /**
     * The filters corresponding to debug activities, more to come
     */
    let DEBUG_FILTER;
    (function (DEBUG_FILTER) {
        DEBUG_FILTER[DEBUG_FILTER["NONE"] = 0] = "NONE";
        DEBUG_FILTER[DEBUG_FILTER["INFO"] = 1] = "INFO";
        DEBUG_FILTER[DEBUG_FILTER["LOG"] = 2] = "LOG";
        DEBUG_FILTER[DEBUG_FILTER["WARN"] = 4] = "WARN";
        DEBUG_FILTER[DEBUG_FILTER["ERROR"] = 8] = "ERROR";
        DEBUG_FILTER[DEBUG_FILTER["FUDGE"] = 16] = "FUDGE";
        DEBUG_FILTER[DEBUG_FILTER["CLEAR"] = 256] = "CLEAR";
        DEBUG_FILTER[DEBUG_FILTER["GROUP"] = 257] = "GROUP";
        DEBUG_FILTER[DEBUG_FILTER["GROUPCOLLAPSED"] = 258] = "GROUPCOLLAPSED";
        DEBUG_FILTER[DEBUG_FILTER["GROUPEND"] = 260] = "GROUPEND";
        DEBUG_FILTER[DEBUG_FILTER["SOURCE"] = 512] = "SOURCE";
        DEBUG_FILTER[DEBUG_FILTER["MESSAGES"] = 31] = "MESSAGES";
        DEBUG_FILTER[DEBUG_FILTER["FORMAT"] = 263] = "FORMAT";
        DEBUG_FILTER[DEBUG_FILTER["ALL"] = 287] = "ALL";
    })(DEBUG_FILTER = FudgeCore.DEBUG_FILTER || (FudgeCore.DEBUG_FILTER = {}));
    FudgeCore.DEBUG_SYMBOL = {
        [DEBUG_FILTER.INFO]: "‚úì",
        [DEBUG_FILTER.LOG]: "‚úé",
        [DEBUG_FILTER.WARN]: "‚ö†",
        [DEBUG_FILTER.ERROR]: "‚ùå",
        [DEBUG_FILTER.FUDGE]: "üé≤",
        [DEBUG_FILTER.SOURCE]: "üîó"
    };
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Routing to the standard-console
     */
    class DebugConsole extends FudgeCore.DebugTarget {
        static { this.delegates = {
            [FudgeCore.DEBUG_FILTER.INFO]: console.info,
            [FudgeCore.DEBUG_FILTER.LOG]: console.log,
            [FudgeCore.DEBUG_FILTER.WARN]: console.warn,
            [FudgeCore.DEBUG_FILTER.ERROR]: console.error,
            [FudgeCore.DEBUG_FILTER.FUDGE]: DebugConsole.fudge,
            [FudgeCore.DEBUG_FILTER.CLEAR]: console.clear,
            [FudgeCore.DEBUG_FILTER.GROUP]: console.group,
            [FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED]: console.groupCollapsed,
            [FudgeCore.DEBUG_FILTER.GROUPEND]: console.groupEnd,
            [FudgeCore.DEBUG_FILTER.SOURCE]: DebugConsole.source
        }; }
        /**
         * Should be used to display uncritical state information of FUDGE, only visible in browser's verbose mode
         */
        static fudge(_message, ..._args) {
            console.debug(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.FUDGE], _message, ..._args);
        }
        /**
         * Displays an extra line with information about the source of the debug message
         */
        static source(_message, ..._args) {
            console.log(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.SOURCE], _message, ..._args);
        }
    }
    FudgeCore.DebugConsole = DebugConsole;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
/// <reference path="DebugInterfaces.ts"/>
/// <reference path="DebugConsole.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
/// <reference path="DebugInterfaces.ts"/>
/// <reference path="DebugConsole.ts"/>
(function (FudgeCore) {
    /**
     * The Debug-Class offers functions known from the console-object and additions,
     * routing the information to various {@link DebugTarget}s that can be easily defined by the developers and registerd by users
     * Override functions in subclasses of {@link DebugTarget} and register them as their delegates
     */
    class Debug {
        /**
         * For each set filter, this associative array keeps references to the registered delegate functions of the chosen {@link DebugTarget}s
         */
        static { this.delegates = Debug.setupConsole(); }
        /**
         * De- / Activate a filter for the given DebugTarget.
         */
        static setFilter(_target, _filter) {
            for (let filter in Debug.delegates)
                Debug.delegates[filter].delete(_target);
            for (let filter in FudgeCore.DEBUG_FILTER) {
                let parsed = parseInt(filter);
                if (isNaN(parsed))
                    break;
                if ([FudgeCore.DEBUG_FILTER.MESSAGES, FudgeCore.DEBUG_FILTER.FORMAT, FudgeCore.DEBUG_FILTER.ALL].indexOf(parsed) != -1)
                    // dont delegate combos... 
                    continue;
                if (_filter & parsed)
                    Debug.delegates[parsed].set(_target, _target.delegates[parsed]);
            }
        }
        /**
         * Get the filter(s) for the given DebugTarget.
         */
        static getFilter(_target) {
            let result = 0;
            for (let filter in _target.delegates)
                result |= parseInt(filter);
            return result;
        }
        /**
         * Add a filter to the given DebugTarget.
         */
        static addFilter(_target, _filter) {
            let current = Debug.getFilter(_target);
            Debug.setFilter(_target, current | _filter);
        }
        /**
         * Remove a filter from the given DebugTarget.
         */
        static removeFilter(_target, _filter) {
            let current = Debug.getFilter(_target);
            Debug.setFilter(_target, current ^ _filter);
        }
        /**
         * Info(...) displays additional information with low priority
         */
        static info(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.INFO, _message, _args);
        }
        /**
         * Displays information with medium priority
         */
        static log(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.LOG, _message, _args);
        }
        /**
         * Displays information about non-conformities in usage, which is emphasized e.g. by color
         */
        static warn(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.WARN, _message, _args);
        }
        /**
         * Displays critical information about failures, which is emphasized e.g. by color
         */
        static error(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.ERROR, _message, _args);
        }
        /**
         * Displays messages from FUDGE
         */
        static fudge(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.FUDGE, _message, _args);
        }
        /**
         * Clears the output and removes previous messages if possible
         */
        static clear() {
            Debug.delegate(FudgeCore.DEBUG_FILTER.CLEAR, null, null);
        }
        /**
         * Opens a new group for messages
         */
        static group(_name) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.GROUP, _name, null);
        }
        /**
         * Opens a new group for messages that is collapsed at first
         */
        static groupCollapsed(_name) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED, _name, null);
        }
        /**
         * Closes the youngest group
         */
        static groupEnd() {
            Debug.delegate(FudgeCore.DEBUG_FILTER.GROUPEND, null, null);
        }
        /**
         * Log a branch of the node hierarchy
         */
        static branch(_branch) {
            if (_branch.nChildren > 0)
                Debug.group(_branch.name);
            else
                Debug.fudge(_branch.name);
            for (let child of _branch.getChildren())
                Debug.branch(child);
            if (_branch.nChildren > 0)
                Debug.groupEnd();
        }
        /**
         * Displays messages about the source of the debug call
         */
        static source(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.SOURCE, _message, _args);
        }
        /**
         * Lookup all delegates registered to the filter and call them using the given arguments
         */
        static delegate(_filter, _message, _args) {
            if (_filter == FudgeCore.DEBUG_FILTER.LOG || _filter == FudgeCore.DEBUG_FILTER.WARN || _filter == FudgeCore.DEBUG_FILTER.ERROR) {
                if (Debug.delegates[FudgeCore.DEBUG_FILTER.SOURCE])
                    for (let delegate of Debug.delegates[FudgeCore.DEBUG_FILTER.SOURCE].values())
                        if (delegate) {
                            let trace = new Error("Test").stack.split("\n");
                            delegate(trace[3]);
                        }
            }
            let delegates = Debug.delegates[_filter];
            for (let delegate of delegates.values())
                if (delegate)
                    if (_args && _args.length > 0)
                        delegate(_message, ..._args);
                    else
                        delegate(_message);
        }
        /**
         * setup routing to standard console
         */
        static setupConsole() {
            let result = {};
            let filters = [
                FudgeCore.DEBUG_FILTER.INFO, FudgeCore.DEBUG_FILTER.LOG, FudgeCore.DEBUG_FILTER.WARN, FudgeCore.DEBUG_FILTER.ERROR, FudgeCore.DEBUG_FILTER.FUDGE,
                FudgeCore.DEBUG_FILTER.CLEAR, FudgeCore.DEBUG_FILTER.GROUP, FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED, FudgeCore.DEBUG_FILTER.GROUPEND,
                FudgeCore.DEBUG_FILTER.SOURCE
            ];
            for (let filter of filters)
                result[filter] = new Map([[FudgeCore.DebugConsole, FudgeCore.DebugConsole.delegates[filter]]]);
            result[FudgeCore.DEBUG_FILTER.SOURCE].delete(FudgeCore.DebugConsole);
            return result;
        }
    }
    FudgeCore.Debug = Debug;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /** Extends EventTarget to work with {@link EventListenerUnified} and {@link EventUnified} */
    class EventTargetUnified extends EventTarget {
        /**
         * See {@link EventTarget.addEventListener} for reference. Works with {@link EventListenerUnified} and {@link EventUnified}
         */
        addEventListener(_type, _handler, _options) {
            super.addEventListener(_type, _handler, _options);
        }
        /**
         * See {@link EventTarget.removeEventListener} for reference. Works with {@link EventListenerUnified} and {@link EventUnified}
         */
        removeEventListener(_type, _handler, _options) {
            super.removeEventListener(_type, _handler, _options);
        }
        /**
         * See {@link EventTarget.dispatchEvent} for reference. Works with with {@link EventUnified}
         */
        dispatchEvent(_event) {
            return super.dispatchEvent(_event);
        }
    }
    FudgeCore.EventTargetUnified = EventTargetUnified;
    /**
     * Base class for EventTarget singletons, which are fixed entities in the structure of FUDGE, such as the core loop
     */
    class EventTargetStatic extends EventTargetUnified {
        static { this.targetStatic = new EventTargetStatic(); }
        constructor() {
            super();
        }
        /**
         * Add an event listener to {@link targetStatic}.
         */
        static addEventListener(_type, _handler) {
            EventTargetStatic.targetStatic.addEventListener(_type, _handler);
        }
        /**
         * Remove an event listener from {@link targetStatic}.
         */
        static removeEventListener(_type, _handler) {
            EventTargetStatic.targetStatic.removeEventListener(_type, _handler);
        }
        /**
         * Dispatch an event on {@link targetStatic}.
         */
        static dispatchEvent(_event) {
            EventTargetStatic.targetStatic.dispatchEvent(_event);
            return true;
        }
    }
    FudgeCore.EventTargetStatic = EventTargetStatic;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // export interface MutatorForComponent extends Mutator { readonly forUserComponent: null; }
    /**
     * Collect applicable attributes of the instance and copies of their values in a Mutator-object
     */
    function getMutatorOfArbitrary(_object) {
        let mutator = {};
        let attributes = Reflect.ownKeys(Reflect.getPrototypeOf(_object));
        for (let attribute of attributes) {
            let value = Reflect.get(_object, attribute);
            if (value instanceof Function)
                continue;
            // if (value instanceof Object && !(value instanceof Mutable))
            //   continue;
            mutator[attribute.toString()] = value;
        }
        return mutator;
    }
    FudgeCore.getMutatorOfArbitrary = getMutatorOfArbitrary;
    // @ts-ignore - as of now we need to polyfill the symbol to make decorator metadata work, see https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-2.html#decorator-metadata
    Symbol.metadata ??= Symbol("Symbol.metadata");
    /**
     * Decorator to specify a type (constructor) for an attribute within a class's {@link Metadata | metadata}.
     * This way, the intended type of an attribute is known at runtime. Use this to make an attribute a valid drop target in the editor.
     */
    function type(_constructor) {
        return (_value, _context) => {
            let name = _context.name;
            let metadata = _context.metadata;
            let types = metadata.attributeTypes ??= {};
            types[name] = _constructor;
        };
    }
    FudgeCore.type = type;
    /**
     * Base class for all types being mutable using {@link Mutator}-objects, thus providing and using interfaces created at runtime.
     * Mutables provide a {@link Mutator} that is build by collecting all object-properties that are either of a primitive type or again Mutable.
     * Subclasses can either reduce the standard {@link Mutator} built by this base class by deleting properties or implement an individual getMutator-method.
     * The provided properties of the {@link Mutator} must match public properties or getters/setters of the object.
     * Otherwise, they will be ignored if not handled by an override of the mutate-method in the subclass and throw errors in an automatically generated user-interface for the object.
     */
    class Mutable extends FudgeCore.EventTargetUnified {
        /**
         * Decorator allows to attach {@link Mutable} functionality to existing classes.
         */
        // public static decorate(_constructor: Function): void {
        //   Object.defineProperty(_constructor.prototype, "useRenderData", {
        //     value: function getMutator(this: MutableForUserInterface): Mutator {
        //       return getMutatorOfArbitrary(this);
        //     }
        //   });
        // }
        static getMutatorFromPath(_mutator, _path) {
            let key = _path[0];
            let mutator = {};
            if (_mutator[key] == undefined) // if the path deviates from mutator structure, return the mutator
                return _mutator;
            mutator[key] = _mutator[key];
            if (_path.length > 1)
                mutator[key] = Mutable.getMutatorFromPath(mutator[key], _path.slice(1, _path.length));
            return mutator;
        }
        /**
         * Retrieves the type of this mutable subclass as the name of the runtime class
         * @returns The type of the mutable
         */
        get type() {
            return this.constructor.name;
        }
        /**
         * Collect applicable attributes of the instance and copies of their values in a Mutator-object.
         * By default, a mutator cannot be extended, since extensions are not available in the object the mutator belongs to.
         * A mutator may be reduced by the descendants of {@link Mutable} to contain only the properties needed.
         */
        getMutator(_extendable = false) {
            let mutator = {};
            // collect primitive and mutable attributes
            for (let attribute in this) {
                let value = this[attribute];
                if (value instanceof Function)
                    continue;
                if (value instanceof Object && !(value instanceof Mutable) && !(value instanceof FudgeCore.MutableArray) && !(value.hasOwnProperty("idResource")))
                    continue;
                mutator[attribute] = this[attribute];
            }
            if (!_extendable)
                // mutator can be reduced but not extended!
                Object.preventExtensions(mutator);
            // delete unwanted attributes
            this.reduceMutator(mutator);
            // replace references to mutable objects with references to mutators
            for (let attribute in mutator) {
                let value = mutator[attribute];
                if (value instanceof Mutable)
                    mutator[attribute] = value.getMutator();
                if (value instanceof FudgeCore.MutableArray)
                    mutator[attribute] = value.map((_value) => _value.getMutator());
            }
            return mutator;
        }
        /**
         * Collect the attributes of the instance and their values applicable for animation.
         * Basic functionality is identical to {@link getMutator}, returned mutator should then be reduced by the subclassed instance
         */
        getMutatorForAnimation() {
            return this.getMutator();
        }
        /**
         * Collect the attributes of the instance and their values applicable for the user interface.
         * Basic functionality is identical to {@link getMutator}, returned mutator should then be reduced by the subclassed instance
         */
        getMutatorForUserInterface() {
            return this.getMutator();
        }
        /**
         * Collect the attributes of the instance and their values applicable for indiviualization by the component.
         * Basic functionality is identical to {@link getMutator}, returned mutator should then be reduced by the subclassed instance
         */
        // public getMutatorForComponent(): MutatorForComponent {
        //     return <MutatorForComponent>this.getMutator();
        // }
        /**
         * Returns an associative array with the same attributes as the given mutator, but with the corresponding types as string-values.
         * Does not recurse into objects!
         */
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            for (let attribute in _mutator) {
                let type;
                let value = _mutator[attribute];
                if (value != undefined)
                    if (typeof value == "object")
                        type = this[attribute].constructor.name;
                    else if (typeof value == "function")
                        type = value.name;
                    else
                        type = value.constructor.name;
                types[attribute] = type;
            }
            return types;
        }
        /**
         * Retrieves the specified {@link Metadata.attributeTypes | attribute types} from the {@link Metadata | metadata} of this instance's class , if available.
         */
        getMetaAttributeTypes() {
            return this.getMetadata()?.attributeTypes;
        }
        /**
         * Retrieves the {@link Metadata | metadata} of this instance's class, if available.
         */
        getMetadata() {
            return this.constructor[Symbol.metadata];
        }
        /**
         * Updates the values of the given mutator according to the current state of the instance
         * @param _mutator
         */
        updateMutator(_mutator) {
            for (let attribute in _mutator) {
                let value = _mutator[attribute];
                if (value instanceof Mutable)
                    _mutator[attribute] = value.getMutator();
                else
                    _mutator[attribute] = this[attribute];
            }
        }
        /**
         * Updates the attribute values of the instance according to the state of the mutator.
         * The mutation may be restricted to a subset of the mutator and the event dispatching suppressed.
         * Uses mutateBase, but can be overwritten in subclasses
         */
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await this.mutateBase(_mutator, _selection);
            if (_dispatchMutate)
                this.dispatchEvent(new CustomEvent("mutate" /* EVENT.MUTATE */, { bubbles: true, detail: { mutator: _mutator } }));
        }
        /**
         * Base method for mutation, always available to subclasses. Do not overwrite in subclasses!
         */
        async mutateBase(_mutator, _selection) {
            let mutator = {};
            if (!_selection)
                mutator = _mutator;
            else
                for (let attribute of _selection) // reduce the mutator to the selection
                    if (typeof (_mutator[attribute]) !== "undefined")
                        mutator[attribute] = _mutator[attribute];
            for (let attribute in mutator) {
                if (!Reflect.has(this, attribute))
                    continue;
                let mutant = Reflect.get(this, attribute);
                let value = mutator[attribute];
                if (mutant instanceof FudgeCore.MutableArray || mutant instanceof Mutable)
                    await mutant.mutate(value, null, false);
                else
                    Reflect.set(this, attribute, value);
            }
        }
    }
    FudgeCore.Mutable = Mutable;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Handles the external serialization and deserialization of {@link Serializable} objects. The internal process is handled by the objects themselves.
     * A {@link Serialization} object can be created from a {@link Serializable} object and a JSON-String may be created from that.
     * Vice versa, a JSON-String can be parsed to a {@link Serialization} which can be deserialized to a {@link Serializable} object.
     * ```text
     *  [Serializable] ‚Üí (serialize) ‚Üí [Serialization] ‚Üí (stringify) ‚Üí [String] ‚Üí (save or send)
     *                                        ‚Üì                            ‚Üì                  ‚Üì
     *                [Serializable] ‚Üê (deserialize) ‚Üê [Serialization] ‚Üê (parse) ‚Üê (load) ‚Üê [Medium]
     * ```
     * While the internal serialize/deserialize method1s of the objects care of the selection of information needed to recreate the object and its structure,
     * the {@link Serializer} keeps track of the namespaces and classes in order to recreate {@link Serializable} objects. The general structure of a {@link Serialization} is as follows
     * ```text
     * {
     *      namespaceName.className: {
     *          propertyName: propertyValue,
     *          ...,
     *          propertyNameOfReference: SerializationOfTheReferencedObject,
     *          ...,
     *          constructorNameOfSuperclass: SerializationOfSuperClass
     *      }
     * }
     * ```
     * Since the instance of the superclass is created automatically when an object is created,
     * the SerializationOfSuperClass omits the the namespaceName.className key and consists only of its value.
     * The constructorNameOfSuperclass is given instead as a property name in the serialization of the subclass.
     */
    class Serializer {
        /** In order for the Serializer to create class instances, it needs access to the appropriate namespaces */
        static { this.namespaces = { "∆í": FudgeCore }; }
        /**
         * Registers a namespace to the {@link Serializer}, to enable automatic instantiation of classes defined within
         */
        static registerNamespace(_namespace) {
            for (let name in Serializer.namespaces)
                if (Serializer.namespaces[name] == _namespace)
                    return name;
            let name = Serializer.findNamespaceIn(_namespace, window);
            if (!name)
                for (let parentName in Serializer.namespaces) {
                    name = Serializer.findNamespaceIn(_namespace, Serializer.namespaces[parentName]);
                    if (name) {
                        name = parentName + "." + name;
                        break;
                    }
                }
            if (!name)
                throw new Error("Namespace not found. Maybe parent namespace hasn't been registered before?");
            Serializer.namespaces[name] = _namespace;
            return name;
        }
        /**
         * Returns a javascript object representing the serializable FUDGE-object given,
         * including attached components, children, superclass-objects all information needed for reconstruction
         * @param _object An object to serialize, implementing the {@link Serializable} interface
         */
        static serialize(_object) {
            let serialization = {};
            // TODO: save the namespace with the constructors name
            // serialization[_object.constructor.name] = _object.serialize();
            let path = this.getFullPath(_object);
            if (!path)
                throw new Error(`Namespace of serializable object of type ${_object.constructor.name} not found. Maybe the namespace hasn't been registered or the class not exported?`);
            serialization[path] = _object.serialize();
            return serialization;
            // return _object.serialize();
        }
        /**
         * Returns a FUDGE-object reconstructed from the information in the {@link Serialization} given,
         * including attached components, children, superclass-objects
         */
        static async deserialize(_serialization) {
            let reconstruct;
            let path;
            try {
                // loop constructed solely to access type-property. Only one expected!
                for (path in _serialization) {
                    reconstruct = Serializer.reconstruct(path);
                    reconstruct = await reconstruct.deserialize(_serialization[path]);
                    return reconstruct;
                }
            }
            catch (_error) {
                let message = `Deserialization of ${path}, ${reconstruct ? Reflect.get(reconstruct, "idResource") : ""} failed: ` + _error;
                throw new Error(message);
            }
            return null;
        }
        /**
         * Returns an Array of javascript object representing the serializable FUDGE-objects given in the array,
         * including attached components, children, superclass-objects all information needed for reconstruction
         */
        static serializeArray(_type, _objects) {
            let serializations = [];
            let path = this.getFullPath(new _type());
            if (!path)
                throw new Error(`Namespace of serializable object of type ${_type.name} not found. Maybe the namespace hasn't been registered or the class not exported?`);
            for (let object of _objects)
                serializations.push(object.serialize());
            let serialization = {};
            serialization[path] = serializations;
            return serialization;
        }
        /**
         * Returns an Array of FUDGE-objects reconstructed from the information in the array of {@link Serialization}s given,
         * including attached components, children, superclass-objects
         */
        static async deserializeArray(_serialization) {
            let serializables = [];
            let construct;
            let serializations = [];
            try {
                // loop constructed solely to access type-property. Only one expected!
                for (let path in _serialization) {
                    construct = Serializer.getConstructor(path);
                    serializations = _serialization[path];
                    break;
                }
            }
            catch (_error) {
                throw new Error("Deserialization failed: " + _error);
            }
            for (let serialization of serializations) {
                let serializable = new construct();
                await serializable.deserialize(serialization);
                serializables.push(serializable);
            }
            return serializables;
        }
        //TODO: implement prettifier to make JSON-Stringification of serializations more readable, e.g. placing x, y and z in one line
        /**
         * Prettify a JSON-String, to make it more readable.
         * not implemented yet
         */
        static prettify(_json) { return _json; }
        /**
         * Returns a formatted, human readable JSON-String, representing the given {@link Serialization} that may have been created by {@link Serializer}.serialize
         * @param _serialization
         */
        static stringify(_serialization) {
            // adjustments to serialization can be made here before stringification, if desired
            let json = JSON.stringify(_serialization, null, 2);
            let pretty = Serializer.prettify(json);
            return pretty;
        }
        /**
         * Returns a {@link Serialization} created from the given JSON-String. Result may be passed to {@link Serializer.deserialize}
         * @param _json
         */
        static parse(_json) {
            return JSON.parse(_json);
        }
        /**
         * Creates an object of the class defined with the full path including the namespaceName(s) and the className seperated by dots(.)
         * @param _path
         */
        static reconstruct(_path) {
            let constructor = Serializer.getConstructor(_path);
            let reconstruction = new constructor();
            return reconstruction;
        }
        // public static getConstructor<T extends Serializable>(_type: string, _namespace: Object = FudgeCore): new () => T {
        /**
         * Returns the constructor from the given path to a class
         */
        static getConstructor(_path) {
            let typeName = _path.substring(_path.lastIndexOf(".") + 1);
            let namespace = Serializer.getNamespace(_path);
            if (!namespace)
                throw new Error(`Constructor of serializable object of type ${_path} not found. Maybe the namespace hasn't been registered?`);
            return namespace[typeName];
        }
        /**
         * Returns the full path to the class of the object, if found in the registered namespaces
         * @param _object
         */
        static getFullPath(_object) {
            let typeName = _object.constructor.name;
            // Debug.log("Searching namespace of: " + typeName);
            for (let namespaceName in Serializer.namespaces) {
                let found = Serializer.namespaces[namespaceName][typeName];
                if (found && _object instanceof found)
                    return namespaceName + "." + typeName;
            }
            return null;
        }
        /**
         * Returns the namespace-object defined within the full path, if registered
         * @param _path
         */
        static getNamespace(_path) {
            let namespaceName = _path.substr(0, _path.lastIndexOf("."));
            return Serializer.namespaces[namespaceName] || FudgeCore;
        }
        /**
         * Finds the namespace-object in properties of the parent-object (e.g. window), if present
         * @param _namespace
         * @param _parent
         */
        static findNamespaceIn(_namespace, _parent) {
            for (let prop in _parent)
                if (_parent[prop] == _namespace)
                    return prop;
            return null;
        }
    }
    FudgeCore.Serializer = Serializer;
    /**
     * Creates a new (abstract) class implementing {@link SerializableResourceExternal} from any class that implements {@link SerializableResource} by mixing in the functionality to load the resource from an external source.
     * @internal
     * @authors Jonas Plotzky, HFU, 2024
     */
    function mixinSerializableResourceExternal(_base) {
        class SerializableResourceExternal extends _base {
            constructor() {
                super(...arguments);
                this.status = FudgeCore.RESOURCE_STATUS.PENDING;
            }
            /**
             * Returns a {@link Serialization} of this resource. Only the data needed to load it from the external source is serialized ("url", "name", "idResource").
             */
            serialize() {
                const serialization = {
                    idResource: this.idResource,
                    name: this.name,
                    type: this.type,
                    url: this.url.toString()
                };
                return serialization;
            }
            async deserialize(_serialization) {
                FudgeCore.Project.register(this, _serialization.idResource);
                this.url = _serialization.url;
                this.name = _serialization.name;
                return this.load();
            }
        }
        ;
        if (_base.prototype instanceof FudgeCore.Mutable) {
            /**
             * Mixin the {@link Mutable} functionality into the class
             * @authors Jonas Plotzky, HFU, 2024
             */
            function mixinMutableSerializableResourceExternal(_base) {
                class MutableSerializableResourceExternal extends _base {
                    async mutate(_mutator, _selection = null, _dispatchMutate = true) {
                        await super.mutate(_mutator, _selection, false);
                        if (_mutator.url != undefined || _mutator.name != undefined)
                            await this.load();
                    }
                    reduceMutator(_mutator) {
                        delete _mutator.status;
                    }
                }
                return MutableSerializableResourceExternal;
            }
            return mixinMutableSerializableResourceExternal(SerializableResourceExternal);
        }
        return SerializableResourceExternal;
    }
    FudgeCore.mixinSerializableResourceExternal = mixinSerializableResourceExternal;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Represents a node in the scenetree.
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Graph
     */
    class Node extends FudgeCore.EventTargetUnified {
        #mtxWorldInverseUpdated;
        #mtxWorldInverse;
        /**
         * Creates a new node with a name and initializes all attributes
         */
        constructor(_name) {
            super();
            this.mtxWorld = FudgeCore.Matrix4x4.IDENTITY();
            this.timestampUpdate = 0;
            /** The number of nodes of the whole branch including this node and all successors */
            this.nNodesInBranch = 0;
            /** The radius of the bounding sphere in world dimensions enclosing the geometry of this node and all successors in the branch */
            this.radius = 0;
            this.parent = null; // The parent of this node.
            this.children = []; // array of child nodes appended to this node.
            this.components = {};
            // private tags: string[] = []; // Names of tags that are attached to this node. (TODO: As of yet no functionality)
            // private layers: string[] = []; // Names of the layers this node is on. (TODO: As of yet no functionality)
            this.listeners = {};
            this.captures = {};
            this.active = true;
            /**
             * Simply calls {@link addChild}. This reference is here solely because appendChild is the equivalent method in DOM.
             * See and preferably use {@link addChild}
             */
            // eslint-disable-next-line @typescript-eslint/member-ordering
            this.appendChild = this.addChild;
            this.name = _name;
        }
        /**
         * Return the mutator-like path string to get from one node to another or null if no path is found e.g.:
         * ```typescript
         * "node/parent/children/1/components/ComponentSkeleton/0"
         * ```
         */
        static PATH_FROM_TO(_from, _to) {
            const from = _from instanceof FudgeCore.Component ? _from.node : _from;
            const to = _to instanceof FudgeCore.Component ? _to.node : _to;
            if (!from || !to)
                return null;
            // find paths to lowest common ancestor
            let pathFrom = from.getPath();
            let pathTo = to.getPath();
            let ancestor = null;
            while (pathFrom.length && pathTo.length && pathFrom[0] == pathTo[0]) {
                ancestor = pathFrom.shift();
                pathTo.shift();
            }
            pathTo.unshift(ancestor);
            if (!ancestor)
                return null;
            // create relative path
            let pathToAncestor = pathFrom.map(_node => "parent"); // TODO: use "keyof Node" as type
            let pathFromAncestor = pathTo
                .flatMap((_node, _index, _array) => ["children", _node.findChild(_array[_index + 1]).toString()])
                .slice(0, -2);
            if (_from instanceof FudgeCore.Component)
                pathToAncestor.unshift("node");
            if (_to instanceof FudgeCore.Component)
                pathFromAncestor.push("components", _to.type, to.components[_to.type].indexOf(_to).toString());
            return pathToAncestor.concat(pathFromAncestor).join("/"); // TODO: or maybe validate this string with node and component objects?
        }
        /**
         * Return the {@link Node} or {@link Component} found at the given path starting from the given node or undefined if not found
         */
        static FIND(_from, _path) {
            if (_path == "")
                return _from;
            let path = _path.split("/");
            let to = _from;
            while (path.length && to)
                to = Reflect.get(to, path.shift());
            return to;
        }
        get isActive() {
            return this.active;
        }
        /**
         * Shortcut to retrieve this nodes {@link ComponentTransform}
         */
        get cmpTransform() {
            return this.getComponents(FudgeCore.ComponentTransform)?.[0];
        }
        /**
         * Shortcut to retrieve the local {@link Matrix4x4} attached to this nodes {@link ComponentTransform}
         * Fails if no {@link ComponentTransform} is attached
         */
        get mtxLocal() {
            return this.cmpTransform?.mtxLocal;
        }
        get mtxWorldInverse() {
            if (this.#mtxWorldInverseUpdated != this.timestampUpdate)
                this.#mtxWorldInverse = FudgeCore.Matrix4x4.INVERSE(this.mtxWorld);
            this.#mtxWorldInverseUpdated = this.timestampUpdate;
            return this.#mtxWorldInverse;
        }
        /**
         * Returns the number of children attached to this
         */
        get nChildren() {
            return this.children.length;
        }
        /**
         * Generator yielding the node and all decendants in the graph below for iteration
         * Inactive nodes and their descendants can be filtered
         */
        *getIterator(_active = false) {
            if (!_active || this.isActive) {
                yield this;
                for (let child of this.children)
                    yield* child.getIterator(_active);
            }
        }
        /**
         * Returns an iterator over this node and all its descendants in the graph below
         */
        [Symbol.iterator]() {
            return this.getIterator();
        }
        /**
         * De- / Activate this node. Inactive nodes will not be processed by the renderer.
         */
        activate(_on) {
            this.active = _on;
            this.dispatchEvent(new Event(_on ? "nodeActivate" /* EVENT.NODE_ACTIVATE */ : "nodeDeactivate" /* EVENT.NODE_DEACTIVATE */, { bubbles: true }));
            this.broadcastEvent(new Event(_on ? "nodeActivate" /* EVENT.NODE_ACTIVATE */ : "nodeDeactivate" /* EVENT.NODE_DEACTIVATE */));
        }
        // #region Scenetree
        /**
         * Returns a reference to this nodes parent node
         */
        getParent() {
            return this.parent;
        }
        /**
         * Traces back the ancestors of this node and returns the first
         */
        getAncestor() {
            let ancestor = this;
            while (ancestor.getParent())
                ancestor = ancestor.getParent();
            return ancestor;
        }
        /**
         * Traces the hierarchy upwards to the first ancestor and returns the path through the graph to this node
         */
        getPath() {
            let ancestor = this;
            let path = [this];
            while (ancestor.getParent())
                path.unshift(ancestor = ancestor.getParent());
            return path;
        }
        /**
         * Returns child at the given index in the list of children
         */
        getChild(_index) {
            return this.children[_index];
        }
        /**
         * Returns a clone of the list of children
         */
        getChildren() {
            return this.children.slice(0);
        }
        /**
         * Returns an array of references to childnodes with the supplied name.
         */
        getChildrenByName(_name) {
            let found = [];
            found = this.children.filter((_node) => _node.name == _name);
            return found;
        }
        addChild(_child, _index) {
            if (this.children.includes(_child) && _index == undefined)
                // _node is already a child of this
                return;
            let inAudioGraph = false;
            let graphListened = FudgeCore.AudioManager.default.getGraphListeningTo();
            let ancestor = this;
            while (ancestor) {
                ancestor.timestampUpdate = 0;
                inAudioGraph = inAudioGraph || (ancestor == graphListened);
                if (ancestor == _child)
                    throw (new Error("Cyclic reference prohibited in node hierarchy, ancestors must not be added as children"));
                else
                    ancestor = ancestor.parent;
            }
            let previousParent = _child.parent;
            if (previousParent == this && _index > previousParent.findChild(_child))
                _index--;
            if (previousParent)
                previousParent.removeChild(_child);
            this.children.splice(_index ?? this.children.length, 0, _child);
            _child.parent = this;
            _child.dispatchEvent(new Event("childAppend" /* EVENT.CHILD_APPEND */, { bubbles: true }));
            if (inAudioGraph)
                _child.broadcastEvent(new Event("childAppendToAudioGraph" /* EVENT_AUDIO.CHILD_APPEND */));
        }
        /**
         * Removes the reference to the give node from the list of children
         */
        removeChild(_child) {
            let found = this.findChild(_child);
            if (found < 0)
                return;
            _child.dispatchEvent(new Event("childRemove" /* EVENT.CHILD_REMOVE */, { bubbles: true }));
            _child.broadcastEvent(new Event("nodeDeactivate" /* EVENT.NODE_DEACTIVATE */));
            if (this.isDescendantOf(FudgeCore.AudioManager.default.getGraphListeningTo()))
                _child.broadcastEvent(new Event("childRemoveFromAudioGraph" /* EVENT_AUDIO.CHILD_REMOVE */));
            this.children.splice(found, 1);
            _child.parent = null;
        }
        /**
         * Removes all references in the list of children
         */
        removeAllChildren() {
            while (this.children.length)
                this.removeChild(this.children[0]);
        }
        /**
         * Returns the position of the node in the list of children or -1 if not found
         */
        findChild(_search) {
            return this.children.indexOf(_search);
        }
        /**
         * Replaces a child node with another, preserving the position in the list of children
         */
        replaceChild(_replace, _with) {
            let found = this.findChild(_replace);
            if (found < 0)
                return false;
            let previousParent = _with.getParent();
            if (previousParent)
                previousParent.removeChild(_with);
            _replace.parent = null;
            this.children[found] = _with;
            _with.parent = this;
            _with.dispatchEvent(new Event("childAppend" /* EVENT.CHILD_APPEND */, { bubbles: true }));
            if (this.isDescendantOf(FudgeCore.AudioManager.default.getGraphListeningTo()))
                _with.broadcastEvent(new Event("childAppendToAudioGraph" /* EVENT_AUDIO.CHILD_APPEND */));
            return true;
        }
        /**
         * Returns true if the given timestamp matches the last update timestamp this node underwent, else false
         */
        isUpdated(_timestampUpdate) {
            return (this.timestampUpdate == _timestampUpdate);
        }
        /**
         * Returns true if this node is a descendant of the given node, directly or indirectly, else false
         */
        isDescendantOf(_ancestor) {
            let node = this;
            while (node && node != _ancestor)
                node = node.parent;
            return (node != null);
        }
        /**
         * Applies a Mutator from {@link Animation} to all its components and transfers it to its children.
         */
        applyAnimation(_mutator) {
            if ("components" in _mutator) {
                for (const componentType in _mutator.components) {
                    let componentsOfType = this.components[componentType]; // TODO: add errors if node doesn't contain property
                    let mutatorsForType = _mutator.components[componentType];
                    if (componentsOfType != undefined && mutatorsForType != undefined) {
                        for (const i in mutatorsForType) {
                            componentsOfType[i].mutate(mutatorsForType[i], null, false);
                        }
                    }
                }
            }
            if ("children" in _mutator) {
                for (const childName in _mutator.children) {
                    for (const childNode of this.getChildrenByName(childName)) {
                        childNode.applyAnimation(_mutator.children[childName]);
                    }
                }
            }
        }
        // #endregion
        // #region Components
        /**
         * Returns a list of all components attached to this node, independent of type.
         */
        getAllComponents() {
            let all = [];
            for (let type in this.components) {
                all = all.concat(this.components[type]);
            }
            return all;
        }
        /**
         * Returns a clone of the list of components of the given class attached to this node.
         */
        getComponents(_class) {
            return (this.components[_class.name] || []).slice(0);
        }
        /**
         * Returns the first compontent found of the given class attached this node or null, if list is empty or doesn't exist
         */
        getComponent(_class) {
            let list = this.components[_class.name];
            if (list)
                return list[0];
            return null;
        }
        /**
         * Attach the given component to this node. Identical to {@link addComponent}
         */
        attach(_component) {
            this.addComponent(_component);
        }
        /**
         * Attach the given component to this node
         */
        addComponent(_component) {
            if (_component.node == this)
                return;
            let cmpList = this.components[_component.type];
            if (cmpList === undefined)
                this.components[_component.type] = [_component];
            else if (cmpList.length && _component.isSingleton)
                throw new Error(`Component ${_component.type} is marked singleton and can't be attached, no more than one allowed`);
            else
                cmpList.push(_component);
            _component.attachToNode(this);
            _component.dispatchEvent(new Event("componentAdd" /* EVENT.COMPONENT_ADD */));
            this.dispatchEventToTargetOnly(new CustomEvent("componentAdd" /* EVENT.COMPONENT_ADD */, { detail: _component })); // TODO: see if this is be feasable
        }
        /**
         * Detach the given component from this node. Identical to {@link removeComponent}
         */
        detach(_component) {
            this.removeComponent(_component);
        }
        /**
         * Removes all components of the given class attached to this node.
         */
        removeComponents(_class) {
            this.getComponents(_class).forEach(_component => this.removeComponent(_component));
        }
        /**
         * Removes the given component from the node, if it was attached, and sets its parent to null.
         */
        removeComponent(_component) {
            try {
                let componentsOfType = this.components[_component.type];
                let foundAt = componentsOfType.indexOf(_component);
                if (foundAt < 0)
                    return;
                _component.dispatchEvent(new Event("componentRemove" /* EVENT.COMPONENT_REMOVE */));
                this.dispatchEventToTargetOnly(new CustomEvent("componentRemove" /* EVENT.COMPONENT_REMOVE */, { detail: _component })); // TODO: see if this would be feasable
                componentsOfType.splice(foundAt, 1);
                _component.attachToNode(null);
            }
            catch (_error) {
                throw new Error(`Unable to remove component '${_component}'in node named '${this.name}'`);
            }
        }
        // #endregion
        // #region Serialization
        serialize() {
            let serialization = {
                name: this.name,
                active: this.active
            };
            let components = {};
            for (let type in this.components) {
                components[type] = [];
                for (let component of this.components[type]) {
                    // components[type].push(component.serialize());
                    components[type].push(FudgeCore.Serializer.serialize(component));
                }
            }
            serialization["components"] = components;
            let children = [];
            for (let child of this.children) {
                children.push(FudgeCore.Serializer.serialize(child));
            }
            serialization["children"] = children;
            this.dispatchEvent(new Event("nodeSerialized" /* EVENT.NODE_SERIALIZED */));
            return serialization;
        }
        async deserialize(_serialization) {
            this.name = _serialization.name;
            // this.parent = is set when the nodes are added
            // deserialize components first so scripts can react to children being appended
            for (let type in _serialization.components) {
                for (let serializedComponent of _serialization.components[type]) {
                    let deserializedComponent = await FudgeCore.Serializer.deserialize(serializedComponent);
                    this.addComponent(deserializedComponent);
                }
            }
            if (_serialization.children)
                for (let serializedChild of _serialization.children) {
                    let deserializedChild = await FudgeCore.Serializer.deserialize(serializedChild);
                    this.appendChild(deserializedChild);
                }
            this.dispatchEvent(new Event("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */));
            for (let component of this.getAllComponents())
                component.dispatchEvent(new Event("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */));
            // TODO: consider if this is a good idea
            // const hndGraphDeserialized: EventListenerUnified = () => {
            //   for (let component of this.getAllComponents())
            //     component.dispatchEvent(new Event(EVENT.GRAPH_DESERIALIZED, { bubbles: false }));
            //   this.removeEventListener(EVENT.GRAPH_DESERIALIZED, hndGraphDeserialized, true);
            //   this.removeEventListener(EVENT.GRAPH_INSTANTIATED, hndGraphDeserialized, true);
            // };
            // this.addEventListener(EVENT.GRAPH_DESERIALIZED, hndGraphDeserialized, true);
            // this.addEventListener(EVENT.GRAPH_INSTANTIATED, hndGraphDeserialized, true);
            this.activate(_serialization.active);
            return this;
        }
        // #endregion
        /**
         * Creates a string as representation of this node and its descendants
         */
        toHierarchyString(_node = null, _level = 0) {
            // TODO: refactor for better readability
            if (!_node)
                _node = this;
            let prefix = "+".repeat(_level);
            let output = prefix + " " + _node.name + " | ";
            for (let type in _node.components)
                output += _node.components[type].length + " " + type.split("Component").pop() + ", ";
            output = output.slice(0, -2) + "</br>";
            for (let child of _node.children) {
                output += this.toHierarchyString(child, _level + 1);
            }
            return output;
        }
        // #region Events
        /**
         * Adds an event listener to the node. The given handler will be called when a matching event is passed to the node.
         * Deviating from the standard EventTarget, here the _handler must be a function and _capture is the only option.
         */
        addEventListener(_type, _handler, _capture = false) {
            let listListeners = _capture ? this.captures : this.listeners;
            if (!listListeners[_type])
                listListeners[_type] = [];
            listListeners[_type].push(_handler);
        }
        /**
         * Removes an event listener from the node. The signature must match the one used with addEventListener
         */
        removeEventListener(_type, _handler, _capture = false) {
            let listenersForType = _capture ? this.captures[_type] : this.listeners[_type];
            if (listenersForType)
                for (let i = listenersForType.length - 1; i >= 0; i--)
                    if (listenersForType[i] == _handler)
                        listenersForType.splice(i, 1);
        }
        /**
         * Dispatches a synthetic event to target. This implementation always returns true (standard: return true only if either event's cancelable attribute value is false or its preventDefault() method was not invoked)
         * The event travels into the hierarchy to this node dispatching the event, invoking matching handlers of the nodes ancestors listening to the capture phase,
         * than the matching handler of the target node in the target phase, and back out of the hierarchy in the bubbling phase, invoking appropriate handlers of the anvestors
         */
        dispatchEvent(_event) {
            let ancestors = [];
            let upcoming = this;
            // overwrite event target
            Object.defineProperty(_event, "target", { writable: true, value: this });
            // TODO: consider using Reflect instead of Object throughout. See also Render and Mutable...
            while (upcoming.parent)
                ancestors.push(upcoming = upcoming.parent);
            Object.defineProperty(_event, "path", { writable: true, value: new Array(this, ...ancestors) });
            // capture phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.CAPTURING_PHASE });
            for (let i = ancestors.length - 1; i >= 0; i--) {
                let ancestor = ancestors[i];
                Object.defineProperty(_event, "currentTarget", { writable: true, value: ancestor });
                this.callListeners(ancestor.captures[_event.type], _event);
            }
            // target phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.AT_TARGET });
            Object.defineProperty(_event, "currentTarget", { writable: true, value: this });
            this.callListeners(this.captures[_event.type], _event);
            this.callListeners(this.listeners[_event.type], _event);
            if (!_event.bubbles)
                return true;
            // bubble phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.BUBBLING_PHASE });
            for (let i = 0; i < ancestors.length; i++) {
                let ancestor = ancestors[i];
                Object.defineProperty(_event, "currentTarget", { writable: true, value: ancestor });
                this.callListeners(ancestor.listeners[_event.type], _event);
            }
            return true; //TODO: return a meaningful value, see documentation of dispatch event
        }
        /**
         * Dispatches a synthetic event to target without travelling through the graph hierarchy neither during capture nor bubbling phase
         */
        dispatchEventToTargetOnly(_event) {
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.AT_TARGET });
            Object.defineProperty(_event, "currentTarget", { writable: true, value: this });
            this.callListeners(this.listeners[_event.type], _event); // TODO: examine if this should go to the captures instead of the listeners
            return true;
        }
        /**
         * Broadcasts a synthetic event to this node and from there to all nodes deeper in the hierarchy,
         * invoking matching handlers of the nodes listening to the capture phase. Watch performance when there are many nodes involved
         */
        broadcastEvent(_event) {
            // overwrite event target and phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.CAPTURING_PHASE });
            Object.defineProperty(_event, "target", { writable: true, value: this });
            this.broadcastEventRecursive(_event);
        }
        broadcastEventRecursive(_event) {
            // capture phase only
            Object.defineProperty(_event, "currentTarget", { writable: true, value: this });
            let captures = this.captures[_event.type] || [];
            for (let handler of captures)
                // @ts-ignore
                handler(_event);
            // appears to be slower, astonishingly...
            // captures.forEach(function (handler: Function): void {
            //     handler(_event);
            // });
            // same for children
            for (let child of this.children) {
                child.broadcastEventRecursive(_event);
            }
        }
        callListeners(_listeners, _event) {
            if (_listeners?.length > 0)
                for (let handler of _listeners)
                    // @ts-ignore
                    handler(_event);
        }
    }
    FudgeCore.Node = Node;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
var FudgeCore;
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
(function (FudgeCore) {
    /**
     * Superclass for all {@link Component}s that can be attached to {@link Node}s.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2020 | Jascha Karag√∂l, HFU, 2019
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Component
     */
    class Component extends FudgeCore.Mutable {
        /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
        static { this.baseClass = Component; }
        /** list of all the subclasses derived from this class, if they registered properly*/
        static { this.subclasses = []; }
        #node;
        constructor() {
            super();
            this.singleton = true;
            this.active = true;
            this.#node = null;
            this.addEventListener("mutate" /* EVENT.MUTATE */, (_event) => {
                if (this.#node) {
                    // TODO: find the number of the component in the array if not singleton
                    _event.detail.component = this;
                    //@ts-ignore
                    _event.detail.componentIndex = this.node.getComponents(this.constructor).indexOf(this);
                    this.#node.dispatchEvent(_event);
                }
            });
        }
        static registerSubclass(_subclass) { return Component.subclasses.push(_subclass) - 1; }
        get isActive() {
            return this.active;
        }
        /**
         * Is true, when only one instance of the component class can be attached to a node
         */
        get isSingleton() {
            return this.singleton;
        }
        /**
         * Retrieves the node, this component is currently attached to
         */
        get node() {
            return this.#node;
        }
        /**
         * De- / Activate this component. Inactive components will not be processed by the renderer.
         */
        activate(_on) {
            this.active = _on;
            this.dispatchEvent(new Event(_on ? "componentActivate" /* EVENT.COMPONENT_ACTIVATE */ : "componentDeactivate" /* EVENT.COMPONENT_DEACTIVATE */));
        }
        /**
         * Tries to attach the component to the given node, removing it from the node it was attached to if applicable
         */
        attachToNode(_container) {
            if (this.#node == _container)
                return;
            let previousContainer = this.#node;
            try {
                if (previousContainer)
                    previousContainer.removeComponent(this);
                this.#node = _container;
                if (this.#node)
                    this.#node.addComponent(this);
            }
            catch (_error) {
                this.#node = previousContainer;
            }
        }
        //#region Transfer
        serialize() {
            let serialization = {
                active: this.active
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.activate(_serialization.active);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            if (typeof (_mutator.active) !== "undefined")
                this.activate(_mutator.active);
        }
        reduceMutator(_mutator) {
            delete _mutator.singleton;
            delete _mutator.mtxWorld;
        }
    }
    FudgeCore.Component = Component;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Wraps a regular Javascript Array and offers very limited functionality geared solely towards avoiding garbage colletion.
     * @author Jirka Dell'Oro-Friedl, HFU, 2021
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Recycler
     */
    class RecycableArray {
        #length = 0;
        #array = new Array();
        // #type: new () => T;
        // //tslint:disable-next-line:no-any
        // constructor(_type: new (...args: any[]) => T) {
        //   this.#type = _type;
        // }
        get length() {
            return this.#length;
        }
        /**
         * Sets the virtual length of the array to zero but keeps the entries beyond.
         */
        reset() {
            this.#length = 0;
        }
        /**
         * Recycle this array
         */
        recycle() {
            this.reset();
        }
        /**
         * Appends a new entry to the end of the array, and returns the new length of the array.
         */
        push(_entry) {
            this.#array[this.#length] = _entry;
            this.#length++;
            return this.#length;
        }
        /**
         * Removes the last entry from the array and returns it.
         */
        pop() {
            this.#length--;
            return this.#array[this.#length];
        }
        /**
         * Recycles the object following the last in the array and increases the array length
         * It must be assured, that none of the objects in the array is still in any use of any kind!
         */
        // public recycle(): T {
        //   if (this.#length < this.#array.length) {
        //     this.#length++;
        //     return this.#array[this.#length++];
        //   }
        //   this.#array.push(Recycler.get(this.#type));
        //   return this.#array[this.#length++];
        // }
        *[Symbol.iterator]() {
            for (let i = 0; i < this.#length; i++)
                yield this.#array[i];
        }
        /**
         * Returns a copy of the array sorted according to the given compare function
         */
        getSorted(_sort) {
            let sorted = this.#array.slice(0, this.#length);
            sorted.sort(_sort);
            return sorted;
        }
    }
    FudgeCore.RecycableArray = RecycableArray;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Baseclass for {@link RenderInjectorCoat} and {@link RenderInjectorTexture}
     * @internal
     */
    class RenderInjector {
        /**
         * Injects the given constructor with the functionality of the given injector. Name of the constructor and the name of the injector method must match.
         * Used in subclasses of this class.
         */
        static inject(_constructor, _injector) {
            let injection = Reflect.get(_injector, "inject" + _constructor.name);
            if (!injection) {
                FudgeCore.Debug.error("No injection decorator defined for " + _constructor.name);
            }
            Object.defineProperty(_constructor.prototype, "useRenderData", {
                value: injection
            });
        }
    }
    FudgeCore.RenderInjector = RenderInjector;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Gives WebGL Buffer the data from the {@link Shader}
     * @internal
     */
    class RenderInjectorShader {
        /**
         * Injects the functionality of this class into the constructor of the given {@link Shader}-subclass
         */
        static decorate(_constructor, _context) {
            Object.defineProperty(_constructor, "useProgram", {
                value: RenderInjectorShader.useProgram
            });
            Object.defineProperty(_constructor, "deleteProgram", {
                value: RenderInjectorShader.deleteProgram
            });
            Object.defineProperty(_constructor, "createProgram", {
                value: RenderInjectorShader.createProgram
            });
        }
        /**
         * Set this program to use as the active program in WebGL
         */
        static useProgram() {
            if (!this.program)
                this.createProgram();
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            crc3.useProgram(this.program);
        }
        /**
         * Deletes this program from WebGL, clearing the used memory on the GPU.
         */
        static deleteProgram() {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.program) {
                crc3.deleteProgram(this.program);
                delete this.attributes;
                delete this.uniforms;
                delete this.program;
            }
        }
        static createProgram() {
            FudgeCore.Debug.fudge("Create shader program", this.name);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            let program = crc3.createProgram();
            try {
                let shdVertex = compileShader(this.getVertexShaderSource(), WebGL2RenderingContext.VERTEX_SHADER);
                let shdFragment = compileShader(this.getFragmentShaderSource(), WebGL2RenderingContext.FRAGMENT_SHADER);
                crc3.attachShader(program, FudgeCore.RenderWebGL.assert(shdVertex));
                crc3.attachShader(program, FudgeCore.RenderWebGL.assert(shdFragment));
                crc3.linkProgram(program);
                let error = FudgeCore.RenderWebGL.assert(crc3.getProgramInfoLog(program));
                if (error !== "") {
                    throw new Error("Error linking Shader: " + error);
                }
                this.program = program;
                this.attributes = detectAttributes();
                this.uniforms = detectUniforms();
                if (this.define.includes("SKIN")) {
                    const blockIndex = crc3.getUniformBlockIndex(program, FudgeCore.UNIFORM_BLOCKS.SKIN.NAME);
                    crc3.uniformBlockBinding(program, blockIndex, FudgeCore.UNIFORM_BLOCKS.SKIN.BINDING);
                }
                if (this.define.find(_define => ["FLAT", "GOURAUD", "PHONG"].includes(_define))) {
                    if (!FudgeCore.RenderWebGL.uboLights)
                        FudgeCore.RenderWebGL.uboLights = createUBOLights();
                    if (!FudgeCore.RenderWebGL.uboLightsVariableOffsets)
                        FudgeCore.RenderWebGL.uboLightsVariableOffsets = detectUBOLightsVariableOffsets();
                    // bind lights UBO to shader program
                    const blockIndex = crc3.getUniformBlockIndex(program, FudgeCore.UNIFORM_BLOCKS.LIGHTS.NAME);
                    crc3.uniformBlockBinding(program, blockIndex, FudgeCore.UNIFORM_BLOCKS.LIGHTS.BINDING);
                }
                const blockIndex = crc3.getUniformBlockIndex(program, FudgeCore.UNIFORM_BLOCKS.FOG.NAME);
                if (blockIndex != WebGL2RenderingContext.INVALID_INDEX)
                    crc3.uniformBlockBinding(program, blockIndex, FudgeCore.UNIFORM_BLOCKS.FOG.BINDING);
            }
            catch (_error) {
                FudgeCore.Debug.error(_error);
                debugger;
            }
            function compileShader(_shaderCode, _shaderType) {
                let webGLShader = crc3.createShader(_shaderType);
                crc3.shaderSource(webGLShader, _shaderCode);
                crc3.compileShader(webGLShader);
                let error = FudgeCore.RenderWebGL.assert(crc3.getShaderInfoLog(webGLShader));
                if (error !== "") {
                    console.log(_shaderCode);
                    throw new Error("Error compiling shader: " + error);
                }
                // Check for any compilation errors.
                if (!crc3.getShaderParameter(webGLShader, WebGL2RenderingContext.COMPILE_STATUS)) {
                    alert(crc3.getShaderInfoLog(webGLShader));
                    return null;
                }
                return webGLShader;
            }
            function detectAttributes() {
                let detectedAttributes = {};
                let attributeCount = crc3.getProgramParameter(program, WebGL2RenderingContext.ACTIVE_ATTRIBUTES);
                for (let i = 0; i < attributeCount; i++) {
                    let attributeInfo = FudgeCore.RenderWebGL.assert(crc3.getActiveAttrib(program, i));
                    if (!attributeInfo) {
                        break;
                    }
                    detectedAttributes[attributeInfo.name] = crc3.getAttribLocation(program, attributeInfo.name);
                }
                return detectedAttributes;
            }
            function detectUniforms() {
                let detectedUniforms = {};
                let uniformCount = crc3.getProgramParameter(program, WebGL2RenderingContext.ACTIVE_UNIFORMS);
                for (let i = 0; i < uniformCount; i++) {
                    let info = FudgeCore.RenderWebGL.assert(crc3.getActiveUniform(program, i));
                    if (!info) {
                        break;
                    }
                    let location = crc3.getUniformLocation(program, info.name);
                    if (location)
                        detectedUniforms[info.name] = FudgeCore.RenderWebGL.assert(location);
                }
                return detectedUniforms;
            }
            function createUBOLights() {
                const blockIndex = crc3.getUniformBlockIndex(program, FudgeCore.UNIFORM_BLOCKS.LIGHTS.NAME);
                const blockSize = crc3.getActiveUniformBlockParameter(program, blockIndex, crc3.UNIFORM_BLOCK_DATA_SIZE);
                const ubo = FudgeCore.RenderWebGL.assert(crc3.createBuffer());
                crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, ubo);
                crc3.bufferData(WebGL2RenderingContext.UNIFORM_BUFFER, blockSize, crc3.DYNAMIC_DRAW);
                crc3.bindBufferBase(WebGL2RenderingContext.UNIFORM_BUFFER, FudgeCore.UNIFORM_BLOCKS.LIGHTS.BINDING, ubo);
                return ubo;
            }
            function detectUBOLightsVariableOffsets() {
                const uboVariableNames = [
                    "u_nLightsDirectional",
                    "u_nLightsPoint",
                    "u_nLightsSpot",
                    "u_ambient.vctColor",
                    "u_directional[0].vctColor",
                    "u_point[0].vctColor",
                    "u_spot[0].vctColor"
                ];
                const uboVariableIndices = crc3.getUniformIndices(program, uboVariableNames);
                const uboVariableOffsets = crc3.getActiveUniforms(program, uboVariableIndices, crc3.UNIFORM_OFFSET);
                const uboVariableNameToOffset = {};
                uboVariableNames.forEach((_name, _index) => uboVariableNameToOffset[_name] = uboVariableOffsets[_index]);
                return uboVariableNameToOffset;
            }
        }
    }
    FudgeCore.RenderInjectorShader = RenderInjectorShader;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Gives WebGL Buffer the data from the {@link Coat}
     * @internal
     */
    class RenderInjectorCoat extends FudgeCore.RenderInjector {
        /**
         * Injects the functionality of this class into the constructor of the given {@link Coat}-subclass
         */
        static decorate(_constructor, _context) {
            FudgeCore.RenderInjector.inject(_constructor, RenderInjectorCoat);
        }
        static injectCoatColored(_shader, _cmpMaterial) {
            let uniform = _shader.uniforms["u_vctColor"];
            let color = FudgeCore.Color.PRODUCT(this.color, _cmpMaterial.clrPrimary);
            FudgeCore.RenderWebGL.getRenderingContext().uniform4fv(uniform, color.get());
            FudgeCore.Recycler.store(color);
        }
        static injectCoatRemissive(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatColored.call(this, _shader, _cmpMaterial);
            let uniform;
            uniform = _shader.uniforms["u_fDiffuse"];
            FudgeCore.RenderWebGL.getRenderingContext().uniform1f(uniform, this.diffuse);
            uniform = _shader.uniforms["u_fMetallic"];
            FudgeCore.RenderWebGL.getRenderingContext().uniform1f(uniform, this.metallic);
            uniform = _shader.uniforms["u_fSpecular"];
            FudgeCore.RenderWebGL.getRenderingContext().uniform1f(uniform, this.specular);
            uniform = _shader.uniforms["u_fIntensity"];
            FudgeCore.RenderWebGL.getRenderingContext().uniform1f(uniform, this.intensity);
        }
        static injectCoatTextured(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatColored.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.texture.useRenderData(FudgeCore.TEXTURE_LOCATION.COLOR.UNIT);
            crc3.uniform1i(_shader.uniforms[FudgeCore.TEXTURE_LOCATION.COLOR.UNIFORM], FudgeCore.TEXTURE_LOCATION.COLOR.INDEX);
            crc3.uniformMatrix3fv(_shader.uniforms["u_mtxPivot"], false, _cmpMaterial.mtxPivot.get());
        }
        static injectCoatRemissiveTextured(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatRemissive.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.texture.useRenderData(FudgeCore.TEXTURE_LOCATION.COLOR.UNIT);
            crc3.uniform1i(_shader.uniforms[FudgeCore.TEXTURE_LOCATION.COLOR.UNIFORM], FudgeCore.TEXTURE_LOCATION.COLOR.INDEX);
            crc3.uniformMatrix3fv(_shader.uniforms["u_mtxPivot"], false, _cmpMaterial.mtxPivot.get());
        }
        static injectCoatRemissiveTexturedNormals(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatRemissiveTextured.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.normalMap.useRenderData(FudgeCore.TEXTURE_LOCATION.NORMAL.UNIT);
            crc3.uniform1i(_shader.uniforms[FudgeCore.TEXTURE_LOCATION.NORMAL.UNIFORM], FudgeCore.TEXTURE_LOCATION.NORMAL.INDEX);
        }
        static injectCoatToon(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatRemissive.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.texToon.useRenderData(FudgeCore.TEXTURE_LOCATION.TOON.UNIT);
            crc3.uniform1i(_shader.uniforms[FudgeCore.TEXTURE_LOCATION.TOON.UNIFORM], FudgeCore.TEXTURE_LOCATION.TOON.INDEX);
        }
        static injectCoatToonTextured(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatRemissiveTextured.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.texToon.useRenderData(FudgeCore.TEXTURE_LOCATION.TOON.UNIT);
            crc3.uniform1i(_shader.uniforms[FudgeCore.TEXTURE_LOCATION.TOON.UNIFORM], FudgeCore.TEXTURE_LOCATION.TOON.INDEX);
        }
    }
    FudgeCore.RenderInjectorCoat = RenderInjectorCoat;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Buffers the data from the {@link Mesh} into a WebGL Buffer
     * @internal
     */
    class RenderInjectorMesh {
        /**
         * Injects the functionality of this class into the constructor of the given {@link Mesh}-subclass
         */
        static decorate(_constructor, _context) {
            Object.defineProperty(_constructor.prototype, "useRenderBuffers", {
                value: RenderInjectorMesh.useRenderBuffers
            });
            Object.defineProperty(_constructor.prototype, "getRenderBuffers", {
                value: RenderInjectorMesh.getRenderBuffers
            });
            Object.defineProperty(_constructor.prototype, "deleteRenderBuffers", {
                value: RenderInjectorMesh.deleteRenderBuffers
            });
        }
        static getRenderBuffers() {
            if (this.renderMesh.buffers == null) {
                this.renderMesh.buffers = {
                    vertices: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.vertices),
                    indices: createBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, this.renderMesh.indices),
                    normals: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.normals),
                    textureUVs: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.textureUVs),
                    colors: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.colors),
                    tangents: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.tangents),
                    nIndices: this.renderMesh.indices.length
                };
                if (this.renderMesh.bones)
                    this.renderMesh.buffers.bones = createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.bones);
                if (this.renderMesh.weights)
                    this.renderMesh.buffers.weights = createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.weights);
            }
            return this.renderMesh.buffers;
            function createBuffer(_type, _array) {
                const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
                let buffer = FudgeCore.RenderWebGL.assert(crc3.createBuffer());
                crc3.bindBuffer(_type, buffer);
                crc3.bufferData(_type, _array, WebGL2RenderingContext.STATIC_DRAW);
                return buffer;
            }
        }
        static useRenderBuffers(_shader, _mtxMeshToWorld, _mtxMeshToView, _id) {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            let renderBuffers = this.getRenderBuffers();
            let uniform;
            uniform = _shader.uniforms["u_mtxMeshToView"];
            crc3.uniformMatrix4fv(uniform, false, _mtxMeshToView.get());
            uniform = _shader.uniforms["u_mtxMeshToWorld"];
            if (uniform)
                crc3.uniformMatrix4fv(uniform, false, _mtxMeshToWorld.get());
            uniform = _shader.uniforms["u_mtxNormalMeshToWorld"];
            if (uniform) {
                let normalMatrix = FudgeCore.Matrix4x4.TRANSPOSE(FudgeCore.Matrix4x4.INVERSE(_mtxMeshToWorld));
                crc3.uniformMatrix4fv(uniform, false, normalMatrix.get());
            }
            // feed in an id of the node if shader accepts u_id. Used for picking
            uniform = _shader.uniforms["u_id"];
            if (uniform)
                crc3.uniform1i(uniform, _id);
            setAttributeBuffer("a_vctPosition", renderBuffers.vertices, 3);
            setAttributeBuffer("a_vctColor", renderBuffers.colors, 4);
            setAttributeBuffer("a_vctTexture", renderBuffers.textureUVs, 2);
            setAttributeBuffer("a_vctNormal", renderBuffers.normals, 3);
            setAttributeBuffer("a_vctTangent", renderBuffers.tangents, 4);
            const aBone = _shader.attributes["a_vctBones"];
            if (aBone) {
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, renderBuffers.bones);
                crc3.enableVertexAttribArray(aBone);
                crc3.vertexAttribIPointer(aBone, 4, WebGL2RenderingContext.UNSIGNED_BYTE, 0, 0);
            }
            setAttributeBuffer("a_vctWeights", renderBuffers.weights, 4);
            crc3.bindBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, renderBuffers.indices);
            return renderBuffers;
            function setAttributeBuffer(_name, _buffer, _size) {
                let attribute = _shader.attributes[_name];
                if (attribute == undefined)
                    return;
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, _buffer);
                crc3.enableVertexAttribArray(attribute);
                crc3.vertexAttribPointer(attribute, _size, WebGL2RenderingContext.FLOAT, false, 0, 0);
            }
        }
        static deleteRenderBuffers(_renderBuffers) {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (_renderBuffers) {
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, null);
                crc3.bindBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, null);
                Object.values(_renderBuffers).filter(_buffer => _buffer instanceof WebGLBuffer).forEach((_buffer, _index) => {
                    crc3.deleteBuffer(_buffer);
                    crc3.disableVertexAttribArray(_index);
                });
            }
        }
    }
    FudgeCore.RenderInjectorMesh = RenderInjectorMesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let ParticleData;
    (function (ParticleData) {
        let FUNCTION;
        (function (FUNCTION) {
            // VALUE = "value",
            FUNCTION["ADDITION"] = "addition";
            FUNCTION["SUBTRACTION"] = "subtraction";
            FUNCTION["MULTIPLICATION"] = "multiplication";
            FUNCTION["DIVISION"] = "division";
            FUNCTION["MODULO"] = "modulo";
            FUNCTION["POWER"] = "power";
            FUNCTION["POLYNOMIAL3"] = "polynomial3";
            FUNCTION["SQUARE_ROOT"] = "squareRoot";
            FUNCTION["RANDOM"] = "random";
            FUNCTION["RANDOM_RANGE"] = "randomRange";
        })(FUNCTION = ParticleData.FUNCTION || (ParticleData.FUNCTION = {}));
        ParticleData.FUNCTION_MINIMUM_PARAMETERS = {
            // [ParticleData.FUNCTION.VALUE]: 1,
            [ParticleData.FUNCTION.ADDITION]: 2,
            [ParticleData.FUNCTION.SUBTRACTION]: 2,
            [ParticleData.FUNCTION.MULTIPLICATION]: 2,
            [ParticleData.FUNCTION.DIVISION]: 2,
            [ParticleData.FUNCTION.MODULO]: 2,
            [ParticleData.FUNCTION.POWER]: 2,
            [ParticleData.FUNCTION.POLYNOMIAL3]: 5,
            [ParticleData.FUNCTION.SQUARE_ROOT]: 1,
            [ParticleData.FUNCTION.RANDOM]: 1,
            [ParticleData.FUNCTION.RANDOM_RANGE]: 3
        };
        ParticleData.PREDEFINED_VARIABLES = {
            systemDuration: "u_fParticleSystemDuration",
            systemSize: "u_fParticleSystemSize",
            systemTime: "u_fParticleSystemTime",
            particleId: "fParticleId"
        };
    })(ParticleData = FudgeCore.ParticleData || (FudgeCore.ParticleData = {}));
    /**
     * Compiles particle system shaders ({@link ShaderParticleSystem}) from shader universal derivates for WebGL
     * @authors Jonas Plotzky, HFU, 2022
     * @internal
     */
    class RenderInjectorShaderParticleSystem extends FudgeCore.RenderInjectorShader {
        static { this.FUNCTIONS = {
            // [ParticleData.FUNCTION.VALUE]: (_parameters: string[]) => {
            //   return `(${_parameters[0]})`;
            // },
            [ParticleData.FUNCTION.ADDITION]: (_parameters) => {
                return `(${_parameters.reduce((_accumulator, _value) => `${_accumulator} + ${_value}`)})`;
            },
            [ParticleData.FUNCTION.SUBTRACTION]: (_parameters) => {
                return `(${_parameters.reduce((_accumulator, _value) => `${_accumulator} - ${_value}`)})`;
            },
            [ParticleData.FUNCTION.MULTIPLICATION]: (_parameters) => {
                return `(${_parameters.reduce((_accumulator, _value) => `${_accumulator} * ${_value}`)})`;
            },
            [ParticleData.FUNCTION.DIVISION]: (_parameters) => {
                return `(${_parameters[0]} / ${_parameters[1]})`;
            },
            [ParticleData.FUNCTION.MODULO]: (_parameters) => {
                return `(${_parameters.reduce((_accumulator, _value) => `mod(${_accumulator}, ${_value})`)})`;
            },
            [ParticleData.FUNCTION.POWER]: (_parameters) => {
                return `pow(${_parameters[0]}, ${_parameters[1]})`;
            },
            [ParticleData.FUNCTION.POLYNOMIAL3]: (_parameters) => {
                let x = _parameters[0];
                let a = _parameters[1];
                let b = _parameters[2];
                let c = _parameters[3];
                let d = _parameters[4];
                return `(${a} * pow(${x}, 3.0) + ${b} * pow(${x}, 2.0) + ${c} * ${x} + ${d})`;
            },
            [ParticleData.FUNCTION.SQUARE_ROOT]: (_parameters) => {
                let x = _parameters[0];
                return `sqrt(${x})`;
            },
            [ParticleData.FUNCTION.RANDOM]: (_parameters) => {
                return `fetchRandomNumber(int(${_parameters[0]}), iParticleSystemRandomNumbersSize, iParticleSystemRandomNumbersLength)`;
            },
            [ParticleData.FUNCTION.RANDOM_RANGE]: (_parameters) => {
                return `(${RenderInjectorShaderParticleSystem.FUNCTIONS["random"](_parameters)} * (${_parameters[2]} - ${_parameters[1]}) + ${_parameters[1]})`;
            }
        }; }
        static decorate(_constructor, _context) {
            super.decorate(_constructor.prototype, _context);
            Object.defineProperty(_constructor.prototype, "getVertexShaderSource", {
                value: RenderInjectorShaderParticleSystem.getVertexShaderSource
            });
            Object.defineProperty(_constructor.prototype, "getFragmentShaderSource", {
                value: RenderInjectorShaderParticleSystem.getFragmentShaderSource
            });
        }
        /**
         * Generates the source code for the vertex shader of the {@link ShaderParticleSystem} from the set {@link ShaderParticleSystem.data} and the original {@link ShaderParticleSystem.vertexShaderSource}.
         */
        static getVertexShaderSource() {
            let data = this.data;
            let mtxLocal = data?.mtxLocal;
            let mtxWorld = data?.mtxWorld;
            let source = this.vertexShaderSource
                .replace("#version 300 es", `#version 300 es\n#define ${this.define[0]}${data.color ? "\n#define PARTICLE_COLOR" : ""}`)
                .replace("/*$variables*/", RenderInjectorShaderParticleSystem.generateVariables(data?.variables, data?.variableNames))
                .replace("/*$mtxLocal*/", RenderInjectorShaderParticleSystem.generateTransformations(mtxLocal, "Local"))
                .replace("/*$mtxLocal*/", mtxLocal && mtxLocal.length > 0 ? "* mtxLocal" : "")
                .replace("/*$mtxWorld*/", RenderInjectorShaderParticleSystem.generateTransformations(mtxWorld, "World"))
                .replace("/*$mtxWorld*/", mtxWorld && mtxWorld.length > 0 ? "mtxWorld *" : "")
                .replaceAll("/*$color*/", RenderInjectorShaderParticleSystem.generateColor(data?.color));
            return source;
        }
        /**
         * Generates the source code for the fragment shader of the {@link ShaderParticleSystem} from the set {@link ShaderParticleSystem.data} and the original {@link ShaderParticleSystem.fragmentShaderSource}.
         */
        static getFragmentShaderSource() {
            return this.fragmentShaderSource.replace("#version 300 es", `#version 300 es\n#define ${this.define[0]}${this.data.color ? "\n#define PARTICLE_COLOR" : ""}`);
        }
        //#region code generation
        static generateVariables(_variables, _variableNames) {
            if (!_variables)
                return "";
            return _variables
                .map((_variable, _index) => ({ name: "fParticleSystemVariable_" + _variableNames[_index], value: RenderInjectorShaderParticleSystem.generateExpression(_variable) }))
                .map(_variable => `float ${_variable.name} = ${_variable.value};`)
                .reduce((_accumulator, _code) => `${_accumulator}\n${_code}`, "");
        }
        static generateTransformations(_transformations, _localOrWorld) {
            if (!_transformations || _transformations.length == 0)
                return "";
            let transformations = _transformations
                .map(_data => {
                let isScale = _data.transformation === "scale";
                let [x, y, z] = [_data.parameters[0], _data.parameters[1], _data.parameters[2]]
                    .map((_value) => _value ? RenderInjectorShaderParticleSystem.generateExpression(_value) : (isScale ? "1.0" : "0.0"));
                return [_data.transformation, x, y, z];
            });
            let code = "";
            code += transformations
                .map(([_transformation, _x, _y, _z], _index) => {
                let rotateId = _index + _localOrWorld;
                if (_transformation == "rotate") {
                    let toRadians = (_value) => `${_value} * ${FudgeCore.Calc.deg2rad}`;
                    return `float fXRadians${rotateId} = ${toRadians(_x)};
              float fYRadians${rotateId} = ${toRadians(_y)};
              float fZRadians${rotateId} = ${toRadians(_z)};
              float fSinX${rotateId} = sin(fXRadians${rotateId});
              float fCosX${rotateId} = cos(fXRadians${rotateId}); 
              float fSinY${rotateId} = sin(fYRadians${rotateId});
              float fCosY${rotateId} = cos(fYRadians${rotateId});
              float fSinZ${rotateId} = sin(fZRadians${rotateId});
              float fCosZ${rotateId} = cos(fZRadians${rotateId});\n`;
                }
                else
                    return "";
            })
                .filter((_transformation) => _transformation != "")
                .reduce((_accumulator, _code) => `${_accumulator}\n${_code}`, "");
            code += "\n";
            code += `mat4 mtx${_localOrWorld} = `;
            code += transformations
                .map(([_transformation, _x, _y, _z], _index) => {
                let rotateId = _index + _localOrWorld;
                switch (_transformation) {
                    case "translate":
                        return `mat4(
              1.0, 0.0, 0.0, 0.0,
              0.0, 1.0, 0.0, 0.0,
              0.0, 0.0, 1.0, 0.0,
              ${_x}, ${_y}, ${_z}, 1.0)`;
                    case "rotate":
                        return `mat4(
              fCosZ${rotateId} * fCosY${rotateId}, fSinZ${rotateId} * fCosY${rotateId}, -fSinY${rotateId}, 0.0,
              fCosZ${rotateId} * fSinY${rotateId} * fSinX${rotateId} - fSinZ${rotateId} * fCosX${rotateId}, fSinZ${rotateId} * fSinY${rotateId} * fSinX${rotateId} + fCosZ${rotateId} * fCosX${rotateId}, fCosY${rotateId} * fSinX${rotateId}, 0.0,
              fCosZ${rotateId} * fSinY${rotateId} * fCosX${rotateId} + fSinZ${rotateId} * fSinX${rotateId}, fSinZ${rotateId} * fSinY${rotateId} * fCosX${rotateId} - fCosZ${rotateId} * fSinX${rotateId}, fCosY${rotateId} * fCosX${rotateId}, 0.0,
              0.0, 0.0, 0.0, 1.0
              )`;
                    case "scale":
                        return `mat4(
              ${_x}, 0.0, 0.0, 0.0,
              0.0, ${_y}, 0.0, 0.0,
              0.0, 0.0, ${_z}, 0.0,
              0.0, 0.0, 0.0, 1.0
              )`;
                    default:
                        throw `Error in ${FudgeCore.ParticleSystem.name}: "${_transformation}" is not a transformation`;
                }
            })
                .reduce((_accumulator, _code) => `${_accumulator} * \n${_code}`);
            code += ";\n";
            return code;
        }
        static generateColor(_color) {
            if (!_color)
                return "";
            let rgba = [_color[0], _color[1], _color[2], _color[3]]
                .map((_value) => _value ? RenderInjectorShaderParticleSystem.generateExpression(_value) : "1.0")
                .join(", ");
            return `vec4(${rgba});`;
        }
        static generateExpression(_expression) {
            if (ParticleData.isFunction(_expression)) {
                let parameters = [];
                for (let param of _expression.parameters) {
                    parameters.push(RenderInjectorShaderParticleSystem.generateExpression(param));
                }
                return RenderInjectorShaderParticleSystem.generateFunction(_expression.function, parameters);
            }
            if (ParticleData.isVariable(_expression)) {
                return ParticleData.PREDEFINED_VARIABLES[_expression.value] || "fParticleSystemVariable_" + _expression.value;
            }
            if (ParticleData.isConstant(_expression)) {
                let value = _expression.value.toString();
                return `${value}${value.includes(".") ? "" : ".0"}`;
            }
            if (ParticleData.isCode(_expression)) {
                let code = _expression.code
                    .replaceAll(/\b[a-zA-z]+\w*(?!\()\b/g, (_match) => ParticleData.PREDEFINED_VARIABLES[_match] || "fParticleSystemVariable_" + _match)
                    .replaceAll(/(?<!\.)\b\d+\b(?!\.)/g, (_match) => _match + ".0");
                code = RenderInjectorShaderParticleSystem.replaceFunctions(code);
                return code;
            }
            throw `Error in ${FudgeCore.ParticleSystem.name}: invalid node structure in particle system serialization`;
        }
        static generateFunction(_function, _parameters) {
            if (_parameters.length < ParticleData.FUNCTION_MINIMUM_PARAMETERS[_function])
                throw `Error in ${FudgeCore.ParticleSystem.name}: "${_function}" needs at least ${ParticleData.FUNCTION_MINIMUM_PARAMETERS[_function]} parameters`;
            if (Object.values(ParticleData.FUNCTION).includes(_function))
                return RenderInjectorShaderParticleSystem.FUNCTIONS[_function](_parameters);
            else
                throw `Error in ${FudgeCore.ParticleSystem.name}: "${_function}" is not an operation`;
        }
        static replaceFunctions(_code) {
            let functionRegex = /\b[a-zA-z_]+\w*\(/g;
            let match;
            while ((match = functionRegex.exec(_code)) != null) {
                let functionGenerator = RenderInjectorShaderParticleSystem.FUNCTIONS[match[0].slice(0, -1)];
                if (!functionGenerator)
                    continue;
                let commaIndices = [];
                let openBrackets = 1;
                let argumentsLastIndex = functionRegex.lastIndex;
                while (openBrackets > 0) {
                    switch (_code[argumentsLastIndex]) {
                        case "(":
                            openBrackets++;
                            break;
                        case ")":
                            openBrackets--;
                            break;
                        case ",":
                            if (openBrackets == 1)
                                commaIndices.push(argumentsLastIndex);
                            break;
                    }
                    argumentsLastIndex++;
                }
                let args = [functionRegex.lastIndex - 1, ...commaIndices, argumentsLastIndex - 1].reduce((_accumulator, _position, _index, _positions) => {
                    return _index == _positions.length - 1 ?
                        _accumulator :
                        _accumulator.concat(_code.slice(_position + 1, _positions[_index + 1]).trim());
                }, []);
                functionRegex.lastIndex = match.index;
                _code = `${_code.slice(0, match.index)}(${functionGenerator(args)})${_code.slice(argumentsLastIndex)}`;
            }
            return _code;
        }
    }
    FudgeCore.RenderInjectorShaderParticleSystem = RenderInjectorShaderParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Buffers the random number data for the particle system ({@link ComponentParticleSystem}) into a WebGL Texture
     * @authors Jonas Plotzky, HFU, 2022
     * @internal
     */
    class RenderInjectorComponentParticleSystem {
        /**
         * Injects the functionality of this class into the constructor of the {@link ComponentParticleSystem}
         */
        static decorate(_constructor, _context) {
            Object.defineProperty(_constructor.prototype, "useRenderData", {
                value: RenderInjectorComponentParticleSystem.useRenderData
            });
            Object.defineProperty(_constructor.prototype, "deleteRenderData", {
                value: RenderInjectorComponentParticleSystem.deleteRenderData
            });
        }
        static useRenderData() {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.renderData) {
                // buffers exist
                crc3.activeTexture(FudgeCore.TEXTURE_LOCATION.PARTICLE.UNIT); // ATTENTION!: changing this id requires changing of corresponding id in particle render method, use ctrl + shift + f search!
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, this.renderData);
            }
            else {
                const texture = FudgeCore.Render.assert(crc3.createTexture());
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, texture);
                let textureSize = Math.ceil(Math.sqrt(this.size));
                textureSize = Math.min(textureSize, crc3.getParameter(crc3.MAX_TEXTURE_SIZE));
                // TODO: use internal random number generator, additionally maybe use a seed to make it possible to recreate the same random numbers
                let randomNumbers = [];
                for (let i = 0; i < textureSize * textureSize; i++)
                    randomNumbers.push(Math.random());
                try {
                    crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.R32F, textureSize, textureSize, 0, WebGL2RenderingContext.RED, WebGL2RenderingContext.FLOAT, Float32Array.from(randomNumbers));
                }
                catch (_error) {
                    FudgeCore.Debug.error(_error);
                }
                crc3.texParameteri(crc3.TEXTURE_2D, crc3.TEXTURE_MIN_FILTER, crc3.NEAREST);
                crc3.texParameteri(crc3.TEXTURE_2D, crc3.TEXTURE_MAG_FILTER, crc3.NEAREST);
                this.renderData = texture;
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
                this.useRenderData();
            }
        }
        static deleteRenderData() {
            if (!this.renderData)
                return;
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
            crc3.deleteTexture(this.renderData);
            delete this.renderData;
        }
    }
    FudgeCore.RenderInjectorComponentParticleSystem = RenderInjectorComponentParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Keeps a depot of objects that have been marked for reuse, sorted by type.
     * Using {@link Recycler} reduces load on the carbage collector and thus supports smooth performance.
     * @author Jirka Dell'Oro-Friedl, HFU, 2021
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Recycler
     */
    class Recycler {
        static { this.depot = {}; }
        /**
         * Fetches an object of the requested type from the depot, calls its recycle-method and returns it.
         * If the depot for that type is empty it returns a new object of the requested type.
         * @param _t The class identifier of the desired object
         */
        static get(_t) {
            let key = _t.name;
            let instances = Recycler.depot[key];
            if (instances && instances.length > 0) {
                let instance = instances.pop();
                instance.recycle();
                return instance;
            }
            else
                return new _t();
        }
        /**
         * Fetches an object of the requested type from the depot and returns it. ‚ö†Ô∏è**DOES NOT** call its recycle-method.
         * Faster than {@link Recycler.get}, but should be used with caution.
         */
        static reuse(_t) {
            return Recycler.depot[_t.name]?.pop() ?? new _t();
        }
        /**
         * Returns a reference to an object of the requested type in the depot, but does not remove it there.
         * If no object of the requested type was in the depot, one is created, stored and borrowed.
         * For short term usage of objects in a local scope, when there will be no other call to {@link Recycler.get}, {@link Recycler.reuse} or {@link Recycler.borrow}!
         * @param _t The class identifier of the desired object
         */
        static borrow(_t) {
            let t;
            let key = _t.name;
            let instances = Recycler.depot[key];
            if (!instances || instances.length == 0) {
                t = new _t();
                Recycler.store(t);
                return t;
            }
            let instance = instances[0];
            instance.recycle();
            return instance;
        }
        /**
         * Stores the object in the depot for later recycling. Users are responsible for throwing in objects that are about to loose scope and are not referenced by any other
         * @param _instance
         */
        static store(_instance) {
            let key = _instance.constructor.name;
            //Debug.log(key);
            let instances = Recycler.depot[key] || [];
            instances.push(_instance);
            Recycler.depot[key] = instances;
            // Debug.log(`ObjectManager.depot[${key}]: ${ObjectManager.depot[key].length}`);
            //Debug.log(this.depot);
        }
        /**
         * Stores the provided objects using the {@link Recycler.store} method
         */
        static storeMultiple(..._instances) {
            for (const instance of _instances)
                Recycler.store(instance);
        }
        /**
         * Emptys the depot of a given type, leaving the objects for the garbage collector. May result in a short stall when many objects were in
         * @param _t
         */
        static dump(_t) {
            let key = _t.name;
            Recycler.depot[key] = [];
        }
        /**
         * Emptys all depots, leaving all objects to the garbage collector. May result in a short stall when many objects were in
         */
        static dumpAll() {
            Recycler.depot = {};
        }
    }
    FudgeCore.Recycler = Recycler;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores and manipulates a twodimensional vector comprised of the components x and y
     * ```text
     *            +y
     *             |__ +x
     * ```
     * @authors Lukas Scheuerle, Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Vector2 extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0) {
            super();
            this.set(_x, _y);
        }
        //#region Static
        /**
         * A shorthand for writing `new Vector2(0, 0)`.
         * @returns A new vector with the values (0, 0)
         */
        static ZERO() {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            vector.set(0, 0);
            return vector;
        }
        /**
         * A shorthand for writing `new Vector2(_scale, _scale)`.
         * @param _scale the scale of the vector. Default: 1
         */
        static ONE(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            vector.set(_scale, _scale);
            return vector;
        }
        /**
         * A shorthand for writing `new Vector2(x, 0)`.
         * @param _scale The number to write in the x coordinate. Default: 1
         * @returns A new vector with the values (_scale, 0)
         */
        static X(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            vector.set(_scale, 0);
            return vector;
        }
        /**
         * A shorthand for writing `new Vector2(0, y)`.
         * @param _scale The number to write in the y coordinate. Default: 1
         * @returns A new vector with the values (0, _scale)
         */
        static Y(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            vector.set(0, _scale);
            return vector;
        }
        /**
         * Creates and returns a vector through transformation of the given vector by the given matrix
         */
        static TRANSFORMATION(_vector, _mtxTransform, _includeTranslation = true) {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            let m = _mtxTransform.get();
            vector.set(m[0] * _vector.x + m[3] * _vector.y, m[1] * _vector.x + m[4] * _vector.y);
            if (_includeTranslation)
                vector.add(_mtxTransform.translation);
            return vector;
        }
        /**
         * Creates and returns a vector which is a copy of the given vector scaled to the given length.
         */
        static NORMALIZATION(_vector, _length = 1) {
            let magnitudeSquared = _vector.magnitudeSquared;
            if (magnitudeSquared == 0)
                throw (new RangeError("Impossible normalization"));
            let vector = _vector.clone;
            vector.scale(_length / Math.sqrt(magnitudeSquared));
            return vector;
        }
        /**
         * Returns a new vector representing the given vector scaled by the given scaling factor
         */
        static SCALE(_vector, _scale) {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            vector.set(_vector.x * _scale, _vector.y * _scale);
            return vector;
        }
        /**
         * Returns the resulting vector attained by addition of all given vectors.
         */
        static SUM(..._vectors) {
            const result = FudgeCore.Recycler.reuse(Vector2);
            for (let vector of _vectors)
                result.set(result.x + vector.x, result.y + vector.y);
            return result;
        }
        /**
         * Returns the result of the subtraction of two vectors.
         */
        static DIFFERENCE(_minuend, _subtrahend) {
            const vector = FudgeCore.Recycler.reuse(Vector2);
            vector.set(_minuend.x - _subtrahend.x, _minuend.y - _subtrahend.y);
            return vector;
        }
        /**
         * Calculates the cross product of two Vectors. Due to them being only 2 Dimensional, the result is a single number,
         * which implicitly is on the Z axis. It is also the signed magnitude of the result.
         */
        static CROSS(_a, _b) {
            return _a.x * _b.y - _a.y * _b.x;
        }
        /**
         * Computes the dotproduct of 2 vectors.
         */
        static DOT(_a, _b) {
            return _a.x * _b.x + _a.y * _b.y;
        }
        /**
         * Calculates the orthogonal vector to the given vector. Rotates counterclockwise by default.
         * ```text
         * ‚Üë => ‚Üê => ‚Üì => ‚Üí => ‚Üë
         * ```
         * @param _vector Vector to get the orthogonal equivalent of
         * @param _clockwise Should the rotation be clockwise instead of the default counterclockwise? default: false
         * @returns A Vector that is orthogonal to and has the same magnitude as the given Vector.
         */
        static ORTHOGONAL(_vector, _clockwise = false) {
            let result = FudgeCore.Recycler.reuse(Vector2);
            if (_clockwise)
                result.set(_vector.y, -_vector.x);
            else
                result.set(-_vector.y, _vector.x);
            return result;
        }
        /**
         * Creates a cartesian vector from polar coordinates
         */
        static GEO(_angle = 0, _magnitude = 1) {
            let vector = FudgeCore.Recycler.reuse(Vector2);
            let geo = FudgeCore.Recycler.reuse(FudgeCore.Geo2);
            geo.set(_angle, _magnitude);
            vector.geo = geo;
            FudgeCore.Recycler.store(geo);
            return vector;
        }
        //#endregion
        //#region Accessors
        /**
         * Returns the length of the vector
         */
        get magnitude() {
            return Math.hypot(this.x, this.y);
        }
        /**
         * Returns the square of the magnitude of the vector without calculating a square root. Faster for simple proximity evaluation.
         */
        get magnitudeSquared() {
            return Vector2.DOT(this, this);
        }
        /**
         * Returns a polar representation of this vector
         */
        get geo() {
            let geo = FudgeCore.Recycler.get(FudgeCore.Geo2);
            geo.magnitude = this.magnitude;
            if (geo.magnitude === 0)
                return geo;
            geo.angle = 180 * Math.atan2(this.y / geo.magnitude, this.x / geo.magnitude) / Math.PI;
            return geo;
        }
        /**
         * Adjust the cartesian values of this vector to represent the given as polar coordinates
         */
        set geo(_geo) {
            this.set(_geo.magnitude, 0);
            this.transform(FudgeCore.Matrix3x3.ROTATION(_geo.angle));
        }
        /**
         * Creates and returns a clone of this vector.
         */
        get clone() {
            return FudgeCore.Recycler.reuse(Vector2).copy(this);
        }
        //#endregion
        /**
         * Copies the components of the given vector into this vector.
         */
        copy(_original) {
            return this.set(_original.x, _original.y);
        }
        recycle() {
            this.set(0, 0);
        }
        /**
         * Returns true if the coordinates of this and the given vector are to be considered identical within the given tolerance
         * TODO: examine, if tolerance as criterium for the difference is appropriate with very large coordinate values or if _tolerance should be multiplied by coordinate value
         */
        equals(_compare, _tolerance = Number.EPSILON) {
            if (Math.abs(this.x - _compare.x) > _tolerance)
                return false;
            if (Math.abs(this.y - _compare.y) > _tolerance)
                return false;
            return true;
        }
        /**
         * Adds the given vector to the executing vector, changing the executor.
         * @param _addend The vector to add.
         */
        add(_addend) {
            this.x += _addend.x;
            this.y += _addend.y;
            return this;
        }
        /**
         * Subtracts the given vector from the executing vector, changing the executor.
         * @param _subtrahend The vector to subtract.
         */
        subtract(_subtrahend) {
            this.x -= _subtrahend.x;
            this.y -= _subtrahend.y;
            return this;
        }
        /**
         * Scales the Vector by the given _scalar.
         */
        scale(_scalar) {
            this.x *= _scalar;
            this.y *= _scalar;
            return this;
        }
        /**
         * Normalizes this to the given length, 1 by default
         */
        normalize(_length = 1) {
            return this.copy(Vector2.NORMALIZATION(this, _length));
        }
        /**
         * Sets the components of this vector.
         */
        set(_x = 0, _y = 0) {
            this.x = _x;
            this.y = _y;
            return this;
        }
        /**
         * Returns an array of the components of this vector.
         */
        get() {
            return new Float32Array([this.x, this.y]);
        }
        /**
         * Transforms this vector by the given matrix, including or exluding the translation.
         * Including is the default, excluding will only rotate and scale this vector.
         */
        transform(_mtxTransform, _includeTranslation = true) {
            let transformed = Vector2.TRANSFORMATION(this, _mtxTransform, _includeTranslation);
            this.copy(transformed);
            FudgeCore.Recycler.store(transformed);
            return this;
        }
        /**
         * For each dimension, moves the component to the minimum of this and the given vector
         */
        min(_compare) {
            this.x = Math.min(this.x, _compare.x);
            this.y = Math.min(this.y, _compare.y);
            return this;
        }
        /**
         * For each dimension, moves the component to the maximum of this and the given vector
         */
        max(_compare) {
            this.x = Math.max(this.x, _compare.x);
            this.y = Math.max(this.y, _compare.y);
            return this;
        }
        /**
         * Adds a z-component of the given magnitude (default=0) to the vector and returns a new Vector3
         */
        toVector3(_z = 0) {
            return new FudgeCore.Vector3(this.x, this.y, _z);
        }
        /**
         * Returns a formatted string representation of this vector
         */
        toString() {
            let result = `(${this.x.toPrecision(5)}, ${this.y.toPrecision(5)})`;
            return result;
        }
        /**
         * Uses the standard array.map functionality to perform the given function on all components of this vector
         * and return a new vector with the results
         */
        map(_function) {
            let copy = FudgeCore.Recycler.get(Vector2);
            copy.set(...[this.x, this.y].map(_function));
            return copy;
        }
        //#region Transfer
        serialize() {
            let serialization = this.getMutator();
            // serialization.toJSON = () => { return `{ "r": ${this.r}, "g": ${this.g}, "b": ${this.b}, "a": ${this.a}}`; };
            serialization.toJSON = () => { return `[${this.x}, ${this.y}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.x, this.y] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        getMutator() {
            let mutator = {
                x: this.x, y: this.y
            };
            return mutator;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Vector2 = Vector2;
})(FudgeCore || (FudgeCore = {}));
///<reference path="../Recycle/Recycler.ts"/>
///<reference path="Vector2.ts"/>
var FudgeCore;
///<reference path="../Recycle/Recycler.ts"/>
///<reference path="Vector2.ts"/>
(function (FudgeCore) {
    /**
     * Defines the origin of a rectangle
     */
    let ORIGIN2D;
    (function (ORIGIN2D) {
        ORIGIN2D[ORIGIN2D["TOPLEFT"] = 0] = "TOPLEFT";
        ORIGIN2D[ORIGIN2D["TOPCENTER"] = 1] = "TOPCENTER";
        ORIGIN2D[ORIGIN2D["TOPRIGHT"] = 2] = "TOPRIGHT";
        ORIGIN2D[ORIGIN2D["CENTERLEFT"] = 16] = "CENTERLEFT";
        ORIGIN2D[ORIGIN2D["CENTER"] = 17] = "CENTER";
        ORIGIN2D[ORIGIN2D["CENTERRIGHT"] = 18] = "CENTERRIGHT";
        ORIGIN2D[ORIGIN2D["BOTTOMLEFT"] = 32] = "BOTTOMLEFT";
        ORIGIN2D[ORIGIN2D["BOTTOMCENTER"] = 33] = "BOTTOMCENTER";
        ORIGIN2D[ORIGIN2D["BOTTOMRIGHT"] = 34] = "BOTTOMRIGHT";
    })(ORIGIN2D = FudgeCore.ORIGIN2D || (FudgeCore.ORIGIN2D = {}));
    /**
     * Defines a rectangle with position and size and add comfortable methods to it
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Rectangle extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0, _width = 1, _height = 1, _origin = ORIGIN2D.TOPLEFT) {
            super();
            this.position = FudgeCore.Recycler.get(FudgeCore.Vector2);
            this.size = FudgeCore.Recycler.get(FudgeCore.Vector2);
            this.setPositionAndSize(_x, _y, _width, _height, _origin);
        }
        /**
         * Returns a new rectangle created with the given parameters
         */
        static GET(_x = 0, _y = 0, _width = 1, _height = 1, _origin = ORIGIN2D.TOPLEFT) {
            let rect = FudgeCore.Recycler.get(Rectangle);
            rect.setPositionAndSize(_x, _y, _width, _height);
            return rect;
        }
        get x() {
            return this.position.x;
        }
        get y() {
            return this.position.y;
        }
        get width() {
            return this.size.x;
        }
        get height() {
            return this.size.y;
        }
        /**
         * Return the leftmost expansion, respecting also negative values of width
         */
        get left() {
            if (this.size.x > 0)
                return this.position.x;
            return (this.position.x + this.size.x);
        }
        /**
         * Return the topmost expansion, respecting also negative values of height
         */
        get top() {
            if (this.size.y > 0)
                return this.position.y;
            return (this.position.y + this.size.y);
        }
        /**
         * Return the rightmost expansion, respecting also negative values of width
         */
        get right() {
            if (this.size.x > 0)
                return (this.position.x + this.size.x);
            return this.position.x;
        }
        /**
         * Return the lowest expansion, respecting also negative values of height
         */
        get bottom() {
            if (this.size.y > 0)
                return (this.position.y + this.size.y);
            return this.position.y;
        }
        set x(_x) {
            this.position.x = _x;
        }
        set y(_y) {
            this.position.y = _y;
        }
        set width(_width) {
            this.size.x = _width;
        }
        set height(_height) {
            this.size.y = _height;
        }
        set left(_value) {
            this.size.x = this.right - _value;
            this.position.x = _value;
        }
        set top(_value) {
            this.size.y = this.bottom - _value;
            this.position.y = _value;
        }
        set right(_value) {
            this.size.x = this.position.x + _value;
        }
        set bottom(_value) {
            this.size.y = this.position.y + _value;
        }
        get clone() {
            return Rectangle.GET(this.x, this.y, this.width, this.height);
        }
        recycle() {
            this.setPositionAndSize();
        }
        /**
         * Set this rectangle to the values given by the rectangle provided
         */
        copy(_rect) {
            this.setPositionAndSize(_rect.x, _rect.y, _rect.width, _rect.height);
        }
        /**
         * Sets the position and size of the rectangle according to the given parameters
         */
        setPositionAndSize(_x = 0, _y = 0, _width = 1, _height = 1, _origin = ORIGIN2D.TOPLEFT) {
            this.size.set(_width, _height);
            switch (_origin & 0x03) {
                case 0x00:
                    this.position.x = _x;
                    break;
                case 0x01:
                    this.position.x = _x - _width / 2;
                    break;
                case 0x02:
                    this.position.x = _x - _width;
                    break;
            }
            switch (_origin & 0x30) {
                case 0x00:
                    this.position.y = _y;
                    break;
                case 0x10:
                    this.position.y = _y - _height / 2;
                    break;
                case 0x20:
                    this.position.y = _y - _height;
                    break;
            }
        }
        /**
         * Transforms the given point from this rectangles space to the target rectangles space
         */
        pointToRect(_point, _target) {
            let result = _point.clone;
            result.subtract(this.position);
            result.x *= _target.width / this.width;
            result.y *= _target.height / this.height;
            result.add(_target.position);
            return result;
        }
        /**
         * Returns true if the given point is inside of this rectangle or on the border
         * @param _point
         */
        isInside(_point) {
            return (_point.x >= this.left && _point.x <= this.right && _point.y >= this.top && _point.y <= this.bottom);
        }
        /**
         * Returns true if this rectangle collides with the rectangle given
         * @param _rect
         */
        collides(_rect) {
            if (this.left > _rect.right)
                return false;
            if (this.right < _rect.left)
                return false;
            if (this.top > _rect.bottom)
                return false;
            if (this.bottom < _rect.top)
                return false;
            return true;
        }
        /**
         * Returns the rectangle created by the intersection of this and the given rectangle or null, if they don't collide
         */
        getIntersection(_rect) {
            if (!this.collides(_rect))
                return null;
            let intersection = new Rectangle();
            intersection.x = Math.max(this.left, _rect.left);
            intersection.y = Math.max(this.top, _rect.top);
            intersection.width = Math.min(this.right, _rect.right) - intersection.x;
            intersection.height = Math.min(this.bottom, _rect.bottom) - intersection.y;
            return intersection;
        }
        /**
     * Returns the rectangle created by the intersection of this and the given rectangle or null, if they don't collide
     */
        covers(_rect) {
            if (this.left > _rect.left)
                return false;
            if (this.right < _rect.right)
                return false;
            if (this.top > _rect.top)
                return false;
            if (this.bottom < _rect.bottom)
                return false;
            return true;
        }
        /**
         * Creates a string representation of this rectangle
         */
        toString() {
            let result = `∆í.Rectangle(position:${this.position.toString()}, size:${this.size.toString()}`;
            result += `, left:${this.left.toPrecision(5)}, top:${this.top.toPrecision(5)}, right:${this.right.toPrecision(5)}, bottom:${this.bottom.toPrecision(5)}`;
            return result;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Rectangle = Rectangle;
})(FudgeCore || (FudgeCore = {}));
///<reference path="RenderInjector.ts"/>
///<reference path="RenderInjectorShader.ts"/>
///<reference path="RenderInjectorCoat.ts"/>
///<reference path="RenderInjectorMesh.ts"/>
///<reference path="RenderInjectorShaderParticleSystem.ts"/>
///<reference path="RenderInjectorComponentParticleSystem.ts"/>
///<reference path="../Math/Rectangle.ts"/>
var FudgeCore;
///<reference path="RenderInjector.ts"/>
///<reference path="RenderInjectorShader.ts"/>
///<reference path="RenderInjectorCoat.ts"/>
///<reference path="RenderInjectorMesh.ts"/>
///<reference path="RenderInjectorShaderParticleSystem.ts"/>
///<reference path="RenderInjectorComponentParticleSystem.ts"/>
///<reference path="../Math/Rectangle.ts"/>
(function (FudgeCore) {
    // export declare let fudgeConfig: General;
    let BLEND;
    (function (BLEND) {
        BLEND[BLEND["OPAQUE"] = 0] = "OPAQUE";
        BLEND[BLEND["TRANSPARENT"] = 1] = "TRANSPARENT";
        BLEND[BLEND["ADDITIVE"] = 2] = "ADDITIVE";
        BLEND[BLEND["SUBTRACTIVE"] = 3] = "SUBTRACTIVE";
        BLEND[BLEND["MODULATE"] = 4] = "MODULATE";
    })(BLEND = FudgeCore.BLEND || (FudgeCore.BLEND = {}));
    // we want type inference here so we can use vs code to search for references
    FudgeCore.UNIFORM_BLOCKS = {
        LIGHTS: {
            NAME: "Lights",
            BINDING: 0
        },
        SKIN: {
            NAME: "Skin",
            BINDING: 1
        },
        FOG: {
            NAME: "Fog",
            BINDING: 2
        }
    };
    FudgeCore.TEXTURE_LOCATION = {
        COLOR: {
            UNIFORM: "u_texColor",
            UNIT: WebGL2RenderingContext.TEXTURE0,
            INDEX: 0 // could compute these by UNIT - WebGL2RenderingContext.TEXTURE0 
        },
        NORMAL: {
            UNIFORM: "u_texNormal",
            UNIT: WebGL2RenderingContext.TEXTURE1,
            INDEX: 1
        },
        PARTICLE: {
            UNIFORM: "u_particleSystemRandomNumbers",
            UNIT: WebGL2RenderingContext.TEXTURE2,
            INDEX: 2
        },
        TEXT: {
            UNIFORM: "u_texText", // TODO: add text uniform to shader...
            UNIT: WebGL2RenderingContext.TEXTURE3,
            INDEX: 3
        },
        TOON: {
            UNIFORM: "u_texToon",
            UNIT: WebGL2RenderingContext.TEXTURE4,
            INDEX: 4
        }
    };
    /**
     * Base class for RenderManager, handling the connection to the rendering system, in this case WebGL.
     * Methods and attributes of this class should not be called directly, only through {@link Render}
     */
    class RenderWebGL extends FudgeCore.EventTargetStatic {
        static { this.crc3 = RenderWebGL.initialize(); }
        static { this.rectRender = RenderWebGL.getCanvasRect(); }
        /**
         * Initializes offscreen-canvas, renderingcontext and hardware viewport. Call once before creating any resources like meshes or shaders
         */
        static initialize(_antialias, _alpha) {
            let fudgeConfig = Reflect.get(globalThis, "fudgeConfig") || {};
            const antialias = (_antialias != undefined) ? _antialias : fudgeConfig.antialias || false;
            if (antialias)
                FudgeCore.Debug.error("The default antialiasing is not compatible with the current post-processing effects and will therefore be disabled.");
            let contextAttributes = {
                alpha: (_alpha != undefined) ? _alpha : fudgeConfig.alpha || false,
                antialias: false,
                premultipliedAlpha: false,
                stencil: true
            };
            FudgeCore.Debug.fudge("Initialize RenderWebGL", contextAttributes);
            let canvas = document.createElement("canvas");
            let crc3;
            crc3 = RenderWebGL.assert(canvas.getContext("webgl2", contextAttributes), "WebGL-context couldn't be created");
            RenderWebGL.crc3 = crc3;
            // Enable backface- and zBuffer-culling.
            crc3.enable(WebGL2RenderingContext.CULL_FACE);
            crc3.enable(WebGL2RenderingContext.DEPTH_TEST);
            crc3.enable(WebGL2RenderingContext.BLEND);
            RenderWebGL.setBlendMode(BLEND.TRANSPARENT);
            RenderWebGL.rectRender = RenderWebGL.getCanvasRect();
            RenderWebGL.initializeAttachments();
            RenderWebGL.adjustAttachments();
            RenderWebGL.uboFog = RenderWebGL.assert(crc3.createBuffer());
            return crc3;
        }
        /**
        * Checks the first parameter and throws an exception with the WebGL-errorcode if the value is null
        * @param _value  value to check against null
        * @param _message  optional, additional message for the exception
        */
        static assert(_value, _message = "") {
            if (_value === null)
                throw new Error(`Assertion failed. ${_message}, WebGL-Error: ${RenderWebGL.crc3 ? RenderWebGL.crc3.getError() : ""}`);
            return _value;
        }
        /**
         * Return a reference to the offscreen-canvas
         */
        static getCanvas() {
            return RenderWebGL.crc3.canvas; // TODO: enable OffscreenCanvas
        }
        /**
         * Return a reference to the rendering context
         */
        static getRenderingContext() {
            return RenderWebGL.crc3;
        }
        /**
         * Return a rectangle describing the size of the offscreen-canvas. x,y are 0 at all times.
         */
        static getCanvasRect() {
            let canvas = RenderWebGL.crc3.canvas;
            return FudgeCore.Rectangle.GET(0, 0, canvas.width, canvas.height);
        }
        /**
         * Set the size of the offscreen-canvas.
         */
        static setCanvasSize(_width, _height) {
            RenderWebGL.crc3.canvas.width = _width;
            RenderWebGL.crc3.canvas.height = _height;
        }
        /**
         * Set the area on the offscreen-canvas to render the camera image to.
         * @param _rect
         */
        static setRenderRectangle(_rect) {
            RenderWebGL.rectRender.setPositionAndSize(_rect.x, _rect.y, _rect.width, _rect.height);
            RenderWebGL.crc3.viewport(_rect.x, _rect.y, _rect.width, _rect.height);
        }
        /**
         * Clear the offscreen renderbuffer with the given {@link Color}
         */
        static clear(_color) {
            RenderWebGL.crc3.clearColor(_color?.r ?? 0, _color?.g ?? 0, _color?.b ?? 0, _color?.a ?? 1);
            RenderWebGL.crc3.clear(WebGL2RenderingContext.COLOR_BUFFER_BIT | WebGL2RenderingContext.DEPTH_BUFFER_BIT | WebGL2RenderingContext.STENCIL_BUFFER_BIT);
        }
        /**
         * Set the final framebuffer to render to. If null, the canvas default framebuffer is used.
         * Used by XR to render to the XRWebGLLayer framebuffer.
         */
        static setFramebufferTarget(_buffer) {
            RenderWebGL.fboTarget = _buffer;
        }
        /**
         * Reset the framebuffer to the main color buffer.
         */
        static resetFramebuffer() {
            RenderWebGL.crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboMain);
        }
        /**
         * Retrieve the area on the offscreen-canvas the camera image gets rendered to.
         */
        static getRenderRectangle() {
            return RenderWebGL.rectRender;
        }
        /**
         * Enable / Disable WebGLs depth test.
         */
        static setDepthTest(_test) {
            if (_test)
                RenderWebGL.crc3.enable(WebGL2RenderingContext.DEPTH_TEST);
            else
                RenderWebGL.crc3.disable(WebGL2RenderingContext.DEPTH_TEST);
        }
        /**
         * Enable / Disable WebGLs scissor test.
         */
        static setScissorTest(_test, _x, _y, _width, _height) {
            if (_test)
                RenderWebGL.crc3.enable(WebGL2RenderingContext.SCISSOR_TEST);
            else
                RenderWebGL.crc3.disable(WebGL2RenderingContext.SCISSOR_TEST);
            RenderWebGL.crc3.scissor(_x, _y, _width, _height);
        }
        /**
         * Set WebGLs viewport.
         */
        static setViewport(_x, _y, _width, _height) {
            RenderWebGL.crc3.viewport(_x, _y, _width, _height);
        }
        /**
         * Set the blend mode to render with
         */
        static setBlendMode(_mode) {
            switch (_mode) {
                case BLEND.OPAQUE:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.ONE, WebGL2RenderingContext.ZERO);
                    break;
                case BLEND.TRANSPARENT:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    // RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.ONE, WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.SRC_ALPHA, WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA);
                    break;
                case BLEND.ADDITIVE:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    // RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.ONE, WebGL2RenderingContext.ONE);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.SRC_ALPHA, WebGL2RenderingContext.ONE);
                    break;
                case BLEND.SUBTRACTIVE:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_REVERSE_SUBTRACT);
                    // RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.ONE, WebGL2RenderingContext.ONE);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.SRC_ALPHA, WebGL2RenderingContext.ONE);
                    break;
                case BLEND.MODULATE: // color gets multiplied, tried to copy unitys "Particle Shader: Blending Option: Rendering Mode: Modulate"
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.DST_COLOR, WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA);
                default:
                    break;
            }
        }
        /**
         * Read the (world) position from the pixel at the given point on the render-rectangle (origin top left).
         * ‚ö†Ô∏è CAUTION: Currently only works when ambient occlusion is active due to writing to the position texture being disabled otherwise.
         */
        static pointRenderToWorld(_render) {
            const crc3 = RenderWebGL.getRenderingContext();
            const data = new Float32Array(4);
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboMain);
            crc3.readBuffer(WebGL2RenderingContext.COLOR_ATTACHMENT1);
            crc3.readPixels(_render.x, RenderWebGL.rectRender.height - _render.y, 1, 1, crc3.RGBA, crc3.FLOAT, data);
            crc3.readBuffer(WebGL2RenderingContext.COLOR_ATTACHMENT0);
            let position = FudgeCore.Recycler.get(FudgeCore.Vector3);
            position.set(data[0], data[1], data[2]);
            return position;
        }
        /**
         * Initializes different framebuffers aswell as texture attachments to use as render targets
         */
        static initializeAttachments() {
            RenderWebGL.crc3.getExtension("EXT_color_buffer_float"); // TODO: disable ssao if not supported
            RenderWebGL.fboMain = RenderWebGL.assert(RenderWebGL.crc3.createFramebuffer());
            RenderWebGL.fboPost = RenderWebGL.assert(RenderWebGL.crc3.createFramebuffer());
            RenderWebGL.fboTarget = null;
            RenderWebGL.texColor = createTexture(WebGL2RenderingContext.NEAREST, WebGL2RenderingContext.CLAMP_TO_EDGE);
            RenderWebGL.texPosition = createTexture(WebGL2RenderingContext.NEAREST, WebGL2RenderingContext.CLAMP_TO_EDGE);
            RenderWebGL.texNormal = createTexture(WebGL2RenderingContext.NEAREST, WebGL2RenderingContext.CLAMP_TO_EDGE);
            RenderWebGL.texDepthStencil = createTexture(WebGL2RenderingContext.NEAREST, WebGL2RenderingContext.CLAMP_TO_EDGE);
            RenderWebGL.texNoise = createTexture(WebGL2RenderingContext.NEAREST, WebGL2RenderingContext.CLAMP_TO_EDGE);
            RenderWebGL.texBloomSamples = new Array(6);
            for (let i = 0; i < RenderWebGL.texBloomSamples.length; i++)
                RenderWebGL.texBloomSamples[i] = createTexture(WebGL2RenderingContext.LINEAR, WebGL2RenderingContext.CLAMP_TO_EDGE);
            function createTexture(_filter, _wrap) {
                const crc3 = RenderWebGL.crc3;
                const texture = RenderWebGL.assert(crc3.createTexture());
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, texture);
                crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, _filter);
                crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, _filter);
                crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_S, _wrap);
                crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_T, _wrap);
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
                return texture;
            }
        }
        /**
         * Adjusts the size of the different texture attachments (render targets) to the canvas size
         * ‚ö†Ô∏è CAUTION: Expensive operation, use only when canvas size changed
         */
        static adjustAttachments() {
            const crc3 = RenderWebGL.getRenderingContext();
            const width = crc3.canvas.width || 1;
            const height = crc3.canvas.height || 1;
            crc3.activeTexture(crc3.TEXTURE0);
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texColor);
            crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.RGBA, width, height, 0, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.UNSIGNED_BYTE, null);
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texPosition);
            // In view space 16F would be precise enough... but we want to use world space for calculations
            crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.RGBA32F, width, height, 0, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.FLOAT, null);
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texNormal);
            crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.RGBA16F, width, height, 0, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.FLOAT, null);
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texDepthStencil);
            crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.DEPTH24_STENCIL8, width, height, 0, WebGL2RenderingContext.DEPTH_STENCIL, WebGL2RenderingContext.UNSIGNED_INT_24_8, null);
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboMain);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texColor, 0);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT1, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texPosition, 0);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT2, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texNormal, 0);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.DEPTH_STENCIL_ATTACHMENT, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texDepthStencil, 0);
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, null);
            for (let i = 0, divisor = 1; i < RenderWebGL.texBloomSamples.length; i++, divisor *= 2) {
                let width = Math.max(Math.round(crc3.canvas.width / divisor), 1);
                let height = Math.max(Math.round(crc3.canvas.height / divisor), 1);
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texBloomSamples[i]);
                crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.RGBA, width, height, 0, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.UNSIGNED_BYTE, null);
            }
            const nValues = width * height * 4;
            const noiseData = new Uint8Array(nValues);
            for (let i = 0; i < nValues; i += 4) {
                noiseData[i] = Math.floor(Math.random() * 256);
                noiseData[i + 1] = Math.floor(Math.random() * 256);
                noiseData[i + 2] = Math.floor(Math.random() * 256);
                noiseData[i + 3] = Math.floor(Math.random() * 256);
            }
            crc3.bindTexture(crc3.TEXTURE_2D, RenderWebGL.texNoise);
            crc3.texImage2D(crc3.TEXTURE_2D, 0, crc3.RGBA, width, height, 0, crc3.RGBA, crc3.UNSIGNED_BYTE, noiseData);
            crc3.bindTexture(crc3.TEXTURE_2D, null);
        }
        //#region Picking
        /**
         * Creates a texture buffer to be used as pick-buffer
         */
        static createPickTexture(_size) {
            // create to render to
            const targetTexture = RenderWebGL.assert(FudgeCore.Render.crc3.createTexture());
            FudgeCore.Render.crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, targetTexture); // TODO: check if superclass (RenderWebGL) should refer downwards to subclass (Render) like this
            {
                const internalFormat = WebGL2RenderingContext.RGBA32I;
                const format = WebGL2RenderingContext.RGBA_INTEGER;
                const type = WebGL2RenderingContext.INT;
                FudgeCore.Render.pickBuffer = new Int32Array(_size * _size * 4);
                FudgeCore.Render.crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, internalFormat, _size, _size, 0, format, type, FudgeCore.Render.pickBuffer);
                // set the filtering so we don't need mips
                FudgeCore.Render.crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.LINEAR);
                FudgeCore.Render.crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_S, WebGL2RenderingContext.CLAMP_TO_EDGE);
                FudgeCore.Render.crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_T, WebGL2RenderingContext.CLAMP_TO_EDGE);
            }
            const framebuffer = FudgeCore.Render.crc3.createFramebuffer();
            FudgeCore.Render.crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, framebuffer);
            const attachmentPoint = WebGL2RenderingContext.COLOR_ATTACHMENT0;
            FudgeCore.Render.crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, attachmentPoint, WebGL2RenderingContext.TEXTURE_2D, targetTexture, 0);
            RenderWebGL.sizePick = _size;
            return targetTexture;
        }
        static getPicks(_size, _cmpCamera) {
            // evaluate texture by reading pixels and extract, convert and store the information about each mesh hit
            let data = new Int32Array(_size * _size * 4);
            FudgeCore.Render.crc3.readPixels(0, 0, _size, _size, WebGL2RenderingContext.RGBA_INTEGER, WebGL2RenderingContext.INT, data);
            let mtxViewToWorld = FudgeCore.Matrix4x4.INVERSE(_cmpCamera.mtxWorldToView);
            let picked = [];
            for (let i = 0; i < FudgeCore.Render.∆ípicked.length; i++) {
                let zBuffer = data[4 * i + 0] + data[4 * i + 1] / 256;
                if (zBuffer == 0) // discard misses 
                    continue;
                let pick = FudgeCore.Render.∆ípicked[i];
                pick.zBuffer = convertInt32toFloat32(data, 4 * i + 0) * 2 - 1;
                pick.color = convertInt32toColor(data, 4 * i + 1);
                pick.textureUV = FudgeCore.Recycler.get(FudgeCore.Vector2);
                pick.textureUV.set(convertInt32toFloat32(data, 4 * i + 2), convertInt32toFloat32(data, 4 * i + 3));
                pick.mtxViewToWorld = mtxViewToWorld;
                picked.push(pick);
            }
            return picked;
            function convertInt32toFloat32(_int32Array, _index) {
                let buffer = new ArrayBuffer(4);
                let view = new DataView(buffer);
                view.setInt32(0, _int32Array[_index]);
                return view.getFloat32(0);
            }
            function convertInt32toColor(_int32Array, _index) {
                let buffer = new ArrayBuffer(4);
                let view = new DataView(buffer);
                view.setInt32(0, _int32Array[_index]);
                let color = FudgeCore.Color.CSS(`rgb(${view.getUint8(0)}, ${view.getUint8(1)}, ${view.getUint8(2)})`, view.getUint8(3) / 255);
                return color;
            }
        }
        /**
        * The render function for picking a single node.
        * A cameraprojection with extremely narrow focus is used, so each pixel of the buffer would hold the same information from the node,
        * but the fragment shader renders only 1 pixel for each node into the render buffer, 1st node to 1st pixel, 2nd node to second pixel etc.
        */
        static pick(_node, _cmpCamera) {
            try {
                let cmpMesh = _node.getComponent(FudgeCore.ComponentMesh);
                let cmpMaterial = _node.getComponent(FudgeCore.ComponentMaterial);
                let coat = cmpMaterial.material.coat;
                let shader = coat instanceof FudgeCore.CoatTextured ? FudgeCore.ShaderPickTextured : FudgeCore.ShaderPick;
                shader.useProgram();
                coat.useRenderData(shader, cmpMaterial);
                let mtxMeshToView = this.calcMeshToView(_node, cmpMesh.mtxWorld, _cmpCamera.mtxWorldToView, _cmpCamera.mtxWorld.translation);
                let sizeUniformLocation = shader.uniforms["u_vctSize"];
                RenderWebGL.getRenderingContext().uniform2fv(sizeUniformLocation, [RenderWebGL.sizePick, RenderWebGL.sizePick]);
                let mesh = cmpMesh.mesh;
                let renderBuffers = mesh.useRenderBuffers(shader, _node.mtxWorld, mtxMeshToView, FudgeCore.Render.∆ípicked.length);
                RenderWebGL.crc3.drawElements(WebGL2RenderingContext.TRIANGLES, renderBuffers.nIndices, WebGL2RenderingContext.UNSIGNED_SHORT, 0);
                let pick = new FudgeCore.Pick(_node);
                FudgeCore.Render.∆ípicked.push(pick);
            }
            catch (_error) {
                //
            }
        }
        static pickGizmos(_gizmos, _cmpCamera) {
            const crc3 = RenderWebGL.getRenderingContext();
            // buffer these into both shaders as we don't know which one will be used for the gizmo
            let shader = FudgeCore.ShaderPick;
            shader.useProgram();
            crc3.uniform2fv(shader.uniforms["u_vctSize"], [RenderWebGL.sizePick, RenderWebGL.sizePick]);
            shader = FudgeCore.ShaderPickTextured;
            shader.useProgram();
            crc3.uniform2fv(shader.uniforms["u_vctSize"], [RenderWebGL.sizePick, RenderWebGL.sizePick]);
            crc3.uniformMatrix3fv(shader.uniforms["u_mtxPivot"], false, FudgeCore.Matrix3x3.IDENTITY().get()); // only needed for textured pick shader, but gizmos have no pivot
            FudgeCore.Gizmos.pick(_gizmos, _cmpCamera, FudgeCore.Render.∆ípicked);
        }
        //#endregion
        /**
         * Buffer the fog parameters into the fog ubo
         */
        static bufferFog(_cmpFog) {
            const crc3 = RenderWebGL.getRenderingContext();
            const data = new Float32Array(8);
            data[0] = _cmpFog?.isActive ? 1 : 0;
            if (_cmpFog) {
                data[1] = _cmpFog.near;
                data[2] = _cmpFog.far;
                data.set(_cmpFog.color.get(), 4);
            }
            // buffer data to bound buffer
            crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, RenderWebGL.uboFog);
            crc3.bufferData(WebGL2RenderingContext.UNIFORM_BUFFER, data, WebGL2RenderingContext.STATIC_DRAW);
            // bind buffer to binding point
            crc3.bindBufferBase(WebGL2RenderingContext.UNIFORM_BUFFER, FudgeCore.UNIFORM_BLOCKS.FOG.BINDING, RenderWebGL.uboFog);
        }
        /**
         * Buffer the data from the lights in the scenegraph into the lights ubo
         */
        static bufferLights(_lights) {
            if (!RenderWebGL.uboLights)
                return;
            RenderWebGL.crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, RenderWebGL.uboLights);
            // fill the buffer with the ambient light color
            let cmpLights = _lights.get(FudgeCore.LightAmbient);
            if (cmpLights) {
                let clrSum = new FudgeCore.Color(0, 0, 0, 0);
                for (let cmpLight of cmpLights)
                    clrSum.add(cmpLight.light.color);
                RenderWebGL.crc3.bufferSubData(RenderWebGL.crc3.UNIFORM_BUFFER, RenderWebGL.uboLightsVariableOffsets["u_ambient.vctColor"], // byte offset of the struct Light "u_ambient" inside the ubo
                new Float32Array(clrSum.get()));
            }
            // fill the buffer with the light data for each light type
            // we are currently doing a maximum of 4 crc3.bufferSubData() calls, but we could do this in one call
            bufferLightsOfType(FudgeCore.LightDirectional, "u_nLightsDirectional", "u_directional");
            bufferLightsOfType(FudgeCore.LightPoint, "u_nLightsPoint", "u_point");
            bufferLightsOfType(FudgeCore.LightSpot, "u_nLightsSpot", "u_spot");
            function bufferLightsOfType(_type, _uniName, _uniStruct) {
                const cmpLights = _lights.get(_type);
                RenderWebGL.crc3.bufferSubData(RenderWebGL.crc3.UNIFORM_BUFFER, RenderWebGL.uboLightsVariableOffsets[_uniName], // byte offset of the uint "u_nLightsDirectional" inside the ubo
                new Uint8Array([cmpLights?.length ?? 0]));
                if (!cmpLights)
                    return;
                const lightDataSize = 4 + 16 + 16; // vctColor + mtxShape + mtxShapeInverse, as float32s
                const lightsData = new Float32Array(cmpLights.length * lightDataSize);
                let iLight = 0;
                for (let cmpLight of cmpLights) {
                    const lightDataOffset = iLight * lightDataSize;
                    // set vctColor
                    lightsData.set(cmpLight.light.color.get(), lightDataOffset + 0);
                    // set mtxShape
                    let mtxTotal = FudgeCore.Matrix4x4.PRODUCT(cmpLight.node.mtxWorld, cmpLight.mtxPivot);
                    if (_type == FudgeCore.LightDirectional) {
                        let zero = FudgeCore.Vector3.ZERO();
                        mtxTotal.translation = zero;
                        FudgeCore.Recycler.store(zero);
                    }
                    lightsData.set(mtxTotal.get(), lightDataOffset + 4); // offset + vctColor
                    // set mtxShapeInverse
                    if (_type != FudgeCore.LightDirectional) {
                        let mtxInverse = FudgeCore.Matrix4x4.INVERSE(mtxTotal);
                        lightsData.set(mtxInverse.get(), lightDataOffset + 4 + 16); // offset + vctColor + mtxShape
                        FudgeCore.Recycler.store(mtxInverse);
                    }
                    FudgeCore.Recycler.store(mtxTotal);
                    iLight++;
                }
                RenderWebGL.crc3.bufferSubData(RenderWebGL.crc3.UNIFORM_BUFFER, RenderWebGL.uboLightsVariableOffsets[`${_uniStruct}[0].vctColor`], // byte offset of the struct Light array inside the ubo
                lightsData);
            }
        }
        /**
         * Draws the given nodes using the given camera and the post process components attached to the same node as the camera
         * The opaque nodes are drawn first, then ssao is applied, then bloom is applied, then nodes alpha (sortForAlpha) are drawn.
         */
        static drawNodes(_nodesOpaque, _nodesAlpha, _cmpCamera) {
            const crc3 = RenderWebGL.getRenderingContext();
            const cmpFog = _cmpCamera.node?.getComponent(FudgeCore.ComponentFog);
            const cmpAmbientOcclusion = _cmpCamera.node?.getComponent(FudgeCore.ComponentAmbientOcclusion);
            const cmpBloom = _cmpCamera.node?.getComponent(FudgeCore.ComponentBloom);
            RenderWebGL.bufferFog(cmpFog);
            // opaque pass 
            // TODO: think about disabling blending for all opaque objects, this might improve performance 
            // as otherwise the 3 color attachments (color, position and normals) all need to be blended
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboMain);
            crc3.drawBuffers(cmpAmbientOcclusion?.isActive ? // only use position and normal textures if ambient occlusion is active
                [WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.COLOR_ATTACHMENT1, WebGL2RenderingContext.COLOR_ATTACHMENT2] :
                [WebGL2RenderingContext.COLOR_ATTACHMENT0]);
            RenderWebGL.clear(_cmpCamera.clrBackground);
            crc3.disable(WebGL2RenderingContext.BLEND);
            for (let node of _nodesOpaque)
                RenderWebGL.drawNode(node, _cmpCamera);
            crc3.enable(WebGL2RenderingContext.BLEND);
            // ambient occlusion pass
            if (cmpAmbientOcclusion?.isActive)
                RenderWebGL.drawAmbientOcclusion(_cmpCamera, cmpAmbientOcclusion);
            // bloom pass
            if (cmpBloom?.isActive)
                RenderWebGL.drawBloom(cmpBloom);
            // transparent pass TODO: think about disabling depth write for all transparent objects -> this might make depth mask option in component particle system obsolete
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboMain);
            crc3.drawBuffers([WebGL2RenderingContext.COLOR_ATTACHMENT0]);
            // crc3.depthMask(false);
            for (let node of _nodesAlpha)
                RenderWebGL.drawNode(node, _cmpCamera);
            // crc3.depthMask(true);
            // copy framebuffer to canvas
            crc3.bindFramebuffer(WebGL2RenderingContext.READ_FRAMEBUFFER, RenderWebGL.fboMain);
            crc3.bindFramebuffer(WebGL2RenderingContext.DRAW_FRAMEBUFFER, RenderWebGL.fboTarget);
            crc3.blitFramebuffer(0, 0, crc3.canvas.width, crc3.canvas.height, 0, 0, crc3.canvas.width, crc3.canvas.height, WebGL2RenderingContext.COLOR_BUFFER_BIT | WebGL2RenderingContext.DEPTH_BUFFER_BIT, WebGL2RenderingContext.NEAREST);
        }
        /**
         * Draws the occlusion over the color-buffer, using the given ambient-occlusion-component
         */
        static drawAmbientOcclusion(_cmpCamera, _cmpAmbientOcclusion) {
            const crc3 = RenderWebGL.getRenderingContext();
            FudgeCore.ShaderAmbientOcclusion.useProgram();
            RenderWebGL.bindTexture(FudgeCore.ShaderAmbientOcclusion, RenderWebGL.texPosition, WebGL2RenderingContext.TEXTURE0, "u_texPosition");
            RenderWebGL.bindTexture(FudgeCore.ShaderAmbientOcclusion, RenderWebGL.texNormal, WebGL2RenderingContext.TEXTURE1, "u_texNormal");
            RenderWebGL.bindTexture(FudgeCore.ShaderAmbientOcclusion, RenderWebGL.texNoise, WebGL2RenderingContext.TEXTURE2, "u_texNoise");
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fNear"], _cmpCamera.getNear());
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fFar"], _cmpCamera.getFar());
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fBias"], _cmpAmbientOcclusion.bias);
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fSampleRadius"], _cmpAmbientOcclusion.sampleRadius);
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fAttenuationConstant"], _cmpAmbientOcclusion.attenuationConstant);
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fAttenuationLinear"], _cmpAmbientOcclusion.attenuationLinear);
            crc3.uniform1f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_fAttenuationQuadratic"], _cmpAmbientOcclusion.attenuationQuadratic);
            crc3.uniform2f(FudgeCore.ShaderAmbientOcclusion.uniforms["u_vctResolution"], RenderWebGL.getCanvas().width, RenderWebGL.getCanvas().height);
            crc3.uniform3fv(FudgeCore.ShaderAmbientOcclusion.uniforms["u_vctCamera"], _cmpCamera.mtxWorld.translation.get());
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboPost);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texColor, 0);
            RenderWebGL.setBlendMode(BLEND.SUBTRACTIVE);
            crc3.drawArrays(WebGL2RenderingContext.TRIANGLES, 0, 3);
            RenderWebGL.setBlendMode(BLEND.TRANSPARENT);
        }
        /**
         * Draws the bloom-effect over the color-buffer, using the given bloom-component
         */
        static drawBloom(_cmpBloom) {
            const crc3 = RenderWebGL.getRenderingContext();
            FudgeCore.ShaderBloom.useProgram();
            // extract bright colors, could move this to main render pass so that individual objects can be exempt from bloom
            crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, RenderWebGL.fboPost);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texBloomSamples[0], 0);
            RenderWebGL.clear();
            RenderWebGL.bindTexture(FudgeCore.ShaderBloom, RenderWebGL.texColor, WebGL2RenderingContext.TEXTURE0, "u_texSource");
            crc3.uniform1f(FudgeCore.ShaderBloom.uniforms["u_fThreshold"], _cmpBloom.threshold);
            crc3.uniform1i(FudgeCore.ShaderBloom.uniforms["u_iMode"], 0);
            crc3.drawArrays(WebGL2RenderingContext.TRIANGLES, 0, 3);
            // downsample
            const iterations = RenderWebGL.texBloomSamples.length;
            for (let i = 1, divisor = 2; i < iterations; i++, divisor *= 2) {
                let width = Math.max(Math.round(crc3.canvas.width / divisor), 1);
                let height = Math.max(Math.round(crc3.canvas.height / divisor), 1);
                crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texBloomSamples[i], 0);
                crc3.viewport(0, 0, width, height);
                RenderWebGL.clear();
                RenderWebGL.bindTexture(FudgeCore.ShaderBloom, RenderWebGL.texBloomSamples[i - 1], WebGL2RenderingContext.TEXTURE0, "u_texSource");
                crc3.uniform1i(FudgeCore.ShaderBloom.uniforms["u_iMode"], 1);
                crc3.uniform2f(FudgeCore.ShaderBloom.uniforms["u_vctTexel"], 0.5 / width, 0.5 / height); // half texel size
                // crc3.uniform2f(ShaderBloom.uniforms["u_vctResolution"], width, height);
                crc3.drawArrays(WebGL2RenderingContext.TRIANGLES, 0, 3);
            }
            RenderWebGL.setBlendMode(BLEND.ADDITIVE);
            // upsample
            for (let i = iterations - 1, divisor = 2 ** (iterations - 2); i > 0; i--, divisor /= 2) {
                let width = Math.max(Math.round(crc3.canvas.width / divisor), 1);
                let height = Math.max(Math.round(crc3.canvas.height / divisor), 1);
                crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texBloomSamples[i - 1], 0);
                crc3.viewport(0, 0, Math.round(width), Math.round(height));
                RenderWebGL.bindTexture(FudgeCore.ShaderBloom, RenderWebGL.texBloomSamples[i], WebGL2RenderingContext.TEXTURE0, "u_texSource");
                crc3.uniform1i(FudgeCore.ShaderBloom.uniforms["u_iMode"], 2);
                crc3.uniform2f(FudgeCore.ShaderBloom.uniforms["u_vctTexel"], 0.5 / width, 0.5 / height); // half texel size
                // crc3.uniform2f(ShaderBloom.uniforms["u_vctResolution"], width, height);
                crc3.drawArrays(WebGL2RenderingContext.TRIANGLES, 0, 3);
            }
            crc3.viewport(0, 0, crc3.canvas.width, crc3.canvas.height);
            crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, WebGL2RenderingContext.COLOR_ATTACHMENT0, WebGL2RenderingContext.TEXTURE_2D, RenderWebGL.texColor, 0);
            RenderWebGL.bindTexture(FudgeCore.ShaderBloom, RenderWebGL.texBloomSamples[0], WebGL2RenderingContext.TEXTURE0, "u_texSource");
            crc3.uniform1i(FudgeCore.ShaderBloom.uniforms["u_iMode"], 3);
            crc3.uniform1f(FudgeCore.ShaderBloom.uniforms["u_fIntensity"], _cmpBloom.intensity);
            crc3.uniform1f(FudgeCore.ShaderBloom.uniforms["u_fHighlightDesaturation"], _cmpBloom.highlightDesaturation);
            crc3.drawArrays(WebGL2RenderingContext.TRIANGLES, 0, 3);
            RenderWebGL.setBlendMode(BLEND.TRANSPARENT);
        }
        /**
         * Draw a mesh buffer using the given infos and the complete projection matrix
        */
        static drawNode(_node, _cmpCamera) {
            let cmpMesh = _node.getComponent(FudgeCore.ComponentMesh);
            let cmpMaterial = _node.getComponent(FudgeCore.ComponentMaterial);
            let cmpText = _node.getComponent(FudgeCore.ComponentText);
            let coat = cmpMaterial.material.coat;
            let cmpParticleSystem = _node.getComponent(FudgeCore.ComponentParticleSystem);
            let drawParticles = cmpParticleSystem && cmpParticleSystem.isActive;
            let shader = cmpMaterial.material.getShader();
            if (drawParticles)
                shader = cmpParticleSystem.particleSystem.getShaderFrom(shader);
            shader.useProgram();
            coat.useRenderData(shader, cmpMaterial);
            let mtxMeshToWorld = cmpMesh.mtxWorld;
            if (cmpText?.isActive)
                mtxMeshToWorld = cmpText.useRenderData(mtxMeshToWorld, _cmpCamera);
            let mtxMeshToView = RenderWebGL.calcMeshToView(_node, mtxMeshToWorld, _cmpCamera.mtxWorldToView, _cmpCamera.mtxWorld.translation);
            let renderBuffers = cmpMesh.mesh.useRenderBuffers(shader, mtxMeshToWorld, mtxMeshToView);
            if (cmpMesh.skeleton?.isActive)
                cmpMesh.skeleton.useRenderBuffer(shader);
            let uniform = shader.uniforms["u_vctCamera"];
            if (uniform)
                RenderWebGL.crc3.uniform3fv(uniform, _cmpCamera.mtxWorld.translation.get());
            uniform = shader.uniforms["u_mtxWorldToView"];
            if (uniform)
                RenderWebGL.crc3.uniformMatrix4fv(uniform, false, _cmpCamera.mtxWorldToView.get());
            uniform = shader.uniforms["u_mtxWorldToCamera"];
            if (uniform) {
                // let mtxWorldToCamera: Matrix4x4 = Matrix4x4.INVERSION(_cmpCamera.mtxWorld); // todo: optimize/store in camera
                RenderWebGL.crc3.uniformMatrix4fv(uniform, false, _cmpCamera.mtxCameraInverse.get());
            }
            uniform = shader.uniforms["u_fAlphaClip"];
            if (uniform)
                RenderWebGL.crc3.uniform1f(uniform, cmpMaterial.material.alphaClip);
            if (drawParticles)
                RenderWebGL.drawParticles(cmpParticleSystem, shader, renderBuffers, _node.getComponent(FudgeCore.ComponentFaceCamera));
            else
                RenderWebGL.crc3.drawElements(WebGL2RenderingContext.TRIANGLES, renderBuffers.nIndices, WebGL2RenderingContext.UNSIGNED_SHORT, 0);
        }
        static drawParticles(_cmpParticleSystem, _shader, _renderBuffers, _cmpFaceCamera) {
            const crc3 = RenderWebGL.getRenderingContext();
            crc3.depthMask(_cmpParticleSystem.depthMask);
            RenderWebGL.setBlendMode(_cmpParticleSystem.blendMode);
            crc3.uniform1i(_shader.uniforms["u_iBlendMode"], _cmpParticleSystem.blendMode);
            _cmpParticleSystem.useRenderData();
            crc3.uniform1f(_shader.uniforms["u_fParticleSystemDuration"], _cmpParticleSystem.duration);
            crc3.uniform1f(_shader.uniforms["u_fParticleSystemSize"], _cmpParticleSystem.size);
            crc3.uniform1f(_shader.uniforms["u_fParticleSystemTime"], _cmpParticleSystem.time);
            crc3.uniform1i(_shader.uniforms[FudgeCore.TEXTURE_LOCATION.PARTICLE.UNIFORM], FudgeCore.TEXTURE_LOCATION.PARTICLE.INDEX);
            let faceCamera = _cmpFaceCamera && _cmpFaceCamera.isActive;
            crc3.uniform1i(_shader.uniforms["u_bParticleSystemFaceCamera"], faceCamera ? 1 : 0);
            crc3.uniform1i(_shader.uniforms["u_bParticleSystemRestrict"], faceCamera && _cmpFaceCamera.restrict ? 1 : 0);
            crc3.drawElementsInstanced(WebGL2RenderingContext.TRIANGLES, _renderBuffers.nIndices, WebGL2RenderingContext.UNSIGNED_SHORT, 0, _cmpParticleSystem.size);
            RenderWebGL.setBlendMode(BLEND.TRANSPARENT);
            crc3.depthMask(true);
        }
        static calcMeshToView(_node, _mtxMeshToWorld, _mtxWorldToView, _target) {
            // TODO: This could be a Render function as it does not do anything with WebGL
            let cmpFaceCamera = _node.getComponent(FudgeCore.ComponentFaceCamera);
            if (cmpFaceCamera && cmpFaceCamera.isActive) {
                let mtxMeshToView; // mesh to world?
                mtxMeshToView = _mtxMeshToWorld.clone;
                mtxMeshToView.lookAt(_target, cmpFaceCamera.upLocal ? null : cmpFaceCamera.up, cmpFaceCamera.restrict);
                return FudgeCore.Matrix4x4.PRODUCT(_mtxWorldToView, mtxMeshToView);
            }
            return FudgeCore.Matrix4x4.PRODUCT(_mtxWorldToView, _mtxMeshToWorld);
        }
        static bindTexture(_shader, _texture, _unit, _uniform) {
            const crc3 = RenderWebGL.getRenderingContext();
            crc3.activeTexture(_unit);
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, _texture);
            crc3.uniform1i(_shader.uniforms[_uniform], _unit - WebGL2RenderingContext.TEXTURE0);
        }
    }
    FudgeCore.RenderWebGL = RenderWebGL;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Gives WebGL Buffer the data from the {@link Texture}
     * @internal
     */
    class RenderInjectorTexture extends FudgeCore.RenderInjector {
        static decorate(_constructor, _context) {
            FudgeCore.RenderInjector.inject(_constructor, RenderInjectorTexture);
            Object.defineProperty(_constructor.prototype, "deleteRenderData", {
                value: RenderInjectorTexture.deleteRenderData
            });
        }
        static injectTexture(_textureUnit = WebGL2RenderingContext.TEXTURE0) {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (!this.renderData)
                this.renderData = FudgeCore.RenderWebGL.assert(crc3.createTexture()); // TODO: check if all WebGL-Creations are asserted
            crc3.activeTexture(_textureUnit);
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, this.renderData);
            if (this.textureDirty) {
                try {
                    // Always premultiply alpha while loading textures
                    crc3.pixelStorei(crc3.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);
                    crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.UNSIGNED_BYTE, this.texImageSource);
                    crc3.pixelStorei(crc3.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);
                    this.mipmapDirty = true;
                    this.textureDirty = false;
                }
                catch (_error) {
                    FudgeCore.Debug.error(_error);
                }
            }
            if (this.mipmapDirty) {
                switch (this.mipmap) {
                    case FudgeCore.MIPMAP.CRISP:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.NEAREST);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.NEAREST);
                        break;
                    case FudgeCore.MIPMAP.MEDIUM:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.NEAREST);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.NEAREST_MIPMAP_LINEAR);
                        crc3.generateMipmap(WebGL2RenderingContext.TEXTURE_2D);
                        break;
                    case FudgeCore.MIPMAP.BLURRY:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.LINEAR);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.LINEAR_MIPMAP_LINEAR);
                        crc3.generateMipmap(WebGL2RenderingContext.TEXTURE_2D);
                        break;
                    case FudgeCore.MIPMAP.SMOOTH:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.LINEAR);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.LINEAR);
                }
                this.mipmapDirty = false;
            }
            if (this.wrapDirty) {
                switch (this.wrap) {
                    case FudgeCore.WRAP.REPEAT:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_S, WebGL2RenderingContext.REPEAT);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_T, WebGL2RenderingContext.REPEAT);
                        break;
                    case FudgeCore.WRAP.CLAMP:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_S, WebGL2RenderingContext.CLAMP_TO_EDGE);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_T, WebGL2RenderingContext.CLAMP_TO_EDGE);
                        break;
                    case FudgeCore.WRAP.MIRROR:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_S, WebGL2RenderingContext.MIRRORED_REPEAT);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_T, WebGL2RenderingContext.MIRRORED_REPEAT);
                        break;
                }
                this.wrapDirty = false;
            }
        }
        static deleteRenderData() {
            if (!this.renderData)
                return;
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
            crc3.deleteTexture(this.renderData);
            this.renderData = null;
            this.textureDirty = true;
            this.mipmapDirty = true;
            this.wrapDirty = true;
        }
    }
    FudgeCore.RenderInjectorTexture = RenderInjectorTexture;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Special type of {@link Event} for physics.
     */
    class EventPhysics extends Event {
        /** Creates a new event customized for physics. Holding informations about impulses. Collision point and the body that is colliding */
        constructor(_type, _hitRigidbody, _normalImpulse, _tangentImpulse, _binormalImpulse, _collisionPoint = null, _collisionNormal = null) {
            super(_type);
            this.cmpRigidbody = _hitRigidbody;
            this.normalImpulse = _normalImpulse;
            this.tangentImpulse = _tangentImpulse;
            this.binomalImpulse = _binormalImpulse;
            this.collisionPoint = _collisionPoint;
            this.collisionNormal = _collisionNormal;
        }
    }
    FudgeCore.EventPhysics = EventPhysics;
    /**
    * Groups to place a node in, not every group should collide with every group. Use a Mask in to exclude collisions
    */
    let COLLISION_GROUP;
    (function (COLLISION_GROUP) {
        COLLISION_GROUP[COLLISION_GROUP["DEFAULT"] = 1] = "DEFAULT";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_1"] = 2] = "GROUP_1";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_2"] = 4] = "GROUP_2";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_3"] = 8] = "GROUP_3";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_4"] = 16] = "GROUP_4";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_5"] = 32] = "GROUP_5";
    })(COLLISION_GROUP = FudgeCore.COLLISION_GROUP || (FudgeCore.COLLISION_GROUP = {}));
    /**
    * Defines the type of the rigidbody which determines the way it interacts with the physical and the visual world
    */
    let BODY_TYPE;
    (function (BODY_TYPE) {
        /** The body ignores the hierarchy of the render graph, is completely controlled  by physics and takes its node with it  */
        BODY_TYPE[BODY_TYPE["DYNAMIC"] = 0] = "DYNAMIC";
        /** The body ignores the hierarchy of the render graph, is completely immoveble and keeps its node from moving  */
        BODY_TYPE[BODY_TYPE["STATIC"] = 1] = "STATIC";
        /** The body is controlled by its node and moves with it, while it impacts the physical world e.g. by collisions */
        BODY_TYPE[BODY_TYPE["KINEMATIC"] = 2] = "KINEMATIC"; // = OIMO.RigidBodyType.KINEMATIC
    })(BODY_TYPE = FudgeCore.BODY_TYPE || (FudgeCore.BODY_TYPE = {}));
    /**
    * Different types of collider shapes, with different options in scaling BOX = Vector3(length, height, depth),
    * SPHERE = Vector3(diameter, x, x), CAPSULE = Vector3(diameter, height, x), CYLINDER = Vector3(diameter, height, x),
    * CONE = Vector(diameter, height, x), PYRAMID = Vector3(length, height, depth); x == unused.
    * CONVEX = ComponentMesh needs to be available in the RB Property convexMesh, the points of that component are used to create a collider that matches,
    * the closest possible representation of that form, in form of a hull. Convex is experimental and can produce unexpected behaviour when vertices
    * are too close to one another and the given vertices do not form a in itself closed shape and having a genus of 0 (no holes). Vertices in the ComponentMesh can be scaled differently
    * for texturing/normal or other reasons, so the collider might be off compared to the visual shape, this can be corrected by changing the pivot scale of the ComponentRigidbody.
    */
    let COLLIDER_TYPE;
    (function (COLLIDER_TYPE) {
        COLLIDER_TYPE[COLLIDER_TYPE["CUBE"] = 0] = "CUBE";
        COLLIDER_TYPE[COLLIDER_TYPE["SPHERE"] = 1] = "SPHERE";
        COLLIDER_TYPE[COLLIDER_TYPE["CAPSULE"] = 2] = "CAPSULE";
        COLLIDER_TYPE[COLLIDER_TYPE["CYLINDER"] = 3] = "CYLINDER";
        COLLIDER_TYPE[COLLIDER_TYPE["CONE"] = 4] = "CONE";
        COLLIDER_TYPE[COLLIDER_TYPE["PYRAMID"] = 5] = "PYRAMID";
        COLLIDER_TYPE[COLLIDER_TYPE["CONVEX"] = 6] = "CONVEX";
    })(COLLIDER_TYPE = FudgeCore.COLLIDER_TYPE || (FudgeCore.COLLIDER_TYPE = {}));
    /** Displaying different types of debug information about different physic features. Default = JOINTS_AND_COLLIDER. */
    let PHYSICS_DEBUGMODE;
    (function (PHYSICS_DEBUGMODE) {
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["NONE"] = 0] = "NONE";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["COLLIDERS"] = 1] = "COLLIDERS";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["JOINTS_AND_COLLIDER"] = 2] = "JOINTS_AND_COLLIDER";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["BOUNDING_BOXES"] = 3] = "BOUNDING_BOXES";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["CONTACTS"] = 4] = "CONTACTS";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["PHYSIC_OBJECTS_ONLY"] = 5] = "PHYSIC_OBJECTS_ONLY";
    })(PHYSICS_DEBUGMODE = FudgeCore.PHYSICS_DEBUGMODE || (FudgeCore.PHYSICS_DEBUGMODE = {}));
    /** Info about Raycasts shot from the physics system. */
    class RayHitInfo {
        constructor() {
            this.hitPoint = FudgeCore.Vector3.ZERO();
            this.hitNormal = FudgeCore.Vector3.ZERO();
            this.rayEnd = FudgeCore.Vector3.ZERO();
            this.rayOrigin = FudgeCore.Vector3.ZERO();
            this.recycle();
        }
        recycle() {
            this.hit = false;
            this.hitDistance = 0;
            this.hitPoint.recycle();
            this.rigidbodyComponent = null;
            this.hitNormal.recycle();
            this.rayOrigin.recycle();
            this.rayEnd.recycle();
        }
    }
    FudgeCore.RayHitInfo = RayHitInfo;
    /** General settings for the physic simulation and the debug of it. */
    class PhysicsSettings {
        constructor(_defaultCollisionGroup, _defaultCollisionMask) {
            if (typeof OIMO == "undefined")
                return;
            this.defaultCollisionGroup = _defaultCollisionGroup;
            this.defaultCollisionMask = _defaultCollisionMask;
        }
        /** Change if rigidbodies are able to sleep (don't be considered in physical calculations) when their movement is below a threshold. Deactivation is decreasing performance for minor advantage in precision. */
        get disableSleeping() {
            return OIMO.Setting.disableSleeping;
        }
        set disableSleeping(_value) {
            OIMO.Setting.disableSleeping = _value;
        }
        /** Sleeping Threshold for Movement Veloctiy. */
        get sleepingVelocityThreshold() {
            return OIMO.Setting.sleepingVelocityThreshold;
        }
        set sleepingVelocityThreshold(_value) {
            OIMO.Setting.sleepingVelocityThreshold = _value;
        }
        /** Sleeping Threshold for Rotation Velocity. */
        get sleepingAngularVelocityThreshold() {
            return OIMO.Setting.sleepingAngularVelocityThreshold;
        }
        set sleepingAngularVelocityThreshold(_value) {
            OIMO.Setting.sleepingAngularVelocityThreshold = _value;
        }
        /** Threshold how long the Rigidbody must be below/above the threshold to count as sleeping. */
        get sleepingTimeThreshold() {
            return OIMO.Setting.sleepingTimeThreshold;
        }
        set sleepingTimeThreshold(_value) {
            OIMO.Setting.sleepingTimeThreshold = _value;
        }
        /** Error threshold. Default is 0.05. The higher the more likely collisions get detected before actual impact at high speeds but it's visually less accurate. */
        get defaultCollisionMargin() {
            return OIMO.Setting.defaultGJKMargin;
        }
        set defaultCollisionMargin(_thickness) {
            OIMO.Setting.defaultGJKMargin = _thickness;
        }
        /** The default applied friction between two rigidbodies with the default value. How much velocity is slowed down when moving accross this surface. */
        get defaultFriction() {
            return OIMO.Setting.defaultFriction;
        }
        set defaultFriction(_value) {
            OIMO.Setting.defaultFriction = _value;
        }
        /** Bounciness of rigidbodies. How much of the impact is restituted. */
        get defaultRestitution() {
            return OIMO.Setting.defaultRestitution;
        }
        set defaultRestitution(_value) {
            OIMO.Setting.defaultRestitution = _value;
        }
        /** Groups the default rigidbody will collide with. Set it like: (PHYSICS_GROUP.DEFAULT | PHYSICS_GROUP.GROUP_1 | PHYSICS_GROUP.GROUP_2 | PHYSICS_GROUP.GROUP_3)
         * to collide with multiple groups. Default is collision with everything but triggers.
        */
        get defaultCollisionMask() {
            return OIMO.Setting.defaultCollisionMask;
        }
        set defaultCollisionMask(_value) {
            OIMO.Setting.defaultCollisionMask = _value;
        }
        /** The group that this rigidbody belongs to. Default is the DEFAULT Group which means its just a normal Rigidbody not a trigger nor anything special. */
        get defaultCollisionGroup() {
            return OIMO.Setting.defaultCollisionGroup;
        }
        set defaultCollisionGroup(_value) {
            OIMO.Setting.defaultCollisionGroup = _value;
        }
        /** Change the type of joint solver algorithm. Default Iterative == 0, is faster but less stable. Direct == 1, slow but more stable, recommended for complex joint work. Change this setting only at the start of your game. */
        get defaultConstraintSolverType() {
            return OIMO.Setting.defaultJointConstraintSolverType;
        }
        set defaultConstraintSolverType(_value) {
            OIMO.Setting.defaultJointConstraintSolverType = _value;
        }
        /** The correction algorithm used to correct physics calculations. Change this only at the beginning of your game. Each has different approaches, so if you have problems test another
         *  Default 0 = Baumgarte (fast but less correct induces some energy errors), 1 = Split-Impulse (fast and no engery errors, but more inaccurate for joints), 2 = Non-linear Gauss Seidel (slowest but most accurate)*/
        get defaultCorrectionAlgorithm() {
            return OIMO.Setting.defaultJointPositionCorrectionAlgorithm;
        }
        set defaultCorrectionAlgorithm(_value) {
            OIMO.Setting.defaultJointPositionCorrectionAlgorithm = _value;
        }
        /** The precision of the simulation in form of number of iterations the simulations runs through until it accepts the result.
         *  10 Default - Higher means more precision but results in a performance decrease. This helps especially with joints,
         * but also the general stability of the simulation due to simulation steps being rechecked multiple times before being set.
         */
        get solverIterations() {
            return FudgeCore.Physics.activeInstance.getOimoWorld().getNumPositionIterations();
        }
        set solverIterations(_value) {
            FudgeCore.Physics.activeInstance.getOimoWorld().setNumPositionIterations(_value);
            FudgeCore.Physics.activeInstance.getOimoWorld().setNumVelocityIterations(_value);
        }
    }
    FudgeCore.PhysicsSettings = PhysicsSettings;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * Acts as the physical representation of a connection between two {@link Node}'s.
       * The type of conncetion is defined by the subclasses like prismatic joint, cylinder joint etc.
       * A Rigidbody on the {@link Node} that this component is added to is needed. Setting the connectedRigidbody and
       * initializing the connection creates a physical connection between them. This differs from a connection through hierarchy
       * in the node structure of fudge. Joints can have different DOF's (Degrees Of Freedom), 1 Axis that can either twist or swing is a degree of freedom.
       * A joint typically consists of a motor that limits movement/rotation or is activly trying to move to a limit. And a spring which defines the rigidity.
       * @author Marko Fehrenbach, HFU 2020
       */
    class Joint extends FudgeCore.Component {
        /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
        static { this.baseClass = Joint; }
        /** list of all the subclasses derived from this class, if they registered properly*/
        static { this.subclasses = []; }
        #idBodyAnchor;
        #idBodyTied;
        #bodyAnchor;
        #bodyTied;
        #connected;
        #anchor;
        #internalCollision;
        #breakForce;
        #breakTorque;
        #nameChildToConnect;
        /** Create a joint connection between the two given RigidbodyComponents. */
        constructor(_bodyAnchor = null, _bodyTied = null) {
            super();
            // public static readonly iSubclass: number = Component.registerSubclass(ComponentJoint);
            this.singleton = false; //Multiple joints can be attached to one Node
            this.#idBodyAnchor = 0;
            this.#idBodyTied = 0;
            this.#connected = false;
            this.#internalCollision = false;
            this.#breakForce = 0;
            this.#breakTorque = 0;
            this.hndEvent = (_event) => {
                switch (_event.type) {
                    case "componentAdd" /* EVENT.COMPONENT_ADD */:
                        this.node.addEventListener("disconnectJoint" /* EVENT.DISCONNECT_JOINT */, () => { this.disconnect(); this.dirtyStatus(); }, true);
                        this.dirtyStatus();
                        break;
                    case "componentRemove" /* EVENT.COMPONENT_REMOVE */:
                        this.node.removeEventListener("disconnectJoint" /* EVENT.DISCONNECT_JOINT */, () => { this.disconnect(); this.dirtyStatus(); }, true);
                        this.removeJoint();
                        break;
                }
            };
            this.#getMutator = () => {
                let mutator = {
                    nameChildToConnect: this.#nameChildToConnect,
                    internalCollision: this.#internalCollision,
                    breakForce: this.#breakForce,
                    breakTorque: this.#breakTorque
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, ["internalCollision", "breakForce", "breakTorque"]);
            };
            this.bodyAnchor = _bodyAnchor;
            this.bodyTied = _bodyTied;
            /*
              Tell the physics that there is a new joint and on the physics start the actual joint is first created. Values can be set but the
              actual constraint ain't existent until the game starts
            */
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.hndEvent);
            this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.hndEvent);
        }
        static registerSubclass(_subclass) { return Joint.subclasses.push(_subclass) - 1; }
        /** Get/Set the first ComponentRigidbody of this connection. It should always be the one that this component is attached too in the sceneTree. */
        get bodyAnchor() {
            return this.#bodyAnchor;
        }
        set bodyAnchor(_cmpRB) {
            this.#idBodyAnchor = _cmpRB != null ? _cmpRB.id : -1;
            this.#bodyAnchor = _cmpRB;
            this.disconnect();
            this.dirtyStatus();
        }
        /** Get/Set the second ComponentRigidbody of this connection. */
        get bodyTied() {
            return this.#bodyTied;
        }
        set bodyTied(_cmpRB) {
            this.#idBodyTied = _cmpRB != null ? _cmpRB.id : -1;
            this.#bodyTied = _cmpRB;
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The exact position where the two {@link Node}s are connected. When changed after initialization the joint needs to be reconnected.
         */
        get anchor() {
            return new FudgeCore.Vector3(this.#anchor.x, this.#anchor.y, this.#anchor.z);
        }
        set anchor(_value) {
            this.#anchor = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The amount of force needed to break the JOINT, while rotating, in Newton. 0 equals unbreakable (default)
        */
        get breakTorque() {
            return this.#breakTorque;
        }
        set breakTorque(_value) {
            this.#breakTorque = _value;
            if (this.joint != null)
                this.joint.setBreakTorque(this.#breakTorque);
        }
        /**
         * The amount of force needed to break the JOINT, in Newton. 0 equals unbreakable (default)
         */
        get breakForce() {
            return this.#breakForce;
        }
        set breakForce(_value) {
            this.#breakForce = _value;
            if (this.joint != null)
                this.joint.setBreakForce(this.#breakForce);
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
          * On a welding joint the connected bodies should not be colliding with each other,
          * for best results
         */
        get internalCollision() {
            return this.#internalCollision;
        }
        set internalCollision(_value) {
            this.#internalCollision = _value;
            if (this.joint != null)
                this.joint.setAllowCollision(this.#internalCollision);
        }
        /**
         * Connect a child node with the given name to the joint.
         */
        connectChild(_name) {
            this.#nameChildToConnect = _name;
            if (!this.node)
                return;
            let children = this.node.getChildrenByName(_name);
            if (children.length == 1)
                this.connectNode(children.pop());
            else
                FudgeCore.Debug.warn(`${this.constructor.name} at ${this.node.name} fails to connect child with non existent or ambigous name ${_name}`);
        }
        /**
         * Connect the given node to the joint. Tieing its rigidbody to the nodes rigidbody this component is attached to.
         */
        connectNode(_node) {
            if (!_node || !this.node)
                return;
            FudgeCore.Debug.fudge(`${this.constructor.name} connected ${this.node.name} and ${_node.name}`);
            let connectBody = _node.getComponent(FudgeCore.ComponentRigidbody);
            let thisBody = this.node.getComponent(FudgeCore.ComponentRigidbody);
            if (!connectBody || !thisBody) {
                FudgeCore.Debug.warn(`${this.constructor.name} at ${this.node.name} fails due to missing rigidbodies on ${this.node.name} or ${_node.name}`);
                return;
            }
            this.bodyAnchor = thisBody;
            this.bodyTied = connectBody;
        }
        /** Check if connection is dirty, so when either rb is changed disconnect and reconnect. Internally used no user interaction needed. */
        isConnected() {
            return this.#connected;
        }
        /**
         * Initializing and connecting the two rigidbodies with the configured joint properties
         * is automatically called by the physics system. No user interaction needed.
         */
        connect() {
            if (this.#connected == false) {
                if (this.#idBodyAnchor == -1 || this.#idBodyTied == -1) {
                    if (this.#nameChildToConnect)
                        this.connectChild(this.#nameChildToConnect);
                    return;
                }
                this.constructJoint();
                this.#connected = true;
                this.addJoint();
            }
        }
        /**
         * Disconnecting the two rigidbodies and removing them from the physics system,
         * is automatically called by the physics system. No user interaction needed.
         */
        disconnect() {
            if (this.#connected == true) {
                this.removeJoint();
                this.#connected = false;
            }
        }
        /**
         * Returns the original Joint used by the physics engine. Used internally no user interaction needed.
         * Only to be used when functionality that is not added within FUDGE is needed.
        */
        getOimoJoint() {
            return this.joint;
        }
        serialize() {
            let serialization = this.#getMutator();
            serialization.anchor = this.anchor.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.anchor = await new FudgeCore.Vector3().deserialize(_serialization.anchor);
            this.#mutate(_serialization);
            await super.deserialize(_serialization[super.constructor.name]);
            this.connectChild(_serialization.nameChildToConnect);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            Object.assign(mutator, this.#getMutator());
            mutator.anchor = this.anchor.getMutator();
            return mutator;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (typeof (_mutator.anchor) !== "undefined")
                this.anchor = new FudgeCore.Vector3(...(Object.values(_mutator.anchor)));
            delete _mutator.anchor;
            if (typeof (_mutator.nameChildToConnect) !== "undefined")
                this.connectChild(_mutator.nameChildToConnect);
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        reduceMutator(_mutator) {
            delete _mutator.springDamper;
            delete _mutator.joint;
            delete _mutator.motor;
            super.reduceMutator(_mutator);
        }
        /** Tell the FudgePhysics system that this joint needs to be handled in the next frame. */
        dirtyStatus() {
            FudgeCore.Physics.changeJointStatus(this);
        }
        addJoint() {
            FudgeCore.Physics.addJoint(this);
        }
        removeJoint() {
            FudgeCore.Physics.removeJoint(this);
        }
        constructJoint(..._configParams) {
            let posBodyAnchor = this.bodyAnchor.node.mtxWorld.translation; //Setting the anchor position locally from the first rigidbody
            let worldAnchor = new OIMO.Vec3(posBodyAnchor.x + this.#anchor.x, posBodyAnchor.y + this.#anchor.y, posBodyAnchor.z + this.#anchor.z);
            // @ts-ignore    // unfortunately, method init is not a member of the base class OIMO.JointConfig
            this.config.init(this.#bodyAnchor.getOimoRigidbody(), this.#bodyTied.getOimoRigidbody(), worldAnchor, ..._configParams);
        }
        configureJoint() {
            this.joint.setBreakForce(this.breakForce);
            this.joint.setBreakTorque(this.breakTorque);
            this.joint.setAllowCollision(this.#internalCollision);
        }
        deleteFromMutator(_mutator, _delete) {
            for (let key in _delete)
                delete _mutator[key];
        }
        #getMutator;
        #mutate;
    }
    FudgeCore.Joint = Joint;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * Base class for joints operating with exactly one axis
       * @author Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class JointAxial extends FudgeCore.Joint {
        //Internal Variables
        #maxMotor = 10;
        #minMotor = -10;
        #motorSpeed = 0;
        #axis;
        #springFrequency = 0;
        #springDamping = 0;
        /** Creating a cylindrical joint between two ComponentRigidbodies moving on one axis and rotating around another bound on a local anchorpoint. */
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.axis = _axis;
            this.anchor = _localAnchor;
            this.minMotor = -10;
            this.maxMotor = 10;
        }
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
         *  When changed after initialization the joint needs to be reconnected.
         */
        get axis() {
            return new FudgeCore.Vector3(this.#axis.x, this.#axis.y, this.#axis.z);
        }
        set axis(_value) {
            this.#axis = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        get maxMotor() {
            return this.#maxMotor;
        }
        set maxMotor(_value) {
            this.#maxMotor = _value;
            try {
                this.joint.getLimitMotor().upperLimit = _value;
            }
            catch (_e) { /* */ }
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        get minMotor() {
            return this.#minMotor;
        }
        set minMotor(_value) {
            this.#minMotor = _value;
            try {
                this.joint.getLimitMotor().lowerLimit = _value;
            }
            catch (_e) { /* */ }
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDamping() {
            return this.#springDamping;
        }
        set springDamping(_value) {
            this.#springDamping = _value;
            try {
                this.joint.getSpringDamper().dampingRatio = _value;
            }
            catch (_e) { /* */ }
        }
        /**
          * The target speed of the motor in m/s.
         */
        get motorSpeed() {
            return this.#motorSpeed;
        }
        set motorSpeed(_value) {
            this.#motorSpeed = _value;
            try {
                this.joint.getLimitMotor().motorSpeed = _value;
            }
            catch (_e) { /* */ }
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequency() {
            return this.#springFrequency;
        }
        set springFrequency(_value) {
            this.#springFrequency = _value;
            try {
                this.joint.getSpringDamper().frequency = _value;
            }
            catch (_e) { /* */ }
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization.axis = this.axis.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.axis = await new FudgeCore.Vector3().deserialize(_serialization.axis);
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (typeof (_mutator.axis) !== "undefined")
                this.axis = new FudgeCore.Vector3(...(Object.values(_mutator.axis)));
            delete _mutator.axis;
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.axis = this.axis.getMutator();
            Object.assign(mutator, this.#getMutator());
            return mutator;
        }
        //#endregion
        constructJoint() {
            this.springDamper = new OIMO.SpringDamper().setSpring(this.#springFrequency, this.#springDamping);
            super.constructJoint(this.#axis);
        }
        #getMutator = () => {
            let mutator = {
                springDamping: this.#springDamping,
                springFrequency: this.#springFrequency,
                maxMotor: this.#maxMotor,
                minMotor: this.#minMotor,
                motorSpeed: this.#motorSpeed
            };
            return mutator;
        };
        #mutate = (_mutator) => {
            this.mutateBase(_mutator, ["springDamping", "springFrequency", "maxMotor", "minMotor", "motorSpeed"]);
        };
    }
    FudgeCore.JointAxial = JointAxial;
})(FudgeCore || (FudgeCore = {}));
/// <reference path="Debug/DebugTarget.ts"/>
/// <reference path="Debug/Debug.ts"/>
// / <reference path="Time/Time.ts"/>
/// <reference path="Event/Event.ts"/>
/// <reference path="Serialization/Mutable.ts"/>
/// <reference path="Serialization/Serializer.ts"/> 
/// <reference path="Graph/Node.ts"/>
/// <reference path="Component/Component.ts"/>
/// <reference path="Recycle/RecycableArray.ts"/>
/// <reference path="Render/RenderWebGL.ts"/>
/// <reference path="Render/RenderInjectorTexture.ts"/>
/// <reference path="Physics/HelpersPhysics.ts"/>
/// <reference path="Physics/Joint.ts"/>
/// <reference path="Physics/JointAxial.ts"/>
//global functions
function ifNumber(_check, _default) {
    return typeof _check == "undefined" ? _default : _check;
}
var FudgeCore;
(function (FudgeCore) {
    /**
     * Internally used to differentiate between the various generated structures and events.
     * @author Lukas Scheuerle, HFU, 2019
     */
    let ANIMATION_STRUCTURE_TYPE;
    (function (ANIMATION_STRUCTURE_TYPE) {
        /**Default: forward, continous */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["NORMAL"] = 0] = "NORMAL";
        /**backward, continous */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["REVERSE"] = 1] = "REVERSE";
        /**forward, rastered */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["RASTERED"] = 2] = "RASTERED";
        /**backward, rastered */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["RASTEREDREVERSE"] = 3] = "RASTEREDREVERSE";
    })(ANIMATION_STRUCTURE_TYPE || (ANIMATION_STRUCTURE_TYPE = {}));
    /**
     * Holds different playmodes the animation uses to play back its animation.
     * @author Lukas Scheuerle, HFU, 2019
     */
    let ANIMATION_PLAYMODE;
    (function (ANIMATION_PLAYMODE) {
        /**Plays animation in a loop: it restarts once it hit the end.*/
        ANIMATION_PLAYMODE["LOOP"] = "loop";
        /**Plays animation once and stops at the last key/frame*/
        ANIMATION_PLAYMODE["PLAY_ONCE"] = "playOnce";
        /**Plays animation once and stops on the first key/frame */
        ANIMATION_PLAYMODE["PLAY_ONCE_RESET"] = "playOnceReset";
        /**Plays animation like LOOP, but backwards.*/
        ANIMATION_PLAYMODE["REVERSE_LOOP"] = "reverseLoop";
        /**Causes the animation not to play at all. Useful for jumping to various positions in the animation without proceeding in the animation.*/
        ANIMATION_PLAYMODE["STOP"] = "stop";
        //TODO: add an INHERIT and a PINGPONG mode
    })(ANIMATION_PLAYMODE = FudgeCore.ANIMATION_PLAYMODE || (FudgeCore.ANIMATION_PLAYMODE = {}));
    let ANIMATION_QUANTIZATION;
    (function (ANIMATION_QUANTIZATION) {
        //TODO: add an in-depth description of what happens to the animation (and events) depending on the quantization. Use Graphs to explain.
        /**Calculates the state of the animation at the exact position of time. Ignores FPS value of animation.*/
        ANIMATION_QUANTIZATION["CONTINOUS"] = "continous";
        /**Limits the calculation of the state of the animation to the FPS value of the animation. Skips frames if needed.*/
        ANIMATION_QUANTIZATION["DISCRETE"] = "discrete";
        /** Advances the time each frame according to the FPS value of the animation, ignoring the actual duration of the frames. Doesn't skip any frames.*/
        ANIMATION_QUANTIZATION["FRAMES"] = "frames";
    })(ANIMATION_QUANTIZATION = FudgeCore.ANIMATION_QUANTIZATION || (FudgeCore.ANIMATION_QUANTIZATION = {}));
    /**
     * Describes and controls and animation by yielding mutators
     * according to the stored {@link AnimationStructure} and {@link AnimationSequence}s
     * Applied to a {@link Node} directly via script or {@link ComponentAnimator}.
     * @author Lukas Scheuerle, HFU, 21019 | Jirka Dell'Oro-Friedl, HFU, 2021-2023
     */
    class Animation extends FudgeCore.Mutable {
        // /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
        // public static readonly baseClass: typeof Animation = Animation;
        // /** list of all the subclasses derived from this class, if they registered properly*/
        static { this.subclasses = []; }
        static { this.iSubclass = Animation.registerSubclass(Animation); }
        #animationStructuresProcessed;
        constructor(_name = Animation.name, _animStructure = {}, _fps = 60) {
            super();
            this.idResource = undefined;
            this.totalTime = 0;
            this.labels = {}; // a label marks a specific time to conveniently jump to using a text identifier
            this.events = {};
            this.framesPerSecond = 60; // TODO: change this and its accessors to #framesPerSecond?
            // processed eventlist and animation strucutres for playback.
            this.eventsProcessed = new Map();
            this.#animationStructuresProcessed = new Map();
            this.name = _name;
            this.animationStructure = _animStructure;
            this.#animationStructuresProcessed.set(ANIMATION_STRUCTURE_TYPE.NORMAL, _animStructure);
            this.framesPerSecond = _fps;
            this.calculateTotalTime();
            FudgeCore.Project.register(this);
        }
        static registerSubclass(_subClass) { return Animation.subclasses.push(_subClass) - 1; }
        get getLabels() {
            //TODO: this actually needs testing
            let en = new Enumerator(this.labels);
            return en;
        }
        get fps() {
            return this.framesPerSecond;
        }
        set fps(_fps) {
            this.framesPerSecond = _fps;
            this.eventsProcessed.clear();
            this.clearCache();
        }
        /**
         * Clear this animations cache.
         */
        clearCache() {
            this.#animationStructuresProcessed.clear();
        }
        /**
         * Generates and returns a {@link Mutator} with the information to apply to the {@link Node} to animate
         * in the state the animation is in at the given time, direction and quantization
         */
        getState(_time, _direction, _quantization) {
            let m = {};
            let animationStructure;
            if (_quantization == ANIMATION_QUANTIZATION.CONTINOUS)
                animationStructure = _direction < 0 ? ANIMATION_STRUCTURE_TYPE.REVERSE : ANIMATION_STRUCTURE_TYPE.NORMAL;
            else
                animationStructure = _direction < 0 ? ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE : ANIMATION_STRUCTURE_TYPE.RASTERED;
            m = this.traverseStructureForMutator(this.getProcessedAnimationStructure(animationStructure), _time);
            return m;
        }
        /**
         * Returns a list of the names of the events the {@link ComponentAnimator} needs to fire between _min and _max input values.
         * @param _direction The direction the animation is supposed to run in. >0 == forward, 0 == stop, <0 == backwards
         * @returns a list of strings with the names of the custom events to fire.
         */
        getEventsToFire(_min, _max, _quantization, _direction) {
            let eventList = [];
            let minSection = Math.floor(_min / this.totalTime);
            let maxSection = Math.floor(_max / this.totalTime);
            _min = _min % this.totalTime;
            _max = _max % this.totalTime;
            while (minSection <= maxSection) {
                let eventTriggers = this.getCorrectEventList(_direction, _quantization);
                if (minSection == maxSection) {
                    eventList = eventList.concat(this.checkEventsBetween(eventTriggers, _min, _max));
                }
                else {
                    eventList = eventList.concat(this.checkEventsBetween(eventTriggers, _min, this.totalTime));
                    _min = 0;
                }
                minSection++;
            }
            return eventList;
        }
        /**
         * Adds an Event to the List of events.
         * @param _name The name of the event (needs to be unique per Animation).
         * @param _time The timestamp of the event (in milliseconds).
         */
        setEvent(_name, _time) {
            this.events[_name] = _time;
            this.eventsProcessed.clear();
        }
        /**
         * Removes the event with the given name from the list of events.
         * @param _name name of the event to remove.
         */
        removeEvent(_name) {
            delete this.events[_name];
            this.eventsProcessed.clear();
        }
        /**
         * (Re-)Calculate the total time of the Animation. Calculation-heavy, use only if actually needed.
         */
        calculateTotalTime() {
            this.totalTime = 0;
            this.traverseStructureForTime(this.animationStructure);
            // if (this.totalTime == 0) // animations with one keyframe need a total time != 0 to work
            //   this.totalTime = 1;
        }
        /**
         * Returns the time to use for animation sampling when applying a playmode
         */
        getModalTime(_time, _playmode, _timeStop = _time) {
            switch (_playmode) {
                case ANIMATION_PLAYMODE.STOP:
                    // return this.localTime.getOffset();
                    return _timeStop;
                case ANIMATION_PLAYMODE.PLAY_ONCE:
                    if (_time >= this.totalTime)
                        return this.totalTime - 0.01; //TODO: this might cause some issues
                case ANIMATION_PLAYMODE.PLAY_ONCE_RESET:
                    if (_time >= this.totalTime)
                        // TODO: return _timeStop instead?
                        return this.totalTime + 0.01; //TODO: this might cause some issues
            }
            return _time;
        }
        /**
         * Calculates and returns the direction the animation should currently be playing in.
         * @param _time the time at which to calculate the direction
         * @returns 1 if forward, 0 if stop, -1 if backwards
         */
        calculateDirection(_time, _playmode) {
            switch (_playmode) {
                case ANIMATION_PLAYMODE.STOP:
                    return 0;
                // case ANIMATION_PLAYMODE.PINGPONG:
                //   if (Math.floor(_time / this.animation.totalTime) % 2 == 0)
                //     return 1;
                //   else
                //     return -1;
                case ANIMATION_PLAYMODE.REVERSE_LOOP:
                    return -1;
                case ANIMATION_PLAYMODE.PLAY_ONCE:
                case ANIMATION_PLAYMODE.PLAY_ONCE_RESET:
                    if (_time >= this.totalTime) {
                        return 0;
                    }
                default:
                    return 1;
            }
        }
        //#region transfer
        serialize() {
            let s = {
                idResource: this.idResource,
                name: this.name,
                labels: {},
                events: {},
                framesPerSecond: this.framesPerSecond
                // sps: this.stepsPerSecond
            };
            for (let name in this.labels) {
                s.labels[name] = this.labels[name];
            }
            for (let name in this.events) {
                s.events[name] = this.events[name];
            }
            s.animationStructure = this.traverseStructureForSerialization(this.animationStructure);
            return s;
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            this.name = _serialization.name;
            this.framesPerSecond = _serialization.framesPerSecond;
            // this.stepsPerSecond = _serialization.sps;
            this.labels = {};
            for (let name in _serialization.labels) {
                this.labels[name] = _serialization.labels[name];
            }
            this.events = {};
            for (let name in _serialization.events) {
                this.events[name] = _serialization.events[name];
            }
            this.eventsProcessed = new Map();
            this.animationStructure = await this.traverseStructureForDeserialization(_serialization.animationStructure);
            this.#animationStructuresProcessed = new Map();
            this.calculateTotalTime();
            return this;
        }
        // public getMutator(): Mutator {
        //   return this.serialize();
        // }
        reduceMutator(_mutator) {
            delete _mutator.totalTime;
        }
        /**
         * Traverses an AnimationStructure and returns the Serialization of said Structure.
         * @param _structure The Animation Structure at the current level to transform into the Serialization.
         * @returns the filled Serialization.
         */
        traverseStructureForSerialization(_structure) {
            let serialization = {};
            for (const property in _structure) {
                let structureOrSequence = _structure[property];
                if (structureOrSequence instanceof FudgeCore.AnimationSequence)
                    serialization[property] = structureOrSequence.serialize();
                else
                    serialization[property] = this.traverseStructureForSerialization(structureOrSequence);
            }
            return serialization;
        }
        /**
         * Traverses a Serialization to create a new AnimationStructure.
         * @param _serialization The serialization to transfer into an AnimationStructure
         * @returns the newly created AnimationStructure.
         */
        async traverseStructureForDeserialization(_serialization) {
            let structure = {};
            for (let n in _serialization) {
                if (_serialization[n].animationSequence) {
                    let animSeq = new FudgeCore.AnimationSequence();
                    structure[n] = (await animSeq.deserialize(_serialization[n]));
                }
                else {
                    structure[n] = await this.traverseStructureForDeserialization(_serialization[n]);
                }
            }
            return structure;
        }
        //#endregion
        /**
         * Finds and returns the list of events to be used with these settings.
         */
        getCorrectEventList(_direction, _quantization) {
            if (_quantization != ANIMATION_QUANTIZATION.FRAMES) {
                if (_direction >= 0) {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.NORMAL);
                }
                else {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.REVERSE);
                }
            }
            else {
                if (_direction >= 0) {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.RASTERED);
                }
                else {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE);
                }
            }
        }
        /**
         * Traverses an {@link AnimationStructure} and returns a {@link Mutator} describing the state at the given time
         */
        traverseStructureForMutator(_structure, _time) {
            let newMutator = {};
            for (let n in _structure) {
                if (_structure[n] instanceof FudgeCore.AnimationSequence) {
                    newMutator[n] = _structure[n].evaluate(_time);
                }
                else {
                    newMutator[n] = this.traverseStructureForMutator(_structure[n], _time);
                }
            }
            return newMutator;
        }
        /**
         * Traverses the current AnimationStrcuture to find the totalTime of this animation.
         * @param _structure The structure to traverse
         */
        traverseStructureForTime(_structure) {
            for (let n in _structure) {
                if (_structure[n] instanceof FudgeCore.AnimationSequence) {
                    let sequence = _structure[n];
                    if (sequence.length > 0) {
                        let sequenceTime = sequence.getKey(sequence.length - 1).time;
                        this.totalTime = Math.max(sequenceTime, this.totalTime);
                    }
                }
                else {
                    this.traverseStructureForTime(_structure[n]);
                }
            }
        }
        /**
         * Ensures the existance of the requested {@link AnimationStrcuture} and returns it.
         * @param _type the type of the structure to get
         * @returns the requested [[@link AnimationStructure]]
         */
        getProcessedAnimationStructure(_type) {
            if (!this.#animationStructuresProcessed.has(_type)) {
                this.calculateTotalTime();
                let ae = {};
                switch (_type) {
                    case ANIMATION_STRUCTURE_TYPE.NORMAL:
                        ae = this.animationStructure;
                        break;
                    case ANIMATION_STRUCTURE_TYPE.REVERSE:
                        ae = this.traverseStructureForNewStructure(this.animationStructure, this.calculateReverseSequence.bind(this));
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTERED:
                        ae = this.traverseStructureForNewStructure(this.animationStructure, this.calculateRasteredSequence.bind(this));
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE:
                        ae = this.traverseStructureForNewStructure(this.getProcessedAnimationStructure(ANIMATION_STRUCTURE_TYPE.REVERSE), this.calculateRasteredSequence.bind(this));
                        break;
                    default:
                        return {};
                }
                this.#animationStructuresProcessed.set(_type, ae);
            }
            return this.#animationStructuresProcessed.get(_type);
        }
        /**
         * Ensures the existance of the requested {@link AnimationEventTrigger} and returns it.
         * @param _type The type of AnimationEventTrigger to get
         * @returns the requested {@link AnimationEventTrigger}
         */
        getProcessedEventTrigger(_type) {
            if (!this.eventsProcessed.has(_type)) {
                this.calculateTotalTime();
                let ev = {};
                switch (_type) {
                    case ANIMATION_STRUCTURE_TYPE.NORMAL:
                        ev = this.events;
                        break;
                    case ANIMATION_STRUCTURE_TYPE.REVERSE:
                        ev = this.calculateReverseEventTriggers(this.events);
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTERED:
                        ev = this.calculateRasteredEventTriggers(this.events);
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE:
                        ev = this.calculateRasteredEventTriggers(this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.REVERSE));
                        break;
                    default:
                        return {};
                }
                this.eventsProcessed.set(_type, ev);
            }
            return this.eventsProcessed.get(_type);
        }
        /**
         * Traverses an existing structure to apply a recalculation function to the AnimationStructure to store in a new Structure.
         * @param _oldStructure The old structure to traverse
         * @param _functionToUse The function to use to recalculated the structure.
         * @returns A new Animation Structure with the recalulated Animation Sequences.
         */
        traverseStructureForNewStructure(_oldStructure, _functionToUse) {
            let newStructure = {};
            for (let n in _oldStructure) {
                if (_oldStructure[n] instanceof FudgeCore.AnimationSequence) {
                    newStructure[n] = _functionToUse(_oldStructure[n]);
                }
                else {
                    newStructure[n] = this.traverseStructureForNewStructure(_oldStructure[n], _functionToUse);
                }
            }
            return newStructure;
        }
        /**
         * Creates a reversed Animation Sequence out of a given Sequence.
         * @param _sequence The sequence to calculate the new sequence out of
         * @returns The reversed Sequence
         */
        calculateReverseSequence(_sequence) {
            let seq = new FudgeCore.AnimationSequence();
            for (let i = 0; i < _sequence.length; i++) {
                let oldKey = _sequence.getKey(i);
                let key = new FudgeCore.AnimationKey(this.totalTime - oldKey.time, oldKey.value, oldKey.interpolation, oldKey.slopeOut, oldKey.slopeIn);
                seq.addKey(key);
            }
            return seq;
        }
        /**
         * Creates a rastered {@link AnimationSequence} out of a given sequence.
         * @param _sequence The sequence to calculate the new sequence out of
         * @returns the rastered sequence.
         */
        calculateRasteredSequence(_sequence) {
            let seq = new FudgeCore.AnimationSequence();
            let frameTime = 1000 / this.framesPerSecond;
            for (let i = 0; i < this.totalTime; i += frameTime) {
                let key = new FudgeCore.AnimationKey(i, _sequence.evaluate(i), FudgeCore.ANIMATION_INTERPOLATION.CONSTANT, 0, 0);
                seq.addKey(key);
            }
            return seq;
        }
        /**
         * Creates a new reversed {@link AnimationEventTrigger} object based on the given one.
         * @param _events the event object to calculate the new one out of
         * @returns the reversed event object
         */
        calculateReverseEventTriggers(_events) {
            let ae = {};
            for (let name in _events) {
                ae[name] = this.totalTime - _events[name];
            }
            return ae;
        }
        /**
         * Creates a rastered {@link AnimationEventTrigger} object based on the given one.
         * @param _events the event object to calculate the new one out of
         * @returns the rastered event object
         */
        calculateRasteredEventTriggers(_events) {
            let ae = {};
            let frameTime = 1000 / this.framesPerSecond;
            for (let name in _events) {
                ae[name] = _events[name] - (_events[name] % frameTime);
            }
            return ae;
        }
        /**
         * Checks which events lay between two given times and returns the names of the ones that do.
         * @param _eventTriggers The event object to check the events inside of
         * @param _min the minimum of the range to check between (inclusive)
         * @param _max the maximum of the range to check between (exclusive)
         * @returns an array of the names of the events in the given range.
         */
        checkEventsBetween(_eventTriggers, _min, _max) {
            let eventsToTrigger = [];
            for (let name in _eventTriggers) {
                if (_min <= _eventTriggers[name] && _eventTriggers[name] < _max) {
                    eventsToTrigger.push(name);
                }
            }
            return eventsToTrigger;
        }
    }
    FudgeCore.Animation = Animation;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Calculates the values between {@link AnimationKey}s.
     * Represented internally by a cubic function (`f(x) = ax¬≥ + bx¬≤ + cx + d`).
     * Only needs to be recalculated when the keys change, so at runtime it should only be calculated once.
     * @author Lukas Scheuerle, HFU, 2019
     */
    class AnimationFunction {
        constructor(_keyIn, _keyOut = null) {
            this.a = 0;
            this.b = 0;
            this.c = 0;
            this.d = 0;
            this.keyIn = _keyIn;
            this.keyOut = _keyOut;
            this.calculate();
        }
        set setKeyIn(_keyIn) {
            this.keyIn = _keyIn;
            this.calculate();
        }
        set setKeyOut(_keyOut) {
            this.keyOut = _keyOut;
            this.calculate();
        }
        /**
         * Returns the parameter values of this cubic function. `f(x) = ax¬≥ + bx¬≤ + cx + d`
         * Used by editor.
         */
        getParameters() {
            return { a: this.a, b: this.b, c: this.c, d: this.d };
        }
        /**
         * Calculates the value of the function at the given time.
         * @param _time the point in time at which to evaluate the function in milliseconds. Will be corrected for offset internally.
         * @returns the value at the given time
         */
        evaluate(_time) {
            _time -= this.keyIn.time;
            let time2 = _time * _time;
            let time3 = time2 * _time;
            return this.a * time3 + this.b * time2 + this.c * _time + this.d;
        }
        /**
         * (Re-)Calculates the parameters of the cubic function.
         * See https://math.stackexchange.com/questions/3173469/calculate-cubic-equation-from-two-points-and-two-slopes-variably
         * and https://jirkadelloro.github.io/FUDGE/Documentation/Logs/190410_Notizen_LS
         */
        calculate() {
            if (!this.keyIn) {
                this.d = this.c = this.b = this.a = 0;
                return;
            }
            if (!this.keyOut || this.keyIn.interpolation == FudgeCore.ANIMATION_INTERPOLATION.CONSTANT) {
                this.d = this.keyIn.value;
                this.c = this.b = this.a = 0;
                return;
            }
            let x1 = this.keyOut.time - this.keyIn.time;
            this.d = this.keyIn.value;
            if (this.keyIn.interpolation == FudgeCore.ANIMATION_INTERPOLATION.LINEAR) {
                this.c = (this.keyOut.value - this.keyIn.value) / x1;
                return;
            }
            this.c = this.keyIn.slopeOut;
            this.a = (-x1 * (this.keyIn.slopeOut + this.keyOut.slopeIn) - 2 * this.keyIn.value + 2 * this.keyOut.value) / -Math.pow(x1, 3);
            this.b = (this.keyOut.slopeIn - this.keyIn.slopeOut - 3 * this.a * Math.pow(x1, 2)) / (2 * x1);
        }
    }
    FudgeCore.AnimationFunction = AnimationFunction;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * An {@link Animation} loaded from a glTF-File.
     * @authors Jonas Plotzky
     */
    class AnimationGLTF extends FudgeCore.mixinSerializableResourceExternal(FudgeCore.Animation) {
        async load(_url = this.url, _name = this.name) {
            this.url = _url;
            this.name = _name;
            return FudgeCore.GLTFLoader.loadResource(this);
        }
    }
    FudgeCore.AnimationGLTF = AnimationGLTF;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let ANIMATION_INTERPOLATION;
    (function (ANIMATION_INTERPOLATION) {
        ANIMATION_INTERPOLATION[ANIMATION_INTERPOLATION["CONSTANT"] = 0] = "CONSTANT";
        ANIMATION_INTERPOLATION[ANIMATION_INTERPOLATION["LINEAR"] = 1] = "LINEAR";
        ANIMATION_INTERPOLATION[ANIMATION_INTERPOLATION["CUBIC"] = 2] = "CUBIC";
    })(ANIMATION_INTERPOLATION = FudgeCore.ANIMATION_INTERPOLATION || (FudgeCore.ANIMATION_INTERPOLATION = {}));
    // type AnimationInterpolation = "constant" | "linear" | "cubic";
    /**
     * Holds information about continous points in time their accompanying values as well as their slopes.
     * Also holds a reference to the {@link AnimationFunction}s that come in and out of the sides.
     * The {@link AnimationFunction}s are handled by the {@link AnimationSequence}s.
     * If the property constant is true, the value does not change and wil not be interpolated between this and the next key in a sequence
     * @author Lukas Scheuerle, HFU, 2019
     */
    class AnimationKey extends FudgeCore.Mutable {
        #time;
        #value;
        #interpolation;
        #slopeIn = 0;
        #slopeOut = 0;
        constructor(_time = 0, _value = 0, _interpolation = ANIMATION_INTERPOLATION.CUBIC, _slopeIn = 0, _slopeOut = 0) {
            super();
            this.#time = _time;
            this.#value = _value;
            this.#interpolation = _interpolation;
            this.#slopeIn = _slopeIn;
            this.#slopeOut = _slopeOut;
            this.functionOut = new FudgeCore.AnimationFunction(this, null);
        }
        /**
         * Static comparation function to use in an array sort function to sort the keys by their time.
         * @param _a the animation key to check
         * @param _b the animation key to check against
         * @returns >0 if a>b, 0 if a=b, <0 if a<b
         */
        static compare(_a, _b) {
            return _a.time - _b.time;
        }
        get time() {
            return this.#time;
        }
        set time(_time) {
            this.#time = _time;
            this.functionIn.calculate();
            this.functionOut.calculate();
        }
        get value() {
            return this.#value;
        }
        set value(_value) {
            this.#value = _value;
            this.functionIn.calculate();
            this.functionOut.calculate();
        }
        get interpolation() {
            return this.#interpolation;
        }
        set interpolation(_interpolation) {
            this.#interpolation = _interpolation;
            this.functionIn.calculate();
            this.functionOut.calculate();
        }
        get slopeIn() {
            return this.#slopeIn;
        }
        set slopeIn(_slope) {
            this.#slopeIn = _slope;
            this.functionIn.calculate();
        }
        get slopeOut() {
            return this.#slopeOut;
        }
        set slopeOut(_slope) {
            this.#slopeOut = _slope;
            this.functionOut.calculate();
        }
        //#region transfer
        serialize() {
            let serialization = {};
            serialization.time = this.#time;
            serialization.value = this.#value;
            serialization.interpolation = this.#interpolation;
            serialization.slopeIn = this.#slopeIn;
            serialization.slopeOut = this.#slopeOut;
            return serialization;
        }
        async deserialize(_serialization) {
            this.#time = _serialization.time;
            this.#value = _serialization.value;
            this.#interpolation = _serialization.interpolation;
            this.#slopeIn = _serialization.slopeIn;
            this.#slopeOut = _serialization.slopeOut;
            // if (_serialization.interpolation == undefined)
            //   if (_serialization.constant) // TODO: remove this when constant is removed
            //     this.#interpolation = "constant";
            //   else
            //     this.#interpolation = "cubic";
            return this;
        }
        getMutator() {
            return this.serialize();
        }
        reduceMutator(_mutator) {
            //
        }
    }
    FudgeCore.AnimationKey = AnimationKey;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A sequence of {@link AnimationKey}s that is mapped to an attribute of a {@link Node} or its {@link Component}s inside the {@link Animation}.
     * Provides functions to modify said keys
     * @authors Lukas Scheuerle, HFU, 2019 | Jonas Plotzky, HFU, 2022
     */
    class AnimationSequence extends FudgeCore.Mutable {
        constructor(_keys = []) {
            super();
            this.keys = _keys;
            this.regenerateFunctions();
        }
        get length() {
            return this.keys.length;
        }
        /**
         * Evaluates the sequence at the given point in time.
         * @param _time the point in time at which to evaluate the sequence in milliseconds.
         * @returns the value of the sequence at the given time. undefined if there are no keys.
         */
        evaluate(_time) {
            if (this.keys.length == 0)
                return undefined; //TODO: shouldn't return 0 but something indicating no change, like null. probably needs to be changed in Node as well to ignore non-numeric values in the applyAnimation function
            if (this.keys.length == 1 || this.keys[0].time >= _time)
                return this.keys[0].value;
            for (let i = 0; i < this.keys.length - 1; i++) {
                if (this.keys[i].time <= _time && _time < this.keys[i + 1].time) {
                    return this.keys[i].functionOut.evaluate(_time);
                }
                // if (this.keys[i].time == _time)
                //   return this.keys[i].value;
            }
            return this.keys[this.keys.length - 1].value;
        }
        /**
         * Adds a new key to the sequence.
         * @param _key the key to add
         */
        addKey(_key) {
            this.keys.push(_key);
            this.keys.sort(FudgeCore.AnimationKey.compare);
            this.regenerateFunctions();
        }
        /**
         * Modifys a given key in the sequence.
         * @param _key the key to add
         */
        modifyKey(_key, _time, _value) {
            if (_time != null)
                _key.time = _time;
            if (_value != null)
                _key.value = _value;
            this.keys.sort(FudgeCore.AnimationKey.compare);
            this.regenerateFunctions();
        }
        /**
         * Removes a given key from the sequence.
         * @param _key the key to remove
         */
        removeKey(_key) {
            for (let i = 0; i < this.keys.length; i++) {
                if (this.keys[i] == _key) {
                    this.keys.splice(i, 1);
                    this.regenerateFunctions();
                    return;
                }
            }
        }
        /**
         * Find a key in the sequence exactly matching the given time.
         */
        findKey(_time) {
            for (let key of this.keys)
                if (key.time == _time)
                    return key;
            return null;
        }
        /**
         * Removes the Animation Key at the given index from the keys.
         * @param _index the zero-based index at which to remove the key
         * @returns the removed AnimationKey if successful, null otherwise.
         */
        removeKeyAtIndex(_index) {
            if (_index < 0 || _index >= this.keys.length) {
                return null;
            }
            let ak = this.keys[_index];
            this.keys.splice(_index, 1);
            this.regenerateFunctions();
            return ak;
        }
        /**
         * Gets a key from the sequence at the desired index.
         * @param _index the zero-based index at which to get the key
         * @returns the AnimationKey at the index if it exists, null otherwise.
         */
        getKey(_index) {
            if (_index < 0 || _index >= this.keys.length)
                return null;
            return this.keys[_index];
        }
        /**
         * Returns this sequence's keys. This is not a copy, but the actual array used internally. Handle with care!
         * Used by Editor.
         */
        getKeys() {
            return this.keys;
        }
        //#region transfer
        serialize() {
            let s = {
                keys: [],
                animationSequence: true
            };
            for (let i = 0; i < this.keys.length; i++) {
                s.keys[i] = this.keys[i].serialize();
            }
            return s;
        }
        async deserialize(_serialization) {
            for (let i = 0; i < _serialization.keys.length; i++) {
                // this.keys.push(<AnimationKey>Serializer.deserialize(_serialization.keys[i]));
                let k = new FudgeCore.AnimationKey();
                await k.deserialize(_serialization.keys[i]);
                this.keys[i] = k;
            }
            this.regenerateFunctions();
            return this;
        }
        reduceMutator(_mutator) { }
        //#endregion
        /**
         * Utility function that (re-)generates all functions in the sequence.
         */
        regenerateFunctions() {
            for (let i = 0; i < this.keys.length; i++) {
                let f = new FudgeCore.AnimationFunction(this.keys[i]);
                this.keys[i].functionOut = f;
                if (i == this.keys.length - 1) {
                    //TODO: check if this is even useful. Maybe update the runcondition to length - 1 instead. Might be redundant if functionIn is removed, see TODO in AnimationKey.
                    f.setKeyOut = this.keys[0];
                    this.keys[0].functionIn = f;
                    break;
                }
                f.setKeyOut = this.keys[i + 1];
                this.keys[i + 1].functionIn = f;
            }
        }
    }
    FudgeCore.AnimationSequence = AnimationSequence;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class AnimationSprite extends FudgeCore.Animation {
        static { this.iSubclass = FudgeCore.Animation.registerSubclass(AnimationSprite); }
        // TODO: fps should be a parameter too
        constructor(_name = "AnimationSprite") {
            super(_name, {}, 1);
            this.texture = FudgeCore.TextureDefault.color;
            this.frames = 25;
            this.wrapAfter = 5;
            this.start = new FudgeCore.Vector2(0, 0);
            this.size = new FudgeCore.Vector2(80, 80);
            this.next = new FudgeCore.Vector2(80, 0);
            this.wrap = new FudgeCore.Vector2(0, 80);
            this.framesPerSecond = this.frames;
            this.create(this.texture, this.frames, this.wrapAfter, this.start, this.size, this.next, this.wrap, this.framesPerSecond);
        }
        /**
         * Sets the texture to be used as the spritesheet
         */
        setTexture(_texture) {
            this.texture = _texture;
            this.idTexture = _texture.idResource;
        }
        /**
         * Creates this animation sprite from the given arguments
         */
        create(_texture, _frames, _wrapAfter, _start, _size, _next, _wrap, _framesPerSecond) {
            this.setTexture(_texture);
            this.frames = _frames;
            this.wrapAfter = _wrapAfter;
            this.start = _start;
            this.size = _size;
            this.next = _next;
            this.wrap = _wrap;
            this.framesPerSecond = _framesPerSecond;
            let scale = this.getScale();
            let positions = this.getPositions();
            let xTranslation = new FudgeCore.AnimationSequence();
            let yTranslation = new FudgeCore.AnimationSequence();
            let xScale = new FudgeCore.AnimationSequence();
            let yScale = new FudgeCore.AnimationSequence();
            xScale.addKey(new FudgeCore.AnimationKey(0, scale.x));
            yScale.addKey(new FudgeCore.AnimationKey(0, scale.y));
            for (let frame = 0; frame <= this.frames; frame++) {
                let time = 1000 * frame / this.framesPerSecond;
                let position = positions[Math.min(frame, this.frames - 1)]; //repeat the last key to give the last frame some time
                xTranslation.addKey(new FudgeCore.AnimationKey(time, position.x / this.texture.texImageSource.width)); //, 0, 0, true))
                yTranslation.addKey(new FudgeCore.AnimationKey(time, position.y / this.texture.texImageSource.height)); //, 0, 0, true))
            }
            this.animationStructure = {
                "components": {
                    "ComponentMaterial": [{
                            "mtxPivot": {
                                "translation": {
                                    x: xTranslation,
                                    y: yTranslation
                                },
                                "scaling": {
                                    x: xScale,
                                    y: yScale
                                }
                            }
                        }]
                }
            };
            this.calculateTotalTime();
        }
        /**
         * Returns the scale of the spritesheet
         */
        getScale() {
            return new FudgeCore.Vector2(this.size.x / this.texture.texImageSource.width, this.size.y / this.texture.texImageSource.height);
        }
        /**
         * Returns the positions of the spritesheet
         */
        getPositions() {
            let iNext = 0;
            let iWrap = 0;
            let positions = [];
            for (let frame = 0; frame < this.frames; frame++) {
                positions.push(new FudgeCore.Vector2(this.start.x + iNext * this.next.x + iWrap * this.wrap.x, this.start.y + iNext * this.next.y + iWrap * this.wrap.y));
                iNext++;
                if (iNext >= this.wrapAfter) {
                    iNext = 0;
                    iWrap++;
                }
            }
            return positions;
        }
        //#region transfer
        async mutate(_mutator, _selection, _dispatchMutate) {
            super.mutate(_mutator, _selection, _dispatchMutate);
            this.create(this.texture, this.frames, this.wrapAfter, this.start, this.size, this.next, this.wrap, this.framesPerSecond);
        }
        serialize() {
            let serialization = {};
            serialization.idResource = this.idResource;
            serialization.idTexture = this.idTexture;
            serialization.frames = this.frames;
            serialization.wrapAfter = this.wrapAfter;
            for (let name of ["start", "size", "next", "wrap"])
                serialization[name] = Reflect.get(this, name).serialize();
            let animationsStructure = this.animationStructure;
            this.animationStructure = {}; // no need to serialize structure
            // let serialization: Serialization = super.serialize();
            serialization[super.constructor.name] = super.serialize();
            this.animationStructure = animationsStructure; // restore existent structure
            return serialization;
        }
        async deserialize(_s) {
            await super.deserialize(_s[super.constructor.name]);
            if (_s.idTexture)
                this.texture = await FudgeCore.Project.getResource(_s.idTexture);
            else
                this.texture = FudgeCore.TextureDefault.color;
            for (let name of ["start", "size", "next", "wrap"])
                Reflect.get(this, name).deserialize(_s[name]);
            this.create(this.texture, _s.frames, _s.wrapAfter, this.start, this.size, this.next, this.wrap, this.framesPerSecond);
            return this;
        }
        //#endregion
        /**
         * Converts the {@link AnimationSprite} into an {@link Animation}
         */
        convertToAnimation() {
            let animation = new FudgeCore.Animation(this.name, this.animationStructure, this.framesPerSecond);
            return animation;
        }
    }
    FudgeCore.AnimationSprite = AnimationSprite;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Extension of AudioBuffer with a load method that creates a buffer in the {@link AudioManager}.default to be used with {@link ComponentAudio}
     * @authors Thomas Dorner, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class Audio extends FudgeCore.Mutable {
        constructor(_url) {
            super();
            this.name = "Audio";
            this.idResource = undefined;
            this.buffer = undefined;
            this.path = undefined;
            this.url = undefined;
            this.ready = false;
            if (_url) {
                this.load(_url);
                this.name = _url.toString().split("/").pop();
            }
            FudgeCore.Project.register(this);
        }
        get isReady() {
            return this.ready;
        }
        /**
         * Asynchronously loads the audio (mp3) from the given url
         */
        async load(_url) {
            FudgeCore.Debug.fudge("AudioLoad", _url);
            this.url = _url;
            this.ready = false;
            this.path = new URL(this.url.toString(), FudgeCore.Project.baseURL);
            const response = await window.fetch(this.path.toString());
            const arrayBuffer = await response.arrayBuffer();
            let buffer = await FudgeCore.AudioManager.default.decodeAudioData(arrayBuffer);
            this.buffer = buffer;
            this.ready = true;
            this.dispatchEvent(new Event("ready" /* EVENT_AUDIO.READY */));
        }
        //#region Transfer
        serialize() {
            return {
                url: this.url,
                idResource: this.idResource,
                name: this.name,
                type: this.type
            };
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            await this.load(_serialization.url);
            this.name = _serialization.name;
            return this;
        }
        async mutate(_mutator, _selection, _dispatchMutate) {
            let url = _mutator.url; // save url for reconstruction after exclusion
            if (_mutator.url != this.url.toString())
                this.load(_mutator.url);
            // except url from mutator for further processing
            delete (_mutator.url);
            super.mutate(_mutator, _selection, _dispatchMutate);
            // reconstruct, for mutator may be kept by caller
            Reflect.set(_mutator, "url", url);
        }
        reduceMutator(_mutator) {
            // delete _mutator.idResource; 
            delete _mutator.ready;
        }
    }
    FudgeCore.Audio = Audio;
})(FudgeCore || (FudgeCore = {}));
///<reference path="../Event/EventAudio.ts"/>
var FudgeCore;
///<reference path="../Event/EventAudio.ts"/>
(function (FudgeCore) {
    /**
     * Extends the standard AudioContext for integration with FUDGE-graphs.
     * Creates a default object at startup to be addressed as AudioManager default.
     * Other objects of this class may be create for special purposes.
     */
    class AudioManager extends AudioContext {
        /** The default context that may be used throughout the project without the need to create others */
        static { this.default = new AudioManager({ latencyHint: "interactive", sampleRate: 44100 }); }
        static { this.eventUpdate = new Event("updateAudioGraph" /* EVENT_AUDIO.UPDATE */); }
        constructor(_contextOptions) {
            super(_contextOptions);
            this.graph = null;
            this.cmpListener = null;
            /**
             * Determines FUDGE-graph to listen to. Each {@link ComponentAudio} in the graph will connect to this contexts master gain, all others disconnect.
             */
            this.listenTo = (_graph) => {
                if (this.graph)
                    this.graph.broadcastEvent(new Event("childRemoveFromAudioGraph" /* EVENT_AUDIO.CHILD_REMOVE */));
                if (!_graph)
                    return;
                this.graph = _graph;
                this.graph.broadcastEvent(new Event("childAppendToAudioGraph" /* EVENT_AUDIO.CHILD_APPEND */));
            };
            /**
             * Retrieve the FUDGE-graph currently listening to
             */
            this.getGraphListeningTo = () => {
                return this.graph;
            };
            /**
             * Set the {@link ComponentAudioListener} that serves the spatial location and orientation for this contexts listener
             */
            this.listenWith = (_cmpListener) => {
                this.cmpListener = _cmpListener;
            };
            /**
             * Updates the spatial settings of the AudioNodes effected in the current FUDGE-graph
             */
            this.update = () => {
                if (this.state != "running")
                    return;
                // this.graph.broadcastEvent(new Event(EVENT_AUDIO.UPDATE));
                this.graph.broadcastEvent(AudioManager.eventUpdate);
                if (this.cmpListener)
                    this.cmpListener.update(this.listener);
            };
            this.gain = this.createGain();
            this.gain.connect(this.destination);
        }
        /**
         * Set the master volume
         */
        set volume(_value) {
            this.gain.gain.value = _value;
        }
        /**
         * Get the master volume
         */
        get volume() {
            return this.gain.gain.value;
        }
    }
    FudgeCore.AudioManager = AudioManager;
})(FudgeCore || (FudgeCore = {}));
// namespace FudgeCore {
//     /**
//      * Enumerator for all possible Oscillator Types
//      */
//     type OSCILLATOR_TYPE = "sine" | "square" | "sawtooth" | "triangle" | "custom";
//     /**
//      * Interface to create Custom Oscillator Types.
//      * Start-/Endpoint of a custum curve e.g. sine curve.
//      * Both parameters need to be inbetween -1 and 1.
//      * @param startpoint startpoint of a curve 
//      * @param endpoint Endpoint of a curve 
//      */
//     interface OscillatorWave {
//         startpoint: number;
//         endpoint: number;
//     }
//     /**
//      * Add an {@link AudioFilter} to an {@link Audio]]
//      * @authors Thomas Dorner, HFU, 2019
//      */
//     export class AudioOscillator {
//         public audioOscillator: OscillatorNode; 
//         private frequency: number;
//         private oscillatorType: OSCILLATOR_TYPE;
//         private oscillatorWave: PeriodicWave;
//         private localGain: GainNode;
//         private localGainValue: number;
//         constructor(_audioSettings: AudioSettings, _oscillatorType?: OSCILLATOR_TYPE) {
//             this.audioOscillator = _audioSettings.getAudioContext().createOscillator();
//             this.localGain = _audioSettings.getAudioContext().createGain();
//             this.oscillatorType = _oscillatorType;
//             if (this.oscillatorType != "custom") {
//                 this.audioOscillator.type = this.oscillatorType;
//             }
//             else {
//                 if (!this.oscillatorWave) {
//                     this.audioOscillator.setPeriodicWave(this.oscillatorWave);
//                 }
//                 else {
//                     console.log("Create a Custom Periodic Wave first to use Custom Type");
//                 }
//             }
//         }
//         public setOscillatorType(_oscillatorType: OSCILLATOR_TYPE): void {
//             if (this.oscillatorType != "custom") {
//                 this.audioOscillator.type = this.oscillatorType;
//             }
//             else {
//                 if (!this.oscillatorWave) {
//                     this.audioOscillator.setPeriodicWave(this.oscillatorWave);
//                 }
//             }
//         }
//         public getOscillatorType(): OSCILLATOR_TYPE {
//             return this.oscillatorType;
//         }
//         public createPeriodicWave(_audioSettings: AudioSettings, _real: OscillatorWave, _imag: OscillatorWave): void {
//             let waveReal: Float32Array = new Float32Array(2);
//             waveReal[0] = _real.startpoint;
//             waveReal[1] = _real.endpoint;
//             let waveImag: Float32Array = new Float32Array(2);
//             waveImag[0] = _imag.startpoint;
//             waveImag[1] = _imag.endpoint;
//             this.oscillatorWave = _audioSettings.getAudioContext().createPeriodicWave(waveReal, waveImag);
//         }
//         public setLocalGain(_localGain: GainNode): void {
//             this.localGain = _localGain;
//         }
//         public getLocalGain(): GainNode {
//             return this.localGain;
//         }
//         public setLocalGainValue(_localGainValue: number): void {
//             this.localGainValue = _localGainValue;
//             this.localGain.gain.value = this.localGainValue;
//         }
//         public getLocalGainValue(): number {
//             return this.localGainValue;
//         }
//         public setFrequency(_audioSettings: AudioSettings, _frequency: number): void {
//             this.frequency = _frequency;
//             this.audioOscillator.frequency.setValueAtTime(this.frequency, _audioSettings.getAudioContext().currentTime);
//         }
//         public getFrequency(): number {
//             return this.frequency;
//         }
//         public createSnare(_audioSettings: AudioSettings): void {
//             this.setOscillatorType("triangle");
//             this.setFrequency(_audioSettings, 100);
//             this.setLocalGainValue(0);
//             this.localGain.gain.setValueAtTime(0, _audioSettings.getAudioContext().currentTime);
//             this.localGain.gain.exponentialRampToValueAtTime(0.01, _audioSettings.getAudioContext().currentTime + .1);
//             this.audioOscillator.connect(this.localGain);
//         }
//     }
// }
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attached to a {@link Node} with an attached {@link ComponentCamera} this causes the rendered image to receive an ambient occlusion effect.
     * @authors Roland Heer, HFU, 2023 | Jonas Plotzky, HFU, 2023
     */
    class ComponentAmbientOcclusion extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentAmbientOcclusion); }
        constructor(_sampleRadius = 16, _bias = 0.07, _attenuationConstant = 2.5, _attenuationLinear = 1, _attenuationQuadratic = 1) {
            super();
            this.sampleRadius = _sampleRadius;
            this.bias = _bias;
            this.attenuationConstant = _attenuationConstant;
            this.attenuationLinear = _attenuationLinear;
            this.attenuationQuadratic = _attenuationQuadratic;
        }
        //#region Transfer
        serialize() {
            let serialization = {
                sampleRadius: this.sampleRadius,
                bias: this.bias,
                attenuationConstant: this.attenuationConstant,
                attenuationLinear: this.attenuationLinear,
                attenuationQuadratic: this.attenuationQuadratic
            };
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.sampleRadius = _serialization.sampleRadius;
            this.bias = _serialization.bias;
            this.attenuationConstant = _serialization.attenuationConstant;
            this.attenuationLinear = _serialization.attenuationLinear;
            this.attenuationQuadratic = _serialization.attenuationQuadratic;
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
    }
    FudgeCore.ComponentAmbientOcclusion = ComponentAmbientOcclusion;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Time/Loop.ts"/>
// / <reference path="../Animation/Animation.ts"/>
var FudgeCore;
// / <reference path="../Time/Loop.ts"/>
// / <reference path="../Animation/Animation.ts"/>
(function (FudgeCore) {
    /**
     * Holds a reference to an {@link Animation} and controls it. Controls quantization and playmode as well as speed.
     * @authors Lukas Scheuerle, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2021 | Jonas Plotzky, HFU, 2022
     */
    class ComponentAnimator extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentAnimator); }
        #scale;
        #timeLocal;
        #previous;
        constructor(_animation, _playmode = FudgeCore.ANIMATION_PLAYMODE.LOOP, _quantization = FudgeCore.ANIMATION_QUANTIZATION.CONTINOUS) {
            super();
            this.scaleWithGameTime = true;
            this.animateInEditor = false;
            this.#scale = 1;
            this.#previous = 0;
            //#region updateAnimation
            /**
             * Updates the Animation.
             * Uses the built-in time unless a different time is specified.
             * May also be called from updateAnimation().
             */
            this.updateAnimationLoop = (_e, _time) => {
                if (this.animation.totalTime == 0)
                    return null;
                let time = _time || _time === 0 ? _time : this.#timeLocal.get();
                if (this.quantization == FudgeCore.ANIMATION_QUANTIZATION.FRAMES) {
                    time = this.#previous + (1000 / this.animation.fps);
                }
                let direction = this.animation.calculateDirection(time, this.playmode);
                time = this.animation.getModalTime(time, this.playmode, this.#timeLocal.getOffset());
                this.executeEvents(this.animation.getEventsToFire(this.#previous, time, this.quantization, direction));
                if (this.#previous != time) {
                    this.#previous = time;
                    time = time % this.animation.totalTime;
                    let mutator = this.animation.getState(time, direction, this.quantization);
                    if (this.node) {
                        this.node.applyAnimation(mutator);
                    }
                    return mutator;
                }
                return null;
            };
            /**
             * Updates the scale of the animation if the user changes it or if the global game timer changed its scale.
             */
            this.updateScale = () => {
                let newScale = this.#scale;
                if (this.scaleWithGameTime)
                    newScale *= FudgeCore.Time.game.getScale();
                this.#timeLocal.setScale(newScale);
            };
            this.playmode = _playmode;
            this.quantization = _quantization;
            this.animation = _animation;
            this.#timeLocal = new FudgeCore.Time();
            //TODO: update animation total time when loading a different animation?
            this.animation?.calculateTotalTime();
            this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, () => this.activate(false));
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, () => {
                this.node.addEventListener("childRemove" /* EVENT.CHILD_REMOVE */, () => this.activate(false));
                this.activate(true);
            });
        }
        set scale(_scale) {
            this.#scale = _scale;
            this.updateScale();
        }
        get scale() {
            return this.#scale;
        }
        /**
         * - get: return the current sample time of the animation
         * - set: jump to a certain sample time in the animation
         */
        get time() {
            return this.#timeLocal.get() % this.animation.totalTime;
        }
        set time(_time) {
            this.jumpTo(_time);
        }
        activate(_on) {
            super.activate(_on);
            if (!this.node)
                return;
            this.activateListeners(_on);
        }
        /**
         * Jumps to a certain time in the animation to play from there.
         */
        jumpTo(_time) {
            this.#timeLocal.set(_time);
            this.#previous = _time;
            _time = _time % this.animation.totalTime;
            let mutator = this.animation.getState(_time, this.animation.calculateDirection(_time, this.playmode), this.quantization);
            this.node.applyAnimation(mutator);
        }
        /**
         * Jumps to a certain label in the animation if defined
         */
        jumpToLabel(_label) {
            let time = this.animation.labels[_label];
            if (time)
                this.jumpTo(time);
        }
        /**
         * Forces an update of the animation from outside. Used in the ViewAnimation. Shouldn't be used during the game.
         * @param _time the (unscaled) time to update the animation with.
         * @returns the Mutator for Animation.
         */
        updateAnimation(_time) {
            this.#previous = undefined;
            return this.updateAnimationLoop(null, _time);
        }
        //#region transfer
        serialize() {
            let serialization = {};
            serialization[super.constructor.name] = super.serialize();
            serialization.idAnimation = this.animation.idResource;
            serialization.playmode = this.playmode;
            serialization.quantization = this.quantization;
            serialization.scale = this.scale;
            serialization.scaleWithGameTime = this.scaleWithGameTime;
            serialization.animateInEditor = this.animateInEditor;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            this.animation = await FudgeCore.Project.getResource(_serialization.idAnimation);
            this.playmode = _serialization.playmode;
            this.quantization = _serialization.quantization;
            this.scale = _serialization.scale;
            this.scaleWithGameTime = _serialization.scaleWithGameTime;
            this.animateInEditor = _serialization.animateInEditor;
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            if (typeof (_mutator.animateInEditor) !== "undefined") {
                this.updateAnimation(0);
                this.activateListeners(this.active);
            }
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.playmode)
                types.playmode = FudgeCore.ANIMATION_PLAYMODE;
            if (types.quantization)
                types.quantization = FudgeCore.ANIMATION_QUANTIZATION;
            return types;
        }
        //#endregion
        activateListeners(_on) {
            if (_on && (FudgeCore.Project.mode != FudgeCore.MODE.EDITOR || FudgeCore.Project.mode == FudgeCore.MODE.EDITOR && this.animateInEditor)) {
                FudgeCore.Time.game.addEventListener("timeScaled" /* EVENT.TIME_SCALED */, this.updateScale);
                this.node.addEventListener("renderPrepare" /* EVENT.RENDER_PREPARE */, this.updateAnimationLoop);
            }
            else {
                FudgeCore.Time.game.removeEventListener("timeScaled" /* EVENT.TIME_SCALED */, this.updateScale);
                this.node.removeEventListener("renderPrepare" /* EVENT.RENDER_PREPARE */, this.updateAnimationLoop);
            }
        }
        /**
         * Fires all custom events the Animation should have fired between the last frame and the current frame.
         * @param _events a list of names of custom events to fire
         */
        executeEvents(_events) {
            for (let i = 0; i < _events.length; i++) {
                this.dispatchEvent(new Event(_events[i]));
            }
        }
    }
    FudgeCore.ComponentAnimator = ComponentAnimator;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let AUDIO_PANNER;
    (function (AUDIO_PANNER) {
        AUDIO_PANNER["CONE_INNER_ANGLE"] = "coneInnerAngle";
        AUDIO_PANNER["CONE_OUTER_ANGLE"] = "coneOuterAngle";
        AUDIO_PANNER["CONE_OUTER_GAIN"] = "coneOuterGain";
        AUDIO_PANNER["DISTANCE_MODEL"] = "distanceModel";
        AUDIO_PANNER["MAX_DISTANCE"] = "maxDistance";
        AUDIO_PANNER["PANNING_MODEL"] = "panningModel";
        AUDIO_PANNER["REF_DISTANCE"] = "refDistance";
        AUDIO_PANNER["ROLLOFF_FACTOR"] = "rolloffFactor";
    })(AUDIO_PANNER = FudgeCore.AUDIO_PANNER || (FudgeCore.AUDIO_PANNER = {}));
    let AUDIO_NODE_TYPE;
    (function (AUDIO_NODE_TYPE) {
        AUDIO_NODE_TYPE[AUDIO_NODE_TYPE["SOURCE"] = 0] = "SOURCE";
        AUDIO_NODE_TYPE[AUDIO_NODE_TYPE["PANNER"] = 1] = "PANNER";
        AUDIO_NODE_TYPE[AUDIO_NODE_TYPE["GAIN"] = 2] = "GAIN";
    })(AUDIO_NODE_TYPE = FudgeCore.AUDIO_NODE_TYPE || (FudgeCore.AUDIO_NODE_TYPE = {}));
    /**
     * Builds a minimal audio graph (by default in {@link AudioManager}.default) and synchronizes it with the containing {@link Node}
     * ```text
     * ‚îå AudioManager(.default) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     * ‚îÇ ‚îå ComponentAudio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
     * ‚îÇ ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
     * ‚îÇ ‚îÇ    ‚îÇsource‚îÇ ‚Üí ‚îÇpanner‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚îÇ
     * ‚îÇ ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
     * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
     * ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     * ```
     * @authors Thomas Dorner, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentAudio extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentAudio); }
        constructor(_audio = null, _loop = false, _start = false, _audioManager = FudgeCore.AudioManager.default) {
            super();
            /** places and directs the panner relative to the world transform of the {@link Node}  */
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.singleton = false;
            this.playing = false;
            this.listened = false;
            //#endregion
            this.hndAudioReady = (_event) => {
                FudgeCore.Debug.fudge("Audio start", Reflect.get(_event.target, "url"));
                if (this.playing)
                    this.play(true);
            };
            this.hndAudioEnded = (_event) => {
                // Debug.fudge("Audio ended", Reflect.get(_event.target, "url"));
                this.playing = false;
            };
            /**
             * Automatically connects/disconnects AudioNodes when adding/removing this component to/from a node.
             * Therefore unused AudioNodes may be garbage collected when an unused component is collected
             */
            this.handleAttach = (_event) => {
                // Debug.log(_event);
                if (_event.type == "componentAdd" /* EVENT.COMPONENT_ADD */) {
                    this.node.addEventListener("childAppendToAudioGraph" /* EVENT_AUDIO.CHILD_APPEND */, this.handleGraph, true);
                    this.node.addEventListener("childRemoveFromAudioGraph" /* EVENT_AUDIO.CHILD_REMOVE */, this.handleGraph, true);
                    this.node.addEventListener("updateAudioGraph" /* EVENT_AUDIO.UPDATE */, this.update, true);
                    this.listened = this.node.isDescendantOf(FudgeCore.AudioManager.default.getGraphListeningTo());
                }
                else {
                    this.node.removeEventListener("childAppendToAudioGraph" /* EVENT_AUDIO.CHILD_APPEND */, this.handleGraph, true);
                    this.node.removeEventListener("childRemoveFromAudioGraph" /* EVENT_AUDIO.CHILD_REMOVE */, this.handleGraph, true);
                    this.node.removeEventListener("updateAudioGraph" /* EVENT_AUDIO.UPDATE */, this.update, true);
                    this.listened = false;
                }
                this.updateConnection();
            };
            /**
             * Automatically connects/disconnects AudioNodes when appending/removing the FUDGE-graph the component is in.
             */
            this.handleGraph = (_event) => {
                // Debug.log(_event);
                this.listened = (_event.type == "childAppendToAudioGraph" /* EVENT_AUDIO.CHILD_APPEND */);
                this.updateConnection();
            };
            /**
             * Updates the panner node, its position and direction, using the worldmatrix of the container and the pivot of this component.
             */
            this.update = (_event) => {
                let mtxResult = this.mtxPivot;
                if (this.node)
                    mtxResult = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
                // Debug.log(mtxResult.toString());
                let position = mtxResult.translation;
                let forward = FudgeCore.Vector3.TRANSFORMATION(FudgeCore.Vector3.Z(1), mtxResult, false);
                this.panner.positionX.value = position.x;
                this.panner.positionY.value = position.y;
                this.panner.positionZ.value = position.z;
                this.panner.orientationX.value = forward.x;
                this.panner.orientationY.value = forward.y;
                this.panner.orientationZ.value = forward.z;
                FudgeCore.Recycler.store(forward);
                // TODO: examine why the following produces erroneous results, see test "Spatial Audio"
                if (this.node)
                    FudgeCore.Recycler.store(mtxResult);
            };
            this.install(_audioManager);
            this.createSource(_audio, _loop);
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.handleAttach);
            this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.handleAttach);
            if (_start)
                this.play(_start);
        }
        set volume(_value) {
            this.gain.gain.value = _value;
        }
        get volume() {
            return this.gain.gain.value;
        }
        set loop(_on) {
            this.source.loop = _on;
        }
        get loop() {
            return this.source.loop;
        }
        set playbackRate(_value) {
            this.source.playbackRate.value = _value;
        }
        get playbackRate() {
            return this.source.playbackRate.value;
        }
        get isPlaying() {
            return this.playing;
        }
        get isAttached() {
            return this.node != null;
        }
        get isListened() {
            return this.listened;
        }
        /**
         * Sets the given {@link Audio} as the audio source
         */
        setAudio(_audio) {
            this.createSource(_audio, this.source.loop);
        }
        /**
         * Returns the {@link Audio} currently used as audio source
         */
        getAudio() {
            return this.audio;
        }
        /**
         * Set the property of the panner to the given value. Use to manipulate range and rolloff etc.
         */
        setPanner(_property, _value) {
            Reflect.set(this.panner, _property, _value);
        }
        // TODO: may be used for serialization of AudioNodes
        /**
         * Returns the mutator for the specified AudioNode of the standard graph
         */
        getMutatorOfNode(_type) {
            let node = this.getAudioNode(_type);
            let mutator = FudgeCore.getMutatorOfArbitrary(node);
            return mutator;
        }
        /**
         * Returns the specified AudioNode of the standard graph for further manipulation
         */
        getAudioNode(_type) {
            switch (_type) {
                case AUDIO_NODE_TYPE.SOURCE: return this.source;
                case AUDIO_NODE_TYPE.PANNER: return this.panner;
                case AUDIO_NODE_TYPE.GAIN: return this.gain;
            }
        }
        /**
         * Start or stop playing the audio
         */
        play(_on) {
            if (_on) {
                if (this.audio.isReady) {
                    this.createSource(this.audio, this.source.loop, this.playbackRate);
                    this.source.start(0, 0);
                }
                else {
                    this.audio.addEventListener("ready" /* EVENT_AUDIO.READY */, this.hndAudioReady);
                }
                this.source.addEventListener("ended" /* EVENT_AUDIO.ENDED */, this.hndAudioEnded);
            }
            else
                try {
                    this.source.stop();
                }
                catch (_error) { /* catch exception when source hasn't been started... */ }
            this.playing = _on;
        }
        /**
         * Inserts AudioNodes between the panner and the local gain of this {@link ComponentAudio}
         * _input and _output may be the same AudioNode, if there is only one to insert,
         * or may have multiple AudioNode between them to create an effect-graph.\
         * Note that {@link ComponentAudio} does not keep track of inserted AudioNodes!
         * ```text
         * ‚îå AudioManager(.default) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         * ‚îÇ ‚îå ComponentAudio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
         * ‚îÇ ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
         * ‚îÇ ‚îÇ    ‚îÇsource‚îÇ ‚Üí ‚îÇpanner‚îÇ ‚Üí ‚îÇ_input‚îÇ ‚Üí ...  ‚Üí ‚îÇ_output‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚îÇ
         * ‚îÇ ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
         * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
         * ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         * ```
         */
        insertAudioNodes(_input, _output) {
            this.panner.disconnect(0);
            if (!_input && !_output) {
                this.panner.connect(this.gain);
                return;
            }
            this.panner.connect(_input);
            _output.connect(this.gain);
        }
        /**
         * Activate override. Connects or disconnects AudioNodes
         */
        activate(_on) {
            super.activate(_on);
            this.updateConnection();
        }
        /**
         * Connects this components gain-node to the gain node of the AudioManager this component runs on.
         * Only call this method if the component is not attached to a {@link Node} but needs to be heard.
         */
        connect(_on) {
            if (_on)
                this.gain.connect(this.audioManager.gain);
            else
                this.gain.disconnect(this.audioManager.gain);
        }
        drawGizmos() {
            let mtxShape = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
            mtxShape.scaling = new FudgeCore.Vector3(0.5, 0.5, 0.5);
            let color = FudgeCore.Color.CSS("cornflowerblue");
            FudgeCore.Gizmos.drawIcon(FudgeCore.TextureDefault.iconAudio, mtxShape, color);
            FudgeCore.Recycler.storeMultiple(mtxShape, color);
        }
        ;
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.idResource = this.audio?.idResource;
            serialization.playing = this.playing;
            serialization.loop = this.loop;
            serialization.volume = this.volume;
            // console.log(this.getMutatorOfNode(AUDIO_NODE_TYPE.PANNER));
            // TODO: serialize panner parameters
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let audio = await FudgeCore.Project.getResource(_serialization.idResource);
            this.createSource(audio, _serialization.loop);
            this.volume = _serialization.volume;
            this.play(_serialization.playing);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            let audio = mutator.audio;
            delete mutator.audio; // just to rearrange in interfaces...
            mutator.loop = this.loop;
            mutator.volume = this.volume;
            mutator.audio = audio; //... so audio comes last
            return mutator;
        }
        // public async mutate(_mutator: Mutator): Promise<void> {
        //   await super.mutate(_mutator);
        //   // this.volume = _mutator.volume;
        //   // this.loop = _mutator.loop;
        // }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.listened;
        }
        install(_audioManager = FudgeCore.AudioManager.default) {
            let active = this.isActive;
            this.activate(false);
            this.audioManager = _audioManager;
            this.panner = _audioManager.createPanner();
            this.gain = _audioManager.createGain();
            this.panner.connect(this.gain);
            this.gain.connect(_audioManager.gain);
            this.activate(active);
        }
        createSource(_audio, _loop, _playbackRate = 1.0) {
            if (this.source) {
                this.source.disconnect();
                this.source.buffer = null;
            }
            this.source = this.audioManager.createBufferSource();
            this.source.connect(this.panner);
            if (_audio) {
                this.audio = _audio;
                this.source.buffer = _audio.buffer;
            }
            this.source.loop = _loop;
            this.playbackRate = _playbackRate;
        }
        updateConnection() {
            try {
                this.connect(this.isActive && this.isAttached && this.listened);
            }
            catch (_error) {
                // nop
            }
        }
    }
    FudgeCore.ComponentAudio = ComponentAudio;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Serves to set the spatial location and orientation of AudioListeners relative to the
     * world transform of the {@link Node} it is attached to.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentAudioListener extends FudgeCore.Component {
        constructor() {
            super(...arguments);
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
        }
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentAudioListener); }
        /**
         * Updates the position and orientation of the given AudioListener
         */
        update(_listener) {
            let mtxResult = this.mtxPivot;
            if (this.node)
                mtxResult = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
            // Debug.log(mtxResult.toString());
            let position = mtxResult.translation;
            let forward = FudgeCore.Vector3.TRANSFORMATION(FudgeCore.Vector3.Z(1), mtxResult, false);
            let up = FudgeCore.Vector3.TRANSFORMATION(FudgeCore.Vector3.Y(), mtxResult, false);
            if (_listener.positionX != undefined) {
                _listener.positionX.value = position.x;
                _listener.positionY.value = position.y;
                _listener.positionZ.value = position.z;
                _listener.forwardX.value = forward.x;
                _listener.forwardY.value = forward.y;
                _listener.forwardZ.value = forward.z;
                _listener.upX.value = up.x;
                _listener.upY.value = up.y;
                _listener.upZ.value = up.z;
            }
            else {
                // Firefox still uses deprecated methods. TODO: delete as soon as possible!
                _listener.setPosition(position.x, position.y, position.z);
                _listener.setOrientation(forward.x, forward.y, forward.z, up.x, up.y, up.z);
            }
            FudgeCore.Recycler.store(forward);
            FudgeCore.Recycler.store(up);
            if (this.node)
                FudgeCore.Recycler.store(mtxResult);
            // Debug.log(mtxResult.translation.toString(), forward.toString(), up.toString());
        }
    }
    FudgeCore.ComponentAudioListener = ComponentAudioListener;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attached to a {@link Node} with an attached {@link ComponentCamera} this causes the rendered image to receive a bloom-effect.
     * @authors Roland Heer, HFU, 2023
     */
    class ComponentBloom extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentBloom); }
        #threshold;
        #intensity;
        #highlightDesaturation;
        constructor(_threshold = 0.95, _intensity = 1.0, _desaturateHighlights = 0.5) {
            super();
            this.#threshold = _threshold;
            this.#intensity = _intensity;
            this.#highlightDesaturation = _desaturateHighlights;
        }
        get threshold() {
            return this.#threshold;
        }
        set threshold(_value) {
            this.#threshold = FudgeCore.Calc.clamp(_value, 0, 1);
        }
        get intensity() {
            return this.#intensity;
        }
        set intensity(_value) {
            this.#intensity = Math.max(0, _value);
        }
        get highlightDesaturation() {
            return this.#highlightDesaturation;
        }
        set highlightDesaturation(_value) {
            this.#highlightDesaturation = FudgeCore.Calc.clamp(_value, 0, 1);
        }
        //#region Transfer
        serialize() {
            let serialization = {
                threshold: this.#threshold,
                intensity: this.#intensity,
                desaturateHighlights: this.#highlightDesaturation,
            };
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.#threshold = _serialization.threshold;
            this.#intensity = _serialization.intensity;
            this.#highlightDesaturation = _serialization.desaturateHighlights;
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.threshold = this.threshold;
            mutator.intensity = this.intensity;
            mutator.highlightDesaturation = this.highlightDesaturation;
            return mutator;
        }
    }
    FudgeCore.ComponentBloom = ComponentBloom;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="Component.ts"/>
var FudgeCore;
// / <reference path="Component.ts"/>
(function (FudgeCore) {
    let FIELD_OF_VIEW;
    (function (FIELD_OF_VIEW) {
        FIELD_OF_VIEW["HORIZONTAL"] = "horizontal";
        FIELD_OF_VIEW["VERTICAL"] = "vertical";
        FIELD_OF_VIEW["DIAGONAL"] = "diagonal";
    })(FIELD_OF_VIEW = FudgeCore.FIELD_OF_VIEW || (FudgeCore.FIELD_OF_VIEW = {}));
    /**
     * Defines identifiers for the various projections a camera can provide.
     * TODO: change back to number enum if strings not needed
     */
    let PROJECTION;
    (function (PROJECTION) {
        PROJECTION["CENTRAL"] = "central";
        PROJECTION["ORTHOGRAPHIC"] = "orthographic";
        PROJECTION["DIMETRIC"] = "dimetric";
        PROJECTION["STEREO"] = "stereo";
    })(PROJECTION = FudgeCore.PROJECTION || (FudgeCore.PROJECTION = {}));
    /**
     * The camera component holds the projection-matrix and other data needed to render a scene from the perspective of the node it is attached to.
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentCamera extends FudgeCore.Component {
        constructor() {
            super(...arguments);
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.clrBackground = new FudgeCore.Color(0, 0, 0, 1); // The color of the background the camera will render.
            //private orthographic: boolean = false; // Determines whether the image will be rendered with perspective or orthographic projection.
            this.projection = PROJECTION.CENTRAL;
            this.fieldOfView = 45; // The camera's sensorangle.
            this.aspectRatio = 1.0;
            this.direction = FIELD_OF_VIEW.DIAGONAL;
            this.near = 1;
            this.far = 2000;
            this.backgroundEnabled = true; // Determines whether or not the background of this camera will be rendered.
            this.#mtxProjection = new FudgeCore.Matrix4x4; // The matrix to multiply each scene objects transformation by, to determine where it will be drawn.
            //#endregion
        }
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentCamera); }
        // TODO: examine, if background should be an attribute of Camera or Viewport
        #mtxWorldToView;
        #mtxCameraInverse;
        #mtxProjection; // The matrix to multiply each scene objects transformation by, to determine where it will be drawn.
        /**
         * Returns the cameras worldtransformation matrix i.e. the transformation relative to the root of the graph
         */
        get mtxWorld() {
            let mtxCamera = this.mtxPivot.clone;
            try {
                mtxCamera = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
            }
            catch (_error) {
                // no container node or no world transformation found -> continue with pivot only
                // TODO: maybe use if () then instead of try catch
            }
            return mtxCamera;
        }
        /**
         * Returns the multiplication of the worldtransformation of the camera container, the pivot of this camera and the inversion of the projection matrix
         * yielding the worldspace to viewspace matrix
         */
        get mtxWorldToView() {
            if (this.#mtxWorldToView)
                return this.#mtxWorldToView;
            //TODO: optimize, no need to recalculate if neither mtxWorld nor pivot have changed
            this.#mtxWorldToView = FudgeCore.Matrix4x4.PRODUCT(this.#mtxProjection, this.mtxCameraInverse);
            return this.#mtxWorldToView;
        }
        /**
         * Returns the inversion of this cameras worldtransformation
         */
        get mtxCameraInverse() {
            if (this.#mtxCameraInverse)
                return this.#mtxCameraInverse;
            //TODO: optimize, no need to recalculate if neither mtxWorld nor pivot have changed
            this.#mtxCameraInverse = FudgeCore.Matrix4x4.INVERSE(this.mtxWorld);
            return this.#mtxCameraInverse;
        }
        /**
         * Returns the projectionmatrix of this camera
         */
        get mtxProjection() {
            if (this.#mtxProjection)
                return this.#mtxProjection;
            //TODO: optimize, no need to recalculate if neither mtxWorld nor pivot have changed
            this.#mtxProjection = new FudgeCore.Matrix4x4;
            return this.#mtxProjection;
        }
        /**
         * Resets this cameras {@link mtxWorldToView} and {@link mtxCameraInverse} matrices
         */
        resetWorldToView() {
            if (this.#mtxWorldToView)
                FudgeCore.Recycler.store(this.#mtxWorldToView);
            if (this.#mtxCameraInverse)
                FudgeCore.Recycler.store(this.#mtxCameraInverse);
            this.#mtxWorldToView = null;
            this.#mtxCameraInverse = null;
        }
        /**
         * Returns the cameras {@link PROJECTION} mode
         */
        getProjection() {
            return this.projection;
        }
        /**
         * Returns true if the background of the camera should be rendered, false if not
         */
        getBackgroundEnabled() {
            return this.backgroundEnabled;
        }
        /**
         * Returns the cameras aspect ratio
         */
        getAspect() {
            return this.aspectRatio;
        }
        /**
         * Returns the cameras field of view in degrees
         */
        getFieldOfView() {
            return this.fieldOfView;
        }
        /**
         * Returns the cameras direction i.e. the plane on which the fieldOfView-Angle is given
         */
        getDirection() {
            return this.direction;
        }
        /**
         * Returns the cameras near value i.e. the minimum distance to render objects at
         */
        getNear() {
            return this.near;
        }
        /**
         * Returns the cameras far value i.e. the maximum distance to render objects at
         */
        getFar() {
            return this.far;
        }
        /**
         * Set the camera to perspective projection. The world origin is in the center of the canvaselement.
         * @param _aspect The aspect ratio between width and height of projectionspace.(Default = canvas.clientWidth / canvas.ClientHeight)
         * @param _fieldOfView The field of view in Degrees. (Default = 45)
         * @param _direction The plane on which the fieldOfView-Angle is given
         */
        projectCentral(_aspect = this.aspectRatio, _fieldOfView = this.fieldOfView, _direction = this.direction, _near = this.near, _far = this.far) {
            this.aspectRatio = _aspect;
            this.fieldOfView = _fieldOfView;
            this.direction = _direction;
            this.projection = PROJECTION.CENTRAL;
            this.near = _near;
            this.far = _far;
            this.#mtxProjection = FudgeCore.Matrix4x4.PROJECTION_CENTRAL(_aspect, this.fieldOfView, _near, _far, this.direction); // TODO: remove magic numbers
        }
        /**
         * Set the camera to orthographic projection. Default values are derived the canvas client dimensions
         * @param _left The positionvalue of the projectionspace's left border.
         * @param _right The positionvalue of the projectionspace's right border.
         * @param _bottom The positionvalue of the projectionspace's bottom border.
         * @param _top The positionvalue of the projectionspace's top border.
         */
        projectOrthographic(_left = -FudgeCore.Render.getCanvas().clientWidth / 2, _right = FudgeCore.Render.getCanvas().clientWidth / 2, _bottom = FudgeCore.Render.getCanvas().clientHeight / 2, _top = -FudgeCore.Render.getCanvas().clientHeight / 2) {
            this.projection = PROJECTION.ORTHOGRAPHIC;
            this.#mtxProjection = FudgeCore.Matrix4x4.PROJECTION_ORTHOGRAPHIC(_left, _right, _bottom, _top, 400, -400); // TODO: examine magic numbers!
        }
        /**
         * Return the calculated dimension of a projection surface in the hypothetical distance of 1 to the camera
         */
        getProjectionRectangle() {
            let tanFov = Math.tan(Math.PI * this.fieldOfView / 360); // Half of the angle, to calculate dimension from the center -> right angle
            let tanHorizontal = 0;
            let tanVertical = 0;
            if (this.direction == FIELD_OF_VIEW.DIAGONAL) {
                let aspect = Math.sqrt(this.aspectRatio);
                tanHorizontal = tanFov * aspect;
                tanVertical = tanFov / aspect;
            }
            else if (this.direction == FIELD_OF_VIEW.VERTICAL) {
                tanVertical = tanFov;
                tanHorizontal = tanVertical * this.aspectRatio;
            }
            else { //FOV_DIRECTION.HORIZONTAL
                tanHorizontal = tanFov;
                tanVertical = tanHorizontal / this.aspectRatio;
            }
            return FudgeCore.Rectangle.GET(0, 0, tanHorizontal * 2, tanVertical * 2);
        }
        /**
         * Transforms the given point from world space to clip space
         */
        pointWorldToClip(_pointInWorldSpace) {
            let result;
            let m = this.mtxWorldToView.get();
            let w = m[3] * _pointInWorldSpace.x + m[7] * _pointInWorldSpace.y + m[11] * _pointInWorldSpace.z + m[15];
            result = FudgeCore.Vector3.TRANSFORMATION(_pointInWorldSpace, this.mtxWorldToView);
            result.scale(1 / w);
            return result;
        }
        /**
         * Transforms the given point from clip space to world space
         */
        pointClipToWorld(_pointInClipSpace) {
            let mtxViewToWorld = FudgeCore.Matrix4x4.INVERSE(this.mtxWorldToView);
            let m = mtxViewToWorld.get();
            let rayWorld = FudgeCore.Vector3.TRANSFORMATION(_pointInClipSpace, mtxViewToWorld, true);
            let w = m[3] * _pointInClipSpace.x + m[7] * _pointInClipSpace.y + m[11] * _pointInClipSpace.z + m[15];
            rayWorld.scale(1 / w);
            return rayWorld;
        }
        //#region Transfer
        serialize() {
            let serialization = {
                backgroundColor: this.clrBackground,
                backgroundEnabled: this.backgroundEnabled,
                projection: this.projection,
                fieldOfView: this.fieldOfView,
                direction: this.direction,
                near: this.near,
                far: this.far,
                aspect: this.aspectRatio,
                pivot: this.mtxPivot.serialize(),
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            await this.clrBackground.deserialize(_serialization.backgroundColor);
            this.backgroundEnabled = _serialization.backgroundEnabled;
            this.projection = _serialization.projection;
            this.fieldOfView = _serialization.fieldOfView;
            this.aspectRatio = _serialization.aspect;
            this.direction = _serialization.direction;
            this.near = _serialization.near ?? this.near;
            this.far = _serialization.far ?? this.far;
            await this.mtxPivot.deserialize(_serialization.pivot);
            await super.deserialize(_serialization[super.constructor.name]);
            switch (this.projection) {
                case PROJECTION.ORTHOGRAPHIC:
                    this.projectOrthographic(); // TODO: serialize and deserialize parameters
                    break;
                case PROJECTION.CENTRAL:
                    this.projectCentral();
                    break;
            }
            return this;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.direction)
                types.direction = FIELD_OF_VIEW;
            if (types.projection)
                types.projection = PROJECTION;
            return types;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            switch (this.projection) {
                case PROJECTION.CENTRAL:
                    this.projectCentral(this.aspectRatio, this.fieldOfView, this.direction, this.near, this.far);
                    break;
            }
        }
        drawGizmos() {
            let mtxWorld = this.mtxWorld.clone;
            mtxWorld.scaling = new FudgeCore.Vector3(0.5, 0.5, 0.5);
            let color = FudgeCore.Color.CSS("lightgrey");
            FudgeCore.Gizmos.drawIcon(FudgeCore.TextureDefault.iconCamera, mtxWorld, color);
            FudgeCore.Recycler.storeMultiple(mtxWorld, color);
        }
        drawGizmosSelected() {
            FudgeCore.Gizmos.drawWireFrustum(this.getAspect(), this.getFieldOfView(), this.getNear(), this.getFar(), this.getDirection(), this.mtxWorld, FudgeCore.Color.CSS("lightgrey"));
        }
        ;
        reduceMutator(_mutator) {
            delete _mutator.transform;
            super.reduceMutator(_mutator);
        }
    }
    FudgeCore.ComponentCamera = ComponentCamera;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Makes the node face the camera when rendering, respecting restrictions for rotation around specific axis
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Component
     */
    class ComponentFaceCamera extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentFaceCamera); }
        constructor() {
            super();
            this.upLocal = true;
            this.up = FudgeCore.Vector3.Y(1);
            this.restrict = false;
            this.singleton = true;
        }
    }
    FudgeCore.ComponentFaceCamera = ComponentFaceCamera;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attached to a {@link Node} with an attached {@link ComponentCamera} this causes the rendered image to receive a fog-effect.
     * @authors Roland Heer, HFU, 2023
     */
    class ComponentFog extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentFog); }
        constructor(_color = new FudgeCore.Color(1, 1, 1, 1), _near = 1, _far = 50) {
            super();
            this.color = _color;
            this.near = _near;
            this.far = _far;
        }
        //#region Transfer
        serialize() {
            let serialization = {
                color: this.color.serialize(),
                near: this.near,
                far: this.far
            };
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await this.color.deserialize(_serialization.color);
            this.near = _serialization.near ?? this.near;
            this.far = _serialization.far ?? this.far;
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
    }
    FudgeCore.ComponentFog = ComponentFog;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Filters synchronization between a graph instance and the graph it is connected to. If active, no synchronization occurs.
     * Maybe more finegrained in the future...
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Component
     */
    class ComponentGraphFilter extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentGraphFilter); }
        constructor() {
            super();
            this.singleton = true;
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
    }
    FudgeCore.ComponentGraphFilter = ComponentGraphFilter;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Baseclass for different kinds of lights.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Light extends FudgeCore.Mutable {
        constructor(_color = new FudgeCore.Color(1, 1, 1, 1)) {
            super();
            this.color = _color;
        }
        /**
         * Returns the {@link TypeOfLight} of this light.
         */
        getType() {
            return this.constructor;
        }
        serialize() {
            let serialization = {
                color: this.color.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            await this.color.deserialize(_serialization.color);
            return this;
        }
        reduceMutator() { }
    }
    FudgeCore.Light = Light;
    /**
     * Ambient light, coming from all directions, illuminating everything with its color independent of position and orientation (like a foggy day or in the shades)
     * Attached to a node by {@link ComponentLight}, the pivot matrix is ignored.
     * ```text
     * ~ ~ ~
     *  ~ ~ ~
     * ```
     */
    class LightAmbient extends Light {
    }
    FudgeCore.LightAmbient = LightAmbient;
    /**
     * Directional light, illuminating everything from a specified direction with its color (like standing in bright sunlight)
     * Attached to a node by {@link ComponentLight}, the pivot matrix specifies the direction of the light only.
     * ```text
     * --->
     * --->
     * --->
     * ```
     */
    class LightDirectional extends Light {
    }
    FudgeCore.LightDirectional = LightDirectional;
    /**
     * Omnidirectional light emitting from its position, illuminating objects depending on their position and distance with its color (like a colored light bulb)
     * Attached to a node by {@link ComponentLight}, the pivot matrix specifies the position of the light, it's shape and rotation.
     * So with uneven scaling, other shapes than a perfect sphere, such as an oval or a disc, are possible, which creates a visible effect of the rotation too.
     * The intensity of the light drops linearly from 1 in the center to 0 at the perimeter of the shape.
     * ```text
     *         .\|/.
     *        -- o --
     *         ¬¥/|\`
     * ```
     */
    class LightPoint extends Light {
    }
    FudgeCore.LightPoint = LightPoint;
    /**
     * Spot light emitting within a specified angle from its position, illuminating objects depending on their position and distance with its color
     * Attached to a node by {@link ComponentLight}, the pivot matrix specifies the position of the light, the direction and the size and angles of the cone.
     * The intensity of the light drops linearly from 1 in the center to 0 at the outer limits of the cone.
     * ```text
     *          o
     *         /|\
     *        / | \
     * ```
     */
    class LightSpot extends Light {
    }
    FudgeCore.LightSpot = LightSpot;
})(FudgeCore || (FudgeCore = {}));
///<reference path="../Light/Light.ts"/>
var FudgeCore;
///<reference path="../Light/Light.ts"/>
(function (FudgeCore) {
    /**
     * Defines identifiers for the various types of light this component can provide.
     */
    // export let LIGHT_TYPE: { [type: string]: string } = {
    let LIGHT_TYPE;
    (function (LIGHT_TYPE) {
        LIGHT_TYPE["AMBIENT"] = "LightAmbient";
        LIGHT_TYPE["DIRECTIONAL"] = "LightDirectional";
        LIGHT_TYPE["POINT"] = "LightPoint";
        LIGHT_TYPE["SPOT"] = "LightSpot";
    })(LIGHT_TYPE = FudgeCore.LIGHT_TYPE || (FudgeCore.LIGHT_TYPE = {}));
    /**
      * Attaches a {@link Light} to the node
      * The pivot matrix has different effects depending on the type of the {@link Light}. See there for details.
      * @authors Jirka Dell'Oro-Friedl, HFU, 2019
      */
    class ComponentLight extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentLight); }
        //TODO: since there is almost no functionality left in Light, eliminate it and put all in the component as with the camera...
        constructor(_light = new FudgeCore.LightAmbient()) {
            super();
            // private static constructors: { [type: string]: General } = { [LIGHT_TYPE.AMBIENT]: LightAmbient, [LIGHT_TYPE.DIRECTIONAL]: LightDirectional, [LIGHT_TYPE.POINT]: LightPoint, [LIGHT_TYPE.SPOT]: LightSpot };
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.light = null;
            this.singleton = false;
            this.light = _light;
        }
        // TODO: use TypeOfLight as return type?
        /**
         * Set the type of {@link Light} used by this component.
         */
        setType(_class) {
            let mtrOld = {};
            if (this.light)
                mtrOld = this.light.getMutator();
            this.light = new _class();
            this.light.mutate(mtrOld);
        }
        serialize() {
            let serialization = {
                pivot: this.mtxPivot.serialize(),
                light: FudgeCore.Serializer.serialize(this.light)
            };
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            await this.mtxPivot.deserialize(_serialization.pivot);
            this.light = await FudgeCore.Serializer.deserialize(_serialization.light);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.type = this.light.getType().name;
            return mutator;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.type)
                types.type = LIGHT_TYPE;
            return types;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            let type = _mutator.type;
            if (typeof (type) !== "undefined" && type != this.light.constructor.name)
                this.setType(FudgeCore.Serializer.getConstructor(type));
            delete (_mutator.type); // exclude light type from further mutation
            super.mutate(_mutator, _selection, _dispatchMutate);
            _mutator.type = type; // reconstruct mutator
        }
        drawGizmos() {
            let mtxShape = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
            mtxShape.scaling = new FudgeCore.Vector3(0.5, 0.5, 0.5);
            FudgeCore.Gizmos.drawIcon(FudgeCore.TextureDefault.iconLight, mtxShape, this.light.color);
            FudgeCore.Recycler.store(mtxShape);
        }
        ;
        drawGizmosSelected() {
            let mtxShape = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
            let color = FudgeCore.Color.CSS("yellow");
            switch (this.light.getType()) {
                case FudgeCore.LightDirectional:
                    const radius = 0.5;
                    FudgeCore.Gizmos.drawWireCircle(mtxShape, color);
                    const lines = new Array(10).fill(null).map(() => FudgeCore.Recycler.get(FudgeCore.Vector3));
                    lines[0].set(0, 0, 0);
                    lines[1].set(0, 0, 1);
                    lines[2].set(0, radius, 0);
                    lines[3].set(0, radius, 1);
                    lines[6].set(0, -radius, 0);
                    lines[7].set(0, -radius, 1);
                    lines[4].set(radius, 0, 0);
                    lines[5].set(radius, 0, 1);
                    lines[8].set(-radius, 0, 0);
                    lines[9].set(-radius, 0, 1);
                    FudgeCore.Gizmos.drawLines(lines, mtxShape, color);
                    FudgeCore.Recycler.storeMultiple(...lines);
                    break;
                case FudgeCore.LightPoint:
                    mtxShape.scale(new FudgeCore.Vector3(2, 2, 2));
                    FudgeCore.Gizmos.drawWireSphere(mtxShape, color);
                    break;
                case FudgeCore.LightSpot:
                    FudgeCore.Gizmos.drawWireCone(mtxShape, color);
                    break;
            }
            FudgeCore.Recycler.storeMultiple(mtxShape, color);
        }
    }
    FudgeCore.ComponentLight = ComponentLight;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attaches a {@link Material} to the node
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019 - 2021
     */
    class ComponentMaterial extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentMaterial); }
        // public mutatorCoat: MutatorForComponent;
        constructor(_material = null) {
            super();
            this.clrPrimary = FudgeCore.Color.CSS("white");
            this.clrSecondary = FudgeCore.Color.CSS("white");
            this.mtxPivot = FudgeCore.Matrix3x3.IDENTITY();
            /** Support sorting of objects with transparency when rendering, render objects in the back first. When this component is used as a part of a {@link ParticleSystem}, try enabling this when disabling {@link ComponentParticleSystem.depthMask} */
            this.sortForAlpha = false; // TODO: maybe make this a property of the material?
            this.material = _material;
            // this.mutatorCoat = _material.getCoat().getMutatorForComponent();
        }
        //#region Transfer
        serialize() {
            let serialization = {
                sortForAlpha: this.sortForAlpha,
                clrPrimary: this.clrPrimary.serialize(),
                clrSecondary: this.clrSecondary.serialize(),
                pivot: this.mtxPivot.serialize(),
                [super.constructor.name]: super.serialize(),
                idMaterial: this.material.idResource
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.material = await FudgeCore.Project.getResource(_serialization.idMaterial);
            await this.clrPrimary.deserialize(_serialization.clrPrimary);
            await this.clrSecondary.deserialize(_serialization.clrSecondary);
            this.sortForAlpha = _serialization.sortForAlpha;
            await this.mtxPivot.deserialize(_serialization.pivot);
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
    }
    FudgeCore.ComponentMaterial = ComponentMaterial;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attaches a {@link Mesh} to the node
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentMesh extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentMesh); }
        constructor(_mesh, _skeleton) {
            super();
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.mtxWorld = FudgeCore.Matrix4x4.IDENTITY();
            this.mesh = _mesh;
            this.skeleton = _skeleton;
        }
        get radius() {
            let scaling = this.mtxWorld.scaling;
            let scale = Math.max(Math.abs(scaling.x), Math.abs(scaling.y), Math.abs(scaling.z));
            return this.mesh.radius * scale;
        }
        // /**
        //  * Calculates the position of a vertex transformed by the skeleton
        //  * @param _index index of the vertex
        //  */
        // public getVertexPosition(_index: number): Vector3 {
        //   // extract the vertex data (vertices: 3D vectors, bone indices & weights: 4D vectors)
        //   const iVertex: number = _index * 3;
        //   const iBoneInfluence: number = _index * 4;
        //   const vertex: Vector3 = new Vector3(...Reflect.get(this.mesh, "renderMesh").vertices.slice(iVertex, iVertex + 3));
        //   if (!(this.mesh instanceof MeshSkin)) return vertex;
        //   const iBones: Uint8Array = this.mesh.iBones.slice(iBoneInfluence, iBoneInfluence + 4);
        //   const weights: Float32Array = this.mesh.weights.slice(iBoneInfluence, iBoneInfluence + 4);
        //   // get bone matrices
        //   const mtxBones: Array<Matrix4x4> = this.skeleton.mtxBones;
        //   // skin matrix S = sum_i=1^m{w_i * B_i}
        //   const skinMatrix: Matrix4x4 = new Matrix4x4();
        //   skinMatrix.set(Array
        //     .from(iBones)
        //     .map((iBone, iWeight) => mtxBones[iBone].get().map(value => value * weights[iWeight])) // apply weight on each matrix
        //     .reduce((mtxSum, mtxBone) => mtxSum.map((value, index) => value + mtxBone[index])) // sum up the matrices
        //   );
        //   // transform vertex
        //   vertex.transform(skinMatrix);
        //   return vertex;
        // }
        // TODO: remove or think if the transformed bounding box is of value or can be made to be
        // public get boundingBox(): Box {
        //   let box: Box = Recycler.get(Box);
        //   box.set(
        //     Vector3.TRANSFORMATION(this.mesh.boundingBox.min, this.mtxWorld, true),
        //     Vector3.TRANSFORMATION(this.mesh.boundingBox.max, this.mtxWorld, true)
        //   );
        //   return box;
        // }
        //#region Transfer
        serialize() {
            let serialization;
            /* at this point of time, serialization as resource and as inline object is possible. TODO: check if inline becomes obsolete */
            let idMesh = this.mesh.idResource;
            if (idMesh)
                serialization = { idMesh: idMesh };
            else
                serialization = { mesh: FudgeCore.Serializer.serialize(this.mesh) };
            if (this.skeleton)
                serialization.skeleton = FudgeCore.Node.PATH_FROM_TO(this, this.skeleton);
            serialization.pivot = this.mtxPivot.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            let mesh;
            if (_serialization.idMesh)
                mesh = await FudgeCore.Project.getResource(_serialization.idMesh);
            else
                mesh = await FudgeCore.Serializer.deserialize(_serialization.mesh);
            this.mesh = mesh;
            if (_serialization.skeleton) {
                const hndNodeDeserialized = () => {
                    const hndGraphDeserialized = () => {
                        this.skeleton = FudgeCore.Node.FIND(this, _serialization.skeleton);
                        this.node.removeEventListener("graphDeserialized" /* EVENT.GRAPH_DESERIALIZED */, hndGraphDeserialized);
                        this.node.removeEventListener("graphInstantiated" /* EVENT.GRAPH_INSTANTIATED */, hndGraphDeserialized);
                        this.removeEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, hndNodeDeserialized);
                    };
                    this.node.addEventListener("graphDeserialized" /* EVENT.GRAPH_DESERIALIZED */, hndGraphDeserialized, true);
                    this.node.addEventListener("graphInstantiated" /* EVENT.GRAPH_INSTANTIATED */, hndGraphDeserialized, true);
                };
                this.addEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, hndNodeDeserialized);
            }
            await this.mtxPivot.deserialize(_serialization.pivot);
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutatorForUserInterface() {
            let mutator = this.getMutator();
            // if (!this.mesh)
            //   mutator.mesh = Mesh;
            return mutator;
        }
        //#endregion
        drawGizmosSelected() {
            if (!this.mesh)
                return;
            let color = FudgeCore.Color.CSS("salmon");
            FudgeCore.Gizmos.drawWireMesh(this.mesh, this.mtxWorld, color, 0.1);
            FudgeCore.Recycler.store(color);
        }
    }
    FudgeCore.ComponentMesh = ComponentMesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let PARTICLE_SYSTEM_PLAYMODE;
    (function (PARTICLE_SYSTEM_PLAYMODE) {
        /**Plays particle system in a loop: it restarts once it hit the end.*/
        PARTICLE_SYSTEM_PLAYMODE[PARTICLE_SYSTEM_PLAYMODE["LOOP"] = 0] = "LOOP";
        /**Plays particle system once and stops at the last point in time.*/
        PARTICLE_SYSTEM_PLAYMODE[PARTICLE_SYSTEM_PLAYMODE["PLAY_ONCE"] = 1] = "PLAY_ONCE";
    })(PARTICLE_SYSTEM_PLAYMODE = FudgeCore.PARTICLE_SYSTEM_PLAYMODE || (FudgeCore.PARTICLE_SYSTEM_PLAYMODE = {}));
    /**
     * Attaches a {@link ParticleSystem} to the node.
     * Works in conjunction with {@link ComponentMesh} and {@link ComponentMaterial} to create a shader particle system.
     * Additionally a {@link ComponentFaceCamera} can be attached to make the particles face the camera.
     * @author Jonas Plotzky, HFU, 2022
     */
    let ComponentParticleSystem = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorComponentParticleSystem).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.Component;
        var ComponentParticleSystem = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                ComponentParticleSystem = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
            }
            static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentParticleSystem); }
            /** The number of particles */
            #size;
            #timeScale;
            #time;
            constructor(_particleSystem = null) {
                super();
                this.#timeScale = 1;
                //#endregion
                this.hndEvent = (_event) => {
                    switch (_event.type) {
                        case "nodeDeserialized" /* EVENT.NODE_DESERIALIZED */:
                        case "componentAdd" /* EVENT.COMPONENT_ADD */:
                            FudgeCore.Time.game.addEventListener("timeScaled" /* EVENT.TIME_SCALED */, this.updateTimeScale);
                            this.node.addEventListener("renderPrepare" /* EVENT.RENDER_PREPARE */, this.update);
                            break;
                        case "componentRemove" /* EVENT.COMPONENT_REMOVE */:
                            FudgeCore.Time.game.removeEventListener("timeScaled" /* EVENT.TIME_SCALED */, this.updateTimeScale);
                            this.node.removeEventListener("renderPrepare" /* EVENT.RENDER_PREPARE */, this.update);
                    }
                };
                this.update = () => {
                    if (this.time > this.duration)
                        switch (this.playMode) {
                            default:
                            case PARTICLE_SYSTEM_PLAYMODE.LOOP:
                                this.time = 0;
                                break;
                            case PARTICLE_SYSTEM_PLAYMODE.PLAY_ONCE:
                                this.time = this.duration;
                                this.timeScale = 0;
                                break;
                        }
                };
                this.updateTimeScale = () => {
                    let timeScale = this.#timeScale * FudgeCore.Time.game.getScale();
                    this.#time.setScale(timeScale);
                };
                this.particleSystem = _particleSystem;
                this.depthMask = true;
                this.blendMode = FudgeCore.BLEND.ADDITIVE;
                this.playMode = PARTICLE_SYSTEM_PLAYMODE.LOOP;
                this.duration = 1000;
                this.size = 10;
                this.#time = new FudgeCore.Time();
                this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.hndEvent);
                this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.hndEvent);
                this.addEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, this.hndEvent);
            }
            /**
             * Get the number of particles
             */
            get size() {
                return this.#size;
            }
            /**
             * Set the number of particles. Caution: Setting this will reinitialize the random numbers array(texture) used in the shader.
             */
            set size(_size) {
                this.#size = _size;
                this.deleteRenderData();
            }
            get time() {
                return this.#time.get();
            }
            set time(_time) {
                this.#time.set(_time);
            }
            get timeScale() {
                return this.#timeScale;
            }
            set timeScale(_scale) {
                this.#timeScale = _scale;
                this.updateTimeScale();
            }
            /**
             * Generates and binds the random numbers texture in WebGL
             * Injected by {@link RenderInjectorComponentParticleSystem}. Used by the render system.
             * @internal
             */
            useRenderData() { }
            /**
             * Deletes the random numbers texture in WebGL freeing the allocated gpu memory.
             * Injected by {@link RenderInjectorComponentParticleSystem}.
             * @internal
             */
            deleteRenderData() { }
            //#region transfer
            serialize() {
                let serialization = {
                    [super.constructor.name]: super.serialize(),
                    idParticleSystem: this.particleSystem?.idResource,
                    depthMask: this.depthMask,
                    blendMode: this.blendMode,
                    playMode: this.playMode,
                    duration: this.duration,
                    size: this.size
                };
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization[super.constructor.name]);
                if (_serialization.idParticleSystem)
                    this.particleSystem = await FudgeCore.Project.getResource(_serialization.idParticleSystem);
                this.depthMask = _serialization.depthMask;
                this.blendMode = _serialization.blendMode;
                this.playMode = _serialization.playMode;
                this.duration = _serialization.duration;
                this.size = _serialization.size;
                return this;
            }
            getMutator(_extendable) {
                let mutator = super.getMutator(true);
                mutator.size = this.size;
                return mutator;
            }
            getMutatorForUserInterface() {
                let mutator = this.getMutator(true);
                delete mutator.particleSystem;
                mutator.particleSystem = this.particleSystem?.getMutatorForUserInterface();
                return mutator;
            }
            getMutatorForAnimation() {
                let mutator = this.getMutator();
                delete mutator.particleSystem;
                delete mutator.size;
                return mutator;
            }
            getMutatorAttributeTypes(_mutator) {
                let types = super.getMutatorAttributeTypes(_mutator);
                if (types.blendMode)
                    types.blendMode = FudgeCore.BLEND;
                if (types.playMode)
                    types.playMode = PARTICLE_SYSTEM_PLAYMODE;
                return types;
            }
            reduceMutator(_mutator) {
                super.reduceMutator(_mutator);
                delete _mutator.randomNumbersRenderData;
                delete _mutator.time;
            }
            static {
                __runInitializers(_classThis, _classExtraInitializers);
            }
        };
        return ComponentParticleSystem = _classThis;
    })();
    FudgeCore.ComponentParticleSystem = ComponentParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let PICK;
    (function (PICK) {
        PICK["RADIUS"] = "radius";
        PICK["CAMERA"] = "camera";
        PICK["PHYSICS"] = "physics";
    })(PICK = FudgeCore.PICK || (FudgeCore.PICK = {}));
    /**
     * Attaches picking functionality to the node
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class ComponentPick extends FudgeCore.Component {
        constructor() {
            super(...arguments);
            this.pick = PICK.RADIUS;
        }
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentPick); }
        /**
         * Picks the node according to the given {@link Ray} and invokes events accordingly
         */
        pickAndDispatch(_ray, _event) {
            let cmpMesh = this.node.getComponent(FudgeCore.ComponentMesh);
            let position = cmpMesh ? cmpMesh.mtxWorld.translation : this.node.mtxWorld.translation;
            switch (this.pick) {
                case PICK.RADIUS:
                    // TODO: should only be node.radius. Adjustment needed, if mesh was transformed...
                    if (_ray.getDistance(position).magnitude < this.node.radius) {
                        this.node.dispatchEvent(_event);
                    }
                    break;
                case PICK.PHYSICS:
                    let hitInfo = FudgeCore.Physics.raycast(_ray.origin, _ray.direction, FudgeCore.Vector3.DIFFERENCE(position, _ray.origin).magnitudeSquared);
                    if (hitInfo.hit)
                        this.node.dispatchEvent(_event);
                    break;
                //TODO: PICK.CAMERA
            }
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.pick)
                types.pick = PICK;
            return types;
        }
    }
    FudgeCore.ComponentPick = ComponentPick;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Base class for scripts the user writes
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Component
     */
    class ComponentScript extends FudgeCore.Component {
        // registering this doesn't make sense, only its subclasses. Or this component must refer to scripts to be attached to this component
        // TODO: rethink & refactor
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentScript); }
        constructor() {
            super();
            this.singleton = false;
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
    }
    FudgeCore.ComponentScript = ComponentScript;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Buffers the bone data from the {@link ComponentSkeleton} into a WebGL Buffer
     * @internal
     */
    class RenderInjectorComponentSkeleton {
        static decorate(_constructor, _context) {
            Object.defineProperty(_constructor.prototype, "useRenderBuffer", {
                value: RenderInjectorComponentSkeleton.useRenderBuffer
            });
            Object.defineProperty(_constructor.prototype, "updateRenderBuffer", {
                value: RenderInjectorComponentSkeleton.updateRenderBuffer
            });
            Object.defineProperty(_constructor.prototype, "deleteRenderBuffer", {
                value: RenderInjectorComponentSkeleton.deleteRenderBuffer
            });
        }
        static useRenderBuffer(_shader) {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.renderBuffer)
                crc3.bindBufferBase(WebGL2RenderingContext.UNIFORM_BUFFER, FudgeCore.UNIFORM_BLOCKS.SKIN.BINDING, this.renderBuffer);
        }
        static updateRenderBuffer() {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (!this.renderBuffer) {
                const bonesByteSize = 256 * 16 * 4; // CAUTION: this is dependent on the shader source code where 256 is the maximum number of bones
                this.renderBuffer = FudgeCore.RenderWebGL.assert(crc3.createBuffer());
                crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, this.renderBuffer);
                crc3.bufferData(WebGL2RenderingContext.UNIFORM_BUFFER, bonesByteSize, WebGL2RenderingContext.DYNAMIC_DRAW);
            }
            const data = new Float32Array(this.mtxBones.length * 16);
            for (let i = 0; i < this.mtxBones.length; i++)
                data.set(this.mtxBones[i].get(), i * 16);
            crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, this.renderBuffer);
            crc3.bufferSubData(WebGL2RenderingContext.UNIFORM_BUFFER, 0, data);
        }
        static deleteRenderBuffer() {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.renderBuffer)
                crc3.deleteBuffer(this.renderBuffer);
        }
    }
    FudgeCore.RenderInjectorComponentSkeleton = RenderInjectorComponentSkeleton;
})(FudgeCore || (FudgeCore = {}));
///<reference path="./../Render/RenderInjectorComponentSkeleton.ts"/>
var FudgeCore;
///<reference path="./../Render/RenderInjectorComponentSkeleton.ts"/>
(function (FudgeCore) {
    /**
     * Holds an array of bones ({@link Node}s within a {@link Graph}). Referenced from a {@link ComponentMesh} it can be associated with a {@link Mesh} and enable skinning for the mesh.
     * @authors Matthias Roming, HFU, 2022-2023 | Jonas Plotzky, HFU, 2023
     */
    let ComponentSkeleton = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorComponentSkeleton).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.Component;
        var ComponentSkeleton = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                ComponentSkeleton = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            constructor(_bones = [], _mtxBoneInverses = []) {
                super();
                this.singleton = false;
                /** Contains the bone transformations applicable to the vertices of a {@link Mesh} */
                this.mtxBones = [];
                this.bones = _bones;
                this.mtxBindInverses = _mtxBoneInverses;
                for (let i = 0; i < this.bones.length; i++)
                    if (this.mtxBindInverses[i] == null)
                        this.mtxBindInverses[i] = this.bones[i].mtxWorldInverse.clone;
            }
            /**
             * Injected by {@link RenderInjectorComponentSkeleton}.
             * Used by the render system.
             * @internal
             */
            useRenderBuffer(_shader) { return null; /* injected by RenderInjector*/ }
            /**
             * Injected by {@link RenderInjectorComponentSkeleton}.
             * Used by the render system.
             * @internal
             */
            updateRenderBuffer() { return null; /* injected by RenderInjector*/ }
            /**
             * Injected by {@link RenderInjectorComponentSkeleton}.
             * Used by the render system.
             * @internal
             */
            deleteRenderBuffer() { }
            /**
             * Adds a node as a bone with its bind inverse matrix
             */
            addBone(_bone, _mtxBindInverse = _bone.mtxWorldInverse.clone) {
                this.bones.push(_bone);
                this.mtxBindInverses.push(_mtxBindInverse);
            }
            indexOf(_name) {
                if (typeof (_name) == "string")
                    return this.bones.findIndex((_bone) => _bone.name == _name);
                else
                    return this.bones.indexOf(_name);
            }
            /**
             * Updates the bone matrices to be used by the shader
             */
            update() {
                for (const mtxBone of this.mtxBones)
                    FudgeCore.Recycler.store(mtxBone);
                this.mtxBones.length = 0;
                for (let i = 0; i < this.bones.length; i++) {
                    let mtxBone = FudgeCore.Matrix4x4.PRODUCT(this.bones[i].mtxWorld, this.mtxBindInverses[i]);
                    this.mtxBones.push(mtxBone);
                }
            }
            /**
             * Resets the pose of this skeleton to the default pose
             */
            resetPose() {
                for (let i = 0; i < this.bones.length; i++)
                    this.bones[i].mtxLocal.copy(FudgeCore.Matrix4x4.INVERSE(this.mtxBindInverses[i]));
            }
            serialize() {
                const serialization = {};
                serialization[super.constructor.name] = super.serialize();
                serialization.bones = this.bones.map(_bone => FudgeCore.Node.PATH_FROM_TO(this, _bone));
                serialization.mtxBindInverses = FudgeCore.Serializer.serializeArray(FudgeCore.Matrix4x4, this.mtxBindInverses);
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization[super.constructor.name]);
                const hndNodeDeserialized = () => {
                    this.bones = _serialization.bones.map((_path) => {
                        let bone = FudgeCore.Node.FIND(this, _path);
                        if (!bone)
                            throw new Error(`${FudgeCore.Node.name} "${this.node.name}" ${ComponentSkeleton.name}: Could not find bone ${_path}`);
                        return bone;
                    });
                    this.removeEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, hndNodeDeserialized);
                };
                this.addEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, hndNodeDeserialized);
                this.mtxBindInverses = await FudgeCore.Serializer.deserializeArray(_serialization.mtxBindInverses);
                return this;
            }
        };
        return ComponentSkeleton = _classThis;
    })();
    FudgeCore.ComponentSkeleton = ComponentSkeleton;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attaches a {@link TextureText} to the node.
     * Works in conjunction with {@link ComponentMesh} and {@link ComponentMaterial} to create a text node.
     * A 'textured' {@link Material} (e.g. {@link ShaderLitTextured}) must be used to display the text properly. Ideally a {@link MeshQuad} should be used to render the text onto.
     * Additionally a {@link ComponentFaceCamera} can be attached to make the text face the camera.
     * @authors Jonas Plotzky, HFU, 2024
     */
    class ComponentText extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentText); }
        constructor(_text, _font) {
            super();
            this.texture = new FudgeCore.TextureText(ComponentText.name, _text, _font);
            this.mtxWorld = FudgeCore.Matrix4x4.IDENTITY();
            this.fixedSize = false;
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
        useRenderData(_mtxMeshToWorld, _cmpCamera) {
            this.texture.useRenderData(FudgeCore.TEXTURE_LOCATION.COLOR.UNIT);
            this.mtxWorld.copy(_mtxMeshToWorld);
            let scaling = FudgeCore.Recycler.get(FudgeCore.Vector3);
            if (this.fixedSize) {
                let scale;
                let rect = FudgeCore.Render.getRenderRectangle();
                switch (_cmpCamera.getDirection()) {
                    case FudgeCore.FIELD_OF_VIEW.VERTICAL:
                        scale = 1 / rect.height * window.devicePixelRatio;
                        break;
                    case FudgeCore.FIELD_OF_VIEW.HORIZONTAL:
                        scale = 1 / rect.width * window.devicePixelRatio;
                        break;
                    case FudgeCore.FIELD_OF_VIEW.DIAGONAL:
                        scale = 1 / Math.sqrt((rect.width * rect.height) * window.devicePixelRatio);
                        break;
                }
                let distance = _cmpCamera.mtxWorld.translation.getDistance(_mtxMeshToWorld.translation);
                scale = scale * distance;
                scaling.set(this.texture.width * scale, this.texture.height * scale, 1);
                this.mtxWorld.scaling = scaling;
                FudgeCore.Recycler.store(distance);
            }
            else {
                let pixelsToUnits = 1 / this.texture.height;
                scaling.set(this.texture.width * pixelsToUnits, this.texture.height * pixelsToUnits, 1);
                this.mtxWorld.scale(scaling);
            }
            FudgeCore.Recycler.store(scaling);
            return this.mtxWorld;
        }
        drawGizmosSelected() {
            let mesh = this.node.getComponent(FudgeCore.ComponentMesh)?.mesh;
            let cmpMaterial = this.node.getComponent(FudgeCore.ComponentMaterial);
            if (mesh == null || cmpMaterial == null)
                return;
            FudgeCore.Gizmos.drawWireMesh(mesh, this.mtxWorld, cmpMaterial.clrPrimary);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.texture.name;
        }
    }
    FudgeCore.ComponentText = ComponentText;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let BASE;
    (function (BASE) {
        BASE[BASE["SELF"] = 0] = "SELF";
        BASE[BASE["PARENT"] = 1] = "PARENT";
        BASE[BASE["WORLD"] = 2] = "WORLD";
        BASE[BASE["NODE"] = 3] = "NODE";
    })(BASE = FudgeCore.BASE || (FudgeCore.BASE = {}));
    /**
     * Attaches a transform-{@link Matrix4x4} to the node, moving, scaling and rotating it in space relative to its parent.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentTransform extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentTransform); }
        constructor(_mtxInit = FudgeCore.Matrix4x4.IDENTITY()) {
            super();
            this.mtxLocal = _mtxInit;
        }
        //#region Transformations respecting the hierarchy
        /**
         * recalculates this local matrix to yield the identical world matrix based on the given node.
         * Use rebase before appending the container of this component to another node while preserving its transformation in the world.
         */
        rebase(_node = null) {
            let mtxResult = this.mtxLocal;
            let container = this.node;
            if (container)
                mtxResult = container.mtxWorld;
            if (_node)
                mtxResult = FudgeCore.Matrix4x4.RELATIVE(mtxResult, null, _node.mtxWorldInverse);
            this.mtxLocal = mtxResult;
        }
        /**
         * Applies the given transformation relative to the selected base (SELF, PARENT, WORLD) or a particular other node (NODE)
         */
        transform(_mtxTransform, _base = BASE.SELF, _node = null) {
            switch (_base) {
                case BASE.SELF:
                    this.mtxLocal.multiply(_mtxTransform);
                    break;
                case BASE.PARENT:
                    this.mtxLocal.multiply(_mtxTransform, true);
                    break;
                case BASE.NODE:
                    if (!_node)
                        throw new Error("BASE.NODE requires a node given as base");
                case BASE.WORLD:
                    this.rebase(_node);
                    this.mtxLocal.multiply(_mtxTransform, true);
                    let node = this.node;
                    if (node) {
                        let mtxTemp;
                        if (_base == BASE.NODE) {
                            // fix mtxWorld of container for subsequent rebasing 
                            mtxTemp = FudgeCore.Matrix4x4.PRODUCT(_node.mtxWorld, node.mtxLocal);
                            node.mtxWorld.copy(mtxTemp);
                            FudgeCore.Recycler.store(mtxTemp);
                        }
                        let parent = node.getParent();
                        if (parent) {
                            // fix mtxLocal for current parent
                            this.rebase(node.getParent());
                            mtxTemp = FudgeCore.Matrix4x4.PRODUCT(node.getParent().mtxWorld, node.mtxLocal);
                            node.mtxWorld.copy(mtxTemp);
                            FudgeCore.Recycler.store(mtxTemp);
                        }
                    }
                    break;
            }
        }
        //#endregion
        //#region Transfer
        serialize() {
            let serialization = {
                local: this.mtxLocal.serialize(),
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            await this.mtxLocal.deserialize(_serialization.local);
            return this;
        }
        // public mutate(_mutator: Mutator): void {
        //     this.local.mutate(_mutator);
        // }
        // public getMutator(): Mutator { 
        //     return this.local.getMutator();
        // }
        // public getMutatorAttributeTypes(_mutator: Mutator): MutatorAttributeTypes {
        //     let types: MutatorAttributeTypes = this.local.getMutatorAttributeTypes(_mutator);
        //     return types;
        // }
        reduceMutator(_mutator) {
            delete _mutator.world;
            super.reduceMutator(_mutator);
        }
    }
    FudgeCore.ComponentTransform = ComponentTransform;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Describes a VR Controller and its capabilities.
     */
    class VRController {
        constructor() {
            this.cmpTransform = null;
            this.gamePad = null;
            this.thumbstickX = null;
            this.thumbstickY = null;
        }
    }
    FudgeCore.VRController = VRController;
    /**
     * VR Component Class, for Session Management, Controller Management and Reference Space Management.
     * @author Valentin Schmidberger, HFU, 2022
     */
    class ComponentVRDevice extends FudgeCore.ComponentCamera {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentVRDevice); }
        #mtxLocal;
        constructor() {
            super();
            this.rightCntrl = new VRController();
            this.leftCntrl = new VRController();
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.getMtxLocalFromCmpTransform);
        }
        /**
         * Returns the actual matrix of the vr - device.
         * Creators should use this for readonly purposes.
         */
        get mtxLocal() {
            return this.#mtxLocal;
        }
        /**
         * Sets a Vector3 as Position of the reference space.
         */
        set translation(_translation) {
            let translation = _translation.clone;
            translation.subtract(this.#mtxLocal.translation);
            translation.negate();
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(translation));
            this.#mtxLocal.translation = _translation;
            FudgeCore.Recycler.store(translation);
        }
        /**
         * Sets Vector3 Rotation of the reference space.
         */
        set rotation(_rotation) {
            let rotation = _rotation.clone;
            rotation.subtract(this.#mtxLocal.rotation);
            rotation.negate();
            let orientation = new FudgeCore.Quaternion();
            orientation.eulerAngles = rotation;
            // Rotation needs to be set in the Origin (0,0,0), otherwise the XR-Rig gets rotated around the origin. 
            // set xr - rig back to origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(this.#mtxLocal.translation, FudgeCore.Vector3.ZERO())));
            // rotate xr rig in origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.ZERO(), orientation));
            // set xr - rig back to last position 
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(FudgeCore.Vector3.ZERO(), this.#mtxLocal.translation)));
            this.#mtxLocal.rotation = _rotation;
            FudgeCore.Recycler.store(rotation);
        }
        /**
         * Adds a Vector3 in Position of the reference space.
         */
        translate(_by) {
            let translation = _by.clone;
            translation.transform(this.#mtxLocal.quaternion);
            translation.negate();
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(translation));
            this.#mtxLocal.translate(_by);
            FudgeCore.Recycler.store(translation);
        }
        /**
         * Adds a Vector3 in Rotation of the reference space.
         */
        rotate(_by) {
            let rotation = _by.clone.negate();
            let orientation = new FudgeCore.Quaternion();
            orientation.eulerAngles = rotation;
            // Rotation needs to be added in the Origin (0,0,0), otherwise the XR-Rig gets rotated around the origin. 
            // set xr - rig back to origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(this.#mtxLocal.translation, FudgeCore.Vector3.ZERO())));
            // rotate xr rig in origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.ZERO(), orientation));
            // set xr - rig back to last position 
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(FudgeCore.Vector3.ZERO(), this.#mtxLocal.translation)));
            this.#mtxLocal.rotate(_by);
            FudgeCore.Recycler.store(rotation);
        }
        getMtxLocalFromCmpTransform() {
            this.#mtxLocal = this.node.mtxLocal;
        }
    }
    FudgeCore.ComponentVRDevice = ComponentVRDevice;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Processes input signals of type number and generates an output signal of the same type using
     * proportional, integral or differential mapping, an amplification factor and a linear dampening/delay
     * ```text
     *         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     *         ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      pass through (Proportional)      ‚îÇ
     * Input ‚Üí ‚îÇ ‚Üí ‚îÇamplify‚îÇ ‚Üí ‚îÇdelay‚îÇ ‚Üí ‚öü sum up over time (Integral) ‚öû ‚Üí ‚îÇ ‚Üí Output
     *         ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      pass change  (Differential)      ‚îÇ
     *         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     * ```
     */
    class Control extends EventTarget {
        constructor(_name, _factor = 1, _type = 0 /* CONTROL_TYPE.PROPORTIONAL */, _delay = 0) {
            super();
            this.rateDispatchOutput = 0;
            this.valuePrevious = 0;
            this.outputBase = 0;
            this.outputTarget = 0;
            this.outputPrevious = 0;
            this.outputTargetPrevious = 0;
            this.factor = 0;
            this.time = FudgeCore.Time.game;
            this.timeValueDelay = 0;
            this.timeOutputTargetSet = 0;
            this.idTimer = undefined;
            this.dispatchOutput = (_eventOrValue) => {
                if (!this.active)
                    return;
                let timer = this.time.getTimer(this.idTimer);
                let output;
                if (typeof (_eventOrValue) == "number")
                    output = _eventOrValue;
                else
                    output = this.calculateOutput();
                let outputChanged = (output != this.outputPrevious);
                if (timer) {
                    timer.active = outputChanged;
                    if (!outputChanged)
                        return;
                }
                this.outputPrevious = output;
                let event = new CustomEvent("output" /* EVENT_CONTROL.OUTPUT */, {
                    detail: {
                        output: output
                    }
                });
                this.dispatchEvent(event);
            };
            this.factor = _factor;
            this.type = _type;
            this.active = true;
            this.name = _name;
            this.setDelay(_delay);
        }
        /**
         * Set the time-object to be used when calculating the output in {@link CONTROL_TYPE.INTEGRAL}
         */
        setTimebase(_time) {
            this.time = _time;
            this.calculateOutput();
        }
        /**
         * Feed an input value into this control and fire the events {@link EVENT_CONTROL.INPUT} and {@link EVENT_CONTROL.OUTPUT}
         */
        setInput(_input) {
            if (!this.active)
                return;
            this.outputBase = this.calculateOutput();
            this.valuePrevious = this.getValueDelayed();
            this.outputTarget = this.factor * _input;
            this.timeOutputTargetSet = this.time.get();
            if (this.type == 2 /* CONTROL_TYPE.DIFFERENTIAL */) {
                this.valuePrevious = this.outputTarget - this.outputTargetPrevious;
                this.outputTargetPrevious = this.outputTarget;
                this.outputTarget = 0;
            }
            this.dispatchEvent(new Event("input" /* EVENT_CONTROL.INPUT */));
            if (this.type == 2 /* CONTROL_TYPE.DIFFERENTIAL */)
                this.dispatchOutput(this.valuePrevious);
            else
                this.dispatchOutput(null);
        }
        /**
         * TODO: describe!
         */
        pulse(_input) {
            this.setInput(_input);
            this.setInput(0);
        }
        /**
         * Set the time to take for the internal linear dampening until the final ouput value is reached
         */
        setDelay(_time) {
            this.timeValueDelay = Math.max(0, _time);
        }
        /**
         * Set the number of output-events to dispatch per second.
         * At the default of 0, the control output must be polled and will only actively dispatched once each time input occurs and the output changes.
         */
        setRateDispatchOutput(_rateDispatchOutput = 0) {
            this.rateDispatchOutput = _rateDispatchOutput;
            this.time.deleteTimer(this.idTimer);
            this.idTimer = undefined;
            if (this.rateDispatchOutput)
                this.idTimer = this.time.setTimer(1000 / this.rateDispatchOutput, 0, this.dispatchOutput);
        }
        /**
         * Set the factor to multiply the input value given with {@link setInput} with
         */
        setFactor(_factor) {
            this.factor = _factor;
        }
        /**
         * Get the value from the output of this control
         */
        getOutput() {
            return this.calculateOutput();
        }
        /**
         * Calculates the output of this control
         */
        calculateOutput() {
            let output = 0;
            let value = this.getValueDelayed();
            switch (this.type) {
                case 1 /* CONTROL_TYPE.INTEGRAL */:
                    let timeCurrent = this.time.get();
                    let timeElapsedSinceInput = timeCurrent - this.timeOutputTargetSet;
                    output = this.outputBase;
                    if (this.timeValueDelay > 0) {
                        if (timeElapsedSinceInput < this.timeValueDelay) {
                            output += 0.5 * (this.valuePrevious + value) * timeElapsedSinceInput;
                            break;
                        }
                        else {
                            output += 0.5 * (this.valuePrevious + value) * this.timeValueDelay;
                            timeElapsedSinceInput -= this.timeValueDelay;
                        }
                    }
                    output += value * timeElapsedSinceInput;
                    // value += 0.5 * (this.inputPrevious - input) * this.timeInputDelay + input * timeElapsedSinceInput;
                    break;
                case 2 /* CONTROL_TYPE.DIFFERENTIAL */:
                case 0 /* CONTROL_TYPE.PROPORTIONAL */:
                default:
                    output = value;
                    break;
            }
            return output;
        }
        /**
         * calculates the output considering the time of the delay
         */
        getValueDelayed() {
            if (this.timeValueDelay > 0) {
                let timeElapsedSinceInput = this.time.get() - this.timeOutputTargetSet;
                if (timeElapsedSinceInput < this.timeValueDelay)
                    return this.valuePrevious + (this.outputTarget - this.valuePrevious) * timeElapsedSinceInput / this.timeValueDelay;
            }
            return this.outputTarget;
        }
    }
    FudgeCore.Control = Control;
})(FudgeCore || (FudgeCore = {}));
///<reference path="Control.ts"/>
var FudgeCore;
///<reference path="Control.ts"/>
(function (FudgeCore) {
    /**
     * Handles multiple controls as inputs and creates an output from that.
     * As a subclass of {@link Control}, axis calculates the ouput summing up the inputs and processing the result using its own settings.
     * Dispatches {@link EVENT_CONTROL.OUTPUT} and {@link EVENT_CONTROL.INPUT} when one of the controls dispatches them.
     * ```text
     *           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     *           ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                 ‚îÇ
     *   Input ‚Üí ‚îÇ ‚îÇcontrol‚îÇ\                                ‚îÇ
     *           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò \                               ‚îÇ
     *           ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  \‚îå‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
     *   Input ‚Üí ‚îÇ ‚îÇcontrol‚îÇ---‚îÇsum‚îÇ ‚Üí ‚îÇinternal control ‚îÇ ‚Üí ‚îÇ ‚Üí Output
     *           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  /‚îî‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
     *           ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê /                               ‚îÇ
     *   Input ‚Üí ‚îÇ ‚îÇcontrol‚îÇ/                                ‚îÇ
     *           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                 ‚îÇ
     *           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     * ```
     */
    class Axis extends FudgeCore.Control {
        constructor() {
            super(...arguments);
            this.controls = new Map();
            this.sumPrevious = 0;
            this.hndOutputEvent = (_event) => {
                if (!this.active)
                    return;
                let control = _event.target;
                let event = new CustomEvent("output" /* EVENT_CONTROL.OUTPUT */, {
                    detail: {
                        control: control,
                        input: _event.detail.output,
                        output: this.getOutput()
                    }
                });
                this.dispatchEvent(event);
            };
            this.hndInputEvent = (_event) => {
                if (!this.active)
                    return;
                let event = new Event("input" /* EVENT_CONTROL.INPUT */, _event);
                this.dispatchEvent(event);
            };
        }
        /**
         * Add the control given to the list of controls feeding into this axis
         */
        addControl(_control) {
            this.controls.set(_control.name, _control);
            _control.addEventListener("input" /* EVENT_CONTROL.INPUT */, this.hndInputEvent);
            _control.addEventListener("output" /* EVENT_CONTROL.OUTPUT */, this.hndOutputEvent);
        }
        /**
         * Returns the control with the given name
         */
        getControl(_name) {
            return this.controls.get(_name);
        }
        /**
         * Removes the control with the given name
         */
        removeControl(_name) {
            let control = this.getControl(_name);
            if (control) {
                control.removeEventListener("input" /* EVENT_CONTROL.INPUT */, this.hndInputEvent);
                control.removeEventListener("output" /* EVENT_CONTROL.OUTPUT */, this.hndOutputEvent);
                this.controls.delete(_name);
            }
        }
        /**
         * Returns the value of this axis after summing up all inputs and processing the sum according to the axis' settings
         */
        getOutput() {
            let sumInput = 0;
            for (let control of this.controls) {
                if (control[1].active)
                    sumInput += control[1].getOutput();
            }
            if (sumInput != this.sumPrevious)
                super.setInput(sumInput);
            this.sumPrevious = sumInput;
            return super.getOutput();
        }
    }
    FudgeCore.Axis = Axis;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Collects the keys pressed on the keyboard and stores their status.
     */
    class Keyboard {
        static { this.keysPressed = Keyboard.initialize(); }
        // private static code_en: Object;
        /**
         * Returns true if one of the given keys is is currently being pressed.
         */
        static isPressedOne(_keys) {
            for (let code of _keys) {
                if (Keyboard.keysPressed[code])
                    return true;
            }
            return false;
        }
        /**
         * Returns true if all of the given keys are currently being pressed
         */
        static isPressedCombo(_keys) {
            for (let code of _keys) {
                if (!Keyboard.keysPressed[code])
                    return false;
            }
            return true;
        }
        /**
         * Returns the value given as _active if one or, when _combo is true, all of the given keys are pressed.
         * Returns the value given as _inactive if not.
         */
        static mapToValue(_active, _inactive, _keys, _combo = false) {
            if (!_combo && Keyboard.isPressedOne(_keys))
                return _active;
            if (Keyboard.isPressedCombo(_keys))
                return _active;
            return _inactive;
        }
        /**
         * Returns a balanced ternary value (either -1, 0 or 1)
         * according to the match of the keys currently being pressed and the lists of keys given
         */
        static mapToTrit(_positive, _negative) {
            return Keyboard.mapToValue(-1, 0, _negative) + Keyboard.mapToValue(1, 0, _positive);
        }
        // public static locale(_keyboard: Object): void {
        //   if (!Keyboard.code_en) {
        //     // save original keyboard codes to be able to switch back later
        //     Keyboard.code_en = {};
        //     Object.assign(Keyboard.code_en, KEYBOARD_CODE);
        //   }
        //   for (let key in _keyboard) {
        //     let value: string = Reflect.get(_keyboard, key);
        //     for (let original in KEYBOARD_CODE)
        //       if (Reflect.get(KEYBOARD_CODE, original) == value)
        //         // remove original key the yields the value
        //         Reflect.deleteProperty(KEYBOARD_CODE, original);
        //     // add new key to yield that value
        //     Reflect.set(KEYBOARD_CODE, key, value);
        //   }
        // }
        static initialize() {
            let store = {};
            document.addEventListener("keydown", Keyboard.hndKeyInteraction);
            document.addEventListener("keyup", Keyboard.hndKeyInteraction);
            return store;
        }
        static hndKeyInteraction(_event) {
            Keyboard.keysPressed[_event.code] = (_event.type == "keydown");
        }
    }
    FudgeCore.Keyboard = Keyboard;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Routing to the alert box
     */
    class DebugAlert extends FudgeCore.DebugTarget {
        static { this.delegates = {
            [FudgeCore.DEBUG_FILTER.INFO]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.INFO]),
            [FudgeCore.DEBUG_FILTER.LOG]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.LOG]),
            [FudgeCore.DEBUG_FILTER.WARN]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.WARN]),
            [FudgeCore.DEBUG_FILTER.ERROR]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.ERROR]),
            [FudgeCore.DEBUG_FILTER.FUDGE]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.FUDGE]),
            [FudgeCore.DEBUG_FILTER.SOURCE]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.SOURCE])
        }; }
        /**
         * Returns a delegate-function expecting a message to log.
         */
        static createDelegate(_headline) {
            let delegate = function (_message, ..._args) {
                let args = _args.map(_arg => _arg.toString());
                let out = _headline + " " + FudgeCore.DebugTarget.mergeArguments(_message, args);
                alert(out);
            };
            return delegate;
        }
    }
    FudgeCore.DebugAlert = DebugAlert;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Routing to a HTMLDialogElement
     */
    class DebugDialog extends FudgeCore.DebugTarget {
    }
    FudgeCore.DebugDialog = DebugDialog;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Route to an HTMLTextArea, may be obsolete when using HTMLDialogElement
     */
    class DebugTextArea extends FudgeCore.DebugTarget {
        static { this.textArea = document.createElement("textarea"); }
        static { this.autoScroll = true; }
        static { this.delegates = {
            [FudgeCore.DEBUG_FILTER.INFO]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.INFO]),
            [FudgeCore.DEBUG_FILTER.LOG]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.LOG]),
            [FudgeCore.DEBUG_FILTER.WARN]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.WARN]),
            [FudgeCore.DEBUG_FILTER.ERROR]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.ERROR]),
            [FudgeCore.DEBUG_FILTER.FUDGE]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.FUDGE]),
            [FudgeCore.DEBUG_FILTER.CLEAR]: DebugTextArea.clear,
            [FudgeCore.DEBUG_FILTER.GROUP]: DebugTextArea.group,
            [FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED]: DebugTextArea.group,
            [FudgeCore.DEBUG_FILTER.GROUPEND]: DebugTextArea.groupEnd,
            [FudgeCore.DEBUG_FILTER.SOURCE]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.SOURCE])
        }; }
        static { this.groups = []; }
        /**
         * Clears the text area and the groups
         */
        static clear() {
            DebugTextArea.textArea.textContent = "";
            DebugTextArea.groups = [];
        }
        /**
         * Begins a new group with the given name
         */
        static group(_name) {
            DebugTextArea.print("‚ñº " + _name);
            DebugTextArea.groups.push(_name);
        }
        /**
         * Ends the last group
         */
        static groupEnd() {
            DebugTextArea.groups.pop();
        }
        /**
         * Returns a delegate-function expecting a message to log.
         */
        static createDelegate(_headline) {
            let delegate = function (_message, ..._args) {
                DebugTextArea.print(_headline + " " + FudgeCore.DebugTarget.mergeArguments(_message, _args));
            };
            return delegate;
        }
        static getIndentation(_level) {
            let result = "";
            for (let i = 0; i < _level; i++)
                result += "| ";
            return result;
        }
        static print(_text) {
            DebugTextArea.textArea.textContent += DebugTextArea.getIndentation(DebugTextArea.groups.length) + _text + "\n";
            if (DebugTextArea.autoScroll)
                DebugTextArea.textArea.scrollTop = DebugTextArea.textArea.scrollHeight;
        }
    }
    FudgeCore.DebugTextArea = DebugTextArea;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The codes sent from a standard english keyboard layout
     */
    let KEYBOARD_CODE;
    (function (KEYBOARD_CODE) {
        KEYBOARD_CODE["A"] = "KeyA";
        KEYBOARD_CODE["B"] = "KeyB";
        KEYBOARD_CODE["C"] = "KeyC";
        KEYBOARD_CODE["D"] = "KeyD";
        KEYBOARD_CODE["E"] = "KeyE";
        KEYBOARD_CODE["F"] = "KeyF";
        KEYBOARD_CODE["G"] = "KeyG";
        KEYBOARD_CODE["H"] = "KeyH";
        KEYBOARD_CODE["I"] = "KeyI";
        KEYBOARD_CODE["J"] = "KeyJ";
        KEYBOARD_CODE["K"] = "KeyK";
        KEYBOARD_CODE["L"] = "KeyL";
        KEYBOARD_CODE["M"] = "KeyM";
        KEYBOARD_CODE["N"] = "KeyN";
        KEYBOARD_CODE["O"] = "KeyO";
        KEYBOARD_CODE["P"] = "KeyP";
        KEYBOARD_CODE["Q"] = "KeyQ";
        KEYBOARD_CODE["R"] = "KeyR";
        KEYBOARD_CODE["S"] = "KeyS";
        KEYBOARD_CODE["T"] = "KeyT";
        KEYBOARD_CODE["U"] = "KeyU";
        KEYBOARD_CODE["V"] = "KeyV";
        KEYBOARD_CODE["W"] = "KeyW";
        KEYBOARD_CODE["X"] = "KeyX";
        KEYBOARD_CODE["Y"] = "KeyY";
        KEYBOARD_CODE["Z"] = "KeyZ";
        KEYBOARD_CODE["ESC"] = "Escape";
        KEYBOARD_CODE["ZERO"] = "Digit0";
        KEYBOARD_CODE["ONE"] = "Digit1";
        KEYBOARD_CODE["TWO"] = "Digit2";
        KEYBOARD_CODE["THREE"] = "Digit3";
        KEYBOARD_CODE["FOUR"] = "Digit4";
        KEYBOARD_CODE["FIVE"] = "Digit5";
        KEYBOARD_CODE["SIX"] = "Digit6";
        KEYBOARD_CODE["SEVEN"] = "Digit7";
        KEYBOARD_CODE["EIGHT"] = "Digit8";
        KEYBOARD_CODE["NINE"] = "Digit9";
        KEYBOARD_CODE["MINUS"] = "Minus";
        KEYBOARD_CODE["EQUAL"] = "Equal";
        KEYBOARD_CODE["BACKSPACE"] = "Backspace";
        KEYBOARD_CODE["TABULATOR"] = "Tab";
        KEYBOARD_CODE["BRACKET_LEFT"] = "BracketLeft";
        KEYBOARD_CODE["BRACKET_RIGHT"] = "BracketRight";
        KEYBOARD_CODE["ENTER"] = "Enter";
        KEYBOARD_CODE["CTRL_LEFT"] = "ControlLeft";
        KEYBOARD_CODE["SEMICOLON"] = "Semicolon";
        KEYBOARD_CODE["QUOTE"] = "Quote";
        KEYBOARD_CODE["BACK_QUOTE"] = "Backquote";
        KEYBOARD_CODE["SHIFT_LEFT"] = "ShiftLeft";
        KEYBOARD_CODE["BACKSLASH"] = "Backslash";
        KEYBOARD_CODE["COMMA"] = "Comma";
        KEYBOARD_CODE["PERIOD"] = "Period";
        KEYBOARD_CODE["SLASH"] = "Slash";
        KEYBOARD_CODE["SHIFT_RIGHT"] = "ShiftRight";
        KEYBOARD_CODE["NUMPAD_MULTIPLY"] = "NumpadMultiply";
        KEYBOARD_CODE["ALT_LEFT"] = "AltLeft";
        KEYBOARD_CODE["SPACE"] = "Space";
        KEYBOARD_CODE["CAPS_LOCK"] = "CapsLock";
        KEYBOARD_CODE["F1"] = "F1";
        KEYBOARD_CODE["F2"] = "F2";
        KEYBOARD_CODE["F3"] = "F3";
        KEYBOARD_CODE["F4"] = "F4";
        KEYBOARD_CODE["F5"] = "F5";
        KEYBOARD_CODE["F6"] = "F6";
        KEYBOARD_CODE["F7"] = "F7";
        KEYBOARD_CODE["F8"] = "F8";
        KEYBOARD_CODE["F9"] = "F9";
        KEYBOARD_CODE["F10"] = "F10";
        KEYBOARD_CODE["PAUSE"] = "Pause";
        KEYBOARD_CODE["SCROLL_LOCK"] = "ScrollLock";
        KEYBOARD_CODE["NUMPAD7"] = "Numpad7";
        KEYBOARD_CODE["NUMPAD8"] = "Numpad8";
        KEYBOARD_CODE["NUMPAD9"] = "Numpad9";
        KEYBOARD_CODE["NUMPAD_SUBTRACT"] = "NumpadSubtract";
        KEYBOARD_CODE["NUMPAD4"] = "Numpad4";
        KEYBOARD_CODE["NUMPAD5"] = "Numpad5";
        KEYBOARD_CODE["NUMPAD6"] = "Numpad6";
        KEYBOARD_CODE["NUMPAD_ADD"] = "NumpadAdd";
        KEYBOARD_CODE["NUMPAD1"] = "Numpad1";
        KEYBOARD_CODE["NUMPAD2"] = "Numpad2";
        KEYBOARD_CODE["NUMPAD3"] = "Numpad3";
        KEYBOARD_CODE["NUMPAD0"] = "Numpad0";
        KEYBOARD_CODE["NUMPAD_DECIMAL"] = "NumpadDecimal";
        KEYBOARD_CODE["PRINT_SCREEN"] = "PrintScreen";
        KEYBOARD_CODE["INTL_BACK_SLASH"] = "IntlBackSlash";
        KEYBOARD_CODE["F11"] = "F11";
        KEYBOARD_CODE["F12"] = "F12";
        KEYBOARD_CODE["NUMPAD_EQUAL"] = "NumpadEqual";
        KEYBOARD_CODE["F13"] = "F13";
        KEYBOARD_CODE["F14"] = "F14";
        KEYBOARD_CODE["F15"] = "F15";
        KEYBOARD_CODE["F16"] = "F16";
        KEYBOARD_CODE["F17"] = "F17";
        KEYBOARD_CODE["F18"] = "F18";
        KEYBOARD_CODE["F19"] = "F19";
        KEYBOARD_CODE["F20"] = "F20";
        KEYBOARD_CODE["F21"] = "F21";
        KEYBOARD_CODE["F22"] = "F22";
        KEYBOARD_CODE["F23"] = "F23";
        KEYBOARD_CODE["F24"] = "F24";
        KEYBOARD_CODE["KANA_MODE"] = "KanaMode";
        KEYBOARD_CODE["LANG2"] = "Lang2";
        KEYBOARD_CODE["LANG1"] = "Lang1";
        KEYBOARD_CODE["INTL_RO"] = "IntlRo";
        KEYBOARD_CODE["CONVERT"] = "Convert";
        KEYBOARD_CODE["NON_CONVERT"] = "NonConvert";
        KEYBOARD_CODE["INTL_YEN"] = "IntlYen";
        KEYBOARD_CODE["NUMPAD_COMMA"] = "NumpadComma";
        KEYBOARD_CODE["UNDO"] = "Undo";
        KEYBOARD_CODE["PASTE"] = "Paste";
        KEYBOARD_CODE["MEDIA_TRACK_PREVIOUS"] = "MediaTrackPrevious";
        KEYBOARD_CODE["CUT"] = "Cut";
        KEYBOARD_CODE["COPY"] = "Copy";
        KEYBOARD_CODE["MEDIA_TRACK_NEXT"] = "MediaTrackNext";
        KEYBOARD_CODE["NUMPAD_ENTER"] = "NumpadEnter";
        KEYBOARD_CODE["CTRL_RIGHT"] = "ControlRight";
        KEYBOARD_CODE["AUDIO_VOLUME_MUTE"] = "AudioVolumeMute";
        KEYBOARD_CODE["LAUNCH_APP2"] = "LaunchApp2";
        KEYBOARD_CODE["MEDIA_PLAY_PAUSE"] = "MediaPlayPause";
        KEYBOARD_CODE["MEDIA_STOP"] = "MediaStop";
        KEYBOARD_CODE["EJECT"] = "Eject";
        KEYBOARD_CODE["AUDIO_VOLUME_DOWN"] = "AudioVolumeDown";
        KEYBOARD_CODE["VOLUME_DOWN"] = "VolumeDown";
        KEYBOARD_CODE["AUDIO_VOLUME_UP"] = "AudioVolumeUp";
        KEYBOARD_CODE["VOLUME_UP"] = "VolumeUp";
        KEYBOARD_CODE["BROWSER_HOME"] = "BrowserHome";
        KEYBOARD_CODE["NUMPAD_DIVIDE"] = "NumpadDivide";
        KEYBOARD_CODE["ALT_RIGHT"] = "AltRight";
        KEYBOARD_CODE["HELP"] = "Help";
        KEYBOARD_CODE["NUM_LOCK"] = "NumLock";
        KEYBOARD_CODE["HOME"] = "Home";
        KEYBOARD_CODE["ARROW_UP"] = "ArrowUp";
        KEYBOARD_CODE["ARROW_RIGHT"] = "ArrowRight";
        KEYBOARD_CODE["ARROW_DOWN"] = "ArrowDown";
        KEYBOARD_CODE["ARROW_LEFT"] = "ArrowLeft";
        KEYBOARD_CODE["END"] = "End";
        KEYBOARD_CODE["PAGE_UP"] = "PageUp";
        KEYBOARD_CODE["PAGE_DOWN"] = "PageDown";
        KEYBOARD_CODE["INSERT"] = "Insert";
        KEYBOARD_CODE["DELETE"] = "Delete";
        KEYBOARD_CODE["META_LEFT"] = "Meta_Left";
        KEYBOARD_CODE["OS_LEFT"] = "OSLeft";
        KEYBOARD_CODE["META_RIGHT"] = "MetaRight";
        KEYBOARD_CODE["OS_RIGHT"] = "OSRight";
        KEYBOARD_CODE["CONTEXT_MENU"] = "ContextMenu";
        KEYBOARD_CODE["POWER"] = "Power";
        KEYBOARD_CODE["BROWSER_SEARCH"] = "BrowserSearch";
        KEYBOARD_CODE["BROWSER_FAVORITES"] = "BrowserFavorites";
        KEYBOARD_CODE["BROWSER_REFRESH"] = "BrowserRefresh";
        KEYBOARD_CODE["BROWSER_STOP"] = "BrowserStop";
        KEYBOARD_CODE["BROWSER_FORWARD"] = "BrowserForward";
        KEYBOARD_CODE["BROWSER_BACK"] = "BrowserBack";
        KEYBOARD_CODE["LAUNCH_APP1"] = "LaunchApp1";
        KEYBOARD_CODE["LAUNCH_MAIL"] = "LaunchMail";
        KEYBOARD_CODE["LAUNCH_MEDIA_PLAYER"] = "LaunchMediaPlayer";
        //mac brings this buttton
        KEYBOARD_CODE["FN"] = "Fn";
        //Linux brings these
        KEYBOARD_CODE["AGAIN"] = "Again";
        KEYBOARD_CODE["PROPS"] = "Props";
        KEYBOARD_CODE["SELECT"] = "Select";
        KEYBOARD_CODE["OPEN"] = "Open";
        KEYBOARD_CODE["FIND"] = "Find";
        KEYBOARD_CODE["WAKE_UP"] = "WakeUp";
        KEYBOARD_CODE["NUMPAD_PARENT_LEFT"] = "NumpadParentLeft";
        KEYBOARD_CODE["NUMPAD_PARENT_RIGHT"] = "NumpadParentRight";
        //android
        KEYBOARD_CODE["SLEEP"] = "Sleep";
    })(KEYBOARD_CODE = FudgeCore.KEYBOARD_CODE || (FudgeCore.KEYBOARD_CODE = {}));
    let KEYBOARD_CODE_DE;
    (function (KEYBOARD_CODE_DE) {
        KEYBOARD_CODE_DE["Z"] = "KeyY";
        KEYBOARD_CODE_DE["Y"] = "KeyZ";
        KEYBOARD_CODE_DE["\u00D6"] = "Semicolon";
        KEYBOARD_CODE_DE["\u00C4"] = "Quote";
        KEYBOARD_CODE_DE["\u00DC"] = "BracketLeft";
        KEYBOARD_CODE_DE["HASH"] = "Backslash";
        KEYBOARD_CODE_DE["PLUS"] = "BracketRight";
        // eslint-disable-next-line 
        KEYBOARD_CODE_DE["\u00DF"] = "Minus";
        KEYBOARD_CODE_DE["ACUTE"] = "Equal";
        KEYBOARD_CODE_DE["LESS_THAN"] = "IntlBackSlash";
        KEYBOARD_CODE_DE["MINUS"] = "Slash";
    })(KEYBOARD_CODE_DE = FudgeCore.KEYBOARD_CODE_DE || (FudgeCore.KEYBOARD_CODE_DE = {}));
    /*
    Firefox can't make use of those buttons and Combinations:
    SINGELE_BUTTONS:
     Druck,
    COMBINATIONS:
     Shift + F10, Shift + Numpad5,
     CTRL + q, CTRL + F4,
     ALT + F1, ALT + F2, ALT + F3, ALT + F7, ALT + F8, ALT + F10
    Opera won't do good with these Buttons and combinations:
    SINGLE_BUTTONS:
     Float32Array, F11, ALT,
    COMBINATIONS:
     CTRL + q, CTRL + t, CTRL + h, CTRL + g, CTRL + n, CTRL + f
     ALT + F1, ALT + F2, ALT + F4, ALT + F5, ALT + F6, ALT + F7, ALT + F8, ALT + F10
     */
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * An event that represents a call from a {@link Timer}
     */
    class EventTimer {
        constructor(_timer, ..._arguments) {
            this.type = "\u0192lapse" /* EVENT_TIMER.CALL */;
            this.firstCall = true;
            this.lastCall = false;
            this.target = _timer;
            this.arguments = _arguments;
            this.firstCall = true;
        }
    }
    FudgeCore.EventTimer = EventTimer;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Custom touch events
     */
    let EVENT_TOUCH;
    (function (EVENT_TOUCH) {
        /** custom event fired in addition to the standard touchmove, details offset to starting touch */
        EVENT_TOUCH["MOVE"] = "touchMove";
        /** custom event fired when the touches haven't moved outside of the tap radius */
        EVENT_TOUCH["TAP"] = "touchTap";
        /** custom event fired when the touches have moved outside of the notch radius, details offset and cardinal direction */
        EVENT_TOUCH["NOTCH"] = "touchNotch";
        /** custom event fired when the touches haven't moved outside of the tap radius for some time */
        EVENT_TOUCH["LONG"] = "touchLong";
        /** custom event fired when two taps were detected in short succession */
        EVENT_TOUCH["DOUBLE"] = "touchDouble";
        /** custom event fired when the distance between the only two touches changes beyond a tolerance */
        EVENT_TOUCH["PINCH"] = "touchPinch";
        /** custom event not implemented yet */
        EVENT_TOUCH["ROTATE"] = "touchRotate";
    })(EVENT_TOUCH = FudgeCore.EVENT_TOUCH || (FudgeCore.EVENT_TOUCH = {}));
    /**
     * Dispatches CustomTouchEvents to the EventTarget given with the constructor.
     * When using touch events, make sure to set `touch-action: none` in CSS
     * @author Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class TouchEventDispatcher {
        constructor(_target, _radiusTap = 5, _radiusNotch = 50, _timeDouble = 200, _timerLong = 1000) {
            this.posStart = FudgeCore.Vector2.ZERO();
            this.posNotch = FudgeCore.Vector2.ZERO();
            this.posPrev = FudgeCore.Vector2.ZERO();
            this.moved = false;
            this.time = new FudgeCore.Time();
            this.pinchDistance = 0;
            this.pinchTolerance = 1;
            this.hndEvent = (_event) => {
                _event.preventDefault();
                let touchFirst = _event.touches[0];
                let position = this.calcAveragePosition(_event.touches); //new Vector2(touchFirst?.clientX, touchFirst?.clientY);
                let offset;
                switch (_event.type) {
                    case "touchstart":
                        this.moved = false;
                        this.startGesture(position);
                        if (_event.touches.length == 2) {
                            // reset pinch
                            let pinch = new FudgeCore.Vector2(_event.touches[1].clientX - touchFirst.clientX, _event.touches[1].clientY - touchFirst.clientY);
                            this.pinchDistance = pinch.magnitude;
                        }
                        let dispatchLong = (_eventTimer) => {
                            this.moved = true;
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.LONG, {
                                bubbles: true, detail: { position: position, touches: _event.touches }
                            }));
                        };
                        this.timerLong?.clear();
                        this.timerLong = new FudgeCore.Timer(this.time, this.timeLong, 1, dispatchLong);
                        break;
                    case "touchend":
                        this.timerLong?.clear();
                        if (_event.touches.length > 0) {
                            // still touches active
                            this.startGesture(position);
                            break;
                        }
                        let dispatchTap = (_eventTimer) => {
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.TAP, {
                                bubbles: true, detail: { position: position, touches: _event.touches }
                            }));
                        };
                        // check if there was a tap before and timer is still running -> double tap
                        if (this.timerDouble?.active) {
                            this.timerDouble.clear();
                            // this.timer = undefined;
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.DOUBLE, {
                                bubbles: true, detail: { position: position, touches: _event.touches }
                            }));
                        }
                        else if (!this.moved)
                            // check if there was movement, otherwise set timer to fire tap
                            this.timerDouble = new FudgeCore.Timer(this.time, this.timeDouble, 1, dispatchTap);
                        break;
                    case "touchmove":
                        this.detectPinch(_event, position);
                        offset = FudgeCore.Vector2.DIFFERENCE(this.posPrev, this.posStart);
                        this.moved ||= (offset.magnitude < this.radiusTap); // remember that touch moved over tap radius
                        let movement = FudgeCore.Vector2.DIFFERENCE(position, this.posPrev);
                        this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.MOVE, {
                            bubbles: true, detail: { position: position, touches: _event.touches, offset: offset, movement: movement }
                        }));
                        // fire notch when touches moved out of notch radius and reset notch
                        offset = FudgeCore.Vector2.DIFFERENCE(position, this.posNotch);
                        if (offset.magnitude > this.radiusNotch) {
                            let cardinal = Math.abs(offset.x) > Math.abs(offset.y) ?
                                FudgeCore.Vector2.X(offset.x < 0 ? -1 : 1) :
                                FudgeCore.Vector2.Y(offset.y < 0 ? -1 : 1);
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.NOTCH, {
                                bubbles: true, detail: { position: position, touches: _event.touches, offset: offset, cardinal: cardinal, movement: movement }
                            }));
                            this.posNotch = position;
                        }
                        //TODO: pinch, rotate...
                        break;
                    default:
                        break;
                }
                this.posPrev.set(position.x, position.y);
            };
            this.detectPinch = (_event, _position) => {
                if (_event.touches.length != 2)
                    return;
                let t = _event.touches;
                let pinch = new FudgeCore.Vector2(t[1].clientX - t[0].clientX, t[1].clientY - t[0].clientY);
                let pinchDistance = pinch.magnitude;
                let pinchDelta = pinchDistance - this.pinchDistance;
                if (Math.abs(pinchDelta) > this.pinchTolerance)
                    this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.PINCH, {
                        bubbles: true, detail: { position: _position, touches: _event.touches, pinch: pinch, pinchDelta: pinchDelta }
                    }));
                this.pinchDistance = pinchDistance;
            };
            this.target = _target;
            this.radiusTap = _radiusTap;
            this.radiusNotch = _radiusNotch;
            this.timeDouble = _timeDouble;
            this.timeLong = _timerLong;
            this.activate(true);
        }
        /**
         * De-/Activates the dispatch of CustomTouchEvents
         */
        activate(_on) {
            if (_on) {
                this.target.addEventListener("touchstart", this.hndEvent);
                this.target.addEventListener("touchend", this.hndEvent);
                this.target.addEventListener("touchmove", this.hndEvent);
                return;
            }
            this.target.removeEventListener("touchstart", this.hndEvent);
            this.target.removeEventListener("touchend", this.hndEvent);
            this.target.removeEventListener("touchmove", this.hndEvent);
        }
        startGesture(_position) {
            this.posNotch.set(_position.x, _position.y);
            this.posStart.set(_position.x, _position.y);
        }
        calcAveragePosition(_touches) {
            let average = FudgeCore.Vector2.ZERO();
            for (let touch of _touches) {
                average.x += touch.clientX;
                average.y += touch.clientY;
            }
            average.scale(1 / _touches.length);
            return average;
        }
    }
    FudgeCore.TouchEventDispatcher = TouchEventDispatcher;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A node managed by {@link Project} that functions as a template for {@link GraphInstance}s
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Resource
     */
    class Graph extends FudgeCore.Node {
        // #syncing: boolean = false;
        constructor(_name = "Graph") {
            super(_name);
            this.idResource = undefined;
            this.hndMutate = async (_event) => {
                // TODO: if path contains a graph instance below this, don't dispatch!
                // let path: Node[] = Reflect.get(_event, "path");
                // for (let node of path)
                //   if (node instanceof GraphInstance && node.idSource != this.idResource)
                //     return;
                // console.log("Graph mutates", this.name);
                // this.#syncing = true;
                _event.detail.path = Reflect.get(_event, "path"); // save path to target in detail
                this.dispatchEvent(new CustomEvent("mutateGraph" /* EVENT.MUTATE_GRAPH */, { detail: _event.detail }));
                this.dispatchEvent(new CustomEvent("graphMutated" /* EVENT.GRAPH_MUTATED */, { detail: _event.detail }));
                // this.dispatchEvent(new Event(EVENT.MUTATE_INSTANCE));
                // this.#syncing = false;
            };
            this.addEventListener("mutate" /* EVENT.MUTATE */, this.hndMutate);
        }
        get type() {
            return this.constructor.name;
        }
        serialize() {
            let serialization = super.serialize();
            serialization.idResource = this.idResource;
            serialization.type = this.type;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            FudgeCore.Project.register(this, _serialization.idResource);
            await FudgeCore.Project.resyncGraphInstances(this);
            this.broadcastEvent(new Event("graphDeserialized" /* EVENT.GRAPH_DESERIALIZED */));
            console.log("Deserialized", this.name);
            return this;
        }
    }
    FudgeCore.Graph = Graph;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Graph} loaded from a glTF-File.
     * @authors Jonas Plotzky, HFU, 2024
     */
    class GraphGLTF extends FudgeCore.mixinSerializableResourceExternal(FudgeCore.Graph) {
        async load(_url = this.url, _name = this.name) {
            this.url = _url;
            this.name = _name;
            return FudgeCore.GLTFLoader.loadResource(this);
        }
        serialize() {
            const serializationExternal = super.serialize();
            const serializationNode = FudgeCore.Node.prototype.serialize.call(this); // this is wasteful as we only need the components deserialized
            delete serializationNode.components[FudgeCore.ComponentSkeleton.name];
            delete serializationNode.children;
            return { ...serializationNode, ...serializationExternal };
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            await FudgeCore.Graph.prototype.deserialize.call(this, _serialization);
            return this;
        }
    }
    FudgeCore.GraphGLTF = GraphGLTF;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // enum SYNC {
    //   READY, GRAPH_SYNCED, GRAPH_DONE, INSTANCE
    // }
    /**
     * An instance of a {@link Graph}.
     * This node keeps a reference to its resource an can thus optimize serialization
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Resource
     */
    class GraphInstance extends FudgeCore.Node {
        /** id of the resource that instance was created from */
        // TODO: examine, if this should be a direct reference to the Graph, instead of the id
        static { this.count = 0; }
        #idSource;
        // #sync: SYNC = SYNC.READY;
        #deserializeFromSource;
        /**
         * This constructor alone will not create a reconstruction, but only save the id.
         * To create an instance of the graph, call reset on this or set with a graph as parameter.
         * Prefer Project.createGraphInstance(_graph).
         */
        constructor(_graph) {
            super("GraphInstance");
            this.#idSource = undefined;
            // #sync: SYNC = SYNC.READY;
            this.#deserializeFromSource = true;
            /**
             * Source graph mutated, reflect mutation in this instance
             */
            this.hndMutationGraph = async (_event) => {
                // console.log("Reflect Graph-Mutation to Instance", SYNC[this.#sync], (<Graph>_event.currentTarget).name, this.getPath().map(_node => _node.name));
                // if (this.#sync != SYNC.READY) {
                //   // console.log("Sync aborted, switch to ready");
                //   this.#sync = SYNC.READY;
                //   return;
                // }
                if (this.isFiltered())
                    return;
                // this.#sync = SYNC.GRAPH_SYNCED; // do not sync again, since mutation is already a synchronization
                await this.reflectMutation(_event, _event.currentTarget, this, _event.detail.path);
                this.dispatchEvent(new Event("mutateGraphDone" /* EVENT.MUTATE_INSTANCE */, { bubbles: true }));
            };
            /**
             * This instance mutated, reflect mutation in source graph
             */
            this.hndMutationInstance = async (_event) => {
                // console.log("Reflect Instance-Mutation to Graph", SYNC[this.#sync], this.getPath().map(_node => _node.name), this.get().name);
                // if (this.#sync != SYNC.READY) {
                //   // console.log("Sync aborted, switch to ready");
                //   this.#sync = SYNC.READY;
                //   return;
                // }
                // if (_event.target instanceof GraphInstance && _event.target != this) {
                //   // console.log("Sync aborted, target already synced");
                //   return;
                // }
                if (this.isFiltered())
                    return;
                // this.#sync = SYNC.INSTANCE; // do not sync again, since mutation is already a synchronization
                await this.reflectMutation(_event, this, this.get(), Reflect.get(_event, "path"));
                this.get().dispatchEvent(new CustomEvent("mutate" /* EVENT.MUTATE */, { detail: _event.detail }));
            };
            this.addEventListener("mutate" /* EVENT.MUTATE */, this.hndMutationInstance);
            if (!_graph)
                return;
            this.#idSource = _graph.idResource;
        }
        get idSource() {
            return this.#idSource;
        }
        /**
         * Recreate this node from the {@link Graph} referenced
         */
        async reset() {
            let resource = await FudgeCore.Project.getResource(this.#idSource);
            await this.set(resource);
        }
        //TODO: optimize using the referenced Graph, serialize/deserialize only the differences
        serialize() {
            let filter = this.getComponent(FudgeCore.ComponentGraphFilter);
            let serialization = {};
            if (filter && filter.isActive) { // if graph synchronisation is unfiltered, knowing the source is sufficient for serialization
                serialization = super.serialize();
                let graph = this.get();
                if (graph instanceof FudgeCore.GraphGLTF) { // like for the GraphGLTF: children and components loaded from gltf must never be serialized
                    delete serialization.components[FudgeCore.ComponentSkeleton.name];
                    delete serialization.children;
                    serialization.url = graph.url;
                }
            }
            else {
                serialization.deserializeFromSource = true;
            }
            serialization.idSource = this.#idSource;
            return serialization;
        }
        async deserialize(_serialization) {
            this.#idSource = _serialization.idSource ?? _serialization.idResource;
            if (!_serialization.deserializeFromSource) {
                let graph = await FudgeCore.Project.getResource(this.#idSource);
                if (graph instanceof FudgeCore.GraphGLTF)
                    await FudgeCore.GLTFLoader.loadResource(this, _serialization.url);
                await super.deserialize(_serialization); // instance is deserialized from individual data
                this.#deserializeFromSource = false;
            }
            let graph = this.get();
            if (graph)
                // if (_serialization.deserializeFromSource) // no components-> assume synchronized GraphInstance
                //   await this.set(graph); // recreate complete instance from source graph
                // else {
                await this.connectToGraph(); // otherwise just connect
            // }
            else {
                console.log("Register for resync", _serialization.name, this.name);
                FudgeCore.Project.registerGraphInstanceForResync(this);
            }
            return this;
        }
        /**
         * Connects this graph instance to the graph referenced.
         */
        async connectToGraph() {
            let graph = this.get();
            if (this.#deserializeFromSource)
                await this.set(graph);
        }
        /**
         * Set this node to be a recreation of the {@link Graph} given
         */
        async set(_graph) {
            this.#idSource = _graph.idResource;
            let currentGraph = this.get();
            if (currentGraph) {
                //@ts-ignore
                // console.log("Before Remove", currentGraph.name, this.name, currentGraph.listeners);
                currentGraph.removeEventListener("mutateGraph" /* EVENT.MUTATE_GRAPH */, this.hndMutationGraph);
                //@ts-ignore
                // console.log("After Remove", currentGraph.name, this.name, currentGraph.listeners);
            }
            // TODO: examine, if the serialization should be stored in the Graph for optimization <- also useful for sync with instances
            let serialization = FudgeCore.Serializer.serialize(_graph);
            //Serializer.deserialize(serialization);
            for (let path in serialization) {
                await this.deserialize(serialization[path]);
                break;
            }
            console.log(this.name + GraphInstance.count++);
            // graph.addEventListener(EVENT.MUTATE, (_event: CustomEvent) => this.hndMutation, true);
            _graph.addEventListener("mutateGraph" /* EVENT.MUTATE_GRAPH */, this.hndMutationGraph);
            //@ts-ignore
            // console.log("Add", _graph.name, this.name, _graph.listeners);
            // graph.addEventListener(EVENT.MUTATE_GRAPH_DONE, () => { console.log("Done", this.name); /* this.#sync = true; */ });
            //@ts-ignore
            console.log(_graph?.listeners);
            this.broadcastEvent(new Event("graphInstantiated" /* EVENT.GRAPH_INSTANTIATED */));
        }
        /**
         * Retrieve the graph this instances refers to
         */
        get() {
            return FudgeCore.Project.resources[this.#idSource];
        }
        // reflect mutation from a source graph or instance to a destination instance or graph
        async reflectMutation(_event, _source, _destination, _path) {
            // console.log("Reflect mutation", _source, _destination);
            for (let node of _path) // iterate up the event path, which may contain regular Nodes or GraphInstances
                if (node instanceof GraphInstance) // until this GraphInstance is found (or no GraphInstance...)
                    if (node == this)
                        break;
                    else {
                        console.log("Sync aborted, target already synced");
                        return;
                    }
            // find the corresponding node in the destination hierarchy
            let index = _path.indexOf(_source);
            for (let i = index - 1; i >= 0; i--) {
                let childIndex = _path[i].getParent().findChild(_path[i]); // get the index of the childnode in the original path
                _destination = _destination.getChild(childIndex); // get the corresponding child in this path
                // TODO: respect index for non-singleton components...
            }
            // mutate the corresponding component in the destination
            let cmpMutate = _destination.getComponent(_event.detail.component.constructor);
            if (cmpMutate)
                await cmpMutate.mutate(_event.detail.mutator, null, false);
        }
        isFiltered() {
            let cmpFilter = this.getComponent(FudgeCore.ComponentGraphFilter);
            return (cmpFilter && cmpFilter.isActive);
        }
    }
    FudgeCore.GraphInstance = GraphInstance;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Holds data to feed into a {@link Shader} to describe the surface of {@link Mesh}.
     * {@link Material}s reference {@link Coat} and {@link Shader}.
     * The method useRenderData will be injected by {@link RenderInjector} at runtime, extending the functionality of this class to deal with the renderer.
     */
    class Coat extends FudgeCore.Mutable {
        // public name: string = "Coat";
        // protected renderData: { [key: string]: unknown }; // this wasn't used anywhere...
        /**
         * Sets the render-parameters from this and the given material inside the given shader.
         * Injected by {@link RenderInjectorCoat}. Used by the render system.
         * @internal
         */
        useRenderData(_shader, _cmpMaterial) { }
        //#region Transfer
        serialize() {
            return {};
        }
        async deserialize(_serialization) {
            return this;
        }
        reduceMutator(_mutator) {
            delete _mutator.renderData;
        }
    }
    FudgeCore.Coat = Coat;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The simplest {@link Coat} providing just a color
     */
    let CoatColored = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.Coat;
        var CoatColored = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatColored = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            constructor(_color = new FudgeCore.Color()) {
                super();
                this.color = _color;
            }
            //#region Transfer
            serialize() {
                let serialization = super.serialize();
                serialization.color = this.color.serialize();
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization);
                await this.color.deserialize(_serialization.color);
                return this;
            }
        };
        return CoatColored = _classThis;
    })();
    FudgeCore.CoatColored = CoatColored;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a color and parameters for the phong shading model.
     */
    let CoatRemissive = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.CoatColored;
        var CoatRemissive = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatRemissive = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            #metallic;
            constructor(_color = new FudgeCore.Color(), _diffuse = 1, _specular = 0.5, _intensity = 0.7, _metallic = 0.0) {
                super(_color);
                this.diffuse = _diffuse;
                this.specular = _specular;
                this.intensity = _intensity;
                this.metallic = _metallic;
            }
            get metallic() {
                return this.#metallic;
            }
            set metallic(_value) {
                this.#metallic = FudgeCore.Calc.clamp(_value, 0, 1);
            }
            //#region Transfer
            serialize() {
                let serialization = super.serialize();
                serialization.diffuse = this.diffuse;
                serialization.specular = this.specular;
                serialization.intensity = this.intensity;
                serialization.metallic = this.metallic;
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization);
                this.diffuse = _serialization.diffuse;
                this.specular = _serialization.specular;
                this.intensity = _serialization.intensity ?? this.intensity;
                this.metallic = _serialization.metallic ?? this.metallic;
                return this;
            }
            getMutator() {
                let mutator = super.getMutator(true);
                delete mutator.diffuse;
                delete mutator.specular;
                delete mutator.intensity;
                mutator.diffuse = this.diffuse;
                mutator.specular = this.specular;
                mutator.intensity = this.intensity;
                mutator.metallic = this.metallic;
                return mutator;
            }
        };
        return CoatRemissive = _classThis;
    })();
    FudgeCore.CoatRemissive = CoatRemissive;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a texture and additional data for texturing
     */
    let CoatTextured = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.CoatColored;
        var CoatTextured = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatTextured = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            constructor(_color = new FudgeCore.Color(), _texture = FudgeCore.TextureDefault.color) {
                super(_color);
                this.texture = null;
                this.texture = _texture;
            }
            //#region Transfer
            serialize() {
                let serialization = super.serialize();
                serialization.idTexture = this.texture.idResource;
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization);
                if (_serialization.idTexture)
                    this.texture = await FudgeCore.Project.getResource(_serialization.idTexture);
                return this;
            }
        };
        return CoatTextured = _classThis;
    })();
    FudgeCore.CoatTextured = CoatTextured;
})(FudgeCore || (FudgeCore = {}));
///<reference path="CoatTextured.ts"/>
var FudgeCore;
///<reference path="CoatTextured.ts"/>
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a texture and additional data for texturing
     */
    let CoatRemissiveTextured = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.CoatTextured;
        var CoatRemissiveTextured = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatRemissiveTextured = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            #metallic;
            constructor(_color = new FudgeCore.Color(), _texture = FudgeCore.TextureDefault.color, _diffuse = 1, _specular = 0.5, _intensity = 0.7, _metallic = 0.0) {
                super(_color, _texture);
                this.diffuse = _diffuse;
                this.specular = _specular;
                this.intensity = _intensity;
                this.metallic = _metallic;
            }
            get metallic() {
                return this.#metallic;
            }
            set metallic(_value) {
                this.#metallic = FudgeCore.Calc.clamp(_value, 0, 1);
            }
            //#region Transfer
            serialize() {
                let serialization = super.serialize();
                serialization.diffuse = this.diffuse;
                serialization.specular = this.specular;
                serialization.intensity = this.intensity;
                serialization.metallic = this.metallic;
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization);
                this.diffuse = _serialization.diffuse;
                this.specular = _serialization.specular;
                this.intensity = _serialization.intensity ?? this.intensity;
                this.metallic = _serialization.metallic ?? this.metallic;
                return this;
            }
            getMutator() {
                let mutator = super.getMutator(true);
                delete mutator.diffuse;
                delete mutator.specular;
                delete mutator.intensity;
                mutator.diffuse = this.diffuse;
                mutator.specular = this.specular;
                mutator.intensity = this.intensity;
                mutator.metallic = this.metallic;
                return mutator;
            }
        };
        return CoatRemissiveTextured = _classThis;
    })();
    FudgeCore.CoatRemissiveTextured = CoatRemissiveTextured;
})(FudgeCore || (FudgeCore = {}));
///<reference path="CoatTextured.ts"/>
var FudgeCore;
///<reference path="CoatTextured.ts"/>
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a texture and additional data for texturing
     */
    let CoatRemissiveTexturedNormals = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.CoatRemissiveTextured;
        var CoatRemissiveTexturedNormals = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatRemissiveTexturedNormals = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            constructor(_color = new FudgeCore.Color(), _texture = FudgeCore.TextureDefault.color, _normalMap = FudgeCore.TextureDefault.normal, _diffuse, _specular = undefined, _intensity = undefined, _metallic = undefined) {
                super(_color, _texture, _diffuse, _specular, _intensity, _metallic);
                this.normalMap = null;
                this.normalMap = _normalMap;
            }
            //#region Transfer
            serialize() {
                let serialization = super.serialize();
                serialization.idNormalMap = this.normalMap.idResource;
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization);
                if (_serialization.idNormalMap)
                    this.normalMap = await FudgeCore.Project.getResource(_serialization.idNormalMap);
                return this;
            }
        };
        return CoatRemissiveTexturedNormals = _classThis;
    })();
    FudgeCore.CoatRemissiveTexturedNormals = CoatRemissiveTexturedNormals;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a color and parameters for the toon shading model.
     */
    let CoatToon = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = mixinCoatToon(FudgeCore.CoatRemissive);
        var CoatToon = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatToon = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            constructor(_color = new FudgeCore.Color(), _texToon = FudgeCore.TextureDefault.toon, _diffuse, _specular = 1.2, _intensity, _metallic) {
                super(_color, _diffuse, _specular, _intensity, _metallic);
                this.texToon = _texToon;
            }
        };
        return CoatToon = _classThis;
    })();
    FudgeCore.CoatToon = CoatToon;
    /**
     * A {@link Coat} providing a texture, a color and parameters for the toon shading model.
     */
    let CoatToonTextured = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorCoat).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = mixinCoatToon(FudgeCore.CoatRemissiveTextured);
        var CoatToonTextured = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                CoatToonTextured = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            constructor(_color = new FudgeCore.Color(), _texture = FudgeCore.TextureDefault.color, _texToon = FudgeCore.TextureDefault.toon, _diffuse, _specular = 1.2, _intensity, _metallic) {
                super(_color, _texture, _diffuse, _specular, _intensity, _metallic);
                this.texToon = _texToon;
            }
        };
        return CoatToonTextured = _classThis;
    })();
    FudgeCore.CoatToonTextured = CoatToonTextured;
    function mixinCoatToon(_base) {
        class CoatToon extends _base {
            serialize() {
                let serialization = super.serialize();
                serialization.idTexToon = this.texToon.idResource;
                return serialization;
            }
            async deserialize(_serialization) {
                await super.deserialize(_serialization);
                if (_serialization.idTexToon)
                    this.texToon = await FudgeCore.Project.getResource(_serialization.idTexToon);
                return this;
            }
        }
        return CoatToon;
    }
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defines a color as values in the range of 0 to 1 for the four channels red, green, blue and alpha (for opacity)
     */
    class Color extends FudgeCore.Mutable {
        // crc2 only used for converting colors from strings predefined by CSS
        static { this.crc2 = (() => {
            const crc2 = document.createElement("canvas").getContext("2d", { willReadFrequently: true });
            crc2.globalCompositeOperation = "copy";
            return crc2;
        })(); }
        constructor(_r = 1, _g = 1, _b = 1, _a = 1) {
            super();
            this.setClamped(_r, _g, _b, _a);
        }
        /**
         * Returns a {@link Uint8ClampedArray} with the 8-bit color channels in the order RGBA.
         */
        static getBytesFromCSS(_keyword) {
            Color.crc2.fillStyle = _keyword;
            Color.crc2.fillRect(0, 0, 1, 1);
            return Color.crc2.getImageData(0, 0, 1, 1).data;
        }
        /**
         * Returns a new {@link Color} object created from the given css color keyword.
         * Passing an _alpha value will override the alpha value specified in the keyword.
         */
        static CSS(_keyword, _alpha) {
            return FudgeCore.Recycler.get(Color).setCSS(_keyword, _alpha);
        }
        /**
         * Computes and retruns the product of two colors.
         */
        static PRODUCT(_clrA, _clrB) {
            return _clrA.clone.multiply(_clrB);
        }
        /**
         * Creates and returns a clone of this color.
         */
        get clone() {
            return FudgeCore.Recycler.reuse(Color).copy(this);
        }
        /**
         * Copies the color channels of the given color into this color and returns it.
         */
        copy(_color) {
            this.r = _color.r;
            this.g = _color.g;
            this.b = _color.b;
            this.a = _color.a;
            return this;
        }
        recycle() {
            this.r = 1;
            this.g = 1;
            this.b = 1;
            this.a = 1;
        }
        /**
         * Sets this color from the given css color keyword. Optinally sets the alpha value to the given value.
         */
        setCSS(_keyword, _alpha) {
            const bytesRGBA = Color.getBytesFromCSS(_keyword);
            this.setBytes(bytesRGBA[0], bytesRGBA[1], bytesRGBA[2], bytesRGBA[3]);
            this.a = _alpha ?? this.a;
            return this;
        }
        setBytes(_r, _g, _b, _a) {
            if (_r instanceof Uint8ClampedArray)
                this.setBytes(_r[0], _r[1], _r[2], _r[3]);
            else
                this.setClamped(_r / 255, _g / 255, _b / 255, _a / 255);
            return this;
        }
        setClamped(_r, _g, _b, _a) {
            if (_r instanceof Float32Array)
                this.setClamped(_r[0], _r[1], _r[2], _r[3]);
            else
                this.set(FudgeCore.Calc.clamp(_r, 0, 1), FudgeCore.Calc.clamp(_g, 0, 1), FudgeCore.Calc.clamp(_b, 0, 1), FudgeCore.Calc.clamp(_a, 0, 1));
            return this;
        }
        /**
         * Sets the color channels of this color.
         */
        set(_r, _g, _b, _a) {
            this.r = _r;
            this.g = _g;
            this.b = _b;
            this.a = _a;
            return this;
        }
        /**
         * Returns an array of the color channels of this color.
         */
        get() {
            return new Float32Array([this.r, this.g, this.b, this.a]);
        }
        /**
         * Returns a {@link Uint8ClampedArray} of the color channels of this color.
         */
        getBytes() {
            return new Uint8ClampedArray([this.r * 255, this.g * 255, this.b * 255, this.a * 255]);
        }
        /**
         * Returns the css color keyword representing this color.
         */
        getCSS() {
            let bytes = this.getBytes();
            return `RGBA(${bytes[0]}, ${bytes[1]}, ${bytes[2]}, ${this.a})`;
        }
        /**
         * Returns the hex string representation of this color.
         */
        getHex() {
            let bytes = this.getBytes();
            let hex = "";
            for (let byte of bytes)
                hex += byte.toString(16).padStart(2, "0");
            return hex;
        }
        /**
         * Sets this color from the given hex string color.
         */
        setHex(_hex) {
            let bytes = this.getBytes();
            let channel = 0;
            for (let byte in bytes)
                bytes[byte] = parseInt(_hex.substr(channel++ * 2, 2), 16);
            return this.setBytes(bytes);
            ;
        }
        /**
         * Adds the given color to this.
         */
        add(_color) {
            this.r += _color.r;
            this.g += _color.g;
            this.b += _color.b;
            this.a += _color.a;
            return this;
        }
        /**
         * Multiplies this with the given color.
         */
        multiply(_color) {
            this.r *= _color.r;
            this.g *= _color.g;
            this.b *= _color.b;
            this.a *= _color.a;
            return this;
        }
        /**
         * Returns a formatted string representation of this color
         */
        toString() {
            return `(r: ${this.r.toFixed(3)}, g: ${this.g.toFixed(3)}, b: ${this.b.toFixed(3)}, a: ${this.a.toFixed(3)})`;
        }
        //#region Transfer
        serialize() {
            let serialization = this.getMutator(true);
            // serialization.toJSON = () => { return `{ "r": ${this.r}, "g": ${this.g}, "b": ${this.b}, "a": ${this.a}}`; };
            serialization.toJSON = () => { return `[${this.r}, ${this.g}, ${this.b}, ${this.a}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.r, this.g, this.b, this.a] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Color = Color;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Baseclass for materials. Combines a {@link Shader} with a compatible {@link Coat}
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Material extends FudgeCore.Mutable {
        #coat;
        constructor(_name, _shader, _coat) {
            super();
            this.idResource = undefined;
            /**
             * Clipping threshold for alpha values, every pixel with alpha < alphaClip will be discarded.
             */
            this.alphaClip = 0.01;
            this.name = _name;
            this.shaderType = _shader;
            if (_shader) {
                if (_coat)
                    this.coat = _coat;
                else
                    this.coat = this.createCoatMatchingShader();
            }
            FudgeCore.Project.register(this);
        }
        /**
         * Returns the currently referenced {@link Coat} instance
         */
        get coat() {
            return this.#coat;
        }
        /**
         * Makes this material reference the given {@link Coat} if it is compatible with the referenced {@link Shader}
         */
        set coat(_coat) {
            if (this.shaderType)
                if (_coat.constructor != this.shaderType.getCoat())
                    if (_coat instanceof this.shaderType.getCoat())
                        FudgeCore.Debug.fudge("Coat is extension of Coat required by shader");
                    else
                        throw (new Error("Shader and coat don't match"));
            this.#coat = _coat;
        }
        /**
         * Creates a new {@link Coat} instance that is valid for the {@link Shader} referenced by this material
         */
        createCoatMatchingShader() {
            let coat = new (this.shaderType.getCoat())();
            return coat;
        }
        /**
         * Changes the materials reference to the given {@link Shader}, creates and references a new {@link Coat} instance
         * and mutates the new coat to preserve matching properties.
         * @param _shaderType
         */
        setShader(_shaderType) {
            this.shaderType = _shaderType;
            let coat = this.createCoatMatchingShader();
            coat.mutate(this.#coat?.getMutator());
            this.coat = coat;
        }
        /**
         * Returns the {@link Shader} referenced by this material
         */
        getShader() {
            return this.shaderType;
        }
        //#region Transfer
        // TODO: this type of serialization was implemented for implicit Material create. Check if obsolete when only one material class exists and/or materials are stored separately
        serialize() {
            let serialization = {
                name: this.name,
                idResource: this.idResource,
                shader: this.shaderType.name,
                coat: FudgeCore.Serializer.serialize(this.#coat),
                alphaClip: this.alphaClip
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.name = _serialization.name;
            FudgeCore.Project.register(this, _serialization.idResource);
            this.shaderType = FudgeCore[_serialization.shader];
            let coat = await FudgeCore.Serializer.deserialize(_serialization.coat);
            this.coat = coat;
            if (_serialization.alphaClip != undefined)
                this.alphaClip = _serialization.alphaClip;
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.coat = this.coat.getMutator();
            return mutator;
        }
        reduceMutator(_mutator) {
            // delete _mutator.idResource;
        }
    }
    FudgeCore.Material = Material;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Material} loaded from a glTF-File.
     * @authors Jonas Plotzky, HFU, 2024
     */
    class MaterialGLTF extends FudgeCore.mixinSerializableResourceExternal(FudgeCore.Material) {
        async load(_url = this.url, _name = this.name) {
            this.url = _url;
            this.name = _name;
            return FudgeCore.GLTFLoader.loadResource(this);
        }
    }
    FudgeCore.MaterialGLTF = MaterialGLTF;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Abstract class supporting various arithmetical helper functions
     */
    class Calc {
        /** factor multiplied with angle in degrees yields the angle in radian */
        static { this.deg2rad = Math.PI / 180; }
        /** factor multiplied with angle in radian yields the angle in degrees */
        static { this.rad2deg = 1 / Calc.deg2rad; }
        /**
         * Returns one of the values passed in, either _value if within _min and _max or the boundary being exceeded by _value
         */
        static clamp(_value, _min, _max, _isSmaller = (_value1, _value2) => { return _value1 < _value2; }) {
            if (_isSmaller(_value, _min))
                return _min;
            if (_isSmaller(_max, _value))
                return _max;
            return _value;
        }
        /**
         * Returns the linear interpolation between two values (_a, _b) for the given interpolation factor (_f). f is clamped between 0 and 1.
         */
        static lerp(_a, _b, _f) {
            return _a + (_b - _a) * Calc.clamp(_f, 0, 1);
        }
    }
    FudgeCore.Calc = Calc;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Framing describes how to map a rectangle into a given frame
     * and how points in the frame correspond to points in the resulting rectangle and vice versa
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Framing
     */
    class Framing extends FudgeCore.Mutable {
        reduceMutator(_mutator) { }
    }
    FudgeCore.Framing = Framing;
    /**
     * The resulting rectangle has a fixed width and height and display should scale to fit the frame
     * Points are scaled in the same ratio
     */
    class FramingFixed extends Framing {
        constructor(_width = 300, _height = 150) {
            super();
            this.width = 300;
            this.height = 150;
            this.setSize(_width, _height);
        }
        /**
         * Sets this framing to the given width and height
         */
        setSize(_width, _height) {
            this.width = _width;
            this.height = _height;
        }
        getPoint(_pointInFrame, _rectFrame) {
            let result = new FudgeCore.Vector2(this.width * (_pointInFrame.x - _rectFrame.x) / _rectFrame.width, this.height * (_pointInFrame.y - _rectFrame.y) / _rectFrame.height);
            return result;
        }
        getPointInverse(_point, _rect) {
            let result = new FudgeCore.Vector2(_point.x * _rect.width / this.width + _rect.x, _point.y * _rect.height / this.height + _rect.y);
            return result;
        }
        getRect(_rectFrame) {
            return FudgeCore.Rectangle.GET(0, 0, this.width, this.height);
        }
    }
    FudgeCore.FramingFixed = FramingFixed;
    /**
     * Width and height of the resulting rectangle are fractions of those of the frame, scaled by normed values normWidth and normHeight.
     * Display should scale to fit the frame and points are scaled in the same ratio
     */
    class FramingScaled extends Framing {
        constructor() {
            super(...arguments);
            this.normWidth = 1.0;
            this.normHeight = 1.0;
        }
        /**
         * Sets this framing to the given normed width and height
         */
        setScale(_normWidth, _normHeight) {
            this.normWidth = _normWidth;
            this.normHeight = _normHeight;
        }
        getPoint(_pointInFrame, _rectFrame) {
            let result = new FudgeCore.Vector2(this.normWidth * (_pointInFrame.x - _rectFrame.x), this.normHeight * (_pointInFrame.y - _rectFrame.y));
            return result;
        }
        getPointInverse(_point, _rect) {
            let result = new FudgeCore.Vector2(_point.x / this.normWidth + _rect.x, _point.y / this.normHeight + _rect.y);
            return result;
        }
        getRect(_rectFrame) {
            return FudgeCore.Rectangle.GET(0, 0, this.normWidth * _rectFrame.width, this.normHeight * _rectFrame.height);
        }
    }
    FudgeCore.FramingScaled = FramingScaled;
    /**
     * The resulting rectangle fits into a margin given as fractions of the size of the frame given by normAnchor
     * plus an absolute padding given by pixelBorder. Display should fit into this.
     */
    class FramingComplex extends Framing {
        constructor() {
            super(...arguments);
            this.margin = { left: 0, top: 0, right: 0, bottom: 0 };
            this.padding = { left: 0, top: 0, right: 0, bottom: 0 };
        }
        getPoint(_pointInFrame, _rectFrame) {
            let result = new FudgeCore.Vector2(_pointInFrame.x - this.padding.left - this.margin.left * _rectFrame.width, _pointInFrame.y - this.padding.top - this.margin.top * _rectFrame.height);
            return result;
        }
        getPointInverse(_point, _rect) {
            let result = new FudgeCore.Vector2(_point.x + this.padding.left + this.margin.left * _rect.width, _point.y + this.padding.top + this.margin.top * _rect.height);
            return result;
        }
        getRect(_rectFrame) {
            if (!_rectFrame)
                return null;
            let minX = _rectFrame.x + this.margin.left * _rectFrame.width + this.padding.left;
            let minY = _rectFrame.y + this.margin.top * _rectFrame.height + this.padding.top;
            let maxX = _rectFrame.x + (1 - this.margin.right) * _rectFrame.width - this.padding.right;
            let maxY = _rectFrame.y + (1 - this.margin.bottom) * _rectFrame.height - this.padding.bottom;
            return FudgeCore.Rectangle.GET(minX, minY, maxX - minX, maxY - minY);
        }
        getMutator() {
            return { margin: this.margin, padding: this.padding };
        }
    }
    FudgeCore.FramingComplex = FramingComplex;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Representation of a vector2 as polar coordinates
     * ```text
     *  ‚Üï- angle (Angle to the x-axis)
     *  -‚Üí Magnitude (Distance from the center)
     * ```
     */
    class Geo2 {
        constructor(_angle = 0, _magnitude = 1) {
            this.magnitude = 0;
            this.angle = 0;
            this.set(_angle, _magnitude);
        }
        /**
         * Set the properties of this instance at once
         */
        set(_angle = 0, _magnitude = 1) {
            this.magnitude = _magnitude;
            this.angle = _angle;
        }
        recycle() {
            this.set();
        }
        /**
         * Returns a pretty string representation
         */
        toString() {
            return `angle: ${this.angle.toPrecision(5)},  magnitude: ${this.magnitude.toPrecision(5)}`;
        }
    }
    FudgeCore.Geo2 = Geo2;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Representation of a vector3 as geographic coordinates as seen on a globe
     * ```text
     * ‚Üê|‚Üí Longitude (Angle to the z-axis)
     *  ‚Üï- Latitude (Angle to the equator)
     *  -‚Üí Magnitude (Distance from the center)
     * ```
     */
    class Geo3 {
        constructor(_longitude = 0, _latitude = 0, _magnitude = 1) {
            this.magnitude = 0;
            this.latitude = 0;
            this.longitude = 0;
            this.set(_longitude, _latitude, _magnitude);
        }
        /**
         * Set the properties of this instance at once
         */
        set(_longitude = 0, _latitude = 0, _magnitude = 1) {
            this.magnitude = _magnitude;
            this.latitude = _latitude;
            this.longitude = _longitude;
        }
        recycle() {
            this.set();
        }
        /**
         * Returns a pretty string representation
         */
        toString() {
            return `longitude: ${this.longitude.toPrecision(5)}, latitude: ${this.latitude.toPrecision(5)}, magnitude: ${this.magnitude.toPrecision(5)}`;
        }
    }
    FudgeCore.Geo3 = Geo3;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // From http://baagoe.com/en/RandomMusings/javascript/
    // Johannes Baag√∏e <baagoe@baagoe.com>, 2010
    function Mash() {
        let n = 0xefc8249d;
        let mash = function (_data) {
            _data = _data.toString();
            for (let i = 0; i < _data.length; i++) {
                n += _data.charCodeAt(i);
                let h = 0.02519603282416938 * n;
                n = h >>> 0;
                h -= n;
                h *= n;
                n = h >>> 0;
                h -= n;
                n += h * 0x100000000; // 2^32
            }
            return (n >>> 0) * 2.3283064365386963e-10; // 2^-32
        };
        // mash.version = 'Mash 0.9';
        return mash;
    }
    FudgeCore.Mash = Mash;
    // From http://baagoe.com/en/RandomMusings/javascript/
    function LFIB4() {
        // George Marsaglia's LFIB4,
        //http://groups.google.com/group/sci.crypt/msg/eb4ddde782b17051
        let args = Array.prototype.slice.call(arguments);
        let k0 = 0, k1 = 58, k2 = 119, k3 = 178;
        let s = [];
        let mash = Mash();
        if (args.length === 0) {
            args = [+new Date()];
        }
        for (let j = 0; j < 256; j++) {
            s[j] = mash(" ");
            s[j] -= mash(" ") * 4.76837158203125e-7; // 2^-21
            if (s[j] < 0) {
                s[j] += 1;
            }
        }
        for (let i = 0; i < args.length; i++) {
            for (let j = 0; j < 256; j++) {
                s[j] -= mash(args[i]);
                s[j] -= mash(args[i]) * 4.76837158203125e-7; // 2^-21
                if (s[j] < 0) {
                    s[j] += 1;
                }
            }
        }
        mash = null;
        let random = function () {
            let x;
            k0 = (k0 + 1) & 255;
            k1 = (k1 + 1) & 255;
            k2 = (k2 + 1) & 255;
            k3 = (k3 + 1) & 255;
            x = s[k0] - s[k1];
            if (x < 0) {
                x += 1;
            }
            x -= s[k2];
            if (x < 0) {
                x += 1;
            }
            x -= s[k3];
            if (x < 0) {
                x += 1;
            }
            return s[k0] = x;
        };
        // random.uint32 = function () {
        //   return random() * 0x100000000 >>> 0; // 2^32
        // };
        // random.fract53 = random;
        // random.version = "LFIB4 0.9";
        // random.args = args;
        return random;
    }
    FudgeCore.LFIB4 = LFIB4;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Simple class for 3x3 matrix operations
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class Matrix3x3 extends FudgeCore.Mutable {
        constructor() {
            super();
            this.data = new Float32Array(9); // The data of the matrix.
            this.mutator = null; // prepared for optimization, keep mutator to reduce redundant calculation and for comparison. Set to null when data changes!
            this.recycle();
        }
        //TODO: figure out what this is used for
        /** TODO: describe! */
        static PROJECTION(_width, _height) {
            let mtxResult = new Matrix3x3;
            mtxResult.data.set([
                2 / _width, 0, 0,
                0, -2 / _height, 0,
                -1, 1, 1
            ]);
            return mtxResult;
        }
        /**
         * Retrieve a new identity matrix.
         */
        static IDENTITY() {
            const mtxResult = FudgeCore.Recycler.get(Matrix3x3);
            return mtxResult;
        }
        /**
         * Returns a matrix that translates coordinates along the x- and y-axis according to the given {@link Vector2}.
         */
        static TRANSLATION(_translate) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix3x3);
            mtxResult.set([
                1, 0, 0,
                0, 1, 0,
                _translate.x, _translate.y, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the z-axis when multiplied by.
         * @param _angleInDegrees The value of the rotation.
         */
        static ROTATION(_angleInDegrees) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix3x3);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.set([
                cos, sin, 0,
                -sin, cos, 0,
                0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that scales coordinates along the x- and y-axis according to the given {@link Vector2}
         */
        static SCALING(_scalar) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix3x3);
            mtxResult.set([
                _scalar.x, 0, 0,
                0, _scalar.y, 0,
                0, 0, 1
            ]);
            return mtxResult;
        }
        //#endregion
        /**
         * Computes and returns the product of two passed matrices.
         */
        static PRODUCT(_mtxLeft, _mtxRight) {
            let a00 = _mtxLeft.data[0 * 3 + 0];
            let a01 = _mtxLeft.data[0 * 3 + 1];
            let a02 = _mtxLeft.data[0 * 3 + 2];
            let a10 = _mtxLeft.data[1 * 3 + 0];
            let a11 = _mtxLeft.data[1 * 3 + 1];
            let a12 = _mtxLeft.data[1 * 3 + 2];
            let a20 = _mtxLeft.data[2 * 3 + 0];
            let a21 = _mtxLeft.data[2 * 3 + 1];
            let a22 = _mtxLeft.data[2 * 3 + 2];
            let b00 = _mtxRight.data[0 * 3 + 0];
            let b01 = _mtxRight.data[0 * 3 + 1];
            let b02 = _mtxRight.data[0 * 3 + 2];
            let b10 = _mtxRight.data[1 * 3 + 0];
            let b11 = _mtxRight.data[1 * 3 + 1];
            let b12 = _mtxRight.data[1 * 3 + 2];
            let b20 = _mtxRight.data[2 * 3 + 0];
            let b21 = _mtxRight.data[2 * 3 + 1];
            let b22 = _mtxRight.data[2 * 3 + 2];
            let mtxResult = FudgeCore.Recycler.reuse(Matrix3x3);
            mtxResult.set([
                b00 * a00 + b01 * a10 + b02 * a20,
                b00 * a01 + b01 * a11 + b02 * a21,
                b00 * a02 + b01 * a12 + b02 * a22,
                b10 * a00 + b11 * a10 + b12 * a20,
                b10 * a01 + b11 * a11 + b12 * a21,
                b10 * a02 + b11 * a12 + b12 * a22,
                b20 * a00 + b21 * a10 + b22 * a20,
                b20 * a01 + b21 * a11 + b22 * a21,
                b20 * a02 + b21 * a12 + b22 * a22
            ]);
            return mtxResult;
        }
        /**
         * Computes and returns the inverse of a passed matrix.
         * @param _mtx The matrix to compute the inverse of.
         */
        static INVERSE(_mtx) {
            let m = _mtx.data;
            let m00 = m[0 * 3 + 0];
            let m01 = m[0 * 3 + 1];
            let m02 = m[0 * 3 + 2];
            let m10 = m[1 * 3 + 0];
            let m11 = m[1 * 3 + 1];
            let m12 = m[1 * 3 + 2];
            let m20 = m[2 * 3 + 0];
            let m21 = m[2 * 3 + 1];
            let m22 = m[2 * 3 + 2];
            let d = 1 /
                (m00 * (m11 * m22 - m21 * m12) -
                    m01 * (m10 * m22 - m12 * m20) +
                    m02 * (m10 * m21 - m11 * m20));
            const mtxResult = FudgeCore.Recycler.reuse(Matrix3x3);
            mtxResult.set([
                d * (m11 * m22 - m21 * m12), // [0]
                d * (m02 * m21 - m01 * m22), // [1]
                d * (m01 * m12 - m02 * m11), // [2]
                d * (m12 * m20 - m10 * m22), // [3]
                d * (m00 * m22 - m02 * m20), // [4]
                d * (m10 * m02 - m00 * m12), // [5]
                d * (m10 * m21 - m20 * m11), // [6]
                d * (m20 * m01 - m00 * m21), // [7]
                d * (m00 * m11 - m10 * m01) // [8]
            ]);
            return mtxResult;
        }
        /**
         * - get: return a vector representation of the translation {@link Vector2}.
         * **Caution!** Use immediately, since the vector is going to be reused by Recycler. Create a clone to keep longer and manipulate.
         * - set: effect the matrix ignoring its rotation and scaling
         */
        get translation() {
            if (!this.vectors.translation)
                this.vectors.translation = new FudgeCore.Vector2(this.data[6], this.data[7]);
            return this.vectors.translation; // .clone;
        }
        set translation(_translation) {
            this.data.set(_translation.get(), 6);
            // no full cache reset required
            this.vectors.translation = _translation;
            this.mutator = null;
        }
        /**
         * - get: a copy of the calculated rotation {@link Vector2}
         * - set: effect the matrix
         */
        get rotation() {
            if (!this.vectors.rotation)
                this.vectors.rotation = this.getEulerAngle();
            return this.vectors.rotation;
        }
        set rotation(_rotation) {
            this.mutate({ "rotation": _rotation });
            this.resetCache();
        }
        /**
         * - get: return a vector representation of the scale {@link Vector3}.
         * **Caution!** Do not manipulate result, instead create a clone!
         * - set: effect the matrix
         */
        get scaling() {
            if (!this.vectors.scaling)
                this.vectors.scaling = new FudgeCore.Vector2(Math.hypot(this.data[0], this.data[1]) * (this.data[0] < 0 ? -1 : 1), Math.hypot(this.data[3], this.data[4]) * (this.data[4] < 0 ? -1 : 1));
            return this.vectors.scaling; // .clone;
        }
        set scaling(_scaling) {
            this.mutate({ "scaling": _scaling });
            this.resetCache();
        }
        /**
         * Creates and returns a clone of this matrix.
         */
        get clone() {
            return FudgeCore.Recycler.reuse(Matrix3x3).copy(this);
        }
        /**
         * Resets the matrix to the identity-matrix and clears cache. Used by the recycler to reset.
         */
        recycle() {
            this.set([
                1, 0, 0,
                0, 1, 0,
                0, 0, 1
            ]);
        }
        /**
         * Resets the matrix to the identity-matrix and clears cache.
         */
        reset() {
            this.recycle();
        }
        //#region Translation
        /**
         * Adds a translation by the given {@link Vector2} to this matrix.
         */
        translate(_by) {
            const mtxResult = Matrix3x3.PRODUCT(this, Matrix3x3.TRANSLATION(_by));
            // TODO: possible optimization, translation may alter mutator instead of deleting it.
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            return this;
        }
        /**
         * Adds a translation along the x-axis to this matrix.
         */
        translateX(_x) {
            this.data[6] += _x;
            this.mutator = null;
            this.vectors.translation = null;
            return this;
        }
        /**
         * Adds a translation along the y-axis to this matrix.
         */
        translateY(_y) {
            this.data[7] += _y;
            this.mutator = null;
            this.vectors.translation = null;
            return this;
        }
        //#endregion
        //#region Rotation
        /**
         * Adds a rotation around the z-Axis to this matrix
         */
        rotate(_angleInDegrees) {
            const mtxResult = Matrix3x3.PRODUCT(this, Matrix3x3.ROTATION(_angleInDegrees));
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            return this;
        }
        //#endregion
        //#region Scaling
        /**
         * Adds a scaling by the given {@link Vector2} to this matrix.
         */
        scale(_by) {
            const mtxResult = Matrix3x3.PRODUCT(this, Matrix3x3.SCALING(_by));
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            return this;
        }
        /**
         * Adds a scaling along the x-Axis to this matrix.
         */
        scaleX(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector2);
            vector.set(_by, 1);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
            return this;
        }
        /**
         * Adds a scaling along the y-Axis to this matrix.
         */
        scaleY(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector2);
            vector.set(1, _by);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
            return this;
        }
        //#endregion
        //#region Transformation
        /**
         * Multiply this matrix with the given matrix
         */
        multiply(_mtxRight) {
            let mtxResult = Matrix3x3.PRODUCT(this, _mtxRight);
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            this.mutator = null;
            return this;
        }
        //#endregion
        //#region Transfer
        /**
         * Calculates and returns the euler-angles representing the current rotation of this matrix
         */
        getEulerAngle() {
            let scaling = this.scaling;
            let s0 = this.data[0] / scaling.x;
            let s1 = this.data[1] / scaling.x;
            let s3 = this.data[3] / scaling.y;
            let s4 = this.data[4] / scaling.y;
            let xSkew = Math.atan2(-s3, s4);
            let ySkew = Math.atan2(s0, s1);
            let sy = Math.hypot(s0, s1); // probably 2. param should be this.data[4] / scaling.y
            let rotation;
            if (!(sy > 1e-6))
                rotation = ySkew;
            else
                rotation = xSkew;
            rotation *= FudgeCore.Calc.rad2deg;
            return rotation;
        }
        /**
         * Sets the elements of this matrix to the given array.
         */
        set(_array) {
            this.data.set(_array);
            this.resetCache();
            return this;
        }
        /**
         * Copies the elements of the given matrix into this matrix.
         */
        copy(_original) {
            this.data.set(_original.data);
            this.resetCache(); // TODO: for now reset the cache, as i have no idea how the caching works for matrix3x3.
            return this;
        }
        /**
         * Returns a formatted string representation of this matrix
         */
        toString() {
            return `∆í.Matrix3x3(translation: ${this.translation.toString()}, rotation: ${this.rotation.toString()}, scaling: ${this.scaling.toString()}`;
        }
        /**
         * Returns an array of the elements of this matrix.
         */
        get() {
            return new Float32Array(this.data);
        }
        serialize() {
            // this.getMutator();
            let serialization = {
                translation: this.translation.serialize(),
                rotation: this.rotation,
                scaling: this.scaling.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            let mutator = {
                translation: await this.translation.deserialize(_serialization.translation),
                rotation: _serialization.rotation,
                scaling: await this.scaling.deserialize(_serialization.scaling)
            };
            this.mutate(mutator);
            return this;
        }
        getMutator() {
            if (this.mutator)
                return this.mutator;
            let mutator = {
                translation: this.translation.getMutator(),
                rotation: this.rotation,
                scaling: this.scaling.getMutator()
            };
            // cache mutator
            this.mutator = mutator;
            return mutator;
        }
        async mutate(_mutator) {
            let oldTranslation = this.translation;
            let oldRotation = this.rotation;
            let oldScaling = this.scaling;
            let newTranslation = _mutator["translation"];
            let newRotation = _mutator["rotation"];
            let newScaling = _mutator["scaling"];
            let vectors = { translation: oldTranslation, rotation: oldRotation, scaling: oldScaling };
            if (newTranslation) {
                vectors.translation = new FudgeCore.Vector2(newTranslation.x != undefined ? newTranslation.x : oldTranslation.x, newTranslation.y != undefined ? newTranslation.y : oldTranslation.y);
            }
            vectors.rotation = (newRotation == undefined) ? oldRotation : newRotation;
            if (newScaling) {
                vectors.scaling = new FudgeCore.Vector2(newScaling.x != undefined ? newScaling.x : oldScaling.x, newScaling.y != undefined ? newScaling.y : oldScaling.y);
            }
            // TODO: possible performance optimization when only one or two components change, then use old matrix instead of IDENTITY and transform by differences/quotients
            let mtxResult = Matrix3x3.IDENTITY();
            if (vectors.translation)
                mtxResult.translate(vectors.translation);
            if (vectors.rotation) {
                mtxResult.rotate(vectors.rotation);
            }
            if (vectors.scaling)
                mtxResult.scale(vectors.scaling);
            this.set(mtxResult.data);
            this.vectors = vectors;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            if (_mutator.translation)
                types.translation = "Vector2";
            if (_mutator.rotation != undefined)
                types.rotation = "number";
            if (_mutator.scaling)
                types.scaling = "Vector2";
            return types;
        }
        reduceMutator(_mutator) { }
        resetCache() {
            this.vectors = { translation: null, rotation: null, scaling: null };
            this.mutator = null;
        }
    }
    FudgeCore.Matrix3x3 = Matrix3x3;
    //#endregion
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores a 4x4 transformation matrix and provides operations for it.
     * ```text
     * [ 0, 1, 2, 3 ] ‚Üê row vector x
     * [ 4, 5, 6, 7 ] ‚Üê row vector y
     * [ 8, 9,10,11 ] ‚Üê row vector z
     * [12,13,14,15 ] ‚Üê translation
     *            ‚Üë  homogeneous column
     * ```
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019 | Jonas Plotzky, HFU, 2023
     */
    class Matrix4x4 extends FudgeCore.Mutable {
        #translation;
        #scaling;
        #rotation;
        #quaternion;
        #translationDirty;
        #scalingDirty;
        #rotationDirty;
        #quaternionDirty;
        constructor() {
            super();
            this.data = new Float32Array(16); // The data of the matrix.
            this.mutator = null; // prepared for optimization, keep mutator to reduce redundant calculation and for comparison. Set to null when data changes!
            this.#translation = FudgeCore.Vector3.ZERO();
            this.#scaling = FudgeCore.Vector3.ZERO();
            this.#rotation = FudgeCore.Vector3.ONE();
            this.#quaternion = FudgeCore.Quaternion.IDENTITY();
            this.recycle();
        }
        //#region STATICS
        /**
         * Retrieve a new identity matrix
         */
        static IDENTITY() {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            return mtxResult;
        }
        /**
         * Composes a new matrix according to the given translation, rotation and scaling.
         */
        static COMPOSITION(_translation, _rotation, _scaling) {
            let result = Matrix4x4.IDENTITY();
            result.mutate({ "translation": _translation, "rotation": _rotation, "scaling": _scaling });
            return result;
        }
        /**
         * Computes and returns the product of two passed matrices.
         */
        static PRODUCT(_mtxLeft, _mtxRight) {
            let a = _mtxLeft.data;
            let b = _mtxRight.data;
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            let a00 = a[0 * 4 + 0];
            let a01 = a[0 * 4 + 1];
            let a02 = a[0 * 4 + 2];
            let a03 = a[0 * 4 + 3];
            let a10 = a[1 * 4 + 0];
            let a11 = a[1 * 4 + 1];
            let a12 = a[1 * 4 + 2];
            let a13 = a[1 * 4 + 3];
            let a20 = a[2 * 4 + 0];
            let a21 = a[2 * 4 + 1];
            let a22 = a[2 * 4 + 2];
            let a23 = a[2 * 4 + 3];
            let a30 = a[3 * 4 + 0];
            let a31 = a[3 * 4 + 1];
            let a32 = a[3 * 4 + 2];
            let a33 = a[3 * 4 + 3];
            let b00 = b[0 * 4 + 0];
            let b01 = b[0 * 4 + 1];
            let b02 = b[0 * 4 + 2];
            let b03 = b[0 * 4 + 3];
            let b10 = b[1 * 4 + 0];
            let b11 = b[1 * 4 + 1];
            let b12 = b[1 * 4 + 2];
            let b13 = b[1 * 4 + 3];
            let b20 = b[2 * 4 + 0];
            let b21 = b[2 * 4 + 1];
            let b22 = b[2 * 4 + 2];
            let b23 = b[2 * 4 + 3];
            let b30 = b[3 * 4 + 0];
            let b31 = b[3 * 4 + 1];
            let b32 = b[3 * 4 + 2];
            let b33 = b[3 * 4 + 3];
            mtxResult.set([
                b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,
                b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,
                b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,
                b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,
                b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,
                b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,
                b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,
                b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,
                b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,
                b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,
                b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,
                b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,
                b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,
                b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,
                b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,
                b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33
            ]);
            return mtxResult;
        }
        /**
         * Computes and returns the transpose of a passed matrix.
         */
        static TRANSPOSE(_mtx) {
            return _mtx.clone.transpose();
        }
        /**
         * Computes and returns the inverse of a passed matrix.
         * @param _mtx The matrix to compute the inverse of.
         */
        static INVERSE(_mtx) {
            return _mtx.clone.invert();
        }
        /**
         * Computes and returns a matrix with the given translation, its z-axis pointing directly at the given target,
         * and a minimal angle between its y-axis and the given up-{@link Vector3}, respetively calculating yaw and pitch.
         * The pitch may be restricted to the up-vector to only calculate yaw.
         */
        static LOOK_AT(_translation, _target, _up = FudgeCore.Vector3.Y(), _restrict = false) {
            let zAxis = FudgeCore.Vector3.DIFFERENCE(_target, _translation);
            zAxis.normalize();
            let vctCross = FudgeCore.Vector3.CROSS(_up, zAxis);
            if (vctCross.magnitudeSquared == 0) // experimental workaround: if z and up is parallel, there is no up to remain...
                vctCross.x = 0.001; // so tilt a little
            let xAxis = FudgeCore.Vector3.NORMALIZATION(vctCross);
            let yAxis = _restrict ? _up : FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(zAxis, xAxis));
            zAxis = _restrict ? FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(xAxis, _up)) : zAxis;
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            mtxResult.set([
                xAxis.x, xAxis.y, xAxis.z, 0,
                yAxis.x, yAxis.y, yAxis.z, 0,
                zAxis.x, zAxis.y, zAxis.z, 0,
                _translation.x,
                _translation.y,
                _translation.z,
                1
            ]);
            FudgeCore.Recycler.storeMultiple(zAxis, xAxis, yAxis, vctCross);
            return mtxResult;
        }
        /**
         * Computes and returns a matrix with the given translation, its z-axis pointing directly in the given direction,
         * and a minimal angle between its y-axis and the given up-{@link Vector3}. Ideally up should be perpendicular to the given direction.
         */
        static LOOK_IN(_translation, _direction, _up = FudgeCore.Vector3.Y()) {
            let zAxis = FudgeCore.Vector3.NORMALIZATION(_direction);
            let xAxis = FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(_up, zAxis));
            let yAxis = FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(zAxis, xAxis));
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            mtxResult.set([
                xAxis.x, xAxis.y, xAxis.z, 0,
                yAxis.x, yAxis.y, yAxis.z, 0,
                zAxis.x, zAxis.y, zAxis.z, 0,
                _translation.x, _translation.y, _translation.z, 1
            ]);
            FudgeCore.Recycler.storeMultiple(zAxis, xAxis, yAxis);
            return mtxResult;
        }
        /**
         * Computes and returns a matrix with the given translation, its y-axis matching the given up-{@link Vector3}
         * and its z-axis facing towards the given target at a minimal angle, respetively calculating yaw only.
         */
        // public static SHOW_TO(_translation: Vector3, _target: Vector3, _up: Vector3 = Vector3.Y()): Matrix4x4 {
        //   const mtxResult: Matrix4x4 = Recycler.get(Matrix4x4);
        //   let zAxis: Vector3 = Vector3.DIFFERENCE(_target, _translation);
        //   zAxis.normalize();
        //   let xAxis: Vector3 = Vector3.NORMALIZATION(Vector3.CROSS(_up, zAxis));
        //   // let yAxis: Vector3 = Vector3.NORMALIZATION(Vector3.CROSS(zAxis, xAxis));
        //   zAxis = Vector3.NORMALIZATION(Vector3.CROSS(xAxis, _up));
        //   mtxResult.data.set(
        //     [
        //       xAxis.x, xAxis.y, xAxis.z, 0,
        //       _up.x, _up.y, _up.z, 0,
        //       zAxis.x, zAxis.y, zAxis.z, 0,
        //       _translation.x,
        //       _translation.y,
        //       _translation.z,
        //       1
        //     ]);
        //   return mtxResult;
        // }
        /**
         * Returns a matrix that translates coordinates along the x-, y- and z-axis according to the given {@link Vector3}.
         */
        static TRANSLATION(_translate) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            mtxResult.set([
                1, 0, 0, 0,
                0, 1, 0, 0,
                0, 0, 1, 0,
                _translate.x, _translate.y, _translate.z, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the x-axis when multiplied by.
         */
        static ROTATION_X(_angleInDegrees) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.set([
                1, 0, 0, 0,
                0, cos, sin, 0,
                0, -sin, cos, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the y-axis when multiplied by.
         */
        static ROTATION_Y(_angleInDegrees) {
            let mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.set([
                cos, 0, -sin, 0,
                0, 1, 0, 0,
                sin, 0, cos, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the z-axis when multiplied by.
         */
        static ROTATION_Z(_angleInDegrees) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.set([
                cos, sin, 0, 0,
                -sin, cos, 0, 0,
                0, 0, 1, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates when multiplied by, using the rotation euler angles or unit quaternion given.
         * Rotation occurs around the axis in the order Z-Y-X .
         */
        static ROTATION(_rotation) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            Matrix4x4.setRotation(mtxResult.data, _rotation);
            return mtxResult;
        }
        /**
         * Returns a matrix that scales coordinates along the x-, y- and z-axis according to the given {@link Vector3}
         */
        static SCALING(_scalar) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            mtxResult.set([
                _scalar.x, 0, 0, 0,
                0, _scalar.y, 0, 0,
                0, 0, _scalar.z, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a representation of the given matrix relative to the given base.
         * If known, pass the inverse of the base to avoid unneccesary calculation
         */
        static RELATIVE(_mtx, _mtxBase, _mtxInverse) {
            if (_mtxInverse)
                return Matrix4x4.PRODUCT(_mtxInverse, _mtx);
            let mtxInverse = Matrix4x4.INVERSE(_mtxBase);
            let mtxResult = Matrix4x4.PRODUCT(mtxInverse, _mtx);
            FudgeCore.Recycler.store(mtxInverse);
            return mtxResult;
        }
        //#endregion
        //#region PROJECTIONS
        /**
         * Computes and returns a matrix that applies perspective to an object, if its transform is multiplied by it.
         * @param _aspect The aspect ratio between width and height of projectionspace.(Default = canvas.clientWidth / canvas.ClientHeight)
         * @param _fieldOfViewInDegrees The field of view in Degrees. (Default = 45)
         * @param _near The near clipspace border on the z-axis.
         * @param _far The far clipspace border on the z-axis.
         * @param _direction The plane on which the fieldOfView-Angle is given
         */
        static PROJECTION_CENTRAL(_aspect, _fieldOfViewInDegrees, _near, _far, _direction) {
            //TODO: camera looks down negative z-direction, should be positive
            let fieldOfViewInRadians = _fieldOfViewInDegrees * FudgeCore.Calc.deg2rad;
            let f = Math.tan(0.5 * (Math.PI - fieldOfViewInRadians));
            let rangeInv = 1.0 / (_near - _far);
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            mtxResult.set([
                f, 0, 0, 0,
                0, f, 0, 0,
                0, 0, (_near + _far) * rangeInv, -1,
                0, 0, _near * _far * rangeInv * 2, 0
            ]);
            if (_direction == FudgeCore.FIELD_OF_VIEW.DIAGONAL) {
                _aspect = Math.sqrt(_aspect);
                mtxResult.data[0] = f / _aspect;
                mtxResult.data[5] = f * _aspect;
            }
            else if (_direction == FudgeCore.FIELD_OF_VIEW.VERTICAL)
                mtxResult.data[0] = f / _aspect;
            else //FOV_DIRECTION.HORIZONTAL
                mtxResult.data[5] = f * _aspect;
            // HACK: matrix should look in positive z-direction, preferably the matrix should be calculated like that right away
            mtxResult.rotateY(180);
            return mtxResult;
        }
        /**
         * Computes and returns a matrix that applies orthographic projection to an object, if its transform is multiplied by it.
         * @param _left The positionvalue of the projectionspace's left border.
         * @param _right The positionvalue of the projectionspace's right border.
         * @param _bottom The positionvalue of the projectionspace's bottom border.
         * @param _top The positionvalue of the projectionspace's top border.
         * @param _near The positionvalue of the projectionspace's near border.
         * @param _far The positionvalue of the projectionspace's far border
         */
        static PROJECTION_ORTHOGRAPHIC(_left, _right, _bottom, _top, _near = -400, _far = 400) {
            const mtxResult = FudgeCore.Recycler.reuse(Matrix4x4);
            mtxResult.set([
                2 / (_right - _left), 0, 0, 0,
                0, -2 / (_top - _bottom), 0, 0,
                0, 0, 2 / (_far - _near), 0,
                (_left + _right) / (_left - _right),
                (_bottom + _top) / (_bottom - _top),
                (_near + _far) / (_near - _far),
                1
            ]);
            return mtxResult;
        }
        /**
         * Set the rotation part of the given matrixes data array to the given rotation.
         */
        static setRotation(_m, _rotation) {
            if (_rotation instanceof FudgeCore.Vector3) {
                const anglesRad = FudgeCore.Vector3.SCALE(_rotation, FudgeCore.Calc.deg2rad);
                const sinX = Math.sin(anglesRad.x);
                const cosX = Math.cos(anglesRad.x);
                const sinY = Math.sin(anglesRad.y);
                const cosY = Math.cos(anglesRad.y);
                const sinZ = Math.sin(anglesRad.z);
                const cosZ = Math.cos(anglesRad.z);
                FudgeCore.Recycler.store(anglesRad);
                _m[0] = cosZ * cosY; /**/
                _m[1] = sinZ * cosY; /**/
                _m[2] = -sinY;
                _m[4] = cosZ * sinY * sinX - sinZ * cosX;
                _m[5] = sinZ * sinY * sinX + cosZ * cosX;
                _m[6] = cosY * sinX;
                _m[8] = cosZ * sinY * cosX + sinZ * sinX;
                _m[9] = sinZ * sinY * cosX - cosZ * sinX;
                _m[10] = cosY * cosX;
            }
            else {
                const rotationNormalized = FudgeCore.Quaternion.NORMALIZATION(_rotation);
                const x = rotationNormalized.x, y = rotationNormalized.y, z = rotationNormalized.z, w = rotationNormalized.w;
                const xx = x * x, xy = x * y, xz = x * z, xw = x * w;
                const yy = y * y, yz = y * z, yw = y * w;
                const zz = z * z, zw = z * w;
                const ww = w * w;
                _m[0] = ww + xx - yy - zz;
                _m[1] = 2 * (xy + zw); /**/
                _m[2] = 2 * (xz - yw);
                _m[4] = 2 * (xy - zw); /**/
                _m[5] = ww - xx + yy - zz;
                _m[6] = 2 * (yz + xw);
                _m[8] = 2 * (xz + yw); /**/
                _m[9] = 2 * (yz - xw); /**/
                _m[10] = ww - xx - yy + zz;
                // _m[0] = 1 - 2 * (yy + zz); _m[1] = 2 * (xy + zw);/**/ _m[2] = 2 * (xz - yw);
                // _m[4] = 2 * (xy - zw);/**/ _m[5] = 1 - 2 * (xx + zz); _m[6] = 2 * (yz + xw);
                // _m[8] = 2 * (xz + yw);/**/ _m[9] = 2 * (yz - xw);/**/ _m[10] = 1 - 2 * (xx + yy);
                FudgeCore.Recycler.store(rotationNormalized);
            }
        }
        //#endregion
        //#region  Accessors
        /**
         * - get: return a vector representation of the translation {@link Vector3}.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused internally. Create a clone to keep longer and manipulate.
         * - set: effect the matrix ignoring its rotation and scaling
         */
        get translation() {
            if (this.#translationDirty) {
                this.#translation.set(this.data[12], this.data[13], this.data[14]);
                this.#translationDirty = false;
            }
            return this.#translation;
        }
        set translation(_translation) {
            this.mutate({ "translation": _translation });
        }
        /**
         * - get: return a vector representation of the rotation {@link Vector3}.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused internally. Create a clone to keep longer and manipulate.
         * - set: effect the matrix
         */
        get rotation() {
            if (this.#rotationDirty) {
                let scaling = this.scaling;
                let s0 = this.data[0] / scaling.x;
                let s1 = this.data[1] / scaling.x;
                let s2 = this.data[2] / scaling.x;
                let s6 = this.data[6] / scaling.y;
                let s10 = this.data[10] / scaling.z;
                let sy = Math.hypot(s0, s1); // probably 2. param should be this.data[4] / scaling.y
                let singular = sy < 1e-6; // If
                let x1, y1, z1;
                let x2, y2, z2;
                if (!singular) {
                    x1 = Math.atan2(s6, s10);
                    y1 = Math.atan2(-s2, sy);
                    z1 = Math.atan2(s1, s0);
                    x2 = Math.atan2(-s6, -s10);
                    y2 = Math.atan2(-s2, -sy);
                    z2 = Math.atan2(-s1, -s0);
                    if (Math.abs(x2) + Math.abs(y2) + Math.abs(z2) < Math.abs(x1) + Math.abs(y1) + Math.abs(z1)) {
                        x1 = x2;
                        y1 = y2;
                        z1 = z2;
                    }
                }
                else {
                    x1 = Math.atan2(-this.data[9] / scaling.z, this.data[5] / scaling.y);
                    y1 = Math.atan2(-this.data[2] / scaling.x, sy);
                    z1 = 0;
                }
                this.#rotation.set(x1, y1, z1);
                this.#rotation.scale(FudgeCore.Calc.rad2deg);
                this.#rotationDirty = false;
            }
            return this.#rotation;
        }
        set rotation(_rotation) {
            this.mutate({ "rotation": _rotation });
        }
        /**
         * - get: return a vector representation of the scaling {@link Vector3}.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused internally. Create a clone to keep longer and manipulate.
         * - set: effect the matrix
         */
        get scaling() {
            if (this.#scalingDirty) {
                this.#scaling.set(Math.hypot(this.data[0], this.data[1], this.data[2]), //* (this.data[0] < 0 ? -1 : 1),
                Math.hypot(this.data[4], this.data[5], this.data[6]), //* (this.data[5] < 0 ? -1 : 1),
                Math.hypot(this.data[8], this.data[9], this.data[10]) // * (this.data[10] < 0 ? -1 : 1)
                );
                this.#scalingDirty = false;
            }
            return this.#scaling;
        }
        set scaling(_scaling) {
            this.mutate({ "scaling": _scaling });
        }
        /**
         * - get: return a unit quaternion representing the rotation of this matrix.
         * **Caution!** Use immediately and readonly, since the quaternion is going to be reused internally. Create a clone to keep longer and manipulate.
         * - set: effect the matrix
         */
        get quaternion() {
            if (this.#quaternionDirty) {
                this.#quaternion.eulerAngles = this.rotation;
                this.#quaternionDirty = false;
            }
            return this.#quaternion;
        }
        set quaternion(_quaternion) {
            this.mutate({ "rotation": _quaternion });
        }
        /**
         * Returns the normalized cardinal x-axis.
         */
        get right() {
            let right = this.getX();
            right.normalize();
            return right;
        }
        /**
         * Returns the normalized cardinal y-axis.
         */
        get up() {
            let up = this.getY();
            up.normalize();
            return up;
        }
        /**
         * Returns the normalized cardinal z-axis.
         */
        get forward() {
            let forward = this.getZ();
            forward.normalize();
            return forward;
        }
        /**
         * Creates and returns a clone of this matrix.
         */
        get clone() {
            return FudgeCore.Recycler.reuse(Matrix4x4).copy(this);
        }
        //#endregion
        /**
         * Resets the matrix to the identity-matrix and clears cache. Used by the recycler to reset.
         */
        recycle() {
            this.set([
                1, 0, 0, 0,
                0, 1, 0, 0,
                0, 0, 1, 0,
                0, 0, 0, 1
            ]);
        }
        /**
         * Resets the matrix to the identity-matrix and clears cache.
         */
        reset() {
            this.recycle();
        }
        /**
         * Transpose this matrix
         */
        transpose() {
            let m = this.data;
            this.set([
                m[0], m[4], m[8], m[12],
                m[1], m[5], m[9], m[13],
                m[2], m[6], m[10], m[14],
                m[3], m[7], m[11], m[15]
            ]);
            return this;
        }
        /**
         * Invert this matrix
         */
        invert() {
            let m = this.data;
            let m00 = m[0 * 4 + 0];
            let m01 = m[0 * 4 + 1];
            let m02 = m[0 * 4 + 2];
            let m03 = m[0 * 4 + 3];
            let m10 = m[1 * 4 + 0];
            let m11 = m[1 * 4 + 1];
            let m12 = m[1 * 4 + 2];
            let m13 = m[1 * 4 + 3];
            let m20 = m[2 * 4 + 0];
            let m21 = m[2 * 4 + 1];
            let m22 = m[2 * 4 + 2];
            let m23 = m[2 * 4 + 3];
            let m30 = m[3 * 4 + 0];
            let m31 = m[3 * 4 + 1];
            let m32 = m[3 * 4 + 2];
            let m33 = m[3 * 4 + 3];
            let tmp0 = m22 * m33;
            let tmp1 = m32 * m23;
            let tmp2 = m12 * m33;
            let tmp3 = m32 * m13;
            let tmp4 = m12 * m23;
            let tmp5 = m22 * m13;
            let tmp6 = m02 * m33;
            let tmp7 = m32 * m03;
            let tmp8 = m02 * m23;
            let tmp9 = m22 * m03;
            let tmp10 = m02 * m13;
            let tmp11 = m12 * m03;
            let tmp12 = m20 * m31;
            let tmp13 = m30 * m21;
            let tmp14 = m10 * m31;
            let tmp15 = m30 * m11;
            let tmp16 = m10 * m21;
            let tmp17 = m20 * m11;
            let tmp18 = m00 * m31;
            let tmp19 = m30 * m01;
            let tmp20 = m00 * m21;
            let tmp21 = m20 * m01;
            let tmp22 = m00 * m11;
            let tmp23 = m10 * m01;
            let t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -
                (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);
            let t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -
                (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);
            let t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -
                (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);
            let t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -
                (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);
            let d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);
            this.set([
                d * t0, // [0]
                d * t1, // [1]
                d * t2, // [2]
                d * t3, // [3]
                d * ((tmp1 * m10 + tmp2 * m20 + tmp5 * m30) - (tmp0 * m10 + tmp3 * m20 + tmp4 * m30)), // [4]
                d * ((tmp0 * m00 + tmp7 * m20 + tmp8 * m30) - (tmp1 * m00 + tmp6 * m20 + tmp9 * m30)), // [5]
                d * ((tmp3 * m00 + tmp6 * m10 + tmp11 * m30) - (tmp2 * m00 + tmp7 * m10 + tmp10 * m30)), // [6]
                d * ((tmp4 * m00 + tmp9 * m10 + tmp10 * m20) - (tmp5 * m00 + tmp8 * m10 + tmp11 * m20)), // [7]
                d * ((tmp12 * m13 + tmp15 * m23 + tmp16 * m33) - (tmp13 * m13 + tmp14 * m23 + tmp17 * m33)), // [8]
                d * ((tmp13 * m03 + tmp18 * m23 + tmp21 * m33) - (tmp12 * m03 + tmp19 * m23 + tmp20 * m33)), // [9]
                d * ((tmp14 * m03 + tmp19 * m13 + tmp22 * m33) - (tmp15 * m03 + tmp18 * m13 + tmp23 * m33)), // [10]
                d * ((tmp17 * m03 + tmp20 * m13 + tmp23 * m23) - (tmp16 * m03 + tmp21 * m13 + tmp22 * m23)), // [11]
                d * ((tmp14 * m22 + tmp17 * m32 + tmp13 * m12) - (tmp16 * m32 + tmp12 * m12 + tmp15 * m22)), // [12]
                d * ((tmp20 * m32 + tmp12 * m02 + tmp19 * m22) - (tmp18 * m22 + tmp21 * m32 + tmp13 * m02)), // [13]
                d * ((tmp18 * m12 + tmp23 * m32 + tmp15 * m02) - (tmp22 * m32 + tmp14 * m02 + tmp19 * m12)), // [14]
                d * ((tmp22 * m22 + tmp16 * m02 + tmp21 * m12) - (tmp20 * m12 + tmp23 * m22 + tmp17 * m02)) // [15]
            ]);
            return this;
        }
        //#region Translation
        /**
         * Adds a translation by the given {@link Vector3} to this matrix.
         * If _local is true, the translation occurs according to the current rotation and scaling of this matrix,
         * otherwise, it occurs according to the parent.
         */
        translate(_by, _local = true) {
            if (_local) {
                let mtxTranslation = Matrix4x4.TRANSLATION(_by);
                this.multiply(mtxTranslation);
                FudgeCore.Recycler.store(mtxTranslation);
            }
            else {
                this.data[12] += _by.x;
                this.data[13] += _by.y;
                this.data[14] += _by.z;
                this.mutator = null;
                this.#translationDirty = true;
            }
            // const matrix: Matrix4x4 = Matrix4x4.MULTIPLICATION(this, Matrix4x4.TRANSLATION(_by));
            // // TODO: possible optimization, translation may alter mutator instead of deleting it.
            // this.set(matrix);
            // Recycler.store(matrix);
            return this;
        }
        /**
         * Adds a translation along the x-axis to this matrix.
         */
        translateX(_x, _local = true) {
            let translation = FudgeCore.Vector3.X(_x);
            this.translate(translation, _local);
            FudgeCore.Recycler.store(translation);
            return this;
        }
        /**
         * Adds a translation along the y-axis to this matrix.
         */
        translateY(_y, _local = true) {
            let translation = FudgeCore.Vector3.Y(_y);
            this.translate(translation, _local);
            FudgeCore.Recycler.store(translation);
            return this;
        }
        /**
         * Adds a translation along the z-axis to this matrix.
         */
        translateZ(_z, _local = true) {
            let translation = FudgeCore.Vector3.Z(_z);
            this.translate(translation, _local);
            FudgeCore.Recycler.store(translation);
            return this;
        }
        //#endregion
        //#region Rotation
        /**
         * Rotates this matrix by given {@link Vector3} in the order Z, Y, X. Right hand rotation is used, thumb points in axis direction, fingers curling indicate rotation
         * The rotation is appended to already applied transforms, thus multiplied from the right. Set _fromLeft to true to switch and put it in front.
         */
        rotate(_by, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION(_by);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
            return this;
        }
        /**
         * Adds a rotation around the x-axis to this matrix.
         */
        rotateX(_angleInDegrees, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION_X(_angleInDegrees);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
            return this;
        }
        /**
         * Adds a rotation around the y-axis to this matrix.
         */
        rotateY(_angleInDegrees, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION_Y(_angleInDegrees);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
            return this;
        }
        /**
         * Adds a rotation around the z-axis to this matrix.
         */
        rotateZ(_angleInDegrees, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION_Z(_angleInDegrees);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
            return this;
        }
        /**
         * Adjusts the rotation of this matrix to point the z-axis directly at the given target and tilts it to accord with the given up-{@link Vector3},
         * respectively calculating yaw and pitch. If no up-{@link Vector3} is given, the previous up-{@link Vector3} is used.
         * The pitch may be restricted to the up-vector to only calculate yaw.
         */
        lookAt(_target, _up, _restrict = false) {
            _up = _up ? FudgeCore.Vector3.NORMALIZATION(_up) : FudgeCore.Vector3.NORMALIZATION(this.up);
            const mtxResult = Matrix4x4.LOOK_AT(this.translation, _target, _up, _restrict);
            mtxResult.scale(this.scaling);
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            return this;
        }
        /**
         * Adjusts the rotation of this matrix to align the z-axis with the given direction and tilts it to accord with the given up-{@link Vector3}.
         * Up should be perpendicular to the given direction. If no up-vector is provided, (0, 1, 0) is used.
         */
        lookIn(_direction, _up = FudgeCore.Vector3.Y()) {
            const mtxResult = Matrix4x4.LOOK_IN(this.translation, _direction, _up);
            mtxResult.scale(this.scaling);
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            return this;
        }
        /**
         * Same as {@link Matrix4x4.lookAt}, but optimized and needs testing
         */
        // TODO: testing lookat that really just rotates the matrix rather than creating a new one
        // public lookAtRotate(_target: Vector3, _up?: Vector3, _preserveScaling: boolean = true): void {
        //   if (!_up)
        //     _up = this.getY();
        //   let scaling: Vector3 = this.scaling;
        //   let difference: Vector3 = Vector3.DIFFERENCE(_target, this.translation);
        //   difference.normalize();
        //   let cos: number = Vector3.DOT(Vector3.NORMALIZATION(this.getZ()), difference);
        //   let sin: number = Vector3.DOT(Vector3.NORMALIZATION(this.getX()), difference);
        //   // console.log(sin, cos);
        //   let mtxRotation: Matrix4x4 = Recycler.get(Matrix4x4);
        //   mtxRotation.data.set([
        //     cos, 0, -sin, 0,
        //     0, 1, 0, 0,
        //     sin, 0, cos, 0,
        //     0, 0, 0, 1
        //   ]);
        //   this.multiply(mtxRotation, false);
        //   cos = Vector3.DOT(Vector3.NORMALIZATION(this.getZ()), difference);
        //   sin = -Vector3.DOT(Vector3.NORMALIZATION(this.getY()), difference);
        //   // console.log(sin, cos);
        //   mtxRotation.data.set([
        //     1, 0, 0, 0,
        //     0, cos, sin, 0,
        //     0, -sin, cos, 0,
        //     0, 0, 0, 1
        //   ]);
        //   this.multiply(mtxRotation, false);
        //   this.scaling = scaling;
        //   Recycler.store(mtxRotation);
        // }
        //#endregion
        //#region Scaling
        /**
         * Adds a scaling by the given {@link Vector3} to this matrix.
         */
        scale(_by) {
            const mtxScaling = Matrix4x4.SCALING(_by);
            const mtxResult = Matrix4x4.PRODUCT(this, mtxScaling);
            this.set(mtxResult.data);
            FudgeCore.Recycler.storeMultiple(mtxScaling, mtxResult);
            return this;
        }
        /**
         * Adds a scaling along the x-axis to this matrix.
         */
        scaleX(_by) {
            let vector = FudgeCore.Recycler.reuse(FudgeCore.Vector3);
            vector.set(_by, 1, 1);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
            return this;
        }
        /**
         * Adds a scaling along the y-axis to this matrix.
         */
        scaleY(_by) {
            let vector = FudgeCore.Recycler.reuse(FudgeCore.Vector3);
            vector.set(1, _by, 1);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
            return this;
        }
        /**
         * Adds a scaling along the z-axis to this matrix.
         */
        scaleZ(_by) {
            let vector = FudgeCore.Recycler.reuse(FudgeCore.Vector3);
            vector.set(1, 1, _by);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
            return this;
        }
        //#endregion
        //#region Transformation
        /**
         * Multiply this matrix by the given matrix.
         */
        multiply(_matrix, _fromLeft = false) {
            const mtxResult = _fromLeft ? Matrix4x4.PRODUCT(_matrix, this) : Matrix4x4.PRODUCT(this, _matrix);
            this.set(mtxResult.data);
            FudgeCore.Recycler.store(mtxResult);
            return this;
        }
        //#endregion
        //#region Transfer
        // public getEulerAnglesNew(): Vector3 {
        //   let scaling: Vector3 = this.scaling;
        //   let thetaX: number, thetaY: number, thetaZ: number;
        //   let r02: number = this.data[2] / scaling.z;
        //   let r11: number = this.data[5] / scaling.y;
        //   if (r02 < 1) {
        //     if (r02 > -1) {
        //       thetaY = Math.asin(-r02);
        //       thetaZ = Math.atan2(this.data[1] / scaling.y, this.data[0] / scaling.x);
        //       thetaX = Math.atan2(this.data[9] / scaling.z, this.data[10] / scaling.z);
        //     }
        //     else {
        //       thetaY = Math.PI / 2;
        //       thetaZ = -Math.atan2(this.data[6] / scaling.y, r11);
        //       thetaX = 0;
        //     }
        //   }
        //   else {
        //     thetaY = -Math.PI / 2;
        //     thetaZ = Math.atan2(-this.data[6] / scaling.y, r11);
        //     thetaX = 0;
        //   }
        //   this.#eulerAngles.set(-thetaX, thetaY, thetaZ);
        //   this.#eulerAngles.scale(Mathematic.rad2deg);
        //   return this.#eulerAngles;
        // }
        /**
         * Sets the elements of this matrix to the given array.
         */
        set(_array) {
            this.data.set(_array);
            this.resetCache();
            return this;
        }
        /**
         * Copies the state of the given matrix into this matrix.
         */
        copy(_original) {
            this.data.set(_original.data);
            this.#translationDirty = _original.#translationDirty;
            this.#rotationDirty = _original.#rotationDirty;
            this.#scalingDirty = _original.#scalingDirty;
            this.#quaternionDirty = _original.#quaternionDirty;
            if (!this.#translationDirty)
                this.#translation.copy(_original.#translation);
            if (!this.#rotationDirty)
                this.#rotation.copy(_original.#rotation);
            if (!this.#scalingDirty)
                this.#scaling.copy(_original.#scaling);
            if (!this.#quaternionDirty)
                this.#quaternion.copy(_original.#quaternion);
            return this;
        }
        /**
         * Returns a formatted string representation of this matrix
         */
        toString() {
            return `∆í.Matrix4x4(translation: ${this.translation.toString()}, rotation: ${this.rotation.toString()}, scaling: ${this.scaling.toString()}`;
        }
        /**
         * Returns an array of the elements of this matrix.
         */
        get() {
            // TODO: optimization, it shouldn't always return a copy, since this bloats memory
            return new Float32Array(this.data);
        }
        /**
         * Return cardinal x-axis
         */
        getX() {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(this.data[0], this.data[1], this.data[2]);
            return result;
        }
        /**
         * Return cardinal y-axis
         */
        getY() {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(this.data[4], this.data[5], this.data[6]);
            return result;
        }
        /**
         * Return cardinal z-axis
         */
        getZ() {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(this.data[8], this.data[9], this.data[10]);
            return result;
        }
        /**
         * Swaps the two cardinal axis and reverses the third, effectively rotating the transform 180 degrees around one and 90 degrees around a second axis
         */
        swapXY() {
            let temp = [this.data[0], this.data[1], this.data[2]]; // store x-axis
            this.data.set([this.data[4], this.data[5], this.data[6]], 0); // overwrite x-axis with y-axis
            this.data.set(temp, 4); // overwrite Y with temp
            this.data.set([-this.data[8], -this.data[9], -this.data[10]], 8); // reverse z-axis
            this.resetCache();
        }
        /**
         * Swaps the two cardinal axis and reverses the third, effectively rotating the transform 180 degrees around one and 90 degrees around a second axis
         */
        swapXZ() {
            let temp = [this.data[0], this.data[1], this.data[2]]; // store x-axis
            this.data.set([this.data[8], this.data[9], this.data[10]], 0); // overwrite x-axis with z-axis
            this.data.set(temp, 8); // overwrite Z with temp
            this.data.set([-this.data[4], -this.data[5], -this.data[6]], 4); // reverse y-axis
            this.resetCache();
        }
        /**
         * Swaps the two cardinal axis and reverses the third, effectively rotating the transform 180 degrees around one and 90 degrees around a second axis
         */
        swapYZ() {
            let temp = [this.data[4], this.data[5], this.data[6]]; // store y-axis
            this.data.set([this.data[8], this.data[9], this.data[10]], 4); // overwrite y-axis with z-axis
            this.data.set(temp, 8); // overwrite Z with temp
            this.data.set([-this.data[0], -this.data[1], -this.data[2]], 0); // reverse x-axis
            this.resetCache();
        }
        /**
         * Returns the tranlation from this matrix to the target matrix
         */
        getTranslationTo(_mtxTarget) {
            let difference = FudgeCore.Recycler.get(FudgeCore.Vector3);
            difference.set(_mtxTarget.data[12] - this.data[12], _mtxTarget.data[13] - this.data[13], _mtxTarget.data[14] - this.data[14]);
            return difference;
        }
        serialize() {
            // this.getMutator();
            let serialization = {
                translation: this.translation.serialize(),
                rotation: this.rotation.serialize(),
                scaling: this.scaling.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            let mutator = {
                translation: await this.translation.deserialize(_serialization.translation),
                rotation: await this.rotation.deserialize(_serialization.rotation),
                scaling: await this.scaling.deserialize(_serialization.scaling)
            };
            this.mutate(mutator);
            return this;
        }
        getMutator() {
            if (this.mutator)
                return this.mutator;
            let mutator = {
                translation: this.translation.getMutator(),
                rotation: this.rotation.getMutator(),
                scaling: this.scaling.getMutator()
            };
            // cache mutator
            this.mutator = mutator;
            return mutator;
        }
        async mutate(_mutator) {
            const m = this.data;
            if (_mutator.translation) {
                let translation = this.translation;
                translation.mutate(_mutator.translation);
                m[12] = translation.x;
                m[13] = translation.y;
                m[14] = translation.z;
                this.#translationDirty = false;
            }
            if (_mutator.rotation || _mutator.scaling) {
                // TODO: make full vector and quaternion mutators mandatory?
                let rotation = _mutator.rotation?.w != undefined ?
                    this.#quaternion : // using this.#quaternion assumes we get a full quaternion mutator with x, y, z and w set so we never need to recalculate the quaternion here. This might cause trouble if we ever want to mutate only a part of a quaternion...
                    isFullVectorMutator(_mutator.rotation) ? this.#rotation : this.rotation; // hack to avoid unnecessary recalculation of rotation and scaling. This recalculation is unnecessary when we get a full mutator i.e. with x, y and z set
                let scaling = isFullVectorMutator(_mutator.scaling) ? this.#scaling : this.scaling;
                if (_mutator.rotation)
                    rotation.mutate(_mutator.rotation);
                if (_mutator.scaling)
                    scaling.mutate(_mutator.scaling);
                Matrix4x4.setRotation(m, rotation);
                const isEulerRotation = rotation instanceof FudgeCore.Vector3;
                this.#rotationDirty = !isEulerRotation;
                this.#quaternionDirty = isEulerRotation;
                const sx = scaling.x, sy = scaling.y, sz = scaling.z;
                m[0] *= sx;
                m[1] *= sx;
                m[2] *= sx;
                m[4] *= sy;
                m[5] *= sy;
                m[6] *= sy;
                m[8] *= sz;
                m[9] *= sz;
                m[10] *= sz;
                this.#scalingDirty = false;
            }
            this.mutator = null;
            function isFullVectorMutator(_mutator) {
                return _mutator && _mutator.x != undefined && _mutator.y != undefined && _mutator.z != undefined;
            }
        }
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            if (_mutator.translation)
                types.translation = "Vector3";
            if (_mutator.rotation)
                types.rotation = "Vector3";
            if (_mutator.scaling)
                types.scaling = "Vector3";
            return types;
        }
        reduceMutator(_mutator) { }
        resetCache() {
            this.#translationDirty = true;
            this.#rotationDirty = true;
            this.#quaternionDirty = true;
            this.#scalingDirty = true;
            this.mutator = null;
        }
    }
    FudgeCore.Matrix4x4 = Matrix4x4;
    //#endregion
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Baseclass for Noise2, Noise3 and Noise4
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
     */
    class Noise {
        constructor(_random = Math.random) {
            this.perm = new Uint8Array(512);
            this.permMod12 = new Uint8Array(512);
            const p = new Uint8Array(256);
            for (let i = 0; i < 256; i++)
                p[i] = i;
            let n;
            let q;
            for (let i = 255; i > 0; i--) {
                n = Math.floor((i + 1) * _random());
                q = p[i];
                p[i] = p[n];
                p[n] = q;
            }
            for (let i = 0; i < 512; i++) {
                this.perm[i] = p[i & 255];
                this.permMod12[i] = this.perm[i] % 12;
            }
        }
    }
    FudgeCore.Noise = Noise;
})(FudgeCore || (FudgeCore = {}));
///<reference path="./Noise.ts"/>
var FudgeCore;
///<reference path="./Noise.ts"/>
(function (FudgeCore) {
    /**
     * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
     * done by Jirka Dell'Oro-Friedl, HFU, 2021
     *
     * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
     * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
     * Better rank ordering method by Stefan Gustavson in 2012.
     *
     * This code was placed in the public domain by its original author,
     * Stefan Gustavson. You may use it as you see fit, but
     * attribution is appreciated.
     */
    class Noise2 extends FudgeCore.Noise {
        static { this.offset = (3.0 - Math.sqrt(3.0)) / 6.0; }
        static { this.gradient = [[1, 1], [-1, 1], [1, -1], [-1, -1], [1, 0], [-1, 0], [1, 0], [-1, 0], [0, 1], [0, -1], [0, 1], [0, -1]]; }
        #sample;
        constructor(_random = Math.random) {
            super(_random);
            this.#sample = null;
            this.sample = (_x, _y) => {
                return this.#sample(_x, _y);
            };
            this.#sample = (_x, _y) => {
                // Skew the input space to determine which simplex cell we're in
                const s = (_x + _y) * 0.5 * (Math.sqrt(3.0) - 1.0); // Hairy factor for 2D
                const i = Math.floor(_x + s);
                const j = Math.floor(_y + s);
                const t = (i + j) * Noise2.offset;
                const X0 = i - t; // Unskew the cell origin back to (x,y) space
                const Y0 = j - t;
                const x0 = _x - X0; // The x,y distances from the cell origin
                const y0 = _y - Y0;
                // Determine which simplex we are in.
                const i1 = x0 > y0 ? 1 : 0;
                const j1 = x0 > y0 ? 0 : 1;
                // Offset:numbers for corners
                const x1 = x0 - i1 + Noise2.offset;
                const y1 = y0 - j1 + Noise2.offset;
                const x2 = x0 - 1.0 + 2.0 * Noise2.offset;
                const y2 = y0 - 1.0 + 2.0 * Noise2.offset;
                // Work out the hashed gradient indices of the three simplex corners
                const ii = i & 255;
                const jj = j & 255;
                const g0 = Noise2.gradient[this.permMod12[ii + this.perm[jj]]];
                const g1 = Noise2.gradient[this.permMod12[ii + i1 + this.perm[jj + j1]]];
                const g2 = Noise2.gradient[this.permMod12[ii + 1 + this.perm[jj + 1]]];
                // Calculate the contribution from the three corners
                const t0 = 0.5 - x0 * x0 - y0 * y0;
                const n0 = t0 < 0 ? 0.0 : Math.pow(t0, 4) * (g0[0] * x0 + g0[1] * y0);
                const t1 = 0.5 - x1 * x1 - y1 * y1;
                const n1 = t1 < 0 ? 0.0 : Math.pow(t1, 4) * (g1[0] * x1 + g1[1] * y1);
                const t2 = 0.5 - x2 * x2 - y2 * y2;
                const n2 = t2 < 0 ? 0.0 : Math.pow(t2, 4) * (g2[0] * x2 + g2[1] * y2);
                // Add contributions from each corner to get the final noise value.
                // The result is scaled to return values in the interval [-1, 1]
                return 70.14805770653952 * (n0 + n1 + n2);
            };
        }
    }
    FudgeCore.Noise2 = Noise2;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
     * done by Jirka Dell'Oro-Friedl, HFU, 2021
     *
     * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
     * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
     * Better rank ordering method by Stefan Gustavson in 2012.
     *
     * This code was placed in the public domain by its original author,
     * Stefan Gustavson. You may use it as you see fit, but
     * attribution is appreciated.
     */
    // TODO: Test
    class Noise3 extends FudgeCore.Noise {
        static { this.offset = 1.0 / 6.0; }
        static { this.gradient = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, -1], [0, 1, -1], [0, -1, -1]
        ]; }
        #sample;
        constructor(_random = Math.random) {
            super(_random);
            this.#sample = null;
            this.sample = (_x, _y, _z) => {
                return this.#sample(_x, _y, _z);
            };
            this.#sample = (_x, _y, _z) => {
                // Skew the input space to determine which simplex cell we're in
                const s = (_x + _y + _z) / 3.0; // Very nice and simple skew factor for 3D
                const i = Math.floor(_x + s);
                const j = Math.floor(_y + s);
                const k = Math.floor(_z + s);
                const t = (i + j + k) * Noise3.offset;
                const X0 = i - t; // Unskew the cell origin back to (x,y,z) space
                const Y0 = j - t;
                const Z0 = k - t;
                const x0 = _x - X0; // The x,y,z distances from the cell origin
                const y0 = _y - Y0;
                const z0 = _z - Z0;
                // Deterine which simplex we are in
                let i1, j1, k1 // Offsets for second corner of simplex in (i,j,k) coords
                ;
                let i2, j2, k2 // Offsets for third corner of simplex in (i,j,k) coords
                ;
                if (x0 >= y0) {
                    if (y0 >= z0) {
                        i1 = i2 = j2 = 1;
                        j1 = k1 = k2 = 0;
                    }
                    else if (x0 >= z0) {
                        i1 = i2 = k2 = 1;
                        j1 = k1 = j2 = 0;
                    }
                    else {
                        k1 = i2 = k2 = 1;
                        i1 = j1 = j2 = 0;
                    }
                }
                else {
                    if (y0 < z0) {
                        k1 = j2 = k2 = 1;
                        i1 = j1 = i2 = 0;
                    }
                    else if (x0 < z0) {
                        j1 = j2 = k2 = 1;
                        i1 = k1 = i2 = 0;
                    }
                    else {
                        j1 = i2 = j2 = 1;
                        i1 = k1 = k2 = 0;
                    }
                }
                const x1 = x0 - i1 + Noise3.offset; // Offsets for second corner in (x,y,z) coords
                const y1 = y0 - j1 + Noise3.offset;
                const z1 = z0 - k1 + Noise3.offset;
                const x2 = x0 - i2 + 2.0 * Noise3.offset; // Offsets for third corner in (x,y,z) coords
                const y2 = y0 - j2 + 2.0 * Noise3.offset;
                const z2 = z0 - k2 + 2.0 * Noise3.offset;
                const x3 = x0 - 1.0 + 3.0 * Noise3.offset; // Offsets for last corner in (x,y,z) coords
                const y3 = y0 - 1.0 + 3.0 * Noise3.offset;
                const z3 = z0 - 1.0 + 3.0 * Noise3.offset;
                // Work :numberut the hashed gradient indices of the four simplex corners
                const ii = i & 255;
                const jj = j & 255;
                const kk = k & 255;
                const g0 = Noise3.gradient[this.permMod12[ii + this.perm[jj + this.perm[kk]]]];
                const g1 = Noise3.gradient[this.permMod12[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1]]]];
                const g2 = Noise3.gradient[this.permMod12[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2]]]];
                const g3 = Noise3.gradient[this.permMod12[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1]]]];
                // Calcu:numberate the contribution from the four corners
                const t0 = 0.5 - x0 * x0 - y0 * y0 - z0 * z0;
                const n0 = t0 < 0
                    ? 0.0
                    : Math.pow(t0, 4) * (g0[0] * x0 + g0[1] * y0 + g0[2] * z0);
                const t1 = 0.5 - x1 * x1 - y1 * y1 - z1 * z1;
                const n1 = t1 < 0
                    ? 0.0
                    : Math.pow(t1, 4) * (g1[0] * x1 + g1[1] * y1 + g1[2] * z1);
                const t2 = 0.5 - x2 * x2 - y2 * y2 - z2 * z2;
                const n2 = t2 < 0
                    ? 0.0
                    : Math.pow(t2, 4) * (g2[0] * x2 + g2[1] * y2 + g2[2] * z2);
                const t3 = 0.5 - x3 * x3 - y3 * y3 - z3 * z3;
                const n3 = t3 < 0
                    ? 0.0
                    : Math.pow(t3, 4) * (g3[0] * x3 + g3[1] * y3 + g3[2] * z3);
                // Add contributions from each corner to get the final noise value.
                // The result is scaled to stay just inside [-1,1]
                return 94.68493150681972 * (n0 + n1 + n2 + n3);
            };
        }
    }
    FudgeCore.Noise3 = Noise3;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // TODO: Test
    /**
     * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
     * done by Jirka Dell'Oro-Friedl, HFU, 2021
     *
     * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
     * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
     * Better rank ordering method by Stefan Gustavson in 2012.
     *
     * This code was placed in the public domain by its original author,
     * Stefan Gustavson. You may use it as you see fit, but
     * attribution is appreciated.
     */
    class Noise4 extends FudgeCore.Noise {
        static { this.offset = (5.0 - Math.sqrt(5.0)) / 20.0; }
        static { this.gradient = [[0, 1, 1, 1], [0, 1, 1, -1], [0, 1, -1, 1], [0, 1, -1, -1], [0, -1, 1, 1], [0, -1, 1, -1], [0, -1, -1, 1], [0, -1, -1, -1], [1, 0, 1, 1], [1, 0, 1, -1], [1, 0, -1, 1], [1, 0, -1, -1], [-1, 0, 1, 1], [-1, 0, 1, -1], [-1, 0, -1, 1], [-1, 0, -1, -1], [1, 1, 0, 1], [1, 1, 0, -1], [1, -1, 0, 1], [1, -1, 0, -1], [-1, 1, 0, 1], [-1, 1, 0, -1], [-1, -1, 0, 1], [-1, -1, 0, -1], [1, 1, 1, 0], [1, 1, -1, 0], [1, -1, 1, 0], [1, -1, -1, 0], [-1, 1, 1, 0], [-1, 1, -1, 0], [-1, -1, 1, 0], [-1, -1, -1, 0]]; }
        #sample;
        constructor(_random = Math.random) {
            super(_random);
            this.#sample = null;
            this.sample = (_x, _y, _z, _w) => {
                return this.#sample(_x, _y, _z, _w);
            };
            this.#sample = (_x, _y, _z, _w) => {
                // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in
                const s = (_x + _y + _z + _w) * (Math.sqrt(5.0) - 1.0) / 4.0; // Factor for 4D skewing
                const i = Math.floor(_x + s);
                const j = Math.floor(_y + s);
                const k = Math.floor(_z + s);
                const l = Math.floor(_w + s);
                const t = (i + j + k + l) * Noise4.offset; // Factor for 4D unskewing
                const X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space
                const Y0 = j - t;
                const Z0 = k - t;
                const W0 = l - t;
                const x0 = _x - X0; // The x,y,z,w distances from the cell origin
                const y0 = _y - Y0;
                const z0 = _z - Z0;
                const w0 = _w - W0;
                // To find out which of the 24 possible simplices we're in, we need to determine the
                // magnitude ordering of x0, y0, z0 and w0. Six pair-wise comparisons are performed between
                // each possible pair of the four coordinates, and the results are used to rank the numbers.
                let rankx = 0;
                let ranky = 0;
                let rankz = 0;
                let rankw = 0;
                if (x0 > y0)
                    rankx++;
                else
                    ranky++;
                if (x0 > z0)
                    rankx++;
                else
                    rankz++;
                if (x0 > w0)
                    rankx++;
                else
                    rankw++;
                if (y0 > z0)
                    ranky++;
                else
                    rankz++;
                if (y0 > w0)
                    ranky++;
                else
                    rankw++;
                if (z0 > w0)
                    rankz++;
                else
                    rankw++;
                // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.
                // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w
                // impossible. Only the 24 indices which have non-zero entries make any sense.
                // We use a thresholding to set the coordinates in turn from the largest magnitude.
                // Rank 3 denotes the largest coordinate.
                const i1 = rankx >= 3 ? 1 : 0;
                const j1 = ranky >= 3 ? 1 : 0;
                const k1 = rankz >= 3 ? 1 : 0;
                const l1 = rankw >= 3 ? 1 : 0;
                // Rank : 2 denotes the second largest coordinate.
                const i2 = rankx >= 2 ? 1 : 0;
                const j2 = ranky >= 2 ? 1 : 0;
                const k2 = rankz >= 2 ? 1 : 0;
                const l2 = rankw >= 2 ? 1 : 0;
                // Rank : 1 denotes the second smallest coordinate.
                const i3 = rankx >= 1 ? 1 : 0;
                const j3 = ranky >= 1 ? 1 : 0;
                const k3 = rankz >= 1 ? 1 : 0;
                const l3 = rankw >= 1 ? 1 : 0;
                // The fifth corner has all coordinate offsets = 1, so no need to compute that.
                const x1 = x0 - i1 + Noise4.offset; // Offsets for second corner in (x,y,z,w) coords
                const y1 = y0 - j1 + Noise4.offset;
                const z1 = z0 - k1 + Noise4.offset;
                const w1 = w0 - l1 + Noise4.offset;
                const x2 = x0 - i2 + 2.0 * Noise4.offset; // Offsets for third corner in (x,y,z,w) coords
                const y2 = y0 - j2 + 2.0 * Noise4.offset;
                const z2 = z0 - k2 + 2.0 * Noise4.offset;
                const w2 = w0 - l2 + 2.0 * Noise4.offset;
                const x3 = x0 - i3 + 3.0 * Noise4.offset; // Offsets for fourth corner in (x,y,z,w) coords
                const y3 = y0 - j3 + 3.0 * Noise4.offset;
                const z3 = z0 - k3 + 3.0 * Noise4.offset;
                const w3 = w0 - l3 + 3.0 * Noise4.offset;
                const x4 = x0 - 1.0 + 4.0 * Noise4.offset; // Offsets for last corner in (x,y,z,w) coords
                const y4 = y0 - 1.0 + 4.0 * Noise4.offset;
                const z4 = z0 - 1.0 + 4.0 * Noise4.offset;
                const w4 = w0 - 1.0 + 4.0 * Noise4.offset;
                // Work out the hashed gradient indices of the five simplex corners
                const ii = i & 255;
                const jj = j & 255;
                const kk = k & 255;
                const ll = l & 255;
                const g0 = Noise4.gradient[this.perm[ii + this.perm[jj + this.perm[kk + this.perm[ll]]]] %
                    32];
                const g1 = Noise4.gradient[this.perm[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1 + this.perm[ll + l1]]]] % 32];
                const g2 = Noise4.gradient[this.perm[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2 + this.perm[ll + l2]]]] % 32];
                const g3 = Noise4.gradient[this.perm[ii + i3 + this.perm[jj + j3 + this.perm[kk + k3 + this.perm[ll + l3]]]] % 32];
                const g4 = Noise4.gradient[this.perm[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1 + this.perm[ll + 1]]]] % 32];
                // Calculate the contribution from the five corners
                const t0 = 0.5 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;
                const n0 = t0 < 0
                    ? 0.0
                    : Math.pow(t0, 4) * (g0[0] * x0 + g0[1] * y0 + g0[2] * z0 + g0[3] * w0);
                const t1 = 0.5 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;
                const n1 = t1 < 0
                    ? 0.0
                    : Math.pow(t1, 4) * (g1[0] * x1 + g1[1] * y1 + g1[2] * z1 + g1[3] * w1);
                const t2 = 0.5 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;
                const n2 = t2 < 0
                    ? 0.0
                    : Math.pow(t2, 4) * (g2[0] * x2 + g2[1] * y2 + g2[2] * z2 + g2[3] * w2);
                const t3 = 0.5 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;
                const n3 = t3 < 0
                    ? 0.0
                    : Math.pow(t3, 4) * (g3[0] * x3 + g3[1] * y3 + g3[2] * z3 + g3[3] * w3);
                const t4 = 0.5 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;
                const n4 = t4 < 0
                    ? 0.0
                    : Math.pow(t4, 4) * (g4[0] * x4 + g4[1] * y4 + g4[2] * z4 + g4[3] * w4);
                // Sum up and scale the result to cover the range [-1,1]
                return 72.37855765153665 * (n0 + n1 + n2 + n3 + n4);
            };
        }
    }
    FudgeCore.Noise4 = Noise4;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
      * Storing and manipulating rotations in the form of quaternions.
      * Constructed out of the 4 components: (x, y, z, w). Mathematical notation: w + xi + yj + zk.
      * A Quaternion can be described with an axis and angle: (x, y, z) = sin(angle/2)*axis; w = cos(angle/2).
      * roll: x, pitch: y, yaw: z. Note that operations are adapted to work with vectors where y is up and z is forward.
      * @authors Matthias Roming, HFU, 2023 | Marko Fehrenbach, HFU, 2020 | Jonas Plotzky, HFU, 2023
      */
    class Quaternion extends FudgeCore.Mutable {
        #eulerAngles; // euler angle representation of this quaternion in degrees.
        #eulerAnglesDirty;
        constructor(_x = 0, _y = 0, _z = 0, _w = 1) {
            super();
            this.mutator = null; // prepared for optimization, keep mutator to reduce redundant calculation and for comparison. Set to null when data changes!
            this.#eulerAngles = FudgeCore.Vector3.ZERO(); // euler angle representation of this quaternion in degrees.
            this.set(_x, _y, _z, _w);
        }
        //#region STATICS
        /**
         * Retrieve a new identity quaternion
         */
        static IDENTITY() {
            const result = FudgeCore.Recycler.get(Quaternion);
            return result;
        }
        /**
         * Returns a quaternion which is a copy of the given quaternion scaled to length 1.
         */
        static NORMALIZATION(_q) {
            return _q.clone.normalize();
        }
        /**
         * Returns a quaternion that rotates coordinates when multiplied by, using the angles given.
         * Rotation occurs around the axis in the order Z-Y-X.
         */
        static ROTATION(_eulerAngles) {
            const result = FudgeCore.Recycler.get(Quaternion);
            result.eulerAngles = _eulerAngles;
            return result;
        }
        /**
         * Returns a quaternion that rotates coordinates when multiplied by, using the axis and angle given.
         * ‚ö†Ô∏è UNTESTED!
         */
        // public static ROTATION(_axis: Vector3, _angle: number): Quaternion {
        //   const result: Quaternion = Recycler.get(Quaternion);
        //   // Normalize the axis
        //   const axis: Vector3 = _axis.clone;
        //   axis.normalize();
        //   // Calculate the quaternion components
        //   const halfAngle: number = _angle / 2;
        //   const s: number = Math.sin(halfAngle);
        //   result.x = axis.x * s;
        //   result.y = axis.y * s;
        //   result.z = axis.z * s;
        //   result.w = Math.cos(halfAngle);
        //   Recycler.store(axis);
        //   return result;
        // }
        /**
         * Computes and returns the product of two passed quaternions.
         */
        static PRODUCT(_qLeft, _qRight) {
            return _qLeft.clone.multiply(_qRight);
        }
        /**
         * Computes and returns the inverse of a passed quaternion.
         */
        static INVERSE(_q) {
            return _q.clone.invert();
        }
        /**
         * Computes and returns the conjugate of a passed quaternion.
         */
        static CONJUGATION(_q) {
            return _q.clone.conjugate();
        }
        /**
         * Returns the dot product of two quaternions.
         */
        static DOT(_q1, _q2) {
            return _q1.x * _q2.x + _q1.y * _q2.y + _q1.z * _q2.z + _q1.w * _q2.w;
        }
        /**
         * Returns the normalized linear interpolation between two quaternions based on the given _factor. When _factor is 0 the result is _from, when _factor is 1 the result is _to.
         */
        static LERP(_from, _to, _factor) {
            let result = FudgeCore.Recycler.get(Quaternion);
            result.set((_from.x * (1 - _factor) + _to.x * _factor), (_from.y * (1 - _factor) + _to.y * _factor), (_from.z * (1 - _factor) + _to.z * _factor), (_from.w * (1 - _factor) + _to.w * _factor));
            result.normalize();
            return result;
        }
        /**
         * Returns the spherical linear interpolation between two quaternions based on the given _factor. When _factor is 0 the result is _from, when _factor is 1 the result is _to.
         */
        static SLERP(_from, _to, _factor) {
            // From: https://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/
            let cosHalfTheta = _from.w * _to.w + _from.x * _to.x + _from.y * _to.y + _from.z * _to.z;
            if (Math.abs(cosHalfTheta) >= 1)
                return _from;
            let halfTheta = Math.acos(cosHalfTheta);
            let sinHalfTheta = Math.sqrt(1 - cosHalfTheta * cosHalfTheta);
            if (Math.abs(sinHalfTheta) < 0.001) {
                let result = FudgeCore.Recycler.get(Quaternion);
                result.set((_from.x * 0.5 + _to.x * 0.5), (_from.y * 0.5 + _to.y * 0.5), (_from.z * 0.5 + _to.z * 0.5), (_from.w * 0.5 + _to.w * 0.5));
                return result;
            }
            let ratioA = Math.sin((1 - _factor) * halfTheta) / sinHalfTheta;
            let ratioB = Math.sin(_factor * halfTheta) / sinHalfTheta;
            let result = FudgeCore.Recycler.get(Quaternion);
            result.set((_from.x * ratioA + _to.x * ratioB), (_from.y * ratioA + _to.y * ratioB), (_from.z * ratioA + _to.z * ratioB), (_from.w * ratioA + _to.w * ratioB));
            return result;
        }
        //#endregion
        /**
         * Creates and returns a clone of this quaternion.
         */
        get clone() {
            let result = FudgeCore.Recycler.reuse(Quaternion);
            result.copy(this);
            return result;
        }
        /**
         * - get: return the euler angle representation of the rotation in degrees.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused internally. Create a clone to keep longer and manipulate.
         * - set: set the euler angle representation of the rotation in degrees.
         */
        get eulerAngles() {
            if (this.#eulerAnglesDirty) {
                this.#eulerAnglesDirty = false;
                if (this.x == 0 && this.y == 0 && this.z == 0 && this.w == 1) {
                    this.#eulerAngles.set(0, 0, 0);
                    return this.#eulerAngles;
                }
                // roll (x-axis rotation)
                let sinrcosp = 2 * (this.w * this.x + this.y * this.z);
                let cosrcosp = 1 - 2 * (this.x * this.x + this.y * this.y);
                this.#eulerAngles.x = Math.atan2(sinrcosp, cosrcosp);
                // pitch (y-axis rotation)
                let sinp = 2 * (this.w * this.y - this.z * this.x);
                if (Math.abs(sinp) >= 1)
                    this.#eulerAngles.y = sinp < 0 ? -Math.abs(Math.PI / 2) : Math.abs(Math.PI / 2); // use 90 degrees if out of range
                else
                    this.#eulerAngles.y = Math.asin(sinp);
                // yaw (z-axis rotation)
                let sinycosp = 2 * (this.w * this.z + this.x * this.y);
                let cosycosp = 1 - 2 * (this.y * this.y + this.z * this.z);
                this.#eulerAngles.z = Math.atan2(sinycosp, cosycosp);
                this.#eulerAngles.scale(FudgeCore.Calc.rad2deg);
            }
            return this.#eulerAngles;
        }
        set eulerAngles(_eulerAngles) {
            const halfAnglesInRadians = FudgeCore.Vector3.SCALE(_eulerAngles, FudgeCore.Calc.deg2rad / 2);
            const cosX = Math.cos(halfAnglesInRadians.x);
            const cosY = Math.cos(halfAnglesInRadians.y);
            const cosZ = Math.cos(halfAnglesInRadians.z);
            const sinX = Math.sin(halfAnglesInRadians.x);
            const sinY = Math.sin(halfAnglesInRadians.y);
            const sinZ = Math.sin(halfAnglesInRadians.z);
            this.set(sinX * cosY * cosZ - cosX * sinY * sinZ, cosX * sinY * cosZ + sinX * cosY * sinZ, cosX * cosY * sinZ - sinX * sinY * cosZ, cosX * cosY * cosZ + sinX * sinY * sinZ);
            this.#eulerAngles.copy(_eulerAngles);
            this.#eulerAnglesDirty = false;
        }
        /**
         * Normalizes this quaternion to a length of 1 (a unit quaternion) making it a valid rotation representation
         */
        normalize() {
            let length = Math.sqrt(this.x ** 2 + this.y ** 2 + this.z ** 2 + this.w ** 2);
            this.x /= length;
            this.y /= length;
            this.z /= length;
            this.w /= length;
            this.resetCache();
            return this;
        }
        /**
         * Negate this quaternion and returns it
         */
        negate() {
            this.x *= -1;
            this.y *= -1;
            this.z *= -1;
            this.w *= -1;
            this.resetCache();
            return this;
        }
        /**
         * Resets the quaternion to the identity-quaternion and clears cache. Used by the recycler to reset.
         */
        recycle() {
            this.set(0, 0, 0, 1);
        }
        /**
         * Invert this quaternion.
         */
        invert() {
            // quaternion is assumed to have unit length
            return this.conjugate();
        }
        /**
         * Conjugates this quaternion and returns it.
         */
        conjugate() {
            this.x *= -1;
            this.y *= -1;
            this.z *= -1;
            this.resetCache();
            return this;
        }
        /**
         * Multiply this quaternion with the given quaternion
         */
        multiply(_other, _fromLeft = false) {
            const a = _fromLeft ? _other : this;
            const b = _fromLeft ? this : _other;
            // from: http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm
            const ax = a.x;
            const ay = a.y;
            const az = a.z;
            const aw = a.w;
            const bx = b.x;
            const by = b.y;
            const bz = b.z;
            const bw = b.w;
            this.set(ax * bw + ay * bz - az * by + aw * bx, -ax * bz + ay * bw + az * bx + aw * by, ax * by - ay * bx + az * bw + aw * bz, -ax * bx - ay * by - az * bz + aw * bw);
            return this;
        }
        /**
         * Sets the components of this quaternion.
         */
        set(_x, _y, _z, _w) {
            this.x = _x;
            this.y = _y;
            this.z = _z;
            this.w = _w;
            this.resetCache();
            return this;
        }
        /**
         * Copies the state of the given quaternion into this quaternion.
         */
        copy(_original) {
            this.x = _original.x;
            this.y = _original.y;
            this.z = _original.z;
            this.w = _original.w;
            this.#eulerAnglesDirty = _original.#eulerAnglesDirty;
            if (!this.#eulerAnglesDirty)
                this.#eulerAngles.copy(_original.#eulerAngles);
            this.mutator = null;
            return this;
        }
        /**
         * Returns a formatted string representation of this quaternion
         */
        toString() {
            return `∆í.Quaternion(x: ${this.x}, y: ${this.y}, z: ${this.z}, w: ${this.w})`;
        }
        // currently quaternions are never serialized, so this is not needed. But maybe it will be in the future.
        serialize() {
            let serialization = this.getMutator();
            serialization.toJSON = () => { return `[${this.x}, ${this.y}, ${this.z}, ${this.w}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.x, this.y, this.z, this.w] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        getMutator() {
            if (!this.mutator)
                this.mutator = { x: this.x, y: this.y, z: this.z, w: this.w };
            return this.mutator;
        }
        async mutate(_mutator) {
            this.x = _mutator.x ?? this.x;
            this.y = _mutator.y ?? this.y;
            this.z = _mutator.z ?? this.z;
            this.w = _mutator.w ?? this.w;
            this.resetCache();
        }
        reduceMutator(_mutator) { }
        resetCache() {
            this.#eulerAnglesDirty = true;
            this.mutator = null;
        }
    }
    FudgeCore.Quaternion = Quaternion;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Class for creating random values, supporting Javascript's Math.random and a deterministig pseudo-random number generator (PRNG)
     * that can be fed with a seed and then returns a reproducable set of random numbers (if the precision of Javascript allows)
     *
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Random {
        static { this.default = new Random(); }
        /**
         * Create an instance of {@link Random}.
         * If a seed is given, LFIB4 is used as generator, reproducing a series of numbers from that seed.
         * If a function producing values between 0 and 1 is given, it will be used as generator.
         */
        constructor(_seedOrFunction) {
            this.generate = Math.random;
            if (_seedOrFunction instanceof Function)
                this.generate = _seedOrFunction;
            else if (_seedOrFunction == undefined)
                this.generate = Math.random;
            else
                //@ts-ignore
                this.generate = new FudgeCore.LFIB4(_seedOrFunction);
        }
        /**
         * Returns a normed random number, thus in the range of [0, 1[
         */
        getNorm() {
            return this.generate();
        }
        /**
         * Returns a random number in the range of given [_min, _max[
         */
        getRange(_min, _max) {
            return _min + this.generate() * (_max - _min);
        }
        /**
         * Returns a random integer number in the range of given floored [_min, _max[
         */
        getRangeFloored(_min, _max) {
            return Math.floor(this.getRange(_min, _max));
        }
        /**
         * Returns true or false randomly
         */
        getBoolean() {
            return this.generate() < 0.5;
        }
        /**
         * Returns -1 or 1 randomly
         */
        getSign() {
            return this.getBoolean() ? 1 : -1;
        }
        /**
         * Returns a randomly selected index into the given array
         */
        getIndex(_array) {
            if (_array.length > 0)
                return this.getRangeFloored(0, _array.length);
            return -1;
        }
        /**
         * Returns a randomly selected element of the given array
         */
        getElement(_array) {
            if (_array.length > 0)
                return _array[this.getIndex(_array)];
            return null;
        }
        /**
         * Removes a randomly selected element from the given array and returns it
         */
        splice(_array) {
            return _array.splice(this.getIndex(_array), 1)[0];
        }
        /**
         * Returns a randomly selected key from the given Map-instance
         */
        getKey(_map) {
            let keys = Array.from(_map.keys());
            return keys[this.getIndex(keys)];
        }
        /**
         * Returns a randomly selected property name from the given object
         */
        getPropertyName(_object) {
            let keys = Object.getOwnPropertyNames(_object);
            return keys[this.getIndex(keys)];
        }
        /**
         * Returns a randomly selected symbol from the given object, if symbols are used as keys
         */
        getPropertySymbol(_object) {
            let keys = Object.getOwnPropertySymbols(_object);
            return keys[this.getIndex(keys)];
        }
        /**
         * Returns a random three-dimensional vector in the limits of the box defined by the vectors given as [_corner0, _corner1[
         */
        getVector3(_corner0, _corner1) {
            return new FudgeCore.Vector3(this.getRange(_corner0.x, _corner1.x), this.getRange(_corner0.y, _corner1.y), this.getRange(_corner0.z, _corner1.z));
        }
        /**
         * Returns a random two-dimensional vector in the limits of the rectangle defined by the vectors given as [_corner0, _corner1[
         */
        getVector2(_corner0, _corner1) {
            return new FudgeCore.Vector2(this.getRange(_corner0.x, _corner1.x), this.getRange(_corner0.y, _corner1.y));
        }
    }
    FudgeCore.Random = Random;
    /**
     * Standard {@link Random}-instance using Math.random().
     */
    FudgeCore.random = new Random();
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores and manipulates a threedimensional vector comprised of the components x, y and z
     * ```text
     *            +y
     *             |__ +x
     *            /
     *          +z
     * ```
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019-2022 | Jonas Plotzky, HFU, 2023
     */
    class Vector3 extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0, _z = 0) {
            super();
            this.set(_x, _y, _z);
        }
        //#region Static
        /**
         * Creates and returns a vector with the given length pointing in x-direction
         */
        static X(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(_scale, 0, 0);
            return vector;
        }
        /**
         * Creates and returns a vector with the given length pointing in y-direction
         */
        static Y(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(0, _scale, 0);
            return vector;
        }
        /**
         * Creates and returns a vector with the given length pointing in z-direction
         */
        static Z(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(0, 0, _scale);
            return vector;
        }
        /**
         * Creates and returns a vector with the value 0 on each axis
         */
        static ZERO() {
            const vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(0, 0, 0); // should be set to 0 by recycler already?
            return vector;
        }
        /**
         * Creates and returns a vector of the given size on each of the three axis
         */
        static ONE(_scale = 1) {
            const vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(_scale, _scale, _scale);
            return vector;
        }
        /**
         * Creates and returns a vector through transformation of the given vector by the given matrix or rotation quaternion.
         */
        static TRANSFORMATION(_vector, _transform, _includeTranslation = true) {
            const result = FudgeCore.Recycler.reuse(Vector3);
            if (_transform instanceof FudgeCore.Matrix4x4) {
                let m = _transform.get();
                result.set(m[0] * _vector.x + m[4] * _vector.y + m[8] * _vector.z, m[1] * _vector.x + m[5] * _vector.y + m[9] * _vector.z, m[2] * _vector.x + m[6] * _vector.y + m[10] * _vector.z);
                if (_includeTranslation)
                    result.add(_transform.translation);
            }
            else {
                // From: https://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/transforms/index.htm
                // result = q * quaternion(vector.x, vector.y, vector.z, 0) * conj(q)
                // q * quaternion(vector.x, vector.y, vector.z, 0) ...
                const qx = _transform.w * _vector.x + _transform.y * _vector.z - _transform.z * _vector.y;
                const qy = _transform.w * _vector.y + _transform.z * _vector.x - _transform.x * _vector.z;
                const qz = _transform.w * _vector.z + _transform.x * _vector.y - _transform.y * _vector.x;
                const qw = -_transform.x * _vector.x - _transform.y * _vector.y - _transform.z * _vector.z;
                // ... * conj(q)
                result.set(qx * _transform.w + qw * -_transform.x + qy * -_transform.z - qz * -_transform.y, qy * _transform.w + qw * -_transform.y + qz * -_transform.x - qx * -_transform.z, qz * _transform.w + qw * -_transform.z + qx * -_transform.y - qy * -_transform.x);
            }
            return result;
        }
        /**
         * Creates and returns a vector which is a copy of the given vector scaled to the given length
         */
        static NORMALIZATION(_vector, _length = 1) {
            let magnitudeSquared = _vector.magnitudeSquared;
            if (magnitudeSquared == 0)
                throw (new RangeError("Impossible normalization"));
            let vector = _vector.clone;
            vector.scale(_length / Math.sqrt(magnitudeSquared));
            return vector;
        }
        /**
         * Returns the resulting vector attained by addition of all given vectors.
         */
        static SUM(..._vectors) {
            let result = FudgeCore.Recycler.reuse(Vector3);
            for (let vector of _vectors)
                result.set(result.x + vector.x, result.y + vector.y, result.z + vector.z);
            return result;
        }
        /**
         * Returns the result of the subtraction of two vectors.
         */
        static DIFFERENCE(_minuend, _subtrahend) {
            let vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(_minuend.x - _subtrahend.x, _minuend.y - _subtrahend.y, _minuend.z - _subtrahend.z);
            return vector;
        }
        /**
         * Returns a new vector representing the given vector scaled by the given scaling factor
         */
        static SCALE(_vector, _scaling) {
            let scaled = FudgeCore.Recycler.reuse(Vector3);
            scaled.set(_vector.x * _scaling, _vector.y * _scaling, _vector.z * _scaling);
            return scaled;
        }
        /**
         * Computes the crossproduct of 2 vectors.
         */
        static CROSS(_a, _b) {
            let vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(_a.y * _b.z - _a.z * _b.y, _a.z * _b.x - _a.x * _b.z, _a.x * _b.y - _a.y * _b.x);
            return vector;
        }
        /**
         * Computes the dotproduct of 2 vectors.
         */
        static DOT(_a, _b) {
            return _a.x * _b.x + _a.y * _b.y + _a.z * _b.z;
            ;
        }
        /**
         * Calculates and returns the reflection of the incoming vector at the given normal vector. The length of normal should be 1.
         *     __________________
         *           /|\
         * incoming / | \ reflection
         *         /  |  \
         *          normal
         *
         */
        static REFLECTION(_incoming, _normal) {
            let dot = -Vector3.DOT(_incoming, _normal);
            let reflection = Vector3.SUM(_incoming, Vector3.SCALE(_normal, 2 * dot));
            return reflection;
        }
        /**
         * Divides the dividend by the divisor component by component and returns the result
         */
        static RATIO(_dividend, _divisor) {
            let vector = FudgeCore.Recycler.reuse(Vector3);
            vector.set(_dividend.x / _divisor.x, _dividend.y / _divisor.y, _dividend.z / _divisor.z);
            return vector;
        }
        /**
         * Creates a cartesian vector from geographic coordinates
         */
        static GEO(_longitude = 0, _latitude = 0, _magnitude = 1) {
            let vector = FudgeCore.Recycler.reuse(Vector3);
            let geo = FudgeCore.Recycler.reuse(FudgeCore.Geo3);
            geo.set(_longitude, _latitude, _magnitude);
            vector.geo = geo;
            FudgeCore.Recycler.store(geo);
            return vector;
        }
        /**
         * Return the angle in degrees between the two given vectors
         */
        static ANGLE(_from, _to) {
            let angle = Math.acos(Vector3.DOT(_from, _to) / (_from.magnitude * _to.magnitude));
            return angle * FudgeCore.Calc.rad2deg;
        }
        //#endregion
        //#region Accessors
        /**
         * Returns the length of the vector
         */
        get magnitude() {
            return Math.hypot(this.x, this.y, this.z);
        }
        /**
         * Returns the square of the magnitude of the vector without calculating a square root. Faster for simple proximity evaluation.
         */
        get magnitudeSquared() {
            return Vector3.DOT(this, this);
        }
        /**
         * - get: returns a geographic representation of this vector
         * - set: adjust the cartesian values of this vector to represent the given as geographic coordinates
         */
        set geo(_geo) {
            this.set(0, 0, _geo.magnitude);
            this.transform(FudgeCore.Matrix4x4.ROTATION_X(-_geo.latitude));
            this.transform(FudgeCore.Matrix4x4.ROTATION_Y(_geo.longitude));
        }
        get geo() {
            let geo = FudgeCore.Recycler.get(FudgeCore.Geo3);
            geo.magnitude = this.magnitude;
            if (geo.magnitude === 0)
                return geo;
            geo.longitude = 180 * Math.atan2(this.x / geo.magnitude, this.z / geo.magnitude) / Math.PI;
            geo.latitude = 180 * Math.asin(this.y / geo.magnitude) / Math.PI;
            return geo;
        }
        /**
         * Creates and returns a clone of this vector.
         */
        get clone() {
            return FudgeCore.Recycler.reuse(Vector3).copy(this);
        }
        //#endregion
        /**
         * Copies the components of the given vector into this vector.
         */
        copy(_original) {
            return this.set(_original.x, _original.y, _original.z);
        }
        recycle() {
            this.set(0, 0, 0);
        }
        /**
         * Returns true if the coordinates of this and the given vector are to be considered identical within the given tolerance
         * TODO: examine, if tolerance as criterium for the difference is appropriate with very large coordinate values or if _tolerance should be multiplied by coordinate value
         */
        equals(_compare, _tolerance = Number.EPSILON) {
            if (Math.abs(this.x - _compare.x) > _tolerance)
                return false;
            if (Math.abs(this.y - _compare.y) > _tolerance)
                return false;
            if (Math.abs(this.z - _compare.z) > _tolerance)
                return false;
            return true;
        }
        /**
         * Returns true if the position described by this is within a cube with the opposite corners 1 and 2
         */
        isInsideCube(_corner1, _corner2) {
            let diagonal = Vector3.DIFFERENCE(_corner2, _corner1);
            let relative = Vector3.DIFFERENCE(this, _corner1);
            let ratio = Vector3.RATIO(relative, diagonal);
            if (ratio.x > 1 || ratio.x < 0)
                return false;
            if (ratio.y > 1 || ratio.y < 0)
                return false;
            if (ratio.z > 1 || ratio.z < 0)
                return false;
            return true;
        }
        /**
         * Returns true if the position described by this is within a sphere with the given center and radius
         */
        isInsideSphere(_center, _radius) {
            let difference = Vector3.DIFFERENCE(this, _center);
            return difference.magnitudeSquared < (_radius * _radius);
        }
        /**
         * Adds the given vector to this vector.
         */
        add(_addend) {
            this.x += _addend.x;
            this.y += _addend.y;
            this.z += _addend.z;
            return this;
        }
        /**
         * Subtracts the given vector from this vector.
         */
        subtract(_subtrahend) {
            this.x -= _subtrahend.x;
            this.y -= _subtrahend.y;
            this.z -= _subtrahend.z;
            return this;
        }
        /**
         * Scales this vector by the given scalar.
         */
        scale(_scalar) {
            this.x *= _scalar;
            this.y *= _scalar;
            this.z *= _scalar;
            return this;
        }
        /**
         * Normalizes this to the given length, 1 by default
         */
        normalize(_length = 1) {
            return this.copy(Vector3.NORMALIZATION(this, _length));
        }
        /**
         * Negates this vector by flipping the signs of its components
         */
        negate() {
            this.x = -this.x;
            this.y = -this.y;
            this.z = -this.z;
            return this;
        }
        /**
         * Sets the components of this vector and returns it.
         */
        set(_x = 0, _y = 0, _z = 0) {
            this.x = _x;
            this.y = _y;
            this.z = _z;
            return this;
        }
        /**
         * Returns an array of the components of this vector.
         */
        get() {
            return new Float32Array([this.x, this.y, this.z]);
        }
        /**
         * Transforms this vector by the given matrix or rotation quaternion.
         * Including or exluding the translation if a matrix is passed.
         * Including is the default, excluding will only rotate and scale this vector.
         */
        transform(_transform, _includeTranslation = true) {
            let transformed = Vector3.TRANSFORMATION(this, _transform, _includeTranslation);
            this.copy(transformed);
            FudgeCore.Recycler.store(transformed);
            return this;
        }
        /**
         * Drops the z-component and returns a Vector2 consisting of the x- and y-components
         */
        toVector2() {
            return new FudgeCore.Vector2(this.x, this.y);
        }
        /**
         * Reflects this vector at a given normal. See {@link Vector3.REFLECTION}
         */
        reflect(_normal) {
            const reflected = Vector3.REFLECTION(this, _normal);
            this.set(reflected.x, reflected.y, reflected.z);
            FudgeCore.Recycler.store(reflected);
            return this;
        }
        /**
         * Shuffles the components of this vector
         */
        shuffle() {
            let a = [this.x, this.y, this.z];
            this.set(FudgeCore.Random.default.splice(a), FudgeCore.Random.default.splice(a), a[0]);
            return this;
        }
        /**
         * Returns the distance bewtween this vector and the given vector
         */
        getDistance(_to) {
            let difference = Vector3.DIFFERENCE(this, _to);
            FudgeCore.Recycler.store(difference);
            return difference.magnitude;
        }
        /**
         * For each dimension, moves the component to the minimum of this and the given vector
         */
        min(_compare) {
            this.x = Math.min(this.x, _compare.x);
            this.y = Math.min(this.y, _compare.y);
            this.z = Math.min(this.z, _compare.z);
            return this;
        }
        /**
         * For each dimension, moves the component to the maximum of this and the given vector
         */
        max(_compare) {
            this.x = Math.max(this.x, _compare.x);
            this.y = Math.max(this.y, _compare.y);
            this.z = Math.max(this.z, _compare.z);
            return this;
        }
        /**
         * Returns a formatted string representation of this vector
         */
        toString() {
            let result = `(${this.x.toPrecision(5)}, ${this.y.toPrecision(5)}, ${this.z.toPrecision(5)})`;
            return result;
        }
        /**
         * Uses the standard array.map functionality to perform the given function on all components of this vector
         * and return a new vector with the results
         */
        map(_function) {
            let copy = FudgeCore.Recycler.get(Vector3);
            copy.set(...[this.x, this.y, this.z].map(_function));
            return copy;
        }
        //#region Transfer
        serialize() {
            let serialization = this.getMutator();
            // serialization.toJSON = () => { return `{ "r": ${this.r}, "g": ${this.g}, "b": ${this.b}, "a": ${this.a}}`; };
            serialization.toJSON = () => { return `[${this.x}, ${this.y}, ${this.z}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.x, this.y, this.z] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        async mutate(_mutator) {
            if (_mutator.x !== undefined)
                this.x = _mutator.x;
            if (_mutator.y !== undefined)
                this.y = _mutator.y;
            if (_mutator.z !== undefined)
                this.z = _mutator.z;
        }
        getMutator() {
            let mutator = { x: this.x, y: this.y, z: this.z };
            return mutator;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Vector3 = Vector3;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores and manipulates a fourdimensional vector comprised of the components x, y, z and w.
     * @authors Jonas Plotzky, HFU, 2023
     */
    class Vector4 extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0, _z = 0, _w = 0) {
            super();
            this.set(_x, _y, _z, _w);
        }
        /**
         * The magnitude (length) of the vector.
         */
        get magnitude() {
            return Math.hypot(this.x, this.y, this.z, this.w);
        }
        /**
         * The squared magnitude (length) of the vector. Faster for simple proximity evaluation.
         */
        get magnitudeSquared() {
            return this.dot(this);
        }
        /**
         * Creates and returns a clone of this vector.
         */
        get clone() {
            return FudgeCore.Recycler.reuse(Vector4).copy(this);
        }
        /**
         * Copies the components of the given vector into this vector.
         */
        copy(_original) {
            return this.set(_original.x, _original.y, _original.z, _original.w);
        }
        /**
         * Sets the components of this vector and returns it.
         */
        set(_x, _y, _z, _w) {
            this.x = _x;
            this.y = _y;
            this.z = _z;
            this.w = _w;
            return this;
        }
        /**
         * Returns an array of the components of this vector.
         */
        get() {
            return [this.x, this.y, this.z, this.w];
        }
        /**
         * Adds the given vector to this vector.
         */
        add(_addend) {
            this.x += _addend.x;
            this.y += _addend.y;
            this.z += _addend.z;
            this.w += _addend.w;
            return this;
        }
        /**
         * Subtracts the given vector from this vector.
         */
        subtract(_subtrahend) {
            this.x -= _subtrahend.x;
            this.y -= _subtrahend.y;
            this.z -= _subtrahend.z;
            this.w -= _subtrahend.w;
            return this;
        }
        /**
         * Scales this vector by the given scalar.
         */
        scale(_scalar) {
            this.x *= _scalar;
            this.y *= _scalar;
            this.z *= _scalar;
            this.w *= _scalar;
            return this;
        }
        /**
         * Normalizes this vector to the given length, 1 by default.
         */
        normalize(_length = 1) {
            let magnitudeSquared = this.magnitudeSquared;
            if (magnitudeSquared == 0)
                throw (new RangeError("Impossible normalization"));
            this.scale(_length / Math.sqrt(magnitudeSquared));
            return this;
        }
        /**
         * Calculates the dot product of this instance and another vector.
         */
        dot(_other) {
            return this.x * _other.x + this.y * _other.y + this.z * _other.z + this.w * _other.w;
        }
        recycle() {
            this.set(0, 0, 0, 0);
        }
        serialize() {
            return { toJSON: () => `[${this.x}, ${this.y}, ${this.z}, ${this.w}]` };
        }
        async deserialize(_serialization) {
            [this.x, this.y, this.z, this.w] = JSON.parse(_serialization);
            return this;
        }
        reduceMutator(_mutator) { }
        ;
    }
    FudgeCore.Vector4 = Vector4;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Describes a face of a {@link Mesh} by referencing three {@link Vertices} with their indizes
     * and calculates face normals.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Face {
        constructor(_vertices, _index0, _index1, _index2) {
            this.indices = [];
            this.angles = [];
            this.indices = [_index0, _index1, _index2];
            this.vertices = _vertices;
            this.calculateNormals();
        }
        /**
         * Returns the position of the vertex referenced by the given index
         */
        getPosition(_index) {
            return this.vertices.position(this.indices[_index]);
        }
        /**
         * must be coplanar
         */
        isInside(_point) {
            let diffs = [];
            for (let index of this.indices) {
                let diff = FudgeCore.Vector3.DIFFERENCE(this.vertices.position(index), _point);
                diffs.push(diff);
            }
            let n0 = FudgeCore.Vector3.CROSS(diffs[1], diffs[0]);
            let n1 = FudgeCore.Vector3.CROSS(diffs[2], diffs[1]);
            let n2 = FudgeCore.Vector3.CROSS(diffs[0], diffs[2]);
            let dot1 = FudgeCore.Vector3.DOT(n0, n1);
            let dot2 = FudgeCore.Vector3.DOT(n0, n2);
            return !(dot1 < 0 || dot2 < 0);
        }
        calculateNormals() {
            let trigon = this.indices.map((_index) => this.vertices.position(_index));
            let v1 = FudgeCore.Vector3.DIFFERENCE(trigon[1], trigon[0]);
            let v2 = FudgeCore.Vector3.DIFFERENCE(trigon[2], trigon[0]);
            this.normalUnscaled = FudgeCore.Vector3.CROSS(v1, v2);
            this.normal = FudgeCore.Vector3.NORMALIZATION(this.normalUnscaled);
            this.angles.push(FudgeCore.Vector3.ANGLE(v1, v2), FudgeCore.Vector3.ANGLE(FudgeCore.Vector3.DIFFERENCE(trigon[2], trigon[1]), FudgeCore.Vector3.DIFFERENCE(trigon[0], trigon[1])), FudgeCore.Vector3.ANGLE(FudgeCore.Vector3.DIFFERENCE(trigon[0], trigon[2]), FudgeCore.Vector3.DIFFERENCE(trigon[1], trigon[2])));
        }
    }
    FudgeCore.Face = Face;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Abstract base class for all meshes.
     * Meshes provide indexed vertices, the order of indices to create trigons and normals, and texture coordinates
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019/22
     */
    let Mesh = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorMesh).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.Mutable;
        var Mesh = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                Mesh = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
            }
            /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
            static { this.baseClass = Mesh; }
            /** list of all the subclasses derived from this class, if they registered properly*/
            static { this.subclasses = []; }
            #renderMesh;
            constructor(_name = "Mesh") {
                super();
                // TODO: rename vertices to verticesSmooth or just cloud, and cloud to vertices
                this.idResource = undefined;
                this.name = "Mesh";
                // base structure for meshes in FUDGE
                this.vertices = new FudgeCore.Vertices();
                this.faces = [];
                this.name = _name;
                this.clear();
                FudgeCore.Project.register(this);
            }
            static registerSubclass(_subClass) { return Mesh.subclasses.push(_subClass) - 1; }
            get renderMesh() {
                if (this.#renderMesh == null)
                    this.#renderMesh = new FudgeCore.RenderMesh(this);
                return this.#renderMesh;
            }
            get boundingBox() {
                if (this.∆íbox == null)
                    this.∆íbox = this.createBoundingBox();
                return this.∆íbox;
            }
            get radius() {
                if (this.∆íradius == null)
                    this.∆íradius = this.createRadius();
                return this.∆íradius;
            }
            /**
             * Injected by {@link RenderInjectorMesh}.
             * Used by the render system.
             * @internal
             */
            useRenderBuffers(_shader, _mtxMeshToWorld, _mtxMeshToView, _id) { return null; /* injected by RenderInjector*/ }
            /**
             * Injected by {@link RenderInjectorMesh}.
             * Used by the render system.
             * @internal
             */
            getRenderBuffers() { return null; /* injected by RenderInjector*/ }
            /**
             * Injected by {@link RenderInjectorMesh}.
             * Used by the render system.
             * @internal
             */
            deleteRenderBuffers(_renderBuffers) { }
            /**
             * Clears the bounds of this mesh aswell as the buffers of the associated {@link RenderMesh}.
             */
            clear() {
                this.∆íbox = undefined;
                this.∆íradius = undefined;
                this.deleteRenderBuffers(this.renderMesh.buffers);
                this.renderMesh.clear();
            }
            //#region Transfer
            // Serialize/Deserialize for all meshes that calculate without parameters
            serialize() {
                let serialization = {
                    idResource: this.idResource,
                    name: this.name,
                    type: this.type // store for editor view
                }; // no data needed ...
                return serialization;
            }
            async deserialize(_serialization) {
                FudgeCore.Project.register(this, _serialization.idResource);
                this.name = _serialization.name;
                // type is an accessor and must not be deserialized
                return this;
            }
            reduceMutator(_mutator) {
                // TODO: so much to delete... rather just gather what to mutate
                delete _mutator.∆íbox;
                delete _mutator.∆íradius;
                delete _mutator.renderBuffers;
            }
            //#endregion
            createRadius() {
                //TODO: radius and bounding box could be created on construction of vertex-array
                let radius = 0;
                for (let i = 0; i < this.vertices.length; i++) {
                    radius = Math.max(radius, this.vertices.position(i).magnitudeSquared);
                }
                return Math.sqrt(radius);
            }
            createBoundingBox() {
                let box = FudgeCore.Recycler.get(FudgeCore.Box);
                box.set();
                for (let i = 0; i < this.vertices.length; i++) {
                    let point = this.vertices.position(i);
                    box.expand(point);
                }
                return box;
            }
            static {
                __runInitializers(_classThis, _classExtraInitializers);
            }
        };
        return Mesh = _classThis;
    })();
    FudgeCore.Mesh = Mesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a simple cube with edges of length 1, each face consisting of two trigons
     * ```text
     *       (12) 4____7  (11)
     *       (8) 0/__3/| (10)
     *       (15) ||5_||6 (14)
     *       (9) 1|/_2|/ (13)
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class MeshCube extends FudgeCore.Mesh {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshCube); }
        constructor(_name = "MeshCube") {
            super(_name);
            // no shared vertices, corners need three normals for Phong and Gouraud
            this.vertices = new FudgeCore.Vertices(
            // front vertices
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.5, 0.5), new FudgeCore.Vector2(0, 0)), // 0
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, -0.5, 0.5), new FudgeCore.Vector2(0, 1)), // 1
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, -0.5, 0.5), new FudgeCore.Vector2(1, 1)), // 2
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.5, 0.5), new FudgeCore.Vector2(1, 0)) //3
            );
            // generate vertices on sides
            for (let angle = 90; angle < 360; angle += 90) {
                let transform = FudgeCore.Matrix4x4.ROTATION(FudgeCore.Vector3.Y(angle));
                let side = this.vertices.slice(0, 4).map((_v) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, transform), _v.uv));
                this.vertices.push(...side);
            }
            // generate vertices for top and bottom
            for (let angle = 90; angle < 360; angle += 180) {
                let transform = FudgeCore.Matrix4x4.ROTATION(FudgeCore.Vector3.X(angle));
                let side = this.vertices.slice(0, 4).map((_v) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, transform), _v.uv));
                this.vertices.push(...side);
            }
            this.faces = [];
            for (let i = 0; i < 24; i += 4)
                // generate faces
                this.faces.push(...new FudgeCore.Quad(this.vertices, i + 0, i + 1, i + 2, i + 3).faces);
        }
    }
    FudgeCore.MeshCube = MeshCube;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a flat polygon. All trigons share vertex 0, so careful design is required to create concave polygons.
     * Vertex 0 is also associated with the face normal.
     * ```text
     *             0
     *           1‚ï±|‚ï≤  4 ...
     *            ‚ï≤|_‚ï≤‚ï±
     *            2   3
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022
     */
    class MeshPolygon extends FudgeCore.Mesh {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshPolygon); }
        static { this.shapeDefault = [
            new FudgeCore.Vector2(-1, -1),
            new FudgeCore.Vector2(1, -1),
            new FudgeCore.Vector2(0, 1)
        ]; }
        constructor(_name = "MeshPolygon", _shape = MeshPolygon.shapeDefault, _fitTexture = true) {
            super(_name);
            this.shape = new FudgeCore.MutableArray(FudgeCore.Vector2);
            this.create(_shape, _fitTexture);
        }
        get minVertices() {
            return 3;
        }
        /**
         * Create this mesh from the given vertices.
         */
        create(_shape = [], _fitTexture = true) {
            this.shape = FudgeCore.MutableArray.from(_shape.map(_vertex => _vertex.clone));
            this.clear();
            this.fitTexture = _fitTexture;
            if (_shape.length < this.minVertices) {
                FudgeCore.Debug.warn(`At least ${this.minVertices} vertices needed to construct MeshPolygon, default trigon used`);
                this.create(MeshPolygon.shapeDefault, true);
                return;
            }
            let shape = _shape;
            let min = FudgeCore.Vector2.ZERO();
            let max = FudgeCore.Vector2.ZERO();
            this.vertices = new FudgeCore.Vertices();
            for (let vertex of shape) {
                this.vertices.push(new FudgeCore.Vertex(vertex.toVector3()));
                min.x = Math.min(min.x, vertex.x);
                max.x = Math.max(max.x, vertex.x);
                min.y = Math.min(min.y, vertex.y);
                max.y = Math.max(max.y, vertex.y);
            }
            let size = new FudgeCore.Vector2(max.x - min.x, max.y - min.y);
            if (this.fitTexture) {
                for (let i = 0; i < shape.length; i++) {
                    let textureUV = FudgeCore.Vector2.DIFFERENCE(shape[i], min);
                    this.vertices[i].uv = new FudgeCore.Vector2(textureUV.x / size.x, 1 - textureUV.y / size.y);
                }
            }
            else {
                _shape.forEach((_vertex, _i) => this.vertices[_i].uv = new FudgeCore.Vector2(_vertex.x, -_vertex.y));
            }
            this.faces = [];
            for (let i = 2; i < this.vertices.length; i++)
                this.faces.push(new FudgeCore.Face(this.vertices, i - 1, i, 0));
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.shape = FudgeCore.Serializer.serializeArray(FudgeCore.Vector2, this.shape);
            serialization.fitTexture = this.fitTexture;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let vectors = await FudgeCore.Serializer.deserializeArray(_serialization.shape);
            this.create(vectors, _serialization.fitTexture);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            this.create(this.shape, this.fitTexture);
            this.dispatchEvent(new Event("mutate" /* EVENT.MUTATE */));
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
        }
    }
    FudgeCore.MeshPolygon = MeshPolygon;
})(FudgeCore || (FudgeCore = {}));
///<reference path="MeshPolygon.ts"/>
var FudgeCore;
///<reference path="MeshPolygon.ts"/>
(function (FudgeCore) {
    /**
     * Generates an extrusion of a polygon by a series of transformations
     * ```text
     *                      ____
     * Polygon         ____‚ï±‚ï≤   ‚ï≤                             y
     * Transform 0  ‚Üí ‚ï± ‚ï≤__‚ï≤_‚ï≤___‚ï≤ ‚Üê Transform 2          z __‚îÇ
     * (base)         ‚ï≤_‚ï±__‚ï± ‚ï±   ‚ï±   (lid)                     ‚ï≤
     *     Transform 1  ‚Üí  ‚ï≤‚ï±___‚ï±                               x
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022
     */
    class MeshExtrusion extends FudgeCore.MeshPolygon {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshExtrusion); }
        static { this.mtxDefaults = [
            FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Vector3.Z(0.5)),
            FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Vector3.Z(-0.5))
        ]; }
        constructor(_name = "MeshExtrusion", _vertices = FudgeCore.MeshPolygon.shapeDefault, _mtxTransforms = MeshExtrusion.mtxDefaults, _fitTexture = true) {
            super(_name, _vertices, _fitTexture);
            this.mtxTransforms = new FudgeCore.MutableArray(FudgeCore.Matrix4x4);
            this.extrude(_mtxTransforms);
            // console.log("Mutator", this.getMutator());
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.transforms = FudgeCore.Serializer.serializeArray(FudgeCore.Matrix4x4, this.mtxTransforms);
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let mtxTransforms;
            if (_serialization.transforms)
                mtxTransforms = await FudgeCore.Serializer.deserializeArray(_serialization.transforms);
            this.extrude(mtxTransforms);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            this.extrude(this.mtxTransforms);
            this.dispatchEvent(new Event("mutate" /* EVENT.MUTATE */));
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
        }
        //#endregion
        extrude(_mtxTransforms = MeshExtrusion.mtxDefaults) {
            this.mtxTransforms = FudgeCore.MutableArray.from(_mtxTransforms);
            let nTransforms = _mtxTransforms.length;
            let nVerticesShape = this.vertices.length;
            // create new vertex cloud, current cloud holds MeshPolygon
            let vertices = new FudgeCore.Vertices();
            // create base by transformation of polygon with first transform
            let base = this.vertices.map((_v) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, _mtxTransforms[0], true), _v.uv));
            vertices.push(...base);
            // create lid by transformation of polygon with last transform
            let lid = this.vertices.map((_v) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, _mtxTransforms[nTransforms - 1], true), _v.uv));
            vertices.push(...lid);
            // recreate base faces to recalculate normals
            this.faces = this.faces.map((_face) => new FudgeCore.Face(vertices, _face.indices[0], _face.indices[1], _face.indices[2]));
            // create the lid faces using the indices of the base faces, but with an index offset and reverse order of indices
            this.faces.push(...this.faces.map(_face => new FudgeCore.Face(vertices, _face.indices[2] + nVerticesShape, _face.indices[1] + nVerticesShape, _face.indices[0] + nVerticesShape)));
            for (let t = 0; t < nTransforms; t++) {
                let mtxTransform = _mtxTransforms[t];
                let referToClose = vertices.length;
                let wrap = this.vertices.map((_v, _i) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, mtxTransform, true), new FudgeCore.Vector2(_i / nVerticesShape, t / nTransforms)));
                vertices.push(...wrap);
                vertices.push(new FudgeCore.Vertex(referToClose, new FudgeCore.Vector2(1, t / nTransforms)));
                // if (i > 0 && i < nTransforms - 1)
                //   vertices.push(...wrap.map((_vector: Vector3) => _vector.clone)); <- no slicing for flat shading yet...
            }
            // create indizes for wrapper
            for (let t = 0; t < nTransforms - 1; t++)
                for (let i = 0; i < nVerticesShape; i++) {
                    let index = +2 * nVerticesShape // base & lid are offsets 
                        + t * (nVerticesShape + 1) // offset for each transformation
                        + i;
                    let quad = new FudgeCore.Quad(vertices, index, index + nVerticesShape + 1, index + nVerticesShape + 2, index + 1, FudgeCore.QUADSPLIT.AT_0);
                    this.faces.push(...quad.faces);
                }
            this.vertices = vertices;
            return;
        }
    }
    FudgeCore.MeshExtrusion = MeshExtrusion;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A mesh loaded from an FBX-File.
     * @authors Matthias Roming, HFU, 2023 | Jonas Plotzky, HFU, 2023
     */
    class MeshFBX extends FudgeCore.mixinSerializableResourceExternal(FudgeCore.Mesh) {
        async load(_url = this.url, _iMesh = this.iMesh) {
            this.clear();
            this.url = _url;
            this.iMesh = _iMesh;
            const loader = await FudgeCore.FBXLoader.LOAD(this.url.toString());
            const geometryFBX = (loader.fbx.objects.geometries[_iMesh] ||
                loader.fbx.objects.geometries.find(_object => _object.name == this.name) ||
                loader.fbx.objects.models.find(_object => _object.name == this.name && _object.subtype == "Mesh").children[0]).load();
            if (geometryFBX)
                this.name = geometryFBX.name.length > 0 ? geometryFBX.name : geometryFBX.parents[0].name;
            let positions = [];
            let vertexBuffer = geometryFBX.Vertices;
            for (let iVertex = 0; iVertex < vertexBuffer.length; iVertex += 3) {
                positions.push(new FudgeCore.Vector3(vertexBuffer[iVertex + 0], vertexBuffer[iVertex + 1], vertexBuffer[iVertex + 2]));
            }
            let uvs = [];
            if (geometryFBX.LayerElementUV) {
                let uvBuffer = geometryFBX.LayerElementUV.UV;
                for (let iuv = 0; iuv < uvBuffer.length; iuv += 2) {
                    uvs.push(new FudgeCore.Vector2(uvBuffer[iuv], 1 - uvBuffer[iuv + 1]));
                }
            }
            let normals = [];
            if (geometryFBX.LayerElementNormal) {
                let normalBuffer = geometryFBX.LayerElementNormal.Normals;
                for (let iNormal = 0; iNormal < normalBuffer.length; iNormal += 3) {
                    normals.push(new FudgeCore.Vector3(normalBuffer[iNormal], normalBuffer[iNormal + 1], normalBuffer[iNormal + 2]));
                }
            }
            let mapVertexToIndex = new Map();
            let newVertexIndices = [];
            let iPolygon = 0;
            let isEndOfPolygon = false;
            let polygon = [];
            geometryFBX.PolygonVertexIndex.forEach((_iVertex, _iPolygonVertex) => {
                if (_iVertex < 0) {
                    _iVertex = _iVertex ^ -1;
                    isEndOfPolygon = true;
                }
                let position = positions[_iVertex];
                let uv = uvs[this.getDataIndex(geometryFBX.LayerElementUV, _iVertex, iPolygon, _iPolygonVertex)];
                let vertexKey = position.toString() + uv.toString();
                if (!mapVertexToIndex.has(vertexKey)) {
                    let normal = normals[this.getDataIndex(geometryFBX.LayerElementNormal, _iVertex, iPolygon, _iPolygonVertex)];
                    this.vertices.push(new FudgeCore.Vertex(position, uv, normal));
                    mapVertexToIndex.set(vertexKey, this.vertices.length - 1);
                    if (!newVertexIndices[_iVertex])
                        newVertexIndices[_iVertex] = [];
                    newVertexIndices[_iVertex].push(this.vertices.length - 1);
                }
                polygon.push(mapVertexToIndex.get(vertexKey));
                if (isEndOfPolygon) {
                    if (polygon.length == 3) {
                        this.faces.push(new FudgeCore.Face(this.vertices, polygon[0], polygon[1], polygon[2]));
                    }
                    else if (polygon.length == 4) {
                        let quad = new FudgeCore.Quad(this.vertices, polygon[0], polygon[1], polygon[2], polygon[3]);
                        this.faces.push(...quad.faces);
                    }
                    else {
                        for (let i = 2; i < polygon.length; i++)
                            this.faces.push(new FudgeCore.Face(this.vertices, polygon[0], polygon[i - 1], polygon[i - 0]));
                        // console.warn(`${MeshLoaderFBX.name}: Polygons with more than 4 vertices are not supported.`);
                    }
                    polygon = [];
                    isEndOfPolygon = false;
                    iPolygon++;
                }
            });
            if (geometryFBX.children?.[0].type == "Deformer") {
                const fbxDeformer = geometryFBX.children[0];
                const skeleton = await loader.getSkeleton(fbxDeformer.children[0].children[0]); // Deformer.SubDeformer.LimbNode
                this.createBones(fbxDeformer, skeleton, this.vertices, newVertexIndices);
            }
            return this;
        }
        serialize() {
            const serialization = super.serialize();
            serialization.iMesh = this.iMesh;
            return serialization;
        }
        async deserialize(_serialization) {
            this.iMesh = _serialization.iMesh;
            return super.deserialize(_serialization);
        }
        getDataIndex(_layerElement, _iVertex, _iPolygon, _iPolygonVertex) {
            let index = _layerElement.MappingInformationType == "ByVertex" ?
                _iVertex :
                _layerElement.MappingInformationType == "ByPolygon" ?
                    _iPolygon :
                    _iPolygonVertex;
            if (_layerElement.ReferenceInformationType === 'IndexToDirect') {
                let indices = _layerElement.UVIndex || _layerElement.NormalsIndex;
                index = indices[index];
            }
            return index;
        }
        createBones(_deformerFBX, _skeleton, _vertices, _newVertexIndices) {
            for (const fbxSubDeformer of _deformerFBX.children) {
                fbxSubDeformer.load();
                if (fbxSubDeformer.Indexes)
                    for (let iBoneInfluence = 0; iBoneInfluence < fbxSubDeformer.Indexes.length; iBoneInfluence++) {
                        const iVertex = fbxSubDeformer.Indexes[iBoneInfluence];
                        for (const iVertexNew of _newVertexIndices ? _newVertexIndices[iVertex] : [iVertex]) {
                            (_vertices[iVertexNew].bones || (_vertices[iVertexNew].bones = [])).push({
                                index: _skeleton.indexOf(fbxSubDeformer.children[0].name),
                                weight: fbxSubDeformer.Weights[iBoneInfluence] || 1
                            });
                        }
                    }
            }
        }
    }
    FudgeCore.MeshFBX = MeshFBX;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /** Allows to create custom meshes from given Data */
    class MeshFromData extends FudgeCore.Mesh {
        constructor(_vertices, _textureUVs, _indices, _faceNormals) {
            super();
            this.verticesToSet = _vertices;
            this.textureUVsToSet = _textureUVs;
            this.indicesToSet = _indices;
            this.faceNormalsToSet = _faceNormals;
        }
        createVertices() {
            return this.verticesToSet;
        }
        createTextureUVs() {
            return this.textureUVsToSet;
        }
        createIndices() {
            return this.indicesToSet;
        }
        createFlatNormals() {
            return this.faceNormalsToSet;
        }
    }
    FudgeCore.MeshFromData = MeshFromData;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Mesh} loaded from a glTF-File.
     * @authors Jonas Plotzky, HFU, 2024
     */
    class MeshGLTF extends FudgeCore.mixinSerializableResourceExternal(FudgeCore.Mesh) {
        async load(_url = this.url, _name = this.name, _iPrimitive = this.iPrimitive) {
            this.url = _url;
            this.name = _name;
            this.iPrimitive = _iPrimitive;
            return FudgeCore.GLTFLoader.loadResource(this);
        }
        serialize() {
            const serialization = super.serialize();
            serialization.iPrimitive = this.iPrimitive;
            return serialization;
        }
        deserialize(_serialization) {
            this.iPrimitive = _serialization.iPrimitive;
            return super.deserialize(_serialization);
        }
    }
    FudgeCore.MeshGLTF = MeshGLTF;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A mesh loaded from an OBJ-file.
     * Simple Wavefront OBJ import. Takes a wavefront obj string. To Load from a file url, use the
     * static LOAD Method. Currently only works with triangulated Meshes
     * (activate 'Geomentry ‚Üí Triangulate Faces' in Blenders obj exporter)
     * @todo Load Materials, Support Quads
     * @authors Simon Storl-Schulke 2021 | Luis Keck, HFU, 2021 | Jirka Dell'Oro-Friedl, HFU, 2021-2022 | Matthias Roming, HFU, 2023 | Jonas Plotzky, HFU, 2023
     */
    class MeshOBJ extends FudgeCore.mixinSerializableResourceExternal(FudgeCore.Mesh) {
        async load(_url = this.url) {
            const url = new URL(_url.toString(), FudgeCore.Project.baseURL).toString();
            const data = await (await fetch(url)).text();
            this.name = url.split("/").pop();
            this.url = _url;
            const lines = data.split("\n");
            const indices = [];
            const positions = [];
            const uvs = [];
            const normals = [];
            const norms = [];
            const vertices = new FudgeCore.Vertices();
            const faces = [];
            const mapPositionUVNormalToIndex = {};
            const mapPositionNormalToIndex = {};
            // TODO: think about creating the needed buffers for rendermesh here already...
            for (let line of lines) {
                const parts = line.trim().split(" ");
                switch (parts.shift()) {
                    case "v": //Vertex - example: v 0.70 -0.45 -0.52         
                        positions.push(new FudgeCore.Vector3(...parts.map(_value => +_value)));
                        break;
                    case "vn": //Normal - example: vn 0.00 0.00 1.00
                        normals.push(new FudgeCore.Vector3(...parts.map(_value => +_value)));
                        break;
                    case "vt": //Texcoord - example: vt 0.545454 0.472382
                        uvs.push(new FudgeCore.Vector2(...parts.map((_value, _index) => +_value * (_index == 1 ? -1 : 1))));
                        break;
                    case "f": /*Face Indices - example: f 1/1/1 2/2/1 3/3/1 --> vertex1/texcoord1/normal1 vertex2/texcoord2/normal2 vertex3/texcoord3/normal3*/
                        for (let i = 0; i < 3; i++) {
                            let key = parts[i];
                            let index = mapPositionUVNormalToIndex[key];
                            if (index === undefined) {
                                index = vertices.length;
                                const vertexInfo = parts[i].split("/");
                                let position = positions[+vertexInfo[0] - 1]; // obj uses 1-based indices
                                let uv = uvs[+vertexInfo[1] - 1] ?? undefined;
                                let normal = normals[+vertexInfo[2] - 1] ?? undefined;
                                if (normal)
                                    norms.push(normal.x, normal.y, normal.z);
                                let keyPosNorm = `${vertexInfo[0]}/${vertexInfo[2]}`;
                                vertices.push(new FudgeCore.Vertex(mapPositionNormalToIndex[keyPosNorm] ?? position, uv, normal));
                                mapPositionUVNormalToIndex[key] = index;
                                if (mapPositionNormalToIndex[keyPosNorm] == undefined)
                                    mapPositionNormalToIndex[keyPosNorm] = index;
                            }
                            indices.push(index);
                        }
                        try {
                            faces.push(new FudgeCore.Face(vertices, indices[indices.length - 2], indices[indices.length - 1], indices[indices.length - 3]));
                        }
                        catch (_e) {
                            FudgeCore.Debug.fudge("Face excluded", _e.message);
                        }
                        break;
                }
            }
            this.clear();
            this.vertices = vertices;
            this.faces = faces;
            if (norms.length > 0) // TODO: rendermesh should be able to handle undefined normals correctly, i.e. calculate them only if they are not present in the vertices
                this.renderMesh.normals = new Float32Array(norms);
            // _mesh.renderMesh.indices = new Uint16Array(indices); // doens't seem to affect scene loading time...
            return this;
        }
    }
    FudgeCore.MeshOBJ = MeshOBJ;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a simple pyramid with edges at the base of length 1 and a height of 1. The sides consisting of one, the base of two trigons
     * ```text
     *               4
     *              /\`.
     *            3/__\_\ 2
     *           0/____\/1
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class MeshPyramid extends FudgeCore.Mesh {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshPyramid); }
        constructor(_name = "MeshPyramid") {
            super(_name);
            // this.create();
            this.vertices = new FudgeCore.Vertices(
            // ground vertices
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.0, 0.5), new FudgeCore.Vector2(0, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.0, 0.5), new FudgeCore.Vector2(1, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.0, -0.5), new FudgeCore.Vector2(1, 0)), new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.0, -0.5), new FudgeCore.Vector2(0, 0)), 
            // tip (vertex #4)
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.0, 1.0, 0.0), new FudgeCore.Vector2(0.5, 0.5)), 
            // floor again for downside texture
            new FudgeCore.Vertex(0, new FudgeCore.Vector2(0, 0)), new FudgeCore.Vertex(1, new FudgeCore.Vector2(1, 0)), new FudgeCore.Vertex(2, new FudgeCore.Vector2(1, 1)), new FudgeCore.Vertex(3, new FudgeCore.Vector2(0, 1)));
            this.faces = [
                new FudgeCore.Face(this.vertices, 4, 0, 1),
                new FudgeCore.Face(this.vertices, 4, 1, 2),
                new FudgeCore.Face(this.vertices, 4, 2, 3),
                new FudgeCore.Face(this.vertices, 4, 3, 0),
                new FudgeCore.Face(this.vertices, 5 + 0, 5 + 2, 5 + 1),
                new FudgeCore.Face(this.vertices, 5 + 0, 5 + 3, 5 + 2)
            ];
        }
    }
    FudgeCore.MeshPyramid = MeshPyramid;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a simple quad with edges of length 1, the face consisting of two trigons
     * ```text
     *        0 __ 3
     *         |_\|
     *        1    2
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019-2022
     */
    class MeshQuad extends FudgeCore.MeshPolygon {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshQuad); }
        static { this.shape = [
            new FudgeCore.Vector2(-0.5, 0.5), new FudgeCore.Vector2(-0.5, -0.5), new FudgeCore.Vector2(0.5, -0.5), new FudgeCore.Vector2(0.5, 0.5)
        ]; }
        constructor(_name = "MeshQuad") {
            super(_name, MeshQuad.shape);
        }
        // // flat equals smooth
        // public get verticesFlat(): Float32Array { return this.vertices; }
        // public get indicesFlat(): Uint16Array { return this.indices; }
        // public get normalsFlat(): Float32Array { return this.normalsVertex; }
        //#region Transger
        serialize() {
            let serialization = this.getMutator();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.create(MeshQuad.shape, true); // this seems to be dispatched doubled while deserializing the resources
            return this;
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.shape;
            delete _mutator.fitTexture;
        }
    }
    FudgeCore.MeshQuad = MeshQuad;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Information about the vertical projection of a given position onto the terrain
     */
    class TerrainInfo {
    }
    FudgeCore.TerrainInfo = TerrainInfo;
    /**
     * A terrain spreads out in the x-z-plane, y is the height derived from the heightmap function.
     * The terrain is always 1 in size in all dimensions, fitting into the unit-cube.
     * Resolution determines the number of quads in x and z dimension, scale the factor applied to the x,z-coordinates passed to the heightmap function.
     * Standard function is the simplex noise implemented with FUDGE, but another function can be given.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022 | Simon Storl-Schulke, HFU, 2020 | Moritz Beaugrand, HFU, 2021
     */
    class MeshTerrain extends FudgeCore.Mesh {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshTerrain); }
        constructor(_name = "MeshTerrain", _resolution = FudgeCore.Vector2.ONE(2), _scaleInput = FudgeCore.Vector2.ONE(), _functionOrSeed = 0) {
            super(_name);
            this.heightMapFunction = null;
            this.create(_resolution, _scaleInput, _functionOrSeed);
        }
        /**
         * Create this mesh from the given parameters
         */
        create(_resolution = FudgeCore.Vector2.ONE(2), _scaleInput = FudgeCore.Vector2.ONE(), _functionOrSeed = 0) {
            this.clear();
            this.seed = undefined;
            this.resolution = new FudgeCore.Vector2(Math.round(_resolution.x), Math.round(_resolution.y));
            this.scale = _scaleInput.clone;
            if (_functionOrSeed instanceof Function)
                this.heightMapFunction = _functionOrSeed;
            else if (typeof (_functionOrSeed) == "number") {
                this.seed = _functionOrSeed;
                let prng = new FudgeCore.Random(this.seed);
                this.heightMapFunction = new FudgeCore.Noise2(() => prng.getNorm()).sample; // TODO call PRNG
            }
            else
                this.heightMapFunction = new FudgeCore.Noise2().sample;
            this.vertices = new FudgeCore.Vertices();
            //Iterate over each cell to generate grid of vertices
            for (let z = 0; z <= this.resolution.y; z++) {
                for (let x = 0; x <= this.resolution.x; x++) {
                    let xNorm = x / this.resolution.x;
                    let zNorm = z / this.resolution.y;
                    this.vertices.push(new FudgeCore.Vertex(new FudgeCore.Vector3(xNorm - 0.5, this.heightMapFunction(xNorm * this.scale.x, zNorm * this.scale.y), zNorm - 0.5), new FudgeCore.Vector2(xNorm, zNorm)));
                }
            }
            let quads = [];
            let split = FudgeCore.QUADSPLIT.AT_0;
            for (let z = 0; z < this.resolution.y; z++) {
                for (let x = 0; x < this.resolution.x; x++) {
                    quads.push(new FudgeCore.Quad(this.vertices, (x + 0) + (z + 0) * (this.resolution.x + 1), (x + 0) + (z + 1) * (this.resolution.x + 1), (x + 1) + (z + 1) * (this.resolution.x + 1), (x + 1) + (z + 0) * (this.resolution.x + 1), split));
                    split = (split == FudgeCore.QUADSPLIT.AT_0) ? FudgeCore.QUADSPLIT.AT_1 : FudgeCore.QUADSPLIT.AT_0;
                }
                if (this.resolution.x % 2 == 0) // reverse last split change if x-resolution is even
                    split = (split == FudgeCore.QUADSPLIT.AT_0) ? FudgeCore.QUADSPLIT.AT_1 : FudgeCore.QUADSPLIT.AT_0;
            }
            this.faces = quads.flatMap((_quad) => _quad.faces);
        }
        /**
         * Returns information about the vertical projection of the given position onto the terrain.
         * Pass the overall world transformation of the terrain if the position is given in world coordinates.
         * If at hand, pass the inverse too to avoid unnecessary calculation.
         */
        getTerrainInfo(_position, _mtxWorld = FudgeCore.Matrix4x4.IDENTITY(), _mtxInverse) {
            if (!_mtxInverse)
                _mtxInverse = FudgeCore.Matrix4x4.INVERSE(_mtxWorld);
            let terrainInfo = new TerrainInfo;
            let posLocal = FudgeCore.Vector3.TRANSFORMATION(_position, _mtxInverse, true);
            let z = Math.floor((posLocal.z + 0.5) * this.resolution.y);
            let x = Math.floor((posLocal.x + 0.5) * this.resolution.x);
            if (z < 0 || z > this.resolution.y - 1 || x < 0 || x > this.resolution.x - 1)
                return null;
            let index = (z * this.resolution.x + x) * 2;
            let face = this.faces[index];
            let ray = new FudgeCore.Ray(FudgeCore.Vector3.Y(), posLocal);
            let point = ray.intersectFacePlane(face);
            if (!face.isInside(point)) {
                index++;
                face = this.faces[index];
                point = ray.intersectFacePlane(face);
            }
            terrainInfo.index = index;
            terrainInfo.positionFace = point;
            terrainInfo.position = FudgeCore.Vector3.TRANSFORMATION(point, _mtxWorld, true);
            terrainInfo.normal = FudgeCore.Vector3.TRANSFORMATION(face.normal, FudgeCore.Matrix4x4.TRANSPOSE(_mtxInverse), false);
            terrainInfo.distance = _position.y - terrainInfo.position.y;
            terrainInfo.grid = this.getGridFromFaceIndex(index);
            return terrainInfo;
        }
        /**
         * Returns the grid coordinates of the quad the given face belongs to.
         */
        getGridFromFaceIndex(_index) {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector2);
            let iQuad = Math.floor(_index / 2);
            result.set(iQuad % this.resolution.y, Math.floor(iQuad / this.resolution.x));
            return result;
        }
        /**
         * Returns the indices of the two faces forming the quad the given grid position belongs to.
         */
        getFaceIndicesFromGrid(_grid) {
            let iQuad = _grid.y * 2 * this.resolution.x + _grid.x * 2;
            return [iQuad, iQuad + 1];
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.seed = this.seed;
            serialization.scale = this.scale.serialize();
            serialization.resolution = this.resolution.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            await this.resolution.deserialize(_serialization.resolution);
            await this.scale.deserialize(_serialization.scale);
            this.seed = _serialization.seed;
            this.create(this.resolution, this.scale, this.seed);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            super.mutate(_mutator, _selection, _dispatchMutate);
            this.create(this.resolution, this.scale, this.seed);
        }
    }
    FudgeCore.MeshTerrain = MeshTerrain;
})(FudgeCore || (FudgeCore = {}));
///<reference path="MeshTerrain.ts"/>
var FudgeCore;
///<reference path="MeshTerrain.ts"/>
(function (FudgeCore) {
    /**
     * Generates a planar Grid and applies a Heightmap-Function to it.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021 | Moritz Beaugrand, HFU, 2020
     */
    class MeshRelief extends FudgeCore.MeshTerrain {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshRelief); }
        constructor(_name = "MeshRelief", _texture = null) {
            super(_name, FudgeCore.Vector2.ONE(2), undefined, (_x, _z) => 0);
            this.texture = null;
            this.setTexture(_texture);
        }
        static createHeightMapFunction(_texture) {
            let array = MeshRelief.textureToClampedArray(_texture);
            let heightMapFunction = (_x, _z) => {
                let pixel = Math.round(_z * _texture.image.width + _x);
                return array[pixel * 4] / 255;
            };
            return heightMapFunction;
        }
        static textureToClampedArray(_texture) {
            let canvas = document.createElement("canvas");
            canvas.width = _texture.image.width;
            canvas.height = _texture.image.height;
            let crc = canvas.getContext("2d");
            crc.imageSmoothingEnabled = false;
            crc.drawImage(_texture.image, 0, 0);
            return crc.getImageData(0, 0, _texture.image.width, _texture.image.height).data;
        }
        /**
         * Sets the texture to be used as heightmap
         */
        setTexture(_texture = null) {
            if (!_texture)
                return;
            this.texture = _texture;
            let resolution = _texture ? new FudgeCore.Vector2(_texture.image.width - 1, _texture.image.height - 1) : undefined;
            super.create(resolution, resolution, MeshRelief.createHeightMapFunction(_texture));
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            delete serialization.seed;
            delete serialization.scale;
            delete serialization.resolution;
            if (this.texture)
                serialization.idTexture = this.texture.idResource;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            if (_serialization.idTexture) {
                this.texture = await FudgeCore.Project.getResource(_serialization.idTexture);
                this.setTexture(this.texture);
            }
            return this;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.texture) !== "undefined")
                this.setTexture(_mutator.texture);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.seed;
            delete _mutator.scale;
            delete _mutator.resolution;
        }
    }
    FudgeCore.MeshRelief = MeshRelief;
})(FudgeCore || (FudgeCore = {}));
// /<reference path="MeshPolygon.ts"/>
var FudgeCore;
// /<reference path="MeshPolygon.ts"/>
(function (FudgeCore) {
    /**
     * Generates a rotation of a polygon around the y-axis
     * ```text
     *                     y
     *                  _  ‚Üë 0_1
     *                 ‚îÇ   ‚îÇ‚Üíx ‚îÇ2
     *                  ‚ï≤  ‚îÇ  ‚ï±3
     *                  ‚ï±  ‚îÇ  ‚ï≤
     *                 ‚ï±___‚îÇ___‚ï≤4
     *                      5
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022
     */
    class MeshRotation extends FudgeCore.Mesh {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshRotation); }
        static { this.verticesDefault = [
            new FudgeCore.Vector2(0.5, 0.5),
            new FudgeCore.Vector2(0.5, -0.5)
        ]; }
        constructor(_name = "MeshRotation", _shape = MeshRotation.verticesDefault, _longitudes = 3) {
            super(_name);
            this.shape = new FudgeCore.MutableArray(FudgeCore.Vector2);
            this.rotate(_shape, _longitudes);
            // console.log("Mutator", this.getMutator());
        }
        get minVertices() {
            return 2;
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.shape = FudgeCore.Serializer.serializeArray(FudgeCore.Vector2, this.shape);
            serialization.longitudes = this.longitudes;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let shape = await FudgeCore.Serializer.deserializeArray(_serialization.shape);
            this.longitudes = _serialization.longitudes;
            this.rotate(shape, this.longitudes);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            this.rotate(this.shape, this.longitudes);
            this.dispatchEvent(new Event("mutate" /* EVENT.MUTATE */));
        }
        //#endregion
        rotate(_shape, _longitudes) {
            this.clear();
            this.shape = FudgeCore.MutableArray.from(_shape.map(_vertex => _vertex.clone));
            this.longitudes = Math.round(_longitudes);
            let angle = 360 / this.longitudes;
            let mtxRotate = FudgeCore.Matrix4x4.ROTATION_Y(angle);
            // copy original polygon as Vector3 array
            let polygon = [];
            let distances = [0];
            let total = 0;
            for (let i = 0; i < this.shape.length; i++) {
                polygon.push(this.shape[i].toVector3());
                if (i > 0) {
                    let distance = FudgeCore.Vector2.DIFFERENCE(this.shape[i], this.shape[i - 1]).magnitude;
                    total += distance;
                    distances.push(total);
                }
            }
            distances.forEach((_entry, _index) => { distances[_index] = _entry / total; });
            let nVerticesPolygon = polygon.length;
            let cloud = new FudgeCore.Vertices();
            for (let longitude = 0; longitude <= this.longitudes; longitude++) {
                for (let i = 0; i < nVerticesPolygon; i++) {
                    let uv = new FudgeCore.Vector2(longitude / this.longitudes, distances[i]);
                    // TODO: last sector should only be references to the first meridian
                    if (longitude == this.longitudes)
                        cloud.push(new FudgeCore.Vertex(i, uv));
                    else {
                        if (longitude > 0 && this.shape[i].x == 0) // use a single vertex when it's on the rotation axis
                            cloud.push(new FudgeCore.Vertex(i, uv));
                        else
                            cloud.push(new FudgeCore.Vertex(polygon[i].clone, uv));
                    }
                }
                polygon.forEach((_vector) => _vector.transform(mtxRotate));
            }
            // copy indices to new index array
            let faces = [];
            for (let longitude = 0; longitude < this.longitudes; longitude++) {
                for (let latitude = 0; latitude < nVerticesPolygon - 1; latitude++) {
                    let start = longitude * nVerticesPolygon + latitude;
                    let quad = new FudgeCore.Quad(cloud, start + 1, start + 1 + nVerticesPolygon, start + nVerticesPolygon, start);
                    faces.push(...quad.faces);
                    // TODO: catch invalid faces right here...
                }
            }
            this.vertices = cloud;
            this.faces = faces;
        }
    }
    FudgeCore.MeshRotation = MeshRotation;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a UV Sphere with a given number of sectors and stacks (clamped at 128*128)
     * Implementation based on http://www.songho.ca/opengl/gl_sphere.html
     * @authors Simon Storl-Schulke, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class MeshSphere extends FudgeCore.MeshRotation {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshSphere); }
        constructor(_name = "MeshSphere", _longitudes = 8, _latitudes = 8) {
            super(_name);
            this.create(_longitudes, _latitudes); // TODO: when deserialized this causes this causes the mesh to be created twice
        }
        /**
         * Create this sphere with a given number of longitudes and latitudes
         */
        create(_longitudes = 3, _latitudes = 2) {
            this.clear();
            //Clamp resolution to prevent performance issues
            this.longitudes = Math.min(Math.round(_longitudes), 128);
            this.latitudes = Math.min(Math.round(_latitudes), 128);
            if (_longitudes < 3 || _latitudes < 2) {
                FudgeCore.Debug.warn("UV Sphere must have at least 3 longitudes and 2 latitudes to form a 3-dimensional shape.");
                this.longitudes = Math.max(3, _longitudes);
                this.latitudes = Math.max(2, _latitudes);
            }
            let shape = [];
            let step = Math.PI / this.latitudes;
            for (let i = 0; i <= this.latitudes; ++i) {
                let angle = Math.PI / 2 - i * step;
                let x = Math.cos(angle);
                let y = Math.sin(angle);
                shape.push(new FudgeCore.Vector2(x / 2, y / 2));
            }
            // place first and last vertex exactly on rotation axis
            shape[0].x = 0;
            shape[shape.length - 1].x = 0;
            super.rotate(shape, _longitudes);
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            delete serialization.shape;
            serialization.latitudes = this.latitudes;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.create(_serialization.longitudes, _serialization.latitudes);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            super.mutate(_mutator, _selection, _dispatchMutate);
            this.create(this.longitudes, this.latitudes);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.shape;
        }
    }
    FudgeCore.MeshSphere = MeshSphere;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate two quads placed back to back, the one facing in negative Z-direction is textured reversed
     * ```text
     *        0 __ 3
     *         |__|
     *        1    2
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class MeshSprite extends FudgeCore.Mesh {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshSprite); }
        constructor(_name = "MeshSprite") {
            super(_name);
            this.vertices = new FudgeCore.Vertices(new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.5, 0), new FudgeCore.Vector2(0, 0)), new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, -0.5, 0), new FudgeCore.Vector2(0, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, -0.5, 0), new FudgeCore.Vector2(1, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.5, 0), new FudgeCore.Vector2(1, 0)));
            this.faces = [
                new FudgeCore.Face(this.vertices, 1, 2, 0),
                new FudgeCore.Face(this.vertices, 2, 3, 0),
                new FudgeCore.Face(this.vertices, 0, 3, 1),
                new FudgeCore.Face(this.vertices, 3, 2, 1)
            ];
        }
        // flat is standard here // TODO: is this still needed?
        get verticesFlat() { return this.renderMesh.vertices; }
        get indicesFlat() { return this.renderMesh.indices; }
    }
    FudgeCore.MeshSprite = MeshSprite;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a Torus with a given thickness and the number of major- and minor segments
     * @authors Simon Storl-Schulke, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class MeshTorus extends FudgeCore.MeshRotation {
        static { this.iSubclass = FudgeCore.Mesh.registerSubclass(MeshTorus); }
        constructor(_name = "MeshTorus", _size = 0.25, _longitudes = 8, _latitudes = 6) {
            super(_name, MeshTorus.getShape(_size, Math.max(3, _latitudes)), _longitudes);
            this.size = 0.25;
            this.latitudes = 12;
            this.size = _size;
            this.longitudes = _longitudes;
            this.latitudes = Math.max(3, _latitudes);
        }
        static getShape(_size, _latitudes) {
            let shape = [];
            let radius = _size / 2;
            let center = new FudgeCore.Vector2(0.25 + radius, 0);
            for (let latitude = 0; latitude <= _latitudes; latitude++) {
                let angle = 2 * Math.PI * latitude / _latitudes;
                shape.push(FudgeCore.Vector2.SUM(center, new FudgeCore.Vector2(radius * -Math.cos(angle), radius * Math.sin(angle))));
            }
            return shape;
        }
        /**
         * Create this torus from the given parameters
         */
        create(_size = 0.25, _longitudes = 8, _latitudes = 6) {
            this.size = _size;
            this.latitudes = Math.max(3, _latitudes);
            super.rotate(MeshTorus.getShape(_size, _latitudes), _longitudes);
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.latitudes = this.latitudes;
            serialization.size = this.size;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.create(_serialization.size, _serialization.longitudes, _serialization.latitudes);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            super.mutate(_mutator, _selection, _dispatchMutate);
            this.create(this.size, this.longitudes, this.latitudes);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.shape;
        }
    }
    FudgeCore.MeshTorus = MeshTorus;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let QUADSPLIT;
    (function (QUADSPLIT) {
        QUADSPLIT[QUADSPLIT["PLANAR"] = 0] = "PLANAR";
        QUADSPLIT[QUADSPLIT["AT_0"] = 1] = "AT_0";
        QUADSPLIT[QUADSPLIT["AT_1"] = 2] = "AT_1";
    })(QUADSPLIT = FudgeCore.QUADSPLIT || (FudgeCore.QUADSPLIT = {}));
    /**
     * A surface created with four vertices which immediately creates none, one or two {@link Face}s depending on vertices at identical positions.
     * ```text
     * QUADSPLIT:  PLANAR                  AT_0                     AT_1
     *             0 _ 3                   0 _ 3                    0 _ 3
     *              |\|                     |\|                      |/|
     *             1 ‚Äæ 2                   1 ‚Äæ 2                    1 ‚Äæ 2
     *  shared last vertex 2      last vertices 2 + 3      last vertices 3 + 0
     *
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Quad {
        #split;
        constructor(_vertices, _index0, _index1, _index2, _index3, _split = QUADSPLIT.PLANAR) {
            this.faces = [];
            this.#split = _split;
            try {
                if (_split != QUADSPLIT.AT_1)
                    this.faces.push(new FudgeCore.Face(_vertices, _index0, _index1, _index2));
                else
                    this.faces.push(new FudgeCore.Face(_vertices, _index1, _index2, _index3));
            }
            catch (_e) {
                FudgeCore.Debug.fudge("Face excluded", _e.message);
            }
            try {
                if (_split == QUADSPLIT.PLANAR)
                    this.faces.push(new FudgeCore.Face(_vertices, _index3, _index0, _index2));
                else if (_split == QUADSPLIT.AT_0)
                    this.faces.push(new FudgeCore.Face(_vertices, _index0, _index2, _index3));
                else
                    this.faces.push(new FudgeCore.Face(_vertices, _index1, _index3, _index0));
            }
            catch (_e) {
                FudgeCore.Debug.fudge("Face excluded", _e.message);
            }
        }
        get split() {
            return this.#split;
        }
    }
    FudgeCore.Quad = Quad;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // TODO: the refer to  description is no longer correct as refer to also works for bone indices
    /**
     * Represents a vertex of a mesh with extended information such as the uv coordinates and the vertex normal.
     * It may refer to another vertex via an index into some array, in which case the position and the normal are stored there.
     * This way, vertex position and normal is a 1:1 association, vertex to texture coordinates a 1:n association.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Vertex {
        /**
         * Represents a vertex of a mesh with extended information such as the uv coordinates the vertex normal and its tangents.
         * It may refer to another vertex via an index into some array, in which case the position and the normal are stored there.
         * This way, vertex position and normal is a 1:1 association, vertex to texture coordinates a 1:n association.
       * @authors Jirka Dell'Oro-Friedl, HFU, 2022
         */
        constructor(_positionOrIndex, _uv = null, _normal = FudgeCore.Vector3.ZERO(), _tangent = null, _color = new FudgeCore.Color(1, 1, 1, 1), _bones = null) {
            if (_positionOrIndex instanceof FudgeCore.Vector3)
                this.position = _positionOrIndex;
            else
                this.referTo = _positionOrIndex;
            this.uv = _uv;
            this.normal = _normal;
            this.tangent = _tangent;
            this.color = _color;
            this.bones = _bones;
        }
    }
    FudgeCore.Vertex = Vertex;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Array with extended functionality to serve as a {@link Vertex}-cloud.
     * Accessors yield position or normal also for vertices referencing other vertices
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Vertices extends Array {
        // TODO: this class may become more powerful by hiding the array and add more service methods like calculating bounding box, radius etc.
        // see if a proxy of the array interfacing [] would do a good job -> tested: proxy is about 20 times slower!
        /**
         * Returns the subset of vertices that do not refer to other vertices
         */
        get originals() {
            return this.filter(_vertex => _vertex.referTo == undefined);
        }
        /**
         * returns the position associated with the vertex addressed, resolving references between vertices
         */
        position(_index) {
            let vertex = this[_index];
            return (vertex.referTo == undefined) ? vertex.position : this[vertex.referTo].position;
        }
        /**
         * returns the normal associated with the vertex addressed, resolving references between vertices
         */
        normal(_index) {
            let vertex = this[_index];
            return (vertex.referTo == undefined) ? vertex.normal : this[vertex.referTo].normal;
        }
        /**
         * returns the tangent associated with the vertex addressed
         */
        tangent(_index) {
            return this[_index].tangent; // tangents can not be shared as they are dependent on the uv-coordinates
        }
        /**
         * returns the uv-coordinates associated with the vertex addressed
         */
        uv(_index) {
            return this[_index].uv;
        }
        /**
         * returns the color associated with the vertex addressed
         */
        color(_index) {
            return this[_index].color;
        }
        /**
         * returns the bones associated with the vertex addressed, resolving references between vertices
         */
        bones(_index) {
            let vertex = this[_index];
            return (vertex.referTo == undefined) ? vertex.bones : this[vertex.referTo].bones;
        }
    }
    FudgeCore.Vertices = Vertices;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The namesapce for handling the particle data
     */
    let ParticleData;
    (function (ParticleData) {
        /**
         * Returns true if the given data is a {@link Expression}
         */
        function isExpression(_data) {
            return isFunction(_data) || isVariable(_data) || isConstant(_data) || isCode(_data);
        }
        ParticleData.isExpression = isExpression;
        /**
         * Returns true if the given data is a {@link Function}
         */
        function isFunction(_data) {
            return typeof _data == "object" && "function" in _data;
        }
        ParticleData.isFunction = isFunction;
        /**
         * Returns true if the given data is a {@link Variable}
         */
        function isVariable(_data) {
            return typeof _data == "object" && "value" in _data && typeof _data.value == "string";
        }
        ParticleData.isVariable = isVariable;
        /**
         * Returns true if the given data is a {@link Constant}
         */
        function isConstant(_data) {
            return typeof _data == "object" && "value" in _data && typeof _data.value == "number";
        }
        ParticleData.isConstant = isConstant;
        /**
         * Returns true if the given data is a {@link Code}
         */
        function isCode(_data) {
            return typeof _data == "object" && "code" in _data;
        }
        ParticleData.isCode = isCode;
        /**
         * Returns true if the given data is a {@link Transformation}
         */
        function isTransformation(_data) {
            return typeof _data == "object" && "transformation" in _data;
        }
        ParticleData.isTransformation = isTransformation;
    })(ParticleData = FudgeCore.ParticleData || (FudgeCore.ParticleData = {}));
    /**
     * Holds information on how to mutate the particles of a particle system.
     * A full particle system is composed by attaching a {@link ComponentParticleSystem}, {@link ComponentMesh} and {@link ComponentMaterial} to the same {@link Node}.
     * Additionally a {@link ComponentFaceCamera} can be attached to make the particles face the camera.
     * @authors Jonas Plotzky, HFU, 2022
     */
    class ParticleSystem extends FudgeCore.Mutable {
        #data;
        /** Map of shader universal derivates to corresponding computed {@link ShaderParticleSystem}.
         * This way each particle system resource can be used in conjunction with multiple shader universal derivates */
        #shaderToShaderParticleSystem;
        constructor(_name = ParticleSystem.name, _data = {}) {
            super();
            this.idResource = undefined;
            /** Map of shader universal derivates to corresponding computed {@link ShaderParticleSystem}.
             * This way each particle system resource can be used in conjunction with multiple shader universal derivates */
            this.#shaderToShaderParticleSystem = new Map();
            this.name = _name;
            this.data = _data;
            FudgeCore.Project.register(this);
        }
        get data() {
            return this.#data;
        }
        set data(_data) {
            this.#data = _data;
            this.#shaderToShaderParticleSystem.forEach(_shader => _shader.deleteProgram());
            this.#shaderToShaderParticleSystem.clear();
        }
        /**
         * Returns a corresponding {@link ShaderParticleSystem} for the given shader universal derivate.
         * Used by the render system to render the particle system.
         * @returns the corresponding {@link ShaderParticleSystem}
         * @internal
         */
        getShaderFrom(_source) {
            if (!this.#shaderToShaderParticleSystem.has(_source)) {
                let particleShader = new FudgeCore.ShaderParticleSystem();
                particleShader.data = this.data;
                particleShader.define = [...particleShader.define, ..._source.define];
                particleShader.vertexShaderSource = _source.getVertexShaderSource();
                particleShader.fragmentShaderSource = _source.getFragmentShaderSource();
                this.#shaderToShaderParticleSystem.set(_source, particleShader);
            }
            return this.#shaderToShaderParticleSystem.get(_source);
        }
        //#region Transfer
        serialize() {
            let serialization = {
                idResource: this.idResource,
                name: this.name,
                data: this.data
            };
            return serialization;
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            this.name = _serialization.name;
            this.data = _serialization.data;
            return this;
        }
        getMutatorForUserInterface() {
            return super.getMutator(); // remove data from mutator
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.data = this.data;
            return mutator;
        }
        reduceMutator(_mutator) {
            delete _mutator.cachedMutators;
            delete _mutator.shaderMap;
        }
    }
    FudgeCore.ParticleSystem = ParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A WebGL shaderprogram for a particle system. Managed by a {@link ParticleSystem}. It uses {@link ParticleSystem.data} to generate and inject code into a shader universal derivate (GLSL) thus creating a shader particle system from a supplied {@link Shader}s vertex and fragment shader source code.
     * @author Jonas Plotzky, HFU, 2022
     * @internal
     */
    let ShaderParticleSystem = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorShaderParticleSystem).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        var ShaderParticleSystem = class {
            static { _classThis = this; }
            constructor() {
                this.define = ["PARTICLE"];
            }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                ShaderParticleSystem = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            /**
             * Injected by {@link RenderInjectorShaderParticleSystem}. Used by the render system.
             * @internal
             */
            getVertexShaderSource() { return ""; /* injected by decorator */ }
            /**
             * Injected by {@link RenderInjectorShaderParticleSystem}. Used by the render system.
             * @internal
             */
            getFragmentShaderSource() { return ""; /* injected by decorator */ }
            /**
             * Injected by {@link RenderInjectorShaderParticleSystem}. Used by the render system.
             * @internal
             */
            deleteProgram() { }
            /**
             * Injected by {@link RenderInjectorShaderParticleSystem}. Used by the render system.
             * @internal
             */
            useProgram() { }
            /**
             * Injected by {@link RenderInjectorShaderParticleSystem}. Used by the render system.
             * @internal
             */
            createProgram() { }
        };
        return ShaderParticleSystem = _classThis;
    })();
    FudgeCore.ShaderParticleSystem = ShaderParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Enables this node to access the waypoint grid established through {@link ComponentWaypoint}s and their {@link Connection}s,
     * find a path through them and even walk down the path.
     * @author Lukas Scheuerle, HFU, 2024
     */
    class ComponentWalker extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentWalker); }
        /** If true, move the node this component is attached to through forces instead of directly through the transform. Requires a [[ComponentRigidbody]] if true. */
        // public moveThroughPhysics: boolean = false;
        /** keeps the data needed for the current walk */
        #walkData;
        /** keeps the promise to resolve when the walker has reached the goal */
        #promiseResolverOnWalkFinished;
        /** status of whether it should rotate the walker to the walking direction */
        #rotateInWalkDirection;
        constructor() {
            super();
            /** The speed the walker should move with. Corresponds to units/s. */
            this.speed = 1;
            /** If true, move the node this component is attached to through forces instead of directly through the transform. Requires a [[ComponentRigidbody]] if true. */
            // public moveThroughPhysics: boolean = false;
            /** keeps the data needed for the current walk */
            this.#walkData = { path: [], totalProgress: -1 };
            /** status of whether it should rotate the walker to the walking direction */
            this.#rotateInWalkDirection = false;
            if (FudgeCore.Project.mode == FudgeCore.MODE.EDITOR)
                return;
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.#handleAttach.bind(this));
            this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.#handleDetach.bind(this));
        }
        serialize() {
            let serialization = {
                [super.constructor.name]: super.serialize(),
                speed: this.speed
                // moveThroughPhysics: this.moveThroughPhysics,
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.speed = _serialization.speed;
            // this.moveThroughPhysics = _serialization.moveThroughPhysics;
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async moveTo(_start, _end, _rotate = false) {
            if (!_start)
                return;
            let translate = FudgeCore.Vector3.DIFFERENCE(_start.mtxWorld.translation, this.node.mtxWorld.translation);
            this.node.mtxLocal.translate(translate);
            if (!_end || _start === _end) {
                this.#walkData = { path: [], totalProgress: -1 };
                return;
            }
            this.#rotateInWalkDirection = _rotate;
            return new Promise((_resolve, _reject) => {
                let path = this.getPath(_start, _end);
                if (!path || path.length === 0) {
                    _reject();
                    return;
                }
                this.#walkData = { path, totalProgress: 0 };
                this.#promiseResolverOnWalkFinished = _resolve;
                if (this.#rotateInWalkDirection && this.#walkData.path.length >= 1) {
                    this.rotateTowards(this.#walkData.path[0].waypoint);
                }
            });
        }
        /** Takes care of the moving algorithm by calculating the next step and moving along this step */
        moving() {
            // are we currently moving?
            if (this.#walkData.totalProgress < 0 || this.#walkData.path.length == 0)
                return;
            // do we have a current path we can follow
            let currentPath = this.#walkData.path[this.#walkData.totalProgress];
            if (!currentPath)
                return;
            // how big of a step are we taking this frame?
            let delta = this.speed * currentPath.previousConnection.speedModifier * FudgeCore.Loop.timeFrameGame / 1000;
            // how far away are we from the next waypoint?
            let step = FudgeCore.Vector3.DIFFERENCE(currentPath.waypoint.mtxWorld.translation, this.node.mtxWorld.translation);
            // let stepRotation: Matrix4x4 = Matrix4x4.CONSTRUCTION(step);
            // stepRotation.rotate(this.node.mtxWorld.rotation);
            // step = stepRotation.translation;
            let scale = FudgeCore.Vector3.DIFFERENCE(currentPath.waypoint.mtxWorld.scaling, this.node.mtxWorld.scaling);
            if (delta * delta < step.magnitudeSquared) { // won't reach next waypoint yet. Using squares because that's faster to compute than sqrt
                step.normalize(delta);
                this.node.mtxLocal.translate(step, false);
                if (scale.magnitudeSquared > 0) {
                    scale.normalize(delta);
                }
                this.node.mtxLocal.scaling = FudgeCore.Vector3.SUM(scale, this.node.mtxLocal.scaling);
                // this.node.mtxLocal.scale(Vector3.SUM(scale, this.node.mtxLocal.scaling));
                // TODO implement movement through physics
                return;
            }
            // reached next point
            this.dispatchEvent(new CustomEvent("waypointReached" /* EVENT.WAYPOINT_REACHED */, { bubbles: true, detail: currentPath.waypoint }));
            currentPath.waypoint.dispatchEvent(new CustomEvent("waypointReached" /* EVENT.WAYPOINT_REACHED */, { bubbles: true, detail: this }));
            let translate = FudgeCore.Vector3.DIFFERENCE(currentPath.waypoint.mtxWorld.translation, this.node.mtxWorld.translation);
            this.node.mtxLocal.translate(translate, false);
            this.node.mtxLocal.scaling = currentPath.waypoint.mtxWorld.scaling;
            this.#walkData.totalProgress++;
            // reached final point, finished walking
            if (this.#walkData.totalProgress >= this.#walkData.path.length) {
                if (this.#promiseResolverOnWalkFinished)
                    this.#promiseResolverOnWalkFinished();
                this.dispatchEvent(new CustomEvent("pathingConcluded" /* EVENT.PATHING_CONCLUDED */, { bubbles: true, detail: currentPath.waypoint }));
                return;
            }
            // should we rotate walker?
            if (this.#rotateInWalkDirection) {
                this.rotateTowards(this.#walkData.path[this.#walkData.totalProgress].waypoint);
            }
        }
        /** find the path between two given waypoints */
        getPath(_start, _end) {
            // TODO: use a more efficient algorithm like A* instead of Dijkstra
            // setup the graph of paths based on the start node
            let unvisitedNodes = [];
            let processedWaypoints = [_start];
            let waypointsToSearchThrough = [_start];
            do {
                let waypoint = waypointsToSearchThrough.pop();
                for (let connection of waypoint.connections) {
                    if (!processedWaypoints.includes(connection.end) && connection.start.isActive && connection.end.isActive) {
                        waypointsToSearchThrough.push(connection.end);
                        processedWaypoints.push(connection.end);
                    }
                }
                unvisitedNodes.push({ waypoint, distance: waypoint === _start ? 0 : Infinity, previous: null, previousConnection: null });
            } while (waypointsToSearchThrough.length > 0);
            // do the dijkstra
            while (unvisitedNodes.length > 0) {
                unvisitedNodes.sort((_a, _b) => _a.distance - _b.distance);
                let currentNode = unvisitedNodes.shift();
                if (currentNode.waypoint === _end)
                    return this.pathingNodeToPath(currentNode);
                for (let con of currentNode.waypoint.connections) {
                    if (!this.isConnectionUsable(con))
                        continue;
                    let endNode = unvisitedNodes.find(_n => _n.waypoint === con.end);
                    if (!endNode)
                        continue;
                    let newDistance = currentNode.distance + this.calculateConnectionCost(con);
                    if (newDistance >= endNode.distance)
                        continue;
                    endNode.distance = newDistance;
                    endNode.previous = currentNode;
                    endNode.previousConnection = con;
                }
            }
            return null;
        }
        /**
         * Checks whether a connection is usable by this specific walker.
         * **Always returns true, unless overwritten in a custom Walker subclass.**
         * Can be used to influence the pathfinding algorithm for custom waypoint / connection systems.
         * @param _connection A connection to check
         * @returns true if the connection is usable by this walker, false if not
         */
        isConnectionUsable(_connection) {
            return true;
        }
        /**
         * Calculates the new distance based on a connection.
         * **Always returns the plain connections cost unless overwritten in a custom walker subclass.**
         * Can be used to influence the pathfinding algorithm for custom waypoint / connection systems.
         * @param _connection A connection to check
         * @returns the amount of cost a connection encurs to the current walker or 0 if cost is negative.
         */
        calculateConnectionCost(_connection) {
            if (_connection.cost >= 0)
                return _connection.cost;
            return 0;
        }
        pathingNodeToPath(_node) {
            let path = [];
            if (!_node)
                return path;
            do {
                path.push(_node);
                _node = _node.previous;
            } while (_node?.previous);
            return path.reverse();
        }
        rotateTowards(_waypoint) {
            let mtxLook = FudgeCore.Matrix4x4.LOOK_AT(this.node.mtxWorld.translation, _waypoint.mtxWorld.translation);
            this.node.mtxLocal.rotation = mtxLook.rotation;
        }
        #handleAttach() {
            FudgeCore.Loop.addEventListener("loopFrame" /* EVENT.LOOP_FRAME */, this.moving.bind(this));
        }
        #handleDetach() {
            FudgeCore.Loop.removeEventListener("loopFrame" /* EVENT.LOOP_FRAME */, this.moving.bind(this));
        }
    }
    FudgeCore.ComponentWalker = ComponentWalker;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var _a;
    /**
     * Sets a position that a {@link ComponentWalker} can use as a target point.
     * Implements {@link Waypoint}.
     * Registers itself to a static list of all available waypoints
     * @author Lukas Scheuerle, HFU, 2024
     */
    class ComponentWaypoint extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(this); }
        static #waypoints = [];
        #connections;
        constructor(_mtxInit = FudgeCore.Matrix4x4.IDENTITY(), _connections = []) {
            super();
            this.#connections = _connections;
            this.mtxLocal = _mtxInit;
            this.singleton = false;
            if (FudgeCore.Project.mode == FudgeCore.MODE.EDITOR)
                return;
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.#handleAttach.bind(this));
            this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.#handleDetach.bind(this));
        }
        /** All the waypoints that are currently loaded in the scene. **Do not edit, treat as readonly!** */
        static get waypoints() {
            return _a.#waypoints;
        }
        /**
         * A shorthand to create a connection between two {@link ComponentWaypoint}s
         * @param _start The {@link ComponentWaypoint} from which to start the connection.
         * @param _end The {@link ComponentWaypoint} to which the connection leads.
         * @param _cost The cost of the connection. The higher the value, the less likely it is to be taken. Cannot be negative.
         * @param _speedModifier How fast the connection can be walked on. Defaults to 1
         * @param _bothWays If true, creates a connection in both directions. Default: false
         */
        static addConnection(_start, _end, _cost, _speedModifier = 1, _bothWays = false) {
            _start.addConnection({ cost: _cost, end: _end, start: _start, speedModifier: _speedModifier });
            if (_bothWays)
                _end.addConnection({ cost: _cost, end: _start, start: _end, speedModifier: _speedModifier });
        }
        get isActive() {
            return this.active;
        }
        get connections() {
            return this.#connections;
        }
        /** The current world position of the Waypoint. Returns a new Matrix without connection to the Waypoint */
        get mtxWorld() {
            return FudgeCore.Matrix4x4.PRODUCT(this.mtxLocal, this.node.mtxWorld);
        }
        /** Adds a new {@link Connection} to this waypoint */
        addConnection(_connection) {
            this.#connections.push(_connection);
        }
        /** Removes a {@link Connection} from this waypoint */
        removeConnection(_connection) {
            let index = this.#connections.indexOf(_connection);
            if (index < 0)
                return;
            this.#connections.splice(index, 1);
        }
        serialize() {
            let serialization = {
                [super.constructor.name]: super.serialize(),
                matrix: this.mtxLocal.serialize(),
                connections: this.#connections.map(_con => {
                    let connection = { cost: _con.cost, end: _con.end, speedModifier: _con.speedModifier };
                    if (connection.end instanceof _a) {
                        connection.end = FudgeCore.Node.PATH_FROM_TO(this, connection.end);
                    }
                    return connection;
                })
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.mtxLocal.deserialize(_serialization.matrix);
            const hndNodeDeserialized = () => {
                this.#connections = _serialization.connections.map((_con) => {
                    let connection = { cost: _con.cost, end: this.serializedWaypointToWaypoint(_con.end), speedModifier: _con.speedModifier, start: this };
                    return connection;
                });
                this.removeEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, hndNodeDeserialized);
            };
            this.addEventListener("nodeDeserialized" /* EVENT.NODE_DESERIALIZED */, hndNodeDeserialized);
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        drawGizmos() {
            let scaleVector = FudgeCore.Vector3.SCALE(FudgeCore.Vector3.ONE(), 0.1);
            let mtx = this.mtxWorld;
            FudgeCore.Gizmos.drawSphere(FudgeCore.Matrix4x4.COMPOSITION(mtx.translation, FudgeCore.Vector3.ZERO(), scaleVector), FudgeCore.Color.CSS("orange"));
            // return;
            let lines = [];
            for (let connection of this.connections) {
                // if the start and end point are on the same point, don't draw line.
                let tmpMtx = connection.end.mtxWorld.clone;
                let directionVector = FudgeCore.Vector3.DIFFERENCE(mtx.translation, tmpMtx.translation);
                if (directionVector.magnitudeSquared === 0)
                    continue;
                // if one of the waypoints is inactive, don't draw gizmos
                if (!connection.end.isActive || !connection.start.isActive)
                    continue;
                // actual line
                lines.push(mtx.translation);
                lines.push(tmpMtx.translation);
                // arrow heads
                let directionMtx = FudgeCore.Matrix4x4.LOOK_IN(tmpMtx.translation, directionVector);
                directionMtx.scale(scaleVector);
                FudgeCore.Gizmos.drawWireCone(directionMtx, FudgeCore.Color.CSS("orange"));
            }
            FudgeCore.Gizmos.drawLines(lines, FudgeCore.Matrix4x4.IDENTITY(), FudgeCore.Color.CSS("orange"));
        }
        /** An internal function to help the deserializaztion process. */
        serializedWaypointToWaypoint(_point) {
            if (typeof _point !== "string")
                return _point;
            return FudgeCore.Node.FIND(this, _point);
        }
        #handleAttach() {
            _a.#waypoints.push(this);
        }
        #handleDetach() {
            let index = _a.#waypoints.indexOf(this);
            if (index >= 0) {
                _a.#waypoints.splice(index, 1);
            }
        }
    }
    _a = ComponentWaypoint;
    FudgeCore.ComponentWaypoint = ComponentWaypoint;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defines automatic adjustment of the collider
     */
    let BODY_INIT;
    (function (BODY_INIT) {
        /** Collider uses the pivot of the mesh for initilialization */
        BODY_INIT[BODY_INIT["TO_MESH"] = 0] = "TO_MESH";
        /** Collider uses the transform of the node for initilialization */
        BODY_INIT[BODY_INIT["TO_NODE"] = 1] = "TO_NODE";
        /** Collider uses its own pivot for initilialization */
        BODY_INIT[BODY_INIT["TO_PIVOT"] = 2] = "TO_PIVOT";
    })(BODY_INIT = FudgeCore.BODY_INIT || (FudgeCore.BODY_INIT = {}));
    /**
     * Acts as the physical representation of the {@link Node} it's attached to.
     * It's the connection between the FUDGE rendered world and the Physics world.
     * For the physics to correctly get the transformations rotations need to be applied with from left = true.
     * Or rotations need to happen before scaling.
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class ComponentRigidbody extends FudgeCore.Component {
        static { this.iSubclass = FudgeCore.Component.registerSubclass(ComponentRigidbody); }
        static { this.mapBodyType = (typeof OIMO == "undefined") ?
            {
                [FudgeCore.BODY_TYPE.DYNAMIC]: FudgeCore.BODY_TYPE.DYNAMIC, [FudgeCore.BODY_TYPE.STATIC]: FudgeCore.BODY_TYPE.STATIC, [FudgeCore.BODY_TYPE.KINEMATIC]: FudgeCore.BODY_TYPE.KINEMATIC
            } : {
            [FudgeCore.BODY_TYPE.DYNAMIC]: OIMO.RigidBodyType.DYNAMIC, [FudgeCore.BODY_TYPE.STATIC]: OIMO.RigidBodyType.STATIC, [FudgeCore.BODY_TYPE.KINEMATIC]: OIMO.RigidBodyType.KINEMATIC
        }; }
        /** ID to reference this specific ComponentRigidbody */
        #id;
        //Private informations - Mostly OimoPhysics variables that should not be exposed to the FUDGE User and manipulated by them
        #collider;
        #colliderInfo;
        #collisionGroup;
        #typeCollider;
        #rigidbody;
        #rigidbodyInfo;
        #typeBody;
        #massData;
        #restitution;
        #friction;
        #dampingLinear;
        #dampingAngular;
        #effectRotation;
        #effectGravity;
        #isTrigger;
        #mtxPivotUnscaled;
        #mtxPivotInverse;
        #callbacks; //Callback Methods when within the oimoSystem a event is happening
        // #physics: Physics; //TODO: keep a pointer to the physics instance used by this component
        /** Creating a new rigidbody with a weight in kg, a physics type (default = dynamic), a collider type what physical form has the collider, to what group does it belong, is there a transform Matrix that should be used, and is the collider defined as a group of points that represent a convex mesh. */
        constructor(_mass = 1, _type = FudgeCore.BODY_TYPE.DYNAMIC, _colliderType = FudgeCore.COLLIDER_TYPE.CUBE, _group = FudgeCore.Physics.settings.defaultCollisionGroup, _mtxTransform = null, _convexMesh = null) {
            super();
            /** Transformation of the collider relative to the node's transform. Once set mostly remains constant.
             * If altered, {@link isInitialized} must be reset to false to recreate the collider in the next {@link Render.prepare}
             */
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            /**
             * Vertices that build a convex mesh (form that is in itself closed). Needs to set in the construction of the rb if none of the standard colliders is used.
             * Untested and not yet fully supported by serialization and mutation.
             */
            this.convexMesh = null;
            /** Collisions with rigidbodies happening to this body, can be used to build a custom onCollisionStay functionality. */
            this.collisions = new Array();
            /** Triggers that are currently triggering this body */
            this.triggerings = new Array();
            /**
             * Automatic adjustment of the pivot when {@link Render.prepare} is called according to {@link BODY_INIT}
             */
            this.initialization = BODY_INIT.TO_PIVOT;
            /** Marks if collider was initialized. Reset to false to initialize again e.g. after manipulation of mtxPivot */
            this.isInitialized = false;
            /** ID to reference this specific ComponentRigidbody */
            this.#id = 0;
            this.#collisionGroup = FudgeCore.COLLISION_GROUP.DEFAULT;
            this.#typeCollider = FudgeCore.COLLIDER_TYPE.CUBE;
            this.#rigidbodyInfo = new OIMO.RigidBodyConfig();
            this.#typeBody = FudgeCore.BODY_TYPE.DYNAMIC;
            this.#massData = new OIMO.MassData();
            this.#dampingLinear = 0.1;
            this.#dampingAngular = 0.1;
            this.#effectRotation = FudgeCore.Vector3.ONE();
            this.#effectGravity = 1;
            this.#isTrigger = false;
            this.#mtxPivotUnscaled = FudgeCore.Matrix4x4.IDENTITY();
            this.#mtxPivotInverse = FudgeCore.Matrix4x4.IDENTITY();
            //#endregion
            // Activate the functions of this component as response to events
            this.hndEvent = (_event) => {
                switch (_event.type) {
                    case "componentAdd" /* EVENT.COMPONENT_ADD */:
                        // this.addEventListener(EVENT.COMPONENT_ACTIVATE, this.addRigidbodyToWorld);
                        this.addEventListener("componentDeactivate" /* EVENT.COMPONENT_DEACTIVATE */, this.removeRigidbodyFromWorld);
                        // this.node.addEventListener(EVENT.NODE_ACTIVATE, this.addRigidbodyToWorld, true); // use capture to react to broadcast!
                        this.node.addEventListener("nodeDeactivate" /* EVENT.NODE_DEACTIVATE */, this.removeRigidbodyFromWorld, true);
                        if (!this.node.cmpTransform)
                            FudgeCore.Debug.warn("ComponentRigidbody attached to node missing ComponentTransform", this.node);
                        break;
                    case "componentRemove" /* EVENT.COMPONENT_REMOVE */:
                        // this.removeEventListener(EVENT.COMPONENT_ADD, this.addRigidbodyToWorld);
                        this.removeEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.removeRigidbodyFromWorld);
                        // this.node.removeEventListener(EVENT.NODE_ACTIVATE, this.addRigidbodyToWorld, true); // use capture to react to broadcast!
                        this.node.removeEventListener("nodeDeactivate" /* EVENT.NODE_DEACTIVATE */, this.removeRigidbodyFromWorld, true);
                        this.removeRigidbodyFromWorld();
                        break;
                    case "nodeDeserialized" /* EVENT.NODE_DESERIALIZED */:
                        if (!this.node.cmpTransform)
                            FudgeCore.Debug.error("ComponentRigidbody attached to node missing ComponentTransform", this.node);
                        break;
                }
            };
            /** Adding this ComponentRigidbody to the Physiscs.world giving the oimoPhysics system the information needed */
            this.addRigidbodyToWorld = () => {
                if (!this.#rigidbody._world)
                    FudgeCore.Physics.addRigidbody(this);
            };
            /** Removing this ComponentRigidbody from the Physiscs.world taking the informations from the oimoPhysics system */
            this.removeRigidbodyFromWorld = () => {
                FudgeCore.Physics.removeRigidbody(this);
                this.isInitialized = false;
            };
            this.create(_mass, _type, _colliderType, _group, _mtxTransform, _convexMesh);
            this.addEventListener("componentAdd" /* EVENT.COMPONENT_ADD */, this.hndEvent);
            this.addEventListener("componentRemove" /* EVENT.COMPONENT_REMOVE */, this.hndEvent);
            // this.addEventListener(EVENT.NODE_DESERIALIZED, this.hndEvent);
        }
        //#region Accessors
        get id() {
            return this.#id;
        }
        /** Used for calculation of the geometrical relationship of node and collider by {@link Render}*/
        get mtxPivotInverse() {
            return this.#mtxPivotInverse;
        }
        /** Used for calculation of the geometrical relationship of node and collider by {@link Render}*/
        get mtxPivotUnscaled() {
            return this.#mtxPivotUnscaled;
        }
        /** Retrieve the body type. See {@link BODY_TYPE} */
        get typeBody() {
            return this.#typeBody;
        }
        /** Set the body type. See {@link BODY_TYPE} */
        set typeBody(_value) {
            this.#typeBody = _value;
            this.#rigidbody.setType(ComponentRigidbody.mapBodyType[this.#typeBody]);
            this.#rigidbody.setMassData(this.#massData); //have to reset mass after changing the type, since Oimo is handling mass internally wrong when switching types
        }
        /** The shape that represents the {@link Node} in the physical world. Default is a Cube. */
        get typeCollider() {
            return this.#typeCollider;
        }
        set typeCollider(_value) {
            if (_value != this.#typeCollider && this.#rigidbody != null) {
                this.#typeCollider = _value;
                this.initialize();
            }
        }
        /** The collision group this {@link Node} belongs to it's the default group normally which means it physically collides with every group besides trigger. */
        get collisionGroup() {
            return this.#collisionGroup;
        }
        set collisionGroup(_value) {
            this.#collisionGroup = _value;
            if (this.#rigidbody != null)
                this.#rigidbody.getShapeList().setCollisionGroup(this.#collisionGroup);
        }
        /** Marking the Body as a trigger therefore not influencing the collision system but only sending triggerEvents */
        get isTrigger() {
            return this.#isTrigger;
        }
        set isTrigger(_value) {
            this.#isTrigger = _value;
            if (this.getOimoRigidbody() != null) {
                this.getOimoRigidbody()._isTrigger = this.#isTrigger;
            }
        }
        /**
         * Returns the physical weight of the {@link Node}
         */
        get mass() {
            return this.#rigidbody.getMass();
        }
        /**
         * Setting the physical weight of the {@link Node} in kg
         */
        set mass(_value) {
            this.#massData.mass = _value;
            if (this.node != null)
                if (this.#rigidbody != null)
                    this.#rigidbody.setMassData(this.#massData);
        }
        /** Drag of linear movement. A Body does slow down even on a surface without friction. */
        get dampTranslation() {
            return this.#rigidbody.getLinearDamping();
        }
        set dampTranslation(_value) {
            this.#dampingLinear = _value;
            this.#rigidbody.setLinearDamping(_value);
        }
        /** Drag of rotation. */
        get dampRotation() {
            return this.#rigidbody.getAngularDamping();
        }
        set dampRotation(_value) {
            this.#dampingAngular = _value;
            this.#rigidbody.setAngularDamping(_value);
        }
        /** The factor this rigidbody reacts rotations that happen in the physical world. 0 to lock rotation this axis. */
        get effectRotation() {
            return this.#effectRotation;
        }
        set effectRotation(_effect) {
            this.#effectRotation = _effect;
            this.#rigidbody.setRotationFactor(new OIMO.Vec3(this.#effectRotation.x, this.#effectRotation.y, this.#effectRotation.z));
        }
        /** The factor this rigidbody reacts to world gravity. Default = 1 e.g. 1*9.81 m/s. */
        get effectGravity() {
            return this.#effectGravity;
        }
        set effectGravity(_effect) {
            this.#effectGravity = _effect;
            if (this.#rigidbody != null)
                this.#rigidbody.setGravityScale(this.#effectGravity);
        }
        /**
         * Get the friction of the rigidbody, which is the factor of sliding resistance of this rigidbody on surfaces
         */
        get friction() {
            return this.#friction;
        }
        /**
         * Set the friction of the rigidbody, which is the factor of  sliding resistance of this rigidbody on surfaces
         */
        set friction(_friction) {
            this.#friction = _friction;
            if (this.#rigidbody.getShapeList() != null)
                this.#rigidbody.getShapeList().setFriction(this.#friction);
        }
        /**
         * Get the restitution of the rigidbody, which is the factor of bounciness of this rigidbody on surfaces
         */
        get restitution() {
            return this.#restitution;
        }
        /**
         * Set the restitution of the rigidbody, which is the factor of bounciness of this rigidbody on surfaces
         */
        set restitution(_restitution) {
            this.#restitution = _restitution;
            if (this.#rigidbody.getShapeList() != null)
                this.#rigidbody.getShapeList().setRestitution(this.#restitution);
        }
        //#endregion
        //#region Transformation
        /**
         * Returns the rigidbody in the form the physics engine is using it, should not be used unless a functionality
         * is not provided through the FUDGE Integration.
         */
        getOimoRigidbody() {
            return this.#rigidbody;
        }
        /** Rotating the rigidbody therefore changing it's rotation over time directly in physics. This way physics is changing instead of transform.
         *  But you are able to incremental changing it instead of a direct rotation.  Although it's always prefered to use forces in physics.
         */
        rotateBody(_rotationChange) {
            this.#rigidbody.rotateXyz(new OIMO.Vec3(_rotationChange.x * FudgeCore.Calc.deg2rad, _rotationChange.y * FudgeCore.Calc.deg2rad, _rotationChange.z * FudgeCore.Calc.deg2rad));
        }
        /** Translating the rigidbody therefore changing it's place over time directly in physics. This way physics is changing instead of transform.
         *  But you are able to incrementally changing it instead of a direct position. Although it's always prefered to use forces in physics.
         */
        translateBody(_translationChange) {
            this.#rigidbody.translate(new OIMO.Vec3(_translationChange.x, _translationChange.y, _translationChange.z));
        }
        /**
         * Get the current POSITION of the {@link Node} in the physical space
         */
        getPosition() {
            let tmpPos = this.#rigidbody.getPosition();
            return new FudgeCore.Vector3(tmpPos.x, tmpPos.y, tmpPos.z);
        }
        /**
         * Sets the current POSITION of the {@link Node} in the physical space
         */
        setPosition(_value) {
            this.#rigidbody.setPosition(new OIMO.Vec3(_value.x, _value.y, _value.z));
        }
        /**
         * Get the current ROTATION of the {@link Node} in the physical space. Note this range from -pi to pi, so -90 to 90.
         */
        getRotation() {
            let orientation = this.#rigidbody.getOrientation();
            let tmpQuat = FudgeCore.Recycler.get(FudgeCore.Quaternion);
            tmpQuat.set(orientation.x, orientation.y, orientation.z, orientation.w);
            let eulerAngles = tmpQuat.eulerAngles.clone;
            FudgeCore.Recycler.store(tmpQuat);
            return eulerAngles;
        }
        /**
         * Sets the current ROTATION of the {@link Node} in the physical space, in degree.
         */
        setRotation(_value) {
            let quat = new OIMO.Quat();
            let mtxRot = FudgeCore.Matrix4x4.IDENTITY();
            mtxRot.rotate(new FudgeCore.Vector3(_value.x, _value.y, _value.z));
            let array = mtxRot.get();
            let rot = new OIMO.Mat3(array[0], array[4], array[8], array[1], array[5], array[9], array[2], array[6], array[10]);
            quat.fromMat3(rot);
            // quat.normalize();
            this.#rigidbody.setOrientation(quat);
        }
        /** Get the current SCALING in the physical space. */
        getScaling() {
            let scaling = this.node.mtxWorld.scaling.clone;
            scaling.x *= this.mtxPivot.scaling.x;
            scaling.y *= this.mtxPivot.scaling.y;
            scaling.z *= this.mtxPivot.scaling.z;
            return scaling;
        }
        /** Scaling requires the collider to be completely recreated anew */
        setScaling(_value) {
            // let scaling: Vector3 = _value.clone;   
            this.createCollider(new OIMO.Vec3(_value.x / 2, _value.y / 2, _value.z / 2), this.#typeCollider); //recreate the collider
            this.#collider = new OIMO.Shape(this.#colliderInfo);
            let oldCollider = this.#rigidbody.getShapeList();
            this.#rigidbody.addShape(this.#collider); //add new collider, before removing the old, so the rb is never active with 0 colliders
            this.#rigidbody.removeShape(oldCollider); //remove the old collider
            this.#collider.userData = this; //reset the extra information so that this collider knows to which FUDGE Component it's connected
            this.#collider.setCollisionGroup(this.collisionGroup);
            this.#collider.setCollisionMask(this.collisionMask);
            this.#collider.setRestitution(this.#restitution);
            this.#collider.setFriction(this.#friction);
            this.#collider.setContactCallback(this.#callbacks);
        }
        /**
         * Initializes the rigidbody according to its initialization setting to match the mesh, the node or its own pivot matrix
         */
        initialize() {
            if (!this.node) // delay initialization until this rigidbody is attached to a node
                return;
            switch (Number(this.initialization)) {
                case BODY_INIT.TO_NODE:
                    this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
                    break;
                case BODY_INIT.TO_MESH:
                    let cmpMesh = this.node.getComponent(FudgeCore.ComponentMesh);
                    if (cmpMesh)
                        this.mtxPivot = cmpMesh.mtxPivot.clone;
                    break;
                case BODY_INIT.TO_PIVOT:
                    break;
            }
            let mtxWorld = FudgeCore.Matrix4x4.PRODUCT(this.node.mtxWorld, this.mtxPivot);
            let position = mtxWorld.translation; //Adding the offsets from the pivot
            let rotation = mtxWorld.rotation;
            let scaling = mtxWorld.scaling;
            //scaling requires collider to be recreated
            this.setScaling(scaling);
            this.#rigidbody.setMassData(this.#massData);
            this.setPosition(position); //set the actual new rotation/position for this Rb again since it's now updated
            this.setRotation(rotation);
            let scalingInverse = this.node.mtxWorld.scaling.map(_i => 1 / _i);
            this.#mtxPivotUnscaled = FudgeCore.Matrix4x4.COMPOSITION(this.mtxPivot.translation, this.mtxPivot.rotation, scalingInverse);
            this.#mtxPivotInverse = FudgeCore.Matrix4x4.INVERSE(this.#mtxPivotUnscaled);
            this.addRigidbodyToWorld();
            this.isInitialized = true;
        }
        //#endregion
        //#region Velocity and Forces
        /**
        * Get the current VELOCITY of the {@link Node}
        */
        getVelocity() {
            let velocity = this.#rigidbody.getLinearVelocity();
            return new FudgeCore.Vector3(velocity.x, velocity.y, velocity.z);
        }
        /**
         * Sets the current VELOCITY of the {@link Node}
         */
        setVelocity(_value) {
            let velocity = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.#rigidbody.setLinearVelocity(velocity);
        }
        /**
         * Get the current ANGULAR - VELOCITY of the {@link Node}
         */
        getAngularVelocity() {
            let velocity = this.#rigidbody.getAngularVelocity();
            return new FudgeCore.Vector3(velocity.x, velocity.y, velocity.z);
        }
        /**
         * Sets the current ANGULAR - VELOCITY of the {@link Node}
         */
        setAngularVelocity(_value) {
            let velocity = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.#rigidbody.setAngularVelocity(velocity);
        }
        /**
        * Applies a continous FORCE at the center of the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS.
        * The force is measured in newton, 1kg needs about 10 Newton to fight against gravity.
        */
        applyForce(_force) {
            this.#rigidbody.applyForceToCenter(new OIMO.Vec3(_force.x, _force.y, _force.z));
        }
        /**
        * Applies a continous FORCE at a specific point in the world to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
        */
        applyForceAtPoint(_force, _worldPoint) {
            this.#rigidbody.applyForce(new OIMO.Vec3(_force.x, _force.y, _force.z), new OIMO.Vec3(_worldPoint.x, _worldPoint.y, _worldPoint.z));
        }
        /**
        * Applies a continous ROTATIONAL FORCE (Torque) to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
        */
        applyTorque(_rotationalForce) {
            this.#rigidbody.applyTorque(new OIMO.Vec3(_rotationalForce.x, _rotationalForce.y, _rotationalForce.z));
        }
        /**
        * Applies a instant FORCE at a point/rigidbodycenter to the RIGIDBODY in the three dimensions. Considering the rigidbod's MASS
        * Influencing the angular speed and the linear speed.
        */
        applyImpulseAtPoint(_impulse, _worldPoint = null) {
            _worldPoint = _worldPoint != null ? _worldPoint : this.getPosition();
            this.#rigidbody.applyImpulse(new OIMO.Vec3(_impulse.x, _impulse.y, _impulse.z), new OIMO.Vec3(_worldPoint.x, _worldPoint.y, _worldPoint.z));
        }
        /**
        * Applies a instant FORCE to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
        * Only influencing it's speed not rotation.
        */
        applyLinearImpulse(_impulse) {
            this.#rigidbody.applyLinearImpulse(new OIMO.Vec3(_impulse.x, _impulse.y, _impulse.z));
        }
        /**
         * Applies a instant ROTATIONAL-FORCE to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
         * Only influencing it's rotation.
         */
        applyAngularImpulse(_rotationalImpulse) {
            this.#rigidbody.applyAngularImpulse(new OIMO.Vec3(_rotationalImpulse.x, _rotationalImpulse.y, _rotationalImpulse.z));
        }
        /**
         * Changing the VELOCITY of the RIGIDBODY. Only influencing the linear speed not angular
         */
        addVelocity(_value) {
            this.#rigidbody.addLinearVelocity(new OIMO.Vec3(_value.x, _value.y, _value.z));
        }
        /**
         * Changing the VELOCITY of the RIGIDBODY. Only influencing the angular speed not the linear
         */
        addAngularVelocity(_value) {
            this.#rigidbody.addAngularVelocity(new OIMO.Vec3(_value.x, _value.y, _value.z));
        }
        /**
         * De- / Activate the rigidbodies auto-sleeping function.
         * If activated the rigidbody will automatically sleep when needed, increasing performance.
         * If deactivated the rigidbody gets stopped from sleeping when movement is too minimal. Decreasing performance, for rarely more precise physics results
         */
        activateAutoSleep(_on) {
            this.#rigidbody.setAutoSleep(_on);
        }
        //#endregion
        //#region Collision
        // /**
        //  * Checking for Collision with other Colliders and dispatches a custom event with information about the collider.
        //  * Automatically called in the RenderManager, no interaction needed.
        //  */
        // public checkCollisionEvents(): void {
        //   if (!this.isInitialized) // check collisions only if initialization completed
        //     return;
        //   let contactLink: OIMO.ContactLink = this.#rigidbody.getContactLinkList(); // all physical contacts between colliding bodies on this rb
        //   while (contactLink != null) {
        //     let other: ComponentRigidbody = contactLink.getOther().userData; // get the other component rigidbody involved in the collision
        //     if (!other.isInitialized) {
        //       contactLink = contactLink.getNext();
        //       continue;
        //     }
        //     let contact: OIMO.Contact = contactLink.getContact();
        //     let wasTouching: boolean = this.collisions.includes(other);
        //     let isTouching: boolean = contact.isTouching();
        //     if (!wasTouching && isTouching) { // ENTER
        //       let manifold: OIMO.Manifold = contact.getManifold();
        //       let points: OIMO.ManifoldPoint[] = manifold.getPoints(); // All points in the collision where the two bodies are touching, used to calculate the full impact
        //       let normalImpulse: number = 0;
        //       let binormalImpulse: number = 0;
        //       let tangentImpulse: number = 0;
        //       for (let manifoldPoint of points) { // The impact of the collision involving all touching points
        //         normalImpulse += manifoldPoint.getNormalImpulse();
        //         binormalImpulse += manifoldPoint.getBinormalImpulse();
        //         tangentImpulse += manifoldPoint.getTangentImpulse();
        //       }
        //       let normal: OIMO.Vec3 = manifold.getNormal();
        //       let collisionNormal: Vector3 = new Vector3(normal.x, normal.y, normal.z);
        //       let collisionCenterPoint: Vector3 = this.collisionCenterPoint(points, manifold.getNumPoints());
        //       this.collisions.push(other);
        //       this.dispatchEvent(new EventPhysics(EVENT_PHYSICS.COLLISION_ENTER, other, normalImpulse, tangentImpulse, binormalImpulse, collisionCenterPoint, collisionNormal)); // Sending the given event
        //     } else if (wasTouching && !isTouching) { // EXIT
        //       this.collisions.splice(this.collisions.indexOf(other), 1);
        //       this.dispatchEvent(new EventPhysics(EVENT_PHYSICS.COLLISION_EXIT, other, 0, 0, 0));
        //     }
        //     contactLink = contactLink.getNext(); // Start the same routine with the next collision in the list
        //   }
        // }
        /**
         * Sends a ray through this specific body ignoring the rest of the world and checks if this body was hit by the ray,
         * returning info about the hit. Provides the same functionality and information a regular raycast does but the ray is only testing against this specific body.
         */
        raycastThisBody(_origin, _direction, _length, _debugDraw = false) {
            let hitInfo = new FudgeCore.RayHitInfo();
            let geometry = this.#rigidbody.getShapeList().getGeometry();
            let transform = this.#rigidbody.getTransform();
            let scaledDirection = _direction.clone;
            scaledDirection.scale(_length);
            let endpoint = FudgeCore.Vector3.SUM(scaledDirection, _origin.clone);
            let oimoRay = new OIMO.RayCastHit();
            let hit = geometry.rayCast(new OIMO.Vec3(_origin.x, _origin.y, _origin.z), new OIMO.Vec3(endpoint.x, endpoint.y, endpoint.z), transform, oimoRay); //the actual OimoPhysics Raycast
            if (hit) { //If hit return a bunch of informations about the hit
                hitInfo.hit = true;
                hitInfo.hitPoint = new FudgeCore.Vector3(oimoRay.position.x, oimoRay.position.y, oimoRay.position.z);
                hitInfo.hitNormal = new FudgeCore.Vector3(oimoRay.normal.x, oimoRay.normal.y, oimoRay.normal.z);
                let dx = _origin.x - hitInfo.hitPoint.x; //calculate hit distance
                let dy = _origin.y - hitInfo.hitPoint.y;
                let dz = _origin.z - hitInfo.hitPoint.z;
                hitInfo.hitDistance = Math.sqrt(dx * dx + dy * dy + dz * dz);
                hitInfo.rigidbodyComponent = this;
                hitInfo.rayOrigin = _origin;
                hitInfo.rayEnd = endpoint;
            }
            else { //Only tell the origin, and the hit point is the end of the ray.
                hitInfo.rayOrigin = _origin;
                hitInfo.hitPoint = new FudgeCore.Vector3(endpoint.x, endpoint.y, endpoint.z);
            }
            if (_debugDraw) {
                FudgeCore.Physics.debugDraw.debugRay(hitInfo.rayOrigin, hitInfo.hitPoint, new FudgeCore.Color(0, 1, 0, 1));
            }
            return hitInfo;
        }
        //#endregion
        //#region Saving/Loading - Some properties might be missing, e.g. convexMesh (Float32Array)
        serialize() {
            let serialization = this.getMutator();
            delete serialization.mtxPivot;
            delete serialization.active;
            serialization.typeBody = FudgeCore.BODY_TYPE[this.#typeBody];
            serialization.typeCollider = FudgeCore.COLLIDER_TYPE[this.#typeCollider];
            serialization.initialization = BODY_INIT[this.initialization];
            serialization.id = this.#id;
            serialization.pivot = this.mtxPivot.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            super.deserialize(_serialization[super.constructor.name]);
            this.mtxPivot.deserialize(_serialization.pivot);
            this.#id = _serialization.id;
            this.mass = ifNumber(_serialization.mass, this.mass);
            this.dampTranslation = ifNumber(_serialization.dampTranslation, this.dampTranslation);
            this.dampRotation = ifNumber(_serialization.dampRotation, this.dampRotation);
            this.collisionGroup = ifNumber(_serialization.collisionGroup, this.collisionGroup);
            this.effectRotation = _serialization.effectRotation || this.effectRotation;
            this.effectGravity = ifNumber(_serialization.effectGravity, this.effectGravity);
            this.friction = ifNumber(_serialization.friction, this.friction);
            this.restitution = ifNumber(_serialization.restitution, this.restitution);
            this.isTrigger = _serialization.isTrigger || this.isTrigger;
            this.initialization = _serialization.initialization;
            this.initialization = BODY_INIT[_serialization.initialization];
            this.typeBody = FudgeCore.BODY_TYPE[_serialization.typeBody];
            this.typeCollider = FudgeCore.COLLIDER_TYPE[_serialization.typeCollider];
            // this.create(this.mass, this.#typeBody, this.#typeCollider, this.collisionGroup, null, this.convexMesh);
            return this;
        }
        /** Change properties by an associative array */
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (_mutator.typeBody != undefined)
                _mutator.typeBody = parseInt(_mutator.typeBody);
            if (_mutator.typeCollider != undefined)
                _mutator.typeCollider = parseInt(_mutator.typeCollider);
            if (_mutator.initialization != undefined)
                _mutator.initialization = parseInt(_mutator.initialization);
            await super.mutate(_mutator, _selection, _dispatchMutate);
            if (_mutator.initialization != undefined && this.isActive)
                this.initialize();
            // TODO: see if this alternative should be, at least partially, done with mutateSelection
            // let callIfExist: Function = (_key: string, _setter: Function) => {
            //   if (_mutator[_key])
            //     _setter(_mutator[_key]);
            // };
            // callIfExist("friction", (_value: number) => this.friction = _value);
            // callIfExist("restitution", (_value: number) => this.restitution = _value);
            // callIfExist("mass", (_value: number) => this.mass = _value);
            // callIfExist("dampTranslation", (_value: number) => this.dampTranslation = _value);
            // callIfExist("dampRotation", (_value: number) => this.dampRotation = _value);
            // callIfExist("effectGravity", (_value: number) => this.effectGravity = _value);
            // callIfExist("collisionGroup", (_value: COLLISION_GROUP) => this.collisionGroup = _value);
            // callIfExist("typeBody", (_value: string) => this.typeBody = parseInt(_value));
            // callIfExist("typeCollider", (_value: string) => this.typeCollider = parseInt(_value));
            // this.dispatchEvent(new Event(EVENT.MUTATE));
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.friction = this.friction;
            mutator.restitution = this.restitution;
            mutator.mass = this.mass;
            mutator.dampTranslation = this.dampTranslation;
            mutator.dampRotation = this.dampRotation;
            mutator.effectGravity = this.effectGravity;
            mutator.typeBody = this.#typeBody;
            mutator.typeCollider = this.#typeCollider;
            mutator.isTrigger = this.#isTrigger;
            // Object.preventExtensions(mutator);
            return mutator;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.typeBody)
                types.typeBody = FudgeCore.BODY_TYPE;
            if (types.typeCollider)
                types.typeCollider = FudgeCore.COLLIDER_TYPE;
            if (types.initialization)
                types.initialization = BODY_INIT;
            return types;
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.convexMesh; //Convex Mesh can't be shown in the editor because float32Array is not a viable mutator
            delete _mutator.collisionMask;
            delete _mutator.isInitialized;
        }
        //#region Creation
        create(_mass = 1, _type = FudgeCore.BODY_TYPE.DYNAMIC, _colliderType = FudgeCore.COLLIDER_TYPE.CUBE, _group = FudgeCore.Physics.settings.defaultCollisionGroup, _mtxTransform = null, _convexMesh = null) {
            //Setting up all incoming values to be internal values
            this.convexMesh = _convexMesh;
            this.#typeBody = _type;
            this.#collisionGroup = _group;
            this.#typeCollider = _colliderType;
            this.mass = _mass;
            this.#restitution = FudgeCore.Physics.settings.defaultRestitution;
            this.#friction = FudgeCore.Physics.settings.defaultFriction;
            this.collisionMask = FudgeCore.Physics.settings.defaultCollisionMask;
            //Create the actual rigidbody in the OimoPhysics Space
            this.createRigidbody(_mass, _type, this.#typeCollider, _mtxTransform, this.#collisionGroup);
            this.#id = FudgeCore.Physics.distributeBodyID();
            // Event Callbacks directly from OIMO Physics
            this.#callbacks = new OIMO.ContactCallback(); //fehm
            this.#callbacks.beginTriggerContact = this.triggerEnter;
            this.#callbacks.endTriggerContact = this.triggerExit;
            this.#callbacks.postSolve = this.collisionEnter; // use postSolve for collisionEnter to get the impulse
            this.#callbacks.endContact = this.collisionExit;
        }
        /** Creates the actual OimoPhysics Rigidbody out of informations the FUDGE Component has. */
        createRigidbody(_mass, _type, _colliderType, _mtxTransform, _collisionGroup = FudgeCore.COLLISION_GROUP.DEFAULT) {
            let oimoType; //Need the conversion from simple enum to number because if enum is defined as Oimo.RigidyBodyType you have to include Oimo to use FUDGE at all
            switch (_type) {
                case FudgeCore.BODY_TYPE.DYNAMIC:
                    oimoType = OIMO.RigidBodyType.DYNAMIC;
                    break;
                case FudgeCore.BODY_TYPE.STATIC:
                    oimoType = OIMO.RigidBodyType.STATIC;
                    break;
                case FudgeCore.BODY_TYPE.KINEMATIC:
                    oimoType = OIMO.RigidBodyType.KINEMATIC;
                    break;
                default:
                    oimoType = OIMO.RigidBodyType.DYNAMIC;
                    break;
            }
            // remove all previous shapes from world. Necessary?
            // while (this.#rigidbody && this.#rigidbody.getShapeList() != null)
            //   this.#rigidbody.removeShape(this.#rigidbody.getShapeList());
            let tmpTransform = _mtxTransform == null ? super.node != null ? super.node.mtxWorld : FudgeCore.Matrix4x4.IDENTITY() : _mtxTransform; //Get transform informations from the world, since physics does not care about hierarchy
            //Convert informations from FUDGE to OimoPhysics and creating a collider with it, while also adding a pivot to derivate from the transform informations if needed
            let scale = new OIMO.Vec3((tmpTransform.scaling.x * this.mtxPivot.scaling.x) / 2, (tmpTransform.scaling.y * this.mtxPivot.scaling.y) / 2, (tmpTransform.scaling.z * this.mtxPivot.scaling.z) / 2);
            let position = new OIMO.Vec3(tmpTransform.translation.x + this.mtxPivot.translation.x, tmpTransform.translation.y + this.mtxPivot.translation.y, tmpTransform.translation.z + this.mtxPivot.translation.z);
            let rotation = new OIMO.Vec3(tmpTransform.rotation.x + this.mtxPivot.rotation.x, tmpTransform.rotation.y + this.mtxPivot.rotation.y, tmpTransform.rotation.z + this.mtxPivot.rotation.z);
            this.createCollider(scale, _colliderType);
            //Setting informations about mass, position/rotation and physical reaction type
            this.#massData.mass = _mass; //_type != PHYSICS_TYPE.STATIC ? _mass : 0; //If a object is static it acts as if it has no mass
            this.#rigidbodyInfo.type = oimoType;
            this.#rigidbodyInfo.position = position;
            this.#rigidbodyInfo.rotation.fromEulerXyz(new OIMO.Vec3(rotation.x, rotation.y, rotation.z)); //Convert eulerAngles in degree to the internally used quaternions
            //Creating the actual rigidbody and it's collider
            this.#rigidbody = new OIMO.RigidBody(this.#rigidbodyInfo);
            this.#collider = new OIMO.Shape(this.#colliderInfo);
            //Filling the additional settings and informations the rigidbody needs. Who is colliding, how is the collision handled (damping, influence factors)
            this.#collider.userData = this;
            this.#collider.setCollisionGroup(_collisionGroup);
            this.#collider.setCollisionMask(this.collisionMask);
            this.#rigidbody.addShape(this.#collider);
            this.#rigidbody.setMassData(this.#massData);
            this.#rigidbody.getShapeList().setRestitution(this.#restitution);
            this.#rigidbody.getShapeList().setFriction(this.#friction);
            this.#rigidbody.getShapeList().setContactCallback(this.#callbacks);
            this.#rigidbody.setLinearDamping(this.#dampingLinear);
            this.#rigidbody.setAngularDamping(this.#dampingAngular);
            this.#rigidbody.setGravityScale(this.#effectGravity);
            this.#rigidbody.setRotationFactor(new OIMO.Vec3(this.#effectRotation.x, this.#effectRotation.y, this.#effectRotation.z));
        }
        /** Creates a collider a shape that represents the object in the physical world.  */
        createCollider(_scale, _colliderType) {
            let shapeConf = new OIMO.ShapeConfig(); //Collider with geometry and infos like friction/restitution and more
            let geometry;
            if (this.typeCollider != _colliderType) //If the collider type was changed set the internal one new, else don't so there is not infinite set calls
                this.typeCollider = _colliderType;
            switch (_colliderType) { //Create a different OimoPhysics geometry based on the given type. That is only the mathematical shape of the collider
                case FudgeCore.COLLIDER_TYPE.CUBE:
                    geometry = new OIMO.BoxGeometry(_scale);
                    break;
                case FudgeCore.COLLIDER_TYPE.SPHERE:
                    geometry = new OIMO.SphereGeometry(_scale.x);
                    break;
                case FudgeCore.COLLIDER_TYPE.CAPSULE:
                    geometry = new OIMO.CapsuleGeometry(_scale.x, _scale.y);
                    break;
                case FudgeCore.COLLIDER_TYPE.CYLINDER:
                    geometry = new OIMO.CylinderGeometry(_scale.x, _scale.y);
                    break;
                case FudgeCore.COLLIDER_TYPE.CONE:
                    geometry = new OIMO.ConeGeometry(_scale.x, _scale.y);
                    break;
                case FudgeCore.COLLIDER_TYPE.PYRAMID:
                    geometry = this.createConvexGeometryCollider(this.createPyramidVertices(), _scale);
                    break;
                case FudgeCore.COLLIDER_TYPE.CONVEX:
                    geometry = this.createConvexGeometryCollider(this.convexMesh, _scale);
                    break;
            }
            shapeConf.geometry = geometry;
            this.#colliderInfo = shapeConf; //the configuration informations that are used to add an actual collider to the rigidbody in createRigidbody
        }
        /** Creating a shape that represents a in itself closed form, out of the given vertices. */
        createConvexGeometryCollider(_vertices, _scale) {
            let verticesAsVec3 = new Array(); //Convert FUDGE Vector3 to OimoVec3
            for (let i = 0; i < _vertices.length; i += 3) { //3 Values for one point
                verticesAsVec3.push(new OIMO.Vec3(_vertices[i] * _scale.x, _vertices[i + 1] * _scale.y, _vertices[i + 2] * _scale.z));
            }
            return new OIMO.ConvexHullGeometry(verticesAsVec3); //Tell OimoPhysics to create a hull that involves all points but close it of. A convex shape can not have a hole in it.
        }
        /** Internal implementation of vertices that construct a pyramid. The vertices of the implemented pyramid mesh can be used too. But they are halfed and double sided, so it's more performant to use this. */
        createPyramidVertices() {
            let vertices = new Float32Array([
                /*0*/ -1, 0, 1, /*1*/ 1, 0, 1, /*2*/ 1, 0, -1, /*3*/ -1, 0, -1,
                /*4*/ 0, 2, 0
            ]);
            return vertices;
        }
        //#region private EVENT functions
        //Calculating the center of a collision as a singular point - in case there is more than one point - by getting the geometrical center of all colliding points
        collisionCenterPoint(_colPoints, _numPoints) {
            let totalPoints = 0;
            let totalX = 0;
            let totalY = 0;
            let totalZ = 0;
            _colPoints.forEach((_value) => {
                if (totalPoints < _numPoints) {
                    totalPoints++;
                    totalX += _value.getPosition2().x;
                    totalY += _value.getPosition2().y;
                    totalZ += _value.getPosition2().z;
                }
            });
            return new FudgeCore.Vector3(totalX / _numPoints, totalY / _numPoints, totalZ / _numPoints);
            ;
        }
        //#endregion
        collisionEnter(_contact) {
            let bodyA = _contact.getShape1()?.userData;
            let bodyB = _contact.getShape2()?.userData;
            if (!bodyA || !bodyB || bodyA.collisions.includes(bodyB)) // already entered
                return;
            bodyA.collisions.push(bodyB);
            bodyB.collisions.push(bodyA);
            // TODO: maybe rather expose the manifold to the event or something
            let manifold = _contact.getManifold();
            let points = manifold.getPoints(); // All points in the collision where the two bodies are touching, used to calculate the full impact
            let normalImpulse = 0;
            let tangentImpulse = 0;
            let binormalImpulse = 0;
            for (let manifoldPoint of points) { // The impact of the collision involving all touching points
                normalImpulse += manifoldPoint.getNormalImpulse();
                tangentImpulse += manifoldPoint.getTangentImpulse();
                binormalImpulse += manifoldPoint.getBinormalImpulse();
            }
            let normal = manifold.getNormal();
            let collisionNormal = new FudgeCore.Vector3(normal.x, normal.y, normal.z);
            let collisionCenterPoint = bodyA.collisionCenterPoint(points, manifold.getNumPoints());
            bodyA.dispatchEvent(new FudgeCore.EventPhysics("ColliderEnteredCollision" /* EVENT_PHYSICS.COLLISION_ENTER */, bodyB, normalImpulse, tangentImpulse, binormalImpulse, collisionCenterPoint, collisionNormal));
            bodyB.dispatchEvent(new FudgeCore.EventPhysics("ColliderEnteredCollision" /* EVENT_PHYSICS.COLLISION_ENTER */, bodyA, normalImpulse, tangentImpulse, binormalImpulse, collisionCenterPoint, collisionNormal));
        }
        collisionExit(_contact) {
            let bodyA = _contact.getShape1()?.userData;
            let bodyB = _contact.getShape2()?.userData;
            if (!bodyA || !bodyB || !bodyA.collisions.includes(bodyB)) // already exited
                return;
            bodyA.collisions.splice(bodyA.collisions.indexOf(bodyB), 1);
            bodyB.collisions.splice(bodyB.collisions.indexOf(bodyA), 1);
            bodyA.dispatchEvent(new FudgeCore.EventPhysics("ColliderLeftCollision" /* EVENT_PHYSICS.COLLISION_EXIT */, bodyB, 0, 0, 0));
            bodyB.dispatchEvent(new FudgeCore.EventPhysics("ColliderLeftCollision" /* EVENT_PHYSICS.COLLISION_EXIT */, bodyA, 0, 0, 0));
        }
        /**
        * Trigger EnteringEvent Callback, automatically called by OIMO Physics within their calculations.
        * Since the event does not know which body is the trigger iniator, the event can be listened to
        * on either the trigger or the triggered. (This is only possible with the FUDGE OIMO Fork!)
        */
        triggerEnter(_contact) {
            let bodyA = _contact.getShape1()?.userData;
            let bodyB = _contact.getShape2()?.userData;
            if (!bodyA || !bodyB || bodyA.triggerings.includes(bodyB)) // already entered
                return;
            bodyA.triggerings.push(bodyB);
            bodyB.triggerings.push(bodyA);
            let manifold = _contact.getManifold();
            let points = manifold.getPoints();
            let normal = manifold.getNormal();
            let collisionNormal = new FudgeCore.Vector3(normal.x, normal.y, normal.z);
            let collisionCenterPoint = bodyA.collisionCenterPoint(points, manifold.getNumPoints());
            bodyA.dispatchEvent(new FudgeCore.EventPhysics("TriggerEnteredCollision" /* EVENT_PHYSICS.TRIGGER_ENTER */, bodyB, 0, 0, 0, collisionCenterPoint, collisionNormal));
            bodyB.dispatchEvent(new FudgeCore.EventPhysics("TriggerEnteredCollision" /* EVENT_PHYSICS.TRIGGER_ENTER */, bodyA, 0, 0, 0, collisionCenterPoint, collisionNormal));
        }
        /**
        * Trigger LeavingEvent Callback, automatically called by OIMO Physics within their calculations.
        * Since the event does not know which body is the trigger iniator, the event can be listened to
        * on either the trigger or the triggered. (This is only possible with the FUDGE OIMO Fork!)
        */
        triggerExit(_contact) {
            let bodyA = _contact.getShape1()?.userData;
            let bodyB = _contact.getShape2()?.userData;
            if (!bodyA || !bodyB || !bodyA.triggerings.includes(bodyB)) // already exited
                return;
            bodyA.triggerings.splice(bodyA.collisions.indexOf(bodyB), 1);
            bodyB.triggerings.splice(bodyB.collisions.indexOf(bodyA), 1);
            bodyA.dispatchEvent(new FudgeCore.EventPhysics("TriggerLeftCollision" /* EVENT_PHYSICS.TRIGGER_EXIT */, bodyB, 0, 0, 0));
            bodyB.dispatchEvent(new FudgeCore.EventPhysics("TriggerLeftCollision" /* EVENT_PHYSICS.TRIGGER_EXIT */, bodyA, 0, 0, 0));
        }
    }
    FudgeCore.ComponentRigidbody = ComponentRigidbody;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /** Internal class for holding data about physics debug vertices.*/
    class PhysicsDebugVertexBuffer {
        /** Setup the rendering context for this buffer and create the actual buffer for this context. */
        constructor(_renderingContext) {
            this.numVertices = 0;
            this.gl = _renderingContext;
            this.buffer = this.gl.createBuffer();
        }
        /** Fill the bound buffer with data. Used at buffer initialization */
        setData(_array) {
            if (this.attribs == null)
                throw "set attributes first";
            this.numVertices = _array.length / (this.stride / 4);
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);
            this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(_array), this.gl.DYNAMIC_DRAW);
            //not necessary an in webgl2 anymore to rebind the same last buffer (which is achieved by giving a null buffer), after buffer is changed. Removed it on all other occasions
            // this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null); 
        }
        /** Set Shader Attributes informations by getting their position in the shader, setting the offset, stride and size. For later use in the binding process */
        setAttribs(_attribs) {
            this.attribs = _attribs;
            this.offsets = [];
            this.stride = 0;
            let n = _attribs.length;
            for (let i = 0; i < n; i++) {
                this.offsets.push(this.stride);
                this.stride += _attribs[i].float32Count * Float32Array.BYTES_PER_ELEMENT; // 32bit float Bytes are a constant of 4
            }
        }
        /** Get the position of the attribute in the shader */
        loadAttribIndices(_program) {
            this.indices = _program.getAttribIndices(this.attribs);
        }
        /** Enable a attribute in a shader for this context, */
        bindAttribs() {
            if (this.indices == null)
                throw "indices are not loaded";
            let n = this.attribs.length;
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer); //making the buffer of this class the current buffer
            for (let i = 0; i < n; i++) {
                this.gl.enableVertexAttribArray(this.indices[i]); //enable the Attribute
                this.gl.vertexAttribPointer(this.indices[i], this.attribs[i].float32Count, this.gl.FLOAT, false, this.stride, this.offsets[i]); //creates a pointer and structure for this attribute
            }
        }
    }
    FudgeCore.PhysicsDebugVertexBuffer = PhysicsDebugVertexBuffer;
    /** Internal class for holding data about PhysicsDebugVertexBuffers */
    class PhysicsDebugIndexBuffer {
        /** Setup the rendering context for this buffer and create the actual buffer for this context. */
        constructor(_renderingContext) {
            this.gl = _renderingContext;
            this.buffer = this.gl.createBuffer();
        }
        /** Fill the bound buffer with data amount. Used at buffer initialization */
        setData(_array) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);
            this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Int16Array(_array), this.gl.DYNAMIC_DRAW);
            this.count = _array.length;
        }
        /** The actual DrawCall for physicsDebugDraw Buffers. This is where the information from the debug is actually drawn. */
        draw(_mode = this.gl.TRIANGLES, _count = -1) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);
            this.gl.drawElements(_mode, _count >= 0 ? _count : this.count, this.gl.UNSIGNED_SHORT, 0);
        }
    }
    FudgeCore.PhysicsDebugIndexBuffer = PhysicsDebugIndexBuffer;
    /** Internal class for managing data about webGL Attributes */
    class PhysicsDebugVertexAttribute {
        constructor(_float32Count, _name) {
            this.name = _name;
            this.float32Count = _float32Count;
        }
    }
    FudgeCore.PhysicsDebugVertexAttribute = PhysicsDebugVertexAttribute;
    /** Internal class for Shaders used only by the physics debugDraw */
    class PhysicsDebugShader {
        /** Introduce the FUDGE Rendering Context to this class, creating a program and vertex/fragment shader in this context */
        constructor(_renderingContext) {
            this.gl = _renderingContext;
            this.program = this.gl.createProgram();
            this.vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);
            this.fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);
        }
        /** Take glsl shaders as strings and compile them, attaching the compiled shaders to a program thats used by this rendering context. */
        compile(_vertexSource, _fragmentSource) {
            this.uniformLocationMap = new Map();
            this.compileShader(this.vertexShader, _vertexSource);
            this.compileShader(this.fragmentShader, _fragmentSource);
            this.gl.attachShader(this.program, this.vertexShader);
            this.gl.attachShader(this.program, this.fragmentShader);
            this.gl.linkProgram(this.program);
            if (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) { //make sure the linking worked, so the program is valid, and shaders are working
                FudgeCore.Debug.log(this.gl.getProgramInfoLog(this.program));
            }
            this.gl.validateProgram(this.program);
            if (!this.gl.getProgramParameter(this.program, this.gl.VALIDATE_STATUS)) {
                console.error("ERROR validating program!", this.gl.getProgramInfoLog(this.program));
                return;
            }
        }
        /** Get index of a attribute in a shader in this program */
        getAttribIndex(_name) {
            return this.gl.getAttribLocation(this.program, _name);
        }
        /** Get the location of a uniform in a shader in this program */
        getUniformLocation(_name) {
            if (this.uniformLocationMap.has(_name))
                return this.uniformLocationMap.get(_name);
            let location = this.gl.getUniformLocation(this.program, _name);
            this.uniformLocationMap.set(_name, location);
            return location;
        }
        /** Get all indices for every attribute in the shaders of this program */
        getAttribIndices(_attribs) {
            let indices = [];
            _attribs.forEach(_value => {
                indices.push(this.getAttribIndex(_value.name));
            });
            return indices;
        }
        /** Tell the FUDGE Rendering Context to use this program to draw. */
        use() {
            this.gl.useProgram(this.program);
        }
        /** Compile a shader out of a string and validate it. */
        compileShader(_shader, _source) {
            this.gl.shaderSource(_shader, _source);
            this.gl.compileShader(_shader);
            if (!this.gl.getShaderParameter(_shader, this.gl.COMPILE_STATUS)) {
                FudgeCore.Debug.log(this.gl.getShaderInfoLog(_shader));
            }
        }
    }
    FudgeCore.PhysicsDebugShader = PhysicsDebugShader;
    /** Internal Class used to draw debugInformations about the physics simulation onto the renderContext. No user interaction needed.
     * @author Marko Fehrenbach, HFU 2020 //Based on OimoPhysics Haxe DebugDrawDemo
     */
    class PhysicsDebugDraw extends FudgeCore.RenderWebGL {
        /** Creating the debug for physics in FUDGE. Tell it to draw only wireframe objects, since FUDGE is handling rendering of the objects besides physics.
         * Override OimoPhysics Functions with own rendering. Initialize buffers and connect them with the context for later use. */
        constructor() {
            super();
            this.style = new OIMO.DebugDrawStyle();
            this.oimoDebugDraw = new OIMO.DebugDraw();
            this.oimoDebugDraw.wireframe = true; //Triangle Rendering is handled by FUDGE so, only the physics lines/points need to be rendered, although triangle is still implemented
            this.gl = FudgeCore.RenderWebGL.crc3;
            this.initializeOverride();
            this.shader = new PhysicsDebugShader(this.gl);
            this.shader.compile(this.vertexShaderSource(), this.fragmentShaderSource());
            this.initializeBuffers();
        }
        /** Receive the current DebugMode from the physics settings and set the OimoPhysics.DebugDraw booleans to show only certain informations.
         * Needed since some debug informations exclude others, and can't be drawn at the same time, by OimoPhysics. And for users it provides more readability
         * to debug only what they need and is commonly debugged.
         */
        setDebugMode(_mode = FudgeCore.PHYSICS_DEBUGMODE.NONE) {
            // tslint:disable-next-line
            let draw = { drawAabbs: false, drawBases: false, drawBvh: false, drawContactBases: false, drawContacts: false, drawJointLimits: false, drawJoints: false, drawPairs: false, drawShapes: false };
            switch (_mode) {
                case FudgeCore.PHYSICS_DEBUGMODE.COLLIDERS: //Colliders and Bases
                    draw.drawBases = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER: //Colliders and joints
                    draw.drawJoints = draw.drawJointLimits = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY: //Physics Objects only, shows same as Collider / Joints but also hiding every other fudge object
                    draw.drawBases = draw.drawJointLimits = draw.drawJoints = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.CONTACTS: //Contacts
                    draw.drawBases = draw.drawContactBases = draw.drawContacts = draw.drawPairs = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.BOUNDING_BOXES: //Bounding Box / Broadphase Bvh / Bases
                    draw.drawAabbs = draw.drawBases = draw.drawBvh = true;
                    break;
            }
            Object.assign(this.oimoDebugDraw, draw);
        }
        /** Creating the empty render buffers. Defining the attributes used in shaders.
         * Needs to create empty buffers to already have them ready to draw later on, linking is only possible with existing buffers. */
        initializeBuffers() {
            let attribs = [
                new PhysicsDebugVertexAttribute(3, "aPosition"),
                new PhysicsDebugVertexAttribute(3, "aNormal"),
                new PhysicsDebugVertexAttribute(3, "aColor")
            ];
            this.pointVBO = new PhysicsDebugVertexBuffer(this.gl);
            this.pointIBO = new PhysicsDebugIndexBuffer(this.gl);
            this.pointVBO.setAttribs(attribs);
            this.pointVBO.loadAttribIndices(this.shader);
            this.lineVBO = new PhysicsDebugVertexBuffer(this.gl);
            this.lineIBO = new PhysicsDebugIndexBuffer(this.gl);
            this.lineVBO.setAttribs(attribs);
            this.lineVBO.loadAttribIndices(this.shader);
            this.triVBO = new PhysicsDebugVertexBuffer(this.gl);
            this.triIBO = new PhysicsDebugIndexBuffer(this.gl);
            this.triVBO.setAttribs(attribs);
            this.triVBO.loadAttribIndices(this.shader);
            this.clearBuffers();
        }
        /** Before OimoPhysics.world is filling the debug. Make sure the buffers are reset. Also receiving the debugMode from settings and updating the current projection for the vertexShader. */
        clearBuffers() {
            this.gl.lineWidth(2.0); //Does not affect anything because lineWidth is currently only supported by Microsoft Edge and FUDGE is optimized for Chrome
            this.pointData = []; //Resetting the data to be filled again
            this.lineData = [];
            this.triData = [];
            this.numPointData = 0; //Resetting the amount of data calls
            this.numLineData = 0;
            this.numTriData = 0;
        }
        /** After OimoPhysics.world filled the debug. Rendering calls. Setting this program to be used by the FUDGE rendering context. And draw each updated buffer and resetting them. */
        drawBuffers() {
            this.shader.use();
            let projection = FudgeCore.Physics.mainCam.mtxWorldToView.get();
            this.gl.uniformMatrix4fv(this.shader.getUniformLocation("u_mtxMeshToView"), false, projection);
            if (this.numPointData > 0) {
                this.pointIboData = []; //Buffer size matching to whats needed
                for (let i = 0; i < this.numPointData; i++) {
                    this.pointIboData.push(i);
                }
                this.pointIBO.setData(this.pointIboData); //Set Index buffer to correct size
                this.pointVBO.setData(this.pointData); //Set Vertex Buffer to current Data
                this.pointVBO.bindAttribs();
                this.pointIBO.draw(this.gl.POINTS, this.numPointData); //The actual draw call for each index in ibo
                this.numPointData = 0;
            }
            if (this.numLineData > 0) {
                this.lineIboData = [];
                for (let i = 0; i < this.numLineData; i++) {
                    this.lineIboData.push(i * 2);
                    this.lineIboData.push(i * 2 + 1);
                }
                this.lineIBO.setData(this.lineIboData);
                this.lineVBO.setData(this.lineData);
                this.lineVBO.bindAttribs();
                this.lineIBO.draw(this.gl.LINES, this.numLineData * 2);
                this.numLineData = 0;
            }
            if (this.numTriData > 0) {
                this.triIboData = [];
                for (let i = 0; i < this.numTriData; i++) {
                    this.triIboData.push(i * 3);
                    this.triIboData.push(i * 3 + 1);
                    this.triIboData.push(i * 3 + 2);
                }
                this.triIBO.setData(this.triIboData);
                this.triVBO.setData(this.triData);
                this.triVBO.bindAttribs();
                this.triIBO.draw(this.gl.TRIANGLES, this.numTriData * 3);
                this.numTriData = 0;
            }
        }
        /** Drawing the ray into the debugDraw Call. By using the overwritten line rendering functions and drawing a point (pointSize defined in the shader) at the end of the ray. */
        debugRay(_origin, _end, _color) {
            this.oimoDebugDraw.line(new OIMO.Vec3(_origin.x, _origin.y, _origin.z), new OIMO.Vec3(_end.x, _end.y, _end.z), new OIMO.Vec3(_color.r, _color.g, _color.b));
            this.oimoDebugDraw.point(new OIMO.Vec3(_end.x, _end.y, _end.z), new OIMO.Vec3(_color.r, _color.g, _color.b));
        }
        /** Overriding the existing functions from OimoPhysics.DebugDraw without actually inherit from the class, to avoid compiler problems.
         * Overriding them to receive debugInformations in the format the physic engine provides them but handling the rendering in the fudge context. */
        initializeOverride() {
            //Override point/line/triangle functions of OimoPhysics which are used to draw wireframes of objects, lines of raycasts or triangles when the objects are rendered by the physics not FUDGE (unused)
            OIMO.DebugDraw.prototype.point = function (_v, _color) {
                let debugWrapper = FudgeCore.Physics.debugDraw; //Get the custom physics debug class to have access to the data.
                if (FudgeCore.Physics.mainCam != null) { //only act when there is a camera that is rendering
                    let data = debugWrapper.pointData; //get the already written buffer informations
                    data.push(_v.x, _v.y, _v.z); //Coordinates of the point
                    data.push(0, 0, 0); //Point Normals - Empty since it's not a polygon
                    data.push(_color.x, _color.y, _color.z); //Color of the point
                    debugWrapper.numPointData++;
                }
            };
            OIMO.DebugDraw.prototype.line = function (_v1, _v2, _color) {
                let debugWrapper = FudgeCore.Physics.debugDraw;
                if (FudgeCore.Physics.mainCam != null) {
                    let data = debugWrapper.lineData;
                    data.push(_v1.x, _v1.y, _v1.z); //Point 1 Coordinates
                    data.push(0, 0, 0); //P1 Normals - Empty since it's not a polygon
                    data.push(_color.x, _color.y, _color.z); //P1 Color
                    data.push(_v2.x, _v2.y, _v2.z); //Point 2 Coordinates
                    data.push(0, 0, 0);
                    data.push(_color.x, _color.y, _color.z);
                    debugWrapper.numLineData++;
                }
            };
            OIMO.DebugDraw.prototype.triangle = function (_v1, _v2, _v3, _n1, _n2, _n3, _color) {
                let debugWrapper = FudgeCore.Physics.debugDraw;
                if (FudgeCore.Physics.mainCam != null) {
                    let data = debugWrapper.triData;
                    data.push(_v1.x, _v1.y, _v1.z);
                    data.push(_n1.x, _n1.y, _n1.z);
                    data.push(_color.x, _color.y, _color.z);
                    data.push(_v2.x, _v2.y, _v2.z);
                    data.push(_n2.x, _n2.y, _n2.z);
                    data.push(_color.x, _color.y, _color.z);
                    data.push(_v3.x, _v3.y, _v3.z);
                    data.push(_n3.x, _n3.y, _n3.z);
                    data.push(_color.x, _color.y, _color.z);
                    debugWrapper.numTriData++;
                }
            };
        }
        /** The source code (string) of the in physicsDebug used very simple vertexShader.
         *  Handling the projection (which includes, view/world[is always identity in this case]/projection in FUDGE). Increasing the size of single points drawn.
         *  And transfer position color to the fragmentShader. */
        vertexShaderSource() {
            return `
			precision mediump float;
			attribute vec3 aPosition;
			attribute vec3 aColor;
			attribute vec3 aNormal;
			varying vec3 vPosition;
			varying vec3 vNormal;
			varying vec3 vColor;
			uniform mat4 u_mtxMeshToView;

			void main() {
				vPosition = aPosition;
				vColor = aColor;
				vNormal = aNormal;
				gl_Position = u_mtxMeshToView * vec4(aPosition,1.0);
				gl_PointSize = 6.0;
			}`;
        }
        /** The source code (string) of the in physicsDebug used super simple fragmentShader. Unlit - only colorizing the drawn pixels, normals/position are given to make it expandable */
        fragmentShaderSource() {
            return `
      precision mediump float;
			varying vec3 vPosition;
			varying vec3 vNormal;
			varying vec3 vColor;

			void main() {
				gl_FragColor = vec4(vColor, 1.0);
			}`;
        }
    }
    FudgeCore.PhysicsDebugDraw = PhysicsDebugDraw;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A physical connection between two bodies with a defined axe of translation and rotation. Two Degrees of Freedom in the defined axis.
     * Two RigidBodies need to be defined to use it. A motor can be defined for rotation and translation, along with spring settings.
     *
     * ```text
     *          JointHolder - bodyAnchor
     *                    ‚îå‚îÄ‚îÄ‚îÄ‚îê
     *                    ‚îÇ   ‚îÇ
     *           <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> tied body, sliding on axis = 1st degree of freedom
     *                    ‚îÇ   ‚îÇ        rotating around axis = 2nd degree of freedom
     *                    ‚îî‚îÄ‚îÄ‚îÄ‚îò
     * ```
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class JointCylindrical extends FudgeCore.JointAxial {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointCylindrical); }
        #springDampingRotation;
        #springFrequencyRotation;
        #motorForce;
        #maxRotor;
        #minRotor;
        #rotorTorque;
        #rotorSpeed;
        #rotor;
        #rotorSpringDamper;
        /** Creating a cylindrical joint between two ComponentRigidbodies moving on one axis and rotating around another bound on a local anchorpoint. */
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied, _axis, _localAnchor);
            this.config = new OIMO.CylindricalJointConfig();
            this.#springDampingRotation = 0;
            this.#springFrequencyRotation = 0;
            this.#motorForce = 0;
            this.#maxRotor = 360;
            this.#minRotor = 0;
            this.#rotorTorque = 0;
            this.#rotorSpeed = 0;
            this.#getMutator = () => {
                let mutator = {
                    motorForce: this.motorForce,
                    springDampingRotation: this.springDampingRotation,
                    springFrequencyRotation: this.springFrequencyRotation,
                    maxRotor: this.maxRotor,
                    minRotor: this.minRotor,
                    rotorTorque: this.rotorTorque,
                    rotorSpeed: this.rotorSpeed
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, ["motorForce", "rotorTorque", "rotorSpeed", "maxRotor", "minRotor", "springDampingRotation", "springFrequencyRotation", "springFrequency"]);
            };
        }
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        set springDamping(_value) {
            super.springDamping = _value;
            if (this.joint != null)
                this.joint.getTranslationalSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        set springFrequency(_value) {
            super.springFrequency = _value;
            if (this.joint != null)
                this.joint.getTranslationalSpringDamper().frequency = _value;
        }
        /**
        * The damping of the spring. 1 equals completly damped. Influencing TORQUE / ROTATION
        */
        get springDampingRotation() {
            return this.#springDampingRotation;
        }
        set springDampingRotation(_value) {
            this.#springDampingRotation = _value;
            if (this.joint != null)
                this.joint.getRotationalSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. Influencing TORQUE / ROTATION
        */
        get springFrequencyRotation() {
            return this.#springFrequencyRotation;
        }
        set springFrequencyRotation(_value) {
            this.#springFrequencyRotation = _value;
            if (this.joint != null)
                this.joint.getRotationalSpringDamper().frequency = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxRotor() {
            return this.#maxRotor;
        }
        set maxRotor(_value) {
            this.#maxRotor = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().upperLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minRotor() {
            return this.#minRotor;
        }
        set minRotor(_value) {
            this.#minRotor = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get rotorSpeed() {
            return this.#rotorSpeed;
        }
        set rotorSpeed(_value) {
            this.#rotorSpeed = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get rotorTorque() {
            return this.#rotorTorque;
        }
        set rotorTorque(_value) {
            this.#rotorTorque = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().motorTorque = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        set maxMotor(_value) {
            super.maxMotor = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().upperLimit = _value;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        set minMotor(_value) {
            super.minMotor = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().lowerLimit = _value;
        }
        set motorSpeed(_value) {
            super.motorSpeed = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().motorSpeed = _value;
        }
        /**
          * The maximum motor force in Newton. force <= 0 equals disabled.
         */
        get motorForce() {
            return this.#motorForce;
        }
        set motorForce(_value) {
            this.#motorForce = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().motorForce = _value;
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        getMutator() {
            let mutator = super.getMutator();
            Object.assign(mutator, this.#getMutator());
            return mutator;
        }
        //#endregion
        constructJoint() {
            this.#rotorSpringDamper = new OIMO.SpringDamper().setSpring(this.springFrequencyRotation, this.springDampingRotation);
            this.motor = new OIMO.TranslationalLimitMotor().setLimits(super.minMotor, super.maxMotor);
            this.motor.setMotor(super.motorSpeed, this.motorForce);
            this.#rotor = new OIMO.RotationalLimitMotor().setLimits(this.minRotor * FudgeCore.Calc.deg2rad, this.maxRotor * FudgeCore.Calc.deg2rad);
            this.#rotor.setMotor(this.rotorSpeed, this.rotorTorque);
            this.config = new OIMO.CylindricalJointConfig();
            super.constructJoint();
            this.config.translationalSpringDamper = this.springDamper;
            this.config.translationalLimitMotor = this.motor;
            this.config.rotationalLimitMotor = this.#rotor;
            this.config.rotationalSpringDamper = this.#rotorSpringDamper;
            this.joint = new OIMO.CylindricalJoint(this.config);
            this.configureJoint();
        }
        #getMutator;
        #mutate;
    }
    FudgeCore.JointCylindrical = JointCylindrical;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with a defined axe movement.
       * Used to create a sliding joint along one axis. Two RigidBodies need to be defined to use it.
       * A motor can be defined to move the connected along the defined axis. Great to construct standard springs or physical sliders.
       *
       * ```text
       *          JointHolder - bodyAnchor
       *                    ‚îå‚îÄ‚îÄ‚îÄ‚îê
       *                    ‚îÇ   ‚îÇ
       *           <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> tied body, sliding on one Axis, 1 Degree of Freedom
       *                    ‚îÇ   ‚îÇ
       *                    ‚îî‚îÄ‚îÄ‚îÄ‚îò
       * ```
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointPrismatic extends FudgeCore.JointAxial {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointPrismatic); }
        //Internally used variables - Joint Properties that are used even when no actual joint is currently existent
        #motorForce;
        /** Creating a prismatic joint between two ComponentRigidbodies only moving on one axis bound on a local anchorpoint. */
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied, _axis, _localAnchor);
            this.config = new OIMO.PrismaticJointConfig();
            //Internally used variables - Joint Properties that are used even when no actual joint is currently existent
            this.#motorForce = 0;
            this.maxMotor = 10;
            this.minMotor = -10;
        }
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
          * The maximum motor force in Newton. force <= 0 equals disabled. This is the force that the motor is using to hold the position, or reach it if a motorSpeed is defined.
         */
        get motorForce() {
            return this.#motorForce;
        }
        set motorForce(_value) {
            this.#motorForce = _value;
            if (this.joint != null)
                this.joint.getLimitMotor().motorForce = _value;
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                motorForce: this.motorForce,
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.motorForce = _serialization.motorForce;
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.motorForce = this.motorForce;
            return mutator;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (typeof (_mutator.motorForce) !== "undefined")
                this.motorForce = _mutator.motorForce;
            delete _mutator.motorForce;
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        //#endregion
        /** Actual creation of a joint in the OimoPhysics system */
        constructJoint() {
            this.motor = new OIMO.TranslationalLimitMotor().setLimits(this.minMotor, this.maxMotor); //Create motor settings, to hold positions, set constraint min/max
            this.motor.setMotor(this.motorSpeed, this.motorForce);
            this.config = new OIMO.PrismaticJointConfig(); //Create a specific config for this joint type that is calculating the local axis for both bodies
            super.constructJoint();
            this.config.springDamper = this.springDamper; //Telling the config to use the motor/spring of the FUDGE Component
            this.config.limitMotor = this.motor;
            this.joint = new OIMO.PrismaticJoint(this.config);
            this.configureJoint();
        }
    }
    FudgeCore.JointPrismatic = JointPrismatic;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
      * A physical connection between two bodies, designed to simulate behaviour within a real body. It has two axis, a swing and twist axis, and also the perpendicular axis,
      * similar to a Spherical joint, but more restrictive in it's angles and only two degrees of freedom. Two RigidBodies need to be defined to use it. Mostly used to create humanlike joints that behave like a
      * lifeless body.
      * ```text
      *
      *                      anchor - it can twist on one axis and swing on another
      *                            ‚îÇ
      *         z            ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îê
      *         ‚Üë            ‚îÇ   ‚îÇ ‚Üì ‚îÇ   ‚îÇ        e.g. z = TwistAxis, it can rotate in-itself around this axis
      *    -x ‚Üê‚îÄ‚îº‚îÄ‚Üí x        ‚îÇ   ‚îÇ x ‚îÇ   ‚îÇ        e.g. x = SwingAxis, it can rotate anchored around the base on this axis
      *         ‚Üì            ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
      *        -z            ‚îî‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îò         e.g. you can twist the leg in-itself to a certain degree,
      *                                                     but also rotate it forward/backward/left/right to a certain degree
      *                bodyAnchor          bodyTied
      *              (e.g. pelvis)         (e.g. upper-leg)
      *
      * ```
      * Twist equals a rotation around a point without moving on an axis.
      * Swing equals a rotation on a point with a moving local axis.
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
      */
    class JointRagdoll extends FudgeCore.Joint {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointRagdoll); }
        #springDampingTwist;
        #springFrequencyTwist;
        #springDampingSwing;
        #springFrequencySwing;
        #maxMotorTwist;
        #minMotorTwist;
        #motorTorqueTwist;
        #motorSpeedTwist;
        #motorTwist;
        #springDamperTwist;
        #springDamperSwing;
        #axisFirst;
        #axisSecond;
        #maxAngleFirst;
        #maxAngleSecond;
        constructor(_bodyAnchor = null, _bodyTied = null, _axisFirst = new FudgeCore.Vector3(1, 0, 0), _axisSecond = new FudgeCore.Vector3(0, 0, 1), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.config = new OIMO.RagdollJointConfig();
            this.#springDampingTwist = 0;
            this.#springFrequencyTwist = 0;
            this.#springDampingSwing = 0;
            this.#springFrequencySwing = 0;
            this.#maxMotorTwist = 360;
            this.#minMotorTwist = 0;
            this.#motorTorqueTwist = 0;
            this.#motorSpeedTwist = 0;
            this.#maxAngleFirst = 0;
            this.#maxAngleSecond = 0;
            this.#getMutator = () => {
                let mutator = {
                    maxAngleFirst: this.#maxAngleFirst,
                    maxAngleSecond: this.#maxAngleSecond,
                    springDampingTwist: this.springDampingTwist,
                    springFrequencyTwist: this.springFrequencyTwist,
                    springDampingSwing: this.springDampingSwing,
                    springFrequencySwing: this.springFrequencySwing,
                    maxMotorTwist: this.#maxMotorTwist,
                    minMotorTwist: this.#minMotorTwist,
                    motorSpeedTwist: this.motorSpeedTwist,
                    motorTorqueTwist: this.motorTorqueTwist
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                if (typeof (_mutator.maxAngleFirst) !== "undefined")
                    this.#maxAngleFirst = _mutator.maxAngleFirst;
                if (typeof (_mutator.maxAngleSecond) !== "undefined")
                    this.#maxAngleSecond = _mutator.maxAngleSecond;
                this.mutateBase(_mutator, [
                    "springDampingTwist", "springFrequencyTwist", "springDampingSwing", "springFrequencySwing", "maxMotorTwist", "minMotorTwist", "motorSpeedTwist", "motorTorqueTwist"
                ]);
            };
            this.axisFirst = _axisFirst;
            this.axisSecond = _axisSecond;
            this.anchor = _localAnchor;
        }
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
         *  When changed after initialization the joint needs to be reconnected.
         */
        get axisFirst() {
            return new FudgeCore.Vector3(this.#axisFirst.x, this.#axisFirst.y, this.#axisFirst.z);
        }
        set axisFirst(_value) {
            this.#axisFirst = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
        * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
        *  When changed after initialization the joint needs to be reconnected.
        */
        get axisSecond() {
            return new FudgeCore.Vector3(this.#axisSecond.x, this.#axisSecond.y, this.#axisSecond.z);
        }
        set axisSecond(_value) {
            this.#axisSecond = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The maximum angle of rotation along the first axis. Value needs to be positive. Changes do rebuild the joint
         */
        get maxAngleFirstAxis() {
            return this.#maxAngleFirst * FudgeCore.Calc.rad2deg;
        }
        set maxAngleFirstAxis(_value) {
            this.#maxAngleFirst = _value * FudgeCore.Calc.deg2rad;
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The maximum angle of rotation along the second axis. Value needs to be positive. Changes do rebuild the joint
         */
        get maxAngleSecondAxis() {
            return this.#maxAngleSecond * FudgeCore.Calc.rad2deg;
        }
        set maxAngleSecondAxis(_value) {
            this.#maxAngleSecond = _value * FudgeCore.Calc.deg2rad;
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingTwist() {
            return this.#springDampingTwist;
        }
        set springDampingTwist(_value) {
            this.#springDampingTwist = _value;
            if (this.joint != null)
                this.joint.getTwistSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencyTwist() {
            return this.#springFrequencyTwist;
        }
        set springFrequencyTwist(_value) {
            this.#springFrequencyTwist = _value;
            if (this.joint != null)
                this.joint.getTwistSpringDamper().frequency = _value;
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingSwing() {
            return this.#springDampingSwing;
        }
        set springDampingSwing(_value) {
            this.#springDampingSwing = _value;
            if (this.joint != null)
                this.joint.getSwingSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencySwing() {
            return this.#springFrequencySwing;
        }
        set springFrequencySwing(_value) {
            this.#springFrequencySwing = _value;
            if (this.joint != null)
                this.joint.getSwingSpringDamper().frequency = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxMotorTwist() {
            return this.#maxMotorTwist * FudgeCore.Calc.rad2deg;
        }
        set maxMotorTwist(_value) {
            _value *= FudgeCore.Calc.deg2rad;
            this.#maxMotorTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().upperLimit = _value;
        }
        /**
         * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minMotorTwist() {
            return this.#minMotorTwist * FudgeCore.Calc.rad2deg;
        }
        set minMotorTwist(_value) {
            _value *= FudgeCore.Calc.deg2rad;
            this.#minMotorTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().lowerLimit = _value;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get motorSpeedTwist() {
            return this.#motorSpeedTwist;
        }
        set motorSpeedTwist(_value) {
            this.#motorSpeedTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get motorTorqueTwist() {
            return this.#motorTorqueTwist;
        }
        set motorTorqueTwist(_value) {
            this.#motorTorqueTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().motorTorque = _value;
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
         */
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization.axisFirst = this.axisFirst.serialize();
            serialization.axisSecond = this.axisSecond.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await this.axisFirst.deserialize(_serialization.axisFirst);
            await this.axisSecond.deserialize(_serialization.axisSecond);
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (typeof (_mutator.axisFirst) !== "undefined")
                this.axisFirst = new FudgeCore.Vector3(...(Object.values(_mutator.axisFirst)));
            if (typeof (_mutator.axisSecond) !== "undefined")
                this.axisSecond = new FudgeCore.Vector3(...(Object.values(_mutator.axisSecond)));
            delete _mutator.axisFirst;
            delete _mutator.axisSecond;
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        getMutator() {
            let mutator = super.getMutator();
            Object.assign(mutator, this.#getMutator());
            mutator.axisFirst = this.axisFirst.getMutator();
            mutator.axisSecond = this.axisSecond.getMutator();
            return mutator;
        }
        //#endregion
        constructJoint() {
            this.#springDamperTwist = new OIMO.SpringDamper().setSpring(this.springFrequencyTwist, this.springDampingTwist);
            this.#springDamperSwing = new OIMO.SpringDamper().setSpring(this.springFrequencySwing, this.springDampingSwing);
            this.#motorTwist = new OIMO.RotationalLimitMotor().setLimits(this.minMotorTwist, this.maxMotorTwist);
            this.#motorTwist.setMotor(this.motorSpeedTwist, this.motorTorqueTwist);
            this.config = new OIMO.RagdollJointConfig();
            super.constructJoint(this.axisFirst, this.axisSecond);
            this.config.swingSpringDamper = this.#springDamperSwing;
            this.config.twistSpringDamper = this.#springDamperTwist;
            this.config.twistLimitMotor = this.#motorTwist;
            this.config.maxSwingAngle1 = this.#maxAngleFirst;
            this.config.maxSwingAngle2 = this.#maxAngleSecond;
            this.joint = new OIMO.RagdollJoint(this.config);
            super.configureJoint();
        }
        #getMutator;
        #mutate;
    }
    FudgeCore.JointRagdoll = JointRagdoll;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with a defined axe of rotation. Also known as HINGE joint.
       * Two RigidBodies need to be defined to use it. A motor can be defined to rotate the connected along the defined axis.
       *
       * ```text
       *                  rotation axis, 1st Degree of freedom
       *                    ‚Üë
       *               ‚îå‚îÄ‚îÄ‚îÄ‚îê‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       *               ‚îÇ   ‚îÇ‚îÇ‚îÇ    ‚îÇ
       *               ‚îÇ   ‚îÇ‚îÇ‚îÇ    ‚îÇ
       *               ‚îÇ   ‚îÇ‚îÇ‚îÇ    ‚îÇ
       *               ‚îî‚îÄ‚îÄ‚îÄ‚îò‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       *                    ‚îÇ
       *      bodyAnchor         bodyTied
       *   (e.g. Doorhinge)       (e.g. Door)
       * ```
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointRevolute extends FudgeCore.JointAxial {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointRevolute); }
        #motorTorque;
        #rotor;
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied, _axis, _localAnchor);
            this.config = new OIMO.RevoluteJointConfig();
            this.#motorTorque = 0;
            this.maxMotor = 360;
            this.minMotor = 0;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        set maxMotor(_value) {
            super.maxMotor = _value;
            _value *= FudgeCore.Calc.deg2rad;
            if (this.joint)
                this.joint.getLimitMotor().upperLimit = _value;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        set minMotor(_value) {
            super.minMotor = _value;
            if (this.joint)
                this.joint.getLimitMotor().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The maximum motor force in Newton. force <= 0 equals disabled.
         */
        get motorTorque() {
            return this.#motorTorque;
        }
        set motorTorque(_value) {
            this.#motorTorque = _value;
            if (this.joint != null)
                this.joint.getLimitMotor().motorTorque = _value;
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
         */
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                motorTorque: this.motorTorque,
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.motorTorque = _serialization.motorTorque;
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.motorTorque = this.motorTorque;
            return mutator;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (typeof (_mutator.motorTorque) !== "undefined")
                this.motorTorque = _mutator.motorTorque;
            delete _mutator.motorTorque;
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        //#endregion
        constructJoint() {
            this.#rotor = new OIMO.RotationalLimitMotor().setLimits(super.minMotor * FudgeCore.Calc.deg2rad, super.maxMotor * FudgeCore.Calc.deg2rad);
            this.#rotor.setMotor(this.motorSpeed, this.motorTorque);
            this.config = new OIMO.RevoluteJointConfig();
            super.constructJoint();
            this.config.springDamper = this.springDamper;
            this.config.limitMotor = this.#rotor;
            this.joint = new OIMO.RevoluteJoint(this.config);
            this.configureJoint();
        }
    }
    FudgeCore.JointRevolute = JointRevolute;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with three Degrees of Freedom, also known as ball and socket joint. Two bodies connected at their anchor but free to rotate.
       * Used for things like the connection of bones in the human shoulder (if simplified, else better use JointRagdoll). Two RigidBodies need to be defined to use it. Only spring settings can be defined.
       * 3 Degrees are swing horizontal, swing vertical and twist.
       *
       * ```text
       *              JointHolder
       *         z      bodyAnchor (e.g. Human-Shoulder)
       *      y  ‚Üë
       *        \|          ‚îÄ‚îÄ‚îÄ(‚óè‚îÄ‚îÄ‚îÄ
       *  -x <---|---> x           bodyTied
       *         |\                (e.g. Upper-Arm)
       *         ‚Üì -y
       *        -z
       * ```
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointSpherical extends FudgeCore.Joint {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointSpherical); }
        #springDamping;
        #springFrequency;
        #springDamper;
        constructor(_bodyAnchor = null, _bodyTied = null, _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.config = new OIMO.SphericalJointConfig();
            this.#springDamping = 0;
            this.#springFrequency = 0;
            this.anchor = new FudgeCore.Vector3(_localAnchor.x, _localAnchor.y, _localAnchor.z);
        }
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDamping() {
            return this.#springDamping;
        }
        set springDamping(_value) {
            this.#springDamping = _value;
            if (this.joint != null)
                this.joint.getSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequency() {
            return this.#springFrequency;
        }
        set springFrequency(_value) {
            this.#springFrequency = _value;
            if (this.joint != null)
                this.joint.getSpringDamper().frequency = _value;
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                springDamping: this.springDamping,
                springFrequency: this.springFrequency,
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.springDamping = _serialization.springDamping;
            this.springFrequency = _serialization.springFrequency;
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.springDamping = this.springDamping;
            mutator.springFrequency = this.springFrequency;
            return mutator;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            this.mutateBase(_mutator, ["springDamping", "springFrequency"]);
            delete _mutator.springDamping;
            delete _mutator.springFrequency;
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        //#endregion
        constructJoint() {
            this.#springDamper = new OIMO.SpringDamper().setSpring(this.springFrequency, this.springDamping);
            this.config = new OIMO.SphericalJointConfig();
            super.constructJoint();
            this.config.springDamper = this.#springDamper;
            this.joint = new OIMO.SphericalJoint(this.config);
            super.configureJoint();
        }
    }
    FudgeCore.JointSpherical = JointSpherical;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with two defined axis (normally e.g. (0,0,1) and rotation(1,0,0)), they share the same anchor and have free rotation, but transfer the twist.
       * In reality used in cars to transfer the more stable stationary force on the velocity axis to the bumping, damped moving wheel. Two RigidBodies need to be defined to use it.
       * The two motors can be defined for the two rotation axis, along with springs.
       * ```text
       *
       *                      anchor - twist is transfered between bodies
       *         z                   |
       *         ‚Üë            -----  |  ------------
       *         |           |     | ‚Üì |            |
       *  -x <---|---> x     |     | x |            |           e.g. wheel can still turn up/down,
       *         |           |     |   |            |           left right but transfering it's rotation on to the wheel-axis.
       *         ‚Üì            -----     ------------
       *        -z
       *                 attachedRB          connectedRB
       *                (e.g. wheel)       (e.g. wheel-axis)
       * ```
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointUniversal extends FudgeCore.Joint {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointUniversal); }
        #springDampingFirst;
        #springFrequencyFirst;
        #springDampingSecond;
        #springFrequencySecond;
        #maxRotorFirst;
        #minRotorFirst;
        #rotorTorqueFirst;
        #rotorSpeedFirst;
        #maxRotorSecond;
        #minRotorSecond;
        #rotorTorqueSecond;
        #rotorSpeedSecond;
        #motorFirst;
        #motorSecond;
        #axisSpringDamperFirst;
        #axisSpringDamperSecond;
        #axisFirst;
        #axisSecond;
        constructor(_bodyAnchor = null, _bodyTied = null, _axisFirst = new FudgeCore.Vector3(1, 0, 0), _axisSecond = new FudgeCore.Vector3(0, 0, 1), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.config = new OIMO.UniversalJointConfig();
            this.#springDampingFirst = 0;
            this.#springFrequencyFirst = 0;
            this.#springDampingSecond = 0;
            this.#springFrequencySecond = 0;
            this.#maxRotorFirst = 360;
            this.#minRotorFirst = 0;
            this.#rotorTorqueFirst = 0;
            this.#rotorSpeedFirst = 0;
            this.#maxRotorSecond = 360;
            this.#minRotorSecond = 0;
            this.#rotorTorqueSecond = 0;
            this.#rotorSpeedSecond = 0;
            this.#getMutator = () => {
                let mutator = {
                    springDampingFirst: this.#springDampingFirst,
                    springFrequencyFirst: this.#springFrequencyFirst,
                    springDampingSecond: this.#springDampingSecond,
                    springFrequencySecond: this.#springFrequencySecond,
                    maxRotorFirst: this.#maxRotorFirst,
                    minRotorFirst: this.#minRotorFirst,
                    rotorSpeedFirst: this.#rotorSpeedFirst,
                    rotorTorqueFirst: this.#rotorTorqueFirst,
                    maxRotorSecond: this.#maxRotorSecond,
                    minRotorSecond: this.#minRotorSecond,
                    rotorSpeedSecond: this.#rotorSpeedSecond,
                    rotorTorqueSecond: this.#rotorTorqueSecond
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, [
                    "springDampingFirst", "springFrequencyFirst", "springDampingSecond", "springFrequencySecond",
                    "maxRotorFirst", "minRotorFirst", "rotorSpeedFirst", "rotorTorqueFirst",
                    "maxRotorSecond", "minRotorSecond", "rotorSpeedSecond", ".rotorTorqueSecond"
                ]);
            };
            this.axisFirst = _axisFirst;
            this.axisSecond = _axisSecond;
            this.anchor = _localAnchor;
        }
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
         *  When changed after initialization the joint needs to be reconnected.
         */
        get axisFirst() {
            return new FudgeCore.Vector3(this.#axisFirst.x, this.#axisFirst.y, this.#axisFirst.z);
        }
        set axisFirst(_value) {
            this.#axisFirst = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
        * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
        *  When changed after initialization the joint needs to be reconnected.
        */
        get axisSecond() {
            return new FudgeCore.Vector3(this.#axisSecond.x, this.#axisSecond.y, this.#axisSecond.z);
        }
        set axisSecond(_value) {
            this.#axisSecond = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingFirst() {
            return this.#springDampingFirst;
        }
        set springDampingFirst(_value) {
            this.#springDampingFirst = _value;
            if (this.joint != null)
                this.joint.getSpringDamper1().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencyFirst() {
            return this.#springFrequencyFirst;
        }
        set springFrequencyFirst(_value) {
            this.#springFrequencyFirst = _value;
            if (this.joint != null)
                this.joint.getSpringDamper1().frequency = _value;
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingSecond() {
            return this.#springDampingSecond;
        }
        set springDampingSecond(_value) {
            this.#springDampingSecond = _value;
            if (this.joint != null)
                this.joint.getSpringDamper2().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencySecond() {
            return this.#springFrequencySecond;
        }
        set springFrequencySecond(_value) {
            this.#springFrequencySecond = _value;
            if (this.joint != null)
                this.joint.getSpringDamper2().frequency = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxRotorFirst() {
            return this.#maxRotorFirst;
        }
        set maxRotorFirst(_value) {
            this.#maxRotorFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().upperLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minRotorFirst() {
            return this.#minRotorFirst;
        }
        set minRotorFirst(_value) {
            this.#minRotorFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get rotorSpeedFirst() {
            return this.#rotorSpeedFirst;
        }
        set rotorSpeedFirst(_value) {
            this.#rotorSpeedFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().motorSpeed = _value;
        }
        /**
         * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get rotorTorqueFirst() {
            return this.#rotorTorqueFirst;
        }
        set rotorTorqueFirst(_value) {
            this.#rotorTorqueFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().motorTorque = _value;
        }
        /**
         * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxRotorSecond() {
            return this.#maxRotorSecond;
        }
        set maxRotorSecond(_value) {
            this.#maxRotorSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().upperLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minRotorSecond() {
            return this.#minRotorSecond;
        }
        set minRotorSecond(_value) {
            this.#minRotorSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get rotorSpeedSecond() {
            return this.#rotorSpeedSecond;
        }
        set rotorSpeedSecond(_value) {
            this.#rotorSpeedSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get rotorTorqueSecond() {
            return this.#rotorTorqueSecond;
        }
        set rotorTorqueSecond(_value) {
            this.#rotorTorqueSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().motorTorque = _value;
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
         */
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization.firstAxis = this.axisFirst.serialize();
            serialization.secondAxis = this.axisSecond.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.axisFirst = await new FudgeCore.Vector3().deserialize(_serialization.axisFirst);
            this.axisSecond = await new FudgeCore.Vector3().deserialize(_serialization.axisSecond);
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (typeof (_mutator.axisFirst) !== "undefined")
                this.axisFirst = new FudgeCore.Vector3(...(Object.values(_mutator.axisFirst)));
            if (typeof (_mutator.axisSecond) !== "undefined")
                this.axisSecond = new FudgeCore.Vector3(...(Object.values(_mutator.axisSecond)));
            delete _mutator.axisFirst;
            delete _mutator.axisSecond;
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            await super.mutate(_mutator, _selection, _dispatchMutate);
        }
        getMutator() {
            let mutator = super.getMutator();
            Object.assign(mutator, this.#getMutator());
            mutator.axisFirst = this.axisFirst.getMutator();
            mutator.axisSecond = this.axisSecond.getMutator();
            return mutator;
        }
        //#endregion
        constructJoint() {
            this.#axisSpringDamperFirst = new OIMO.SpringDamper().setSpring(this.#springFrequencyFirst, this.#springDampingFirst);
            this.#axisSpringDamperSecond = new OIMO.SpringDamper().setSpring(this.#springFrequencySecond, this.#springDampingSecond);
            this.#motorFirst = new OIMO.RotationalLimitMotor().setLimits(this.#minRotorFirst * FudgeCore.Calc.deg2rad, this.#maxRotorFirst * FudgeCore.Calc.deg2rad);
            this.#motorFirst.setMotor(this.#rotorSpeedFirst, this.#rotorTorqueFirst);
            this.#motorSecond = new OIMO.RotationalLimitMotor().setLimits(this.#minRotorFirst * FudgeCore.Calc.deg2rad, this.#maxRotorFirst * FudgeCore.Calc.deg2rad);
            this.#motorSecond.setMotor(this.#rotorSpeedFirst, this.#rotorTorqueFirst);
            this.config = new OIMO.UniversalJointConfig();
            super.constructJoint(this.#axisFirst, this.#axisSecond);
            this.config.limitMotor1 = this.#motorFirst;
            this.config.limitMotor2 = this.#motorSecond;
            this.config.springDamper1 = this.#axisSpringDamperFirst;
            this.config.springDamper2 = this.#axisSpringDamperSecond;
            this.joint = new OIMO.UniversalJoint(this.config);
            super.configureJoint();
        }
        #getMutator;
        #mutate;
    }
    FudgeCore.JointUniversal = JointUniversal;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with no movement.
       * Best way to simulate convex objects like a chair seat connected to chair legs.
       * The actual anchor point does not matter that much, only in very specific edge cases.
       * Because welding means they simply do not disconnect. (unless you add Breakability)
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointWelding extends FudgeCore.Joint {
        static { this.iSubclass = FudgeCore.Joint.registerSubclass(JointWelding); }
        constructor(_bodyAnchor = null, _bodyTied = null, _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.config = new OIMO.GenericJointConfig();
            this.anchor = new FudgeCore.Vector3(_localAnchor.x, _localAnchor.y, _localAnchor.z);
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        //#endregion
        constructJoint() {
            this.config = new OIMO.GenericJointConfig();
            super.constructJoint(new OIMO.Mat3(), new OIMO.Mat3());
            this.joint = new OIMO.GenericJoint(this.config);
            this.joint.setAllowCollision(this.internalCollision);
        }
    }
    FudgeCore.JointWelding = JointWelding;
})(FudgeCore || (FudgeCore = {}));
/// <reference path="../../../Distribution/OimoPhysics.d.ts"/>
var FudgeCore;
/// <reference path="../../../Distribution/OimoPhysics.d.ts"/>
(function (FudgeCore) {
    /**
      * Manages the OIMO physics engine for FUDGE. Multiple instances may be created, one is active at a time.
      * All methods are static and use the currently active instance. At startup, a default instance is created and become the active instance
      * Attaching a {@link ComponentRigidbody} to a {@link Node} places a physics collider in the physics instance active at that time.
      * @author Marko Fehrenbach, HFU 2020
      */
    class Physics {
        /** The SETTINGS that apply to the physical world. Ranging from things like sleeping, collisionShapeThickness and others */
        static { this.settings = new FudgeCore.PhysicsSettings(FudgeCore.COLLISION_GROUP.DEFAULT, (FudgeCore.COLLISION_GROUP.DEFAULT | FudgeCore.COLLISION_GROUP.GROUP_1 | FudgeCore.COLLISION_GROUP.GROUP_2 | FudgeCore.COLLISION_GROUP.GROUP_3 | FudgeCore.COLLISION_GROUP.GROUP_4)); }
        static { this.∆íactive = new Physics(); }
        /** The rendering of physical debug informations. Used internally no interaction needed.*/
        #debugDraw;
        /** The camera/viewport the physics are debugged to. Used internally no interaction needed. */
        #mainCam;
        constructor() {
            this.bodyList = new Array();
            this.jointList = new Array();
            if (typeof OIMO == "undefined") { // Check if OIMO Namespace was loaded, else do not use any physics. Check is needed to ensure FUDGE can be used without Physics
                FudgeCore.Debug.error("OIMO physics engine not connected!");
                return null;
            }
            this.oimoWorld = new OIMO.World();
            this.#debugDraw = new FudgeCore.PhysicsDebugDraw(); //Create a FUDGE Physics debugging handling object
            this.oimoWorld.setDebugDraw(this.#debugDraw.oimoDebugDraw); //Tell OimoPhysics where to debug to and how it will be handled
        }
        /**
         * Define the currently active Physics instance
         */
        static set activeInstance(_physics) {
            Physics.∆íactive = _physics;
        }
        /** Get the currently active Physics instance */
        static get activeInstance() {
            return Physics.∆íactive;
        }
        static get debugDraw() {
            return Physics.∆íactive.#debugDraw;
        }
        static get mainCam() {
            return Physics.∆íactive.#mainCam;
        }
        /**
        * Cast a RAY into the physical world from a origin point in a certain direction. Receiving informations about the hit object and the
        * hit point. Do not specify a _group to raycast the whole world, else only bodies within the specific group can be hit.
        */
        static raycast(_origin, _direction, _length = 1, _debugDraw = false, _group = FudgeCore.COLLISION_GROUP.DEFAULT) {
            let hitInfo = new FudgeCore.RayHitInfo();
            let ray = new OIMO.RayCastClosest();
            let begin = new OIMO.Vec3(_origin.x, _origin.y, _origin.z);
            let end = this.getRayEndPoint(begin, new FudgeCore.Vector3(_direction.x, _direction.y, _direction.z), _length);
            ray.clear();
            if (_group == FudgeCore.COLLISION_GROUP.DEFAULT) { //Case 1: Raycasting the whole world, normal mode
                Physics.∆íactive.oimoWorld.rayCast(begin, end, ray);
            }
            else { //Case2: Raycasting on each body in a specific group
                let allHits = new Array();
                Physics.∆íactive.bodyList.forEach(function (_value) {
                    if (_value.collisionGroup == _group) {
                        hitInfo = _value.raycastThisBody(_origin, _direction, _length);
                        if (hitInfo.hit == true) { //Every hit is could potentially be the closest
                            allHits.push(hitInfo);
                        }
                    }
                });
                allHits.forEach(function (_value) {
                    if (_value.hitDistance < hitInfo.hitDistance || hitInfo.hit == false) {
                        hitInfo = _value;
                    }
                });
            }
            if (ray.hit) { //Fill in informations on the hit
                hitInfo.hit = true;
                hitInfo.hitPoint = new FudgeCore.Vector3(ray.position.x, ray.position.y, ray.position.z);
                hitInfo.hitNormal = new FudgeCore.Vector3(ray.normal.x, ray.normal.y, ray.normal.z);
                hitInfo.hitDistance = this.getRayDistance(_origin, hitInfo.hitPoint);
                hitInfo.rigidbodyComponent = ray.shape.userData;
                hitInfo.rayEnd = new FudgeCore.Vector3(end.x, end.y, end.z);
                hitInfo.rayOrigin = _origin;
            }
            else {
                hitInfo.rayOrigin = _origin;
                hitInfo.hitPoint = new FudgeCore.Vector3(end.x, end.y, end.z);
            }
            if (_debugDraw) { //Handle debugging
                Physics.∆íactive.#debugDraw.debugRay(hitInfo.rayOrigin, hitInfo.hitPoint, new FudgeCore.Color(0, 1, 0, 1));
            }
            return hitInfo;
        }
        /**
        * Simulates the physical world. _deltaTime is the amount of time between physical steps in seconds. Default is {@link Loop.timeFrameGame} / 1000 to run in sync with the {@link Loop}.
        * The maximum value is 1/30 of a second, to have more consistent frame calculations.
        */
        static simulate(_deltaTime = FudgeCore.Loop.timeFrameGame / 1000) {
            if (Physics.∆íactive.jointList.length > 0)
                Physics.connectJoints(); // Connect joints if anything has happened between the last call to any of the two paired rigidbodies
            if (_deltaTime == 0) // No time passed, no need to update the physics world
                return;
            _deltaTime = _deltaTime > 1 / 30 ? 1 / 30 : _deltaTime; // If instead of a fixed rate the game framerate is used, make sure irregular timings are fixed to 30fps
            Physics.∆íactive.oimoWorld.step(_deltaTime); // Update the simulation by the given deltaTime
        }
        /**
         * Draw information about the currently active instance using the {@link ComponentCamera} given
         */
        static draw(_cmpCamera, _mode) {
            Physics.∆íactive.#debugDraw.setDebugMode(_mode);
            Physics.∆íactive.#mainCam = _cmpCamera;
            Physics.∆íactive.oimoWorld.debugDraw(); //Filling the physics world debug informations into the debug rendering handler
            Physics.∆íactive.#debugDraw.drawBuffers();
            Physics.∆íactive.#debugDraw.clearBuffers(); //Updates info about the current projection, resetting the points/lines/triangles that need to be drawn from debug
        }
        /**
          * Adjusts the transforms of the {@link ComponentRigidbody}s in the given branch to match their nodes or meshes
          */
        static adjustTransforms(_branch, _toMesh = false) {
            FudgeCore.Render.prepare(_branch, { ignorePhysics: true });
            for (let node of FudgeCore.Render.nodesPhysics)
                node.getComponent(FudgeCore.ComponentRigidbody).initialize();
        }
        /**
        * Get the applied gravitational force of the active instance. Default earth gravity = 9.81 m/s
        */
        static getGravity() {
            let tmpVec = Physics.∆íactive.oimoWorld.getGravity();
            return new FudgeCore.Vector3(tmpVec.x, tmpVec.y, tmpVec.z);
        }
        /**
        * Set the applied gravitational force of the active instance. Default earth gravity = 9.81 m/s
        */
        static setGravity(_value) {
            let tmpVec = new OIMO.Vec3(_value.x, _value.y, _value.z);
            Physics.∆íactive.oimoWorld.setGravity(tmpVec);
        }
        /**
        * Add a new OIMO Rigidbody to the active instance, happens automatically when adding a FUDGE Rigidbody Component.
        */
        static addRigidbody(_cmpRB) {
            Physics.∆íactive.bodyList.push(_cmpRB);
            Physics.∆íactive.oimoWorld.addRigidBody(_cmpRB.getOimoRigidbody());
        }
        /**
        * Remove the OIMO Rigidbody to the active instance, happens automatically when removing a FUDGE Rigidbody Component
        */
        static removeRigidbody(_cmpRB) {
            // TODO: two lists are being managed, info might deviate. Cleanup!
            let oimoRigidBody = _cmpRB.getOimoRigidbody();
            if (oimoRigidBody._world)
                oimoRigidBody._world.removeRigidBody(oimoRigidBody);
            // what if the rigidbodys oimo-world does not belong to the active instance?
            let id = Physics.∆íactive.bodyList.indexOf(_cmpRB);
            if (id > -1)
                Physics.∆íactive.bodyList.splice(id, 1);
        }
        /**
        * Add a new OIMO Joint/Constraint to the active instance, happens automatically when adding a FUDGE Joint Component
        */
        static addJoint(_cmpJoint) {
            Physics.∆íactive.oimoWorld.addJoint(_cmpJoint.getOimoJoint());
        }
        /**
        * Called internally to inform the physics system that a joint has a change of core properties and needs to be recreated.
        */
        static changeJointStatus(_cmpJoint) {
            if (Physics.∆íactive.jointList.indexOf(_cmpJoint) < 0)
                Physics.∆íactive.jointList.push(_cmpJoint);
        }
        /**
          * Remove the OIMO Joint/Constraint to the active instance, happens automatically when removing a FUDGE Joint Component
          */
        static removeJoint(_cmpJoint) {
            try {
                Physics.∆íactive.oimoWorld.removeJoint(_cmpJoint.getOimoJoint());
            }
            catch (_error) {
                FudgeCore.Debug.fudge(_error);
            }
        }
        /** Returns all the ComponentRigidbodies that are known to the active instance. */
        static getBodyList() {
            return Physics.∆íactive.bodyList;
        }
        /** Giving a ComponentRigidbody a specific identification number so it can be referenced in the loading process. And removed rb's can receive a new id. */
        static distributeBodyID() {
            let freeId = 0;
            let free = false;
            Physics.∆íactive.bodyList.forEach((_value) => {
                if (_value.id != freeId) {
                    free = true;
                }
                else {
                    free = false;
                }
                if (!free) {
                    freeId++;
                }
            });
            return freeId;
        }
        /**
         * Connect all joints that are not connected yet. Used internally no user interaction needed. This functionality is called and needed to make sure joints connect/disconnect
         * if any of the two paired ComponentRigidbodies change.
         */
        static connectJoints() {
            let jointsToConnect = Physics.∆íactive.jointList;
            Physics.∆íactive.jointList = [];
            jointsToConnect.forEach((_joint) => {
                if (_joint.isConnected() == false)
                    if (_joint.isActive)
                        _joint.connect();
                    else
                        Physics.∆íactive.jointList.push(_joint);
            });
        }
        /** Remove all oimo joints and rigidbodies, so that they can be reused in another world  */
        static cleanup() {
            let oimoWorld = Physics.∆íactive.oimoWorld;
            if (oimoWorld != null) {
                //Resetting the world so a new world can be created, fix for re-opening a project in editor, making sure there are no old things calculated
                let jointsWorld = oimoWorld.getNumJoints();
                let bodiesWorld = oimoWorld.getNumRigidBodies();
                for (let body of Physics.∆íactive.bodyList)
                    body.isInitialized = false;
                Physics.∆íactive.jointList = new Array(); // TODO: see if it would be smarter, do use these arrays. Definitely more intuitive...
                for (let i = 0; i < jointsWorld; i++) {
                    let oimoJoint = Physics.∆íactive.oimoWorld.getJointList();
                    oimoWorld.removeJoint(oimoJoint);
                }
                for (let i = 0; i < bodiesWorld; i++) {
                    let oimoBody = oimoWorld.getRigidBodyList();
                    oimoWorld.removeRigidBody(oimoBody);
                }
            }
        }
        // /** Returns the ComponentRigidbody with the given id. Used internally to reconnect joints on loading in the editor. */
        // private static getBodyByID(_id: number): ComponentRigidbody {
        //   let body: ComponentRigidbody = null;
        //   Physics.#activePhysics.bodyList.forEach((value: ComponentRigidbody): void => {
        //     if (value.id == _id) {
        //       body = value;
        //     }
        //   });
        //   return body;
        // }
        /** Internal function to calculate the endpoint of mathematical ray. By adding the multiplied direction to the origin.
           * Used because OimoPhysics defines ray by start/end. But GameEngines commonly use origin/direction.
           */
        static getRayEndPoint(_start, _direction, _length) {
            let origin = FudgeCore.Recycler.get(FudgeCore.Vector3);
            origin.set(_start.x, _start.y, _start.z);
            let scaledDirection = _direction.clone;
            scaledDirection.scale(_length);
            let endpoint = FudgeCore.Vector3.SUM(scaledDirection, origin);
            FudgeCore.Recycler.store(scaledDirection);
            FudgeCore.Recycler.store(endpoint);
            FudgeCore.Recycler.store(origin);
            return new OIMO.Vec3(endpoint.x, endpoint.y, endpoint.z);
        }
        /** Internal function to get the distance in which a ray hit by subtracting points from each other and get the square root of the squared product of each component. */
        static getRayDistance(_origin, _hitPoint) {
            let dx = _origin.x - _hitPoint.x;
            let dy = _origin.y - _hitPoint.y;
            let dz = _origin.z - _hitPoint.z;
            return Math.sqrt(dx * dx + dy * dy + dz * dz);
        }
        /** Returns the actual used world of the OIMO physics engine. No user interaction needed - Only for advanced users that need to access it directly */
        getOimoWorld() {
            return Physics.∆íactive.oimoWorld;
        }
    }
    FudgeCore.Physics = Physics;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defines a threedimensional box by two corner-points, one with minimal values and one with maximum values
     */
    class Box {
        constructor(_min = FudgeCore.Vector3.ONE(Infinity), _max = FudgeCore.Vector3.ONE(-Infinity)) {
            this.set(_min, _max);
        }
        /**
         * Define the corners of this box, standard values are Infinity for min, and -Infinity for max,
         * creating an impossible inverted box that can not contain any points
         */
        set(_min = FudgeCore.Vector3.ONE(Infinity), _max = FudgeCore.Vector3.ONE(-Infinity)) {
            this.min = _min;
            this.max = _max;
        }
        /**
         * Expand the box if necessary to include the given point
         */
        expand(_include) {
            this.min.min(_include);
            this.max.max(_include);
        }
        recycle() {
            this.min.set(Infinity, Infinity, Infinity);
            this.max.set(-Infinity, -Infinity, -Infinity);
        }
    }
    FudgeCore.Box = Box;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores information provided by {@link Render}-picking e.g. using {@link Picker} and provides methods for further calculation of positions and normals etc.
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class Pick {
        #mtxViewToWorld;
        #posWorld;
        #posMesh;
        constructor(_node) {
            this.node = _node;
        }
        /**
         * Accessor to calculate and store world position of intersection of {@link Ray} and {@link Mesh} only when used.
         */
        get posWorld() {
            if (this.#posWorld)
                return this.#posWorld;
            let pointInClipSpace = FudgeCore.Vector3.Z(this.zBuffer);
            let m = this.#mtxViewToWorld.get();
            let result = FudgeCore.Vector3.TRANSFORMATION(pointInClipSpace, this.#mtxViewToWorld, true);
            let w = m[3] * pointInClipSpace.x + m[7] * pointInClipSpace.y + m[11] * pointInClipSpace.z + m[15];
            result.scale(1 / w);
            this.#posWorld = result;
            return result;
        }
        /**
         * Accessor to calculate and store position in mesh-space of intersection of {@link Ray} and {@link Mesh} only when used.
         */
        get posMesh() {
            if (this.#posMesh)
                return this.#posMesh;
            let mtxWorldToMesh = FudgeCore.Matrix4x4.INVERSE(this.node.getComponent(FudgeCore.ComponentMesh).mtxWorld);
            let posMesh = FudgeCore.Vector3.TRANSFORMATION(this.posWorld, mtxWorldToMesh);
            this.#posMesh = posMesh;
            return posMesh;
        }
        /**
         * Accessor to calculate and store the face normal in world-space at the point of intersection of {@link Ray} and {@link Mesh} only when used.
         */
        get normal() {
            let cmpMesh = this.node.getComponent(FudgeCore.ComponentMesh);
            let result;
            for (let face of cmpMesh.mesh.faces) {
                if (face.isInside(this.posMesh)) {
                    result = face.normal.clone;
                    break;
                }
            }
            result.transform(cmpMesh.mtxWorld, false);
            result.normalize();
            return result;
        }
        /**
         * Called solely by the renderer to enable calculation of the world coordinates of this {@link Pick}
         */
        set mtxViewToWorld(_mtxViewToWorld) {
            this.#mtxViewToWorld = _mtxViewToWorld;
        }
    }
    FudgeCore.Pick = Pick;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Provides static methods for picking using {@link Render}
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class Picker {
        /**
         * Takes a ray plus min and max values for the near and far planes to construct the picker-camera,
         * then renders the pick-texture and returns an unsorted {@link Pick}-array with information about the hits of the ray.
         */
        static pickRay(_nodes, _ray, _min, _max, _pickGizmos = false, _gizmosFilter) {
            let cmpCameraPick = new FudgeCore.ComponentCamera();
            cmpCameraPick.mtxPivot.translation = _ray.origin;
            cmpCameraPick.mtxPivot.lookAt(FudgeCore.Vector3.SUM(_ray.origin, _ray.direction));
            cmpCameraPick.projectCentral(1, 0.001, FudgeCore.FIELD_OF_VIEW.DIAGONAL, _min, _max);
            let picks = FudgeCore.Render.pickBranch(_nodes, cmpCameraPick, _pickGizmos, _gizmosFilter);
            return picks;
        }
        /**
         * Takes a camera and a point on its virtual normed projection plane (distance 1) to construct the picker-camera,
         * then renders the pick-texture and returns an unsorted {@link Pick}-array with information about the hits of the ray.
         */
        static pickCamera(_nodes, _cmpCamera, _posProjection, _pickGizmos = false, _gizmosFilter) {
            let ray = new FudgeCore.Ray(new FudgeCore.Vector3(-_posProjection.x, _posProjection.y, 1));
            let length = ray.direction.magnitude;
            if (_cmpCamera.node) {
                let mtxCamera = FudgeCore.Matrix4x4.PRODUCT(_cmpCamera.node.mtxWorld, _cmpCamera.mtxPivot);
                ray.transform(mtxCamera);
                FudgeCore.Recycler.store(mtxCamera);
            }
            else
                ray.transform(_cmpCamera.mtxPivot);
            let picks = Picker.pickRay(_nodes, ray, length * _cmpCamera.getNear(), length * _cmpCamera.getFar(), _pickGizmos, _gizmosFilter);
            return picks;
        }
        /**
         * Takes the camera of the given viewport and a point the client surface to construct the picker-camera,
         * then renders the pick-texture and returns an unsorted {@link Pick}-array with information about the hits of the ray.
         */
        static pickViewport(_viewport, _posClient) {
            let posProjection = _viewport.pointClientToProjection(_posClient);
            let nodes = Array.from(_viewport.getBranch().getIterator(true));
            let picks = Picker.pickCamera(nodes, _viewport.camera, posProjection, _viewport.gizmosEnabled, _viewport.gizmosFilter);
            return picks;
        }
    }
    FudgeCore.Picker = Picker;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defined by an origin and a direction of type {@link Pick}, rays are used to calculate picking and intersections
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class Ray {
        constructor(_direction = FudgeCore.Vector3.Z(1), _origin = FudgeCore.Vector3.ZERO(), _length = 1) {
            this.origin = _origin;
            this.direction = _direction;
            this.length = _length;
        }
        /**
         * Returns the point of intersection of this ray with a plane defined by
         * the given point of origin and the planes normal. All values and calculations
         * must be relative to the same coordinate system, preferably the world
         */
        intersectPlane(_origin, _normal) {
            let difference = FudgeCore.Vector3.DIFFERENCE(_origin, this.origin);
            let factor = FudgeCore.Vector3.DOT(difference, _normal) / FudgeCore.Vector3.DOT(this.direction, _normal);
            let intersect = FudgeCore.Vector3.SUM(this.origin, FudgeCore.Vector3.SCALE(this.direction, factor));
            return intersect;
        }
        /**
         * Returns the point of intersection of this ray with a plane defined by the face.
         * All values and calculations must be relative to the same coordinate system, preferably the world
         */
        intersectFacePlane(_face) {
            return this.intersectPlane(_face.getPosition(0), _face.normal);
        }
        /**
         * Returns the shortest distance from the ray to the given target point.
         * All values and calculations must be relative to the same coordinate system, preferably the world.
         */
        getDistance(_target) {
            let originToTarget = FudgeCore.Vector3.DIFFERENCE(_target, this.origin);
            let raySection = FudgeCore.Vector3.NORMALIZATION(this.direction, 1);
            let projectedLength = FudgeCore.Vector3.DOT(originToTarget, raySection);
            raySection.scale(projectedLength);
            raySection.add(this.origin);
            let distance = FudgeCore.Vector3.DIFFERENCE(_target, raySection);
            return distance;
        }
        /**
         * Transform the ray by the given matrix
         */
        transform(_mtxTransform) {
            this.origin.transform(_mtxTransform);
            this.direction.transform(_mtxTransform, false);
        }
        /**
         * Returns a readable string representation of this ray
         */
        toString() {
            return `origin: ${this.origin.toString()}, direction: ${this.direction.toString()}, length: ${this.length.toPrecision(5)}`;
        }
    }
    FudgeCore.Ray = Ray;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The gizmos drawing interface. {@link Component}s can use this to draw visual aids inside {@link Component.drawGizmos} and {@link Component.drawGizmosSelected}.
     */
    class Gizmos {
        /**
         * The default opacity of occluded gizmo parts. Use this to control the visibility of gizmos behind objects.
         * Set to 0 to make occluded gizmo parts disappear. Set to 1 to make occluded gizmo parts fully visible.
         */
        static { this.alphaOccluded = 0.3; } // currently gizmos can always be picked even if this is set to 0...
        static { this.posIcons = new Set(); } // cache the positions of icons to avoid drawing them within each other
        static { this.arrayBuffer = FudgeCore.RenderWebGL.assert(FudgeCore.RenderWebGL.getRenderingContext().createBuffer()); }
        static { this.indexBuffer = FudgeCore.RenderWebGL.assert(FudgeCore.RenderWebGL.getRenderingContext().createBuffer()); }
        static #camera; // TODO: maybe rather pass the camera into the drawGizmos methods on components?
        /**
         * The camera which is currently used to draw gizmos.
         */
        static get camera() {
            return Gizmos.#camera;
        }
        static get quad() {
            let quad = new FudgeCore.MeshQuad("GizmoQuad");
            FudgeCore.Project.deregister(quad);
            Reflect.defineProperty(Gizmos, "quad", { value: quad });
            return Gizmos.quad;
        }
        static get cube() {
            let cube = new FudgeCore.MeshCube("GizmoCube");
            FudgeCore.Project.deregister(cube);
            Reflect.defineProperty(Gizmos, "cube", { value: cube });
            return Gizmos.cube;
        }
        static get sphere() {
            let sphere = new FudgeCore.MeshSphere("GizmoSphere", 6, 6);
            FudgeCore.Project.deregister(sphere);
            Reflect.defineProperty(Gizmos, "sphere", { value: sphere });
            return Gizmos.sphere;
        }
        // TODO: think about drawing these on the fly instead of caching them. Then we could accept a position, radius etc. parameter and draw them independent from the mtxWorld
        static get wireCircle() {
            const radius = 0.5;
            const segments = 45;
            const circle = new Array(segments).fill(null).map(() => FudgeCore.Recycler.get(FudgeCore.Vector3));
            for (let i = 0; i < segments; i++) {
                const angle = (i / segments) * 2 * Math.PI;
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                circle[i].set(x, y, 0);
            }
            const lines = [];
            for (let i = 0; i < segments; i++)
                lines.push(circle[i], circle[(i + 1) % segments]);
            Reflect.defineProperty(Gizmos, "wireCircle", { value: lines });
            return Gizmos.wireCircle;
        }
        static get wireSphere() {
            let lines = Gizmos.wireCircle.concat();
            let mtxRotation = FudgeCore.Matrix4x4.ROTATION_X(90);
            lines.push(...Gizmos.wireCircle.map((_point) => FudgeCore.Vector3.TRANSFORMATION(_point, mtxRotation)));
            mtxRotation.rotateY(90);
            lines.push(...Gizmos.wireCircle.map((_point) => FudgeCore.Vector3.TRANSFORMATION(_point, mtxRotation)));
            Reflect.defineProperty(Gizmos, "wireSphere", { value: lines });
            return Gizmos.wireSphere;
        }
        static get wireCone() {
            const radius = 0.5;
            const height = 1;
            const apex = FudgeCore.Vector3.ZERO();
            const quad = [
                new FudgeCore.Vector3(radius, 0, height),
                new FudgeCore.Vector3(-radius, 0, height),
                new FudgeCore.Vector3(0, radius, height),
                new FudgeCore.Vector3(0, -radius, height)
            ];
            let lines = Gizmos.wireCircle.map((_point) => FudgeCore.Vector3.TRANSFORMATION(_point, FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Vector3.Z(1))));
            lines.push(...[apex, quad[0], apex, quad[1], apex, quad[2], apex, quad[3]]);
            Reflect.defineProperty(Gizmos, "wireCone", { value: lines });
            return Gizmos.wireCone;
        }
        static get wireCube() {
            const halfSize = 0.5;
            const cube = [
                new FudgeCore.Vector3(halfSize, halfSize, halfSize), new FudgeCore.Vector3(-halfSize, halfSize, halfSize),
                new FudgeCore.Vector3(-halfSize, -halfSize, halfSize), new FudgeCore.Vector3(halfSize, -halfSize, halfSize),
                new FudgeCore.Vector3(halfSize, halfSize, -halfSize), new FudgeCore.Vector3(-halfSize, halfSize, -halfSize),
                new FudgeCore.Vector3(-halfSize, -halfSize, -halfSize), new FudgeCore.Vector3(halfSize, -halfSize, -halfSize)
            ];
            const lines = [
                cube[0], cube[1], cube[1], cube[2], cube[2], cube[3], cube[3], cube[0],
                cube[4], cube[5], cube[5], cube[6], cube[6], cube[7], cube[7], cube[4],
                cube[0], cube[4], cube[1], cube[5], cube[2], cube[6], cube[3], cube[7]
            ];
            Reflect.defineProperty(Gizmos, "wireCube", { value: lines });
            return Gizmos.wireCube;
        }
        /**
         * Are we currently rendering for picking?
         */
        static get picking() {
            return this.pickId != null;
        }
        /**
         * Draws the scene's gizmos from the point of view of the given viewports camera.
         * @internal
         */
        static draw(_viewport) {
            Gizmos.#camera = _viewport.camera;
            Gizmos.posIcons.clear();
            for (const gizmo of FudgeCore.Render.gizmos)
                Reflect.set(gizmo.node, "zCamera", _viewport.camera.pointWorldToClip(gizmo.node.mtxWorld.translation).z);
            const sorted = FudgeCore.Render.gizmos.getSorted((_a, _b) => Reflect.get(_b.node, "zCamera") - Reflect.get(_a.node, "zCamera"));
            for (const gizmo of sorted) {
                gizmo.drawGizmos?.();
                if (_viewport.gizmosSelected?.includes(gizmo.node))
                    gizmo.drawGizmosSelected?.();
            }
        }
        /**
         * @internal
         */
        static pick(_gizmos, _cmpCamera, _picked) {
            Gizmos.#camera = _cmpCamera;
            Gizmos.posIcons.clear();
            for (let gizmo of _gizmos) {
                Gizmos.pickId = _picked.length;
                gizmo.drawGizmos();
                let pick = new FudgeCore.Pick(gizmo.node);
                pick.gizmo = gizmo;
                _picked.push(pick);
            }
            Gizmos.pickId = null;
        }
        /**
         * Draws a camera frustum for the given parameters. The frustum is oriented along the z-axis, with the tip of the truncated pyramid at the origin.
         */
        static drawWireFrustum(_aspect, _fov, _near, _far, _direction, _mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            const f = Math.tan(FudgeCore.Calc.deg2rad * _fov / 2);
            let scaleX = f;
            let scaleY = f;
            switch (_direction) {
                case FudgeCore.FIELD_OF_VIEW.HORIZONTAL:
                    scaleY = f / _aspect;
                    break;
                case FudgeCore.FIELD_OF_VIEW.VERTICAL:
                    scaleX = f * _aspect;
                    break;
                case FudgeCore.FIELD_OF_VIEW.DIAGONAL:
                    const diagonalAspect = Math.sqrt(_aspect);
                    scaleX = f * diagonalAspect;
                    scaleY = f / diagonalAspect;
                    break;
            }
            const nearX = _near * scaleX;
            const nearY = _near * scaleY;
            const farX = _far * scaleX;
            const farY = _far * scaleY;
            const frustum = new Array(8).fill(null).map(() => FudgeCore.Recycler.get(FudgeCore.Vector3));
            frustum[0].set(-nearX, nearY, _near);
            frustum[1].set(nearX, nearY, _near);
            frustum[2].set(nearX, -nearY, _near);
            frustum[3].set(-nearX, -nearY, _near);
            frustum[4].set(-farX, farY, _far);
            frustum[5].set(farX, farY, _far);
            frustum[6].set(farX, -farY, _far);
            frustum[7].set(-farX, -farY, _far);
            Gizmos.drawLines([
                frustum[0], frustum[1], frustum[1], frustum[2], frustum[2], frustum[3], frustum[3], frustum[0], // near plane
                frustum[4], frustum[5], frustum[5], frustum[6], frustum[6], frustum[7], frustum[7], frustum[4], // far plane
                frustum[0], frustum[4], frustum[1], frustum[5], frustum[2], frustum[6], frustum[3], frustum[7] // sides
            ], _mtxWorld, _color, _alphaOccluded);
            FudgeCore.Recycler.storeMultiple(...frustum);
        }
        /**
         * Draws a wireframe cube. The cube has a side-length of 1 and is centered around the origin.
         */
        static drawWireCube(_mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            Gizmos.drawLines(Gizmos.wireCube, _mtxWorld, _color, _alphaOccluded);
        }
        /**
         * Draws a wireframe sphere. The sphere has a diameter of 1 and is centered around the origin.
         */
        static drawWireSphere(_mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            let mtxWorld = _mtxWorld.clone;
            Gizmos.drawLines(Gizmos.wireSphere, mtxWorld, _color, _alphaOccluded);
            mtxWorld.lookAt(Gizmos.#camera.mtxWorld.translation);
            Gizmos.drawWireCircle(mtxWorld, _color, _alphaOccluded);
            FudgeCore.Recycler.store(mtxWorld);
        }
        /**
         * Draws a cone with a height and diameter of 1. The cone is oriented along the z-axis with the tip at the origin.
         */
        static drawWireCone(_mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            Gizmos.drawLines(Gizmos.wireCone, _mtxWorld, _color, _alphaOccluded);
        }
        /**
         * Draws a circle with a diameter of 1. The circle lies in the x-y plane, with its center at the origin.
         */
        static drawWireCircle(_mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            Gizmos.drawLines(Gizmos.wireCircle, _mtxWorld, _color, _alphaOccluded);
        }
        /**
         * Draws lines between each pair of the given vertices.
         * Vertices are paired sequentially, so for example, lines will be drawn between vertices 0 and 1, 2 and 3, 4 and 5, etc.
         */
        static drawLines(_vertices, _mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            const shader = FudgeCore.ShaderGizmo;
            shader.useProgram();
            const lineData = new Float32Array(_vertices.length * 3);
            for (let i = 0; i < _vertices.length; i++) {
                const point = _vertices[i];
                lineData.set(point.get(), i * 3);
            }
            Gizmos.bufferPositions(shader, Gizmos.arrayBuffer);
            Gizmos.bufferMatrix(shader, _mtxWorld);
            crc3.bufferData(WebGL2RenderingContext.ARRAY_BUFFER, lineData, WebGL2RenderingContext.DYNAMIC_DRAW);
            Gizmos.drawGizmos(shader, Gizmos.drawArrays, _vertices.length, _color, _alphaOccluded);
        }
        /**
         * Draws a wireframe mesh.
         */
        static drawWireMesh(_mesh, _mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            const shader = FudgeCore.ShaderGizmo;
            shader.useProgram();
            const indices = [];
            const renderBuffers = _mesh.getRenderBuffers();
            const renderMesh = _mesh.renderMesh; // TODO: don't breach encapsulation here...
            for (let i = 0; i < renderMesh.indices.length; i += 3) { // TODO: think about caching this in the mesh
                const a = renderMesh.indices[i];
                const b = renderMesh.indices[i + 1];
                const c = renderMesh.indices[i + 2];
                // Add the line segments for the triangle to the line indices
                indices.push(a, b, b, c, c, a);
            }
            crc3.bindBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, Gizmos.indexBuffer);
            crc3.bufferData(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), WebGL2RenderingContext.DYNAMIC_DRAW);
            Gizmos.bufferPositions(shader, renderBuffers.vertices);
            Gizmos.bufferMatrix(shader, _mtxWorld);
            Gizmos.drawGizmos(shader, Gizmos.drawElementsLines, indices.length, _color, _alphaOccluded);
        }
        /**
         * Draws a solid cube.
         */
        static drawCube(_mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            Gizmos.drawMesh(Gizmos.cube, _mtxWorld, _color, _alphaOccluded);
        }
        /**
         * Draws a solid sphere.
         */
        static drawSphere(_mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            Gizmos.drawMesh(Gizmos.sphere, _mtxWorld, _color, _alphaOccluded);
        }
        /**
         * Draws a solid mesh.
         */
        static drawMesh(_mesh, _mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            const shader = Gizmos.picking ? FudgeCore.ShaderPick : FudgeCore.ShaderGizmo;
            shader.useProgram();
            let renderBuffers = _mesh.useRenderBuffers(shader, _mtxWorld, FudgeCore.Matrix4x4.PRODUCT(Gizmos.#camera.mtxWorldToView, _mtxWorld), Gizmos.pickId);
            Gizmos.drawGizmos(shader, Gizmos.drawElementsTrianlges, renderBuffers.nIndices, _color, _alphaOccluded);
        }
        /**
         * Draws an icon from a {@link Texture} on a {@link MeshQuad}. The icon is affected by the given transform and color.
         */
        static drawIcon(_texture, _mtxWorld, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            let position = _mtxWorld.translation.toString();
            if (Gizmos.posIcons.has(position))
                return;
            Gizmos.posIcons.add(position);
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            const shader = Gizmos.picking ? FudgeCore.ShaderPickTextured : FudgeCore.ShaderGizmoTextured;
            shader.useProgram();
            let mtxWorld = _mtxWorld.clone;
            let color = _color.clone;
            let back = Gizmos.#camera.mtxWorld.forward.negate();
            let up = Gizmos.#camera.mtxWorld.up;
            mtxWorld.lookIn(back, up);
            let distance = FudgeCore.Vector3.DIFFERENCE(Gizmos.#camera.mtxWorld.translation, mtxWorld.translation).magnitude;
            let fadeFar = 4;
            let fadeNear = 1.5;
            if (distance > 0 && distance < fadeFar) {
                distance = (distance - fadeNear) / (fadeFar - fadeNear);
                color.a = FudgeCore.Calc.lerp(0, color.a, distance);
            }
            let renderBuffers = Gizmos.quad.useRenderBuffers(shader, mtxWorld, FudgeCore.Matrix4x4.PRODUCT(Gizmos.#camera.mtxWorldToView, mtxWorld), Gizmos.pickId);
            _texture.useRenderData(FudgeCore.TEXTURE_LOCATION.COLOR.UNIT);
            crc3.uniform1i(shader.uniforms[FudgeCore.TEXTURE_LOCATION.COLOR.UNIFORM], FudgeCore.TEXTURE_LOCATION.COLOR.INDEX);
            Gizmos.drawGizmos(shader, Gizmos.drawElementsTrianlges, renderBuffers.nIndices, color, _alphaOccluded);
            FudgeCore.Recycler.storeMultiple(mtxWorld, color, back, up);
        }
        static bufferPositions(_shader, _buffer) {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, _buffer);
            let attribute = _shader.attributes["a_vctPosition"];
            crc3.enableVertexAttribArray(attribute);
            crc3.vertexAttribPointer(attribute, 3, WebGL2RenderingContext.FLOAT, false, 0, 0);
        }
        static bufferColor(_shader, _color) {
            FudgeCore.RenderWebGL.getRenderingContext().uniform4fv(_shader.uniforms["u_vctColor"], _color.get());
        }
        static bufferMatrix(_shader, _mtxWorld) {
            const mtxMeshToView = FudgeCore.Matrix4x4.PRODUCT(Gizmos.#camera.mtxWorldToView, _mtxWorld);
            FudgeCore.RenderWebGL.getRenderingContext().uniformMatrix4fv(_shader.uniforms["u_mtxMeshToView"], false, mtxMeshToView.get());
            FudgeCore.Recycler.store(mtxMeshToView);
        }
        static drawGizmos(_shader, _draw, _count, _color, _alphaOccluded = Gizmos.alphaOccluded) {
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            let color = _color.clone;
            Gizmos.bufferColor(_shader, color);
            // stencil stuff is for semi-transparent gizmos to have correct self occlusion
            // first draw the gizmo opaque with depth test and set drawn pixels to 1 in stencil buffer
            crc3.clear(WebGL2RenderingContext.STENCIL_BUFFER_BIT);
            crc3.stencilFunc(WebGL2RenderingContext.ALWAYS, 1, 0xFF);
            crc3.stencilOp(WebGL2RenderingContext.KEEP, WebGL2RenderingContext.KEEP, WebGL2RenderingContext.REPLACE);
            crc3.enable(WebGL2RenderingContext.STENCIL_TEST);
            _draw(_count);
            // then draw the gizmo again with reduced alpha and without depth test where stencil buffer is 0
            color.a *= _alphaOccluded;
            Gizmos.bufferColor(_shader, color);
            crc3.stencilFunc(WebGL2RenderingContext.EQUAL, 0, 0xFF);
            crc3.stencilOp(WebGL2RenderingContext.KEEP, WebGL2RenderingContext.KEEP, WebGL2RenderingContext.KEEP);
            FudgeCore.Render.setDepthTest(false);
            _draw(_count);
            FudgeCore.Render.setDepthTest(true);
            crc3.disable(WebGL2RenderingContext.STENCIL_TEST);
            FudgeCore.Recycler.store(color);
        }
        static drawElementsTrianlges(_count) {
            FudgeCore.RenderWebGL.getRenderingContext().drawElements(WebGL2RenderingContext.TRIANGLES, _count, WebGL2RenderingContext.UNSIGNED_SHORT, 0);
        }
        static drawElementsLines(_count) {
            FudgeCore.RenderWebGL.getRenderingContext().drawElements(WebGL2RenderingContext.LINES, _count, WebGL2RenderingContext.UNSIGNED_SHORT, 0);
        }
        static drawArrays(_count) {
            FudgeCore.RenderWebGL.getRenderingContext().drawArrays(WebGL2RenderingContext.LINES, 0, _count);
        }
    }
    FudgeCore.Gizmos = Gizmos;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The main interface to the render engine, here WebGL (see superclass {@link RenderWebGL} and the RenderInjectors
     */
    class Render extends FudgeCore.RenderWebGL {
        static { this.rectClip = new FudgeCore.Rectangle(-1, 1, 2, -2); }
        static { this.nodesPhysics = new FudgeCore.RecycableArray(); }
        static { this.componentsPick = new FudgeCore.RecycableArray(); }
        static { this.lights = new Map(); }
        static { this.gizmos = new FudgeCore.RecycableArray(); }
        static { this.nodesSimple = new FudgeCore.RecycableArray(); }
        static { this.nodesAlpha = new FudgeCore.RecycableArray(); }
        static { this.componentsSkeleton = new FudgeCore.RecycableArray(); }
        //#region Prepare
        /**
         * Recursively iterates over the branch starting with the node given, recalculates all world transforms,
         * collects all lights and feeds all shaders used in the graph with these lights. Sorts nodes for different
         * render passes.
         */
        static prepare(_branch, _options = {}, _mtxWorld = FudgeCore.Matrix4x4.IDENTITY(), _shadersUsed = null) {
            let firstLevel = (_shadersUsed == null);
            if (firstLevel) {
                _shadersUsed = [];
                Render.timestampUpdate = performance.now();
                Render.nodesSimple.reset();
                Render.nodesAlpha.reset();
                Render.nodesPhysics.reset();
                Render.componentsPick.reset();
                Render.componentsSkeleton.reset();
                Render.lights.forEach(_array => _array.reset());
                if (_options?.gizmosEnabled)
                    Render.gizmos.reset();
                _branch.dispatchEvent(new Event("renderPrepareStart" /* EVENT.RENDER_PREPARE_START */));
            }
            if (!_branch.isActive)
                return; // don't add branch to render list if not active
            _branch.nNodesInBranch = 1;
            _branch.radius = 0;
            _branch.dispatchEventToTargetOnly(new Event("renderPrepare" /* EVENT.RENDER_PREPARE */));
            _branch.timestampUpdate = Render.timestampUpdate;
            if (_branch.cmpTransform && _branch.cmpTransform.isActive) {
                let mtxWorldBranch = FudgeCore.Matrix4x4.PRODUCT(_mtxWorld, _branch.cmpTransform.mtxLocal);
                _branch.mtxWorld.copy(mtxWorldBranch);
                FudgeCore.Recycler.store(mtxWorldBranch);
            }
            else
                _branch.mtxWorld.copy(_mtxWorld); // overwrite readonly mtxWorld of the current node
            let cmpRigidbody = _branch.getComponent(FudgeCore.ComponentRigidbody);
            if (cmpRigidbody && cmpRigidbody.isActive) { //TODO: support de-/activation throughout
                Render.nodesPhysics.push(_branch); // add this node to physics list
                if (!_options?.ignorePhysics)
                    this.transformByPhysics(_branch, cmpRigidbody);
            }
            let cmpPick = _branch.getComponent(FudgeCore.ComponentPick);
            if (cmpPick && cmpPick.isActive) {
                Render.componentsPick.push(cmpPick); // add this component to pick list
            }
            let cmpLights = _branch.getComponents(FudgeCore.ComponentLight);
            Render.addLights(cmpLights);
            let cmpMesh = _branch.getComponent(FudgeCore.ComponentMesh);
            let cmpMaterial = _branch.getComponent(FudgeCore.ComponentMaterial);
            if (cmpMesh && cmpMesh.isActive && cmpMaterial && cmpMaterial.isActive) {
                let mtxWorldMesh = FudgeCore.Matrix4x4.PRODUCT(_branch.mtxWorld, cmpMesh.mtxPivot);
                cmpMesh.mtxWorld.copy(mtxWorldMesh);
                FudgeCore.Recycler.store(mtxWorldMesh); // TODO: examine, why recycling this causes meshes to be misplaced...
                let shader = cmpMaterial.material.getShader();
                let cmpParticleSystem = _branch.getComponent(FudgeCore.ComponentParticleSystem);
                if (cmpParticleSystem && cmpParticleSystem.isActive && cmpParticleSystem.particleSystem != null)
                    shader = cmpParticleSystem.particleSystem.getShaderFrom(shader);
                if (_shadersUsed.indexOf(shader) < 0)
                    _shadersUsed.push(shader);
                _branch.radius = cmpMesh.radius;
                if (cmpMaterial.sortForAlpha || _branch.getComponent(FudgeCore.ComponentText)) // always sort text for alpha
                    Render.nodesAlpha.push(_branch); // add this node to render list
                else
                    Render.nodesSimple.push(_branch); // add this node to render list
            }
            let cmpSkeletons = _branch.getComponents(FudgeCore.ComponentSkeleton);
            for (let cmpSkeleton of cmpSkeletons)
                if (cmpSkeleton && cmpSkeleton.isActive)
                    Render.componentsSkeleton.push(cmpSkeleton);
            if (_options?.gizmosEnabled && _options?.gizmosFilter) {
                for (const component of _branch.getAllComponents())
                    if (component.isActive && _options.gizmosFilter.get(component.type))
                        Render.gizmos.push(component);
            }
            for (let child of _branch.getChildren()) {
                Render.prepare(child, _options, _branch.mtxWorld, _shadersUsed);
                _branch.nNodesInBranch += child.nNodesInBranch;
                let cmpMeshChild = child.getComponent(FudgeCore.ComponentMesh);
                let position = cmpMeshChild ? cmpMeshChild.mtxWorld.translation : child.mtxWorld.translation;
                position = position.clone;
                _branch.radius = Math.max(_branch.radius, position.getDistance(_branch.mtxWorld.translation) + child.radius);
                FudgeCore.Recycler.store(position);
            }
            if (firstLevel) {
                _branch.dispatchEvent(new Event("renderPrepareEnd" /* EVENT.RENDER_PREPARE_END */));
                for (const cmpSkeleton of Render.componentsSkeleton) {
                    cmpSkeleton.update();
                    cmpSkeleton.updateRenderBuffer();
                }
                Render.bufferLights(Render.lights);
            }
        }
        static addLights(_cmpLights) {
            for (let cmpLight of _cmpLights) {
                if (!cmpLight.isActive)
                    continue;
                let type = cmpLight.light.getType();
                let lightsOfType = Render.lights.get(type);
                if (!lightsOfType) {
                    lightsOfType = new FudgeCore.RecycableArray();
                    Render.lights.set(type, lightsOfType);
                }
                lightsOfType.push(cmpLight);
            }
        }
        //#endregion
        //#region Picking
        /**
         * Used with a {@link Picker}-camera, this method renders one pixel with picking information
         * for each node in the line of sight and return that as an unsorted {@link Pick}-array
         */
        static pickBranch(_nodes, _cmpCamera, _pickGizmos = false, _gizmosFilter) {
            /**
             * TODO: maybe move this whole function to RenderWebGL?
             * It seems to mostly rely on RenderWebGL e.g.: ∆ípicked, createPickTexture(), setBlendMode(), pick(), pickGizmos(), getPicks(), resetFramebuffer()
             * They only not WebGL thing it does is filtering the nodes to pick, which could be done in pick() itself...
             * -> or make this method only collect the nodes and gizmos from branch and then pass them to an appropriate method in RenderWebGL?
             *
             * Also {@link Render.∆ípicked} and {@link Render.sizePick} seem to only ever be used in the methods called from this method.
             * sizePick gets set in createPickTexture() and used in pick() via the property but passed as an argument to getPicks().
             * ∆ípicked is only used in getPicks(), pick() and pickGizmos() and only ever set to an empty array in this method.
             * -> both could be local variables and passed as arguments to the methods that need them.
             */
            Render.∆ípicked = [];
            let size = Math.ceil(Math.sqrt(_nodes.length + Render.gizmos.length)); // gizmos.length might be bigger than needed...
            Render.createPickTexture(size);
            Render.setBlendMode(FudgeCore.BLEND.OPAQUE);
            let gizmos = [];
            for (let node of _nodes) {
                let cmpMesh = node.getComponent(FudgeCore.ComponentMesh);
                let cmpMaterial = node.getComponent(FudgeCore.ComponentMaterial);
                if (cmpMesh && cmpMesh.isActive && cmpMaterial && cmpMaterial.isActive)
                    Render.pick(node, _cmpCamera);
                if (_pickGizmos && _gizmosFilter) {
                    for (let gizmo of node.getAllComponents()) {
                        if (!gizmo.isActive || !_gizmosFilter.get(gizmo.type) || !gizmo.drawGizmos)
                            continue;
                        gizmos.push(gizmo);
                    }
                }
            }
            if (_pickGizmos)
                Render.pickGizmos(gizmos, _cmpCamera);
            Render.setBlendMode(FudgeCore.BLEND.TRANSPARENT);
            let picks = Render.getPicks(size, _cmpCamera);
            Render.resetFramebuffer();
            return picks;
        }
        //#endregion
        //#region Drawing
        /**
         * Draws the scene from the point of view of the given camera
         */
        static draw(_cmpCamera) {
            for (let node of Render.nodesAlpha)
                Reflect.set(node, "zCamera", _cmpCamera.pointWorldToClip(node.getComponent(FudgeCore.ComponentMesh).mtxWorld.translation).z);
            const sorted = Render.nodesAlpha.getSorted((_a, _b) => Reflect.get(_b, "zCamera") - Reflect.get(_a, "zCamera"));
            Render.drawNodes(Render.nodesSimple, sorted, _cmpCamera);
        }
        //#endregion
        //#region Physics
        static transformByPhysics(_node, _cmpRigidbody) {
            if (!_cmpRigidbody.isInitialized) // || Project.mode == MODE.EDITOR)
                _cmpRigidbody.initialize();
            if (!FudgeCore.Physics.getBodyList().length)
                return;
            if (!_node.mtxLocal) {
                throw (new Error("ComponentRigidbody requires ComponentTransform at the same Node"));
            }
            // _cmpRigidbody.checkCollisionEvents();
            if (_cmpRigidbody.typeBody == FudgeCore.BODY_TYPE.KINEMATIC || FudgeCore.Project.mode == FudgeCore.MODE.EDITOR) { //Case of Kinematic Rigidbody
                let mtxPivotWorld = FudgeCore.Matrix4x4.PRODUCT(_node.mtxWorld, _cmpRigidbody.mtxPivotUnscaled);
                _cmpRigidbody.setPosition(mtxPivotWorld.translation);
                _cmpRigidbody.setRotation(mtxPivotWorld.rotation);
                FudgeCore.Recycler.store(mtxPivotWorld);
                return;
            }
            let mtxWorld = FudgeCore.Matrix4x4.COMPOSITION(_cmpRigidbody.getPosition(), _cmpRigidbody.getRotation(), null);
            mtxWorld.multiply(_cmpRigidbody.mtxPivotInverse);
            _node.mtxWorld.translation = mtxWorld.translation;
            _node.mtxWorld.rotation = mtxWorld.rotation;
            let mtxLocal = _node.getParent() ? FudgeCore.Matrix4x4.RELATIVE(_node.mtxWorld, _node.getParent().mtxWorld) : _node.mtxWorld;
            _node.mtxLocal.copy(mtxLocal);
            FudgeCore.Recycler.store(mtxWorld);
            FudgeCore.Recycler.store(mtxLocal);
        }
    }
    FudgeCore.Render = Render;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Inserted into a {@link Mesh}, an instance of this class calculates and represents the mesh data in the form needed by the render engine
     */
    class RenderMesh {
        /** vertices of the actual point cloud, some points might be in the same location in order to refer to different texels */
        #vertices;
        /** indices to create faces from the vertices, rotation determines direction of face-normal */
        #indices;
        /** texture coordinates associated with the vertices by the position in the array */
        #textureUVs;
        /** vertex normals for smooth shading, interpolated between vertices during rendering */
        #normals;
        /* colors */
        #colors;
        /** vertex tangents for normal mapping, based on the vertex normals and the UV coordinates */
        #tangents;
        /** bones */
        #bones;
        #weights;
        constructor(_mesh) {
            this.buffers = null;
            this.mesh = _mesh;
        }
        get vertices() {
            return this.#vertices || ( // return cache or ...
            // ... flatten all vertex positions from cloud into a typed array
            this.#vertices = new Float32Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                return [...this.mesh.vertices.position(_index).get()];
            })));
        }
        set vertices(_vertices) {
            this.#vertices = _vertices;
        }
        get indices() {
            return this.#indices || ( // return cache or ...
            // ... flatten all indices from the faces into a typed array
            this.#indices = new Uint16Array(this.mesh.faces.flatMap((_face) => [..._face.indices])));
        }
        set indices(_indices) {
            this.#indices = _indices;
        }
        get normals() {
            if (this.#normals == null) {
                // TODO: implement a check similiar to the one for tangents below, to see if normals are already present in the vertices
                // sum up all unscaled normals of faces connected to one vertex, weighted by the angle between the two neighbour vertices...
                this.mesh.vertices.forEach(_vertex => _vertex.normal.set(0, 0, 0));
                for (let face of this.mesh.faces)
                    face.indices.forEach((_iVertex, _iFaceVertex) => {
                        this.mesh.vertices.normal(_iVertex).add(FudgeCore.Vector3.SCALE(face.normalUnscaled, face.angles[_iFaceVertex]));
                    });
                // ... and normalize them
                this.mesh.vertices.forEach(_vertex => {
                    // some vertices might be unused and yield a zero-normal...
                    if (_vertex.normal.magnitudeSquared > 0)
                        _vertex.normal.normalize();
                });
                // this.∆ínormalsVertex = new Float32Array(normalsVertex.flatMap((_normal: Vector3) => [..._normal.get()]));
                this.#normals = new Float32Array(this.mesh.vertices.flatMap((_vertex, _index) => [...this.mesh.vertices.normal(_index).get()]));
            }
            return this.#normals;
        }
        set normals(_normals) {
            this.#normals = _normals;
        }
        get tangents() {
            if (this.#tangents == null) {
                if (this.mesh.vertices.some(_vertex => !_vertex.uv)) { // assume all vertices have texture coordinates or none
                    this.#tangents = new Float32Array(); // no texture coordinates, no tangents
                    return this.#tangents;
                }
                if (this.mesh.vertices.some(_vertex => !_vertex.tangent)) { // assume all vertices have tangents or none
                    const tangents = new Array(this.mesh.vertices.length);
                    const bitangents = new Array(this.mesh.vertices.length);
                    for (let i = 0; i < tangents.length; i++) {
                        tangents[i] = FudgeCore.Vector3.ZERO();
                        bitangents[i] = FudgeCore.Vector3.ZERO();
                    }
                    // this.mesh.vertices.forEach(_vertex => _vertex.tangent.set(0, 0, 0));
                    for (let face of this.mesh.faces) {
                        let i0 = face.indices[0];
                        let i1 = face.indices[1];
                        let i2 = face.indices[2];
                        //vertices surrounding one triangle
                        let v0 = this.mesh.vertices.position(i0);
                        let v1 = this.mesh.vertices.position(i1);
                        let v2 = this.mesh.vertices.position(i2);
                        //their UVs
                        let uv0 = this.mesh.vertices.uv(i0);
                        let uv1 = this.mesh.vertices.uv(i1);
                        let uv2 = this.mesh.vertices.uv(i2);
                        //We compute the edges of the triangle...
                        let deltaPos0 = FudgeCore.Vector3.DIFFERENCE(v1, v0);
                        let deltaPos1 = FudgeCore.Vector3.DIFFERENCE(v2, v0);
                        //...and the edges of the triangles in UV space...
                        let deltaUV0 = FudgeCore.Vector2.DIFFERENCE(uv1, uv0);
                        let deltaUV1 = FudgeCore.Vector2.DIFFERENCE(uv2, uv0);
                        //...and compute the tangent
                        let r = 1 / FudgeCore.Vector2.CROSS(deltaUV0, deltaUV1);
                        let faceTangent = FudgeCore.Vector3.SCALE(FudgeCore.Vector3.DIFFERENCE(FudgeCore.Vector3.SCALE(deltaPos0, deltaUV1.y), FudgeCore.Vector3.SCALE(deltaPos1, deltaUV0.y)), r);
                        let faceBitangent = FudgeCore.Vector3.SCALE(FudgeCore.Vector3.DIFFERENCE(FudgeCore.Vector3.SCALE(deltaPos1, -deltaUV0.x), FudgeCore.Vector3.SCALE(deltaPos0, -deltaUV1.x)), r); // for winding order counter clockwise
                        tangents[i0].add(FudgeCore.Vector3.SCALE(faceTangent, face.angles[0]));
                        tangents[i1].add(FudgeCore.Vector3.SCALE(faceTangent, face.angles[1]));
                        tangents[i2].add(FudgeCore.Vector3.SCALE(faceTangent, face.angles[2]));
                        bitangents[i0].add(FudgeCore.Vector3.SCALE(faceBitangent, face.angles[0]));
                        bitangents[i1].add(FudgeCore.Vector3.SCALE(faceBitangent, face.angles[1]));
                        bitangents[i2].add(FudgeCore.Vector3.SCALE(faceBitangent, face.angles[2]));
                    }
                    this.mesh.vertices.forEach((_vertex, _index) => {
                        let normal = this.mesh.vertices.normal(_index);
                        let tangent = tangents[_index];
                        let bitangent = bitangents[_index];
                        // reorthogonalize
                        tangent.add(FudgeCore.Vector3.SCALE(normal, -FudgeCore.Vector3.DOT(normal, tangent)));
                        if (tangent.magnitudeSquared > 0) // some vertices might be unused and yield a zero-tangent...
                            tangent.normalize();
                        let handedness = (FudgeCore.Vector3.DOT(FudgeCore.Vector3.CROSS(normal, tangent), bitangent) < 0) ? -1 : 1;
                        _vertex.tangent = new FudgeCore.Vector4(tangent.x, tangent.y, tangent.z, handedness);
                    });
                }
                this.#tangents = new Float32Array(this.mesh.vertices.flatMap(_vertex => _vertex.tangent.get()));
            }
            return this.#tangents;
        }
        set tangents(_tangents) {
            this.#tangents = _tangents;
        }
        get textureUVs() {
            return this.#textureUVs || ( // return cache or ...
            // ... flatten all uvs from the clous into a typed array
            this.#textureUVs = new Float32Array(this.mesh.vertices
                .filter(_vertex => _vertex.uv)
                .flatMap((_vertex) => [..._vertex.uv.get()])));
        }
        set textureUVs(_textureUVs) {
            this.#textureUVs = _textureUVs;
        }
        get colors() {
            return this.#colors || (this.#colors = new Float32Array(this.mesh.vertices
                .filter(_vertex => _vertex.color)
                .flatMap(_vertex => [..._vertex.color.get()])));
        }
        set colors(_colors) {
            this.#colors = _colors;
        }
        get bones() {
            return this.#bones || ( // return cache or ...
            this.#bones = this.mesh.vertices.some(_vertex => _vertex.bones) ?
                new Uint8Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                    const bones = this.mesh.vertices.bones(_index);
                    return [bones?.[0]?.index || 0, bones?.[1]?.index || 0, bones?.[2]?.index || 0, bones?.[3]?.index || 0];
                })) :
                undefined);
        }
        set bones(_iBones) {
            this.#bones = _iBones;
        }
        get weights() {
            return this.#weights || ( // return cache or ...
            this.#weights = this.mesh.vertices.some(_vertex => _vertex.bones) ?
                new Float32Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                    const bones = this.mesh.vertices.bones(_index);
                    return [bones?.[0]?.weight || 0, bones?.[1]?.weight || 0, bones?.[2]?.weight || 0, bones?.[3]?.weight || 0];
                })) :
                undefined);
        }
        set weights(_weights) {
            this.#weights = _weights;
        }
        /**
         * Clears this render mesh and all its buffers
         */
        clear() {
            this.buffers = null;
            this.#vertices = null;
            this.#indices = null;
            this.#textureUVs = null;
            this.#normals = null;
            this.#colors = null;
            this.#tangents = null;
            this.#bones = null;
            this.#weights = null;
        }
    }
    FudgeCore.RenderMesh = RenderMesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Controls the rendering of a branch, using the given {@link ComponentCamera},
     * and the propagation of the rendered image from the offscreen renderbuffer to the target canvas
     * through a series of {@link Framing} objects. The stages involved are in order of rendering
     * {@link Render}.viewport -> {@link Viewport}.source -> {@link Viewport}.destination -> DOM-Canvas -> Client(CSS)
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019-2022 | Jonas Plotzky, HFU, 2023
     * @link https://github.com/hs-furtwangen/FUDGE/wiki/Viewport
     */
    class Viewport extends FudgeCore.EventTargetUnified {
        constructor() {
            super(...arguments);
            this.name = "Viewport"; // The name to call this viewport by.
            this.camera = null; // The camera representing the view parameters to render the branch.
            // TODO: verify if client to canvas should be in Viewport or somewhere else (Window, Container?)
            // Multiple viewports using the same canvas shouldn't differ here...
            // different framing methods can be used, this is the default
            this.frameClientToCanvas = new FudgeCore.FramingScaled();
            this.frameCanvasToDestination = new FudgeCore.FramingComplex();
            this.frameDestinationToSource = new FudgeCore.FramingScaled();
            this.frameSourceToRender = new FudgeCore.FramingScaled();
            this.adjustingFrames = true; // TODO: maybe only adjust frames when anything changes instead of every drawn frame?
            this.adjustingCamera = true;
            this.physicsDebugMode = FudgeCore.PHYSICS_DEBUGMODE.NONE;
            this.gizmosEnabled = false;
            this.gizmosFilter = new Map(FudgeCore.Component.subclasses // TODO: maybe make this lazy
                .filter((_class) => (_class.prototype).drawGizmos || (_class.prototype).drawGizmosSelected)
                .map((_class) => [_class.name, true]));
            this.componentsPick = new FudgeCore.RecycableArray();
            this.#branch = null; // The to render with all its descendants.
            this.#crc2 = null;
            this.#canvas = null;
            // #endregion
        }
        #branch; // The to render with all its descendants.
        #crc2;
        #canvas;
        //#endregion
        // #region Events (passing from canvas to viewport and from there into branch)
        /**
         * Returns true if this viewport currently has focus and thus receives keyboard events
         */
        get hasFocus() {
            return (Viewport.focus == this);
        }
        /**
         * Retrieve the destination canvas
         */
        get canvas() {
            return this.#canvas;
        }
        /**
         * Retrieve the 2D-context attached to the destination canvas
         */
        get context() {
            return this.#crc2;
        }
        /**
         * Connects the viewport to the given canvas to render the given branch to using the given camera-component, and names the viewport as given.
         */
        initialize(_name, _branch, _camera, _canvas) {
            this.name = _name;
            this.camera = _camera;
            this.#canvas = _canvas;
            this.#crc2 = _canvas.getContext("2d");
            this.#canvas.tabIndex = 0; // can get focus and receive keyboard events
            this.rectSource = FudgeCore.Render.getCanvasRect();
            this.rectDestination = this.getClientRectangle();
            this.setBranch(_branch);
        }
        /**
         * Retrieve the size of the destination canvas as a rectangle, x and y are always 0
         */
        getCanvasRectangle() {
            return FudgeCore.Rectangle.GET(0, 0, this.#canvas.width, this.#canvas.height);
        }
        /**
         * Retrieve the client rectangle the canvas is displayed and fit in, x and y are always 0
         */
        getClientRectangle() {
            // FUDGE doesn't care about where the client rect is, only about the size matters.
            // return Rectangle.GET(this.canvas.offsetLeft, this.canvas.offsetTop, this.canvas.clientWidth, this.canvas.clientHeight);
            return FudgeCore.Rectangle.GET(0, 0, this.#canvas.clientWidth, this.#canvas.clientHeight);
        }
        /**
         * Set the branch to be drawn in the viewport.
         */
        setBranch(_branch) {
            if (_branch) {
                _branch.broadcastEvent(new Event("attachBranch" /* EVENT.ATTACH_BRANCH */));
            }
            this.#branch = _branch;
        }
        /**
         * Retrieve the branch this viewport renders
         */
        getBranch() {
            return this.#branch;
        }
        // #region Drawing
        /**
         * Draw this viewport displaying its branch. By default, the transforms in the branch are recalculated first.
         * Pass `false` if calculation was already done for this frame
         */
        draw(_prepareBranch = true) {
            this.prepare(_prepareBranch);
            if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY) {
                FudgeCore.Render.draw(this.camera);
                if (this.gizmosEnabled)
                    FudgeCore.Gizmos.draw(this);
            }
            if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.NONE) {
                FudgeCore.Physics.draw(this.camera, this.physicsDebugMode);
            }
            this.dispatchEvent(new Event("renderEnd" /* EVENT.RENDER_END */));
            this.#crc2.imageSmoothingEnabled = false;
            this.#crc2.drawImage(FudgeCore.Render.getCanvas(), this.rectSource.x, this.rectSource.y, this.rectSource.width, this.rectSource.height, this.rectDestination.x, this.rectDestination.y, this.rectDestination.width, this.rectDestination.height);
        }
        /**
        * Adjusts all frames and the camera to fit the current size of the canvas. Prepares the branch for rendering.
        */
        prepare(_prepareBranch = true) {
            if (!this.#branch)
                return;
            if (!this.camera.isActive)
                return;
            if (this.adjustingFrames)
                this.adjustFrames();
            if (this.adjustingCamera)
                this.adjustCamera();
            if (_prepareBranch)
                this.prepareBranch();
        }
        /**
         * Prepares all nodes in the branch for rendering by updating their world transforms etc.
         */
        prepareBranch() {
            let mtxRoot = FudgeCore.Matrix4x4.IDENTITY();
            if (this.#branch.getParent())
                mtxRoot = this.#branch.getParent().mtxWorld;
            this.dispatchEvent(new Event("renderPrepareStart" /* EVENT.RENDER_PREPARE_START */));
            FudgeCore.Render.prepare(this.#branch, { gizmosEnabled: this.gizmosEnabled, gizmosFilter: this.gizmosFilter }, mtxRoot);
            this.dispatchEvent(new Event("renderPrepareEnd" /* EVENT.RENDER_PREPARE_END */));
            this.componentsPick = FudgeCore.Render.componentsPick;
        }
        /**
         * Performs a pick on all {@link ComponentPick}s in the branch of this viewport
         * using a ray from its camera through the client coordinates given in the event.
         * Dispatches the event to all nodes hit.
         * If {@link PICK.CAMERA} was chosen as the method to pick, a pick property gets added to the event,
         * which holds the detailed information, but is overwritten for each node.
         */
        dispatchPointerEvent(_event) {
            let posClient = new FudgeCore.Vector2(_event.clientX, _event.clientY);
            let ray = this.getRayFromClient(posClient);
            // let cameraPicks: RecycableArray<Node> = Recycler.get(RecycableArray); //TODO: think about optimization later
            let cameraPicks = [];
            let otherPicks = [];
            for (let cmpPick of this.componentsPick)
                if (cmpPick.pick == FudgeCore.PICK.CAMERA)
                    cameraPicks.push(cmpPick.node);
                else
                    otherPicks.push(cmpPick);
            if (cameraPicks.length) {
                let picks = FudgeCore.Picker.pickCamera(cameraPicks, this.camera, this.pointClientToProjection(posClient), this.gizmosEnabled, this.gizmosFilter);
                for (let pick of picks) {
                    Reflect.set(_event, "pick", pick);
                    pick.node.dispatchEvent(_event);
                }
            }
            for (let cmpPick of otherPicks) {
                cmpPick.pickAndDispatch(ray, _event);
            }
        }
        /**
         * Adjust all frames involved in the rendering process from the display area in the client up to the renderer canvas
         */
        adjustFrames() {
            // get the rectangle of the canvas area as displayed (consider css)
            let rectClient = this.getClientRectangle();
            // adjust the canvas size according to the given framing applied to client
            let rectCanvas = this.frameClientToCanvas.getRect(rectClient);
            this.#canvas.width = rectCanvas.width;
            this.#canvas.height = rectCanvas.height;
            let rectTemp;
            // adjust the destination area on the target-canvas to render to by applying the framing to canvas
            rectTemp = this.frameCanvasToDestination.getRect(rectCanvas);
            this.rectDestination.copy(rectTemp);
            FudgeCore.Recycler.store(rectTemp);
            // adjust the area on the source-canvas to render from by applying the framing to destination area
            rectTemp = this.frameDestinationToSource.getRect(this.rectDestination);
            this.rectSource.copy(rectTemp);
            FudgeCore.Recycler.store(rectTemp);
            // having an offset source does make sense only when multiple viewports display parts of the same rendering. For now: shift it to 0,0
            this.rectSource.x = this.rectSource.y = 0;
            // still, a partial image of the rendering may be retrieved by moving and resizing the render viewport. For now, it's always adjusted to the current viewport
            let rectRender = this.frameSourceToRender.getRect(this.rectSource);
            FudgeCore.Render.setRenderRectangle(rectRender);
            let rectOffscreenCanvas = FudgeCore.Render.getCanvasRect(); // there are far to many rectangles involved here...
            // no more transformation after this for now, offscreen canvas and render-viewport have the same size
            FudgeCore.Render.setCanvasSize(rectRender.width, rectRender.height);
            if (rectRender.width != rectOffscreenCanvas.width || rectRender.height != rectOffscreenCanvas.height)
                FudgeCore.Render.adjustAttachments();
            FudgeCore.Recycler.store(rectClient);
            FudgeCore.Recycler.store(rectCanvas);
            FudgeCore.Recycler.store(rectRender);
            FudgeCore.Recycler.store(rectOffscreenCanvas);
        }
        /**
         * Adjust the camera parameters to fit the rendering into the render viewport
         */
        adjustCamera() {
            let rect = FudgeCore.Render.getRenderRectangle();
            // if (this.camera.getProjection() == PROJECTION.ORTHOGRAPHIC)
            //   this.camera.projectOrthographic(-rect.width / 20, rect.width / 20, rect.height / 20, -rect.height / 20);
            // else
            this.camera.projectCentral(rect.width / rect.height, this.camera.getFieldOfView(), this.camera.getDirection(), this.camera.getNear(), this.camera.getFar());
            this.camera.resetWorldToView();
        }
        // #endregion
        //#region Points
        /**
         * Returns a {@link Ray} in world coordinates from this camera through the point given in client space
         */
        getRayFromClient(_point) {
            let posProjection = this.pointClientToProjection(_point);
            let ray = new FudgeCore.Ray(new FudgeCore.Vector3(-posProjection.x, posProjection.y, 1));
            // ray.direction.scale(camera.distance);
            ray.transform(this.camera.mtxPivot);
            let cameraNode = this.camera.node;
            if (cameraNode)
                ray.transform(cameraNode.mtxWorld);
            return ray;
        }
        /**
         * Returns a point on the client rectangle matching the projection of the given point in world space
         */
        pointWorldToClient(_position) {
            let projection = this.camera.pointWorldToClip(_position);
            let posClient = this.pointClipToClient(projection.toVector2());
            return posClient;
        }
        /**
         * Returns a point on the source-rectangle matching the given point on the client rectangle
         */
        pointClientToSource(_client) {
            let result = this.frameClientToCanvas.getPoint(_client, this.getClientRectangle());
            result = this.frameCanvasToDestination.getPoint(result, this.getCanvasRectangle());
            result = this.frameDestinationToSource.getPoint(result, this.rectSource);
            //TODO: when Source, Render and RenderViewport deviate, continue transformation 
            return result;
        }
        /**
         * Returns a point on the render-rectangle matching the given point on the source rectangle
         */
        pointSourceToRender(_source) {
            let projectionRectangle = this.camera.getProjectionRectangle();
            let point = this.frameSourceToRender.getPoint(_source, projectionRectangle);
            // console.log(projectionRectangle.toString());
            return point;
        }
        /**
         * Returns a point on the render-rectangle matching the given point on the client rectangle
         */
        pointClientToRender(_client) {
            let point = this.pointClientToSource(_client);
            point = this.pointSourceToRender(point);
            //TODO: when Render and RenderViewport deviate, continue transformation 
            return point;
        }
        /**
         * Returns a point on a projection surface in the hypothetical distance of 1 to the camera
         * matching the given point on the client rectangle
         * TODO: examine, if this should be a camera-method. Current implementation is for central-projection
         */
        pointClientToProjection(_client) {
            let posRender = this.pointClientToRender(_client);
            let rectRender = this.frameSourceToRender.getRect(this.rectSource);
            let rectProjection = this.camera.getProjectionRectangle();
            let posProjection = new FudgeCore.Vector2(rectProjection.width * posRender.x / rectRender.width, rectProjection.height * posRender.y / rectRender.height);
            posProjection.subtract(new FudgeCore.Vector2(rectProjection.width / 2, rectProjection.height / 2));
            posProjection.y *= -1;
            return posProjection;
        }
        /**
         * Returns a point in the client rectangle matching the given point in normed clipspace rectangle,
         * which stretches from -1 to 1 in both dimensions, y pointing up
         */
        pointClipToClient(_normed) {
            // let rectClient: Rectangle = this.getClientRectangle();
            // let result: Vector2 = Vector2.ONE(0.5);
            // result.x *= (_normed.x + 1) * rectClient.width;
            // result.y *= (1 - _normed.y) * rectClient.height;
            // result.add(rectClient.position);
            //TODO: check if rectDestination can safely (and more perfomant) be used instead getClientRectangle
            let pointClient = FudgeCore.Render.rectClip.pointToRect(_normed, this.rectDestination);
            return pointClient;
        }
        /**
         * Returns a point in the client rectangle matching the given point in normed clipspace rectangle,
         * which stretches from -1 to 1 in both dimensions, y pointing up
         */
        pointClipToCanvas(_normed) {
            let pointCanvas = FudgeCore.Render.rectClip.pointToRect(_normed, this.getCanvasRectangle());
            return pointCanvas;
        }
        /**
         * Returns a point in the browser page matching the given point of the viewport
         */
        pointClientToScreen(_client) {
            let screen = new FudgeCore.Vector2(this.#canvas.offsetLeft + _client.x, this.#canvas.offsetTop + _client.y);
            return screen;
        }
    }
    FudgeCore.Viewport = Viewport;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Different xr session modes available. Could be expand with more modes in the future.
     * @authors Valentin Schmidberger, HFU, 2022 | Jonas Plotzky, HFU, 2023
     */
    let XR_SESSION_MODE;
    (function (XR_SESSION_MODE) {
        XR_SESSION_MODE["IMMERSIVE_VR"] = "immersive-vr";
        //IMMERSIVE_AR = "immersive-ar",
        //INLINE = "inline"
    })(XR_SESSION_MODE = FudgeCore.XR_SESSION_MODE || (FudgeCore.XR_SESSION_MODE = {}));
    /**
     * Different reference vr-spaces available, creator has to check if the space is supported with its device.
     * Could be expand with more available space types in the future.
     */
    let XR_REFERENCE_SPACE;
    (function (XR_REFERENCE_SPACE) {
        XR_REFERENCE_SPACE["VIEWER"] = "viewer";
        XR_REFERENCE_SPACE["LOCAL"] = "local";
        // LOCAL_FLOOR = "local-floor",
        // BOUNDED_FLOOR = "bounded-floor",
        // UNBOUNDED = "unbounded"
    })(XR_REFERENCE_SPACE = FudgeCore.XR_REFERENCE_SPACE || (FudgeCore.XR_REFERENCE_SPACE = {}));
    /**
     * XRViewport (webXR)-extension of Viewport, to displaying its branch on Head Mounted and AR (not implemted yet) Devices
     */
    class XRViewport extends FudgeCore.Viewport {
        static { this.xrViewportInstance = null; }
        // private poseMtx: Matrix4x4 = new Matrix4x4();
        constructor() {
            super();
            this.vrDevice = null;
            this.session = null;
            this.referenceSpace = null;
            this.useVRController = false;
            XRViewport.xrViewportInstance = this;
        }
        /**
         * To retrieve private static instance of xr viewport, readonly.
         */
        static get default() {
            return this.xrViewportInstance;
        }
        /**
          * Connects the viewport to the given canvas to render the given branch to using the given camera-component, and names the viewport as given.
          */
        initialize(_name, _branch, _cameraXR /* | ComponentCameraAR*/, _canvas) {
            super.initialize(_name, _branch, _cameraXR, _canvas);
        }
        /**
         * The VR Session is initialized here, also VR - Controller are initialized, if boolean is true.
         * Creator has to call FrameRequestXR after this Method to run the viewport in virtual reality.
         */
        async initializeVR(_vrSessionMode = XR_SESSION_MODE.IMMERSIVE_VR, _vrReferenceSpaceType = XR_REFERENCE_SPACE.LOCAL, _vrController = false) {
            let session = await navigator.xr.requestSession(_vrSessionMode);
            this.referenceSpace = await session.requestReferenceSpace(_vrReferenceSpaceType);
            await FudgeCore.Render.getRenderingContext().makeXRCompatible();
            let nativeScaleFactor = XRWebGLLayer.getNativeFramebufferScaleFactor(session);
            //TODO:  Field of view k√∂nnte an der Stelle noch ver√§ndert werden.
            let baseLayer = new XRWebGLLayer(session, FudgeCore.Render.getRenderingContext(), { framebufferScaleFactor: nativeScaleFactor });
            await session.updateRenderState({ baseLayer: baseLayer });
            FudgeCore.Render.setFramebufferTarget(baseLayer.framebuffer);
            FudgeCore.Render.setCanvasSize(baseLayer.framebufferWidth, baseLayer.framebufferHeight);
            FudgeCore.Render.setRenderRectangle(FudgeCore.Rectangle.GET(0, 0, baseLayer.framebufferWidth, baseLayer.framebufferHeight));
            FudgeCore.Render.adjustAttachments();
            this.adjustingFrames = false; // web xr handles this now
            this.vrDevice = this.camera;
            this.initializeReferenceSpace();
            this.useVRController = _vrController;
            if (_vrController) {
                this.vrDevice.rightCntrl.cmpTransform = new FudgeCore.ComponentTransform();
                this.vrDevice.leftCntrl.cmpTransform = new FudgeCore.ComponentTransform();
            }
            this.session = session;
            this.prepareBranch();
        }
        /**
         * The AR session could be initialized here. Up till now not implemented.
         */
        async initializeAR(_arSessionMode = null, _arReferenceSpaceType = null) {
            FudgeCore.Debug.error("NOT IMPLEMENTED YET! Check out initializeVR!");
        }
        /**
         * Draw the xr viewport displaying its branch. By default, the transforms in the branch are recalculated first.
         * Pass `false` if calculation was already done for this frame
         * Called from loop method {@link Loop} again with the xrFrame parameter handover, as soon as FRAME_REQUEST_XR is called from creator.
         */
        draw(_prepareBranch = true, _xrFrame = null) {
            if (!this.session) {
                super.draw(_prepareBranch);
                return;
            }
            let pose = _xrFrame?.getViewerPose(this.referenceSpace);
            if (!pose)
                return;
            this.vrDevice.mtxLocal.set(pose.transform.matrix);
            this.vrDevice.mtxLocal.rotateY(180); // rotate back because the XR Rig is looking in the direction of negative z
            super.prepare(_prepareBranch);
            let glLayer = this.session.renderState.baseLayer;
            for (let view of pose.views) {
                let viewport = glLayer.getViewport(view);
                FudgeCore.Render.setViewport(viewport.x, viewport.y, viewport.width, viewport.height);
                FudgeCore.Render.setScissorTest(true, viewport.x, viewport.y, viewport.width, viewport.height);
                if (this.useVRController)
                    this.setControllerConfigs(_xrFrame);
                this.camera.resetWorldToView(); // TODO: find a less expensive way to do this, maybe use two cameras
                this.camera.mtxProjection.set(view.projectionMatrix);
                this.camera.mtxCameraInverse.set(view.transform.inverse.matrix);
                if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY)
                    FudgeCore.Render.draw(this.camera);
                if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.NONE) {
                    FudgeCore.Physics.draw(this.camera, this.physicsDebugMode);
                }
            }
            // reset for other render operations e.g. picking
            FudgeCore.Render.setScissorTest(false);
            FudgeCore.Render.setRenderRectangle(FudgeCore.Render.getRenderRectangle());
        }
        /**
         * Move the reference space to set the initial position/orientation of the vr device in accordance to the node the vr device is attached to.
         */
        initializeReferenceSpace() {
            let mtxWorld = this.vrDevice.node?.getComponent(FudgeCore.ComponentVRDevice)?.mtxWorld;
            if (!mtxWorld)
                return;
            mtxWorld = mtxWorld.clone;
            mtxWorld.rotateY(180); // rotate because the XR Rig is looking in the direction of negative z
            let invMtxTransfom = FudgeCore.Matrix4x4.INVERSE(mtxWorld); // inverse because we are moving the reference space
            XRViewport.default.referenceSpace = XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(invMtxTransfom.translation, invMtxTransfom.quaternion));
        }
        //Sets controller matrices and thumbsticks movements.
        setControllerConfigs(_xrFrame) {
            if (_xrFrame) {
                if (XRViewport.default.session.inputSources.length > 0) {
                    XRViewport.default.session.inputSources.forEach(_controller => {
                        try {
                            switch (_controller.handedness) {
                                case ("right"):
                                    this.vrDevice.rightCntrl.cmpTransform.mtxLocal.set(_xrFrame.getPose(_controller.targetRaySpace, XRViewport.default.referenceSpace).transform.matrix);
                                    if (!this.vrDevice.rightCntrl.gamePad)
                                        this.vrDevice.rightCntrl.gamePad = _controller.gamepad;
                                    else {
                                        this.vrDevice.rightCntrl.thumbstickX = _controller.gamepad.axes[2];
                                        this.vrDevice.rightCntrl.thumbstickY = _controller.gamepad.axes[3];
                                    }
                                    break;
                                case ("left"):
                                    this.vrDevice.leftCntrl.cmpTransform.mtxLocal.set(_xrFrame.getPose(_controller.targetRaySpace, XRViewport.default.referenceSpace).transform.matrix);
                                    if (!this.vrDevice.leftCntrl.gamePad)
                                        this.vrDevice.leftCntrl.gamePad = _controller.gamepad;
                                    else {
                                        this.vrDevice.leftCntrl.thumbstickX = _controller.gamepad.axes[2];
                                        this.vrDevice.leftCntrl.thumbstickY = _controller.gamepad.axes[3];
                                    }
                                    break;
                            }
                        }
                        catch (e) {
                            FudgeCore.Debug.info("Input Sources Error: " + e);
                        }
                    });
                }
            }
        }
    }
    FudgeCore.XRViewport = XRViewport;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Handles file transfer from a FUDGE-Browserapp to the local filesystem without a local server.
     * Saves to the download-path given by the browser, loads from the player's choice.
     */
    class FileIoBrowserLocal extends FudgeCore.EventTargetStatic {
        // TODO: refactor to async function to be handled using promise, instead of using event target
        /**
         * Open file select dialog to load files from local filesystem into browser application.
         */
        static async load(_multiple = false) {
            FileIoBrowserLocal.selector = document.createElement("input");
            FileIoBrowserLocal.selector.type = "file";
            FileIoBrowserLocal.selector.multiple = _multiple;
            FileIoBrowserLocal.selector.hidden = true;
            FileIoBrowserLocal.selector.addEventListener("change", FileIoBrowserLocal.handleFileSelect);
            document.body.appendChild(FileIoBrowserLocal.selector);
            return new Promise(_resolve => {
                function hndLoaded(_event) {
                    FileIoBrowserLocal.removeEventListener("fileLoaded" /* EVENT.FILE_LOADED */, hndLoaded);
                    _resolve(_event.detail.mapFilenameToContent);
                }
                FileIoBrowserLocal.addEventListener("fileLoaded" /* EVENT.FILE_LOADED */, hndLoaded);
                FileIoBrowserLocal.selector.click();
            });
        }
        // TODO: refactor to async function to be handled using promise, instead of using event target
        /**
         * Open a file download dialog to save files to local filesystem.
         */
        static save(_toSave, _type = "text/plain") {
            for (let filename in _toSave) {
                let content = _toSave[filename];
                let blob = new Blob([content], { type: _type });
                let url = window.URL.createObjectURL(blob);
                //*/ using anchor element for download
                let downloader;
                downloader = document.createElement("a");
                downloader.setAttribute("href", url);
                downloader.setAttribute("download", filename);
                document.body.appendChild(downloader);
                downloader.click();
                document.body.removeChild(downloader);
                window.URL.revokeObjectURL(url);
            }
            return new Promise(_resolve => {
                _resolve(_toSave);
                // function hndSaved(_event: Event): void {
                //   FileIoBrowserLocal.removeEventListener(EVENT.FILE_SAVED, hndSaved);
                //   _resolve((<CustomEvent>_event).detail);
                // }
                // FileIoBrowserLocal.addEventListener(EVENT.FILE_SAVED, hndSaved);
                // let event: CustomEvent = new CustomEvent(EVENT.FILE_SAVED, { detail: { mapFilenameToContent: _toSave } });
                // FileIoBrowserLocal.targetStatic.dispatchEvent(event);
            });
        }
        /**
         * Load the the files referenced in {@link FileList} into the provided {@link MapFilenameToContent}
         */
        static async loadFiles(_fileList, _loaded) {
            for (let file of _fileList) {
                const content = await new Response(file).text();
                _loaded[file.name] = content;
            }
        }
        static async handleFileSelect(_event) {
            FudgeCore.Debug.fudge("-------------------------------- handleFileSelect");
            document.body.removeChild(FileIoBrowserLocal.selector);
            let fileList = _event.target.files;
            FudgeCore.Debug.fudge(fileList, fileList.length);
            if (fileList.length == 0)
                return;
            let loaded = {};
            await FileIoBrowserLocal.loadFiles(fileList, loaded);
            let event = new CustomEvent("fileLoaded" /* EVENT.FILE_LOADED */, { detail: { mapFilenameToContent: loaded } });
            FileIoBrowserLocal.targetStatic.dispatchEvent(event);
        }
    }
    FudgeCore.FileIoBrowserLocal = FileIoBrowserLocal;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Mutable array of {@link Mutable}s. The {@link Mutator}s of the entries are included as array in the {@link Mutator}
     * @author Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class MutableArray extends Array {
        #type;
        constructor(_type, ..._args) {
            super(..._args);
            this.#type = _type;
        }
        get type() {
            return this.#type;
        }
        /**
         * Rearrange the entries of the array according to the given sequence of indices
         */
        rearrange(_sequence) {
            let length = this.length;
            for (let index of _sequence) {
                let original = this[index];
                // TODO: optimize, copy only double entries
                //@ts-ignore
                let copy = new original.constructor();
                copy.mutate(original.getMutator());
                this.push(copy);
            }
            this.splice(0, length);
        }
        /**
         * Returns an associative array with this arrays elements corresponding types as string-values
         */
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            for (let entry in this)
                types[entry] = this[entry].constructor.name;
            return types;
        }
        /**
         * Returns an array with each elements mutator by invoking {@link Mutable.getMutator} on them
         */
        getMutator() {
            return this.map((_value) => _value.getMutator());
        }
        /**
         * See {@link Mutable.getMutatorForUserInterface}
         */
        getMutatorForUserInterface() {
            return this.getMutator();
        }
        /**
         * Mutate each element of this array by invoking {@link Mutable.mutate} on it
         */
        async mutate(_mutator) {
            for (let entry in this)
                await this[entry].mutate(_mutator[entry]);
        }
        /**
         * Updates the values of the given mutator according to the current state of the instance
         */
        updateMutator(_mutator) {
            for (let entry in this) {
                let mutatorValue = _mutator[entry];
                if (!mutatorValue)
                    continue;
                if (this[entry] instanceof FudgeCore.Mutable)
                    _mutator[entry] = this[entry].getMutator();
                else
                    _mutator[entry] = this[entry];
            }
        }
    }
    FudgeCore.MutableArray = MutableArray;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let MODE;
    (function (MODE) {
        MODE[MODE["EDITOR"] = 0] = "EDITOR";
        MODE[MODE["RUNTIME"] = 1] = "RUNTIME";
    })(MODE = FudgeCore.MODE || (FudgeCore.MODE = {}));
    let RESOURCE_STATUS;
    (function (RESOURCE_STATUS) {
        RESOURCE_STATUS[RESOURCE_STATUS["PENDING"] = 0] = "PENDING";
        RESOURCE_STATUS[RESOURCE_STATUS["READY"] = 1] = "READY";
        RESOURCE_STATUS[RESOURCE_STATUS["ERROR"] = 2] = "ERROR";
    })(RESOURCE_STATUS = FudgeCore.RESOURCE_STATUS || (FudgeCore.RESOURCE_STATUS = {}));
    /**
     * Static class handling the resources used with the current FUDGE-instance.
     * Keeps a list of the resources and generates ids to retrieve them.
     * Resources are objects referenced multiple times but supposed to be stored only once
     */
    class Project extends FudgeCore.EventTargetStatic {
        static { this.resources = {}; }
        static { this.serialization = {}; }
        static { this.scriptNamespaces = {}; }
        static { this.baseURL = new URL(location.toString()); }
        static { this.mode = MODE.RUNTIME; }
        static { this.graphInstancesToResync = {}; }
        /**
         * Registers the resource and generates an id for it by default.
         * If the resource already has an id, thus having been registered, its deleted from the list and registered anew.
         * It's possible to pass an id, but should not be done except by the Serializer.
         */
        static register(_resource, _idResource) {
            if (_resource.idResource && _resource.idResource == _idResource)
                return;
            if (_resource.idResource) // deregister the old id
                this.deregister(_resource);
            if (_idResource) {
                _resource.idResource = _idResource;
                this.deregister(_resource); // deregister the new id
            }
            if (!_resource.idResource)
                _resource.idResource = Project.generateId(_resource);
            Project.resources[_resource.idResource] = _resource;
            if (_resource instanceof FudgeCore.Graph)
                _resource.addEventListener("graphMutated" /* EVENT.GRAPH_MUTATED */, (_event) => this.dispatchEvent(new CustomEvent("graphMutated" /* EVENT.GRAPH_MUTATED */, { detail: _resource })));
        }
        /**
         * Removes the resource from the list of resources.
         */
        static deregister(_resource) {
            delete (Project.resources[_resource.idResource]);
            delete (Project.serialization[_resource.idResource]);
        }
        /**
         * Clears the list of resources and their serialization, thus removing all resources.
         */
        static clear() {
            Project.resources = {};
            Project.serialization = {};
            Project.clearScriptNamespaces();
            // Project.scriptNamespaces = {};
        }
        // <T extends Component>(_class: new () => T): T[] {
        //   return <T[]>(this.components[_class.name] || []).slice(0);
        // }
        /**
         * Returns an array of all resources of the requested type.
         */
        static getResourcesByType(_type) {
            let found = [];
            for (let resourceId in Project.resources) {
                let resource = Project.resources[resourceId];
                if (resource instanceof _type)
                    found.push(resource);
            }
            return found;
        }
        /**
         * Returns an array of all resources with the requested name.
         */
        static getResourcesByName(_name) {
            let found = [];
            for (let resourceId in Project.resources) {
                let resource = Project.resources[resourceId];
                if (resource.name == _name)
                    found.push(resource);
            }
            return found;
        }
        /**
         * Generate a user readable and unique id using the type of the resource, the date and random numbers
         * @param _resource
         */
        static generateId(_resource) {
            // TODO: build id and integrate info from resource, not just date
            let idResource;
            do
                idResource = _resource.constructor.name + "|" + new Date().toISOString() + "|" + Math.random().toPrecision(5).substr(2, 5);
            while (Project.resources[idResource]);
            return idResource;
        }
        /**
         * Tests, if an object is a {@link SerializableResource}
         * @param _object The object to examine
         */
        static isResource(_object) {
            return (Reflect.has(_object, "idResource"));
        }
        /**
         * Retrieves the resource stored with the given id
         */
        static async getResource(_idResource) {
            let resource = Project.resources[_idResource];
            if (!resource) {
                let serialization = Project.serialization[_idResource];
                if (!serialization) {
                    FudgeCore.Debug.error("Resource not found", _idResource);
                    return null;
                }
                resource = await Project.deserializeResource(serialization);
            }
            return resource;
        }
        /**
         * Creates and registers a resource from a {@link Node}, copying the complete graph starting with it
         * @param _node A node to create the resource from
         * @param _replaceWithInstance if true (default), the node used as origin is replaced by a {@link GraphInstance} of the {@link Graph} created
         */
        static async registerAsGraph(_node, _replaceWithInstance = true) {
            let serialization = _node.serialize();
            let graph = new FudgeCore.Graph(_node.name);
            await graph.deserialize(serialization);
            Project.register(graph);
            if (_replaceWithInstance && _node.getParent()) {
                let instance = await Project.createGraphInstance(graph);
                _node.getParent().replaceChild(_node, instance);
            }
            return graph;
        }
        /**
         * Creates and returns a {@link GraphInstance} of the given {@link Graph}
         * and connects it to the graph for synchronisation of mutation.
         */
        static async createGraphInstance(_graph) {
            let instance = new FudgeCore.GraphInstance(_graph); // TODO: cleanup since creation moved here
            await instance.connectToGraph();
            return instance;
        }
        /**
         * Register the given {@link GraphInstance} to be resynced
         */
        static registerGraphInstanceForResync(_instance) {
            let instances = Project.graphInstancesToResync[_instance.idSource] || [];
            instances.push(_instance);
            Project.graphInstancesToResync[_instance.idSource] = instances;
        }
        /**
         * Resync all {@link GraphInstance} registered to the given {@link Graph}
         */
        static async resyncGraphInstances(_graph) {
            let instances = Project.graphInstancesToResync[_graph.idResource];
            if (!instances)
                return;
            for (let instance of instances)
                await instance.connectToGraph();
            delete (Project.graphInstancesToResync[_graph.idResource]);
        }
        /**
         * Register the given namespace to the list of script-namespaces.
         */
        static registerScriptNamespace(_namespace) {
            let name = FudgeCore.Serializer.registerNamespace(_namespace);
            if (!Project.scriptNamespaces[name])
                Project.scriptNamespaces[name] = _namespace;
        }
        /**
         * Clear the list of script-namespaces.
         */
        static clearScriptNamespaces() {
            for (let name in Project.scriptNamespaces) {
                Reflect.set(window, name, undefined);
                Project.scriptNamespaces[name] = undefined;
                delete Project.scriptNamespaces[name];
            }
        }
        /**
         * Collects all {@link ComponentScript}s registered in {@link Project.scriptNamespaces} and returns them.
         */
        static getComponentScripts() {
            let compoments = {};
            for (let namespace in Project.scriptNamespaces) {
                compoments[namespace] = [];
                for (let name in Project.scriptNamespaces[namespace]) {
                    let script = Reflect.get(Project.scriptNamespaces[namespace], name);
                    // Using Object.create doesn't call the constructor, but instanceof can be used. More elegant than the loop above, though maybe not as performant. 
                    try {
                        let o = Object.create(script);
                        if (o.prototype instanceof FudgeCore.ComponentScript)
                            compoments[namespace].push(script);
                    }
                    catch (_e) { /* */ }
                }
            }
            return compoments;
        }
        /**
         * Loads a script from the given URL and integrates it into a {@link HTMLScriptElement} in the {@link document.head}
         */
        static async loadScript(_url) {
            let script = document.createElement("script");
            script.type = "text/javascript";
            // script.type = "module";
            script.async = false;
            // script.addEventListener("load", handleLoadedScript)
            let head = document.head;
            head.appendChild(script);
            FudgeCore.Debug.log("Loading: ", _url);
            return new Promise((_resolve, _reject) => {
                script.addEventListener("load", () => _resolve());
                script.addEventListener("error", () => {
                    FudgeCore.Debug.error("Loading script", _url);
                    _reject();
                });
                script.src = _url.toString();
            });
        }
        /**
         * Load {@link Resources} from the given url
         */
        static async loadResources(_url) {
            const response = await fetch(_url);
            const resourceFileContent = await response.text();
            let serialization = FudgeCore.Serializer.parse(resourceFileContent);
            let reconstruction = await Project.deserialize(serialization);
            Project.dispatchEvent(new CustomEvent("resourcesLoaded" /* EVENT.RESOURCES_LOADED */, { detail: { url: _url, resources: reconstruction } }));
            return reconstruction;
        }
        /**
         * Load all resources from the {@link document.head}
         */
        static async loadResourcesFromHTML() {
            const head = document.head;
            let links = head.querySelectorAll("link[type=resources]");
            for (let link of links) {
                let url = link.getAttribute("src");
                await Project.loadResources(url);
            }
        }
        /**
         * Serialize all resources
         */
        static serialize() {
            let serialization = {};
            for (let idResource in Project.resources) {
                let resource = Project.resources[idResource];
                if (idResource != resource.idResource)
                    FudgeCore.Debug.error("Resource-id mismatch", resource);
                serialization[idResource] = FudgeCore.Serializer.serialize(resource);
            }
            return serialization;
        }
        /**
         * Create resources from a serialization, deleting all resources previously registered
         * @param _serialization
         */
        static async deserialize(_serialization) {
            Project.serialization = _serialization;
            Project.resources = {};
            for (let idResource in _serialization) {
                let serialization = _serialization[idResource];
                let resource = await Project.deserializeResource(serialization);
                if (resource)
                    Project.resources[idResource] = resource;
            }
            return Project.resources;
        }
        static async deserializeResource(_serialization) {
            return FudgeCore.Serializer.deserialize(_serialization);
        }
    }
    FudgeCore.Project = Project;
})(FudgeCore || (FudgeCore = {}));
var FBX;
(function (FBX) {
    /**
     * Reader to read data from an array buffer more conveniently.
     * It saves a current offset which is updated when data is read due to its bytelength.
     * despite getSequence it is mostly a copy of the reference: https://github.com/picode7/binary-reader
     * @author Matthias Roming, HFU, 2023
     */
    class BufferReader {
        constructor(_buffer) {
            this.view = new DataView(_buffer);
            this.offset = 0;
        }
        getChar(_offset = this.offset) {
            return String.fromCharCode(this.getUint8(_offset));
        }
        getBool(_offset = this.offset) {
            return this.getUint8(_offset) != 0;
        }
        getUint8(_offset = this.offset) {
            this.offset = _offset + 1;
            return this.view.getUint8(_offset);
        }
        getUint32(_offset = this.offset) {
            this.offset = _offset + 4;
            return this.view.getUint32(_offset, true);
        }
        getUint64(_offset = this.offset) {
            this.offset = _offset + 8;
            return this.view.getBigUint64(_offset, true);
        }
        getInt16(_offset = this.offset) {
            this.offset = _offset + 2;
            return this.view.getInt16(_offset, true);
        }
        getInt32(_offset = this.offset) {
            this.offset = _offset + 4;
            return this.view.getInt32(_offset, true);
        }
        getInt64(_offset = this.offset) {
            this.offset = _offset + 8;
            return this.view.getBigInt64(_offset, true);
        }
        getFloat32(_offset = this.offset) {
            this.offset = _offset + 4;
            return this.view.getFloat32(_offset, true);
        }
        getFloat64(_offset = this.offset) {
            this.offset = _offset + 8;
            return this.view.getFloat64(_offset, true);
        }
        getString(_length, _offset = this.offset) {
            return String.fromCharCode(...this.getSequence(this.getUint8, _length, _offset));
        }
        *getSequence(_getter, _length, _offset = this.offset) {
            this.offset = _offset;
            for (let i = 0; i < _length; i++) {
                yield _getter.call(this);
            }
        }
    }
    FBX.BufferReader = BufferReader;
})(FBX || (FBX = {}));
var FBX;
(function (FBX) {
    let MAPPING_INFORMATION_TYPE;
    (function (MAPPING_INFORMATION_TYPE) {
        MAPPING_INFORMATION_TYPE[MAPPING_INFORMATION_TYPE["BY_VERTEX"] = 0] = "BY_VERTEX";
        MAPPING_INFORMATION_TYPE[MAPPING_INFORMATION_TYPE["BY_POLYGON"] = 1] = "BY_POLYGON";
        MAPPING_INFORMATION_TYPE[MAPPING_INFORMATION_TYPE["BY_POLYGON_VERTEX"] = 2] = "BY_POLYGON_VERTEX";
        MAPPING_INFORMATION_TYPE[MAPPING_INFORMATION_TYPE["BY_EDGE"] = 3] = "BY_EDGE";
        MAPPING_INFORMATION_TYPE[MAPPING_INFORMATION_TYPE["ALL_SAME"] = 4] = "ALL_SAME";
    })(MAPPING_INFORMATION_TYPE = FBX.MAPPING_INFORMATION_TYPE || (FBX.MAPPING_INFORMATION_TYPE = {}));
    let REFERENCE_INFORMATION_TYPE;
    (function (REFERENCE_INFORMATION_TYPE) {
        REFERENCE_INFORMATION_TYPE[REFERENCE_INFORMATION_TYPE["DIRECT"] = 0] = "DIRECT";
        REFERENCE_INFORMATION_TYPE[REFERENCE_INFORMATION_TYPE["INDEX_TO_DIRECT"] = 1] = "INDEX_TO_DIRECT";
    })(REFERENCE_INFORMATION_TYPE = FBX.REFERENCE_INFORMATION_TYPE || (FBX.REFERENCE_INFORMATION_TYPE = {}));
})(FBX || (FBX = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Asset loader for Filmbox files.
     * @author Matthias Roming, HFU, 2023
     */
    class FBXLoader {
        static #defaultMaterial;
        static #defaultSkinMaterial;
        #scenes;
        #nodes;
        #meshes;
        #materials;
        #skinMaterials = [];
        #textures;
        #skeletons;
        #animations;
        constructor(_buffer, _uri) {
            this.uri = _uri;
            this.nodes = FBX.parseNodesFromBinary(_buffer);
            console.log(this.nodes);
            this.fbx = FBX.loadFromNodes(this.nodes);
            console.log(this.fbx);
        }
        static get defaultMaterial() {
            return this.#defaultMaterial || (this.#defaultMaterial =
                new FudgeCore.Material("FBXDefaultMaterial", FudgeCore.ShaderGouraud, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white"))));
        }
        static get defaultSkinMaterial() {
            return this.#defaultSkinMaterial || (this.#defaultSkinMaterial =
                new FudgeCore.Material("FBXDefaultSkinMaterial", FudgeCore.ShaderGouraudSkin, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white"))));
        }
        static async LOAD(_uri) {
            if (!this.loaders)
                this.loaders = {};
            if (!this.loaders[_uri]) {
                const response = await fetch(_uri);
                const binary = await response.arrayBuffer();
                this.loaders[_uri] = new FBXLoader(binary, _uri);
            }
            return this.loaders[_uri];
        }
        async getScene(_index = 0) {
            if (!this.#scenes)
                this.#scenes = [];
            if (!this.#scenes[_index]) {
                const documentFBX = this.fbx.documents[_index].load();
                const scene = new FudgeCore.Graph(documentFBX.name);
                for (const childFBX of documentFBX.children) {
                    if (childFBX.type == "Model") {
                        scene.addChild(await this.getNode(this.fbx.objects.models.indexOf(childFBX)));
                    }
                }
                if (this.fbx.objects.animStacks && this.fbx.objects.animStacks.length > 0) {
                    const animation = await this.getAnimation(documentFBX.ActiveAnimStackName.length > 0 ?
                        this.fbx.objects.animStacks.findIndex(_animStack => _animStack.name == documentFBX.ActiveAnimStackName) : 0);
                    if (animation)
                        scene.addComponent(new FudgeCore.ComponentAnimator(animation));
                }
                for (const skeleton of this.#skeletons)
                    scene.addComponent(skeleton);
                FudgeCore.Project.register(scene);
                this.#scenes[_index] = scene;
            }
            return this.#scenes[_index];
        }
        async getNode(_index) {
            if (!this.#nodes)
                this.#nodes = [];
            if (!this.#nodes[_index]) {
                // create node with transform
                const modelFBX = this.fbx.objects.models[_index].load();
                const node = new FudgeCore.Node(modelFBX.name);
                await this.generateTransform(modelFBX, node);
                this.#nodes[_index] = node;
                // attach children and components
                if (modelFBX.children)
                    for (const childFBX of modelFBX.children) {
                        if (childFBX.type == "Model") {
                            node.addChild(await this.getNode(this.fbx.objects.models.indexOf(childFBX)));
                        }
                        else if (childFBX.type == "Geometry") {
                            const mesh = await this.getMesh(this.fbx.objects.geometries.indexOf(childFBX));
                            const cmpMesh = new FudgeCore.ComponentMesh(mesh);
                            node.addComponent(new FudgeCore.ComponentMaterial(FBXLoader.defaultMaterial));
                            if (mesh.renderMesh.bones) {
                                cmpMesh.skeleton = await this.getSkeleton(childFBX.children[0].children[0].children[0]);
                                // for (const subDeformerFBX of childFBX.children[0].children as FBX.SubDeformer[]) {
                                //   const bone: Node = cmpMesh.skeleton.bones[subDeformerFBX.children[0].name];
                                //   bone.mtxLocal.set(subDeformerFBX.TransformLink);
                                //   if (bone.getParent())
                                //     bone.mtxLocal.multiply(bone.getParent().mtxWorldInverse);
                                // }
                                node.getComponent(FudgeCore.ComponentMaterial).material = FBXLoader.defaultSkinMaterial;
                            }
                            node.addComponent(cmpMesh);
                        }
                        else if (childFBX.type == "Material") {
                            // TODO: additional skin materials get created here, check if the original material is still needed
                            const iMaterial = this.fbx.objects.materials.indexOf(childFBX);
                            const material = await this.getMaterial(iMaterial);
                            node.getComponent(FudgeCore.ComponentMaterial).material = node.getComponent(FudgeCore.ComponentMesh).mesh.renderMesh.bones ?
                                this.#skinMaterials[iMaterial] || (this.#skinMaterials[iMaterial] = new FudgeCore.Material(material.name, material.getShader() == FudgeCore.ShaderPhong ?
                                    FudgeCore.ShaderPhongSkin :
                                    FudgeCore.ShaderPhongTexturedSkin, material.coat)) :
                                material;
                        }
                    }
            }
            return this.#nodes[_index];
        }
        async getMesh(_index) {
            if (!this.#meshes)
                this.#meshes = [];
            if (!this.#meshes[_index])
                this.#meshes[_index] = await new FudgeCore.MeshFBX().load(this.uri, _index);
            return this.#meshes[_index];
        }
        async getMaterial(_index) {
            if (!this.#materials)
                this.#materials = [];
            if (!this.#materials[_index]) {
                const materialFBX = this.fbx.objects.materials[_index].load();
                if (!(materialFBX.DiffuseColor instanceof FudgeCore.Vector3))
                    materialFBX.DiffuseColor?.children[0].load();
                // FBX supports lambert and phong shading, either way fudge has no lambert shader so we always use phong.
                // In DiffuseColor the texture of the material color is stored, if it's defined we use a texture shader.
                // TODO: materialFBX also contains additional values like shininess and reflectivity (and others) which are not suppported.
                this.#materials[_index] = new FudgeCore.Material(materialFBX.name, materialFBX.DiffuseColor && !(materialFBX.DiffuseColor instanceof FudgeCore.Vector3) ?
                    FudgeCore.ShaderPhongTextured :
                    FudgeCore.ShaderPhong, materialFBX.DiffuseColor && !(materialFBX.DiffuseColor instanceof FudgeCore.Vector3) ?
                    new FudgeCore.CoatRemissiveTextured(new FudgeCore.Color(...materialFBX.Diffuse.get()), await this.getTexture(this.fbx.objects.textures.indexOf(materialFBX.DiffuseColor)), materialFBX.DiffuseFactor ?? 1, materialFBX.SpecularFactor ?? average(materialFBX.Specular?.get()) ?? 0) :
                    new FudgeCore.CoatRemissive(new FudgeCore.Color(...(materialFBX.DiffuseColor ?? materialFBX.Diffuse).get()), materialFBX.DiffuseFactor ?? 1, materialFBX.SpecularFactor ?? average(materialFBX.Specular?.get()) ?? 0));
            }
            return this.#materials[_index];
            function average(_array) {
                if (_array)
                    return _array.reduce((_a, _b) => _a + _b) / _array.length;
                else
                    return undefined;
            }
        }
        async getTexture(_index) {
            return new Promise((_resolve, _reject) => {
                if (!this.#textures)
                    this.#textures = [];
                if (this.#textures[_index])
                    return _resolve(this.#textures[_index]);
                const videoFBX = this.fbx.objects.textures[_index].children[0];
                const texture = new FudgeCore.TextureImage();
                texture.image = new Image();
                texture.image.onload = () => _resolve(texture);
                texture.image.onerror = _reject;
                texture.image.src = URL.createObjectURL(new Blob([videoFBX.Content], { type: "image/png" }));
                this.#textures[_index] = texture;
                // TODO: get and set mipmap information ???
            });
        }
        // Problem: mehrere Deformer verweisen auf das selbe Skelett aber nutzen dabei nicht immer alle Knochen
        // => Problem besteht auch im GLTFLoader
        /**
         * Retriefs the skeleton containing the given limb node.
         */
        async getSkeleton(_fbxLimbNode) {
            if (!this.#skeletons)
                this.#skeletons = [];
            return this.#skeletons.find(_skeleton => _fbxLimbNode.name in _skeleton.bones) || await (async () => {
                const skeleton = new FudgeCore.ComponentSkeleton(); // new Skeleton(`Skeleton${this.#skeletons.length}`);
                let rootNode = _fbxLimbNode;
                while (rootNode.parents && rootNode.parents.some(_parent => _parent.subtype == "LimbNode"))
                    rootNode = rootNode.parents.find(_parent => _parent.subtype == "LimbNode");
                const iRootNode = this.fbx.objects.models.findIndex(_model => _model.name == rootNode.name);
                for (const node of await this.getNode(iRootNode)) {
                    // TODO: maybe move this into the component, as this is probably needed in gltf import aswell
                    if (this.fbx.objects.models[this.#nodes.indexOf(node)].subtype == "LimbNode") {
                        const parent = node.getParent();
                        if (parent)
                            node.mtxWorld.copy(node.cmpTransform ?
                                FudgeCore.Matrix4x4.PRODUCT(parent.mtxWorld, node.mtxLocal) :
                                parent.mtxWorld);
                        node.mtxWorldInverse.copy(FudgeCore.Matrix4x4.INVERSE(node.mtxWorld));
                        skeleton.addBone(node);
                    }
                }
                this.#skeletons.push(skeleton);
                return skeleton;
            })();
        }
        async getAnimation(_index) {
            if (!this.#animations)
                this.#animations = [];
            if (!this.#animations[_index]) {
                const animStack = this.fbx.objects.animStacks[_index];
                const animNodesFBX = animStack.children[0].children;
                let fbxAnimNodeGrouped = new Map();
                for (const fbxAnimNode of animNodesFBX) {
                    const key = fbxAnimNode.parents.find(_parent => _parent.type == "Model");
                    if (key == undefined)
                        continue;
                    if (!fbxAnimNodeGrouped.has(key))
                        fbxAnimNodeGrouped.set(key, []);
                    fbxAnimNodeGrouped.get(key).push(fbxAnimNode);
                }
                const animationStructure = {};
                for (const [fbxModel, fbxAnimNodes] of fbxAnimNodeGrouped) {
                    let currentStructure = animationStructure;
                    let parent = fbxModel.parents.find(_parent => _parent.type == "Model");
                    let path = [];
                    path.push(fbxModel);
                    while (parent != undefined) {
                        path.push(parent);
                        parent = parent.parents.find(_parent => _parent.type == "Model");
                    }
                    for (const fbxPathModel of path.reverse()) {
                        if (currentStructure.children == undefined)
                            currentStructure.children = {};
                        if (currentStructure.children[fbxPathModel.name] == undefined)
                            currentStructure.children[fbxPathModel.name] = {};
                        currentStructure = currentStructure.children[fbxPathModel.name];
                        if (fbxPathModel == fbxModel) {
                            const mtxLocal = {};
                            for (const fbxAnimNode of fbxAnimNodes)
                                mtxLocal[{
                                    T: "translation",
                                    R: "rotation",
                                    S: "scale"
                                }[fbxAnimNode.name]] = this.getAnimationVector3(fbxAnimNode, fbxPathModel);
                            currentStructure.components = {
                                ComponentTransform: [
                                    { mtxLocal: mtxLocal }
                                ]
                            };
                        }
                    }
                }
                this.#animations[_index] = new FudgeCore.Animation(animStack.name, animationStructure);
            }
            return this.#animations[_index];
        }
        /**
         * fetched from three.js, adapted to FUDGE and optimized
         * https://github.com/mrdoob/three.js/blob/dev/examples/jsm/loaders/FBXLoader.js
         * line 3950
         */
        async generateTransform(_modelFBX, _node) {
            const parentIndex = this.fbx.objects.models.indexOf(_modelFBX.parents.find(_parent => _parent.type == "Model"));
            const parent = parentIndex >= 0 ? await this.getNode(parentIndex) : undefined;
            const mtxLocalRotation = _modelFBX.PreRotation || _modelFBX.LclRotation || _modelFBX.PostRotation ?
                FudgeCore.Matrix4x4.IDENTITY() :
                undefined;
            if (_modelFBX.PreRotation) {
                mtxLocalRotation.rotate(this.getOrdered(_modelFBX.PreRotation, _modelFBX));
            }
            if (_modelFBX.LclRotation) {
                mtxLocalRotation.rotate(this.getOrdered(this.getTransformVector(_modelFBX.LclRotation, FudgeCore.Vector3.ZERO), _modelFBX));
            }
            if (_modelFBX.PostRotation) {
                let mtxPostRotationInverse = FudgeCore.Matrix4x4.ROTATION(this.getOrdered(_modelFBX.PostRotation, _modelFBX));
                mtxPostRotationInverse = FudgeCore.Matrix4x4.INVERSE(mtxPostRotationInverse);
                mtxLocalRotation.multiply(mtxPostRotationInverse);
            }
            const mtxLocalScaling = _modelFBX.LclScaling ?
                FudgeCore.Matrix4x4.SCALING(this.getTransformVector(_modelFBX.LclScaling, FudgeCore.Vector3.ONE)) :
                undefined;
            const mtxParentWorldRotation = parent ? FudgeCore.Matrix4x4.ROTATION(parent.mtxWorld.rotation) : undefined;
            const mtxParentWorldScale = parent ? (() => {
                const mtxParentWorldScale = FudgeCore.Matrix4x4.INVERSE(mtxParentWorldRotation);
                mtxParentWorldScale.translate(FudgeCore.Vector3.SCALE(parent.mtxWorld.translation, -1));
                mtxParentWorldScale.multiply(parent.mtxWorld);
                return mtxParentWorldScale;
            })() : undefined;
            const mtxWorldRotationScale = parent || mtxLocalRotation || mtxLocalScaling ? FudgeCore.Matrix4x4.IDENTITY() : undefined;
            if (parent || mtxLocalRotation || mtxLocalScaling) {
                const inheritType = _modelFBX.InheritType || 0;
                if (inheritType == 0) {
                    if (parent)
                        mtxWorldRotationScale.multiply(mtxParentWorldRotation);
                    if (mtxLocalRotation)
                        mtxWorldRotationScale.multiply(mtxLocalRotation);
                    if (parent)
                        mtxWorldRotationScale.multiply(mtxParentWorldScale);
                    if (mtxLocalScaling)
                        mtxWorldRotationScale.multiply(mtxLocalScaling);
                }
                else if (inheritType == 1) {
                    if (parent) {
                        mtxWorldRotationScale.multiply(mtxParentWorldRotation);
                        mtxWorldRotationScale.multiply(mtxParentWorldScale);
                    }
                    if (mtxLocalRotation)
                        mtxWorldRotationScale.multiply(mtxLocalRotation);
                    if (mtxLocalScaling)
                        mtxWorldRotationScale.multiply(mtxLocalScaling);
                }
                else {
                    if (parent)
                        mtxWorldRotationScale.multiply(mtxParentWorldRotation);
                    if (mtxLocalRotation)
                        mtxWorldRotationScale.multiply(mtxLocalRotation);
                    if (parent) {
                        mtxWorldRotationScale.multiply(mtxParentWorldScale);
                        let mtxParentLocalScalingInverse = FudgeCore.Matrix4x4.SCALING(parent.mtxLocal.scaling);
                        mtxParentLocalScalingInverse = FudgeCore.Matrix4x4.INVERSE(mtxParentLocalScalingInverse);
                        mtxWorldRotationScale.multiply(mtxParentLocalScalingInverse);
                    }
                    if (mtxLocalScaling)
                        mtxWorldRotationScale.multiply(mtxLocalScaling);
                }
            }
            // Calculate the local transform matrix
            let translation;
            translation = FudgeCore.Vector3.ZERO();
            if (_modelFBX.LclTranslation)
                translation.add(this.getTransformVector(_modelFBX.LclTranslation, FudgeCore.Vector3.ZERO));
            if (_modelFBX.RotationOffset)
                translation.add(_modelFBX.RotationOffset);
            if (_modelFBX.RotationPivot)
                translation.add(_modelFBX.RotationPivot);
            const mtxTransform = FudgeCore.Matrix4x4.TRANSLATION(translation);
            if (mtxLocalRotation)
                mtxTransform.multiply(mtxLocalRotation);
            translation = FudgeCore.Vector3.ZERO();
            if (_modelFBX.RotationPivot)
                translation.subtract(_modelFBX.RotationPivot);
            if (_modelFBX.ScalingOffset)
                translation.add(_modelFBX.ScalingOffset);
            if (_modelFBX.ScalingPivot)
                translation.add(_modelFBX.ScalingPivot);
            mtxTransform.translate(translation);
            if (mtxLocalScaling)
                mtxTransform.multiply(mtxLocalScaling);
            if (_modelFBX.ScalingPivot)
                mtxTransform.translate(FudgeCore.Vector3.SCALE(_modelFBX.ScalingPivot, -1));
            const mtxWorldTranslation = parent ?
                FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Matrix4x4.PRODUCT(parent.mtxWorld, FudgeCore.Matrix4x4.TRANSLATION(mtxTransform.translation)).translation) :
                FudgeCore.Matrix4x4.TRANSLATION(mtxTransform.translation);
            mtxTransform.copy(mtxWorldTranslation);
            mtxTransform.multiply(mtxWorldRotationScale);
            _node.mtxWorld.copy(mtxTransform);
            if (parent)
                mtxTransform.multiply(FudgeCore.Matrix4x4.INVERSE(parent.mtxWorld), true);
            _node.addComponent(new FudgeCore.ComponentTransform(mtxTransform));
        }
        getTransformVector(_vector, _default) {
            return (_vector == undefined ?
                _default() :
                _vector instanceof FudgeCore.Vector3 ?
                    _vector :
                    new FudgeCore.Vector3(typeof (_vector = _vector.load()).dX == "number" ?
                        _vector.dX :
                        _vector.dX.load().Default, typeof _vector.dY == "number" ?
                        _vector.dY :
                        _vector.dY.load().Default, typeof _vector.dZ == "number" ?
                        _vector.dZ :
                        _vector.dZ.load().Default));
        }
        getAnimationVector3(_animNode, _target) {
            const vectorSequence = {};
            for (const valueName in _animNode)
                if (valueName == "dX" || valueName == "dY" || valueName == "dZ") {
                    const value = _animNode[valueName];
                    if (typeof value != "number") {
                        const sequence = new FudgeCore.AnimationSequence();
                        for (let i = 0; i < value.KeyTime.length; ++i) {
                            // According to the reference time is defined as a signed int64, unit being 1/46186158000 seconds
                            // ref: https://archive.blender.org/wiki/index.php/User:Mont29/Foundation/FBX_File_Structure/#Some_Specific_Property_Types
                            sequence.addKey(new FudgeCore.AnimationKey(Number((value.KeyTime[i] - value.KeyTime.reduce((_min, _v) => _v < _min ? _v : _min)) / BigInt("46186158")), value.KeyValueFloat[i]));
                        }
                        vectorSequence[valueName[1].toLowerCase()] = sequence;
                    }
                }
            if (_animNode.name == "R" && (_target.PreRotation || _target.PostRotation)) {
                let preRototation;
                if (_target.PreRotation)
                    preRototation = FudgeCore.Matrix4x4.ROTATION(_target.PreRotation);
                let postRotation;
                if (_target.PostRotation)
                    postRotation = FudgeCore.Matrix4x4.ROTATION(_target.PostRotation);
                [vectorSequence.x, vectorSequence.y, vectorSequence.z]
                    .flatMap(_seq => _seq?.getKeys())
                    .map(_key => _key?.time)
                    .sort((_timeA, _timeB) => _timeA - _timeB) // sort times
                    .filter((_time, _index, _times) => _time != _times[_index + 1]) // remove duplicates
                    .map(_time => {
                    return { x: findKey(vectorSequence.x), y: findKey(vectorSequence.y), z: findKey(vectorSequence.z) };
                    function findKey(_sequence) {
                        return _sequence?.getKeys().find(_key => _key.time == _time);
                    }
                })
                    .forEach(_frame => {
                    let vctEulerAngles = FudgeCore.Recycler.get(FudgeCore.Vector3);
                    vctEulerAngles.set(_frame.x?.value ?? 0, _frame.y?.value ?? 0, _frame.z?.value ?? 0);
                    const mtxRotation = FudgeCore.Matrix4x4.ROTATION(vctEulerAngles);
                    if (preRototation)
                        mtxRotation.multiply(preRototation, true);
                    if (postRotation)
                        mtxRotation.multiply(postRotation);
                    vctEulerAngles = mtxRotation.rotation;
                    if (_frame.x)
                        _frame.x.value = vctEulerAngles.x;
                    if (_frame.y)
                        _frame.y.value = vctEulerAngles.y;
                    if (_frame.z)
                        _frame.z.value = vctEulerAngles.z;
                });
            }
            return vectorSequence;
        }
        getOrdered(_rotation, _modelFBX) {
            if (!_modelFBX.EulerOrder)
                return _rotation;
            const data = _rotation.get();
            const result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(data[_modelFBX.EulerOrder.indexOf("Z")], data[_modelFBX.EulerOrder.indexOf("Y")], data[_modelFBX.EulerOrder.indexOf("X")]);
            return result;
        }
    }
    FudgeCore.FBXLoader = FBXLoader;
})(FudgeCore || (FudgeCore = {}));
var FBX;
(function (FBX) {
    /**
     * Interface to represent fbx-nodes containing its name, children and properties.
     * Children and properites are lazy.
     * @author Matthias Roming, HFU, 2023
     */
    class Node {
        #children;
        #properties;
        constructor(_name, _loadProperties, _loadChildren) {
            this.name = _name;
            this.loadProperties = _loadProperties;
            this.loadChildren = _loadChildren;
        }
        get properties() {
            return this.#properties || (this.#properties = this.loadProperties());
        }
        get children() {
            return this.#children || (this.#children = this.loadChildren());
        }
    }
    FBX.Node = Node;
    let ARRAY_ENCODING;
    (function (ARRAY_ENCODING) {
        ARRAY_ENCODING[ARRAY_ENCODING["UNCOMPRESSED"] = 0] = "UNCOMPRESSED";
        ARRAY_ENCODING[ARRAY_ENCODING["COMPRESSED"] = 1] = "COMPRESSED";
    })(ARRAY_ENCODING = FBX.ARRAY_ENCODING || (FBX.ARRAY_ENCODING = {}));
})(FBX || (FBX = {}));
var FBX;
(function (FBX) {
    /**
     * Loads an fbx file from its fbx-node array which may be retrieved by parseNodesFromBinary.
     * @author Matthias Roming, HFU, 2023
     */
    function loadFromNodes(_nodes) {
        const fbx = {
            documents: undefined,
            objects: {
                all: undefined,
                models: [],
                geometries: [],
                materials: [],
                poses: [],
                textures: [],
                animStacks: []
            },
            connections: undefined
        };
        for (const node of _nodes) {
            if (node.name == "Documents")
                fbx.documents = node.children
                    .filter(_documentNode => _documentNode.name == "Document")
                    .map(_documentNode => getDocument(_documentNode));
            else if (node.name == "Objects")
                fbx.objects.all = node.children.map(_objectNode => getObject(_objectNode, fbx));
            else if (node.name == "Connections")
                fbx.connections = node.children.map(_connectionNode => getConnection(_connectionNode));
            if (fbx.documents && fbx.objects.all && fbx.connections)
                break;
        }
        groupObjects(fbx);
        applyConnections(fbx.connections, fbx.documents, fbx.objects.all);
        return fbx;
    }
    FBX.loadFromNodes = loadFromNodes;
    function getDocument(_node) {
        const document = {
            uid: _node.properties[0],
            name: _node.properties[2],
            loaded: false,
            load: () => loadObjectProperties(_node, document)
        };
        return document;
    }
    function getObject(_node, _fbx) {
        const nameAndType = _node.properties[1].split("::");
        const object = {
            uid: _node.properties[0],
            name: nameAndType[0],
            type: nameAndType[1],
            subtype: _node.properties[2],
            loaded: false,
            load: () => loadObjectProperties(_node, object)
        };
        return object;
    }
    function groupObjects(_fbx) {
        for (const object of _fbx.objects.all) {
            if (object.type == "Model")
                _fbx.objects.models.push(object);
            else if (object.type == "Geometry")
                _fbx.objects.geometries.push(object);
            else if (object.type == "Material")
                _fbx.objects.materials.push(object);
            else if (object.type == "Pose")
                _fbx.objects.poses.push(object);
            else if (object.type == "Texture")
                _fbx.objects.textures.push(object);
            else if (object.type == "AnimStack")
                _fbx.objects.animStacks.push(object);
        }
    }
    function getConnection(_node) {
        if (!(_node.properties[0] == "OO" || _node.properties[0] == "OP")) {
            console.warn(`Connection type ${_node.properties[0]} is not supported`);
            return null;
        }
        return {
            childUID: _node.properties[1],
            parentUID: _node.properties[2],
            propertyName: _node.properties[0] == "OP" ? _node.properties[3] : null
        };
    }
    function applyConnections(_connections, _documents, _objects) {
        for (const connection of _connections) {
            let parent = _documents.find(_document => _document.load().RootNode == connection.parentUID);
            let child;
            for (const object of _objects) {
                if (parent == undefined && object.uid == connection.parentUID)
                    parent = object;
                if (child == undefined && object.uid == connection.childUID)
                    child = object;
                if (parent != undefined && child != undefined)
                    break;
            }
            if (child)
                (child.parents || (child.parents = [])).push(parent);
            if (connection.propertyName == null)
                (parent.children || (parent.children = [])).push(child);
            else
                parent[formatPropertyName(connection.propertyName)] = child;
        }
    }
    function loadObjectProperties(_node, _object) {
        if (_object.loaded)
            return _object;
        for (const child of _node.children) {
            if (child.name == "Properties70")
                for (const property70 of child.children) {
                    const name = formatPropertyName(property70.properties[0]);
                    if (!_object[name])
                        _object[name] = getProperty70Value(property70);
                }
            else {
                const name = formatPropertyName(child.name);
                if (!_object[name])
                    _object[name] = getPropertyValue(child);
            }
        }
        _object.loaded = true;
        return _object;
    }
    function getPropertyValue(_node) {
        return _node.children.length > 0
            ? _node.children.reduce((_subProperties, _subProperty) => {
                const name = formatPropertyName(_subProperty.name);
                if (_subProperties[name] == undefined)
                    _subProperties[name] = getPropertyValue(_subProperty);
                else {
                    if (!(_subProperties[name] instanceof Array))
                        _subProperties[name] = [_subProperties[name]];
                    _subProperties[name].push(getPropertyValue(_subProperty));
                }
                return _subProperties;
            }, {})
            : _node.properties[0];
    }
    function getProperty70Value(_node) {
        switch (_node.properties[1]) {
            case "bool":
                return _node.properties[4];
            case "int":
            case "enum":
            case "ULongLong":
            case "double":
            case "Number":
            case "FieldOfView":
                return _node.properties[4];
            case "Color":
            case "ColorRGB":
            case "Vector3D":
            case "Lcl Translation":
            case "Lcl Rotation":
            case "Lcl Scaling":
                return new FudgeCore.Vector3(..._node.properties.slice(4, 7));
            case "KString":
            default:
                return _node.properties[4];
        }
    }
    function formatPropertyName(_name) {
        return _name.replace(/[^a-zA-Z]/, "");
    }
})(FBX || (FBX = {}));
var FBX;
(function (FBX) {
    /**
     * Parses fbx-nodes array from a binary fbx-file.
     * despite the lazy node implementation it is mostly a copy of the reference: https://github.com/picode7/fbx-parser
     * @author Matthias Roming, HFU, 2023
     */
    function parseNodesFromBinary(_buffer) {
        if (_buffer.byteLength < binaryStartChars.length)
            throw "Not a binary FBX file";
        const data = new FBX.BufferReader(_buffer);
        const firstChars = new Uint8Array(data.getSequence(data.getUint8, binaryStartChars.length));
        const matchesFBXBinaryFirstChars = firstChars.every((_value, _index) => _value == binaryStartChars[_index]);
        if (!matchesFBXBinaryFirstChars)
            throw "Not a binary FBX file";
        const version = data.getUint32();
        const nodeAttributesAsUInt64 = version >= 7500; // Warum >= 7500?
        const nodes = [];
        while (true) {
            const node = readNode(data, nodeAttributesAsUInt64);
            if (node == null)
                break;
            nodes.push(node);
        }
        return nodes;
    }
    FBX.parseNodesFromBinary = parseNodesFromBinary;
    function readNode(_data, _attributesAsUint64) {
        const endOffset = _attributesAsUint64 ? Number(_data.getUint64()) : _data.getUint32();
        if (endOffset == 0)
            return null;
        const propertiesLength = _attributesAsUint64 ? Number(_data.getUint64()) : _data.getUint32();
        const propertiesByteLength = _attributesAsUint64 ? Number(_data.getUint64()) : _data.getUint32();
        const nameLength = _data.getUint8();
        const name = _data.getString(nameLength);
        const propertiesOffset = _data.offset;
        const childrenOffset = propertiesOffset + propertiesByteLength;
        const node = new FBX.Node(name, () => {
            _data.offset = propertiesOffset;
            const properties = [];
            for (let iProperty = 0; iProperty < propertiesLength; iProperty++) {
                properties.push(readProperty(_data));
            }
            return properties;
        }, () => {
            _data.offset = childrenOffset;
            const children = [];
            while (endOffset - _data.offset > nullCountAtNodeEnd) {
                const child = readNode(_data, _attributesAsUint64);
                if (child)
                    children.push(child);
            }
            return children;
        });
        _data.offset = endOffset;
        return node;
    }
    function readProperty(_data) {
        const typeCode = _data.getChar();
        const value = {
            C: _data.getBool,
            Y: _data.getInt16,
            I: _data.getInt32,
            L: _data.getInt64,
            F: _data.getFloat32,
            D: _data.getFloat64,
            S: () => _data.getString(_data.getUint32()).replace("\x00\x01", "::"),
            s: () => _data.getString(_data.getUint32()).replace("\x00\x01", "::"),
            R: () => new Uint8Array(readRaw(_data, _data.getUint8)),
            r: () => new Uint8Array(readArray(_data, _data.getUint8)),
            b: () => new Uint8Array(readArray(_data, _data.getUint8)),
            i: () => new Int32Array(readArray(_data, _data.getInt32)),
            l: () => new BigInt64Array(readArray(_data, _data.getInt64)),
            f: () => new Float32Array(readArray(_data, _data.getFloat32)),
            d: () => new Float32Array(readArray(_data, _data.getFloat64))
        }[typeCode]?.call(_data);
        if (value == null)
            FudgeCore.Debug.warn(`Unknown property type ${typeCode.charCodeAt(0)}`);
        return value;
    }
    function readArray(_data, _getter) {
        const length = _data.getUint32();
        const encoding = _data.getUint32();
        const byteLength = _data.getUint32();
        const endOffset = _data.offset + byteLength;
        const iterable = encoding == FBX.ARRAY_ENCODING.COMPRESSED ?
            (() => {
                const arrayData = new Uint8Array(_data.view.buffer, _data.offset, byteLength);
                const inflatedData = (Reflect.get(globalThis, "pako") ? pako.inflate : fflate.inflateSync)(arrayData);
                return new FBX.BufferReader(inflatedData.buffer).getSequence(_getter, length);
            })() :
            _data.getSequence(_getter, length);
        _data.offset = endOffset;
        return iterable;
    }
    function readRaw(_data, _getter) {
        // raw binary data needs to be interpreted in a special way see:
        // https://code.blender.org/2013/08/fbx-binary-file-format-specification/
        const length = _data.getUint32();
        return _data.getSequence(_getter, length);
        ;
    }
    const binaryStartChars = Uint8Array.from("Kaydara FBX Binary\x20\x20\x00\x1a\x00".split(""), _v => _v.charCodeAt(0));
    const nullCountAtNodeEnd = 13;
})(FBX || (FBX = {}));
var GLTF;
(function (GLTF) {
    /**
     * https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#accessor-data-types
     */
    let COMPONENT_TYPE;
    (function (COMPONENT_TYPE) {
        COMPONENT_TYPE[COMPONENT_TYPE["BYTE"] = 5120] = "BYTE";
        COMPONENT_TYPE[COMPONENT_TYPE["UNSIGNED_BYTE"] = 5121] = "UNSIGNED_BYTE";
        COMPONENT_TYPE[COMPONENT_TYPE["SHORT"] = 5122] = "SHORT";
        COMPONENT_TYPE[COMPONENT_TYPE["UNSIGNED_SHORT"] = 5123] = "UNSIGNED_SHORT";
        COMPONENT_TYPE[COMPONENT_TYPE["UNSIGNED_INT"] = 5125] = "UNSIGNED_INT";
        COMPONENT_TYPE[COMPONENT_TYPE["FLOAT"] = 5126] = "FLOAT";
    })(COMPONENT_TYPE = GLTF.COMPONENT_TYPE || (GLTF.COMPONENT_TYPE = {}));
    let ACCESSOR_TYPE;
    (function (ACCESSOR_TYPE) {
        ACCESSOR_TYPE["SCALAR"] = "SCALAR";
        ACCESSOR_TYPE["VEC2"] = "VEC2";
        ACCESSOR_TYPE["VEC3"] = "VEC3";
        ACCESSOR_TYPE["VEC4"] = "VEC4";
        ACCESSOR_TYPE["MAT2"] = "MAT2";
        ACCESSOR_TYPE["MAT3"] = "MAT3";
        ACCESSOR_TYPE["MAT4"] = "MAT4";
    })(ACCESSOR_TYPE = GLTF.ACCESSOR_TYPE || (GLTF.ACCESSOR_TYPE = {}));
    let MESH_PRIMITIVE_MODE;
    (function (MESH_PRIMITIVE_MODE) {
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["POINTS"] = 0] = "POINTS";
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["LINES"] = 1] = "LINES";
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["LINE_LOOP"] = 2] = "LINE_LOOP";
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["LINE_STRIP"] = 3] = "LINE_STRIP";
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["TRIANGLES"] = 4] = "TRIANGLES";
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["TRIANGLE_STRIP"] = 5] = "TRIANGLE_STRIP";
        MESH_PRIMITIVE_MODE[MESH_PRIMITIVE_MODE["TRIANGLE_FAN"] = 6] = "TRIANGLE_FAN";
    })(MESH_PRIMITIVE_MODE = GLTF.MESH_PRIMITIVE_MODE || (GLTF.MESH_PRIMITIVE_MODE = {}));
})(GLTF || (GLTF = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Asset loader for gl Transfer Format files.
     * @authors Matthias Roming, HFU, 2022 | Jonas Plotzky, HFU, 2023
     */
    class GLTFLoader {
        static #defaultMaterial;
        static #defaultSkinMaterial;
        #url;
        #gltf;
        #resources = {};
        #nodes = [];
        #cameras;
        #skeletons;
        #buffers;
        constructor(_gltf, _url, _bufferChunk) {
            this.#gltf = _gltf;
            this.#url = _url;
            if (_bufferChunk)
                this.#buffers = [_bufferChunk];
        }
        static get defaultMaterial() {
            if (!this.#defaultMaterial) {
                this.#defaultMaterial = new FudgeCore.Material("GLTFDefaultMaterial", FudgeCore.ShaderPhong, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white"), 1, 0.5));
                FudgeCore.Project.deregister(this.#defaultMaterial);
            }
            return this.#defaultMaterial;
        }
        static get defaultSkinMaterial() {
            if (!this.#defaultSkinMaterial) {
                this.#defaultSkinMaterial = new FudgeCore.Material("GLTFDefaultSkinMaterial", FudgeCore.ShaderPhongSkin, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white"), 1, 0.5));
                FudgeCore.Project.deregister(this.#defaultSkinMaterial);
            }
            return this.#defaultSkinMaterial;
        }
        /**
         * Handles the loading of an external resource from a glTF file. Used by the {@link SerializableResourceExternal}GLTF specializations to load themselves.
         * @internal
         */
        static async loadResource(_resource, _url) {
            const loader = await GLTFLoader.LOAD((_resource.url ?? _url).toString());
            if (!loader) {
                if (!(_resource instanceof FudgeCore.GraphInstance))
                    _resource.status = FudgeCore.RESOURCE_STATUS.ERROR;
                return _resource;
            }
            let loaded;
            if (_resource instanceof FudgeCore.GraphInstance)
                loaded = await loader.getGraph(_resource.get().name, _resource);
            else if (_resource instanceof FudgeCore.GraphGLTF)
                loaded = await loader.getGraph(_resource.name, _resource);
            else if (_resource instanceof FudgeCore.MeshGLTF)
                loaded = await loader.getMesh(_resource.name, _resource.iPrimitive, _resource);
            else if (_resource instanceof FudgeCore.MaterialGLTF)
                loaded = await loader.getMaterial(_resource.name, _resource);
            else if (_resource instanceof FudgeCore.AnimationGLTF)
                loaded = await loader.getAnimation(_resource.name, _resource);
            if (!loaded) {
                FudgeCore.Debug.error(`${_resource.constructor.name} | ${_resource instanceof FudgeCore.GraphInstance ? _resource.idSource : _resource.idResource}: Failed to load resource.`);
                if (!(_resource instanceof FudgeCore.GraphInstance))
                    _resource.status = FudgeCore.RESOURCE_STATUS.ERROR;
                return _resource;
            }
            if (!(loaded instanceof FudgeCore.GraphInstance)) {
                loaded.status = FudgeCore.RESOURCE_STATUS.READY;
            }
            // if (cached && !(_resource instanceof GraphInstance)) {
            //   if (!Project.resources[cached.idResource])
            //     cached.idResource = _resource.idResource; // change the id of the cached resource to the id of the resource that requested it
            //   if (cached.idResource != _resource.idResource) {
            //     // two different resources have requested the same cached resource
            //     Debug.error(`${_resource.idResource}: Failed to load resource. ${_resource.type} with name '${_resource.name}' from '${loader.name}' has already been loaded by '${cached.idResource}'. Please delete the duplicate '${_resource.idResource}' from the project.`);
            //     return _resource;
            //   }
            // }
            return loaded;
        }
        /**
         * Returns a {@link GLTFLoader} instance for the given url or null if the url can't be resolved.
         */
        static async LOAD(_url, _registerResources = false) {
            if (!this.loaders)
                GLTFLoader.loaders = {};
            if (!this.loaders[_url]) {
                let gltf;
                let buffer;
                try {
                    const response = await fetch(new URL(_url, FudgeCore.Project.baseURL));
                    const fileExtension = _url.split('.').pop()?.toLowerCase();
                    if (fileExtension == "gltf")
                        gltf = await response.json();
                    if (fileExtension == "glb") {
                        const arrayBuffer = await response.arrayBuffer();
                        const dataView = new DataView(arrayBuffer);
                        const magic = dataView.getUint32(0, true);
                        if (magic !== 0x46546C67)
                            throw new Error(`${GLTFLoader.name} | ${_url}: Invalid magic number in GLB file.`);
                        const version = dataView.getUint32(4, true);
                        if (version != 2)
                            throw new Error(`${GLTFLoader.name} | ${_url}: Unsupported version in GLB file.`);
                        const jsonLength = dataView.getUint32(12, true);
                        const jsonFormat = dataView.getUint32(16, true);
                        if (jsonFormat !== 0x4E4F534A)
                            throw new Error('Invalid format. The first chunk of the file is not in JSON format.');
                        const decoder = new TextDecoder();
                        const jsonChunk = decoder.decode(new Uint8Array(arrayBuffer, 20, jsonLength));
                        gltf = JSON.parse(jsonChunk);
                        if (arrayBuffer.byteLength >= 20 + jsonLength) {
                            const binaryLength = dataView.getUint32(20 + jsonLength, true);
                            const binaryFormat = dataView.getUint32(24 + jsonLength, true);
                            if (binaryFormat !== 0x004E4942)
                                throw new Error('Invalid format. The second chunk of the file is not in binary format.');
                            buffer = arrayBuffer.slice(28 + jsonLength, 28 + jsonLength + binaryLength);
                        }
                    }
                }
                catch (error) {
                    FudgeCore.Debug.error(`${GLTFLoader.name} | ${_url}: Failed to load file. ${error}`);
                    return null;
                }
                GLTFLoader.checkCompatibility(gltf, _url);
                GLTFLoader.preProcess(gltf, _url);
                GLTFLoader.loaders[_url] = new GLTFLoader(gltf, _url, buffer);
            }
            return GLTFLoader.loaders[_url];
        }
        static checkCompatibility(_gltf, _url) {
            if (_gltf.asset.version != "2.0")
                FudgeCore.Debug.warn(`${GLTFLoader.name} | ${_url}: This loader was developed for glTF 2.0. It may not work as intended with version ${_gltf.asset.version}.`);
            if (_gltf.asset.minVersion != undefined && _gltf.asset.minVersion != "2.0")
                throw new Error(`${GLTFLoader.name} | ${_url}: This loader was developed for glTF 2.0. It does not work with required min version ${_gltf.asset.minVersion}.`);
            if (_gltf.extensionsUsed?.length > 0)
                FudgeCore.Debug.warn(`${GLTFLoader.name} | ${_url}: This loader does not support glTF extensions. It may not work as intended with extensions ${_gltf.extensionsUsed.toString()}.`);
            if (_gltf.extensionsRequired?.length > 0)
                throw new Error(`${GLTFLoader.name} | ${_url}: This loader does not support glTF extensions. It does not work with required extensions ${_gltf.extensionsRequired.toString()}.`);
        }
        static preProcess(_gltf, _url) {
            // add a name to each scene
            if (_gltf.scenes) {
                _gltf.scene = _gltf.scene ?? 0;
                addNames("Scene", _gltf.scenes);
            }
            if (_gltf.nodes) {
                // mark all nodes that are animated
                _gltf.animations?.forEach(_animation => {
                    _animation.channels.forEach(_channel => {
                        const iNode = _channel.target.node;
                        if (iNode != undefined)
                            _gltf.nodes[iNode].isAnimated = true;
                    });
                });
                // mark parent of each node
                _gltf.nodes.forEach((_node, _iNode) => _node.children?.forEach(_iChild => _gltf.nodes[_iChild].parent = _iNode));
                _gltf.nodes.forEach((_node, _iNode) => {
                    // add names to nodes that don't have one
                    if (_node.name == undefined)
                        _node.name = `Node${_iNode}`;
                    if (_node.isAnimated) {
                        // add path to each animated node
                        let iParent = _node.parent;
                        let path = [];
                        path.push(_iNode);
                        while (iParent != undefined) {
                            path.push(iParent);
                            iParent = _gltf.nodes[iParent].parent;
                        }
                        _node.path = path.reverse();
                    }
                });
            }
            if (_gltf.materials)
                addNames("Material", _gltf.materials);
            if (_gltf.meshes)
                addNames("Mesh", _gltf.meshes);
            if (_gltf.animations)
                addNames("Animation", _gltf.animations);
            function addNames(_template, _target) {
                _target.forEach((_item, _index) => {
                    if (_item.name == undefined)
                        _item.name = `${_template}${_index}`;
                });
            }
        }
        /**
         * Returns the glTF file name.
         */
        get name() {
            return this.#url.split("\\").pop();
        }
        /**
         * Returns new instances of all resources of the given type.
         */
        async loadResources(_class) {
            let resources = [];
            switch (_class.name) {
                case FudgeCore.Graph.name:
                    for (let iScene = 0; iScene < this.#gltf.scenes?.length; iScene++)
                        resources.push(await this.getGraph(iScene, new FudgeCore.GraphGLTF()));
                    break;
                case FudgeCore.Mesh.name:
                    for (let iMesh = 0; iMesh < this.#gltf.meshes?.length; iMesh++)
                        for (let iPrimitive = 0; iPrimitive < this.#gltf.meshes[iMesh].primitives.length; iPrimitive++)
                            resources.push(await this.getMesh(iMesh, iPrimitive, new FudgeCore.MeshGLTF()));
                    break;
                case FudgeCore.Material.name:
                    for (let iMaterial = 0; iMaterial < this.#gltf.materials?.length; iMaterial++)
                        resources.push(await this.getMaterial(iMaterial, new FudgeCore.MaterialGLTF("Hi :)")));
                    break;
                case FudgeCore.Animation.name:
                    for (let iAnimation = 0; iAnimation < this.#gltf.animations?.length; iAnimation++)
                        resources.push(await this.getAnimation(iAnimation, new FudgeCore.AnimationGLTF()));
                    break;
            }
            for (const resource of resources) {
                if (!FudgeCore.Project.resources[resource.idResource])
                    FudgeCore.Project.register(resource);
                resource.status = FudgeCore.RESOURCE_STATUS.READY;
            }
            return resources;
        }
        async getGraph(_iScene = this.#gltf.scene, _graph) {
            _iScene = this.getIndex(_iScene, this.#gltf.scenes);
            if (_iScene == -1)
                return null;
            const id = `${FudgeCore.GraphGLTF.name}|${_iScene}`;
            if (!_graph && this.#resources[id])
                return this.#resources[id];
            this.#nodes = [];
            this.#cameras = [];
            this.#skeletons = [];
            const gltfScene = this.#gltf.scenes[_iScene];
            const graph = _graph ?? new FudgeCore.GraphGLTF();
            graph.name = gltfScene.name;
            if (graph instanceof FudgeCore.GraphGLTF)
                graph.url = this.#url;
            if (_graph) {
                _graph.removeAllChildren();
                _graph.removeComponents(FudgeCore.ComponentSkeleton);
            }
            for (const iNode of gltfScene.nodes)
                graph.addChild(await this.getNodeByIndex(iNode));
            // if (this.#gltf.animations?.length > 0 && !graph.getComponent(ComponentAnimator)) {
            //   let animation: Animation = await this.getAnimation(0);
            //   Project.register(animation);
            //   graph.addComponent(new ComponentAnimator(animation));
            // }
            // TODO: load only skeletons which belong to the scene???
            // if (this.gltf.skins?.length > 0)
            //   for (let iSkin: number = 0; iSkin < this.gltf.skins.length; iSkin++)
            //     scene.addComponent(await this.getSkeletonByIndex(iSkin));
            if (this.#skeletons)
                for (const skeleton of this.#skeletons)
                    graph.addComponent(skeleton);
            if (!_graph)
                this.#resources[id] = graph;
            return graph;
        }
        /**
         * Returns the first {@link Node} with the given name.
         */
        async getNode(_name) {
            const iNode = this.#gltf.nodes.findIndex(_node => _node.name == _name);
            if (iNode == -1)
                throw new Error(`${this}: Couldn't find name '${_name}' in glTF nodes.`);
            return await this.getNodeByIndex(iNode);
        }
        /**
         * Returns the {@link Node} for the given index.
         */
        async getNodeByIndex(_iNode) {
            if (!this.#nodes[_iNode]) {
                const gltfNode = this.#gltf.nodes[_iNode];
                const node = new FudgeCore.Node(gltfNode.name);
                this.#nodes[_iNode] = node;
                // check for children
                if (gltfNode.children)
                    for (const iNode of gltfNode.children)
                        node.addChild(await this.getNodeByIndex(iNode));
                // check for transformation
                if (gltfNode.matrix || gltfNode.rotation || gltfNode.scale || gltfNode.translation || gltfNode.isAnimated) {
                    node.addComponent(new FudgeCore.ComponentTransform());
                    if (gltfNode.matrix) {
                        node.mtxLocal.set(gltfNode.matrix);
                    }
                    else {
                        if (gltfNode.translation) {
                            const translation = FudgeCore.Recycler.get(FudgeCore.Vector3);
                            translation.set(gltfNode.translation[0], gltfNode.translation[1], gltfNode.translation[2]);
                            node.mtxLocal.translation = translation;
                            FudgeCore.Recycler.store(translation);
                        }
                        if (gltfNode.rotation) {
                            const rotation = FudgeCore.Recycler.get(FudgeCore.Quaternion);
                            rotation.set(gltfNode.rotation[0], gltfNode.rotation[1], gltfNode.rotation[2], gltfNode.rotation[3]);
                            node.mtxLocal.rotation = rotation;
                            FudgeCore.Recycler.store(rotation);
                        }
                        if (gltfNode.scale) {
                            const scale = FudgeCore.Recycler.get(FudgeCore.Vector3);
                            scale.set(gltfNode.scale[0], gltfNode.scale[1], gltfNode.scale[2]);
                            node.mtxLocal.scaling = scale;
                            FudgeCore.Recycler.store(scale);
                        }
                    }
                }
                // check for camera
                if (gltfNode.camera != undefined) {
                    node.addComponent(await this.getCameraByIndex(gltfNode.camera));
                }
                // check for mesh and material
                if (gltfNode.mesh != undefined) {
                    const gltfMesh = this.#gltf.meshes?.[gltfNode.mesh];
                    // TODO: review this
                    const subComponents = [];
                    for (let iPrimitive = 0; iPrimitive < gltfMesh.primitives.length; iPrimitive++) {
                        const cmpMesh = new FudgeCore.ComponentMesh(await this.getMesh(gltfNode.mesh, iPrimitive));
                        const isSkin = gltfNode.skin != undefined;
                        if (isSkin)
                            cmpMesh.skeleton = await this.getSkeletonByIndex(gltfNode.skin);
                        let cmpMaterial;
                        const iMaterial = gltfMesh.primitives?.[iPrimitive]?.material;
                        if (iMaterial == undefined) {
                            cmpMaterial = new FudgeCore.ComponentMaterial(isSkin ?
                                GLTFLoader.defaultSkinMaterial :
                                GLTFLoader.defaultMaterial);
                        }
                        else {
                            const isFlat = gltfMesh.primitives[iPrimitive].attributes.NORMAL == undefined;
                            cmpMaterial = new FudgeCore.ComponentMaterial(await this.getMaterial(iMaterial, null, isSkin, isFlat));
                            // TODO: maybe this should be a fudge material property
                            const gltfMaterial = this.#gltf.materials[iMaterial];
                            if (gltfMaterial)
                                cmpMaterial.sortForAlpha = gltfMaterial.alphaMode == "BLEND";
                        }
                        subComponents.push([cmpMesh, cmpMaterial]);
                    }
                    if (subComponents.length == 1) {
                        node.addComponent(subComponents[0][0]);
                        node.addComponent(subComponents[0][1]);
                    }
                    else {
                        subComponents.forEach(([_cmpMesh, _cmpMaterial], _i) => {
                            const nodePart = new FudgeCore.Node(`${node.name}_Primitive${_i}`);
                            nodePart.addComponent(_cmpMesh);
                            nodePart.addComponent(_cmpMaterial);
                            node.addChild(nodePart);
                        });
                    }
                }
            }
            return this.#nodes[_iNode];
        }
        /**
         * Returns the first {@link ComponentCamera} with the given camera name.
         */
        async getCamera(_name) {
            const iCamera = this.#gltf.cameras.findIndex(_camera => _camera.name == _name);
            if (iCamera == -1)
                throw new Error(`${this}: Couldn't find name '${_name}' in glTF cameras.`);
            return await this.getCameraByIndex(iCamera);
        }
        /**
         * Returns the {@link ComponentCamera} for the given camera index.
         */
        async getCameraByIndex(_iCamera) {
            if (!this.#cameras)
                this.#cameras = [];
            if (!this.#cameras[_iCamera]) {
                const gltfCamera = this.#gltf.cameras[_iCamera];
                const camera = new FudgeCore.ComponentCamera();
                if (gltfCamera.perspective)
                    camera.projectCentral(gltfCamera.perspective.aspectRatio, gltfCamera.perspective.yfov * FudgeCore.Calc.rad2deg, null, gltfCamera.perspective.znear, gltfCamera.perspective.zfar);
                else
                    camera.projectOrthographic(-gltfCamera.orthographic.xmag, gltfCamera.orthographic.xmag, -gltfCamera.orthographic.ymag, gltfCamera.orthographic.ymag);
                return camera;
            }
            return this.#cameras[_iCamera];
        }
        async getAnimation(_iAnimation, _animation) {
            _iAnimation = this.getIndex(_iAnimation, this.#gltf.animations);
            if (_iAnimation == -1)
                return null;
            const id = `${FudgeCore.Animation.name}|${_iAnimation}`;
            if (!_animation && this.#resources[id])
                return this.#resources[id];
            const gltfAnimation = this.#gltf.animations?.[_iAnimation];
            if (!gltfAnimation)
                throw new Error(`${this}: Couldn't find animation with index ${_iAnimation}.`);
            const animationStructure = {};
            for (const gltfChannel of gltfAnimation.channels) {
                const gltfNode = this.#gltf.nodes[gltfChannel.target.node];
                if (!gltfNode)
                    continue;
                let node = animationStructure;
                for (const iNode of gltfNode.path) {
                    const childName = this.#gltf.nodes[iNode].name;
                    // node.children[childName]
                    node = (node.children ??= {})[childName] ??= {};
                }
                // node.components.ComponentTransform[0].mtxLocal
                let mtxLocal = ((((node.components ??= {}).ComponentTransform ??= [])[0] ??= {}).mtxLocal ??= {});
                mtxLocal[toInternTransformation[gltfChannel.target.path]] =
                    await this.getAnimationSequenceVector(gltfAnimation.samplers[gltfChannel.sampler], gltfChannel.target.path);
            }
            const animation = _animation ?? new FudgeCore.AnimationGLTF();
            animation.animationStructure = animationStructure;
            animation.clearCache();
            animation.name = gltfAnimation.name;
            animation.calculateTotalTime();
            if (animation instanceof FudgeCore.AnimationGLTF)
                animation.url = this.#url;
            if (!_animation) {
                FudgeCore.Project.deregister(animation);
                this.#resources[id] = animation;
            }
            return animation;
        }
        async getMesh(_iMesh, _iPrimitive = 0, _mesh) {
            _iMesh = this.getIndex(_iMesh, this.#gltf.meshes);
            if (_iMesh == -1)
                return null;
            const id = `${FudgeCore.MeshGLTF.name}|${_iMesh}|${_iPrimitive}`;
            if (!_mesh && this.#resources[id])
                return this.#resources[id];
            const gltfMesh = this.#gltf.meshes[_iMesh];
            const gltfPrimitive = gltfMesh.primitives[_iPrimitive];
            if (gltfPrimitive.indices == undefined)
                FudgeCore.Debug.warn(`${this}: Mesh with index ${_iMesh} primitive ${_iPrimitive} has no indices. FUDGE does not support non-indexed meshes.`);
            if (gltfPrimitive.attributes.POSITION == undefined)
                FudgeCore.Debug.warn(`${this}: Mesh with index ${_iMesh} primitive ${_iPrimitive} has no position attribute. Primitive will be ignored.`);
            if (gltfPrimitive.mode != undefined && gltfPrimitive.mode != GLTF.MESH_PRIMITIVE_MODE.TRIANGLES)
                FudgeCore.Debug.warn(`${this}: Mesh with index ${_iMesh} primitive ${_iPrimitive} has topology type mode ${GLTF.MESH_PRIMITIVE_MODE[gltfPrimitive.mode]}. FUDGE only supports ${GLTF.MESH_PRIMITIVE_MODE[4]}.`);
            checkMaxSupport(this, "TEXCOORD", 2);
            checkMaxSupport(this, "COLOR", 1);
            checkMaxSupport(this, "JOINTS", 1);
            checkMaxSupport(this, "WEIGHTS", 1);
            let vertices, indices;
            let normals, tangents;
            let colors, textureUVs;
            let bones, weights;
            if (gltfPrimitive.indices != undefined) {
                indices = await this.getVertexIndices(gltfPrimitive.indices);
                for (let i = 0; i < indices.length; i += 3) {
                    const temp = indices[i + 2];
                    indices[i + 2] = indices[i + 0];
                    indices[i + 0] = indices[i + 1];
                    indices[i + 1] = temp;
                }
            }
            else {
                FudgeCore.Debug.warn(`${this}: Mesh with index ${_iMesh} primitive ${_iPrimitive} has no indices. FUDGE does not support non-indexed meshes.`);
            }
            if (gltfPrimitive.attributes.POSITION != undefined)
                vertices = await this.getFloat32Array(gltfPrimitive.attributes.POSITION);
            else
                FudgeCore.Debug.warn(`${this}: Mesh with index ${_iMesh} primitive ${_iPrimitive} has no position attribute. Primitive will be ignored.`);
            if (gltfPrimitive.attributes.NORMAL != undefined)
                normals = await this.getFloat32Array(gltfPrimitive.attributes.NORMAL);
            if (gltfPrimitive.attributes.TANGENT != undefined)
                tangents = await this.getFloat32Array(gltfPrimitive.attributes.TANGENT);
            if (gltfPrimitive.attributes.TEXCOORD_1 != undefined)
                textureUVs = await this.getFloat32Array(gltfPrimitive.attributes.TEXCOORD_1);
            else if (gltfPrimitive.attributes.TEXCOORD_0 != undefined)
                textureUVs = await this.getFloat32Array(gltfPrimitive.attributes.TEXCOORD_0);
            if (gltfPrimitive.attributes.COLOR_0 != undefined)
                colors = await this.getVertexColors(gltfPrimitive.attributes.COLOR_0);
            if (gltfPrimitive.attributes.JOINTS_0 != undefined && gltfPrimitive.attributes.WEIGHTS_0 != undefined) {
                bones = await this.getBoneIndices(gltfPrimitive.attributes.JOINTS_0);
                weights = await this.getFloat32Array(gltfPrimitive.attributes.WEIGHTS_0);
            }
            const mesh = _mesh ?? new FudgeCore.MeshGLTF();
            mesh.name = gltfMesh.name;
            if (mesh instanceof FudgeCore.MeshGLTF) {
                mesh.iPrimitive = _iPrimitive;
                mesh.url = this.#url;
            }
            if (_mesh) {
                _mesh.clear();
                _mesh.faces = [];
                _mesh.vertices = new FudgeCore.Vertices();
            }
            // Create mesh vertices and faces so that normals and tangents can be calculated if missing. If they are not missing this could be omitted.
            for (let iVector2 = 0, iVector3 = 0, iVector4 = 0; iVector3 < vertices?.length; iVector2 += 2, iVector3 += 3, iVector4 += 4) {
                mesh.vertices.push(new FudgeCore.Vertex(new FudgeCore.Vector3(vertices[iVector3 + 0], vertices[iVector3 + 1], vertices[iVector3 + 2]), textureUVs ?
                    new FudgeCore.Vector2(textureUVs[iVector2 + 0], textureUVs[iVector2 + 1]) :
                    undefined, normals ?
                    new FudgeCore.Vector3(normals[iVector3 + 0], normals[iVector3 + 1], normals[iVector3 + 2]) :
                    undefined, tangents ?
                    new FudgeCore.Vector4(tangents[iVector4 + 0], tangents[iVector4 + 1], tangents[iVector4 + 2], tangents[iVector4 + 3]) :
                    undefined, colors ?
                    new FudgeCore.Color(colors[iVector4 + 0], colors[iVector4 + 1], colors[iVector4 + 2], colors[iVector4 + 3]) :
                    undefined, bones && weights ?
                    [
                        { index: bones[iVector4 + 0], weight: weights[iVector4 + 0] },
                        { index: bones[iVector4 + 1], weight: weights[iVector4 + 1] },
                        { index: bones[iVector4 + 2], weight: weights[iVector4 + 2] },
                        { index: bones[iVector4 + 3], weight: weights[iVector4 + 3] }
                    ] :
                    undefined));
            }
            for (let iFaceVertexIndex = 0; iFaceVertexIndex < indices?.length; iFaceVertexIndex += 3) {
                try {
                    mesh.faces.push(new FudgeCore.Face(mesh.vertices, indices[iFaceVertexIndex + 0], indices[iFaceVertexIndex + 1], indices[iFaceVertexIndex + 2]));
                }
                catch (_e) {
                    FudgeCore.Debug.fudge("Face excluded", _e.message);
                }
            }
            mesh.renderMesh.vertices = vertices;
            mesh.renderMesh.indices = indices;
            mesh.renderMesh.normals = normals;
            mesh.renderMesh.tangents = tangents;
            mesh.renderMesh.textureUVs = textureUVs;
            mesh.renderMesh.colors = colors;
            mesh.renderMesh.bones = bones;
            mesh.renderMesh.weights = weights;
            if (!_mesh) {
                FudgeCore.Project.deregister(mesh);
                // mesh.idResource = id;
                this.#resources[id] = mesh;
            }
            return mesh;
            function checkMaxSupport(_loader, _check, _max) {
                if (Object.keys(gltfPrimitive.attributes).filter((_key) => _key.startsWith(_check)).length > _max)
                    FudgeCore.Debug.warn(`${_loader}: Mesh with index ${_iMesh} primitive ${_iPrimitive} has more than ${_max} sets of '${_check}' associated with it. FUGDE only supports up to ${_max} ${_check} sets per primitive.`);
            }
        }
        async getMaterial(_iMaterial, _material, _skin = false, _flat = false) {
            _iMaterial = this.getIndex(_iMaterial, this.#gltf.materials);
            if (_iMaterial == -1)
                return null;
            const id = `${FudgeCore.Material.name}|${_iMaterial}`;
            if (this.#resources[id] && !_material)
                return this.#resources[id];
            // TODO: in the future create an appropriate shader based on the glTF material properties
            const gltfMaterial = this.#gltf.materials[_iMaterial];
            if (!gltfMaterial)
                throw new Error(`${this}: Couldn't find material with index ${_iMaterial}.`);
            // TODO: add support for other glTF material properties: https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#reference-material
            // e.g. occlusion and emissive textures; doubleSided
            const gltfBaseColorFactor = gltfMaterial.pbrMetallicRoughness?.baseColorFactor ?? [1, 1, 1, 1];
            const gltfMetallicFactor = gltfMaterial.pbrMetallicRoughness?.metallicFactor ?? 1;
            const gltfRoughnessFactor = gltfMaterial.pbrMetallicRoughness?.roughnessFactor ?? 1;
            const gltfEmissiveFactor = gltfMaterial.emissiveFactor ?? [0, 0, 0];
            const gltfBaseColorTexture = gltfMaterial.pbrMetallicRoughness?.baseColorTexture;
            const gltfNormalTexture = gltfMaterial.normalTexture;
            // The diffuse contribution in the Phong shading model. Represents how much light is scattered in different directions due to the material's surface properties.
            const diffuse = 1;
            // The shininess of the material. Influences the sharpness or broadness of the specular highlight. Higher specular values result in a sharper and more concentrated specular highlight.
            const specular = 1.8 * (1 - gltfRoughnessFactor) + 0.6 * gltfMetallicFactor;
            // The strength/intensity of the specular reflection
            const intensity = 0.7 * (1 - gltfRoughnessFactor) + gltfMetallicFactor;
            // Influences how much the material's color affects the specular reflection. When metallic is higher, the specular reflection takes on the color of the material, creating a metallic appearance. Range from 0.0 to 1.0.
            const metallic = gltfMetallicFactor;
            const isLit = gltfEmissiveFactor[0] == 1 && gltfEmissiveFactor[1] == 1 || gltfEmissiveFactor[2] == 1;
            const color = new FudgeCore.Color(...gltfBaseColorFactor);
            const coat = gltfBaseColorTexture ?
                isLit ? new FudgeCore.CoatTextured(color, await this.getTexture(gltfBaseColorTexture.index)) :
                    gltfNormalTexture ?
                        new FudgeCore.CoatRemissiveTexturedNormals(color, await this.getTexture(gltfBaseColorTexture.index), await this.getTexture(gltfNormalTexture.index), diffuse, specular, intensity, metallic) :
                        new FudgeCore.CoatRemissiveTextured(color, await this.getTexture(gltfBaseColorTexture.index), diffuse, specular, intensity, metallic) :
                isLit ? new FudgeCore.CoatColored(color) : new FudgeCore.CoatRemissive(color, diffuse, specular, intensity, metallic);
            let shader;
            if (_flat) { // TODO: make flat a flag in the material so that we can have flat mesh with phong shading gradients
                shader = gltfBaseColorTexture ?
                    (_skin ? FudgeCore.ShaderFlatTexturedSkin : FudgeCore.ShaderFlatTextured) :
                    (_skin ? FudgeCore.ShaderFlatSkin : FudgeCore.ShaderFlat);
            }
            else if (isLit) {
                shader = gltfBaseColorTexture ?
                    (_skin ? FudgeCore.ShaderLitTexturedSkin : FudgeCore.ShaderLitTextured) :
                    (_skin ? FudgeCore.ShaderLitSkin : FudgeCore.ShaderLit);
            }
            else {
                shader = gltfBaseColorTexture ?
                    gltfNormalTexture ?
                        (_skin ? FudgeCore.ShaderPhongTexturedNormalsSkin : FudgeCore.ShaderPhongTexturedNormals) :
                        (_skin ? FudgeCore.ShaderPhongTexturedSkin : FudgeCore.ShaderPhongTextured) :
                    (_skin ? FudgeCore.ShaderPhongSkin : FudgeCore.ShaderPhong);
            }
            const material = _material ?? new FudgeCore.MaterialGLTF(gltfMaterial.name);
            material.name = gltfMaterial.name;
            material.coat = coat;
            if (gltfMaterial.alphaCutoff != undefined)
                material.alphaClip = gltfMaterial.alphaCutoff;
            Reflect.set(material, "shaderType", shader);
            // material.setShader(shader);
            if (material instanceof FudgeCore.MaterialGLTF)
                material.url = this.#url;
            if (!_material) {
                FudgeCore.Project.deregister(material);
                this.#resources[id] = material;
            }
            return material;
        }
        /**
         * Returns the {@link Texture} for the given texture index.
         */
        async getTexture(_iTexture) {
            const id = `${FudgeCore.Texture.name}|${_iTexture}`;
            if (this.#resources[id])
                return this.#resources[id];
            const gltfTexture = this.#gltf.textures[_iTexture];
            const gltfSampler = this.#gltf.samplers?.[gltfTexture.sampler];
            const gltfImage = this.#gltf.images?.[gltfTexture.source];
            if (gltfImage == undefined) {
                FudgeCore.Debug.warn(`${this}: Texture with index ${_iTexture} has no image.`);
                return FudgeCore.TextureDefault.color;
            }
            let url = new URL(gltfImage.uri, new URL(this.#url, FudgeCore.Project.baseURL)).toString();
            if (!gltfImage.uri && gltfImage.bufferView) {
                // TODO: this is duplicate code from getBufferData, maybe refactor getBufferData to handle bufferViewIndex input
                const gltfBufferView = this.#gltf.bufferViews[gltfImage.bufferView];
                const buffer = await this.getBuffer(gltfBufferView.buffer);
                const byteOffset = gltfBufferView.byteOffset || 0;
                const byteLength = gltfBufferView.byteLength || 0;
                url = URL.createObjectURL(new Blob([new Uint8Array(buffer, byteOffset, byteLength / Uint8Array.BYTES_PER_ELEMENT)], { type: gltfImage.mimeType }));
            }
            const texture = new FudgeCore.TextureImage();
            await texture.load(url);
            if (gltfSampler) {
                gltfSampler.magFilter = gltfSampler.magFilter ?? WebGL2RenderingContext.NEAREST; // default value
                gltfSampler.minFilter = gltfSampler.minFilter ?? WebGL2RenderingContext.NEAREST; // default value
                if (gltfSampler.magFilter == WebGL2RenderingContext.NEAREST && gltfSampler.minFilter == WebGL2RenderingContext.NEAREST)
                    texture.mipmap = FudgeCore.MIPMAP.CRISP;
                else if (gltfSampler.magFilter == WebGL2RenderingContext.NEAREST && gltfSampler.minFilter == WebGL2RenderingContext.NEAREST_MIPMAP_LINEAR)
                    texture.mipmap = FudgeCore.MIPMAP.MEDIUM;
                else if (gltfSampler.magFilter == WebGL2RenderingContext.LINEAR && gltfSampler.minFilter == WebGL2RenderingContext.LINEAR_MIPMAP_LINEAR)
                    texture.mipmap = FudgeCore.MIPMAP.BLURRY;
                else
                    FudgeCore.Debug.warn(`${this}: Texture with index ${_iTexture} has a magFilter and minFilter of '${getWebGLParameterName(gltfSampler.magFilter)}' and '${getWebGLParameterName(gltfSampler.minFilter)}' respectively. FUDGE only supports the following combinations: NEAREST and NEAREST | NEAREST and NEAREST_MIPMAP_LINEAR | LINEAR and LINEAR_MIPMAP_LINEAR.`);
                gltfSampler.wrapS = gltfSampler.wrapS ?? WebGL2RenderingContext.REPEAT; // default value
                gltfSampler.wrapT = gltfSampler.wrapT ?? WebGL2RenderingContext.REPEAT; // default value
                if (gltfSampler.wrapS == WebGL2RenderingContext.REPEAT && gltfSampler.wrapT == WebGL2RenderingContext.REPEAT)
                    texture.wrap = FudgeCore.WRAP.REPEAT;
                else if (gltfSampler.wrapS == WebGL2RenderingContext.CLAMP_TO_EDGE && gltfSampler.wrapT == WebGL2RenderingContext.CLAMP_TO_EDGE)
                    texture.wrap = FudgeCore.WRAP.CLAMP;
                else if (gltfSampler.wrapS == WebGL2RenderingContext.MIRRORED_REPEAT && gltfSampler.wrapT == WebGL2RenderingContext.MIRRORED_REPEAT)
                    texture.wrap = FudgeCore.WRAP.MIRROR;
                else
                    FudgeCore.Debug.warn(`${this}: Texture with index ${_iTexture} has a wrapS and wrapT of '${getWebGLParameterName(gltfSampler.wrapS)}' and '${getWebGLParameterName(gltfSampler.wrapT)}' respectively. FUDGE only supports the following combinations: REPEAT and REPEAT | CLAMP_TO_EDGE and CLAMP_TO_EDGE | MIRRORED_REPEAT and MIRRORED_REPEAT.`);
            }
            FudgeCore.Project.deregister(texture);
            this.#resources[id] = texture;
            return texture;
        }
        /**
        * Returns the first {@link ComponentSkeleton} with the given skeleton name.
        */
        async getSkeleton(_name) {
            const iSkeleton = this.#gltf.skins.findIndex(_skeleton => _skeleton.name == _name);
            if (iSkeleton == -1)
                throw new Error(`${this}: Couldn't find name '${_name}' in glTF skins.`);
            return await this.getSkeletonByIndex(iSkeleton);
        }
        /**
         * Returns the {@link ComponentSkeleton} for the given skeleton index.
         */
        async getSkeletonByIndex(_iSkeleton) {
            if (!this.#skeletons)
                this.#skeletons = [];
            if (!this.#skeletons[_iSkeleton]) {
                const gltfSkin = this.#gltf.skins[_iSkeleton];
                const bones = [];
                // convert float array to array of matrices and register bones
                let mtxData;
                if (gltfSkin.inverseBindMatrices != undefined)
                    mtxData = await this.getFloat32Array(gltfSkin.inverseBindMatrices);
                const mtxDataSpan = 16; // size of matrix
                const mtxBindInverses = [];
                // iterate over joints and get corresponding matrix from float array
                for (let iBone = 0; iBone < gltfSkin.joints.length; iBone++) {
                    let mtxBindInverse;
                    if (mtxData) {
                        mtxBindInverse = new FudgeCore.Matrix4x4();
                        mtxBindInverse.set(mtxData.subarray(iBone * mtxDataSpan, iBone * mtxDataSpan + mtxDataSpan));
                    }
                    bones.push(await this.getNodeByIndex(gltfSkin.joints[iBone]));
                    mtxBindInverses.push(mtxBindInverse);
                }
                this.#skeletons[_iSkeleton] = new FudgeCore.ComponentSkeleton(bones, mtxBindInverses);
            }
            return this.#skeletons[_iSkeleton];
        }
        toString() {
            return `${GLTFLoader.name} | ${this.#url}`;
        }
        getIndex(_nameOrIndex, _array) {
            let index = typeof _nameOrIndex == "number" ?
                _nameOrIndex :
                _array.findIndex(_object => _object.name == _nameOrIndex);
            if (index == -1) {
                let arrayName = Object.entries(this.#gltf).find(([_key, _value]) => _value == _array)?.[0];
                FudgeCore.Debug.error(`${this}: Couldn't find name '${_nameOrIndex}' in glTF ${arrayName}.`);
            }
            return index;
        }
        /**
         * Returns a {@link Uint8Array} for the given accessor index.
         * @internal
         */
        async getBoneIndices(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            const componentType = this.#gltf.accessors[_iAccessor]?.componentType;
            if (componentType == GLTF.COMPONENT_TYPE.UNSIGNED_BYTE)
                return array;
            if (componentType == GLTF.COMPONENT_TYPE.UNSIGNED_SHORT) {
                FudgeCore.Debug.log(`${this}: Bone indices are stored as '${GLTF.COMPONENT_TYPE[GLTF.COMPONENT_TYPE.UNSIGNED_SHORT]}'. FUDGE will convert them to '${GLTF.COMPONENT_TYPE[GLTF.COMPONENT_TYPE.UNSIGNED_BYTE]}'. FUDGE only supports skeletons with up to 256 bones, so make sure your skeleton has no more than 256 bones.`);
                return Uint8Array.from(array);
            }
            throw new Error(`${this}: Invalid component type '${GLTF.COMPONENT_TYPE[componentType]}' for bone indices. Expected '${GLTF.COMPONENT_TYPE[GLTF.COMPONENT_TYPE.UNSIGNED_BYTE]}' or '${GLTF.COMPONENT_TYPE[GLTF.COMPONENT_TYPE.UNSIGNED_SHORT]}'.`);
        }
        /**
         * Returns a {@link Float32Array} for the given accessor index.
         * @internal
         */
        async getFloat32Array(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            const gltfAccessor = this.#gltf.accessors[_iAccessor];
            if (gltfAccessor.componentType == GLTF.COMPONENT_TYPE.FLOAT)
                return array;
            if (gltfAccessor.normalized) {
                switch (gltfAccessor.componentType) {
                    case GLTF.COMPONENT_TYPE.BYTE:
                        return Float32Array.from(array, _value => Math.max(_value / 127, -1));
                    case GLTF.COMPONENT_TYPE.UNSIGNED_BYTE:
                        return Float32Array.from(array, _value => _value / 255);
                    case GLTF.COMPONENT_TYPE.SHORT:
                        return Float32Array.from(array, _value => Math.max(_value / 32767, -1));
                    case GLTF.COMPONENT_TYPE.UNSIGNED_SHORT:
                        return Float32Array.from(array, _value => _value / 65535);
                    default:
                        throw new Error(`${this}: Invalid component type '${GLTF.COMPONENT_TYPE[gltfAccessor.componentType]}' for normalized accessor.`);
                    // https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#_accessor_normalized
                }
            }
            FudgeCore.Debug.warn(`${this}: Expected component type '${GLTF.COMPONENT_TYPE[GLTF.COMPONENT_TYPE.FLOAT]}' but was '${GLTF.COMPONENT_TYPE[gltfAccessor?.componentType]}'.`);
            return Float32Array.from(array);
        }
        /**
         * Returns a {@link Uint16Array} for the given accessor index. Only used to get the vertex indices.
         * @internal
         */
        async getVertexIndices(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            const gltfAccessor = this.#gltf.accessors[_iAccessor];
            if (gltfAccessor.componentType == GLTF.COMPONENT_TYPE.UNSIGNED_SHORT)
                return array;
            if (gltfAccessor.count > 65535 && gltfAccessor.type == "SCALAR")
                throw new Error(`${this}: File includes a mesh with more than 65535 vertices. FUDGE does not support meshes with more than 65535 vertices.`);
            if (gltfAccessor.componentType == GLTF.COMPONENT_TYPE.UNSIGNED_BYTE || gltfAccessor.componentType == GLTF.COMPONENT_TYPE.UNSIGNED_INT)
                return Uint16Array.from(array);
            FudgeCore.Debug.warn(`${this}: Expected an unsigned integer component type but was '${GLTF.COMPONENT_TYPE[this.#gltf.accessors[_iAccessor]?.componentType]}'.`);
            return Uint16Array.from(array);
        }
        /**
         * Return a {@link Float32Array} for the given accessor index. The array contains the vertex colors in RGBA format.
         * @internal
         */
        async getVertexColors(_iAccessor) {
            const array = await this.getFloat32Array(_iAccessor);
            const gltfAccessor = this.#gltf.accessors[_iAccessor];
            if (gltfAccessor.type == GLTF.ACCESSOR_TYPE.VEC3) {
                const rgbaArray = new Float32Array(array.length * 4 / 3);
                for (let iVec3 = 0, iVec4 = 0; iVec3 < array.length; iVec3 += 3, iVec4 += 4) {
                    rgbaArray[iVec4] = array[iVec3];
                    rgbaArray[iVec4 + 1] = array[iVec3 + 1];
                    rgbaArray[iVec4 + 2] = array[iVec3 + 2];
                    rgbaArray[iVec4 + 3] = 1;
                }
                return rgbaArray;
            }
            return array;
        }
        async getBufferData(_iAccessor) {
            const gltfAccessor = this.#gltf.accessors[_iAccessor];
            if (!gltfAccessor)
                throw new Error(`${this}: Couldn't find accessor with index ${_iAccessor}.`);
            let array;
            const componentType = gltfAccessor.componentType;
            const accessorType = gltfAccessor.type;
            if (gltfAccessor.bufferView != undefined)
                array = await this.getBufferViewData(this.#gltf.bufferViews[gltfAccessor.bufferView], gltfAccessor.byteOffset, componentType, accessorType);
            if (gltfAccessor.sparse) {
                const gltfBufferViewIndices = this.#gltf.bufferViews[gltfAccessor.sparse.indices.bufferView];
                const gltfBufferViewValues = this.#gltf.bufferViews[gltfAccessor.sparse.values.bufferView];
                if (!gltfBufferViewIndices || !gltfBufferViewValues)
                    throw new Error(`${this}: Couldn't find buffer views for sparse indices or values of accessor with index ${_iAccessor}.`);
                const arrayIndices = await this.getBufferViewData(gltfBufferViewIndices, gltfAccessor.sparse.indices.byteOffset, gltfAccessor.sparse.indices.componentType, GLTF.ACCESSOR_TYPE.SCALAR);
                const arrayValues = await this.getBufferViewData(gltfBufferViewValues, gltfAccessor.sparse.values.byteOffset, componentType, accessorType);
                const accessorTypeLength = toAccessorTypeLength[gltfAccessor.type];
                if (gltfAccessor.bufferView == undefined)
                    array = new toArrayConstructor[gltfAccessor.componentType](gltfAccessor.count * accessorTypeLength);
                for (let i = 0; i < gltfAccessor.sparse.count; i++) {
                    array.set(arrayValues.slice(i * accessorTypeLength, (i + 1) * accessorTypeLength), arrayIndices[i] * accessorTypeLength);
                }
            }
            return array;
        }
        async getBufferViewData(_bufferView, _byteOffset, _componentType, _accessorType) {
            const buffer = await this.getBuffer(_bufferView.buffer);
            const byteOffset = (_bufferView.byteOffset ?? 0) + (_byteOffset ?? 0);
            const byteLength = _bufferView.byteLength ?? 0;
            const byteStride = _bufferView.byteStride;
            const arrayConstructor = toArrayConstructor[_componentType];
            const array = new arrayConstructor(buffer, byteOffset, byteLength / arrayConstructor.BYTES_PER_ELEMENT);
            if (byteStride != undefined) {
                // TODO: instead of creating new buffers maybe rather pass stride into the render mesh? and set it when data is passed to the gpu?
                const nComponentsPerElement = toAccessorTypeLength[_accessorType]; // amount of components per element of the accessor type, e.g. 3 for VEC3
                const nElements = byteLength / byteStride; // amount of elements, e.g. n*VEC3 
                const stride = byteStride / arrayConstructor.BYTES_PER_ELEMENT;
                const newArray = new arrayConstructor(nElements * nComponentsPerElement);
                for (let iNewElement = 0; iNewElement < nElements; iNewElement++) {
                    const iElement = iNewElement * stride;
                    // TODO: check if loop is faster than set + slice
                    for (let iComponent = 0; iComponent < nComponentsPerElement; iComponent++)
                        newArray[iNewElement * nComponentsPerElement + iComponent] = array[iElement + iComponent];
                    // newArray.set(array.slice(iElement, iElement + nComponentsPerElement), iNewElement * nComponentsPerElement);
                }
                return newArray;
            }
            return array;
        }
        async getBuffer(_iBuffer) {
            const gltfBuffer = this.#gltf.buffers[_iBuffer];
            if (!gltfBuffer)
                throw new Error(`${this}: Couldn't find buffer with index ${_iBuffer}.`);
            if (!this.#buffers)
                this.#buffers = [];
            if (!this.#buffers[_iBuffer]) {
                const response = await fetch(new URL(gltfBuffer.uri, new URL(this.#url, FudgeCore.Project.baseURL)));
                this.#buffers[_iBuffer] = await response.arrayBuffer();
            }
            return this.#buffers[_iBuffer];
        }
        async getAnimationSequenceVector(_sampler, _transformationType) {
            const input = await this.getFloat32Array(_sampler.input);
            const output = await this.getFloat32Array(_sampler.output);
            const millisPerSecond = 1000;
            const isRotation = _transformationType == "rotation";
            const vectorLength = isRotation ? 4 : 3; // rotation is stored as quaternion
            const interpolation = this.toInternInterpolation(_sampler.interpolation);
            const isCubic = interpolation == FudgeCore.ANIMATION_INTERPOLATION.CUBIC ? true : undefined;
            const vectorsPerInput = isCubic ? 3 : 1; // cubic interpolation uses 3 values per input: in-tangent, property value and out-tangent. https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#interpolation-cubic
            // used only for rotation interpolation
            let lastRotation;
            let nextRotation;
            const sequences = { x: [], y: [], z: [] };
            if (isRotation) {
                sequences.w = [];
                lastRotation = FudgeCore.Recycler.get(FudgeCore.Quaternion);
                nextRotation = FudgeCore.Recycler.get(FudgeCore.Quaternion);
            }
            for (let iInput = 0; iInput < input.length; iInput++) {
                const iOutput = iInput * vectorsPerInput * vectorLength + (isCubic ? vectorLength : 0);
                const iOutputSlopeIn = iOutput - vectorLength;
                const iOutputSlopeOut = iOutput + vectorLength;
                const time = millisPerSecond * input[iInput];
                if (isRotation) {
                    // Take the shortest path between two rotations, i.e. if the dot product is negative then the next quaternion needs to be negated.
                    // q and -q represent the same rotation but interpolation will take either the long way or the short way around the sphere depending on which we use.
                    nextRotation.set(output[iOutput + 0], output[iOutput + 1], output[iOutput + 2], output[iOutput + 3]);
                    if (FudgeCore.Quaternion.DOT(lastRotation, nextRotation) < 0)
                        nextRotation.negate();
                    output[iOutput + 0] = nextRotation.x;
                    output[iOutput + 1] = nextRotation.y;
                    output[iOutput + 2] = nextRotation.z;
                    output[iOutput + 3] = nextRotation.w;
                    lastRotation.set(nextRotation.x, nextRotation.y, nextRotation.z, nextRotation.w);
                }
                sequences.x.push(new FudgeCore.AnimationKey(time, output[iOutput + 0], interpolation, isCubic && output[iOutputSlopeIn + 0] / millisPerSecond, isCubic && output[iOutputSlopeOut + 0] / millisPerSecond));
                sequences.y.push(new FudgeCore.AnimationKey(time, output[iOutput + 1], interpolation, isCubic && output[iOutputSlopeIn + 1] / millisPerSecond, isCubic && output[iOutputSlopeOut + 1] / millisPerSecond));
                sequences.z.push(new FudgeCore.AnimationKey(time, output[iOutput + 2], interpolation, isCubic && output[iOutputSlopeIn + 2] / millisPerSecond, isCubic && output[iOutputSlopeOut + 2] / millisPerSecond));
                if (isRotation)
                    sequences.w.push(new FudgeCore.AnimationKey(time, output[iOutput + 3], interpolation, isCubic && output[iOutputSlopeIn + 3] / millisPerSecond, isCubic && output[iOutputSlopeOut + 3] / millisPerSecond));
            }
            if (isRotation) {
                FudgeCore.Recycler.store(lastRotation);
                FudgeCore.Recycler.store(nextRotation);
            }
            return Object.fromEntries(Object.entries(sequences).map(([_key, _value]) => [_key, new FudgeCore.AnimationSequence(_value)]));
        }
        toInternInterpolation(_interpolation) {
            switch (_interpolation) {
                case "LINEAR":
                    return FudgeCore.ANIMATION_INTERPOLATION.LINEAR;
                case "STEP":
                    return FudgeCore.ANIMATION_INTERPOLATION.CONSTANT;
                case "CUBICSPLINE":
                    return FudgeCore.ANIMATION_INTERPOLATION.CUBIC;
                default:
                    if (_interpolation != undefined)
                        FudgeCore.Debug.warn(`${this}: Unknown interpolation type ${_interpolation}.`);
                    return FudgeCore.ANIMATION_INTERPOLATION.LINEAR;
            }
        }
    }
    FudgeCore.GLTFLoader = GLTFLoader;
    function getWebGLParameterName(_value) {
        return Object.keys(WebGL2RenderingContext).find(_key => Reflect.get(WebGL2RenderingContext, _key) == _value);
    }
    const toInternTransformation = {
        "translation": "translation",
        "rotation": "rotation",
        "scale": "scaling",
        "weights": "weights"
    };
    // number of components defined by 'type'
    const toAccessorTypeLength = {
        "SCALAR": 1,
        "VEC2": 2,
        "VEC3": 3,
        "VEC4": 4,
        "MAT2": 4,
        "MAT3": 9,
        "MAT4": 16
    };
    const toArrayConstructor = {
        [GLTF.COMPONENT_TYPE.UNSIGNED_BYTE]: Uint8Array,
        [GLTF.COMPONENT_TYPE.BYTE]: Int8Array,
        [GLTF.COMPONENT_TYPE.UNSIGNED_SHORT]: Uint16Array,
        [GLTF.COMPONENT_TYPE.SHORT]: Int16Array,
        [GLTF.COMPONENT_TYPE.UNSIGNED_INT]: Uint32Array,
        [GLTF.COMPONENT_TYPE.FLOAT]: Float32Array
    };
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    FudgeCore.shaderSources = {};
    FudgeCore.shaderSources["ShaderAmbientOcclusion.frag"] = /*glsl*/ `#version 300 es
/**
 * Calculates ambient occlusion for a given fragment
 * @authors Roland Heer, HFU, 2023 | Jonas Plotzky, HFU, 2023
 * adaption of https://github.com/tsherif/webgl2examples/blob/da1153a15ebc09bb13498e5f732ef2036507740c/ssao.html
 * see here for an in depth explanation: 
*/
precision mediump float;
precision highp int;

const float sin45 = 0.707107; // 45 degrees in radians
const vec2 kernel[4] = vec2[4](vec2(0.0, 1.0), vec2(1.0, 0.0), vec2(0.0, -1.0), vec2(-1.0, 0.0));

uniform float u_fNear;
uniform float u_fFar;
uniform float u_fSampleRadius;
uniform float u_fBias;
uniform float u_fAttenuationConstant;
uniform float u_fAttenuationLinear;
uniform float u_fAttenuationQuadratic;
uniform vec2 u_vctResolution;
uniform vec3 u_vctCamera;
// uniform mat4 u_mtxViewProjectionInverse;

uniform sampler2D u_texPosition;
uniform sampler2D u_texNormal;
uniform sampler2D u_texNoise;
// uniform sampler2D u_texDepth;

in vec2 v_vctTexture;
out vec4 vctFrag;

layout(std140) uniform Fog {
  bool u_bFogActive;
  float u_fFogNear;
  float u_fFogFar;
  float pading;
  vec4 u_vctFogColor;
};

// This function could be used to calculate the position from the depth texture, but mobile devices seems to lack in precision to do this
// vec3 getPosition(vec2 _vctTexture) {
//   float fDepth = texture(u_texDepth, _vctTexture).r;
//   vec4 clipSpacePosition = vec4(_vctTexture * 2.0 - 1.0, fDepth * 2.0 - 1.0, 1.0);
//   vec4 worldSpacePosition = u_mtxViewProjectionInverse * clipSpacePosition;
//   return worldSpacePosition.xyz / worldSpacePosition.w;
// }

float getOcclusion(vec3 _vctPosition, vec3 _vctNormal, vec2 _vctTexture) {
  vec3 vctOccluder = texture(u_texPosition, _vctTexture).xyz;

  if (vctOccluder.x == 0.0 && vctOccluder.y == 0.0 && vctOccluder.z == 0.0) // no occluder at this position
    return 0.0;

  vec3 vctDistance = vctOccluder - _vctPosition;
  float fIntensity = max(dot(_vctNormal, normalize(vctDistance)) - u_fBias, 0.0);

  float fDistance = length(vctDistance);
  float fAttenuation = 1.0 / (u_fAttenuationConstant + u_fAttenuationLinear * fDistance + u_fAttenuationQuadratic * fDistance * fDistance);

  return fIntensity * fAttenuation;
}

float getFog(vec3 _vctPosition) {
  float fDistance = length(_vctPosition - u_vctCamera); // maybe use z-depth instead of euclidean depth
  float fFog = clamp((fDistance - u_fFogNear) / (u_fFogFar - u_fFogNear), 0.0, 1.0);
  fFog = -pow(fFog, 2.0) + (2.0 * fFog); // lets fog appear quicker and fall off slower results in a more gradual falloff
  return fFog * u_vctFogColor.a;
}

void main() {
  vec3 vctPosition = texture(u_texPosition, v_vctTexture).xyz;
  vec3 vctNormal = texture(u_texNormal, v_vctTexture).xyz;
  vec2 vctRandom = normalize(texture(u_texNoise, v_vctTexture).xy * 2.0 - 1.0);
  float fDepth = (length(vctPosition - u_vctCamera) - u_fNear) / (u_fFar - u_fNear); // linear euclidean depth in range [0,1], when changing to view space, don't subtract camera position
  float fKernelRadius = u_fSampleRadius * (1.0 - fDepth);

  float fOcclusion = 0.0;
  for (int i = 0; i < 4; ++i) {
    vec2 vctK1 = reflect(kernel[i], vctRandom);
    vec2 vctK2 = vec2(vctK1.x * sin45 - vctK1.y * sin45, vctK1.x * sin45 + vctK1.y * sin45);

    vctK1 /= u_vctResolution;
    vctK2 /= u_vctResolution;

    vctK1 *= fKernelRadius;
    vctK2 *= fKernelRadius;

    fOcclusion += getOcclusion(vctPosition, vctNormal, v_vctTexture + vctK1);
    fOcclusion += getOcclusion(vctPosition, vctNormal, v_vctTexture + vctK2 * 0.75);
    fOcclusion += getOcclusion(vctPosition, vctNormal, v_vctTexture + vctK1 * 0.5);
    fOcclusion += getOcclusion(vctPosition, vctNormal, v_vctTexture + vctK2 * 0.25);
  }

  fOcclusion = clamp(fOcclusion / 16.0, 0.0, 1.0);

  if (u_bFogActive && fOcclusion > 0.0) // correct occlusion by fog factor
    fOcclusion = mix(fOcclusion, 0.0, getFog(vctPosition));
  
  vctFrag.rgb = vec3(fOcclusion);
  vctFrag.a = 1.0;
}`;
    FudgeCore.shaderSources["ShaderBloom.frag"] = /*glsl*/ `#version 300 es
/**
 * Extracts colors, downsamples and upsamples a texture
 * Adaption of the "dual filtering kawase" method described in SIGGRAPH 2015 by Marius Bj√∏rge
 * https://community.arm.com/cfs-file/__key/communityserver-blogs-components-weblogfiles/00-00-00-20-66/siggraph2015_2D00_mmg_2D00_marius_2D00_notes.pdf
 * @authors Roland Heer, HFU, 2023 | Jirka Dell'Oro-Friedl, HFU, 2023 | Jonas Plotzky, HFU, 2023
 */
precision mediump float;
precision highp int;

uniform int u_iMode; // 0: extract, 1: downsample, 2: upsample, 3: apply
uniform float u_fThreshold;
uniform float u_fIntensity;
uniform float u_fHighlightDesaturation;
uniform vec2 u_vctTexel;

uniform sampler2D u_texSource;

in vec2 v_vctTexture;
out vec4 vctFrag;

// old gaussian blur
// flat in vec2[9] v_vctOffsets;
// const float gaussianKernel[9] = float[](0.045, 0.122, 0.045, 0.122, 0.332, 0.122, 0.045, 0.122, 0.045);
// vec4 downsample(vec2 _vctTexture) {
//   vec4 vctColor = vec4(0.0);
//   for (int i = 0; i < 9; i++) 
//     vctColor += texture(u_texSource, v_vctTexture + v_vctOffsets[i]) * gaussianKernel[i];
//   return vctColor;
// }
// vec4 upsample(vec2 _vctTexture) {
//   vec4 vctColor = vec4(0.0);
//   for (int i = 0; i < 9; i++) 
//     vctColor += texture(u_texSource, _vctTexture + v_vctOffsets[i]) * gaussianKernel[i];
//   return vctColor;
// }

// vec3 extract(vec2 _vctTexture) {
//   vec3 vctColor = texture(u_texSource, _vctTexture).rgb;
//   if(any(greaterThan(vctColor, vec3(u_fThreshold))))
//     return vctColor;
//   discard;
// }

// vec3 extract(vec2 _vctTexture) {
//   vec3 vctColor = texture(u_texSource, _vctTexture).rgb;
//   float luminance = dot(vctColor, vec3(0.299, 0.587, 0.114));
//   if(luminance > u_fThreshold)
//     return vctColor;
//   discard;
// }

// old extraction with average brightness
vec3 extract(vec2 _vctTexture) {
  vec3 vctColor = texture(u_texSource, _vctTexture).rgb;
  float fThreshold = u_fThreshold;
  if(fThreshold >= 1.0)
    fThreshold = 0.999999;

  vctColor = vctColor - fThreshold;
  vctColor = vctColor / (1.0 - fThreshold); // negative values might receive values above 1.0...
  
  float averageBrightness = (((vctColor.r + vctColor.g + vctColor.b) / 3.0) * 0.2) + 0.8; //the effect is reduced by first setting it to a 0.0-0.2 range and then adding 0.8
  vctColor = clamp(vctColor, 0.0, 1.0) * clamp(averageBrightness, 0.0, 1.0);
  return vctColor;
}

vec4 downsample(vec2 _vctTexture) {
  vec4 sum = texture(u_texSource, _vctTexture) * 4.0;
  sum += texture(u_texSource, _vctTexture - u_vctTexel.xy);
  sum += texture(u_texSource, _vctTexture + u_vctTexel.xy);
  sum += texture(u_texSource, _vctTexture + vec2(u_vctTexel.x, -u_vctTexel.y));
  sum += texture(u_texSource, _vctTexture - vec2(u_vctTexel.x, -u_vctTexel.y));

  return sum / 8.0;
}

vec4 upsample(vec2 _vctTexture) {
  vec4 sum = texture(u_texSource, _vctTexture + vec2(-u_vctTexel.x * 2.0, 0.0));
  sum += texture(u_texSource, _vctTexture + vec2(-u_vctTexel.x, u_vctTexel.y)) * 2.0;
  sum += texture(u_texSource, _vctTexture + vec2(0.0, u_vctTexel.y * 2.0));
  sum += texture(u_texSource, _vctTexture + vec2(u_vctTexel.x, u_vctTexel.y)) * 2.0;
  sum += texture(u_texSource, _vctTexture + vec2(u_vctTexel.x * 2.0, 0.0));
  sum += texture(u_texSource, _vctTexture + vec2(u_vctTexel.x, -u_vctTexel.y)) * 2.0;
  sum += texture(u_texSource, _vctTexture + vec2(0.0, -u_vctTexel.y * 2.0));
  sum += texture(u_texSource, _vctTexture + vec2(-u_vctTexel.x, -u_vctTexel.y)) * 2.0;
  return sum / 12.0;
}

vec3 apply(vec2 _vctTexture) {
  vec3 vctBloom = texture(u_texSource, _vctTexture).rgb;
  if (vctBloom.r >= 1.0 || vctBloom.g >= 1.0 || vctBloom.b >= 1.0) // maybe use threshold instead of 1.0?
    vctBloom = mix(vctBloom, vec3(1.0), u_fHighlightDesaturation);
  vctBloom = clamp(vctBloom * u_fIntensity, 0.0, 1.0);
  return vctBloom;
}

void main() {
  switch(u_iMode) {
    case 0:
      vctFrag.rgb = extract(v_vctTexture);
      vctFrag.a = 1.0;
      return;
    case 1:
      vctFrag = downsample(v_vctTexture);
      return;
    case 2:
      vctFrag = upsample(v_vctTexture);
      return;
    case 3:
      vctFrag.rgb = apply(v_vctTexture);
      vctFrag.a = 1.0;
      return;
    default:
      vctFrag = texture(u_texSource, v_vctTexture);
      return;
  }
}`;
    FudgeCore.shaderSources["ShaderGizmo.frag"] = /*glsl*/ `#version 300 es
/**
* ...
* @authors Jonas Plotzky, HFU, 2023
*/
precision mediump float;
precision highp int;

uniform vec4 u_vctColor;

out vec4 vctFrag;

// uniform sampler2D u_texDepthStencil;
#if defined(TEXTURE)
  uniform sampler2D u_texColor;
  in vec2 v_vctTexture;
#endif

// // 4x4 Bayer matrix for dithering
// const float mtxDither[16] = float[](
//   1.0 / 17.0,  9.0 / 17.0,  3.0 / 17.0, 11.0 / 17.0,
//   13.0 / 17.0,  5.0 / 17.0, 15.0 / 17.0,  7.0 / 17.0,
//   4.0 / 17.0, 12.0 / 17.0,  2.0 / 17.0, 10.0 / 17.0,
//   16.0 / 17.0,  8.0 / 17.0, 14.0 / 17.0,  6.0 / 17.0
// );

void main() {
  vctFrag = u_vctColor;

  #if defined(TEXTURE)

      vctFrag *= texture(u_texColor, v_vctTexture);

  #endif

  // int x = int(gl_FragCoord.x) % 4;
  // int y = int(gl_FragCoord.y) % 4;
  // int index = y * 4 + x;
  // // Discard the fragment if its alpha is less than the corresponding value in the dithering matrix
  // if (vctFrag.a < mtxDither[index]) 
  //   discard;

  // // Discard the fragment if its alpha is 0
  // if (vctFrag.a == 0.0)
  //   discard;

  // // Create a checkerboard pattern for alpha values less than 0.5
  // else if (vctFrag.a < 0.5 && ((x + y) % 2 == 0))
  //   discard;

  // vctFrag.a = 1.0;

  if (vctFrag.a < 0.01)
    discard;
}`;
    FudgeCore.shaderSources["ShaderGizmo.vert"] = /*glsl*/ `#version 300 es
/**
* ...
* @authors Jonas Plotzky, HFU, 2023
*/
precision mediump float;
precision highp int;

// uniform mat4 u_mtxViewProjection;
// uniform mat4 u_mtxModel;
uniform mat4 u_mtxMeshToView; // model-view-projection matrix

in vec3 a_vctPosition;

#if defined(TEXTURE)

  in vec2 a_vctTexture;
  out vec2 v_vctTexture;

#endif

void main() {
  gl_Position = u_mtxMeshToView * vec4(a_vctPosition, 1.0);

  #if defined(TEXTURE)

    v_vctTexture = a_vctTexture;

  #endif
}`;
    FudgeCore.shaderSources["ShaderPhong.frag"] = /*glsl*/ `#version 300 es
/**
* Phong shading
* @authors Jirka Dell'Oro-Friedl, HFU, 2022 | Roland Heer, HFU, 2023 | Jonas Plotzky, HFU, 2023
*/

precision mediump float;
precision highp int;

uniform vec4 u_vctColor;
uniform float u_fDiffuse;
uniform float u_fSpecular;
uniform float u_fIntensity;
uniform float u_fMetallic;
uniform vec3 u_vctCamera;

uniform bool u_bFog;
uniform vec4 u_vctFogColor;
uniform float u_fFogNear;
uniform float u_fFogFar;

in vec4 v_vctColor;
in vec3 v_vctPosition;

layout(location = 0) out vec4 vctFrag;
layout(location = 1) out vec4 vctFragPosition;
layout(location = 2) out vec4 vctFragNormal;

#ifdef PHONG

  in vec3 v_vctNormal;

#endif

#ifdef FLAT

  flat in vec3 v_vctPositionFlat;

#endif

struct Light {
  vec4 vctColor;
  mat4 mtxShape;
  mat4 mtxShapeInverse;
};

const uint MAX_LIGHTS_DIRECTIONAL = 15u;
const uint MAX_LIGHTS_POINT = 100u;
const uint MAX_LIGHTS_SPOT = 100u;

layout(std140) uniform Lights {
  uint u_nLightsDirectional;
  uint u_nLightsPoint;
  uint u_nLightsSpot;
  uint padding; // Add padding to align to 16 bytes
  Light u_ambient;
  Light u_directional[MAX_LIGHTS_DIRECTIONAL];
  Light u_point[MAX_LIGHTS_POINT];
  Light u_spot[MAX_LIGHTS_SPOT];
};

// TEXTURE: input UVs and texture
#ifdef TEXTURE

  in vec2 v_vctTexture;
  uniform sampler2D u_texColor;

#endif

// NORMALMAP: input UVs and texture
#ifdef NORMALMAP

  in vec3 v_vctTangent;
  in vec3 v_vctBitangent;
  uniform sampler2D u_texNormal;

#endif

// Returns a vector for visualizing on model. Great for debugging
vec4 showVectorAsColor(vec3 _vector, bool _clamp) {
  if(_clamp) {
    _vector *= 0.5;
    _vector += 0.5;
  }
  return vec4(_vector.x, _vector.y, _vector.z, 1);
}

void illuminateDirected(vec3 _vctDirection, vec3 _vctView, vec3 _vctNormal, vec3 _vctColor, inout vec3 _vctDiffuse, inout vec3 _vctSpecular) {
  vec3 vctDirection = normalize(_vctDirection);
  float fIllumination = -dot(_vctNormal, vctDirection);
  if(fIllumination > 0.0) {
    _vctDiffuse += u_fDiffuse * fIllumination * _vctColor;

    if(u_fSpecular <= 0.0)
      return;
      
    //BLINN-Phong Shading
    vec3 halfwayDir = normalize(-vctDirection - _vctView);
    float factor = max(dot(-vctDirection, _vctNormal), 0.0); //Factor for smoothing out transition from surface facing the lightsource to surface facing away from the lightsource
    factor = 1.0 - (pow(factor - 1.0, 8.0));                 //The factor is altered in order to clearly see the specular highlight even at steep angles, while still preventing artifacts

    _vctSpecular += pow(max(dot(_vctNormal, halfwayDir), 0.0), exp2(u_fSpecular * 5.0)) * u_fSpecular * u_fIntensity * factor * _vctColor;
  }
}

float getFog(vec3 _vctPosition) {
  float fDistance = length(_vctPosition - u_vctCamera); // maybe use z-depth instead of euclidean depth
  float fFog = clamp((fDistance - u_fFogNear) / (u_fFogFar - u_fFogNear), 0.0, 1.0);
  fFog = -pow(fFog, 2.0) + (2.0 * fFog); // lets fog appear quicker and fall off slower results in a more gradual falloff
  return fFog;
}

void main() {
  #if defined(PHONG) && !defined(FLAT)

    #ifdef NORMALMAP

      mat3 mtxTBN = mat3(normalize(v_vctTangent), normalize(v_vctBitangent), normalize(v_vctNormal));
      vec3 vctNormal = texture(u_texNormal, v_vctTexture).xyz * 2.0 - 1.0;
      vctNormal = normalize(mtxTBN * vctNormal);

    #else

      vec3 vctNormal = normalize(v_vctNormal);

    #endif

    vec3 vctView = normalize(v_vctPosition - u_vctCamera);
    vec3 vctPosition = v_vctPosition;

  #endif

  #ifdef FLAT

    vec3 vctFdx = dFdx(v_vctPosition);
    vec3 vctFdy = dFdy(v_vctPosition);
    vec3 vctNormal = normalize(cross(vctFdx, vctFdy));
    vec3 vctView = normalize(v_vctPositionFlat - u_vctCamera);
    vec3 vctPosition = v_vctPositionFlat;

  #endif

  vec3 vctDiffuse = u_fDiffuse * u_ambient.vctColor.rgb;
  vec3 vctSpecular = vec3(0, 0, 0);

  // calculate directional light effect
  for(uint i = 0u; i < u_nLightsDirectional; i++) {
    vec3 vctDirection = vec3(u_directional[i].mtxShape * vec4(0.0, 0.0, 1.0, 1.0));
    illuminateDirected(vctDirection, vctView, vctNormal, u_directional[i].vctColor.rgb, vctDiffuse, vctSpecular);
  }

  // calculate point light effect
  for(uint i = 0u; i < u_nLightsPoint; i++) {
    vec3 vctPositionLight = vec3(u_point[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
    vec3 vctDirection = vctPosition - vctPositionLight;
    float fIntensity = 1.0 - length(mat3(u_point[i].mtxShapeInverse) * vctDirection);
    if(fIntensity < 0.0)
      continue;

    illuminateDirected(vctDirection, vctView, vctNormal, u_point[i].vctColor.rgb * fIntensity, vctDiffuse, vctSpecular);
  }

  // calculate spot light effect
  for(uint i = 0u; i < u_nLightsSpot; i++) {
    vec3 vctPositionLight = vec3(u_spot[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
    vec3 vctDirection = vctPosition - vctPositionLight;
    vec3 vctDirectionInverted = mat3(u_spot[i].mtxShapeInverse) * vctDirection;
    if(vctDirectionInverted.z <= 0.0)
      continue;

    float fIntensity = 1.0 - min(1.0, 2.0 * length(vctDirectionInverted.xy) / vctDirectionInverted.z);    //Coneshape that is brightest in the center. Possible TODO: "Variable Spotlightsoftness"
    fIntensity *= 1.0 - pow(vctDirectionInverted.z, 2.0);                                                 //Prevents harsh lighting artifacts at boundary of the given spotlight
    if(fIntensity < 0.0)
      continue;

    illuminateDirected(vctDirection, vctView, vctNormal, u_spot[i].vctColor.rgb * fIntensity, vctDiffuse, vctSpecular);
  }

  vctFrag.rgb = vctDiffuse + vctSpecular * u_fMetallic;
  vctFrag.a = 1.0;

  #ifdef TEXTURE

    vec4 vctColorTexture = texture(u_texColor, v_vctTexture);
    vctFrag *= vctColorTexture;

  #endif

  vctFrag *= u_vctColor * v_vctColor;
  vctFrag.rgb += vctSpecular * (1.0 - u_fMetallic);

  vctFragPosition = vec4(v_vctPosition, 1.0); // don't use flat here, because we want to interpolate the position
  vctFragNormal = vec4(vctNormal, 1.0);

  if (u_bFog) 
    vctFrag.rgb = mix(vctFrag.rgb, u_vctFogColor.rgb, getFog(vctPosition) * u_vctFogColor.a);

  vctFrag.rgb *= vctFrag.a;

  if(vctFrag.a < 0.01)
    discard;
}`;
    FudgeCore.shaderSources["ShaderPick.frag"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
precision mediump float;
precision highp int;

uniform int u_id;
uniform vec2 u_vctSize;
uniform vec4 u_vctColor;
out ivec4 vctFrag;

void main() {
    int pixel = int(trunc(gl_FragCoord.x) + u_vctSize.x * trunc(gl_FragCoord.y));

    if (pixel != u_id)
      discard;

    uint icolor = uint(u_vctColor.r * 255.0) << 24 | uint(u_vctColor.g * 255.0) << 16 | uint(u_vctColor.b * 255.0) << 8 | uint(u_vctColor.a * 255.0);
                
    vctFrag = ivec4(floatBitsToInt(gl_FragCoord.z), icolor, 0, 0);
}`;
    FudgeCore.shaderSources["ShaderPick.vert"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
in vec3 a_vctPosition;       
uniform mat4 u_mtxMeshToView;

void main() {   
    gl_Position = u_mtxMeshToView * vec4(a_vctPosition, 1.0);
}`;
    FudgeCore.shaderSources["ShaderPickTextured.frag"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
precision mediump float;
precision highp int;

uniform int u_id;
uniform vec2 u_vctSize;
in vec2 v_vctTexture;
uniform vec4 u_vctColor;
uniform sampler2D u_texColor;

out ivec4 vctFrag;

void main() {
  int pixel = int(trunc(gl_FragCoord.x) + u_vctSize.x * trunc(gl_FragCoord.y));

  if (pixel != u_id)
    discard;
  
  vec4 vctColor = u_vctColor * texture(u_texColor, v_vctTexture);
  uint icolor = uint(vctColor.r * 255.0) << 24 | uint(vctColor.g * 255.0) << 16 | uint(vctColor.b * 255.0) << 8 | uint(vctColor.a * 255.0);
  
  vctFrag = ivec4(floatBitsToInt(gl_FragCoord.z), icolor, floatBitsToInt(v_vctTexture.x), floatBitsToInt(v_vctTexture.y));
}`;
    FudgeCore.shaderSources["ShaderPickTextured.vert"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
in vec3 a_vctPosition;       
in vec2 a_vctTexture;
uniform mat4 u_mtxMeshToView;
uniform mat3 u_mtxPivot;

out vec2 v_vctTexture;

void main() {   
  gl_Position = u_mtxMeshToView * vec4(a_vctPosition, 1.0);
  v_vctTexture = (u_mtxPivot * vec3(a_vctTexture, 1.0)).xy;
}`;
    FudgeCore.shaderSources["ShaderScreen.vert"] = /*glsl*/ `#version 300 es
precision mediump float;
precision highp int;
/**
 * Creates a fullscreen triangle which cotains the screen quad and sets the texture coordinates accordingly.
 * @authors Roland Heer, HFU, 2023 | Jirka Dell'Oro-Friedl, HFU, 2023 | Jonas Plotzky, HFU, 2023
 *
 *  2  3 .
 *       .  .
 *       .     .  
 *       .        .
 *  1  1 ..........  .
 *       . screen .     .
 *       .  quad  .        .
 *  0 -1 ..........  .  .  .  .
 *    p -1        1           3
 *  t    0        1           2
 *  
 *  p == postion
 *  t == texture coordinate
 */

uniform float u_width;
uniform float u_height;
uniform vec2 u_vctResolution;

out vec2 v_vctTexture;

#ifdef SAMPLE

  flat out vec2[9] v_vctOffsets;

#endif

void main() {
  float x = float((gl_VertexID % 2) * 4); // 0, 4, 0
  float y = float((gl_VertexID / 2) * 4); // 0, 0, 4
  gl_Position = vec4(x - 1.0, y - 1.0, 0.0, 1.0); // (-1, -1), (3, -1), (-1, 3)
  v_vctTexture = vec2(x / 2.0, y / 2.0);  // (0, 0), (2, 0), (0, 2) -> interpolation will yield (0, 0), (1, 0), (0, 1) as the positions are double the size of the screen

  #ifdef SAMPLE

    vec2 offset = vec2(1.0 / u_vctResolution.x, 1.0 / u_vctResolution.y);
    v_vctOffsets = vec2[](
      vec2(-offset.x, offset.y),  vec2(0.0, offset.y),  vec2(offset.x, offset.y),
      vec2(-offset.x, 0.0),       vec2(0.0, 0.0),       vec2(offset.x, 0.0),
      vec2(-offset.x, -offset.y), vec2(0.0, -offset.y),  vec2(offset.x, -offset.y)
    );

  #endif
}`;
    FudgeCore.shaderSources["ShaderUniversal.frag"] = /*glsl*/ `#version 300 es
/**
* Universal Shader as base for many others. Controlled by compiler directives
* @authors Jirka Dell'Oro-Friedl, HFU, 2021 | Jonas Plotzky, HFU, 2023
*/
precision mediump float;
precision highp int;

// MINIMAL
uniform vec4 u_vctColor;
uniform vec3 u_vctCamera; // needed for fog
uniform float u_fAlphaClip;

layout(std140) uniform Fog {
  bool u_bFogActive;
  float u_fFogNear;
  float u_fFogFar;
  float fogPadding; // add padding to align to 16 bytes
  vec4 u_vctFogColor;
};

in vec3 v_vctPosition;
in vec4 v_vctColor;

layout(location = 0) out vec4 vctFrag;
layout(location = 1) out vec4 vctFragPosition; // TODO: make these optional?
layout(location = 2) out vec4 vctFragNormal;

#if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

  in vec3 v_vctNormal;

#endif

#if defined(FLAT)

  flat in vec3 v_vctPositionFlat;

#endif

#if defined(GOURAUD)

  uniform float u_fMetallic;
  in vec3 v_vctDiffuse;
  in vec3 v_vctSpecular;

#endif

#if defined(TOON)

  uniform sampler2D u_texToon;

#endif

#if defined(PHONG) || defined(FLAT)

  uniform float u_fDiffuse;
  uniform float u_fSpecular;
  uniform float u_fIntensity;
  uniform float u_fMetallic;

  struct Light {
    vec4 vctColor;
    mat4 mtxShape;
    mat4 mtxShapeInverse;
  };

  const uint MAX_LIGHTS_DIRECTIONAL = 15u;
  const uint MAX_LIGHTS_POINT = 100u;
  const uint MAX_LIGHTS_SPOT = 100u;

  layout(std140) uniform Lights {
    uint u_nLightsDirectional;
    uint u_nLightsPoint;
    uint u_nLightsSpot;
    uint ligthsPadding; // Add padding to align to 16 bytes
    Light u_ambient;
    Light u_directional[MAX_LIGHTS_DIRECTIONAL];
    Light u_point[MAX_LIGHTS_POINT];
    Light u_spot[MAX_LIGHTS_SPOT];
  };

  void illuminateDirected(vec3 _vctDirection, vec3 _vctView, vec3 _vctNormal, vec3 _vctColor, inout vec3 _vctDiffuse, inout vec3 _vctSpecular) {
    vec3 vctDirection = normalize(_vctDirection);
    float fDiffuse = -dot(_vctNormal, vctDirection);

    #if defined(TOON)
      
      fDiffuse = texture(u_texToon, vec2(fDiffuse, 0)).r;

    #endif

    if(fDiffuse > 0.0) {

      _vctDiffuse += u_fDiffuse * fDiffuse * _vctColor;

      if(u_fSpecular <= 0.0)
        return;
        
      //BLINN-Phong Shading
      vec3 halfwayDir = normalize(-vctDirection - _vctView);
      float factor = max(dot(-vctDirection, _vctNormal), 0.0); //Factor for smoothing out transition from surface facing the lightsource to surface facing away from the lightsource
      factor = 1.0 - (pow(factor - 1.0, 8.0));                 //The factor is altered in order to clearly see the specular highlight even at steep angles, while still preventing artifacts

      float fSpecular = pow(max(dot(_vctNormal, halfwayDir), 0.0), exp2(u_fSpecular * 5.0)) * factor; 

      #if defined(TOON)
        
        fSpecular = texture(u_texToon, vec2(fSpecular, 0.0)).g * fDiffuse;

      #endif

      _vctSpecular += fSpecular * u_fSpecular * u_fIntensity * _vctColor;
    }
  }

#endif

#if defined(TEXTURE) || defined(MATCAP)

  uniform sampler2D u_texColor;
  in vec2 v_vctTexture;

#endif

#if defined(NORMALMAP)

  uniform sampler2D u_texNormal;
  in vec3 v_vctTangent;
  in vec3 v_vctBitangent;

#endif

#if defined(PARTICLE)

  uniform int u_iBlendMode;

#endif

float getFog(vec3 _vctPosition) {
  float fDistance = length(_vctPosition - u_vctCamera); // maybe use z-depth instead of euclidean depth
  float fFog = clamp((fDistance - u_fFogNear) / (u_fFogFar - u_fFogNear), 0.0, 1.0);
  fFog = -pow(fFog, 2.0) + (2.0 * fFog); // lets fog appear quicker and fall off slower results in a more gradual falloff
  return fFog * u_vctFogColor.a;
}

void main() {

  #if defined(FLAT)

    vec3 vctFdx = dFdx(v_vctPosition);
    vec3 vctFdy = dFdy(v_vctPosition);
    vec3 vctNormal = normalize(cross(vctFdx, vctFdy));
    vec3 vctView = normalize(v_vctPositionFlat - u_vctCamera);
    vec3 vctPosition = v_vctPositionFlat;

  #endif

  #if (defined(PHONG) || defined(GOURAUD)) && !defined(NORMALMAP)

    vec3 vctNormal = normalize(v_vctNormal);

  #endif

  #if defined(PHONG)

    vec3 vctView = normalize(v_vctPosition - u_vctCamera);
    vec3 vctPosition = v_vctPosition;

  #endif

  #if defined(NORMALMAP)

    mat3 mtxTBN = mat3(normalize(v_vctTangent), normalize(v_vctBitangent), normalize(v_vctNormal));
    vec3 vctNormal = texture(u_texNormal, v_vctTexture).xyz * 2.0 - 1.0;
    vctNormal = normalize(mtxTBN * vctNormal);

  #endif
  
  #if defined(FLAT) || defined(PHONG)

    vec3 vctDiffuse = u_fDiffuse * u_ambient.vctColor.rgb;
    vec3 vctSpecular = vec3(0, 0, 0);

    // directional lights
    for(uint i = 0u; i < u_nLightsDirectional; i++) {
      vec3 vctDirection = vec3(u_directional[i].mtxShape * vec4(0.0, 0.0, 1.0, 1.0));
      illuminateDirected(vctDirection, vctView, vctNormal, u_directional[i].vctColor.rgb, vctDiffuse, vctSpecular);
    }

    // point lights
    for(uint i = 0u; i < u_nLightsPoint; i++) {
      vec3 vctPositionLight = vec3(u_point[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
      vec3 vctDirection = vctPosition - vctPositionLight;
      float fIntensity = 1.0 - length(mat3(u_point[i].mtxShapeInverse) * vctDirection);
      if(fIntensity < 0.0)
        continue;

      illuminateDirected(vctDirection, vctView, vctNormal, u_point[i].vctColor.rgb * fIntensity, vctDiffuse, vctSpecular);
    }

    // spot lights
    for(uint i = 0u; i < u_nLightsSpot; i++) {
      vec3 vctPositionLight = vec3(u_spot[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
      vec3 vctDirection = vctPosition - vctPositionLight;
      vec3 vctDirectionInverted = mat3(u_spot[i].mtxShapeInverse) * vctDirection;
      if(vctDirectionInverted.z <= 0.0)
        continue;

      float fIntensity = 1.0 - min(1.0, 2.0 * length(vctDirectionInverted.xy) / vctDirectionInverted.z);    //Coneshape that is brightest in the center. Possible TODO: "Variable Spotlightsoftness"
      fIntensity *= 1.0 - pow(vctDirectionInverted.z, 2.0);                                                 //Prevents harsh lighting artifacts at boundary of the given spotlight
      if(fIntensity < 0.0)
        continue;

      illuminateDirected(vctDirection, vctView, vctNormal, u_spot[i].vctColor.rgb * fIntensity, vctDiffuse, vctSpecular);
    }

  #endif

  vec4 vctColor = u_vctColor * v_vctColor;

  #if defined(GOURAUD)

    vec3 vctDiffuse = v_vctDiffuse;
    vec3 vctSpecular = v_vctSpecular;

  #endif

  #if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

    vctFrag.rgb = vctDiffuse + vctSpecular * u_fMetallic;
    vctFrag.a = 1.0;

  #else

    // MINIMAL: set the base color
    vctFrag = vctColor;

  #endif

  #if defined(TEXTURE) || defined(MATCAP)
    
    // TEXTURE: multiply with texel color
    vec4 vctColorTexture = texture(u_texColor, v_vctTexture); // has premultiplied alpha by webgl for correct filtering
    if (vctColorTexture.a > 0.0) // unpremultiply alpha
      vctColorTexture.rgb /= vctColorTexture.a; 
    vctFrag *= vctColorTexture;

  #endif

  #if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

    vctFrag *= vctColor;
    vctFrag.rgb += vctSpecular * (1.0 - u_fMetallic);

    vctFragPosition = vec4(v_vctPosition, 1.0);
    vctFragNormal = vec4(vctNormal, 1.0);
  
  #endif

  #if !defined(PHONG) && !defined(FLAT) && !defined(GOURAUD) // MINIMAL

    vctFragPosition = vec4(0.0, 0.0, 0.0, 1.0); // (0, 0, 0) will treat occluders as non existing in ssao
    vctFragNormal = vec4(0.0, 0.0, 0.0, 1.0); // (0, 0, 0) normal will yield not occlusion in ssao
  
  #endif

  // discard pixel alltogether when transparent: don't show in Z-Buffer
  if(vctFrag.a < u_fAlphaClip)
    discard;

  if (u_bFogActive) {
    float fFog = getFog(v_vctPosition);
    vctFrag.rgb = mix(vctFrag.rgb, u_vctFogColor.rgb, fFog);

    #if defined(PARTICLE)

      if (u_iBlendMode == 2 || u_iBlendMode == 3 || u_iBlendMode == 4)  // for blend additive, subtractive, modulate
        vctFrag.a = mix(vctFrag.a, 0.0, fFog);                          // fade out particle when in fog to make it disappear completely

    #endif
  }
}`;
    FudgeCore.shaderSources["ShaderUniversal.vert"] = /*glsl*/ `#version 300 es
/**
* Universal Shader as base for many others. Controlled by compiler directives
* @authors 2021, Luis Keck, HFU, 2021 | Jirka Dell'Oro-Friedl, HFU, 2021 | Jonas Plotzky, HFU, 2023
*/
precision mediump float;
precision highp int;

uniform mat4 u_mtxMeshToWorld; // needed for FOG
uniform mat4 u_mtxMeshToView;

in vec3 a_vctPosition;
in vec4 a_vctColor; // TODO: think about making vertex color optional

out vec3 v_vctPosition;
out vec4 v_vctColor;

#if defined(FLAT) || defined(GOURAUD) || defined(PHONG) || defined(PARTICLE) || defined(MATCAP)

  uniform vec3 u_vctCamera;

#endif

#if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

  uniform mat4 u_mtxNormalMeshToWorld;

  in vec3 a_vctNormal;
  out vec3 v_vctNormal;

#endif

#if defined(FLAT)

  flat out vec3 v_vctPositionFlat;

#endif

#if defined(GOURAUD)

  uniform float u_fDiffuse;
  uniform float u_fSpecular;
  uniform float u_fIntensity;

  out vec3 v_vctDiffuse;
  out vec3 v_vctSpecular;

  struct Light {
    vec4 vctColor;
    mat4 mtxShape;
    mat4 mtxShapeInverse;
  };

  const uint MAX_LIGHTS_DIRECTIONAL = 15u;
  const uint MAX_LIGHTS_POINT = 100u;
  const uint MAX_LIGHTS_SPOT = 100u;

  layout(std140) uniform Lights {
    uint u_nLightsDirectional;
    uint u_nLightsPoint;
    uint u_nLightsSpot;
    uint padding; // Add padding to align to 16 bytes
    Light u_ambient;
    Light u_directional[MAX_LIGHTS_DIRECTIONAL];
    Light u_point[MAX_LIGHTS_POINT];
    Light u_spot[MAX_LIGHTS_SPOT];
  };

  void illuminateDirected(vec3 _vctDirection, vec3 _vctView, vec3 _vctNormal, vec3 _vctColor, inout vec3 _vctDiffuse, inout vec3 _vctSpecular) {
    vec3 vctDirection = normalize(_vctDirection);
    float fIllumination = -dot(_vctNormal, vctDirection);
    if(fIllumination > 0.0) {
      _vctDiffuse += u_fDiffuse * fIllumination * _vctColor;

      if(u_fSpecular <= 0.0)
        return;

      //BLINN
      vec3 halfwayDir = normalize(-vctDirection - _vctView);
      float factor = max(dot(-vctDirection, _vctNormal), 0.0); //Factor for smoothing out transition from surface facing the lightsource to surface facing away from the lightsource
      factor = 1.0 - (pow(factor - 1.0, 8.0));                 //The factor is altered in order to clearly see the specular highlight even at steep angles, while still preventing artifacts

      _vctSpecular += pow(max(dot(_vctNormal, halfwayDir), 0.0), exp2(u_fSpecular * 5.0)) * u_fSpecular * u_fIntensity * factor * _vctColor;

      //PHONG (old)
      // vec3 vctReflection = normalize(reflect(-vctDirection, _vctNormal));
      // float fHitCamera = dot(vctReflection, _vctView);
      // _vctSpecular += pow(max(fHitCamera, 0.0), u_fSpecular * 10.0) * u_fSpecular * _vctColor; // 10.0 = magic number, looks good... 
    }
  }

#endif

#if defined(TEXTURE) || defined(NORMALMAP)

  uniform mat3 u_mtxPivot;

  in vec2 a_vctTexture;
  out vec2 v_vctTexture;

#endif

#if defined(NORMALMAP)

  in vec4 a_vctTangent;
  out vec3 v_vctTangent;
  out vec3 v_vctBitangent;

#endif

// MATCAP: offer buffers for UVs and pivot matrix
#if defined(MATCAP) // MatCap-shader generates texture coordinates from surface normals
  
  uniform mat4 u_mtxWorldToCamera;
  uniform mat4 u_mtxNormalMeshToWorld;

  in vec3 a_vctNormal;
  out vec2 v_vctTexture;

#endif

#if defined(SKIN)

  // Bones https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js
  uniform mat4 u_mtxWorldToView;
  in uvec4 a_vctBones;
  in vec4 a_vctWeights;

  const uint MAX_BONES = 256u; // CAUTION: this number must be the same as in RenderInjectorSkeletonInstance where the corresponding buffers are created
  layout(std140) uniform Skin {
    mat4 u_mtxBones[MAX_BONES];
  };

#endif

#if defined(PARTICLE)

  uniform mat4 u_mtxWorldToView;
  uniform float u_fParticleSystemDuration;
  uniform float u_fParticleSystemSize;
  uniform float u_fParticleSystemTime;
  uniform sampler2D u_particleSystemRandomNumbers;
  uniform bool u_bParticleSystemFaceCamera;
  uniform bool u_bParticleSystemRestrict;

  mat4 lookAt(vec3 _vctTranslation, vec3 _vctTarget) {
    vec3 vctUp = vec3(0.0, 1.0, 0.0);
    vec3 zAxis = normalize(_vctTarget - _vctTranslation);
    vec3 xAxis = normalize(cross(vctUp, zAxis));
    vec3 yAxis = u_bParticleSystemRestrict ? vctUp : normalize(cross(zAxis, xAxis));
    zAxis = u_bParticleSystemRestrict ? normalize(cross(xAxis, vctUp)) : zAxis;

    return mat4(xAxis.x, xAxis.y, xAxis.z, 0.0, yAxis.x, yAxis.y, yAxis.z, 0.0, zAxis.x, zAxis.y, zAxis.z, 0.0, _vctTranslation.x, _vctTranslation.y, _vctTranslation.z, 1.0);
  }

  float fetchRandomNumber(int _iIndex, int _iParticleSystemRandomNumbersSize, int _iParticleSystemRandomNumbersLength) {
    _iIndex = _iIndex % _iParticleSystemRandomNumbersLength;
    return texelFetch(u_particleSystemRandomNumbers, ivec2(_iIndex % _iParticleSystemRandomNumbersSize, _iIndex / _iParticleSystemRandomNumbersSize), 0).r;
  }

#endif

void main() {

  vec4 vctPosition = vec4(a_vctPosition, 1.0);
  mat4 mtxMeshToWorld = u_mtxMeshToWorld;
  mat4 mtxMeshToView = u_mtxMeshToView;

  #if defined(FLAT) || defined(GOURAUD) || defined(PHONG) // only these work with particle and skinning

    mat4 mtxNormalMeshToWorld = u_mtxNormalMeshToWorld;

  #endif

  #if defined(PARTICLE)
  
    float fParticleId = float(gl_InstanceID);
    int iParticleSystemRandomNumbersSize = textureSize(u_particleSystemRandomNumbers, 0).x; // the dimension of the quadratic texture
    int iParticleSystemRandomNumbersLength = iParticleSystemRandomNumbersSize * iParticleSystemRandomNumbersSize; // the total number of texels in the texture
    /*$variables*/
    /*$mtxLocal*/
    /*$mtxWorld*/
    mtxMeshToWorld = /*$mtxWorld*/ mtxMeshToWorld /*$mtxLocal*/;
    if(u_bParticleSystemFaceCamera) mtxMeshToWorld = lookAt(vec3(mtxMeshToWorld[3][0], mtxMeshToWorld[3][1], mtxMeshToWorld[3][2]), u_vctCamera) *
      mat4(length(vec3(mtxMeshToWorld[0][0], mtxMeshToWorld[1][0], mtxMeshToWorld[2][0])), 0.0, 0.0, 0.0, 0.0, length(vec3(mtxMeshToWorld[0][1], mtxMeshToWorld[1][1], mtxMeshToWorld[2][1])), 0.0, 0.0, 0.0, 0.0, length(vec3(mtxMeshToWorld[0][2], mtxMeshToWorld[1][2], mtxMeshToWorld[2][2])), 0.0, 0.0, 0.0, 0.0, 1.0);
    mtxMeshToView = u_mtxWorldToView * mtxMeshToWorld;

    #if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

      mtxNormalMeshToWorld = transpose(inverse(mtxMeshToWorld));

    #endif

  #endif

  #if defined(SKIN)

    mtxMeshToWorld = a_vctWeights.x * u_mtxBones[a_vctBones.x] +
      a_vctWeights.y * u_mtxBones[a_vctBones.y] +
      a_vctWeights.z * u_mtxBones[a_vctBones.z] +
      a_vctWeights.w * u_mtxBones[a_vctBones.w];

    mtxMeshToView = u_mtxWorldToView * mtxMeshToWorld;

    #if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

      mtxNormalMeshToWorld = transpose(inverse(mtxMeshToWorld));

    #endif

  #endif

  gl_Position = mtxMeshToView * vctPosition; 
  vctPosition = mtxMeshToWorld * vctPosition;

  v_vctColor = a_vctColor;
  v_vctPosition = vctPosition.xyz;

  #if defined(PARTICLE_COLOR)

    v_vctColor *= /*$color*/;

  #endif

  #if defined(FLAT)

    v_vctPositionFlat = v_vctPosition;
    
  #endif

  #if defined(FLAT) || defined(GOURAUD) || defined(PHONG)

    v_vctNormal = mat3(mtxNormalMeshToWorld) * a_vctNormal; // unnormalized as it must be normalized in the fragment shader anyway

  #endif 

  #if defined(NORMALMAP)

    v_vctTangent = mat3(mtxNormalMeshToWorld) * a_vctTangent.xyz;
    v_vctBitangent = cross(v_vctNormal, v_vctTangent) * a_vctTangent.w;

  #endif

  #if defined(GOURAUD)
  
    vec3 vctView = normalize(vctPosition.xyz - u_vctCamera);
    vec3 vctNormal = normalize(v_vctNormal);
    v_vctDiffuse = u_fDiffuse * u_ambient.vctColor.rgb;
    v_vctSpecular = vec3(0, 0, 0);

    // calculate directional light effect
    for(uint i = 0u; i < u_nLightsDirectional; i ++) {
      vec3 vctDirection = vec3(u_directional[i].mtxShape * vec4(0.0, 0.0, 1.0, 1.0));
      illuminateDirected(vctDirection, vctView, vctNormal, u_directional[i].vctColor.rgb, v_vctDiffuse, v_vctSpecular);
    }

    // calculate point light effect
    for(uint i = 0u;i < u_nLightsPoint;i ++) {
      vec3 vctPositionLight = vec3(u_point[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
      vec3 vctDirection = vctPosition.xyz - vctPositionLight;
      float fIntensity = 1.0 - length(mat3(u_point[i].mtxShapeInverse) * vctDirection);
      if(fIntensity < 0.0) continue;

      illuminateDirected(vctDirection, vctView, vctNormal, u_point[i].vctColor.rgb * fIntensity, v_vctDiffuse, v_vctSpecular);
    }

    // calculate spot light effect
    for(uint i = 0u;i < u_nLightsSpot;i ++) {
      vec3 vctPositionLight = vec3(u_spot[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
      vec3 vctDirection = vctPosition.xyz - vctPositionLight;
      vec3 vctDirectionInverted = mat3(u_spot[i].mtxShapeInverse) * vctDirection;
      if(vctDirectionInverted.z <= 0.0) continue;

      float fIntensity = 1.0 - min(1.0, 2.0 * length(vctDirectionInverted.xy) / vctDirectionInverted.z);    //Coneshape that is brightest in the center. Possible TODO: "Variable Spotlightsoftness"
      fIntensity *= 1.0 - pow(vctDirectionInverted.z, 2.0);                                                 //Prevents harsh lighting artifacts at boundary of the given spotlight
      if(fIntensity < 0.0) continue;

      illuminateDirected(vctDirection, vctView, vctNormal, u_spot[i].vctColor.rgb * fIntensity, v_vctDiffuse, v_vctSpecular);
    }

  #endif

    // TEXTURE: transform UVs
  #if defined(TEXTURE) || defined(NORMALMAP)

    v_vctTexture = vec2(u_mtxPivot * vec3(a_vctTexture, 1.0)).xy;

  #endif

  #if defined(MATCAP)

    vec4 vctVertexInCamera = normalize(u_mtxWorldToCamera * vctPosition);
    vctVertexInCamera.xy *= - 1.0;
    mat4 mtx_RotX = mat4(1, 0, 0, 0, 0, vctVertexInCamera.z, vctVertexInCamera.y, 0, 0, - vctVertexInCamera.y, vctVertexInCamera.z, 0, 0, 0, 0, 1);
    mat4 mtx_RotY = mat4(vctVertexInCamera.z, 0, - vctVertexInCamera.x, 0, 0, 1, 0, 0, vctVertexInCamera.x, 0, vctVertexInCamera.z, 0, 0, 0, 0, 1);

    vec3 vctNormal = mat3(u_mtxNormalMeshToWorld) * a_vctNormal;

    // adds correction for things being far and to the side, but distortion for things being close
    vctNormal = mat3(mtx_RotX * mtx_RotY) * vctNormal;

    vec3 vctReflection = normalize(mat3(u_mtxWorldToCamera) * normalize(vctNormal));
    vctReflection.y = - vctReflection.y;

    v_vctTexture = 0.5 * vctReflection.xy + 0.5;

  #endif
}`;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Coat/Coat.ts"/>
var FudgeCore;
// / <reference path="../Coat/Coat.ts"/>
(function (FudgeCore) {
    /**
     * Static superclass for the representation of WebGl shaderprograms.
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    // TODO: define attribute/uniforms as layout and use those consistently in shaders
    let Shader = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorShader).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        var Shader = class {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                Shader = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
            }
            /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
            static { this.baseClass = Shader; }
            /** list of all the subclasses derived from this class, if they registered properly*/
            static { this.subclasses = []; }
            /** The type of coat that can be used with this shader to create a material */
            static getCoat() { return FudgeCore.CoatColored; }
            /** Returns the vertex shader source code for the render engine */
            static getVertexShaderSource() {
                return this.insertDefines(FudgeCore.shaderSources["ShaderUniversal.vert"], this.define);
            }
            /** Returns the fragment shader source code for the render engine */
            static getFragmentShaderSource() {
                return this.insertDefines(FudgeCore.shaderSources["ShaderUniversal.frag"], this.define);
            }
            /** @internal Injected by {@link RenderInjectorShader}. Used by the render system. */
            static deleteProgram() { }
            /** @internal Injected by {@link RenderInjectorShader}. Used by the render system. */
            static useProgram() { }
            /** @internal Injected by {@link RenderInjectorShader}. Used by the render system. */ // TODO: maybe don't flag this as internal, so shaders can be precompiled in future FUDGE apps. Or create an API to precompile shaders, load textures etc.
            static createProgram() { }
            static registerSubclass(_subclass) { return Shader.subclasses.push(_subclass) - 1; }
            // replace the mandatory header of the shader with itself plus the definitions given
            static insertDefines(_shader, _defines) {
                if (!_defines)
                    return _shader;
                let code = "#version 300 es\n";
                for (let define of _defines)
                    code += `#define ${define}\n`;
                return _shader.replace("#version 300 es", code);
            }
            static {
                __runInitializers(_classThis, _classExtraInitializers);
            }
        };
        return Shader = _classThis;
    })();
    FudgeCore.Shader = Shader;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderAmbientOcclusion extends FudgeCore.Shader {
        static { this.define = []; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderScreen.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderAmbientOcclusion.frag"], this.define);
        }
    }
    FudgeCore.ShaderAmbientOcclusion = ShaderAmbientOcclusion;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderBloom extends FudgeCore.Shader {
        static { this.define = []; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderScreen.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderBloom.frag"], this.define);
        }
    }
    FudgeCore.ShaderBloom = ShaderBloom;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlat extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlat); }
        static { this.define = [
            "FLAT"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    FudgeCore.ShaderFlat = ShaderFlat;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlatSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlatSkin); }
        static { this.define = [
            "FLAT",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    FudgeCore.ShaderFlatSkin = ShaderFlatSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlatTextured extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlatTextured); }
        static { this.define = [
            "FLAT",
            "TEXTURE"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    FudgeCore.ShaderFlatTextured = ShaderFlatTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlatTexturedSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlatTexturedSkin); }
        static { this.define = [
            "FLAT",
            "TEXTURE",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    FudgeCore.ShaderFlatTexturedSkin = ShaderFlatTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGizmo extends FudgeCore.Shader {
        static { this.define = []; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderGizmo.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderGizmo.frag"], this.define);
        }
    }
    FudgeCore.ShaderGizmo = ShaderGizmo;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGizmoTextured extends FudgeCore.Shader {
        static { this.define = ["TEXTURE"]; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderGizmo.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderGizmo.frag"], this.define);
        }
    }
    FudgeCore.ShaderGizmoTextured = ShaderGizmoTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraud extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraud); }
        static { this.define = [
            "GOURAUD"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    FudgeCore.ShaderGouraud = ShaderGouraud;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraudSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraudSkin); }
        static { this.define = [
            "GOURAUD",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    FudgeCore.ShaderGouraudSkin = ShaderGouraudSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraudTextured extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraudTextured); }
        static { this.define = [
            "GOURAUD",
            "TEXTURE"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    FudgeCore.ShaderGouraudTextured = ShaderGouraudTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraudTexturedSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraudTexturedSkin); }
        static { this.define = [
            "GOURAUD",
            "TEXTURE",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    FudgeCore.ShaderGouraudTexturedSkin = ShaderGouraudTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLit extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLit); }
        static { this.define = []; }
    }
    FudgeCore.ShaderLit = ShaderLit;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLitSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLitSkin); }
        static { this.define = [
            "SKIN"
        ]; }
    }
    FudgeCore.ShaderLitSkin = ShaderLitSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLitTextured extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLitTextured); }
        static { this.define = [
            "TEXTURE"
        ]; }
        static getCoat() { return FudgeCore.CoatTextured; }
    }
    FudgeCore.ShaderLitTextured = ShaderLitTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLitTexturedSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLitTexturedSkin); }
        static { this.define = [
            "TEXTURE",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatTextured; }
    }
    FudgeCore.ShaderLitTexturedSkin = ShaderLitTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderMatCap extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderMatCap); }
        static { this.define = [
            "MATCAP"
        ]; }
        static getCoat() { return FudgeCore.CoatTextured; }
    }
    FudgeCore.ShaderMatCap = ShaderMatCap;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhong extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhong); }
        static { this.define = [
            "PHONG"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    FudgeCore.ShaderPhong = ShaderPhong;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongSkin); }
        static { this.define = [
            "PHONG",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    FudgeCore.ShaderPhongSkin = ShaderPhongSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongTextured extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongTextured); }
        static { this.define = [
            "PHONG",
            "TEXTURE"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    FudgeCore.ShaderPhongTextured = ShaderPhongTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongTexturedNormals extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongTexturedNormals); }
        static { this.define = [
            "PHONG",
            "TEXTURE",
            "NORMALMAP"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTexturedNormals; }
    }
    FudgeCore.ShaderPhongTexturedNormals = ShaderPhongTexturedNormals;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongTexturedNormalsSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongTexturedNormalsSkin); }
        static { this.define = [
            "PHONG",
            "TEXTURE",
            "NORMALMAP",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTexturedNormals; }
    }
    FudgeCore.ShaderPhongTexturedNormalsSkin = ShaderPhongTexturedNormalsSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongTexturedSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongTexturedSkin); }
        static { this.define = [
            "PHONG",
            "TEXTURE",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    FudgeCore.ShaderPhongTexturedSkin = ShaderPhongTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPick extends FudgeCore.Shader {
        static { this.define = []; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPick.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPick.frag"], this.define);
        }
    }
    FudgeCore.ShaderPick = ShaderPick;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPickTextured extends FudgeCore.Shader {
        static { this.define = []; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPickTextured.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPickTextured.frag"], this.define);
        }
    }
    FudgeCore.ShaderPickTextured = ShaderPickTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderToon extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderToon); }
        static { this.define = [
            "PHONG",
            "TOON"
        ]; }
        static getCoat() { return FudgeCore.CoatToon; }
    }
    FudgeCore.ShaderToon = ShaderToon;
    class ShaderToonSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderToonSkin); }
        static { this.define = [
            "PHONG",
            "TOON",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatToon; }
    }
    FudgeCore.ShaderToonSkin = ShaderToonSkin;
    class ShaderToonTextured extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderToonTextured); }
        static { this.define = [
            "PHONG",
            "TOON",
            "TEXTURE"
        ]; }
        static getCoat() { return FudgeCore.CoatToonTextured; }
    }
    FudgeCore.ShaderToonTextured = ShaderToonTextured;
    class ShaderToonTexturedSkin extends FudgeCore.Shader {
        static { this.iSubclass = FudgeCore.Shader.registerSubclass(ShaderToonTexturedSkin); }
        static { this.define = [
            "PHONG",
            "TOON",
            "TEXTURE",
            "SKIN"
        ]; }
        static getCoat() { return FudgeCore.CoatToonTextured; }
    }
    FudgeCore.ShaderToonTexturedSkin = ShaderToonTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * - CRISP: no mipmapping, mag filter nearest, min filter nearest
     * - MEDIUM: mipmapping, mag filter nearest, min filter nearest_mipmap_linear
     * - BLURRY: mipmapping, mag filter linear, min filter linear_mipmap_linear
     * - SMOOTH: no mipmapping, mag filter linear, min filter linear
     */
    let MIPMAP;
    (function (MIPMAP) {
        MIPMAP[MIPMAP["CRISP"] = 0] = "CRISP";
        MIPMAP[MIPMAP["MEDIUM"] = 1] = "MEDIUM";
        MIPMAP[MIPMAP["BLURRY"] = 2] = "BLURRY";
        MIPMAP[MIPMAP["SMOOTH"] = 3] = "SMOOTH";
    })(MIPMAP = FudgeCore.MIPMAP || (FudgeCore.MIPMAP = {}));
    let WRAP;
    (function (WRAP) {
        WRAP[WRAP["REPEAT"] = 0] = "REPEAT";
        WRAP[WRAP["CLAMP"] = 1] = "CLAMP";
        WRAP[WRAP["MIRROR"] = 2] = "MIRROR";
    })(WRAP = FudgeCore.WRAP || (FudgeCore.WRAP = {}));
    /**
     * Baseclass for different kinds of textures.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    let Texture = (() => {
        var _a;
        let _classDecorators = [(_a = FudgeCore.RenderInjectorTexture).decorate.bind(_a)];
        let _classDescriptor;
        let _classExtraInitializers = [];
        let _classThis;
        let _classSuper = FudgeCore.Mutable;
        var Texture = class extends _classSuper {
            static { _classThis = this; }
            static {
                const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;
                __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
                Texture = _classThis = _classDescriptor.value;
                if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
                __runInitializers(_classThis, _classExtraInitializers);
            }
            #mipmap;
            #wrap;
            constructor(_name = "Texture") {
                super();
                this.idResource = undefined;
                this.textureDirty = true;
                this.mipmapDirty = true;
                this.wrapDirty = true;
                this.#mipmap = MIPMAP.CRISP;
                this.#wrap = WRAP.REPEAT;
                this.name = _name;
            }
            set mipmap(_mipmap) {
                this.#mipmap = _mipmap;
                this.mipmapDirty = true;
            }
            get mipmap() {
                return this.#mipmap;
            }
            set wrap(_wrap) {
                this.#wrap = _wrap;
                this.wrapDirty = true;
            }
            get wrap() {
                return this.#wrap;
            }
            /**
             * Generates and binds the texture in WebGL from the {@link texImageSource}.
             * Injected by {@link RenderInjectorTexture}. Used by the render system.
             * @internal
             */
            useRenderData(_textureUnit = 0) { }
            /**
             * Deletes the texture in WebGL freeing the allocated gpu memory.
             * Injected by {@link RenderInjectorTexture}.
             * @internal
             */
            deleteRenderData() { }
            /**
             * Refreshes the image data in the render engine.
             */
            refresh() {
                this.textureDirty = true;
            }
            //#region Transfer
            serialize() {
                let serialization = {
                    idResource: this.idResource,
                    name: this.name,
                    mipmap: MIPMAP[this.#mipmap],
                    wrap: WRAP[this.#wrap]
                };
                return serialization;
            }
            async deserialize(_serialization) {
                FudgeCore.Project.register(this, _serialization.idResource);
                this.name = _serialization.name;
                this.#mipmap = MIPMAP[_serialization.mipmap];
                this.#wrap = WRAP[_serialization.wrap];
                return this;
            }
            getMutator(_extendable) {
                let mutator = super.getMutator(true);
                mutator.mipmap = this.#mipmap;
                mutator.wrap = this.#wrap;
                return mutator;
            }
            getMutatorAttributeTypes(_mutator) {
                let types = super.getMutatorAttributeTypes(_mutator);
                if (types.mipmap)
                    types.mipmap = MIPMAP;
                if (types.wrap)
                    types.wrap = WRAP;
                return types;
            }
            reduceMutator(_mutator) {
                delete _mutator.idResource;
                delete _mutator.renderData;
                delete _mutator.textureDirty;
                delete _mutator.mipmapDirty;
                delete _mutator.mipmapGenerated;
                delete _mutator.wrapDirty;
            }
        };
        return Texture = _classThis;
    })();
    FudgeCore.Texture = Texture;
    /**
     * Texture created from an existing image
     */
    class TextureImage extends Texture {
        constructor(_url) {
            super();
            this.image = null;
            if (_url) {
                this.load(_url);
                this.name = _url.toString().split("/").pop();
            }
            FudgeCore.Project.register(this);
        }
        get texImageSource() {
            return this.image;
        }
        /**
         * Asynchronously loads the image from the given url
         */
        async load(_url) {
            this.url = _url;
            this.image = new Image();
            // const response: Response = await window.fetch(this.url);
            // const blob: Blob = await response.blob();
            // let objectURL: string = URL.createObjectURL(blob);
            // this.image.src = objectURL;
            return new Promise((_resolve, _reject) => {
                this.image.addEventListener("load", () => {
                    this.renderData = null; // refresh render data on next draw call
                    _resolve();
                });
                this.image.addEventListener("error", () => _reject());
                this.image.src = new URL(this.url.toString(), FudgeCore.Project.baseURL).toString();
            });
        }
        //#region Transfer
        serialize() {
            return {
                url: this.url,
                type: this.type, // serialize for editor views
                [super.constructor.name]: super.serialize()
            };
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            await this.load(_serialization.url);
            // this.type is an accessor of Mutable doesn't need to be deserialized
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            if (_mutator.url && _mutator.url != this.url.toString())
                await this.load(_mutator.url);
            // except url from mutator for further processing
            delete (_mutator.url);
            await super.mutate(_mutator, _selection, _dispatchMutate);
            // TODO: examine necessity to reconstruct, if mutator is kept by caller
            // _mutator.url = this.url; 
        }
    }
    FudgeCore.TextureImage = TextureImage;
    /**
     * Texture created from a canvas
     */
    class TextureBase64 extends Texture {
        constructor(_name, _base64, _mipmap = MIPMAP.CRISP, _wrap = WRAP.REPEAT, _width, _height) {
            super(_name);
            this.image = new Image();
            this.image.src = _base64;
            this.mipmap = _mipmap;
            this.wrap = _wrap;
            if (_width)
                this.image.width = _width;
            if (_height)
                this.image.height = _height;
        }
        get texImageSource() {
            return this.image;
        }
    }
    FudgeCore.TextureBase64 = TextureBase64;
    /**
     * Texture created from a canvas
     */
    class TextureCanvas extends Texture {
        constructor(_name, _crc2) {
            super(_name);
            this.crc2 = _crc2;
        }
        get texImageSource() {
            return this.crc2.canvas;
        }
    }
    FudgeCore.TextureCanvas = TextureCanvas;
    /**
     * Texture created from a text. Texture upates when the text or font changes. The texture is resized to fit the text.
     * @authors Jonas Plotzky, HFU, 2024
     */
    class TextureText extends Texture {
        #text;
        #font;
        constructor(_name, _text = "Text", _font = "20px monospace") {
            super(_name);
            this.crc2 = document.createElement("canvas").getContext("2d");
            this.text = _text;
            this.font = _font;
        }
        set text(_text) {
            this.#text = _text;
            this.textureDirty = true;
        }
        get text() {
            return this.#text;
        }
        set font(_font) {
            this.#font = _font;
            document.fonts.load(this.#font)
                .catch((_error) => FudgeCore.Debug.error(`${TextureText.name}: ${_error}`))
                .finally(() => this.textureDirty = true);
        }
        get font() {
            return this.#font;
        }
        get texImageSource() {
            return this.canvas;
        }
        get width() {
            return this.canvas.width;
        }
        get height() {
            return this.canvas.height;
        }
        get hasTransparency() {
            return true;
        }
        get canvas() {
            return this.crc2.canvas;
        }
        useRenderData(_textureUnit) {
            if (this.textureDirty) {
                this.crc2.font = this.font;
                let metrics = this.crc2.measureText(this.text);
                let width = metrics.width;
                let height = metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent;
                this.canvas.width = width + this.crc2.measureText("  ").width;
                this.canvas.height = height * 1.1; // padding, otherwise on some glyphs might get cut off
                if (this.canvas.width == 0)
                    return;
                this.crc2.font = this.font; // TODO: wait for font to be loaded using document.fonts
                this.crc2.textAlign = "center";
                this.crc2.textBaseline = "middle";
                this.crc2.fillStyle = "white";
                this.crc2.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.crc2.fillText(this.#text, this.canvas.width / 2, this.canvas.height / 2);
            }
            super.useRenderData(_textureUnit);
        }
        serialize() {
            return {
                [super.constructor.name]: super.serialize(),
                text: this.text,
                font: this.font
            };
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            this.text = _serialization.text;
            this.font = _serialization.font;
            return this;
        }
        getMutator(_extendable) {
            let mutator = super.getMutator(true);
            mutator.text = this.text;
            mutator.font = this.font;
            return mutator;
        }
    }
    FudgeCore.TextureText = TextureText;
    /**
     * Texture created from a FUDGE-Sketch
     */
    class TextureSketch extends TextureCanvas {
        get texImageSource() {
            return null;
        }
    }
    FudgeCore.TextureSketch = TextureSketch;
    /**
     * Texture created from an HTML-page
     */
    class TextureHTML extends TextureCanvas {
        get texImageSource() {
            return null;
        }
    }
    FudgeCore.TextureHTML = TextureHTML;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class TextureDefault extends FudgeCore.TextureBase64 {
        static { this.color = new TextureDefault("TextureDefault", TextureDefault.getColor(), FudgeCore.MIPMAP.MEDIUM); }
        static { this.normal = new TextureDefault("TextureNormalDefault", TextureDefault.getNormal(), FudgeCore.MIPMAP.MEDIUM); }
        static { this.toon = new TextureDefault("TextureToonDefault", TextureDefault.getToon(), FudgeCore.MIPMAP.SMOOTH, FudgeCore.WRAP.CLAMP); }
        // TODO: maybe make these lazy
        static { this.iconLight = new TextureDefault("IconDefaultLight", TextureDefault.getIconLight(), FudgeCore.MIPMAP.BLURRY, FudgeCore.WRAP.CLAMP, 256, 256); }
        static { this.iconCamera = new TextureDefault("IconDefaultCamera", TextureDefault.getIconCamera(), FudgeCore.MIPMAP.BLURRY, FudgeCore.WRAP.CLAMP, 256, 256); }
        static { this.iconAudio = new TextureDefault("IconDefaultAudio", TextureDefault.getIconAudio(), FudgeCore.MIPMAP.BLURRY, FudgeCore.WRAP.CLAMP, 256, 256); }
        // public static iconParticles: TextureBase64 = new TextureDefault("IconDefaultParticle", TextureDefault.getIconParticles(), MIPMAP.BLURRY, 256, 256);
        static getColor() {
            return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAADWLSURBVHhe7d0HnFTlvf/xH9uXZYGl9yrSRJpEUexYsJIba8Re498WNcZEb+41epOIsWs0Niyxm2g0duwaewO7oqJCAGnSt7H/8304B4dldpk5Z3b3zO7nzeu85pwzM8vMs7PPb35PO61qPBZjrVq18vfiKebFR/lFRPlFQ/lFE/fyy/FvAQBICwEEABAKAQQAEAp9IBHRhhoN5RcN5RdNSyg//YzCwkJr3bq1O169erXbMoEAEhF/wNFQftFQftE09/LLzc21Ll262E9+8hMbP368VVdX2+uvv27Tp093QSTq+yeARMQfcDSUXzSUXzTNtfxycnKspKTEBg0aZEceeaQdeuihtmLFCvvss89s3rx59vjjj9vDDz8cOROJHECqqqps9uzZtmzZMlu5cqVLldq1a2d9+/Z1+1HxAYyG8ouG8ouG8osmTPnl5+db9+7dbffdd7dTTz3V1cXvvvuuvfzyyy4DkVWrVtmNN95oS5YsccdhhQ4g5eXl9uyzz9qMGTNszZo1/tkfKQIq+u29995WWlrqn00fH8BoKL9oKL9oKL9o0ik/PbZNmza2xRZb2HHHHWeTJ0+2hQsX2pNPPmmLFy/2H7XOf/7zH7v11ltdPR5FqACyYMECu+eee1KKXmvXrrX99tvPRo8e7YJKuvgARkP5RROUnz67+iKUl5dnlZWVtnz58li8dj5/0TSn8lOT1b777msXXHCBde7c2V577TV78803k77Hb7/91u644w6rqKjwz4STdgBRtqHUJ4hoChCffPKJffXVV649rX379jZgwAC3BZQuTZo0ybbbbjuXXqWDD2A0lF80Qfl17NjRjjnmGOvUqZN988039sADD7gvUk39+vn8RdOcyq9r1642depU23rrre3RRx91X3JEdbSasIqLi23YsGHuXKYCSNopgXrvg+Ch/o/77rvPvVi9+J///Od29NFH29ChQ90LDGj4mNIlBZm4/8LQssycOdM1xb766qtJm2JF2UfPnj3t17/+tU2YMMF23XVXO/bYY11QQfM1f/58u+mmm1zfgfp44071sV6zPstB8FA9rC/8Tz31lOsXybS0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";
        }
        static getNormal() {
            return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAFDmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDUtMDZUMjI6Mjg6MDYrMDIwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDUtMDZUMjI6MzA6MjErMDI6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDUtMDZUMjI6MzA6MjErMDI6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNS0wNlQyMjoyODowNiswMjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIxIgogICBleGlmOlBpeGVsWURpbWVuc2lvbj0iMSIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICB0aWZmOkltYWdlV2lkdGg9IjEiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjEiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249IjcyLzEiCiAgIHRpZmY6WVJlc29sdXRpb249IjcyLzEiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgUGhvdG8gMiAyLjAuNCIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wNS0wNlQyMjozMDoyMSswMjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+0IgVxAAAAYBpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/M37mR6NYKBYvDauhQYmNxcivwmKMMtjMvPml5o3Xe2/SZKtsFSU2fi34C9gqa6WIlGxZExv0nOepkcy5nXs+93vvOd17LngjWVUzy4Og5SwjPBpSZqNzStUjFVTSRAu+mGrqk9MjEUra2w0eJ151OrVKn/vXahNJUwVPtfCgqhuW8JjwxLKlO7wp3KRmYgnhY+GAIRcUvnb0uMtPDqdd/nDYiISHwNsgrKR/cfwXqxlDE5aX49eyefXnPs5L6pK5mWmJbeKtmIQZJYTCOMMM0Uc3AzL30UkPXbKiRH7wO3+KJclVZdYpYLBImgwWAVHzUj0pMSV6UkaWgtP/v301U709bvW6EFQ82PZLO1RtwOe6bb/v2/bnAZTdw1mumL+0B/2voq8XNf8u+Fbh5LyoxbfgdA2a7/SYEfuWysS9qRQ8H0F9FBovoWbe7dnPPoe3EFmRr7qA7R3okPO+hS824WfQgxGCcgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxJREFUCJljaGj4DwADgwIAVbjWPwAAAABJRU5ErkJggg==";
        }
        static getToon() {
            return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAP8AAAABCAYAAAARkHijAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TSotUBO0g4pChOtlFRRxLFYtgobQVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi7OCk6CIl/i8ptIjx4Lgf7+497t4BQqvGVDMQB1TNMjLJhJgvrIrBVwQRQBghDEnM1FPZxRw8x9c9fHy9i/Es73N/jgGlaDLAJxLHmW5YxBvEs5uWznmfOMIqkkJ8Tjxp0AWJH7kuu/zGueywwDMjRi4zTxwhFss9LPcwqxgq8QxxVFE1yhfyLiuctzirtQbr3JO/MFzUVrJcpzmGJJaQQhoiZDRQRQ0WYrRqpJjI0H7Cwz/q+NPkkslVBSPHAupQITl+8D/43a1Zmp5yk8IJoO/Ftj/GgeAu0G7a9vexbbdPAP8zcKV1/fUWMPdJerOrRY+AwW3g4rqryXvA5Q4w8qRLhuRIfppCqQS8n9E3FYDhW6B/ze2ts4/TByBHXS3fAAeHwESZstc93h3q7e3fM53+fgA4OXKPt/7K/gAAAAZiS0dEAP8AAAAAMyd88wAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+gHBAwdJ1j9WBsAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAVUlEQVQoz2NkYGD4zzAKhh5gZWBg4GBgYOBEo2FsKJ+Xk4FBipOBQZoDQktxMjCIsDEwSHFAMReE5sVmDhcWO1gYGBgYGMlINvj0MI7wZEis/6kbhgC04Qj/w7/HZgAAAABJRU5ErkJggg==";
        }
        static getIconLight() {
            return "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg viewBox='0 0 16 16' version='1.1' width='16' height='16' id='Light' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3E .s%7Bfill:%23fff;stroke:%23000;stroke-width:.1px;%7D %3C/style%3E%3Crect class='s' x='0.17039293' y='10.002448' width='3.9000568' height='0.90009934' id='NNE' transform='rotate(-67.5)' /%3E%3Crect x='8.8295078' y='10.002447' width='3.9000568' height='0.90009934' id='ENE' transform='rotate(-22.5)' class='s' /%3E%3Crect x='14.952469' y='3.8795717' width='3.9000139' height='0.90009987' id='ESE' transform='rotate(22.5)' class='s' /%3E%3Crect x='14.95247' y='-4.7795429' width='3.9000139' height='0.90009987' id='SSE' transform='rotate(67.5)' class='s' /%3E%3Crect x='-12.729565' y='10.002447' width='3.9000139' height='0.90009987' id='SSW' transform='rotate(-67.5)' class='s' /%3E%3Crect x='-4.0704498' y='10.002447' width='3.9000139' height='0.90009987' id='WSW' transform='rotate(-22.5)' class='s' /%3E%3Crect x='2.0524685' y='3.8795717' width='3.9000139' height='0.90009987' id='WNW' transform='rotate(22.5)' class='s' /%3E%3Crect x='2.0524685' y='-4.7795429' width='3.9000139' height='0.90009987' id='NNW' transform='rotate(67.5)' class='s' /%3E%3Cellipse id='CENTER' cx='8.000082' cy='8.0002575' rx='3.4500823' ry='3.4502573' class='s' /%3E%3C/svg%3E";
        }
        static getIconCamera() {
            return "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg id='Camera' viewBox='0 0 16 16' version='1.1' width='16' height='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle id='style1'%3E.s%7Bfill:%23fff;stroke:%23000;stroke-width:.1px;%7D %3C/style%3E%3Cpath class='s' d='M 13.857322,8.8755297 H 12.413424 L 12.413,6.787 h -1.425311 c 0.227026,-0.4494693 0.363243,-0.9453919 0.363243,-1.4885008 0,-1.7978775 -1.4075727,-3.2492893 -3.1511466,-3.2492893 -1.7435746,0 -3.1511479,1.4514118 -3.1511479,3.2492893 v 0.028093 C 4.5764194,5.0363118 4.0315524,4.8583968 3.4503606,4.8583968 1.7067863,4.8677567 0.29921298,6.3191723 0.29921298,8.107686 c 0,1.7885135 1.66538582,3.311789 3.42458512,3.249289 L 3.732,13.976 h 8.681 v -2.113368 h 1.444322 z' id='path1' /%3E%3Crect class='s' x='12.80391' y='8.3979683' width='2.8968766' height='3.8860376' rx='0' ry='0' id='rect1' /%3E%3C/svg%3E%0A";
        }
        static getIconAudio() {
            return "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg id='Audio' viewBox='0 0 16 16' version='1.1' width='16' height='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3E.s%7Bfill:%23fff;stroke:%23000;stroke-width:.1px;%7D %3C/style%3E%3Cpath class='s' d='M 9.1563588,1.0804006 3.6729341,4.642017 H 0.54364971 v 6.784031 H 3.7590612 l 5.3972976,3.493776 z' id='path1' /%3E%3Cpath class='s' d='m 13.347518,13.676645 -0.765157,-0.563566 c 4.227485,-5.5605241 0.210418,-9.881202 0.03825,-10.0596648 l 0.698204,-0.6481019 c 0.04782,0.046964 4.75353,5.0627076 0.03825,11.2713327 z' id='path2' /%3E%3Cpath class='s' d='m 11.321868,11.79809 -0.822541,-0.479032 c 2.142434,-3.5786474 0.114773,-6.35891 0.02869,-6.4716232 l 0.765156,-0.5635666 c 0.105208,0.1408915 2.505883,3.3814001 0.02869,7.5048298 z' id='path3' /%3E%3C/svg%3E%0A";
        }
    }
    FudgeCore.TextureDefault = TextureDefault;
})(FudgeCore || (FudgeCore = {}));
// /<reference path="../Event/Event.ts"/>
// /<reference path="../Time/Time.ts"/>
var FudgeCore;
// /<reference path="../Event/Event.ts"/>
// /<reference path="../Time/Time.ts"/>
(function (FudgeCore) {
    /**
     * Determines the mode a loop runs in
     */
    let LOOP_MODE;
    (function (LOOP_MODE) {
        /** Loop cycles controlled by window.requestAnimationFrame */
        LOOP_MODE["FRAME_REQUEST"] = "frameRequest";
        /** Loop cycles controlled by xrSession.requestAnimationFrame */
        LOOP_MODE["FRAME_REQUEST_XR"] = "frameRequestXR";
        /** Loop cycles with the given framerate in {@link Time.game} */
        LOOP_MODE["TIME_GAME"] = "timeGame";
        /** Loop cycles with the given framerate in realtime, independent of {@link Time.game} */
        LOOP_MODE["TIME_REAL"] = "timeReal";
    })(LOOP_MODE = FudgeCore.LOOP_MODE || (FudgeCore.LOOP_MODE = {}));
    /**
     * Core loop of a FUDGE application. Initializes automatically and must be started explicitly.
     * It then fires {@link EVENT.LOOP_FRAME} to all added listeners at each frame
     *
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Loop extends FudgeCore.EventTargetStatic {
        static { this.∆íTimeStartGame = 0; }
        static { this.∆íTimeStartReal = 0; }
        static { this.∆íTimeFrameGame = 0; }
        static { this.∆íTimeFrameReal = 0; }
        static { this.∆íTimeFrameStartGame = 0; }
        static { this.∆íTimeFrameStartReal = 0; }
        static { this.∆íTimeLastFrameGameAvg = 0; }
        static { this.∆íTimeLastFrameRealAvg = 0; }
        static { this.∆íFrames = 0; }
        static { this.running = false; }
        static { this.mode = LOOP_MODE.FRAME_REQUEST; }
        static { this.idIntervall = 0; }
        static { this.idRequest = 0; }
        static { this.fpsDesired = 30; }
        static { this.framesToAverage = 30; }
        static { this.syncWithAnimationFrame = false; }
        /** The gametime the loop was started, overwritten at each start */
        static get timeStartGame() { return Loop.∆íTimeStartGame; }
        /** The realtime the loop was started, overwritten at each start */
        static get timeStartReal() { return Loop.∆íTimeStartReal; }
        /** The gametime elapsed since the last loop cycle */
        static get timeFrameGame() { return Loop.∆íTimeFrameGame; }
        /** The realtime elapsed since the last loop cycle */
        static get timeFrameReal() { return Loop.∆íTimeFrameReal; }
        /** The gametime the last loop cycle started*/
        static get timeFrameStartGame() { return Loop.∆íTimeFrameStartGame; }
        /** The realtime the last loop cycle started*/
        static get timeFrameStartReal() { return Loop.∆íTimeFrameStartReal; }
        /** The average number of frames per second in gametime */
        static get fpsGameAverage() { return 1000 / Loop.∆íTimeLastFrameGameAvg; }
        /** The average number of frames per second in realtime */
        static get fpsRealAverage() { return 1000 / Loop.∆íTimeLastFrameRealAvg; }
        /** The number of frames triggered so far */
        static get frames() { return Loop.∆íFrames; }
        /**
         * Starts the loop with the given mode and fps.
         * The default for _mode is FRAME_REQUEST, see {@link LOOP_MODE}, hooking the loop to the browser's animation frame.
         * Is only applicable in TIME-modes.
         * _syncWithAnimationFrame is experimental and only applicable in TIME-modes, deferring the loop-cycle until the next possible animation frame.
         */
        static start(_mode = LOOP_MODE.FRAME_REQUEST, _fps = 60, _syncWithAnimationFrame = false) {
            Loop.stop();
            Loop.∆íTimeStartGame = FudgeCore.Time.game.get();
            Loop.∆íTimeStartReal = performance.now();
            Loop.∆íTimeFrameStartGame = Loop.∆íTimeStartGame;
            Loop.∆íTimeFrameStartReal = Loop.∆íTimeStartReal;
            Loop.fpsDesired = (_mode == LOOP_MODE.FRAME_REQUEST) ? 60 : _fps;
            Loop.framesToAverage = Loop.fpsDesired;
            Loop.∆íTimeLastFrameGameAvg = Loop.∆íTimeLastFrameRealAvg = 1000 / Loop.fpsDesired;
            Loop.mode = _mode;
            Loop.syncWithAnimationFrame = _syncWithAnimationFrame;
            let log = `Loop starting in mode ${Loop.mode}`;
            if (Loop.mode != LOOP_MODE.FRAME_REQUEST)
                log += ` with attempted ${_fps} fps`;
            FudgeCore.Debug.fudge(log);
            switch (_mode) {
                case LOOP_MODE.FRAME_REQUEST:
                    Loop.loopFrame();
                    break;
                case LOOP_MODE.FRAME_REQUEST_XR:
                    Loop.loopFrameXR();
                    break;
                case LOOP_MODE.TIME_REAL:
                    Loop.idIntervall = window.setInterval(Loop.loopTime, 1000 / Loop.fpsDesired);
                    Loop.loopTime();
                    break;
                case LOOP_MODE.TIME_GAME:
                    Loop.idIntervall = FudgeCore.Time.game.setTimer(1000 / Loop.fpsDesired, 0, Loop.loopTime);
                    Loop.loopTime();
                    break;
                default:
                    break;
            }
            Loop.running = true;
        }
        /**
         * Stops the loop
         */
        static stop() {
            if (!Loop.running)
                return;
            switch (Loop.mode) {
                case LOOP_MODE.FRAME_REQUEST:
                    window.cancelAnimationFrame(Loop.idRequest);
                    break;
                case LOOP_MODE.FRAME_REQUEST_XR:
                    FudgeCore.XRViewport.default.session.cancelAnimationFrame(Loop.idRequest);
                    FudgeCore.XRViewport.default.session = null;
                    break;
                case LOOP_MODE.TIME_REAL:
                    window.clearInterval(Loop.idIntervall);
                    window.cancelAnimationFrame(Loop.idRequest);
                    break;
                case LOOP_MODE.TIME_GAME:
                    FudgeCore.Time.game.deleteTimer(Loop.idIntervall);
                    window.cancelAnimationFrame(Loop.idRequest);
                    break;
                default:
                    break;
            }
            Loop.running = false;
            FudgeCore.Debug.fudge("Loop stopped!");
        }
        /**
         * Continue running the loop
         */
        static continue() {
            if (Loop.running)
                return;
            Loop.start(Loop.mode, Loop.fpsDesired, Loop.syncWithAnimationFrame);
        }
        static loop() {
            let time;
            time = performance.now();
            Loop.∆íTimeFrameReal = time - Loop.∆íTimeFrameStartReal;
            Loop.∆íTimeFrameStartReal = time;
            time = FudgeCore.Time.game.get();
            Loop.∆íTimeFrameGame = time - Loop.∆íTimeFrameStartGame;
            Loop.∆íTimeFrameStartGame = time;
            Loop.∆íTimeLastFrameGameAvg = ((Loop.framesToAverage - 1) * Loop.∆íTimeLastFrameGameAvg + Loop.∆íTimeFrameGame) / Loop.framesToAverage;
            Loop.∆íTimeLastFrameRealAvg = ((Loop.framesToAverage - 1) * Loop.∆íTimeLastFrameRealAvg + Loop.∆íTimeFrameReal) / Loop.framesToAverage;
            // TODO: consider LoopEvent which conveys information such as timeElapsed etc...
            Loop.∆íFrames++;
            let event = new Event("loopFrame" /* EVENT.LOOP_FRAME */);
            Loop.targetStatic.dispatchEvent(event);
        }
        static loopFrame() {
            Loop.loop();
            Loop.idRequest = window.requestAnimationFrame(Loop.loopFrame);
        }
        static loopFrameXR(_time = null, _xrFrame = null) {
            Loop.loop();
            FudgeCore.XRViewport.default.draw(true, _xrFrame);
            Loop.idRequest = FudgeCore.XRViewport.default.session.requestAnimationFrame(Loop.loopFrameXR);
        }
        static loopTime() {
            if (Loop.syncWithAnimationFrame)
                Loop.idRequest = window.requestAnimationFrame(Loop.loop);
            else
                Loop.loop();
        }
    }
    FudgeCore.Loop = Loop;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Instances of this class generate a timestamp that correlates with the time elapsed since the start of the program but allows for resetting and scaling.
     * Supports {@link Timer}s similar to window.setInterval but with respect to the scaled time.
     * All time values are given in milliseconds
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Time extends FudgeCore.EventTargetUnified {
        /** Standard game time starting automatically with the application */
        static { this.game = new Time(); }
        constructor() {
            super();
            this.timers = {};
            this.idTimerAddedLast = 0;
            this.start = performance.now();
            this.scale = 1.0;
            this.offset = 0.0;
            this.lastCallToElapsed = 0.0;
        }
        /**
         * Returns representions of the time given in milliseconds in various formats defined in {@link TimeUnits}
         */
        static getUnits(_milliseconds) {
            let units = {};
            units.asSeconds = _milliseconds / 1000;
            units.asMinutes = units.asSeconds / 60;
            units.asHours = units.asMinutes / 60;
            units.hours = Math.floor(units.asHours);
            units.minutes = Math.floor(units.asMinutes) % 60;
            units.seconds = Math.floor(units.asSeconds) % 60;
            units.fraction = _milliseconds % 1000;
            units.thousands = _milliseconds % 10;
            units.hundreds = _milliseconds % 100 - units.thousands;
            units.tenths = units.fraction - units.hundreds - units.thousands;
            return units;
        }
        //#region Get/Set time and scaling
        /**
         * Retrieves the current scaled timestamp of this instance in milliseconds
         */
        get() {
            return this.offset + this.scale * (performance.now() - this.start);
        }
        /**
         * Returns the remaining time to the given point of time
         */
        getRemainder(_to) {
            return _to - this.get();
        }
        /**
         * (Re-) Sets the timestamp of this instance
         * @param _time The timestamp to represent the current time (default 0.0)
         */
        set(_time = 0) {
            this.offset = _time;
            this.start = performance.now();
            this.getElapsedSincePreviousCall();
        }
        /**
         * Sets the scaling of this time, allowing for slowmotion (<1) or fastforward (>1)
         * @param _scale The desired scaling (default 1.0)
         */
        setScale(_scale = 1.0) {
            this.set(this.get());
            this.scale = _scale;
            //TODO: catch scale=0
            this.rescaleAllTimers();
            this.getElapsedSincePreviousCall();
            this.dispatchEvent(new Event("timeScaled" /* EVENT.TIME_SCALED */));
        }
        /**
         * Retrieves the current scaling of this time
         */
        getScale() {
            return this.scale;
        }
        /**
         * Retrieves the offset of this time
         */
        getOffset() {
            return this.offset;
        }
        /**
         * Retrieves the scaled time in milliseconds passed since the last call to this method
         * Automatically reset at every call to set(...) and setScale(...)
         */
        getElapsedSincePreviousCall() {
            let current = this.get();
            let elapsed = current - this.lastCallToElapsed;
            this.lastCallToElapsed = current;
            return elapsed;
        }
        //#endregion
        //#region Timers
        /**
         * Returns a Promise<void> to be resolved after the time given. To be used with async/await
         */
        delay(_lapse) {
            return new Promise(_resolve => this.setTimer(_lapse, 1, () => _resolve()));
        }
        // TODO: examine if web-workers would enhance performance here!
        /**
         * Stops and deletes all {@link Timer}s attached. Should be called before this Time-object leaves scope
         */
        clearAllTimers() {
            for (let id in this.timers) {
                this.deleteTimer(Number(id));
            }
        }
        /**
         * Deletes {@link Timer} found using the internal id of the connected interval-object
         * @param _id
         */
        deleteTimerByItsInternalId(_id) {
            for (let id in this.timers) {
                let timer = this.timers[id];
                if (timer.id == _id) {
                    timer.clear();
                    delete this.timers[id];
                    // TODO: check if an early out is OK here... should be!
                }
            }
        }
        /**
         * Installs a timer at this time object
         * @param _lapse The object-time to elapse between the calls to _callback
         * @param _count The number of calls desired, 0 = Infinite
         * @param _handler The function to call each the given lapse has elapsed
         * @param _arguments Additional parameters to pass to callback function
         */
        setTimer(_lapse, _count, _handler, ..._arguments) {
            // tslint:disable-next-line: no-unused-expression
            new FudgeCore.Timer(this, _lapse, _count, _handler, _arguments);
            //this.addTimer(timer);
            return this.idTimerAddedLast;
        }
        /**
         * This method is called internally by {@link Time} and {@link Timer} and must not be called otherwise
         */
        addTimer(_timer) {
            this.timers[++this.idTimerAddedLast] = _timer;
            return this.idTimerAddedLast;
        }
        /**
         * Deletes the timer with the id given by this time object
         */
        deleteTimer(_id) {
            let timer = this.timers[_id];
            if (!timer)
                return;
            timer.clear();
            delete this.timers[_id];
        }
        /**
         * Returns a reference to the timer with the given id or null if not found.
         */
        getTimer(_id) {
            return this.timers[_id];
        }
        /**
         * Returns a copy of the list of timers currently installed on this time object
         */
        getTimers() {
            let result = {};
            return Object.assign(result, this.timers);
        }
        /**
         * Returns true if there are {@link Timers} installed to this
         */
        hasTimers() {
            return (Object.keys(this.timers).length > 0);
        }
        /**
         * Recreates {@link Timer}s when scaling changes
         */
        rescaleAllTimers() {
            for (let id in this.timers) {
                let timer = this.timers[id];
                timer.clear();
                delete this.timers[id];
                if (!this.scale)
                    // Time has stopped, no need to replace cleared timers
                    continue;
                /* this.timers[id] =  */
                timer = timer.installCopy(); // the timer is automatically added to this time instance
                delete this.timers[this.idTimerAddedLast]; // remove the copy again ...
                this.timers[id] = timer; // ... and place it at the id of the original
            }
        }
    }
    FudgeCore.Time = Time;
    //#endregion
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Timer}-instance internally uses window.setInterval to call a given handler with a given frequency a given number of times,
     * passing an {@link EventTimer}-instance with additional information and given arguments.
     * The frequency scales with the {@link Time}-instance the {@link Timer}-instance is attached to.
     *
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Timer {
        /**
         * Creates a {@link Timer} instance.
         * @param _time The {@link Time} instance, the timer attaches to
         * @param _elapse The time in milliseconds to elapse, to the next call of _handler, measured in _time
         * @param _count The desired number of calls to _handler, Timer deinstalls automatically after last call. Passing 0 invokes infinite calls
         * @param _handler The {@link TimerHandler} instance to call
         * @param _arguments Additional arguments to pass to _handler
         *
         * TODO: for proper handling and deletion, use Time.setTimer instead of instantiating timers yourself.
         */
        constructor(_time, _elapse, _count, _handler, ..._arguments) {
            this.time = _time;
            this.elapse = _elapse;
            this.event = new FudgeCore.EventTimer(this, _arguments);
            this.handler = _handler;
            this.count = _count;
            let scale = Math.abs(_time.getScale());
            if (!scale) {
                // Time is stopped, timer won't be active
                this.active = false;
                return;
            }
            this.timeoutReal = this.elapse / scale;
            let callback = () => {
                if (!this.active)
                    return;
                this.event.count = this.count;
                this.event.lastCall = (this.count == 1);
                _handler(this.event);
                this.event.firstCall = false;
                if (this.count > 0)
                    if (--this.count == 0)
                        _time.deleteTimerByItsInternalId(this.idWindow);
            };
            this.idWindow = window.setInterval(callback, this.timeoutReal, _arguments);
            this.active = true;
            _time.addTimer(this);
        }
        /**
         * Returns the window-id of the timer, which was returned by setInterval
         */
        get id() {
            return this.idWindow;
        }
        /**
         * Returns the time-intervall for calls to the handler
         */
        get lapse() {
            return this.elapse;
        }
        /**
         * Attaches a copy of this at its current state to the same {@link Time}-instance. Used internally when rescaling {@link Time}
         */
        installCopy() {
            return new Timer(this.time, this.elapse, this.count, this.handler, this.event.arguments);
        }
        /**
         * Clears the timer, removing it from the interval-timers handled by window
         */
        clear() {
            // if (this.type == TIMER_TYPE.TIMEOUT) {
            //     if (this.active)
            //         // save remaining time to timeout as new timeout for restart
            //         this.timeout = this.timeout * (1 - (performance.now() - this.startTimeReal) / this.timeoutReal);
            //     window.clearTimeout(this.id);
            // }
            // else
            // TODO: reusing timer starts interval anew. Should be remaining interval as timeout, then starting interval anew 
            window.clearInterval(this.idWindow);
            this.active = false;
        }
    }
    FudgeCore.Timer = Timer;
})(FudgeCore || (FudgeCore = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnVkZ2VDb3JlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vU291cmNlL0NvcmUvRGVidWcvRGVidWdUYXJnZXQudHMiLCIuLi9Tb3VyY2UvQ29yZS9EZWJ1Zy9EZWJ1Z0ludGVyZmFjZXMudHMiLCIuLi9Tb3VyY2UvQ29yZS9EZWJ1Zy9EZWJ1Z0NvbnNvbGUudHMiLCIuLi9Tb3VyY2UvQ29yZS9EZWJ1Zy9EZWJ1Zy50cyIsIi4uL1NvdXJjZS9Db3JlL0V2ZW50L0V2ZW50LnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9NdXRhYmxlLnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9TZXJpYWxpemVyLnRzIiwiLi4vU291cmNlL0NvcmUvR3JhcGgvTm9kZS50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnQudHMiLCIuLi9Tb3VyY2UvQ29yZS9SZWN5Y2xlL1JlY3ljYWJsZUFycmF5LnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlckluamVjdG9yLnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlckluamVjdG9yU2hhZGVyLnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlckluamVjdG9yQ29hdC50cyIsIi4uL1NvdXJjZS9Db3JlL1JlbmRlci9SZW5kZXJJbmplY3Rvck1lc2gudHMiLCIuLi9Tb3VyY2UvQ29yZS9SZW5kZXIvUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS50cyIsIi4uL1NvdXJjZS9Db3JlL1JlbmRlci9SZW5kZXJJbmplY3RvckNvbXBvbmVudFBhcnRpY2xlU3lzdGVtLnRzIiwiLi4vU291cmNlL0NvcmUvUmVjeWNsZS9SZWN5Y2xlci50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGgvVmVjdG9yMi50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGgvUmVjdGFuZ2xlLnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlcldlYkdMLnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlckluamVjdG9yVGV4dHVyZS50cyIsIi4uL1NvdXJjZS9Db3JlL1BoeXNpY3MvSGVscGVyc1BoeXNpY3MudHMiLCIuLi9Tb3VyY2UvQ29yZS9QaHlzaWNzL0pvaW50LnRzIiwiLi4vU291cmNlL0NvcmUvUGh5c2ljcy9Kb2ludEF4aWFsLnRzIiwiLi4vU291cmNlL0NvcmUvUmVmZXJlbmNlcy50cyIsIi4uL1NvdXJjZS9Db3JlL0FuaW1hdGlvbi9BbmltYXRpb24udHMiLCIuLi9Tb3VyY2UvQ29yZS9BbmltYXRpb24vQW5pbWF0aW9uRnVuY3Rpb24udHMiLCIuLi9Tb3VyY2UvQ29yZS9BbmltYXRpb24vQW5pbWF0aW9uR0xURi50cyIsIi4uL1NvdXJjZS9Db3JlL0FuaW1hdGlvbi9BbmltYXRpb25LZXkudHMiLCIuLi9Tb3VyY2UvQ29yZS9BbmltYXRpb24vQW5pbWF0aW9uU2VxdWVuY2UudHMiLCIuLi9Tb3VyY2UvQ29yZS9BbmltYXRpb24vQW5pbWF0aW9uU3ByaXRlLnRzIiwiLi4vU291cmNlL0NvcmUvQXVkaW8vQXVkaW8udHMiLCIuLi9Tb3VyY2UvQ29yZS9FdmVudC9FdmVudEF1ZGlvLnRzIiwiLi4vU291cmNlL0NvcmUvQXVkaW8vQXVkaW9NYW5hZ2VyLnRzIiwiLi4vU291cmNlL0NvcmUvQXVkaW8vQXVkaW9Pc2NpbGxhdG9yLnRzIiwiLi4vU291cmNlL0NvcmUvQ29tcG9uZW50L0NvbXBvbmVudEFtYmllbnRPY2NsdXNpb24udHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50QW5pbWF0b3IudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50QXVkaW8udHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50QXVkaW9MaXN0ZW5lci50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRCbG9vbS50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRDYW1lcmEudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50RmFjZUNhbWVyYS50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRGb2cudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50R3JhcGhGaWx0ZXIudHMiLCIuLi9Tb3VyY2UvQ29yZS9MaWdodC9MaWdodC50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRMaWdodC50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRNYXRlcmlhbC50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRNZXNoLnRzIiwiLi4vU291cmNlL0NvcmUvQ29tcG9uZW50L0NvbXBvbmVudFBhcnRpY2xlU3lzdGVtLnRzIiwiLi4vU291cmNlL0NvcmUvQ29tcG9uZW50L0NvbXBvbmVudFBpY2sudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50U2NyaXB0LnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlckluamVjdG9yQ29tcG9uZW50U2tlbGV0b24udHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50U2tlbGV0b24udHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50VGV4dC50cyIsIi4uL1NvdXJjZS9Db3JlL0NvbXBvbmVudC9Db21wb25lbnRUcmFuc2Zvcm0udHMiLCIuLi9Tb3VyY2UvQ29yZS9Db21wb25lbnQvQ29tcG9uZW50VlJEZXZpY2UudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db250cm9sL0NvbnRyb2wudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db250cm9sL0F4aXMudHMiLCIuLi9Tb3VyY2UvQ29yZS9Db250cm9sL0tleWJvYXJkLnRzIiwiLi4vU291cmNlL0NvcmUvRGVidWcvRGVidWdBbGVydC50cyIsIi4uL1NvdXJjZS9Db3JlL0RlYnVnL0RlYnVnRGlhbG9nLnRzIiwiLi4vU291cmNlL0NvcmUvRGVidWcvRGVidWdUZXh0QXJlYS50cyIsIi4uL1NvdXJjZS9Db3JlL0V2ZW50L0V2ZW50S2V5Ym9hcmQudHMiLCIuLi9Tb3VyY2UvQ29yZS9FdmVudC9FdmVudFRpbWVyLnRzIiwiLi4vU291cmNlL0NvcmUvRXZlbnQvRXZlbnRUb3VjaC50cyIsIi4uL1NvdXJjZS9Db3JlL0dyYXBoL0dyYXBoLnRzIiwiLi4vU291cmNlL0NvcmUvR3JhcGgvR3JhcGhHTFRGLnRzIiwiLi4vU291cmNlL0NvcmUvR3JhcGgvR3JhcGhJbnN0YW5jZS50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGVyaWFsL0NvYXQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRlcmlhbC9Db2F0Q29sb3JlZC50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGVyaWFsL0NvYXRSZW1pc3NpdmUudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRlcmlhbC9Db2F0VGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRlcmlhbC9Db2F0UmVtaXNzaXZlVGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRlcmlhbC9Db2F0UmVtaXNzaXZlVGV4dHVyZWROb3JtYWxzLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0ZXJpYWwvQ29hdFRvb24udHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRlcmlhbC9Db2xvci50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGVyaWFsL01hdGVyaWFsLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0ZXJpYWwvTWF0ZXJpYWxHTFRGLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9DYWxjLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9GcmFtaW5nLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9HZW8yLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9HZW8zLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9MRklCNC50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGgvTWF0cml4M3gzLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9NYXRyaXg0eDQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRoL05vaXNlLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9Ob2lzZTIudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRoL05vaXNlMy50cyIsIi4uL1NvdXJjZS9Db3JlL01hdGgvTm9pc2U0LnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9RdWF0ZXJuaW9uLnRzIiwiLi4vU291cmNlL0NvcmUvTWF0aC9SYW5kb20udHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRoL1ZlY3RvcjMudHMiLCIuLi9Tb3VyY2UvQ29yZS9NYXRoL1ZlY3RvcjQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NZXNoL0ZhY2UudHMiLCIuLi9Tb3VyY2UvQ29yZS9NZXNoL01lc2gudHMiLCIuLi9Tb3VyY2UvQ29yZS9NZXNoL01lc2hDdWJlLnRzIiwiLi4vU291cmNlL0NvcmUvTWVzaC9NZXNoUG9seWdvbi50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaEV4dHJ1c2lvbi50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaEZCWC50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaEZyb21EYXRhLnRzIiwiLi4vU291cmNlL0NvcmUvTWVzaC9NZXNoR0xURi50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaE9CSi50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaFB5cmFtaWQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NZXNoL01lc2hRdWFkLnRzIiwiLi4vU291cmNlL0NvcmUvTWVzaC9NZXNoVGVycmFpbi50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaFJlbGllZi50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvTWVzaFJvdGF0aW9uLnRzIiwiLi4vU291cmNlL0NvcmUvTWVzaC9NZXNoU3BoZXJlLnRzIiwiLi4vU291cmNlL0NvcmUvTWVzaC9NZXNoU3ByaXRlLnRzIiwiLi4vU291cmNlL0NvcmUvTWVzaC9NZXNoVG9ydXMudHMiLCIuLi9Tb3VyY2UvQ29yZS9NZXNoL1F1YWQudHMiLCIuLi9Tb3VyY2UvQ29yZS9NZXNoL1ZlcnRleC50cyIsIi4uL1NvdXJjZS9Db3JlL01lc2gvVmVydGljZXMudHMiLCIuLi9Tb3VyY2UvQ29yZS9QYXJ0aWNsZVN5c3RlbS9QYXJ0aWNsZVN5c3RlbS50cyIsIi4uL1NvdXJjZS9Db3JlL1BhcnRpY2xlU3lzdGVtL1NoYWRlclBhcnRpY2xlU3lzdGVtLnRzIiwiLi4vU291cmNlL0NvcmUvUGF0aGluZy9Db21wb25lbnRXYWxrZXIudHMiLCIuLi9Tb3VyY2UvQ29yZS9QYXRoaW5nL0NvbXBvbmVudFdheXBvaW50LnRzIiwiLi4vU291cmNlL0NvcmUvUGF0aGluZy9Db25uZWN0aW9uLnRzIiwiLi4vU291cmNlL0NvcmUvUGh5c2ljcy9Db21wb25lbnRSaWdpZGJvZHkudHMiLCIuLi9Tb3VyY2UvQ29yZS9QaHlzaWNzL0RlYnVnUGh5c2ljc0RyYXcudHMiLCIuLi9Tb3VyY2UvQ29yZS9QaHlzaWNzL0pvaW50Q3lsaW5kcmljYWwudHMiLCIuLi9Tb3VyY2UvQ29yZS9QaHlzaWNzL0pvaW50UHJpc21hdGljLnRzIiwiLi4vU291cmNlL0NvcmUvUGh5c2ljcy9Kb2ludFJhZ2RvbGwudHMiLCIuLi9Tb3VyY2UvQ29yZS9QaHlzaWNzL0pvaW50UmV2b2x1dGUudHMiLCIuLi9Tb3VyY2UvQ29yZS9QaHlzaWNzL0pvaW50U3BoZXJpY2FsLnRzIiwiLi4vU291cmNlL0NvcmUvUGh5c2ljcy9Kb2ludFVuaXZlcnNhbC50cyIsIi4uL1NvdXJjZS9Db3JlL1BoeXNpY3MvSm9pbnRXZWxkaW5nLnRzIiwiLi4vU291cmNlL0NvcmUvUGh5c2ljcy9QaHlzaWNzLnRzIiwiLi4vU291cmNlL0NvcmUvUmF5L0JveC50cyIsIi4uL1NvdXJjZS9Db3JlL1JheS9QaWNrLnRzIiwiLi4vU291cmNlL0NvcmUvUmF5L1BpY2tlci50cyIsIi4uL1NvdXJjZS9Db3JlL1JheS9SYXkudHMiLCIuLi9Tb3VyY2UvQ29yZS9SZW5kZXIvR2l6bW9zLnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1JlbmRlci50cyIsIi4uL1NvdXJjZS9Db3JlL1JlbmRlci9SZW5kZXJNZXNoLnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1ZpZXdwb3J0LnRzIiwiLi4vU291cmNlL0NvcmUvUmVuZGVyL1hSVmlld3BvcnQudHMiLCIuLi9Tb3VyY2UvQ29yZS9TZXJpYWxpemF0aW9uL0ZpbGVJb0Jyb3dzZXJMb2NhbC50cyIsIi4uL1NvdXJjZS9Db3JlL1NlcmlhbGl6YXRpb24vTXV0YWJsZUFycmF5LnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9Qcm9qZWN0LnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9GQlgvQnVmZmVyUmVhZGVyLnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9GQlgvRkJYLnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9GQlgvRkJYTG9hZGVyLnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9GQlgvRkJYTm9kZS50cyIsIi4uL1NvdXJjZS9Db3JlL1NlcmlhbGl6YXRpb24vRkJYL2xvYWRGcm9tTm9kZXMudHMiLCIuLi9Tb3VyY2UvQ29yZS9TZXJpYWxpemF0aW9uL0ZCWC9wYXJzZU5vZGVzRnJvbUJpbmFyeS50cyIsIi4uL1NvdXJjZS9Db3JlL1NlcmlhbGl6YXRpb24vR0xURi9HTFRGLnRzIiwiLi4vU291cmNlL0NvcmUvU2VyaWFsaXphdGlvbi9HTFRGL0dMVEZMb2FkZXIudHMiLCIuLi9Tb3VyY2UvQ29yZS9TaGFkZXIvTWVyZ2VkU2hhZGVyU291cmNlcy50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXIudHMiLCIuLi9Tb3VyY2UvQ29yZS9TaGFkZXIvU2hhZGVyQW1iaWVudE9jY2x1c2lvbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJCbG9vbS50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJGbGF0LnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlckZsYXRTa2luLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlckZsYXRUZXh0dXJlZC50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJGbGF0VGV4dHVyZWRTa2luLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlckdpem1vLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlckdpem1vVGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvQ29yZS9TaGFkZXIvU2hhZGVyR291cmF1ZC50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJHb3VyYXVkU2tpbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJHb3VyYXVkVGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvQ29yZS9TaGFkZXIvU2hhZGVyR291cmF1ZFRleHR1cmVkU2tpbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJMaXQudHMiLCIuLi9Tb3VyY2UvQ29yZS9TaGFkZXIvU2hhZGVyTGl0U2tpbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJMaXRUZXh0dXJlZC50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJMaXRUZXh0dXJlZFNraW4udHMiLCIuLi9Tb3VyY2UvQ29yZS9TaGFkZXIvU2hhZGVyTWF0Q2FwLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlclBob25nLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlclBob25nU2tpbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJQaG9uZ1RleHR1cmVkLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlclBob25nVGV4dHVyZWROb3JtYWxzLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlclBob25nVGV4dHVyZWROb3JtYWxzU2tpbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJQaG9uZ1RleHR1cmVkU2tpbi50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJQaWNrLnRzIiwiLi4vU291cmNlL0NvcmUvU2hhZGVyL1NoYWRlclBpY2tUZXh0dXJlZC50cyIsIi4uL1NvdXJjZS9Db3JlL1NoYWRlci9TaGFkZXJUb29uLnRzIiwiLi4vU291cmNlL0NvcmUvVGV4dHVyZS9UZXh0dXJlLnRzIiwiLi4vU291cmNlL0NvcmUvVGV4dHVyZS9UZXh0dXJlRGVmYXVsdC50cyIsIi4uL1NvdXJjZS9Db3JlL1RpbWUvTG9vcC50cyIsIi4uL1NvdXJjZS9Db3JlL1RpbWUvVGltZS50cyIsIi4uL1NvdXJjZS9Db3JlL1RpbWUvVGltZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFVLFNBQVMsQ0FvQmxCO0FBcEJELFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUNILE1BQXNCLFdBQVc7UUFHL0I7O1dBRUc7UUFDSSxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQWdCLEVBQUUsR0FBRyxLQUFlO1lBQy9ELElBQUksR0FBRyxHQUFXLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLDJCQUEyQjtZQUNsRSxLQUFLLElBQUksR0FBRyxJQUFJLEtBQUs7Z0JBQ25CLElBQUksR0FBRyxZQUFZLE1BQU07b0JBQ3ZCLEdBQUcsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLCtCQUErQjs7b0JBRTVFLEdBQUcsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsK0JBQStCO1lBQ2pFLE9BQU8sR0FBRyxDQUFDO1FBQ2IsQ0FBQztLQUNGO0lBZnFCLHFCQUFXLGNBZWhDLENBQUE7QUFDSCxDQUFDLEVBcEJTLFNBQVMsS0FBVCxTQUFTLFFBb0JsQjtBQ3BCRCxvQ0FBb0M7QUFDcEMsSUFBVSxTQUFTLENBZ0NsQjtBQWpDRCxvQ0FBb0M7QUFDcEMsV0FBVSxTQUFTO0lBQ2pCOztPQUVHO0lBQ0gsSUFBWSxZ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LENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxHQUFHLEdBQVcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxHQUFHLEdBQVcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxHQUFHLEdBQVcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksU0FBUyxHQUFjLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNyRCxTQUFTLENBQUMsR0FBRyxDQUFDO2dCQUNaLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDakMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUNqQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQ2pDLEdB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RyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsU0FBUyxDQUFDLEdBQUcsQ0FBQztnQkFDWixHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdB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QUcsQ0FBQyxFQUFFLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNyRixNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNqRSxNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM3QyxNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUV6QixFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQSxJQUFJO2dCQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQzVFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQSxJQUFJO2dCQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDNUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFBLElBQUk7Z0JBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFBLElBQUk7Z0JBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztnQkFFakYsK0VBQStFO2dCQUMvRSwrRUFBK0U7Z0JBQy9FLG9GQUFvRjtnQkFDcEYsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDckMsQ0FBQztRQUNILENBQUM7UUFDRCxZQUFZO1FBRVosb0JBQW9CO1FBQ3BCOzs7O1dBSUc7UUFDSCxJQUFXLFdBQVc7WUFDcEIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQkFDM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDbkUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztZQUNqQyxDQUFDO1lBQ0QsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQzNCLENBQUM7UUFDRCxJQUFXLFdBQVcsQ0FBQyxZQUFxQjtZQUMxQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUM7UUFDL0MsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSCxJQUFXLFFBQVE7WUFDakIsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ3hCLElBQUksT0FBTyxHQUFZLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBRXBDLElBQUksRUFBRSxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxFQUFFLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLEVBQUUsR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLElBQUksRUFBRSxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxHQUFHLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUU1QyxJQUFJLEVBQUUsR0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLHVEQUF1RDtnQkFFNUYsSUFBSSxRQUFRLEdBQVksRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLEtBQUs7Z0JBRXhDLElBQUksRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVLENBQUM7Z0JBQ3ZDLElBQUksRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVLENBQUM7Z0JBRXZDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztvQkFDZCxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7b0JBQ3pCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUN6QixFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBRXhCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQzFCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBRTFCLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQzt3QkFDNUYsRUFBRSxHQUFHLEVBQUUsQ0FBQzt3QkFDUixFQUFFLEdBQUcsRUFBRSxDQUFDO3dCQUNSLEVBQUUsR0FBRyxFQUFFLENBQUM7b0JBQ1YsQ0FBQztnQkFDSCxDQUFDO3FCQUFNLENBQUM7b0JBQ04sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3JFLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUMvQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUNULENBQUM7Z0JBRUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1lBQzlCLENBQUM7WUFFRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUNELElBQVcsUUFBUSxDQUFDLFNBQStCO1lBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBRUQ7Ozs7V0FJRztRQUNILElBQVcsT0FBTztZQUNoQixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQ2YsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLGdDQUFnQztnQkFDdEYsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLGdDQUFnQztnQkFDdEYsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGlDQUFpQztpQkFDeEYsQ0FBQztnQkFDRixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUM3QixDQUFDO1lBQ0QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxJQUFXLE9BQU8sQ0FBQyxRQUFpQjtZQUNsQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSCxJQUFXLFVBQVU7WUFDbkIsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDMUIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQkFDN0MsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztZQUNoQyxDQUFDO1lBRUQsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzFCLENBQUM7UUFDRCxJQUFXLFVBQVUsQ0FBQyxXQUF1QjtZQUMzQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7UUFDM0MsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxLQUFLO1lBQ2QsSUFBSSxLQUFLLEdBQVksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2pDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNsQixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsRUFBRTtZQUNYLElBQUksRUFBRSxHQUFZLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUM5QixFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDZixPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsT0FBTztZQUNoQixJQUFJLE9BQU8sR0FBWSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDbkMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3BCLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsS0FBSztZQUNkLE9BQU8sVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBQ0QsWUFBWTtRQUVaOztXQUVHO1FBQ0ksT0FBTztZQUNaLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDVixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO2dCQUNWLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0JBQ1YsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQzthQUNYLENBQUMsQ0FBQztRQUNMLENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUs7WUFDVixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksU0FBUztZQUNkLElBQUksQ0FBQyxHQUFpQixJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ2hDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDdkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDdkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDeEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQzthQUN6QixDQUFDLENBQUM7WUFDSCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU07WUFDWCxJQUFJLENBQUMsR0FBaUIsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNoQyxJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUU5QixJQUFJLEVBQUUsR0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO2dCQUNyRCxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFekMsSUFBSSxFQUFFLEdBQVcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQztnQkFDckQsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ3pDLElBQUksRUFBRSxHQUFXLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ3RELENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztZQUMxQyxJQUFJLEVBQUUsR0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUN0RCxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFMUMsSUFBSSxDQUFDLEdBQVcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBRWxFLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ1AsQ0FBQyxHQUFHLEVBQUUsRUFBRSxNQUFNO2dCQUNkLENBQUMsR0FBRyxFQUFFLEVBQUUsTUFBTTtnQkFDZCxDQUFDLEdBQUcsRUFBRSxFQUFFLE1BQU07Z0JBQ2QsQ0FBQyxHQUFHLEVBQUUsRUFBRSxNQUFNO2dCQUNkLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBUyxNQUFNO2dCQUNwRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQVMsTUFBTTtnQkFDcEcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFPLE1BQU07Z0JBQ3BHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBTyxNQUFNO2dCQUNwRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUcsTUFBTTtnQkFDcEcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFHLE1BQU07Z0JBQ3BHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRyxPQUFPO2dCQUNyRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUcsT0FBTztnQkFDckcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFHLE9BQU87Z0JBQ3JHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRyxPQUFPO2dCQUNyRyxD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Q0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQUEvZixDQUFnZ0I7UUFDdmhCLE9BQU8sQ0FBb0U7UUFFM0UsWUFBbUIsVUFBb0IsSUFBSSxDQUFDLE1BQU07WUFDaEQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBSGpCLFlBQU8sR0FBK0QsSUFBSSxDQUFDO1lBeUlwRSxXQUFNLEdBQUcsQ0FBQyxFQUFVLEVBQUUsRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVLEVBQVUsRUFBRTtnQkFDekUsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3RDLENBQUMsQ0FBQztZQXRJQSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVLEVBQUUsRUFBVSxFQUFVLEVBQUU7Z0JBQ3hFLDRFQUE0RTtnQkFDNUUsTUFBTSxDQUFDLEdBQVcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsd0JBQXdCO2dCQUM5RixNQUFNLENBQUMsR0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLEdBQVcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLE1BQU0sQ0FBQyxHQUFXLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxNQUFNLENBQUMsR0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLEdBQVcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsMEJBQTBCO2dCQUM3RSxNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsaURBQWlEO2dCQUMzRSxNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN6QixNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN6QixNQUFNLEVBQUUsR0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN6QixNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsNkNBQTZDO2dCQUN6RSxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUMzQixNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUMzQixNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUUzQixvRkFBb0Y7Z0JBQ3BGLDJGQUEyRjtnQkFDM0YsNEZBQTRGO2dCQUM1RixJQUFJLEtBQUssR0FBVyxDQUFDLENBQUM7Z0JBQ3RCLElBQUksS0FBSyxHQUFXLENBQUMsQ0FBQztnQkFDdEIsSUFBSSxLQUFLLEdBQVcsQ0FBQyxDQUFDO2dCQUN0QixJQUFJLEtBQUssR0FBVyxDQUFDLENBQUM7Z0JBQ3RCLElBQUksRUFBRSxHQUFHLEVBQUU7b0JBQUUsS0FBSyxFQUFFLENBQUM7O29CQUNoQixLQUFLLEVBQUUsQ0FBQztnQkFDYixJQUFJLEVBQUUsR0FBRyxFQUFFO29CQUFFLEtBQUssRUFBRSxDQUFDOztvQkFDaEIsS0FBSyxFQUFFLENBQUM7Z0JBQ2IsSUFBSSxFQUFFLEdBQUcsRUFBRTtvQkFBRSxLQUFLLEVBQUUsQ0FBQzs7b0JBQ2hCLEtBQUssRUFBRSxDQUFDO2dCQUNiLElBQUksRUFBRSxHQUFHLEVBQUU7b0JBQUUsS0FBSyxFQUFFLENBQUM7O29CQUNoQixLQUFLLEVBQUUsQ0FBQztnQkFDYixJQUFJLEVBQUUsR0FBRyxFQUFFO29CQUFFLEtBQUssRUFBRSxDQUFDOztvQkFDaEIsS0FBSyxFQUFFLENBQUM7Z0JBQ2IsSUFBSSxFQUFFLEdBQUcsRUFBRTtvQkFBRSxLQUFLLEVBQUUsQ0FBQzs7b0JBQ2hCLEtBQUssRUFBRSxDQUFDO2dCQUViLHlFQUF5RTtnQkFDekUsK0VBQStFO2dCQUMvRSw4RUFBOEU7Z0JBQzlFLG1GQUFtRjtnQkFDbkYseUNBQXlDO2dCQUN6QyxNQUFNLEVBQUUsR0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxFQUFFLEdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLE1BQU0sRUFBRSxHQUFXLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLEVBQUUsR0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEMsa0RBQWtEO2dCQUNsRCxNQUFNLEVBQUUsR0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxFQUFFLEdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLE1BQU0sRUFBRSxHQUFXLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLEVBQUUsR0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEMsbURBQW1EO2dCQUNuRCxNQUFNLEVBQUUsR0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxFQUFFLEdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLE1BQU0sRUFBRSxHQUFXLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLEVBQUUsR0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFdEMsK0VBQStFO2dCQUMvRSxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxnREFBZ0Q7Z0JBQzVGLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztnQkFDM0MsTUFBTSxFQUFFLEdBQVcsRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO2dCQUMzQyxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQzNDLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQywrQ0FBK0M7Z0JBQ2pHLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxnREFBZ0Q7Z0JBQ2xHLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyw4Q0FBOEM7Z0JBQ2pHLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2xELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2xELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBRWxELG1FQUFtRTtnQkFDbkUsTUFBTSxFQUFFLEdBQVcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDM0IsTUFBTSxFQUFFLEdBQVcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDM0IsTUFBTSxFQUFFLEdBQVcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDM0IsTUFBTSxFQUFFLEdBQVcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFD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R0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDMUUsTUFBTSxFQUFFLEdBQVcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQy9ELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxDQUFDO29CQUN2QixDQUFDLENBQUMsR0FBRztvQkFDTCxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQzFFLE1BQU0sRUFBRSxHQUFXLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUMvRCxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsQ0FBQztvQkFDdkIsQ0FBQyxDQUFDLEdBQUc7b0JBQ0wsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRSxNQUFN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QUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBQ25ELEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxVQUFBLElBQUksQ0FDakIsSUFBSSxDQUFDLFFBQVEsRUFDYixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUMzQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUMzQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUMzQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUMzQyxLQUFLLENBQ04sQ0FBQyxDQUFDO29CQUNILEtBQUssR0FBRyxDQUFDLEtBQUssSUFBSSxVQUFBLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBQSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFBLFNBQVMsQ0FBQyxJQUFJLENBQUM7Z0JBQ3RFLENBQUM7Z0JBQ0QsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLG9EQUFvRDtvQkFDbEYsS0FBSyxHQUFHLENBQUMsS0FBSyxJQUFJLFVBQUEsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFBLFNBQVMsQ0FBQyxJ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LFVBQWtCLElBQUksQ0FBQyxNQUFNO1lBQzVDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMvQyxDQUFDO1FBRU0sUUFBUSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO1lBQzNDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMzQyxDQUFDO1FBRU0sUUFBUSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO1lBQzNDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMzQyxDQUFDO1FBRU0sUUFBUSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO1lBQzNDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRU0sVUFBVSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO1lBQzdDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM3QyxDQUFDO1FBRU0sVUFBVSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO1lBQzdDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxD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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXlNN0MsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBc0I1QyxDQUFDO0lBQ0QsVUFBQSxhQUFhLENBQUMsaUJBQWlCLENBQUMsR0FBRyxRQUFRLENBQUM7Ozs7Ozs7Ozs7RUFVNUMsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLHlCQUF5QixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTBCcEQsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLHlCQUF5QixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7RUFlcEQsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQWtEOUMsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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LFFBQVEsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzNFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ25CLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxFQUFFO1lBQ1gsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3ZCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsS0FBSztZQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxXQUFXO1lBQ2hCLE9BQU8sSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzNGLENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUs7WUFDVix5Q0FBeUM7WUFDekMsdUJBQXVCO1lBQ3ZCLHVFQUF1RTtZQUN2RSwyR0FBMkc7WUFDM0csb0NBQW9DO1lBQ3BDLElBQUk7WUFDSixPQUFPO1lBQ1Asa0hBQWtIO1lBQ2xILE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLENBQUM7S0FDRjtJQTdGWSxlQUFLLFFBNkZqQixDQUFBO0FBQ0gsQ0FBQyxFQTNHUyxTQUFTLEtBQVQsU0FBUyxRQTJHbEIiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBCYXNlIGNsYXNzIGZvciB0aGUgZGlmZmVyZW50IERlYnVnVGFyZ2V0cywgbWFpbmx5IGZvciB0ZWNobmljYWwgcHVycG9zZSBvZiBpbmhlcml0YW5jZVxyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEZWJ1Z1RhcmdldCB7XHJcbiAgICBwdWJsaWMgZGVsZWdhdGVzOiBNYXBEZWJ1Z0ZpbHRlclRvRGVsZWdhdGU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXJnZSB0aGUgZ2l2ZW4gbWVzc2FnZSBhbmQgYXJndW1lbnRzIGludG8gYSBzaW5nbGUgc3RyaW5nLCBzZXBhcmF0ZWQgYnkgJywgJ1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIG1lcmdlQXJndW1lbnRzKF9tZXNzYWdlOiBPYmplY3QsIC4uLl9hcmdzOiBPYmplY3RbXSk6IHN0cmluZyB7XHJcbiAgICAgIGxldCBvdXQ6IHN0cmluZyA9IF9tZXNzYWdlLnRvU3RyaW5nKCk7IC8vSlNPTi5zdHJpbmdpZnkoX21lc3NhZ2UpO1xyXG4gICAgICBmb3IgKGxldCBhcmcgb2YgX2FyZ3MpXHJcbiAgICAgICAgaWYgKGFyZyBpbnN0YW5jZW9mIE51bWJlcilcclxuICAgICAgICAgIG91dCArPSBcIiwgXCIgKyBhcmcudG9QcmVjaXNpb24oMikudG9TdHJpbmcoKTsgLy9KU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIDIpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIG91dCArPSBcIiwgXCIgKyBhcmcudG9TdHJpbmcoKTsgLy9KU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIDIpO1xyXG4gICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vIDxyZWZlcmVuY2UgcGF0aD1cIkRlYnVnQWxlcnQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmaWx0ZXJzIGNvcnJlc3BvbmRpbmcgdG8gZGVidWcgYWN0aXZpdGllcywgbW9yZSB0byBjb21lXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gREVCVUdfRklMVEVSIHtcclxuICAgIE5PTkUgPSAweDAwLFxyXG4gICAgSU5GTyA9IDB4MDEsXHJcbiAgICBMT0cgPSAweDAyLFxyXG4gICAgV0FSTiA9IDB4MDQsXHJcbiAgICBFUlJPUiA9IDB4MDgsXHJcbiAgICBGVURHRSA9IDB4MTAsXHJcbiAgICBDTEVBUiA9IDB4MTAwLFxyXG4gICAgR1JPVVAgPSAweDEwMSxcclxuICAgIEdST1VQQ09MTEFQU0VEID0gMHgxMDIsXHJcbiAgICBHUk9VUEVORCA9IDB4MTA0LFxyXG4gICAgU09VUkNFID0gMHgyMDAsXHJcbiAgICBNRVNTQUdFUyA9IElORk8gfCBMT0cgfCBXQVJOIHwgRVJST1IgfCBGVURHRSxcclxuICAgIEZPUk1BVCA9IENMRUFSIHwgR1JPVVAgfCBHUk9VUENPTExBUFNFRCB8IEdST1VQRU5ELFxyXG4gICAgQUxMID0gTUVTU0FHRVMgfCBGT1JNQVRcclxuICB9XHJcblxyXG4gIGV4cG9ydCBjb25zdCBERUJVR19TWU1CT0w6IHsgW2ZpbHRlcjogbnVtYmVyXTogc3RyaW5nIH0gPSB7XHJcbiAgICBbREVCVUdfRklMVEVSLklORk9dOiBcIuKck1wiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5MT0ddOiBcIuKcjlwiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5XQVJOXTogXCLimqBcIixcclxuICAgIFtERUJVR19GSUxURVIuRVJST1JdOiBcIuKdjFwiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5GVURHRV06IFwi8J+OslwiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5TT1VSQ0VdOiBcIvCflJdcIlxyXG4gIH07XHJcblxyXG4gIGV4cG9ydCB0eXBlIE1hcERlYnVnVGFyZ2V0VG9EZWxlZ2F0ZSA9IE1hcDxEZWJ1Z1RhcmdldCwgRnVuY3Rpb24+O1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWFwRGVidWdGaWx0ZXJUb0RlbGVnYXRlIHsgW2ZpbHRlcjogbnVtYmVyXTogRnVuY3Rpb24gfVxyXG59IiwiLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCJEZWJ1Z1RhcmdldC50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogUm91dGluZyB0byB0aGUgc3RhbmRhcmQtY29uc29sZVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBEZWJ1Z0NvbnNvbGUgZXh0ZW5kcyBEZWJ1Z1RhcmdldCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlbGVnYXRlczogTWFwRGVidWdGaWx0ZXJUb0RlbGVnYXRlID0ge1xyXG4gICAgICBbREVCVUdfRklMVEVSLklORk9dOiBjb25zb2xlLmluZm8sXHJcbiAgICAgIFtERUJVR19GSUxURVIuTE9HXTogY29uc29sZS5sb2csXHJcbiAgICAgIFtERUJVR19GSUxURVIuV0FSTl06IGNvbnNvbGUud2FybixcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5FUlJPUl06IGNvbnNvbGUuZXJyb3IsXHJcbiAgICAgIFtERUJVR19GSUxURVIuRlVER0VdOiBEZWJ1Z0NvbnNvbGUuZnVkZ2UsXHJcbiAgICAgIFtERUJVR19GSUxURVIuQ0xFQVJdOiBjb25zb2xlLmNsZWFyLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkdST1VQXTogY29uc29sZS5ncm91cCxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5HUk9VUENPTExBUFNFRF06IGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQsXHJcbiAgICAgIFtERUJVR19GSUxURVIuR1JPVVBFTkRdOiBjb25zb2xlLmdyb3VwRW5kLFxyXG4gICAgICBbREVCVUdfRklMVEVSLlNPVVJDRV06IERlYnVnQ29uc29sZS5zb3VyY2VcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG91bGQgYmUgdXNlZCB0byBkaXNwbGF5IHVuY3JpdGljYWwgc3RhdGUgaW5mb3JtYXRpb24gb2YgRlVER0UsIG9ubHkgdmlzaWJsZSBpbiBicm93c2VyJ3MgdmVyYm9zZSBtb2RlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZnVkZ2UoX21lc3NhZ2U6IE9iamVjdCwgLi4uX2FyZ3M6IE9iamVjdFtdKTogdm9pZCB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5GVURHRV0sIF9tZXNzYWdlLCAuLi5fYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyBhbiBleHRyYSBsaW5lIHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIHNvdXJjZSBvZiB0aGUgZGVidWcgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNvdXJjZShfbWVzc2FnZTogT2JqZWN0LCAuLi5fYXJnczogT2JqZWN0W10pOiB2b2lkIHtcclxuICAgICAgY29uc29sZS5sb2coREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5TT1VSQ0VdLCBfbWVzc2FnZSwgLi4uX2FyZ3MpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdUYXJnZXQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEZWJ1Z0ludGVyZmFjZXMudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEZWJ1Z0NvbnNvbGUudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBEZWJ1Zy1DbGFzcyBvZmZlcnMgZnVuY3Rpb25zIGtub3duIGZyb20gdGhlIGNvbnNvbGUtb2JqZWN0IGFuZCBhZGRpdGlvbnMsIFxyXG4gICAqIHJvdXRpbmcgdGhlIGluZm9ybWF0aW9uIHRvIHZhcmlvdXMge0BsaW5rIERlYnVnVGFyZ2V0fXMgdGhhdCBjYW4gYmUgZWFzaWx5IGRlZmluZWQgYnkgdGhlIGRldmVsb3BlcnMgYW5kIHJlZ2lzdGVyZCBieSB1c2Vyc1xyXG4gICAqIE92ZXJyaWRlIGZ1bmN0aW9ucyBpbiBzdWJjbGFzc2VzIG9mIHtAbGluayBEZWJ1Z1RhcmdldH0gYW5kIHJlZ2lzdGVyIHRoZW0gYXMgdGhlaXIgZGVsZWdhdGVzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIERlYnVnIHtcclxuICAgIC8qKlxyXG4gICAgICogRm9yIGVhY2ggc2V0IGZpbHRlciwgdGhpcyBhc3NvY2lhdGl2ZSBhcnJheSBrZWVwcyByZWZlcmVuY2VzIHRvIHRoZSByZWdpc3RlcmVkIGRlbGVnYXRlIGZ1bmN0aW9ucyBvZiB0aGUgY2hvc2VuIHtAbGluayBEZWJ1Z1RhcmdldH1zXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGRlbGVnYXRlczogeyBbZmlsdGVyOiBudW1iZXJdOiBNYXBEZWJ1Z1RhcmdldFRvRGVsZWdhdGUgfSA9IERlYnVnLnNldHVwQ29uc29sZSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGUtIC8gQWN0aXZhdGUgYSBmaWx0ZXIgZm9yIHRoZSBnaXZlbiBEZWJ1Z1RhcmdldC4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0RmlsdGVyKF90YXJnZXQ6IERlYnVnVGFyZ2V0LCBfZmlsdGVyOiBERUJVR19GSUxURVIpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgZmlsdGVyIGluIERlYnVnLmRlbGVnYXRlcylcclxuICAgICAgICBEZWJ1Zy5kZWxlZ2F0ZXNbZmlsdGVyXS5kZWxldGUoX3RhcmdldCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBmaWx0ZXIgaW4gREVCVUdfRklMVEVSKSB7XHJcbiAgICAgICAgbGV0IHBhcnNlZDogbnVtYmVyID0gcGFyc2VJbnQoZmlsdGVyKTtcclxuICAgICAgICBpZiAoaXNOYU4ocGFyc2VkKSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGlmIChbREVCVUdfRklMVEVSLk1FU1NBR0VTLCBERUJVR19GSUxURVIuRk9STUFULCBERUJVR19GSUxURVIuQUxMXS5pbmRleE9mKHBhcnNlZCkgIT0gLTEpXHJcbiAgICAgICAgICAvLyBkb250IGRlbGVnYXRlIGNvbWJvcy4uLiBcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmIChfZmlsdGVyICYgcGFyc2VkKVxyXG4gICAgICAgICAgRGVidWcuZGVsZWdhdGVzW3BhcnNlZF0uc2V0KF90YXJnZXQsIF90YXJnZXQuZGVsZWdhdGVzW3BhcnNlZF0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGZpbHRlcihzKSBmb3IgdGhlIGdpdmVuIERlYnVnVGFyZ2V0LiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRGaWx0ZXIoX3RhcmdldDogRGVidWdUYXJnZXQpOiBERUJVR19GSUxURVIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBERUJVR19GSUxURVIgPSAwO1xyXG4gICAgICBmb3IgKGxldCBmaWx0ZXIgaW4gX3RhcmdldC5kZWxlZ2F0ZXMpXHJcbiAgICAgICAgcmVzdWx0IHw9IHBhcnNlSW50KGZpbHRlcik7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBmaWx0ZXIgdG8gdGhlIGdpdmVuIERlYnVnVGFyZ2V0LiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhZGRGaWx0ZXIoX3RhcmdldDogRGVidWdUYXJnZXQsIF9maWx0ZXI6IERFQlVHX0ZJTFRFUik6IHZvaWQge1xyXG4gICAgICBsZXQgY3VycmVudDogREVCVUdfRklMVEVSID0gRGVidWcuZ2V0RmlsdGVyKF90YXJnZXQpO1xyXG4gICAgICBEZWJ1Zy5zZXRGaWx0ZXIoX3RhcmdldCwgY3VycmVudCB8IF9maWx0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGEgZmlsdGVyIGZyb20gdGhlIGdpdmVuIERlYnVnVGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUZpbHRlcihfdGFyZ2V0OiBEZWJ1Z1RhcmdldCwgX2ZpbHRlcjogREVCVUdfRklMVEVSKTogdm9pZCB7XHJcbiAgICAgIGxldCBjdXJyZW50OiBERUJVR19GSUxURVIgPSBEZWJ1Zy5nZXRGaWx0ZXIoX3RhcmdldCk7XHJcbiAgICAgIERlYnVnLnNldEZpbHRlcihfdGFyZ2V0LCBjdXJyZW50IF4gX2ZpbHRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmZvKC4uLikgZGlzcGxheXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB3aXRoIGxvdyBwcmlvcml0eVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGluZm8oX21lc3NhZ2U6IHVua25vd24sIC4uLl9hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLklORk8sIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGluZm9ybWF0aW9uIHdpdGggbWVkaXVtIHByaW9yaXR5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9nKF9tZXNzYWdlOiB1bmtub3duLCAuLi5fYXJnczogdW5rbm93bltdKTogdm9pZCB7XHJcbiAgICAgIERlYnVnLmRlbGVnYXRlKERFQlVHX0ZJTFRFUi5MT0csIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGluZm9ybWF0aW9uIGFib3V0IG5vbi1jb25mb3JtaXRpZXMgaW4gdXNhZ2UsIHdoaWNoIGlzIGVtcGhhc2l6ZWQgZS5nLiBieSBjb2xvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHdhcm4oX21lc3NhZ2U6IHVua25vd24sIC4uLl9hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLldBUk4sIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGNyaXRpY2FsIGluZm9ybWF0aW9uIGFib3V0IGZhaWx1cmVzLCB3aGljaCBpcyBlbXBoYXNpemVkIGUuZy4gYnkgY29sb3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBlcnJvcihfbWVzc2FnZTogdW5rbm93biwgLi4uX2FyZ3M6IHVua25vd25bXSk6IHZvaWQge1xyXG4gICAgICBEZWJ1Zy5kZWxlZ2F0ZShERUJVR19GSUxURVIuRVJST1IsIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIG1lc3NhZ2VzIGZyb20gRlVER0VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBmdWRnZShfbWVzc2FnZTogdW5rbm93biwgLi4uX2FyZ3M6IHVua25vd25bXSk6IHZvaWQge1xyXG4gICAgICBEZWJ1Zy5kZWxlZ2F0ZShERUJVR19GSUxURVIuRlVER0UsIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgb3V0cHV0IGFuZCByZW1vdmVzIHByZXZpb3VzIG1lc3NhZ2VzIGlmIHBvc3NpYmxlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIERlYnVnLmRlbGVnYXRlKERFQlVHX0ZJTFRFUi5DTEVBUiwgbnVsbCwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIGEgbmV3IGdyb3VwIGZvciBtZXNzYWdlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdyb3VwKF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLkdST1VQLCBfbmFtZSwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIGEgbmV3IGdyb3VwIGZvciBtZXNzYWdlcyB0aGF0IGlzIGNvbGxhcHNlZCBhdCBmaXJzdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdyb3VwQ29sbGFwc2VkKF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLkdST1VQQ09MTEFQU0VELCBfbmFtZSwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlcyB0aGUgeW91bmdlc3QgZ3JvdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBncm91cEVuZCgpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLkdST1VQRU5ELCBudWxsLCBudWxsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTG9nIGEgYnJhbmNoIG9mIHRoZSBub2RlIGhpZXJhcmNoeVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJyYW5jaChfYnJhbmNoOiBOb2RlKTogdm9pZCB7XHJcbiAgICAgIGlmIChfYnJhbmNoLm5DaGlsZHJlbiA+IDApXHJcbiAgICAgICAgRGVidWcuZ3JvdXAoX2JyYW5jaC5uYW1lKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIERlYnVnLmZ1ZGdlKF9icmFuY2gubmFtZSk7XHJcblxyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiBfYnJhbmNoLmdldENoaWxkcmVuKCkpIERlYnVnLmJyYW5jaChjaGlsZCk7XHJcblxyXG4gICAgICBpZiAoX2JyYW5jaC5uQ2hpbGRyZW4gPiAwKVxyXG4gICAgICAgIERlYnVnLmdyb3VwRW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyBtZXNzYWdlcyBhYm91dCB0aGUgc291cmNlIG9mIHRoZSBkZWJ1ZyBjYWxsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc291cmNlKF9tZXNzYWdlOiB1bmtub3duLCAuLi5fYXJnczogdW5rbm93bltdKTogdm9pZCB7XHJcbiAgICAgIERlYnVnLmRlbGVnYXRlKERFQlVHX0ZJTFRFUi5TT1VSQ0UsIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rdXAgYWxsIGRlbGVnYXRlcyByZWdpc3RlcmVkIHRvIHRoZSBmaWx0ZXIgYW5kIGNhbGwgdGhlbSB1c2luZyB0aGUgZ2l2ZW4gYXJndW1lbnRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGRlbGVnYXRlKF9maWx0ZXI6IERFQlVHX0ZJTFRFUiwgX21lc3NhZ2U6IHVua25vd24sIF9hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuICAgICAgaWYgKF9maWx0ZXIgPT0gREVCVUdfRklMVEVSLkxPRyB8fCBfZmlsdGVyID09IERFQlVHX0ZJTFRFUi5XQVJOIHx8IF9maWx0ZXIgPT0gREVCVUdfRklMVEVSLkVSUk9SKSB7XHJcbiAgICAgICAgaWYgKERlYnVnLmRlbGVnYXRlc1tERUJVR19GSUxURVIuU09VUkNFXSlcclxuICAgICAgICAgIGZvciAobGV0IGRlbGVnYXRlIG9mIERlYnVnLmRlbGVnYXRlc1tERUJVR19GSUxURVIuU09VUkNFXS52YWx1ZXMoKSlcclxuICAgICAgICAgICAgaWYgKGRlbGVnYXRlKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHRyYWNlOiBzdHJpbmdbXSA9IG5ldyBFcnJvcihcIlRlc3RcIikuc3RhY2suc3BsaXQoXCJcXG5cIik7XHJcbiAgICAgICAgICAgICAgZGVsZWdhdGUodHJhY2VbM10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGRlbGVnYXRlczogTWFwRGVidWdUYXJnZXRUb0RlbGVnYXRlID0gRGVidWcuZGVsZWdhdGVzW19maWx0ZXJdO1xyXG4gICAgICBmb3IgKGxldCBkZWxlZ2F0ZSBvZiBkZWxlZ2F0ZXMudmFsdWVzKCkpXHJcbiAgICAgICAgaWYgKGRlbGVnYXRlKVxyXG4gICAgICAgICAgaWYgKF9hcmdzICYmIF9hcmdzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIGRlbGVnYXRlKF9tZXNzYWdlLCAuLi5fYXJncyk7XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGRlbGVnYXRlKF9tZXNzYWdlKTtcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHNldHVwIHJvdXRpbmcgdG8gc3RhbmRhcmQgY29uc29sZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzZXR1cENvbnNvbGUoKToge30ge1xyXG4gICAgICBsZXQgcmVzdWx0OiB7IFtmaWx0ZXI6IG51bWJlcl06IE1hcERlYnVnVGFyZ2V0VG9EZWxlZ2F0ZSB9ID0ge307XHJcbiAgICAgIGxldCBmaWx0ZXJzOiBERUJVR19GSUxURVJbXSA9IFtcclxuICAgICAgICBERUJVR19GSUxURVIuSU5GTywgREVCVUdfRklMVEVSLkxPRywgREVCVUdfRklMVEVSLldBUk4sIERFQlVHX0ZJTFRFUi5FUlJPUiwgREVCVUdfRklMVEVSLkZVREdFLFxyXG4gICAgICAgIERFQlVHX0ZJTFRFUi5DTEVBUiwgREVCVUdfRklMVEVSLkdST1VQLCBERUJVR19GSUxURVIuR1JPVVBDT0xMQVBTRUQsIERFQlVHX0ZJTFRFUi5HUk9VUEVORCxcclxuICAgICAgICBERUJVR19GSUxURVIuU09VUkNFXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBmb3IgKGxldCBmaWx0ZXIgb2YgZmlsdGVycylcclxuICAgICAgICByZXN1bHRbZmlsdGVyXSA9IG5ldyBNYXAoW1tEZWJ1Z0NvbnNvbGUsIERlYnVnQ29uc29sZS5kZWxlZ2F0ZXNbZmlsdGVyXV1dKTtcclxuXHJcbiAgICAgIHJlc3VsdFtERUJVR19GSUxURVIuU09VUkNFXS5kZWxldGUoRGVidWdDb25zb2xlKTtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGludGVyZmFjZSBNYXBFdmVudFR5cGVUb0xpc3RlbmVyIHtcclxuICAgIFtldmVudFR5cGU6IHN0cmluZ106IEV2ZW50TGlzdGVuZXJVbmlmaWVkW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUeXBlcyBvZiBldmVudHMgc3BlY2lmaWMgdG8gRlVER0UsIGluIGFkZGl0aW9uIHRvIHRoZSBzdGFuZGFyZCBET00vQnJvd3Nlci1UeXBlcyBhbmQgY3VzdG9tIHN0cmluZ3NcclxuICAgKi9cclxuICBleHBvcnQgY29uc3QgZW51bSBFVkVOVCB7XHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB0YXJnZXRzIHJlZ2lzdGVyZWQgYXQge0BsaW5rIExvb3B9LCB3aGVuIHJlcXVlc3RlZCBhbmltYXRpb24gZnJhbWUgc3RhcnRzICovXHJcbiAgICBMT09QX0ZSQU1FID0gXCJsb29wRnJhbWVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIENvbXBvbmVudH0gd2hlbiBpdHMgYmVpbmcgYWRkZWQgdG8gYSB7QGxpbmsgTm9kZX0gKi9cclxuICAgIENPTVBPTkVOVF9BREQgPSBcImNvbXBvbmVudEFkZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSB7QGxpbmsgQ29tcG9uZW50fSB3aGVuIGl0cyBiZWluZyByZW1vdmVkIGZyb20gYSB7QGxpbmsgTm9kZX0gKi9cclxuICAgIENPTVBPTkVOVF9SRU1PVkUgPSBcImNvbXBvbmVudFJlbW92ZVwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSB7QGxpbmsgQ29tcG9uZW50fSB3aGVuIGl0cyBiZWluZyBhY3RpdmF0ZWQgKi9cclxuICAgIENPTVBPTkVOVF9BQ1RJVkFURSA9IFwiY29tcG9uZW50QWN0aXZhdGVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIENvbXBvbmVudH0gd2hlbiBpdHMgYmVpbmcgZGVhY3RpdmF0ZWQgKi9cclxuICAgIENPTVBPTkVOVF9ERUFDVElWQVRFID0gXCJjb21wb25lbnREZWFjdGl2YXRlXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byBhIHtAbGluayBOb2RlfSwgaXQncyBzdWNjZXNzb3JzIGFuZCBhbmNlc3RvcnMgd2hlbiBpdHMgYmVpbmcgYWN0aXZhdGVkICovXHJcbiAgICBOT0RFX0FDVElWQVRFID0gXCJub2RlQWN0aXZhdGVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIE5vZGV9LCBpdCdzIHN1Y2Nlc3NvcnMgYW5kIGFuY2VzdG9ycyB3aGVuIGl0cyBiZWluZyBkZWFjdGl2YXRlZCAqL1xyXG4gICAgTk9ERV9ERUFDVElWQVRFID0gXCJub2RlRGVhY3RpdmF0ZVwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSBjaGlsZCB7QGxpbmsgTm9kZX0gYW5kIGl0cyBhbmNlc3RvcnMgYWZ0ZXIgaXQgd2FzIGFwcGVuZGVkIHRvIGEgcGFyZW50ICovXHJcbiAgICBDSElMRF9BUFBFTkQgPSBcImNoaWxkQXBwZW5kXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byBhIGNoaWxkIHtAbGluayBOb2RlfSBhbmQgaXRzIGFuY2VzdG9ycyBqdXN0IGJlZm9yZSBpdHMgYmVpbmcgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgKi9cclxuICAgIENISUxEX1JFTU9WRSA9IFwiY2hpbGRSZW1vdmVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIE11dGFibGV9IHdoZW4gaXQgbXV0YXRlcyAqL1xyXG4gICAgTVVUQVRFID0gXCJtdXRhdGVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIGJ5IGEge0BsaW5rIEdyYXBofSB3aGVuIGl0IG11dGF0ZXMsIHtAbGluayBHcmFwaEluc3RhbmNlfXMgY29ubmVjdGVkIHRvIHRoZSBncmFwaCBsaXN0ZW4gKi9cclxuICAgIE1VVEFURV9HUkFQSCA9IFwibXV0YXRlR3JhcGhcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIGJ5IGEge0BsaW5rIEdyYXBoSW5zdGFuY2V9IHdoZW4gaXQgcmVmbGVjdGVkIHRoZSBtdXRhdGlvbiBvZiB0aGUge0BsaW5rIEdyYXBofSBpdCdzIGNvbm5lY3RlZCB0byAqL1xyXG4gICAgTVVUQVRFX0lOU1RBTkNFID0gXCJtdXRhdGVHcmFwaERvbmVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBWaWV3cG9ydH0gd2hlbiBpdCBnZXRzIHRoZSBmb2N1cyB0byByZWNlaXZlIGtleWJvYXJkIGlucHV0ICovXHJcbiAgICBGT0NVU19JTiA9IFwiZm9jdXNpblwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIFZpZXdwb3J0fSB3aGVuIGl0IGxvc2VzIHRoZSBmb2N1cyB0byByZWNlaXZlIGtleWJvYXJkIGlucHV0ICovXHJcbiAgICBGT0NVU19PVVQgPSBcImZvY3Vzb3V0XCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgTm9kZX0gd2hlbiBpdCdzIGRvbmUgc2VyaWFsaXppbmcgKi9cclxuICAgIE5PREVfU0VSSUFMSVpFRCA9IFwibm9kZVNlcmlhbGl6ZWRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBOb2RlfSBhbmQgYWxsIGl0cyB7QGxpbmsgQ29tcG9uZW50fXMgd2hlbiBpdCdzIGRvbmUgZGVzZXJpYWxpemluZywgc28gYWxsIGNvbXBvbmVudHMsIGNoaWxkcmVuIGFuZCBhdHRyaWJ1dGVzIGFyZSBhdmFpbGFibGUgKi9cclxuICAgIE5PREVfREVTRVJJQUxJWkVEID0gXCJub2RlRGVzZXJpYWxpemVkXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgR3JhcGhJbnN0YW5jZX0gd2hlbiBpdCdzIGNvbnRlbnQgaXMgc2V0IGFjY29yZGluZyB0byBhIHNlcmlhbGl6YXRpb24gb2YgYSB7QGxpbmsgR3JhcGh9LiBCcm9hZGNhc3RlZCwgc28gbmVlZHMgdG8gYmUgY2F1Z2h0IGluIGNhcHR1cmUuICovXHJcbiAgICBHUkFQSF9JTlNUQU5USUFURUQgPSBcImdyYXBoSW5zdGFudGlhdGVkXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byBhIHtAbGluayBHcmFwaH0gd2hlbiBpdCdzIGZpbmlzaGVkIGRlc2VyaWFsaXppbmcuIEJyb2FkY2FzdGVkLCBzbyBuZWVkcyB0byBiZSBjYXVnaHQgaW4gY2FwdHVyZS4gKi9cclxuICAgIEdSQVBIX0RFU0VSSUFMSVpFRCA9IFwiZ3JhcGhEZXNlcmlhbGl6ZWRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIGJ5IGEge0BsaW5rIEdyYXBofSB3aGVuIGl0IGFuZCBpdHMgY29ubmVjdGVkIGluc3RhbmNlcyBoYXZlIGZpbmlzaGVkIG11dGF0aW5nICAqL1xyXG4gICAgR1JBUEhfTVVUQVRFRCA9IFwiZ3JhcGhNdXRhdGVkXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgVGltZX0gd2hlbiBpdCdzIHNjYWxpbmcgY2hhbmdlZCAgKi9cclxuICAgIFRJTUVfU0NBTEVEID0gXCJ0aW1lU2NhbGVkXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgRmlsZUlvQnJvd3NlckxvY2FsfSB3aGVuIGEgbGlzdCBvZiBmaWxlcyBoYXMgYmVlbiBsb2FkZWQgICovXHJcbiAgICBGSUxFX0xPQURFRCA9IFwiZmlsZUxvYWRlZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIEZpbGVJb0Jyb3dzZXJMb2NhbH0gd2hlbiBhIGxpc3Qgb2YgZmlsZXMgaGFzIGJlZW4gc2F2ZWQgKi9cclxuICAgIEZJTEVfU0FWRUQgPSBcImZpbGVTYXZlZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIE5vZGV9IHdoZW4gcmVjYWxjdWxhdGluZyB0cmFuc2Zvcm1zIGZvciByZW5kZXIgKi9cclxuICAgIFJFTkRFUl9QUkVQQVJFID0gXCJyZW5kZXJQcmVwYXJlXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgVmlld3BvcnR9IGFuZCB7QGxpbmsgTm9kZX0gd2hlbiByZWNhbGN1bGF0aW9uIG9mIHRoZSBicmFuY2ggdG8gcmVuZGVyIHN0YXJ0cy4gKi9cclxuICAgIFJFTkRFUl9QUkVQQVJFX1NUQVJUID0gXCJyZW5kZXJQcmVwYXJlU3RhcnRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBWaWV3cG9ydH0gYW5kIHtAbGluayBOb2RlfSB3aGVuIHJlY2FsY3VsYXRpb24gb2YgdGhlIGJyYW5jaCB0byByZW5kZXIgZW5kcy4gVGhlIGJyYW5jaCBkaXNwYXRjaGVzIGJlZm9yZSB0aGUgbGlnaHRzIGFyZSB0cmFuc21pdHRlZCB0byB0aGUgc2hhZGVycyAgKi9cclxuICAgIFJFTkRFUl9QUkVQQVJFX0VORCA9IFwicmVuZGVyUHJlcGFyZUVuZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIFZpZXdwb3J0fSBhdCB0aGUgZW5kIG9mIGEgcmVuZGVyZWQgZnJhbWUgcmlnaHQgYmVmb3JlIGl0IGdldHMgZGlzcGxheWVkLiBBdCB0aGlzIHBvaW50IHtAbGluayBHaXptb3N9IGNhbiBzdGlsbCBiZSBkcmF3bi4gKi9cclxuICAgIFJFTkRFUl9FTkQgPSBcInJlbmRlckVuZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIEpvaW50fS1Db21wb25lbnRzIGluIG9yZGVyIHRvIGRpc2Nvbm5lY3QgKi9cclxuICAgIERJU0NPTk5FQ1RfSk9JTlQgPSBcImRpc2Nvbm5lY3RKb2ludFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIE5vZGV9IHdoZW4gaXQgZ2V0cyBhdHRhY2hlZCB0byBhIHZpZXdwb3J0IGZvciByZW5kZXJpbmcuIEJyb2FkY2FzdGVkLCBzbyBuZWVkcyB0byBiZSBjYXVnaHQgaW4gY2FwdHVyZS4gKi9cclxuICAgIEFUVEFDSF9CUkFOQ0ggPSBcImF0dGFjaEJyYW5jaFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIFByb2plY3R9IHdoZW4gaXQncyBkb25lIGxvYWRpbmcgcmVzb3VyY2VzIGZyb20gYSB1cmwgKi9cclxuICAgIFJFU09VUkNFU19MT0FERUQgPSBcInJlc291cmNlc0xvYWRlZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIENvbXBvbmVudFdhbGtlcn0gYW5kIHtAbGluayBDb21wb25lbnRXYXlwb2ludH0gd2hlbiBhIHtAbGluayBDb21wb25lbnRXYWxrZXJ9IHJlYWNoZXMgYSB7QGxpbmsgV2F5cG9pbnR9IG9yIHtAbGluayBDb21wb25lbnRXYXlwb2ludH0gKi9cclxuICAgIFdBWVBPSU5UX1JFQUNIRUQgPSBcIndheXBvaW50UmVhY2hlZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIENvbXBvbmVudFdhbGtlcn0gd2hlbiB0aGUgZmluYWwge0BsaW5rIFdheXBvaW50fSBpbiB0aGUgY3VycmVudCBwYXRoIGhhcyBiZWVuIHJlYWNoZWQgKi9cclxuICAgIFBBVEhJTkdfQ09OQ0xVREVEID0gXCJwYXRoaW5nQ29uY2x1ZGVkXCJcclxuICB9XHJcblxyXG4gIC8qKiBVbmlvbiB0eXBlIG9mIG90aGVyIGV2ZW50IHR5cGVzIHNlcnZpbmcgYXMgYW5ub3RhdGlvbiBmb3IgbGlzdGVuZXJzIGFuZCBoYW5kbGVycyAqL1xyXG4gIGV4cG9ydCB0eXBlIEV2ZW50VW5pZmllZCA9IEV2ZW50IHwgQ3VzdG9tRXZlbnQgfCBFdmVudFBoeXNpY3M7XHJcblxyXG4gIC8qKiBVbmlmaWVkIGxpc3RlbmVyIHR5cGUgZXh0ZW5kaW5nIEV2ZW50TGlzdGVuZXIgYW5kIEV2ZW50TGlzdGVuZXJPYmplY3QgZm9yIEN1c3RvbUV2ZW50IGFuZCBvdGhlcnMgKi9cclxuICBleHBvcnQgdHlwZSBFdmVudExpc3RlbmVyVW5pZmllZCA9XHJcbiAgICAoKF9ldmVudDogRXZlbnQpID0+IHZvaWQpIHxcclxuICAgICgoX2V2ZW50OiBDdXN0b21FdmVudCkgPT4gdm9pZCkgfFxyXG4gICAgKChfZXZlbnQ6IEV2ZW50UGh5c2ljcykgPT4gdm9pZCkgfFxyXG4gICAgKChfZXZlbnQ6IEV2ZW50VGltZXIpID0+IHZvaWQpIHxcclxuICAgIEV2ZW50TGlzdGVuZXIgfFxyXG4gICAgRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdDtcclxuXHJcbiAgLyoqIEV4dGVuZHMgRXZlbnRUYXJnZXQgdG8gd29yayB3aXRoIHtAbGluayBFdmVudExpc3RlbmVyVW5pZmllZH0gYW5kIHtAbGluayBFdmVudFVuaWZpZWR9ICovXHJcbiAgZXhwb3J0IGNsYXNzIEV2ZW50VGFyZ2V0VW5pZmllZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIC8qKlxyXG4gICAgICogU2VlIHtAbGluayBFdmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyfSBmb3IgcmVmZXJlbmNlLiBXb3JrcyB3aXRoIHtAbGluayBFdmVudExpc3RlbmVyVW5pZmllZH0gYW5kIHtAbGluayBFdmVudFVuaWZpZWR9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRFdmVudExpc3RlbmVyKF90eXBlOiBzdHJpbmcsIF9oYW5kbGVyOiBFdmVudExpc3RlbmVyVW5pZmllZCwgX29wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgc3VwZXIuYWRkRXZlbnRMaXN0ZW5lcihfdHlwZSwgPEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3Q+X2hhbmRsZXIsIF9vcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlZSB7QGxpbmsgRXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcn0gZm9yIHJlZmVyZW5jZS4gV29ya3Mgd2l0aCB7QGxpbmsgRXZlbnRMaXN0ZW5lclVuaWZpZWR9IGFuZCB7QGxpbmsgRXZlbnRVbmlmaWVkfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lcihfdHlwZTogc3RyaW5nLCBfaGFuZGxlcjogRXZlbnRMaXN0ZW5lclVuaWZpZWQsIF9vcHRpb25zPzogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoX3R5cGUsIDxFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0Pl9oYW5kbGVyLCBfb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWUge0BsaW5rIEV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnR9IGZvciByZWZlcmVuY2UuIFdvcmtzIHdpdGggd2l0aCB7QGxpbmsgRXZlbnRVbmlmaWVkfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudChfZXZlbnQ6IEV2ZW50VW5pZmllZCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gc3VwZXIuZGlzcGF0Y2hFdmVudChfZXZlbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmFzZSBjbGFzcyBmb3IgRXZlbnRUYXJnZXQgc2luZ2xldG9ucywgd2hpY2ggYXJlIGZpeGVkIGVudGl0aWVzIGluIHRoZSBzdHJ1Y3R1cmUgb2YgRlVER0UsIHN1Y2ggYXMgdGhlIGNvcmUgbG9vcCBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRXZlbnRUYXJnZXRTdGF0aWMgZXh0ZW5kcyBFdmVudFRhcmdldFVuaWZpZWQge1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyB0YXJnZXRTdGF0aWM6IEV2ZW50VGFyZ2V0U3RhdGljID0gbmV3IEV2ZW50VGFyZ2V0U3RhdGljKCk7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHtAbGluayB0YXJnZXRTdGF0aWN9LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZEV2ZW50TGlzdGVuZXIoX3R5cGU6IHN0cmluZywgX2hhbmRsZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcclxuICAgICAgRXZlbnRUYXJnZXRTdGF0aWMudGFyZ2V0U3RhdGljLmFkZEV2ZW50TGlzdGVuZXIoX3R5cGUsIF9oYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lciBmcm9tIHtAbGluayB0YXJnZXRTdGF0aWN9LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoX3R5cGU6IHN0cmluZywgX2hhbmRsZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcclxuICAgICAgRXZlbnRUYXJnZXRTdGF0aWMudGFyZ2V0U3RhdGljLnJlbW92ZUV2ZW50TGlzdGVuZXIoX3R5cGUsIF9oYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3BhdGNoIGFuIGV2ZW50IG9uIHtAbGluayB0YXJnZXRTdGF0aWN9LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRpc3BhdGNoRXZlbnQoX2V2ZW50OiBFdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICBFdmVudFRhcmdldFN0YXRpYy50YXJnZXRTdGF0aWMuZGlzcGF0Y2hFdmVudChfZXZlbnQpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBJbnRlcmZhY2UgZGVzY3JpYmluZyB0aGUgZGF0YXR5cGVzIG9mIHRoZSBhdHRyaWJ1dGVzIGEgbXV0YXRvciBhcyBzdHJpbmdzIFxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgIFthdHRyaWJ1dGU6IHN0cmluZ106IHN0cmluZyB8IE9iamVjdDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogSW50ZXJmYWNlIGRlc2NyaWJpbmcgYSBtdXRhdG9yLCB3aGljaCBpcyBhbiBhc3NvY2lhdGl2ZSBhcnJheSB3aXRoIG5hbWVzIG9mIGF0dHJpYnV0ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgdmFsdWVzXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNdXRhdG9yIHtcclxuICAgIFthdHRyaWJ1dGU6IHN0cmluZ106IEdlbmVyYWw7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIEludGVyZmFjZXMgZGVkaWNhdGVkIGZvciBlYWNoIHB1cnBvc2UuIEV4dHJhIGF0dHJpYnV0ZSBuZWNlc3NhcnkgZm9yIGNvbXBpbGV0aW1lIHR5cGUgY2hlY2tpbmcsIG5vdCBleGlzdGVudCBhdCBydW50aW1lXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNdXRhdG9yRm9yQW5pbWF0aW9uIGV4dGVuZHMgTXV0YXRvciB7IHJlYWRvbmx5IGZvckFuaW1hdGlvbjogbnVsbCB9XHJcbiAgZXhwb3J0IGludGVyZmFjZSBNdXRhdG9yRm9yVXNlckludGVyZmFjZSBleHRlbmRzIE11dGF0b3IgeyByZWFkb25seSBmb3JVc2VySW50ZXJmYWNlOiBudWxsIH1cclxuICAvLyBleHBvcnQgaW50ZXJmYWNlIE11dGF0b3JGb3JDb21wb25lbnQgZXh0ZW5kcyBNdXRhdG9yIHsgcmVhZG9ubHkgZm9yVXNlckNvbXBvbmVudDogbnVsbDsgfVxyXG5cclxuICAvKipcclxuICAgKiBDb2xsZWN0IGFwcGxpY2FibGUgYXR0cmlidXRlcyBvZiB0aGUgaW5zdGFuY2UgYW5kIGNvcGllcyBvZiB0aGVpciB2YWx1ZXMgaW4gYSBNdXRhdG9yLW9iamVjdFxyXG4gICAqL1xyXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRNdXRhdG9yT2ZBcmJpdHJhcnkoX29iamVjdDogT2JqZWN0KTogTXV0YXRvciB7XHJcbiAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHt9O1xyXG4gICAgbGV0IGF0dHJpYnV0ZXM6IChzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2wpW10gPSBSZWZsZWN0Lm93bktleXMoUmVmbGVjdC5nZXRQcm90b3R5cGVPZihfb2JqZWN0KSk7XHJcbiAgICBmb3IgKGxldCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xyXG4gICAgICBsZXQgdmFsdWU6IE9iamVjdCA9IFJlZmxlY3QuZ2V0KF9vYmplY3QsIGF0dHJpYnV0ZSk7XHJcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAvLyBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIE11dGFibGUpKVxyXG4gICAgICAvLyAgIGNvbnRpbnVlO1xyXG4gICAgICBtdXRhdG9yW2F0dHJpYnV0ZS50b1N0cmluZygpXSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgfVxyXG5cclxuICAvLyBAdHMtaWdub3JlIC0gYXMgb2Ygbm93IHdlIG5lZWQgdG8gcG9seWZpbGwgdGhlIHN5bWJvbCB0byBtYWtlIGRlY29yYXRvciBtZXRhZGF0YSB3b3JrLCBzZWUgaHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svcmVsZWFzZS1ub3Rlcy90eXBlc2NyaXB0LTUtMi5odG1sI2RlY29yYXRvci1tZXRhZGF0YVxyXG4gIFN5bWJvbC5tZXRhZGF0YSA/Pz0gU3ltYm9sKFwiU3ltYm9sLm1ldGFkYXRhXCIpO1xyXG5cclxuICAvKipcclxuICAgKiBBc3NvY2lhdGlvbiBvZiBhbiBhdHRyaWJ1dGUgd2l0aCBpdHMgc3BlY2lmaWVkIHR5cGUgKGNvbnN0cnVjdG9yKS5cclxuICAgKiBAc2VlIHtAbGluayBNZXRhZGF0YX0uXHJcbiAgICovXHJcbiAgZXhwb3J0IHR5cGUgTWV0YUF0dHJpYnV0ZVR5cGVzID0gUmVjb3JkPHN0cmluZyB8IHN5bWJvbCwgRnVuY3Rpb24+O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRhZGF0YSBmb3IgY2xhc3NlcyBleHRlbmRpbmcge0BsaW5rIE11dGFibGV9LiBNZXRhZGF0YSBuZWVkcyB0byBiZSBleHBsaWNpdGx5IHNwZWNpZmllZCB1c2luZyBkZWNvcmF0b3JzLlxyXG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL3JlbGVhc2Utbm90ZXMvdHlwZXNjcmlwdC01LTIuaHRtbCNkZWNvcmF0b3ItbWV0YWRhdGEgfCB0eXBlIHNjcmlwdCA1LjIgZmVhdHVyZSBcImRlY29yYXRvciBtZXRhZGF0YVwifSBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIE1ldGFkYXRhIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNwZWNpZmllZCB0eXBlcyBvZiB0aGUgYXR0cmlidXRlcyBvZiBhIGNsYXNzLiBVc2UgdGhlIHtAbGluayB0eXBlfSBkZWNvcmF0b3IgdG8gYWRkIHR5cGUgaW5mb3JtYXRpb24gdG8gdGhlIG1ldGFkYXRhIG9mIGEgY2xhc3MuXHJcbiAgICAgKi9cclxuICAgIGF0dHJpYnV0ZVR5cGVzPzogTWV0YUF0dHJpYnV0ZVR5cGVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVjb3JhdG9yIHRvIHNwZWNpZnkgYSB0eXBlIChjb25zdHJ1Y3RvcikgZm9yIGFuIGF0dHJpYnV0ZSB3aXRoaW4gYSBjbGFzcydzIHtAbGluayBNZXRhZGF0YSB8IG1ldGFkYXRhfS5cclxuICAgKiBUaGlzIHdheSwgdGhlIGludGVuZGVkIHR5cGUgb2YgYW4gYXR0cmlidXRlIGlzIGtub3duIGF0IHJ1bnRpbWUuIFVzZSB0aGlzIHRvIG1ha2UgYW4gYXR0cmlidXRlIGEgdmFsaWQgZHJvcCB0YXJnZXQgaW4gdGhlIGVkaXRvci5cclxuICAgKi9cclxuICBleHBvcnQgZnVuY3Rpb24gdHlwZShfY29uc3RydWN0b3I6IGFic3RyYWN0IG5ldyAoLi4uYXJnczogR2VuZXJhbFtdKSA9PiBHZW5lcmFsKTogKF92YWx1ZTogdW5rbm93biwgX2NvbnRleHQ6IENsYXNzRmllbGREZWNvcmF0b3JDb250ZXh0IHwgQ2xhc3NHZXR0ZXJEZWNvcmF0b3JDb250ZXh0IHwgQ2xhc3NBY2Nlc3NvckRlY29yYXRvckNvbnRleHQpID0+IHZvaWQge1xyXG4gICAgcmV0dXJuIChfdmFsdWU6IHVua25vd24sIF9jb250ZXh0OiBDbGFzc01lbWJlckRlY29yYXRvckNvbnRleHQpID0+IHsgLy8gY291bGQgY2FjaGUgdGhlIGRlY29yYXRvciBmdW5jdGlvbiBmb3IgZWFjaCBjbGFzc1xyXG4gICAgICBsZXQgbmFtZTogc3RyaW5nIHwgc3ltYm9sID0gX2NvbnRleHQubmFtZTtcclxuICAgICAgbGV0IG1ldGFkYXRhOiBNZXRhZGF0YSA9IF9jb250ZXh0Lm1ldGFkYXRhO1xyXG4gICAgICBsZXQgdHlwZXM6IE1ldGFBdHRyaWJ1dGVUeXBlcyA9IG1ldGFkYXRhLmF0dHJpYnV0ZVR5cGVzID8/PSB7fTtcclxuICAgICAgdHlwZXNbbmFtZV0gPSBfY29uc3RydWN0b3I7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIHR5cGVzIGJlaW5nIG11dGFibGUgdXNpbmcge0BsaW5rIE11dGF0b3J9LW9iamVjdHMsIHRodXMgcHJvdmlkaW5nIGFuZCB1c2luZyBpbnRlcmZhY2VzIGNyZWF0ZWQgYXQgcnVudGltZS4gIFxyXG4gICAqIE11dGFibGVzIHByb3ZpZGUgYSB7QGxpbmsgTXV0YXRvcn0gdGhhdCBpcyBidWlsZCBieSBjb2xsZWN0aW5nIGFsbCBvYmplY3QtcHJvcGVydGllcyB0aGF0IGFyZSBlaXRoZXIgb2YgYSBwcmltaXRpdmUgdHlwZSBvciBhZ2FpbiBNdXRhYmxlLlxyXG4gICAqIFN1YmNsYXNzZXMgY2FuIGVpdGhlciByZWR1Y2UgdGhlIHN0YW5kYXJkIHtAbGluayBNdXRhdG9yfSBidWlsdCBieSB0aGlzIGJhc2UgY2xhc3MgYnkgZGVsZXRpbmcgcHJvcGVydGllcyBvciBpbXBsZW1lbnQgYW4gaW5kaXZpZHVhbCBnZXRNdXRhdG9yLW1ldGhvZC5cclxuICAgKiBUaGUgcHJvdmlkZWQgcHJvcGVydGllcyBvZiB0aGUge0BsaW5rIE11dGF0b3J9IG11c3QgbWF0Y2ggcHVibGljIHByb3BlcnRpZXMgb3IgZ2V0dGVycy9zZXR0ZXJzIG9mIHRoZSBvYmplY3QuXHJcbiAgICogT3RoZXJ3aXNlLCB0aGV5IHdpbGwgYmUgaWdub3JlZCBpZiBub3QgaGFuZGxlZCBieSBhbiBvdmVycmlkZSBvZiB0aGUgbXV0YXRlLW1ldGhvZCBpbiB0aGUgc3ViY2xhc3MgYW5kIHRocm93IGVycm9ycyBpbiBhbiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCB1c2VyLWludGVyZmFjZSBmb3IgdGhlIG9iamVjdC5cclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgTXV0YWJsZSBleHRlbmRzIEV2ZW50VGFyZ2V0VW5pZmllZCB7XHJcbiAgICAvKipcclxuICAgICAqIERlY29yYXRvciBhbGxvd3MgdG8gYXR0YWNoIHtAbGluayBNdXRhYmxlfSBmdW5jdGlvbmFsaXR5IHRvIGV4aXN0aW5nIGNsYXNzZXMuIFxyXG4gICAgICovXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIGRlY29yYXRlKF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgIC8vICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwidXNlUmVuZGVyRGF0YVwiLCB7XHJcbiAgICAvLyAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE11dGF0b3IodGhpczogTXV0YWJsZUZvclVzZXJJbnRlcmZhY2UpOiBNdXRhdG9yIHtcclxuICAgIC8vICAgICAgIHJldHVybiBnZXRNdXRhdG9yT2ZBcmJpdHJhcnkodGhpcyk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICB9KTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldE11dGF0b3JGcm9tUGF0aChfbXV0YXRvcjogTXV0YXRvciwgX3BhdGg6IHN0cmluZ1tdKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBrZXk6IHN0cmluZyA9IF9wYXRoWzBdO1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHt9O1xyXG4gICAgICBpZiAoX211dGF0b3Jba2V5XSA9PSB1bmRlZmluZWQpIC8vIGlmIHRoZSBwYXRoIGRldmlhdGVzIGZyb20gbXV0YXRvciBzdHJ1Y3R1cmUsIHJldHVybiB0aGUgbXV0YXRvclxyXG4gICAgICAgIHJldHVybiBfbXV0YXRvcjtcclxuICAgICAgbXV0YXRvcltrZXldID0gX211dGF0b3Jba2V5XTtcclxuICAgICAgaWYgKF9wYXRoLmxlbmd0aCA+IDEpXHJcbiAgICAgICAgbXV0YXRvcltrZXldID0gTXV0YWJsZS5nZXRNdXRhdG9yRnJvbVBhdGgobXV0YXRvcltrZXldLCBfcGF0aC5zbGljZSgxLCBfcGF0aC5sZW5ndGgpKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHR5cGUgb2YgdGhpcyBtdXRhYmxlIHN1YmNsYXNzIGFzIHRoZSBuYW1lIG9mIHRoZSBydW50aW1lIGNsYXNzXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgdHlwZSBvZiB0aGUgbXV0YWJsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ29sbGVjdCBhcHBsaWNhYmxlIGF0dHJpYnV0ZXMgb2YgdGhlIGluc3RhbmNlIGFuZCBjb3BpZXMgb2YgdGhlaXIgdmFsdWVzIGluIGEgTXV0YXRvci1vYmplY3QuXHJcbiAgICAgKiBCeSBkZWZhdWx0LCBhIG11dGF0b3IgY2Fubm90IGJlIGV4dGVuZGVkLCBzaW5jZSBleHRlbnNpb25zIGFyZSBub3QgYXZhaWxhYmxlIGluIHRoZSBvYmplY3QgdGhlIG11dGF0b3IgYmVsb25ncyB0by5cclxuICAgICAqIEEgbXV0YXRvciBtYXkgYmUgcmVkdWNlZCBieSB0aGUgZGVzY2VuZGFudHMgb2Yge0BsaW5rIE11dGFibGV9IHRvIGNvbnRhaW4gb25seSB0aGUgcHJvcGVydGllcyBuZWVkZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKF9leHRlbmRhYmxlOiBib29sZWFuID0gZmFsc2UpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7fTtcclxuXHJcbiAgICAgIC8vIGNvbGxlY3QgcHJpbWl0aXZlIGFuZCBtdXRhYmxlIGF0dHJpYnV0ZXNcclxuICAgICAgZm9yIChsZXQgYXR0cmlidXRlIGluIHRoaXMpIHtcclxuICAgICAgICBsZXQgdmFsdWU6IE9iamVjdCA9IHRoaXNbYXR0cmlidXRlXTtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbilcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiAhKHZhbHVlIGluc3RhbmNlb2YgTXV0YWJsZSkgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIE11dGFibGVBcnJheSkgJiYgISh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShcImlkUmVzb3VyY2VcIikpKVxyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgbXV0YXRvclthdHRyaWJ1dGVdID0gdGhpc1thdHRyaWJ1dGVdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIV9leHRlbmRhYmxlKVxyXG4gICAgICAgIC8vIG11dGF0b3IgY2FuIGJlIHJlZHVjZWQgYnV0IG5vdCBleHRlbmRlZCFcclxuICAgICAgICBPYmplY3QucHJldmVudEV4dGVuc2lvbnMobXV0YXRvcik7XHJcbiAgICAgIC8vIGRlbGV0ZSB1bndhbnRlZCBhdHRyaWJ1dGVzXHJcbiAgICAgIHRoaXMucmVkdWNlTXV0YXRvcihtdXRhdG9yKTtcclxuXHJcbiAgICAgIC8vIHJlcGxhY2UgcmVmZXJlbmNlcyB0byBtdXRhYmxlIG9iamVjdHMgd2l0aCByZWZlcmVuY2VzIHRvIG11dGF0b3JzXHJcbiAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiBtdXRhdG9yKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlOiBPYmplY3QgPSBtdXRhdG9yW2F0dHJpYnV0ZV07XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTXV0YWJsZSlcclxuICAgICAgICAgIG11dGF0b3JbYXR0cmlidXRlXSA9IHZhbHVlLmdldE11dGF0b3IoKTtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNdXRhYmxlQXJyYXkpXHJcbiAgICAgICAgICBtdXRhdG9yW2F0dHJpYnV0ZV0gPSB2YWx1ZS5tYXAoKF92YWx1ZSkgPT4gX3ZhbHVlLmdldE11dGF0b3IoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29sbGVjdCB0aGUgYXR0cmlidXRlcyBvZiB0aGUgaW5zdGFuY2UgYW5kIHRoZWlyIHZhbHVlcyBhcHBsaWNhYmxlIGZvciBhbmltYXRpb24uXHJcbiAgICAgKiBCYXNpYyBmdW5jdGlvbmFsaXR5IGlzIGlkZW50aWNhbCB0byB7QGxpbmsgZ2V0TXV0YXRvcn0sIHJldHVybmVkIG11dGF0b3Igc2hvdWxkIHRoZW4gYmUgcmVkdWNlZCBieSB0aGUgc3ViY2xhc3NlZCBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvckFuaW1hdGlvbigpOiBNdXRhdG9yRm9yQW5pbWF0aW9uIHtcclxuICAgICAgcmV0dXJuIDxNdXRhdG9yRm9yQW5pbWF0aW9uPnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xsZWN0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBpbnN0YW5jZSBhbmQgdGhlaXIgdmFsdWVzIGFwcGxpY2FibGUgZm9yIHRoZSB1c2VyIGludGVyZmFjZS5cclxuICAgICAqIEJhc2ljIGZ1bmN0aW9uYWxpdHkgaXMgaWRlbnRpY2FsIHRvIHtAbGluayBnZXRNdXRhdG9yfSwgcmV0dXJuZWQgbXV0YXRvciBzaG91bGQgdGhlbiBiZSByZWR1Y2VkIGJ5IHRoZSBzdWJjbGFzc2VkIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yRm9yVXNlckludGVyZmFjZSgpOiBNdXRhdG9yRm9yVXNlckludGVyZmFjZSB7XHJcbiAgICAgIHJldHVybiA8TXV0YXRvckZvclVzZXJJbnRlcmZhY2U+dGhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENvbGxlY3QgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGluc3RhbmNlIGFuZCB0aGVpciB2YWx1ZXMgYXBwbGljYWJsZSBmb3IgaW5kaXZpdWFsaXphdGlvbiBieSB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQmFzaWMgZnVuY3Rpb25hbGl0eSBpcyBpZGVudGljYWwgdG8ge0BsaW5rIGdldE11dGF0b3J9LCByZXR1cm5lZCBtdXRhdG9yIHNob3VsZCB0aGVuIGJlIHJlZHVjZWQgYnkgdGhlIHN1YmNsYXNzZWQgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgLy8gcHVibGljIGdldE11dGF0b3JGb3JDb21wb25lbnQoKTogTXV0YXRvckZvckNvbXBvbmVudCB7XHJcbiAgICAvLyAgICAgcmV0dXJuIDxNdXRhdG9yRm9yQ29tcG9uZW50PnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgLy8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFzc29jaWF0aXZlIGFycmF5IHdpdGggdGhlIHNhbWUgYXR0cmlidXRlcyBhcyB0aGUgZ2l2ZW4gbXV0YXRvciwgYnV0IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgdHlwZXMgYXMgc3RyaW5nLXZhbHVlcy5cclxuICAgICAqIERvZXMgbm90IHJlY3Vyc2UgaW50byBvYmplY3RzIVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgYXR0cmlidXRlIGluIF9tdXRhdG9yKSB7XHJcbiAgICAgICAgbGV0IHR5cGU6IHN0cmluZztcclxuICAgICAgICBsZXQgdmFsdWU6IG51bWJlciB8IGJvb2xlYW4gfCBzdHJpbmcgfCBvYmplY3QgfCBGdW5jdGlvbiA9IF9tdXRhdG9yW2F0dHJpYnV0ZV07XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIHR5cGUgPSAoPEdlbmVyYWw+dGhpcylbYXR0cmlidXRlXS5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgdHlwZSA9IHZhbHVlLm5hbWU7XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHR5cGUgPSB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xyXG5cclxuICAgICAgICB0eXBlc1thdHRyaWJ1dGVdID0gdHlwZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHNwZWNpZmllZCB7QGxpbmsgTWV0YWRhdGEuYXR0cmlidXRlVHlwZXMgfCBhdHRyaWJ1dGUgdHlwZXN9IGZyb20gdGhlIHtAbGluayBNZXRhZGF0YSB8IG1ldGFkYXRhfSBvZiB0aGlzIGluc3RhbmNlJ3MgY2xhc3MgLCBpZiBhdmFpbGFibGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNZXRhQXR0cmlidXRlVHlwZXMoKTogTWV0YUF0dHJpYnV0ZVR5cGVzIHwgdW5kZWZpbmVkIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEoKT8uYXR0cmlidXRlVHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogUmV0cmlldmVzIHRoZSB7QGxpbmsgTWV0YWRhdGEgfCBtZXRhZGF0YX0gb2YgdGhpcyBpbnN0YW5jZSdzIGNsYXNzLCBpZiBhdmFpbGFibGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNZXRhZGF0YSgpOiBNZXRhZGF0YSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5tZXRhZGF0YV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSB2YWx1ZXMgb2YgdGhlIGdpdmVuIG11dGF0b3IgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBpbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIF9tdXRhdG9yIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBhdHRyaWJ1dGUgaW4gX211dGF0b3IpIHtcclxuICAgICAgICBsZXQgdmFsdWU6IE9iamVjdCA9IF9tdXRhdG9yW2F0dHJpYnV0ZV07XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTXV0YWJsZSlcclxuICAgICAgICAgIF9tdXRhdG9yW2F0dHJpYnV0ZV0gPSB2YWx1ZS5nZXRNdXRhdG9yKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgX211dGF0b3JbYXR0cmlidXRlXSA9ICg8R2VuZXJhbD50aGlzKVthdHRyaWJ1dGVdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMgb2YgdGhlIGluc3RhbmNlIGFjY29yZGluZyB0byB0aGUgc3RhdGUgb2YgdGhlIG11dGF0b3IuXHJcbiAgICAgKiBUaGUgbXV0YXRpb24gbWF5IGJlIHJlc3RyaWN0ZWQgdG8gYSBzdWJzZXQgb2YgdGhlIG11dGF0b3IgYW5kIHRoZSBldmVudCBkaXNwYXRjaGluZyBzdXBwcmVzc2VkLlxyXG4gICAgICogVXNlcyBtdXRhdGVCYXNlLCBidXQgY2FuIGJlIG92ZXJ3cml0dGVuIGluIHN1YmNsYXNzZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGF3YWl0IHRoaXMubXV0YXRlQmFzZShfbXV0YXRvciwgX3NlbGVjdGlvbik7XHJcbiAgICAgIGlmIChfZGlzcGF0Y2hNdXRhdGUpXHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVC5NVVRBVEUsIHsgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IG11dGF0b3I6IF9tdXRhdG9yIH0gfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmFzZSBtZXRob2QgZm9yIG11dGF0aW9uLCBhbHdheXMgYXZhaWxhYmxlIHRvIHN1YmNsYXNzZXMuIERvIG5vdCBvdmVyd3JpdGUgaW4gc3ViY2xhc3NlcyFcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIG11dGF0ZUJhc2UoX211dGF0b3I6IE11dGF0b3IsIF9zZWxlY3Rpb24/OiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHt9O1xyXG4gICAgICBpZiAoIV9zZWxlY3Rpb24pXHJcbiAgICAgICAgbXV0YXRvciA9IF9tdXRhdG9yO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgZm9yIChsZXQgYXR0cmlidXRlIG9mIF9zZWxlY3Rpb24pIC8vIHJlZHVjZSB0aGUgbXV0YXRvciB0byB0aGUgc2VsZWN0aW9uXHJcbiAgICAgICAgICBpZiAodHlwZW9mIChfbXV0YXRvclthdHRyaWJ1dGVdKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICAgICAgbXV0YXRvclthdHRyaWJ1dGVdID0gX211dGF0b3JbYXR0cmlidXRlXTtcclxuXHJcbiAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiBtdXRhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFSZWZsZWN0Lmhhcyh0aGlzLCBhdHRyaWJ1dGUpKVxyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgbGV0IG11dGFudDogT2JqZWN0ID0gUmVmbGVjdC5nZXQodGhpcywgYXR0cmlidXRlKTtcclxuICAgICAgICBsZXQgdmFsdWU6IE11dGF0b3IgPSA8TXV0YXRvcj5tdXRhdG9yW2F0dHJpYnV0ZV07XHJcbiAgICAgICAgaWYgKG11dGFudCBpbnN0YW5jZW9mIE11dGFibGVBcnJheSB8fCBtdXRhbnQgaW5zdGFuY2VvZiBNdXRhYmxlKVxyXG4gICAgICAgICAgYXdhaXQgbXV0YW50Lm11dGF0ZSh2YWx1ZSwgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIFJlZmxlY3Quc2V0KHRoaXMsIGF0dHJpYnV0ZSwgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlZHVjZXMgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGdlbmVyYWwgbXV0YXRvciBhY2NvcmRpbmcgdG8gZGVzaXJlZCBvcHRpb25zIGZvciBtdXRhdGlvbi4gVG8gYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3Nlc1xyXG4gICAgICogQHBhcmFtIF9tdXRhdG9yIFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQ7XHJcbiAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgZXhwb3J0IHR5cGUgR2VuZXJhbCA9IGFueTtcclxuXHJcbiAgLyoqXHJcbiAgICogSG9sZHMgaW5mb3JtYXRpb24gbmVlZGVkIHRvIHJlY3JlYXRlIGFuIG9iamVjdCBpZGVudGljYWwgdG8gdGhlIG9uZSBpdCBvcmlnaW5hdGVkIGZyb20uIFxyXG4gICAqIEEgc2VyaWFsaXphdGlvbiBpcyB1c2VkIHRvIGNyZWF0ZSBjb3BpZXMgb2YgZXhpc3Rpbmcgb2JqZWN0cyBhdCBydW50aW1lIG9yIHRvIHN0b3JlIG9iamVjdHMgYXMgc3RyaW5ncyBvciByZWNyZWF0ZSB0aGVtLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXphdGlvbiB7XHJcbiAgICBbdHlwZTogc3RyaW5nXTogR2VuZXJhbDtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXphYmxlIHtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHtAbGluayBTZXJpYWxpemF0aW9ufSBvZiB0aGlzIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb247XHJcbiAgICAvKipcclxuICAgICAqIFJlY3JlYXRlcyB0aGlzIGluc3RhbmNlIG9mIHtAbGluayBTZXJpYWxpemFibGV9IHdpdGggdGhlIGluZm9ybWF0aW9uIGZyb20gdGhlIGdpdmVuIHtAbGluayBTZXJpYWxpemF0aW9ufS5cclxuICAgICAqL1xyXG4gICAgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT47XHJcbiAgfVxyXG5cclxuICBpbnRlcmZhY2UgTmFtZXNwYWNlUmVnaXN0ZXIge1xyXG4gICAgW25hbWU6IHN0cmluZ106IE9iamVjdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXMgdGhlIGV4dGVybmFsIHNlcmlhbGl6YXRpb24gYW5kIGRlc2VyaWFsaXphdGlvbiBvZiB7QGxpbmsgU2VyaWFsaXphYmxlfSBvYmplY3RzLiBUaGUgaW50ZXJuYWwgcHJvY2VzcyBpcyBoYW5kbGVkIGJ5IHRoZSBvYmplY3RzIHRoZW1zZWx2ZXMuICBcclxuICAgKiBBIHtAbGluayBTZXJpYWxpemF0aW9ufSBvYmplY3QgY2FuIGJlIGNyZWF0ZWQgZnJvbSBhIHtAbGluayBTZXJpYWxpemFibGV9IG9iamVjdCBhbmQgYSBKU09OLVN0cmluZyBtYXkgYmUgY3JlYXRlZCBmcm9tIHRoYXQuICBcclxuICAgKiBWaWNlIHZlcnNhLCBhIEpTT04tU3RyaW5nIGNhbiBiZSBwYXJzZWQgdG8gYSB7QGxpbmsgU2VyaWFsaXphdGlvbn0gd2hpY2ggY2FuIGJlIGRlc2VyaWFsaXplZCB0byBhIHtAbGluayBTZXJpYWxpemFibGV9IG9iamVjdC5cclxuICAgKiBgYGB0ZXh0XHJcbiAgICogIFtTZXJpYWxpemFibGVdIOKGkiAoc2VyaWFsaXplKSDihpIgW1NlcmlhbGl6YXRpb25dIOKGkiAoc3RyaW5naWZ5KSDihpIgW1N0cmluZ10g4oaSIChzYXZlIG9yIHNlbmQpXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4oaTICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKGkyAgICAgICAgICAgICAgICAgIOKGkyAgICAgICAgIFxyXG4gICAqICAgICAgICAgICAgICAgIFtTZXJpYWxpemFibGVdIOKGkCAoZGVzZXJpYWxpemUpIOKGkCBbU2VyaWFsaXphdGlvbl0g4oaQIChwYXJzZSkg4oaQIChsb2FkKSDihpAgW01lZGl1bV1cclxuICAgKiBgYGAgICAgICBcclxuICAgKiBXaGlsZSB0aGUgaW50ZXJuYWwgc2VyaWFsaXplL2Rlc2VyaWFsaXplIG1ldGhvZDFzIG9mIHRoZSBvYmplY3RzIGNhcmUgb2YgdGhlIHNlbGVjdGlvbiBvZiBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gcmVjcmVhdGUgdGhlIG9iamVjdCBhbmQgaXRzIHN0cnVjdHVyZSwgIFxyXG4gICAqIHRoZSB7QGxpbmsgU2VyaWFsaXplcn0ga2VlcHMgdHJhY2sgb2YgdGhlIG5hbWVzcGFjZXMgYW5kIGNsYXNzZXMgaW4gb3JkZXIgdG8gcmVjcmVhdGUge0BsaW5rIFNlcmlhbGl6YWJsZX0gb2JqZWN0cy4gVGhlIGdlbmVyYWwgc3RydWN0dXJlIG9mIGEge0BsaW5rIFNlcmlhbGl6YXRpb259IGlzIGFzIGZvbGxvd3MgIFxyXG4gICAqIGBgYHRleHRcclxuICAgKiB7XHJcbiAgICogICAgICBuYW1lc3BhY2VOYW1lLmNsYXNzTmFtZToge1xyXG4gICAqICAgICAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlWYWx1ZSxcclxuICAgKiAgICAgICAgICAuLi4sXHJcbiAgICogICAgICAgICAgcHJvcGVydHlOYW1lT2ZSZWZlcmVuY2U6IFNlcmlhbGl6YXRpb25PZlRoZVJlZmVyZW5jZWRPYmplY3QsXHJcbiAgICogICAgICAgICAgLi4uLFxyXG4gICAqICAgICAgICAgIGNvbnN0cnVjdG9yTmFtZU9mU3VwZXJjbGFzczogU2VyaWFsaXphdGlvbk9mU3VwZXJDbGFzc1xyXG4gICAqICAgICAgfVxyXG4gICAqIH1cclxuICAgKiBgYGBcclxuICAgKiBTaW5jZSB0aGUgaW5zdGFuY2Ugb2YgdGhlIHN1cGVyY2xhc3MgaXMgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW4gYW4gb2JqZWN0IGlzIGNyZWF0ZWQsIFxyXG4gICAqIHRoZSBTZXJpYWxpemF0aW9uT2ZTdXBlckNsYXNzIG9taXRzIHRoZSB0aGUgbmFtZXNwYWNlTmFtZS5jbGFzc05hbWUga2V5IGFuZCBjb25zaXN0cyBvbmx5IG9mIGl0cyB2YWx1ZS4gXHJcbiAgICogVGhlIGNvbnN0cnVjdG9yTmFtZU9mU3VwZXJjbGFzcyBpcyBnaXZlbiBpbnN0ZWFkIGFzIGEgcHJvcGVydHkgbmFtZSBpbiB0aGUgc2VyaWFsaXphdGlvbiBvZiB0aGUgc3ViY2xhc3MuXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNlcmlhbGl6ZXIge1xyXG4gICAgLyoqIEluIG9yZGVyIGZvciB0aGUgU2VyaWFsaXplciB0byBjcmVhdGUgY2xhc3MgaW5zdGFuY2VzLCBpdCBuZWVkcyBhY2Nlc3MgdG8gdGhlIGFwcHJvcHJpYXRlIG5hbWVzcGFjZXMgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIG5hbWVzcGFjZXM6IE5hbWVzcGFjZVJlZ2lzdGVyID0geyBcIsaSXCI6IEZ1ZGdlQ29yZSB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGEgbmFtZXNwYWNlIHRvIHRoZSB7QGxpbmsgU2VyaWFsaXplcn0sIHRvIGVuYWJsZSBhdXRvbWF0aWMgaW5zdGFudGlhdGlvbiBvZiBjbGFzc2VzIGRlZmluZWQgd2l0aGluXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJOYW1lc3BhY2UoX25hbWVzcGFjZTogT2JqZWN0KTogc3RyaW5nIHtcclxuICAgICAgZm9yIChsZXQgbmFtZSBpbiBTZXJpYWxpemVyLm5hbWVzcGFjZXMpXHJcbiAgICAgICAgaWYgKFNlcmlhbGl6ZXIubmFtZXNwYWNlc1tuYW1lXSA9PSBfbmFtZXNwYWNlKVxyXG4gICAgICAgICAgcmV0dXJuIG5hbWU7XHJcblxyXG4gICAgICBsZXQgbmFtZTogc3RyaW5nID0gU2VyaWFsaXplci5maW5kTmFtZXNwYWNlSW4oX25hbWVzcGFjZSwgd2luZG93KTtcclxuICAgICAgaWYgKCFuYW1lKVxyXG4gICAgICAgIGZvciAobGV0IHBhcmVudE5hbWUgaW4gU2VyaWFsaXplci5uYW1lc3BhY2VzKSB7XHJcbiAgICAgICAgICBuYW1lID0gU2VyaWFsaXplci5maW5kTmFtZXNwYWNlSW4oX25hbWVzcGFjZSwgU2VyaWFsaXplci5uYW1lc3BhY2VzW3BhcmVudE5hbWVdKTtcclxuICAgICAgICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSBwYXJlbnROYW1lICsgXCIuXCIgKyBuYW1lO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICBpZiAoIW5hbWUpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFtZXNwYWNlIG5vdCBmb3VuZC4gTWF5YmUgcGFyZW50IG5hbWVzcGFjZSBoYXNuJ3QgYmVlbiByZWdpc3RlcmVkIGJlZm9yZT9cIik7XHJcblxyXG4gICAgICBTZXJpYWxpemVyLm5hbWVzcGFjZXNbbmFtZV0gPSBfbmFtZXNwYWNlO1xyXG4gICAgICByZXR1cm4gbmFtZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzZXJpYWxpemFibGUgRlVER0Utb2JqZWN0IGdpdmVuLFxyXG4gICAgICogaW5jbHVkaW5nIGF0dGFjaGVkIGNvbXBvbmVudHMsIGNoaWxkcmVuLCBzdXBlcmNsYXNzLW9iamVjdHMgYWxsIGluZm9ybWF0aW9uIG5lZWRlZCBmb3IgcmVjb25zdHJ1Y3Rpb25cclxuICAgICAqIEBwYXJhbSBfb2JqZWN0IEFuIG9iamVjdCB0byBzZXJpYWxpemUsIGltcGxlbWVudGluZyB0aGUge0BsaW5rIFNlcmlhbGl6YWJsZX0gaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2VyaWFsaXplKF9vYmplY3Q6IFNlcmlhbGl6YWJsZSk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHt9O1xyXG4gICAgICAvLyBUT0RPOiBzYXZlIHRoZSBuYW1lc3BhY2Ugd2l0aCB0aGUgY29uc3RydWN0b3JzIG5hbWVcclxuICAgICAgLy8gc2VyaWFsaXphdGlvbltfb2JqZWN0LmNvbnN0cnVjdG9yLm5hbWVdID0gX29iamVjdC5zZXJpYWxpemUoKTtcclxuICAgICAgbGV0IHBhdGg6IHN0cmluZyA9IHRoaXMuZ2V0RnVsbFBhdGgoX29iamVjdCk7XHJcbiAgICAgIGlmICghcGF0aClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5hbWVzcGFjZSBvZiBzZXJpYWxpemFibGUgb2JqZWN0IG9mIHR5cGUgJHtfb2JqZWN0LmNvbnN0cnVjdG9yLm5hbWV9IG5vdCBmb3VuZC4gTWF5YmUgdGhlIG5hbWVzcGFjZSBoYXNuJ3QgYmVlbiByZWdpc3RlcmVkIG9yIHRoZSBjbGFzcyBub3QgZXhwb3J0ZWQ/YCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bcGF0aF0gPSBfb2JqZWN0LnNlcmlhbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgICAgLy8gcmV0dXJuIF9vYmplY3Quc2VyaWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgRlVER0Utb2JqZWN0IHJlY29uc3RydWN0ZWQgZnJvbSB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIHtAbGluayBTZXJpYWxpemF0aW9ufSBnaXZlbixcclxuICAgICAqIGluY2x1ZGluZyBhdHRhY2hlZCBjb21wb25lbnRzLCBjaGlsZHJlbiwgc3VwZXJjbGFzcy1vYmplY3RzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBsZXQgcmVjb25zdHJ1Y3Q6IFNlcmlhbGl6YWJsZTtcclxuICAgICAgbGV0IHBhdGg6IHN0cmluZztcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBsb29wIGNvbnN0cnVjdGVkIHNvbGVseSB0byBhY2Nlc3MgdHlwZS1wcm9wZXJ0eS4gT25seSBvbmUgZXhwZWN0ZWQhXHJcbiAgICAgICAgZm9yIChwYXRoIGluIF9zZXJpYWxpemF0aW9uKSB7XHJcbiAgICAgICAgICByZWNvbnN0cnVjdCA9IFNlcmlhbGl6ZXIucmVjb25zdHJ1Y3QocGF0aCk7XHJcbiAgICAgICAgICByZWNvbnN0cnVjdCA9IGF3YWl0IHJlY29uc3RydWN0LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3BhdGhdKTtcclxuICAgICAgICAgIHJldHVybiByZWNvbnN0cnVjdDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIGxldCBtZXNzYWdlOiBzdHJpbmcgPSBgRGVzZXJpYWxpemF0aW9uIG9mICR7cGF0aH0sICR7cmVjb25zdHJ1Y3QgPyBSZWZsZWN0LmdldChyZWNvbnN0cnVjdCwgXCJpZFJlc291cmNlXCIpIDogXCJcIn0gZmFpbGVkOiBgICsgX2Vycm9yO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gQXJyYXkgb2YgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzZXJpYWxpemFibGUgRlVER0Utb2JqZWN0cyBnaXZlbiBpbiB0aGUgYXJyYXksXHJcbiAgICAgKiBpbmNsdWRpbmcgYXR0YWNoZWQgY29tcG9uZW50cywgY2hpbGRyZW4sIHN1cGVyY2xhc3Mtb2JqZWN0cyBhbGwgaW5mb3JtYXRpb24gbmVlZGVkIGZvciByZWNvbnN0cnVjdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNlcmlhbGl6ZUFycmF5PFQgZXh0ZW5kcyBTZXJpYWxpemFibGU+KF90eXBlOiBuZXcgKCkgPT4gVCwgX29iamVjdHM6IFNlcmlhbGl6YWJsZVtdKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uczogU2VyaWFsaXphdGlvbltdID0gW107XHJcbiAgICAgIGxldCBwYXRoOiBzdHJpbmcgPSB0aGlzLmdldEZ1bGxQYXRoKG5ldyBfdHlwZSgpKTtcclxuICAgICAgaWYgKCFwYXRoKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTmFtZXNwYWNlIG9mIHNlcmlhbGl6YWJsZSBvYmplY3Qgb2YgdHlwZSAke190eXBlLm5hbWV9IG5vdCBmb3VuZC4gTWF5YmUgdGhlIG5hbWVzcGFjZSBoYXNuJ3QgYmVlbiByZWdpc3RlcmVkIG9yIHRoZSBjbGFzcyBub3QgZXhwb3J0ZWQ/YCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBvYmplY3Qgb2YgX29iamVjdHMpXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbnMucHVzaChvYmplY3Quc2VyaWFsaXplKCkpO1xyXG5cclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7fTtcclxuICAgICAgc2VyaWFsaXphdGlvbltwYXRoXSA9IHNlcmlhbGl6YXRpb25zO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gQXJyYXkgb2YgRlVER0Utb2JqZWN0cyByZWNvbnN0cnVjdGVkIGZyb20gdGhlIGluZm9ybWF0aW9uIGluIHRoZSBhcnJheSBvZiB7QGxpbmsgU2VyaWFsaXphdGlvbn1zIGdpdmVuLFxyXG4gICAgICogaW5jbHVkaW5nIGF0dGFjaGVkIGNvbXBvbmVudHMsIGNoaWxkcmVuLCBzdXBlcmNsYXNzLW9iamVjdHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZUFycmF5KF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGVbXT4ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphYmxlczogU2VyaWFsaXphYmxlW10gPSBbXTtcclxuICAgICAgbGV0IGNvbnN0cnVjdDogbmV3ICgpID0+IFNlcmlhbGl6YWJsZTtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb25zOiBTZXJpYWxpemF0aW9uW10gPSBbXTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBsb29wIGNvbnN0cnVjdGVkIHNvbGVseSB0byBhY2Nlc3MgdHlwZS1wcm9wZXJ0eS4gT25seSBvbmUgZXhwZWN0ZWQhXHJcbiAgICAgICAgZm9yIChsZXQgcGF0aCBpbiBfc2VyaWFsaXphdGlvbikge1xyXG4gICAgICAgICAgY29uc3RydWN0ID0gU2VyaWFsaXplci5nZXRDb25zdHJ1Y3RvcihwYXRoKTtcclxuICAgICAgICAgIHNlcmlhbGl6YXRpb25zID0gX3NlcmlhbGl6YXRpb25bcGF0aF07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlc2VyaWFsaXphdGlvbiBmYWlsZWQ6IFwiICsgX2Vycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgc2VyaWFsaXphdGlvbiBvZiBzZXJpYWxpemF0aW9ucykge1xyXG4gICAgICAgIGxldCBzZXJpYWxpemFibGU6IFNlcmlhbGl6YWJsZSA9IG5ldyBjb25zdHJ1Y3QoKTtcclxuICAgICAgICBhd2FpdCBzZXJpYWxpemFibGUuZGVzZXJpYWxpemUoc2VyaWFsaXphdGlvbik7XHJcbiAgICAgICAgc2VyaWFsaXphYmxlcy5wdXNoKHNlcmlhbGl6YWJsZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBzZXJpYWxpemFibGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vVE9ETzogaW1wbGVtZW50IHByZXR0aWZpZXIgdG8gbWFrZSBKU09OLVN0cmluZ2lmaWNhdGlvbiBvZiBzZXJpYWxpemF0aW9ucyBtb3JlIHJlYWRhYmxlLCBlLmcuIHBsYWNpbmcgeCwgeSBhbmQgeiBpbiBvbmUgbGluZVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmV0dGlmeSBhIEpTT04tU3RyaW5nLCB0byBtYWtlIGl0IG1vcmUgcmVhZGFibGUuXHJcbiAgICAgKiBub3QgaW1wbGVtZW50ZWQgeWV0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcHJldHRpZnkoX2pzb246IHN0cmluZyk6IHN0cmluZyB7IHJldHVybiBfanNvbjsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCwgaHVtYW4gcmVhZGFibGUgSlNPTi1TdHJpbmcsIHJlcHJlc2VudGluZyB0aGUgZ2l2ZW4ge0BsaW5rIFNlcmlhbGl6YXRpb259IHRoYXQgbWF5IGhhdmUgYmVlbiBjcmVhdGVkIGJ5IHtAbGluayBTZXJpYWxpemVyfS5zZXJpYWxpemVcclxuICAgICAqIEBwYXJhbSBfc2VyaWFsaXphdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHN0cmluZ2lmeShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IHN0cmluZyB7XHJcbiAgICAgIC8vIGFkanVzdG1lbnRzIHRvIHNlcmlhbGl6YXRpb24gY2FuIGJlIG1hZGUgaGVyZSBiZWZvcmUgc3RyaW5naWZpY2F0aW9uLCBpZiBkZXNpcmVkXHJcbiAgICAgIGxldCBqc29uOiBzdHJpbmcgPSBKU09OLnN0cmluZ2lmeShfc2VyaWFsaXphdGlvbiwgbnVsbCwgMik7XHJcbiAgICAgIGxldCBwcmV0dHk6IHN0cmluZyA9IFNlcmlhbGl6ZXIucHJldHRpZnkoanNvbik7XHJcbiAgICAgIHJldHVybiBwcmV0dHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFNlcmlhbGl6YXRpb259IGNyZWF0ZWQgZnJvbSB0aGUgZ2l2ZW4gSlNPTi1TdHJpbmcuIFJlc3VsdCBtYXkgYmUgcGFzc2VkIHRvIHtAbGluayBTZXJpYWxpemVyLmRlc2VyaWFsaXplfVxyXG4gICAgICogQHBhcmFtIF9qc29uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlKF9qc29uOiBzdHJpbmcpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoX2pzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3Qgb2YgdGhlIGNsYXNzIGRlZmluZWQgd2l0aCB0aGUgZnVsbCBwYXRoIGluY2x1ZGluZyB0aGUgbmFtZXNwYWNlTmFtZShzKSBhbmQgdGhlIGNsYXNzTmFtZSBzZXBlcmF0ZWQgYnkgZG90cyguKSBcclxuICAgICAqIEBwYXJhbSBfcGF0aCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWNvbnN0cnVjdChfcGF0aDogc3RyaW5nKTogU2VyaWFsaXphYmxlIHtcclxuICAgICAgbGV0IGNvbnN0cnVjdG9yOiBuZXcgKCkgPT4gU2VyaWFsaXphYmxlID0gU2VyaWFsaXplci5nZXRDb25zdHJ1Y3RvcihfcGF0aCk7XHJcbiAgICAgIGxldCByZWNvbnN0cnVjdGlvbjogU2VyaWFsaXphYmxlID0gbmV3IGNvbnN0cnVjdG9yKCk7XHJcbiAgICAgIHJldHVybiByZWNvbnN0cnVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIGdldENvbnN0cnVjdG9yPFQgZXh0ZW5kcyBTZXJpYWxpemFibGU+KF90eXBlOiBzdHJpbmcsIF9uYW1lc3BhY2U6IE9iamVjdCA9IEZ1ZGdlQ29yZSk6IG5ldyAoKSA9PiBUIHtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY29uc3RydWN0b3IgZnJvbSB0aGUgZ2l2ZW4gcGF0aCB0byBhIGNsYXNzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29uc3RydWN0b3I8VCBleHRlbmRzIFNlcmlhbGl6YWJsZT4oX3BhdGg6IHN0cmluZyk6IG5ldyAoKSA9PiBUIHtcclxuICAgICAgbGV0IHR5cGVOYW1lOiBzdHJpbmcgPSBfcGF0aC5zdWJzdHJpbmcoX3BhdGgubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XHJcbiAgICAgIGxldCBuYW1lc3BhY2U6IE9iamVjdCA9IFNlcmlhbGl6ZXIuZ2V0TmFtZXNwYWNlKF9wYXRoKTtcclxuICAgICAgaWYgKCFuYW1lc3BhY2UpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25zdHJ1Y3RvciBvZiBzZXJpYWxpemFibGUgb2JqZWN0IG9mIHR5cGUgJHtfcGF0aH0gbm90IGZvdW5kLiBNYXliZSB0aGUgbmFtZXNwYWNlIGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQ/YCk7XHJcbiAgICAgIHJldHVybiAoPEdlbmVyYWw+bmFtZXNwYWNlKVt0eXBlTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmdWxsIHBhdGggdG8gdGhlIGNsYXNzIG9mIHRoZSBvYmplY3QsIGlmIGZvdW5kIGluIHRoZSByZWdpc3RlcmVkIG5hbWVzcGFjZXNcclxuICAgICAqIEBwYXJhbSBfb2JqZWN0IFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRGdWxsUGF0aChfb2JqZWN0OiBTZXJpYWxpemFibGUpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgdHlwZU5hbWU6IHN0cmluZyA9IF9vYmplY3QuY29uc3RydWN0b3IubmFtZTtcclxuICAgICAgLy8gRGVidWcubG9nKFwiU2VhcmNoaW5nIG5hbWVzcGFjZSBvZjogXCIgKyB0eXBlTmFtZSk7XHJcbiAgICAgIGZvciAobGV0IG5hbWVzcGFjZU5hbWUgaW4gU2VyaWFsaXplci5uYW1lc3BhY2VzKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kOiBHZW5lcmFsID0gKDxHZW5lcmFsPlNlcmlhbGl6ZXIubmFtZXNwYWNlcylbbmFtZXNwYWNlTmFtZV1bdHlwZU5hbWVdO1xyXG4gICAgICAgIGlmIChmb3VuZCAmJiBfb2JqZWN0IGluc3RhbmNlb2YgZm91bmQpXHJcbiAgICAgICAgICByZXR1cm4gbmFtZXNwYWNlTmFtZSArIFwiLlwiICsgdHlwZU5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBuYW1lc3BhY2Utb2JqZWN0IGRlZmluZWQgd2l0aGluIHRoZSBmdWxsIHBhdGgsIGlmIHJlZ2lzdGVyZWRcclxuICAgICAqIEBwYXJhbSBfcGF0aFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXROYW1lc3BhY2UoX3BhdGg6IHN0cmluZyk6IE9iamVjdCB7XHJcbiAgICAgIGxldCBuYW1lc3BhY2VOYW1lOiBzdHJpbmcgPSBfcGF0aC5zdWJzdHIoMCwgX3BhdGgubGFzdEluZGV4T2YoXCIuXCIpKTtcclxuICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIubmFtZXNwYWNlc1tuYW1lc3BhY2VOYW1lXSB8fCBGdWRnZUNvcmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgbmFtZXNwYWNlLW9iamVjdCBpbiBwcm9wZXJ0aWVzIG9mIHRoZSBwYXJlbnQtb2JqZWN0IChlLmcuIHdpbmRvdyksIGlmIHByZXNlbnRcclxuICAgICAqIEBwYXJhbSBfbmFtZXNwYWNlIFxyXG4gICAgICogQHBhcmFtIF9wYXJlbnQgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGZpbmROYW1lc3BhY2VJbihfbmFtZXNwYWNlOiBPYmplY3QsIF9wYXJlbnQ6IE9iamVjdCk6IHN0cmluZyB7XHJcbiAgICAgIGZvciAobGV0IHByb3AgaW4gX3BhcmVudClcclxuICAgICAgICBpZiAoKDxHZW5lcmFsPl9wYXJlbnQpW3Byb3BdID09IF9uYW1lc3BhY2UpXHJcbiAgICAgICAgICByZXR1cm4gcHJvcDtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgdHlwZSBDb25zdHJ1Y3RvcjxUPiA9IGFic3RyYWN0IG5ldyAoLi4uYXJnczogR2VuZXJhbFtdKSA9PiBUO1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmV3IChhYnN0cmFjdCkgY2xhc3MgaW1wbGVtZW50aW5nIHtAbGluayBTZXJpYWxpemFibGVSZXNvdXJjZUV4dGVybmFsfSBmcm9tIGFueSBjbGFzcyB0aGF0IGltcGxlbWVudHMge0BsaW5rIFNlcmlhbGl6YWJsZVJlc291cmNlfSBieSBtaXhpbmcgaW4gdGhlIGZ1bmN0aW9uYWxpdHkgdG8gbG9hZCB0aGUgcmVzb3VyY2UgZnJvbSBhbiBleHRlcm5hbCBzb3VyY2UuXHJcbiAgICogQGludGVybmFsXHJcbiAgICogQGF1dGhvcnMgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDI0XHJcbiAgICovXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIG1peGluU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbDxUQmFzZSBleHRlbmRzIENvbnN0cnVjdG9yPFNlcmlhbGl6YWJsZVJlc291cmNlPj4oX2Jhc2U6IFRCYXNlKSB7IC8qIGVzbGludC1kaXNhYmxlLWxpbmUgKi8gLy9kaXNhYmxlIGVzbGludCBiZWNhdXNlIG9ubHkgdHlwZSBpbmZlcmVuY2Ugc2VlbXMgdG8gYmUgYWJsZSB0byBoYW5kbGUgbWl4aW4gYWJzdHJhY3QgY2xhc3NlcyBjb3JyZWN0bHlcclxuICAgIGFic3RyYWN0IGNsYXNzIFNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwgZXh0ZW5kcyBfYmFzZSBpbXBsZW1lbnRzIEZ1ZGdlQ29yZS5TZXJpYWxpemFibGVSZXNvdXJjZUV4dGVybmFsIHtcclxuICAgICAgcHVibGljIHVybDogUmVxdWVzdEluZm87XHJcblxyXG4gICAgICBwdWJsaWMgc3RhdHVzOiBSRVNPVVJDRV9TVEFUVVMgPSBSRVNPVVJDRV9TVEFUVVMuUEVORElORztcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFNlcmlhbGl6YXRpb259IG9mIHRoaXMgcmVzb3VyY2UuIE9ubHkgdGhlIGRhdGEgbmVlZGVkIHRvIGxvYWQgaXQgZnJvbSB0aGUgZXh0ZXJuYWwgc291cmNlIGlzIHNlcmlhbGl6ZWQgKFwidXJsXCIsIFwibmFtZVwiLCBcImlkUmVzb3VyY2VcIikuXHJcbiAgICAgICAqL1xyXG4gICAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXHJcbiAgICAgICAgICB1cmw6IHRoaXMudXJsLnRvU3RyaW5nKClcclxuICAgICAgICB9OyBcclxuICAgICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMsIF9zZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UpO1xyXG4gICAgICAgIHRoaXMudXJsID0gX3NlcmlhbGl6YXRpb24udXJsO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IF9zZXJpYWxpemF0aW9uLm5hbWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwdWJsaWMgYWJzdHJhY3QgbG9hZCgpOiBQcm9taXNlPFNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWw+O1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoX2Jhc2UucHJvdG90eXBlIGluc3RhbmNlb2YgTXV0YWJsZSkge1xyXG4gICAgICAvKipcclxuICAgICAgICogTWl4aW4gdGhlIHtAbGluayBNdXRhYmxlfSBmdW5jdGlvbmFsaXR5IGludG8gdGhlIGNsYXNzXHJcbiAgICAgICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyNFxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gbWl4aW5NdXRhYmxlU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbDxUQmFzZSBleHRlbmRzIENvbnN0cnVjdG9yPFNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwgJiBNdXRhYmxlPj4oX2Jhc2U6IFRCYXNlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgICAgICBhYnN0cmFjdCBjbGFzcyBNdXRhYmxlU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbCBleHRlbmRzIF9iYXNlIHtcclxuICAgICAgICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IsIF9zZWxlY3Rpb246IHN0cmluZ1tdID0gbnVsbCwgX2Rpc3BhdGNoTXV0YXRlOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICBhd2FpdCBzdXBlci5tdXRhdGUoX211dGF0b3IsIF9zZWxlY3Rpb24sIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKF9tdXRhdG9yLnVybCAhPSB1bmRlZmluZWQgfHwgX211dGF0b3IubmFtZSAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgICAgICAgZGVsZXRlIF9tdXRhdG9yLnN0YXR1cztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBNdXRhYmxlU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG1peGluTXV0YWJsZVNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwoPFRCYXNlICYgQ29uc3RydWN0b3I8U2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbCAmIE11dGFibGU+PlNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBTZXJpYWxpemFibGVSZXNvdXJjZUV4dGVybmFsO1xyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWFwQ2xhc3NUb0NvbXBvbmVudHMge1xyXG4gICAgW2NsYXNzTmFtZTogc3RyaW5nXTogQ29tcG9uZW50W107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXByZXNlbnRzIGEgbm9kZSBpbiB0aGUgc2NlbmV0cmVlLlxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vaHMtZnVydHdhbmdlbi9GVURHRS93aWtpL0dyYXBoXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE5vZGUgZXh0ZW5kcyBFdmVudFRhcmdldFVuaWZpZWQgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZzsgLy8gVGhlIG5hbWUgdG8gY2FsbCB0aGlzIG5vZGUgYnkuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbXR4V29ybGQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgcHVibGljIHRpbWVzdGFtcFVwZGF0ZTogbnVtYmVyID0gMDtcclxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIG5vZGVzIG9mIHRoZSB3aG9sZSBicmFuY2ggaW5jbHVkaW5nIHRoaXMgbm9kZSBhbmQgYWxsIHN1Y2Nlc3NvcnMgKi9cclxuICAgIHB1YmxpYyBuTm9kZXNJbkJyYW5jaDogbnVtYmVyID0gMDtcclxuICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3VuZGluZyBzcGhlcmUgaW4gd29ybGQgZGltZW5zaW9ucyBlbmNsb3NpbmcgdGhlIGdlb21ldHJ5IG9mIHRoaXMgbm9kZSBhbmQgYWxsIHN1Y2Nlc3NvcnMgaW4gdGhlIGJyYW5jaCAqL1xyXG4gICAgcHVibGljIHJhZGl1czogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcml2YXRlIHBhcmVudDogTm9kZSB8IG51bGwgPSBudWxsOyAvLyBUaGUgcGFyZW50IG9mIHRoaXMgbm9kZS5cclxuICAgIHByaXZhdGUgY2hpbGRyZW46IE5vZGVbXSA9IFtdOyAvLyBhcnJheSBvZiBjaGlsZCBub2RlcyBhcHBlbmRlZCB0byB0aGlzIG5vZGUuXHJcbiAgICBwcml2YXRlIGNvbXBvbmVudHM6IE1hcENsYXNzVG9Db21wb25lbnRzID0ge307XHJcbiAgICAvLyBwcml2YXRlIHRhZ3M6IHN0cmluZ1tdID0gW107IC8vIE5hbWVzIG9mIHRhZ3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gdGhpcyBub2RlLiAoVE9ETzogQXMgb2YgeWV0IG5vIGZ1bmN0aW9uYWxpdHkpXHJcbiAgICAvLyBwcml2YXRlIGxheWVyczogc3RyaW5nW10gPSBbXTsgLy8gTmFtZXMgb2YgdGhlIGxheWVycyB0aGlzIG5vZGUgaXMgb24uIChUT0RPOiBBcyBvZiB5ZXQgbm8gZnVuY3Rpb25hbGl0eSlcclxuICAgIHByaXZhdGUgbGlzdGVuZXJzOiBNYXBFdmVudFR5cGVUb0xpc3RlbmVyID0ge307XHJcbiAgICBwcml2YXRlIGNhcHR1cmVzOiBNYXBFdmVudFR5cGVUb0xpc3RlbmVyID0ge307XHJcbiAgICBwcml2YXRlIGFjdGl2ZTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgI210eFdvcmxkSW52ZXJzZVVwZGF0ZWQ6IG51bWJlcjtcclxuICAgICNtdHhXb3JsZEludmVyc2U6IE1hdHJpeDR4NDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgbm9kZSB3aXRoIGEgbmFtZSBhbmQgaW5pdGlhbGl6ZXMgYWxsIGF0dHJpYnV0ZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIG11dGF0b3ItbGlrZSBwYXRoIHN0cmluZyB0byBnZXQgZnJvbSBvbmUgbm9kZSB0byBhbm90aGVyIG9yIG51bGwgaWYgbm8gcGF0aCBpcyBmb3VuZCBlLmcuOlxyXG4gICAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAgICogXCJub2RlL3BhcmVudC9jaGlsZHJlbi8xL2NvbXBvbmVudHMvQ29tcG9uZW50U2tlbGV0b24vMFwiXHJcbiAgICAgKiBgYGBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBQQVRIX0ZST01fVE8oX2Zyb206IE5vZGUgfCBDb21wb25lbnQsIF90bzogTm9kZSB8IENvbXBvbmVudCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICBjb25zdCBmcm9tOiBOb2RlID0gX2Zyb20gaW5zdGFuY2VvZiBDb21wb25lbnQgPyBfZnJvbS5ub2RlIDogX2Zyb207XHJcbiAgICAgIGNvbnN0IHRvOiBOb2RlID0gX3RvIGluc3RhbmNlb2YgQ29tcG9uZW50ID8gX3RvLm5vZGUgOiBfdG87XHJcbiAgICAgIGlmICghZnJvbSB8fCAhdG8pXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAvLyBmaW5kIHBhdGhzIHRvIGxvd2VzdCBjb21tb24gYW5jZXN0b3JcclxuICAgICAgbGV0IHBhdGhGcm9tOiBOb2RlW10gPSBmcm9tLmdldFBhdGgoKTtcclxuICAgICAgbGV0IHBhdGhUbzogTm9kZVtdID0gdG8uZ2V0UGF0aCgpO1xyXG4gICAgICBsZXQgYW5jZXN0b3I6IE5vZGUgPSBudWxsO1xyXG4gICAgICB3aGlsZSAocGF0aEZyb20ubGVuZ3RoICYmIHBhdGhUby5sZW5ndGggJiYgcGF0aEZyb21bMF0gPT0gcGF0aFRvWzBdKSB7XHJcbiAgICAgICAgYW5jZXN0b3IgPSBwYXRoRnJvbS5zaGlmdCgpO1xyXG4gICAgICAgIHBhdGhUby5zaGlmdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHBhdGhUby51bnNoaWZ0KGFuY2VzdG9yKTtcclxuXHJcbiAgICAgIGlmICghYW5jZXN0b3IpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgcmVsYXRpdmUgcGF0aFxyXG4gICAgICBsZXQgcGF0aFRvQW5jZXN0b3I6IHN0cmluZ1tdID0gcGF0aEZyb20ubWFwKF9ub2RlID0+IFwicGFyZW50XCIpOyAvLyBUT0RPOiB1c2UgXCJrZXlvZiBOb2RlXCIgYXMgdHlwZVxyXG4gICAgICBsZXQgcGF0aEZyb21BbmNlc3Rvcjogc3RyaW5nW10gPSBwYXRoVG9cclxuICAgICAgICAuZmxhdE1hcCgoX25vZGUsIF9pbmRleCwgX2FycmF5KSA9PiBbXCJjaGlsZHJlblwiLCBfbm9kZS5maW5kQ2hpbGQoX2FycmF5W19pbmRleCArIDFdKS50b1N0cmluZygpXSlcclxuICAgICAgICAuc2xpY2UoMCwgLTIpO1xyXG5cclxuICAgICAgaWYgKF9mcm9tIGluc3RhbmNlb2YgQ29tcG9uZW50KVxyXG4gICAgICAgIHBhdGhUb0FuY2VzdG9yLnVuc2hpZnQoXCJub2RlXCIpO1xyXG4gICAgICBpZiAoX3RvIGluc3RhbmNlb2YgQ29tcG9uZW50KVxyXG4gICAgICAgIHBhdGhGcm9tQW5jZXN0b3IucHVzaChcImNvbXBvbmVudHNcIiwgX3RvLnR5cGUsIHRvLmNvbXBvbmVudHNbX3RvLnR5cGVdLmluZGV4T2YoX3RvKS50b1N0cmluZygpKTtcclxuXHJcbiAgICAgIHJldHVybiBwYXRoVG9BbmNlc3Rvci5jb25jYXQocGF0aEZyb21BbmNlc3Rvcikuam9pbihcIi9cIik7IC8vIFRPRE86IG9yIG1heWJlIHZhbGlkYXRlIHRoaXMgc3RyaW5nIHdpdGggbm9kZSBhbmQgY29tcG9uZW50IG9iamVjdHM/XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBOb2RlfSBvciB7QGxpbmsgQ29tcG9uZW50fSBmb3VuZCBhdCB0aGUgZ2l2ZW4gcGF0aCBzdGFydGluZyBmcm9tIHRoZSBnaXZlbiBub2RlIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBGSU5EPFQgPSBOb2RlIHwgQ29tcG9uZW50PihfZnJvbTogTm9kZSB8IENvbXBvbmVudCwgX3BhdGg6IHN0cmluZyk6IFQge1xyXG4gICAgICBpZiAoX3BhdGggPT0gXCJcIilcclxuICAgICAgICByZXR1cm4gPFQ+X2Zyb207XHJcblxyXG4gICAgICBsZXQgcGF0aDogc3RyaW5nW10gPSBfcGF0aC5zcGxpdChcIi9cIik7XHJcbiAgICAgIGxldCB0bzogR2VuZXJhbCA9IF9mcm9tO1xyXG5cclxuICAgICAgd2hpbGUgKHBhdGgubGVuZ3RoICYmIHRvKVxyXG4gICAgICAgIHRvID0gUmVmbGVjdC5nZXQodG8sIHBhdGguc2hpZnQoKSk7XHJcblxyXG4gICAgICByZXR1cm4gdG87XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvcnRjdXQgdG8gcmV0cmlldmUgdGhpcyBub2RlcyB7QGxpbmsgQ29tcG9uZW50VHJhbnNmb3JtfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNtcFRyYW5zZm9ybSgpOiBDb21wb25lbnRUcmFuc2Zvcm0ge1xyXG4gICAgICByZXR1cm4gPENvbXBvbmVudFRyYW5zZm9ybT50aGlzLmdldENvbXBvbmVudHMoQ29tcG9uZW50VHJhbnNmb3JtKT8uWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvcnRjdXQgdG8gcmV0cmlldmUgdGhlIGxvY2FsIHtAbGluayBNYXRyaXg0eDR9IGF0dGFjaGVkIHRvIHRoaXMgbm9kZXMge0BsaW5rIENvbXBvbmVudFRyYW5zZm9ybX0gIFxyXG4gICAgICogRmFpbHMgaWYgbm8ge0BsaW5rIENvbXBvbmVudFRyYW5zZm9ybX0gaXMgYXR0YWNoZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtdHhMb2NhbCgpOiBNYXRyaXg0eDQge1xyXG4gICAgICByZXR1cm4gdGhpcy5jbXBUcmFuc2Zvcm0/Lm10eExvY2FsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbXR4V29ybGRJbnZlcnNlKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGlmICh0aGlzLiNtdHhXb3JsZEludmVyc2VVcGRhdGVkICE9IHRoaXMudGltZXN0YW1wVXBkYXRlKVxyXG4gICAgICAgIHRoaXMuI210eFdvcmxkSW52ZXJzZSA9IE1hdHJpeDR4NC5JTlZFUlNFKHRoaXMubXR4V29ybGQpO1xyXG5cclxuICAgICAgdGhpcy4jbXR4V29ybGRJbnZlcnNlVXBkYXRlZCA9IHRoaXMudGltZXN0YW1wVXBkYXRlO1xyXG4gICAgICByZXR1cm4gdGhpcy4jbXR4V29ybGRJbnZlcnNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIGF0dGFjaGVkIHRvIHRoaXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBuQ2hpbGRyZW4oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdG9yIHlpZWxkaW5nIHRoZSBub2RlIGFuZCBhbGwgZGVjZW5kYW50cyBpbiB0aGUgZ3JhcGggYmVsb3cgZm9yIGl0ZXJhdGlvblxyXG4gICAgICogSW5hY3RpdmUgbm9kZXMgYW5kIHRoZWlyIGRlc2NlbmRhbnRzIGNhbiBiZSBmaWx0ZXJlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgKiBnZXRJdGVyYXRvcihfYWN0aXZlOiBib29sZWFuID0gZmFsc2UpOiBJdGVyYWJsZUl0ZXJhdG9yPE5vZGU+IHtcclxuICAgICAgaWYgKCFfYWN0aXZlIHx8IHRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICB5aWVsZCB0aGlzO1xyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pXHJcbiAgICAgICAgICB5aWVsZCogY2hpbGQuZ2V0SXRlcmF0b3IoX2FjdGl2ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGlzIG5vZGUgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMgaW4gdGhlIGdyYXBoIGJlbG93XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPE5vZGU+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0SXRlcmF0b3IoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlLSAvIEFjdGl2YXRlIHRoaXMgbm9kZS4gSW5hY3RpdmUgbm9kZXMgd2lsbCBub3QgYmUgcHJvY2Vzc2VkIGJ5IHRoZSByZW5kZXJlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFjdGl2YXRlKF9vbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICB0aGlzLmFjdGl2ZSA9IF9vbjtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChfb24gPyBFVkVOVC5OT0RFX0FDVElWQVRFIDogRVZFTlQuTk9ERV9ERUFDVElWQVRFLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICB0aGlzLmJyb2FkY2FzdEV2ZW50KG5ldyBFdmVudChfb24gPyBFVkVOVC5OT0RFX0FDVElWQVRFIDogRVZFTlQuTk9ERV9ERUFDVElWQVRFKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gI3JlZ2lvbiBTY2VuZXRyZWVcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIG5vZGVzIHBhcmVudCBub2RlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQYXJlbnQoKTogTm9kZSB8IG51bGwge1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFjZXMgYmFjayB0aGUgYW5jZXN0b3JzIG9mIHRoaXMgbm9kZSBhbmQgcmV0dXJucyB0aGUgZmlyc3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEFuY2VzdG9yKCk6IE5vZGUgfCBudWxsIHtcclxuICAgICAgbGV0IGFuY2VzdG9yOiBOb2RlID0gdGhpcztcclxuICAgICAgd2hpbGUgKGFuY2VzdG9yLmdldFBhcmVudCgpKVxyXG4gICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IuZ2V0UGFyZW50KCk7XHJcbiAgICAgIHJldHVybiBhbmNlc3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYWNlcyB0aGUgaGllcmFyY2h5IHVwd2FyZHMgdG8gdGhlIGZpcnN0IGFuY2VzdG9yIGFuZCByZXR1cm5zIHRoZSBwYXRoIHRocm91Z2ggdGhlIGdyYXBoIHRvIHRoaXMgbm9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UGF0aCgpOiBOb2RlW10ge1xyXG4gICAgICBsZXQgYW5jZXN0b3I6IE5vZGUgPSB0aGlzO1xyXG4gICAgICBsZXQgcGF0aDogTm9kZVtdID0gW3RoaXNdO1xyXG4gICAgICB3aGlsZSAoYW5jZXN0b3IuZ2V0UGFyZW50KCkpXHJcbiAgICAgICAgcGF0aC51bnNoaWZ0KGFuY2VzdG9yID0gYW5jZXN0b3IuZ2V0UGFyZW50KCkpO1xyXG4gICAgICByZXR1cm4gcGF0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgY2hpbGQgYXQgdGhlIGdpdmVuIGluZGV4IGluIHRoZSBsaXN0IG9mIGNoaWxkcmVuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDaGlsZChfaW5kZXg6IG51bWJlcik6IE5vZGUge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltfaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSBsaXN0IG9mIGNoaWxkcmVuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDaGlsZHJlbigpOiBOb2RlW10ge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5zbGljZSgwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgcmVmZXJlbmNlcyB0byBjaGlsZG5vZGVzIHdpdGggdGhlIHN1cHBsaWVkIG5hbWUuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2hpbGRyZW5CeU5hbWUoX25hbWU6IHN0cmluZyk6IE5vZGVbXSB7XHJcbiAgICAgIGxldCBmb3VuZDogTm9kZVtdID0gW107XHJcbiAgICAgIGZvdW5kID0gdGhpcy5jaGlsZHJlbi5maWx0ZXIoKF9ub2RlOiBOb2RlKSA9PiBfbm9kZS5uYW1lID09IF9uYW1lKTtcclxuICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2ltcGx5IGNhbGxzIHtAbGluayBhZGRDaGlsZH0uIFRoaXMgcmVmZXJlbmNlIGlzIGhlcmUgc29sZWx5IGJlY2F1c2UgYXBwZW5kQ2hpbGQgaXMgdGhlIGVxdWl2YWxlbnQgbWV0aG9kIGluIERPTS5cclxuICAgICAqIFNlZSBhbmQgcHJlZmVyYWJseSB1c2Uge0BsaW5rIGFkZENoaWxkfVxyXG4gICAgICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L21lbWJlci1vcmRlcmluZ1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGFwcGVuZENoaWxkOiAoX2NoaWxkOiBOb2RlKSA9PiB2b2lkID0gdGhpcy5hZGRDaGlsZDtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiByZWZlcmVuY2UgdG8gYSBub2RlIHRvIHRoZSBsaXN0IG9mIGNoaWxkcmVuLCBpZiBub3QgYWxyZWFkeSBpblxyXG4gICAgICogQHRocm93cyBFcnJvciB3aGVuIHRyeWluZyB0byBhZGQgYW4gYW5jZXN0b3Igb2YgdGhpcyBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENoaWxkKF9jaGlsZDogTm9kZSk6IHZvaWQ7XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgdGhlIGdpdmVuIHJlZmVyZW5jZSB0byBhIG5vZGUgdG8gdGhlIGxpc3Qgb2YgY2hpbGRyZW4gYXQgdGhlIGdpdmVuIGluZGV4LiBJZiBpdCBpcyBhbHJlYWR5IGEgY2hpbGQsIGl0IGlzIG1vdmVkIHRvIHRoZSBuZXcgcG9zaXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDaGlsZChfY2hpbGQ6IE5vZGUsIF9pbmRleDogbnVtYmVyKTogdm9pZDtcclxuICAgIHB1YmxpYyBhZGRDaGlsZChfY2hpbGQ6IE5vZGUsIF9pbmRleD86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5jaGlsZHJlbi5pbmNsdWRlcyhfY2hpbGQpICYmIF9pbmRleCA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgLy8gX25vZGUgaXMgYWxyZWFkeSBhIGNoaWxkIG9mIHRoaXNcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBsZXQgaW5BdWRpb0dyYXBoOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgIGxldCBncmFwaExpc3RlbmVkOiBOb2RlID0gQXVkaW9NYW5hZ2VyLmRlZmF1bHQuZ2V0R3JhcGhMaXN0ZW5pbmdUbygpO1xyXG4gICAgICBsZXQgYW5jZXN0b3I6IE5vZGUgPSB0aGlzO1xyXG4gICAgICB3aGlsZSAoYW5jZXN0b3IpIHtcclxuICAgICAgICBhbmNlc3Rvci50aW1lc3RhbXBVcGRhdGUgPSAwO1xyXG4gICAgICAgIGluQXVkaW9HcmFwaCA9IGluQXVkaW9HcmFwaCB8fCAoYW5jZXN0b3IgPT0gZ3JhcGhMaXN0ZW5lZCk7XHJcbiAgICAgICAgaWYgKGFuY2VzdG9yID09IF9jaGlsZClcclxuICAgICAgICAgIHRocm93IChuZXcgRXJyb3IoXCJDeWNsaWMgcmVmZXJlbmNlIHByb2hpYml0ZWQgaW4gbm9kZSBoaWVyYXJjaHksIGFuY2VzdG9ycyBtdXN0IG5vdCBiZSBhZGRlZCBhcyBjaGlsZHJlblwiKSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBwcmV2aW91c1BhcmVudDogTm9kZSA9IF9jaGlsZC5wYXJlbnQ7XHJcbiAgICAgIGlmIChwcmV2aW91c1BhcmVudCA9PSB0aGlzICYmIF9pbmRleCA+IHByZXZpb3VzUGFyZW50LmZpbmRDaGlsZChfY2hpbGQpKVxyXG4gICAgICAgIF9pbmRleC0tO1xyXG5cclxuICAgICAgaWYgKHByZXZpb3VzUGFyZW50KVxyXG4gICAgICAgIHByZXZpb3VzUGFyZW50LnJlbW92ZUNoaWxkKF9jaGlsZCk7XHJcblxyXG4gICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShfaW5kZXggPz8gdGhpcy5jaGlsZHJlbi5sZW5ndGgsIDAsIF9jaGlsZCk7XHJcbiAgICAgIF9jaGlsZC5wYXJlbnQgPSB0aGlzO1xyXG4gICAgICBfY2hpbGQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuQ0hJTERfQVBQRU5ELCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICBpZiAoaW5BdWRpb0dyYXBoKVxyXG4gICAgICAgIF9jaGlsZC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uQ0hJTERfQVBQRU5EKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSByZWZlcmVuY2UgdG8gdGhlIGdpdmUgbm9kZSBmcm9tIHRoZSBsaXN0IG9mIGNoaWxkcmVuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW1vdmVDaGlsZChfY2hpbGQ6IE5vZGUpOiB2b2lkIHtcclxuICAgICAgbGV0IGZvdW5kOiBudW1iZXIgPSB0aGlzLmZpbmRDaGlsZChfY2hpbGQpO1xyXG4gICAgICBpZiAoZm91bmQgPCAwKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIF9jaGlsZC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5DSElMRF9SRU1PVkUsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgIF9jaGlsZC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlQuTk9ERV9ERUFDVElWQVRFKSk7XHJcbiAgICAgIGlmICh0aGlzLmlzRGVzY2VuZGFudE9mKEF1ZGlvTWFuYWdlci5kZWZhdWx0LmdldEdyYXBoTGlzdGVuaW5nVG8oKSkpXHJcbiAgICAgICAgX2NoaWxkLmJyb2FkY2FzdEV2ZW50KG5ldyBFdmVudChFVkVOVF9BVURJTy5DSElMRF9SRU1PVkUpKTtcclxuICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoZm91bmQsIDEpO1xyXG4gICAgICBfY2hpbGQucGFyZW50ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYWxsIHJlZmVyZW5jZXMgaW4gdGhlIGxpc3Qgb2YgY2hpbGRyZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZUFsbENoaWxkcmVuKCk6IHZvaWQge1xyXG4gICAgICB3aGlsZSAodGhpcy5jaGlsZHJlbi5sZW5ndGgpXHJcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHBvc2l0aW9uIG9mIHRoZSBub2RlIGluIHRoZSBsaXN0IG9mIGNoaWxkcmVuIG9yIC0xIGlmIG5vdCBmb3VuZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmluZENoaWxkKF9zZWFyY2g6IE5vZGUpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5pbmRleE9mKF9zZWFyY2gpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZXMgYSBjaGlsZCBub2RlIHdpdGggYW5vdGhlciwgcHJlc2VydmluZyB0aGUgcG9zaXRpb24gaW4gdGhlIGxpc3Qgb2YgY2hpbGRyZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlcGxhY2VDaGlsZChfcmVwbGFjZTogTm9kZSwgX3dpdGg6IE5vZGUpOiBib29sZWFuIHtcclxuICAgICAgbGV0IGZvdW5kOiBudW1iZXIgPSB0aGlzLmZpbmRDaGlsZChfcmVwbGFjZSk7XHJcbiAgICAgIGlmIChmb3VuZCA8IDApXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgbGV0IHByZXZpb3VzUGFyZW50OiBOb2RlID0gX3dpdGguZ2V0UGFyZW50KCk7XHJcbiAgICAgIGlmIChwcmV2aW91c1BhcmVudClcclxuICAgICAgICBwcmV2aW91c1BhcmVudC5yZW1vdmVDaGlsZChfd2l0aCk7XHJcblxyXG4gICAgICBfcmVwbGFjZS5wYXJlbnQgPSBudWxsO1xyXG4gICAgICB0aGlzLmNoaWxkcmVuW2ZvdW5kXSA9IF93aXRoO1xyXG4gICAgICBfd2l0aC5wYXJlbnQgPSB0aGlzO1xyXG5cclxuICAgICAgX3dpdGguZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuQ0hJTERfQVBQRU5ELCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICBpZiAodGhpcy5pc0Rlc2NlbmRhbnRPZihBdWRpb01hbmFnZXIuZGVmYXVsdC5nZXRHcmFwaExpc3RlbmluZ1RvKCkpKVxyXG4gICAgICAgIF93aXRoLmJyb2FkY2FzdEV2ZW50KG5ldyBFdmVudChFVkVOVF9BVURJTy5DSElMRF9BUFBFTkQpKTtcclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB0aW1lc3RhbXAgbWF0Y2hlcyB0aGUgbGFzdCB1cGRhdGUgdGltZXN0YW1wIHRoaXMgbm9kZSB1bmRlcndlbnQsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzVXBkYXRlZChfdGltZXN0YW1wVXBkYXRlOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuICh0aGlzLnRpbWVzdGFtcFVwZGF0ZSA9PSBfdGltZXN0YW1wVXBkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBub2RlIGlzIGEgZGVzY2VuZGFudCBvZiB0aGUgZ2l2ZW4gbm9kZSwgZGlyZWN0bHkgb3IgaW5kaXJlY3RseSwgZWxzZSBmYWxzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNEZXNjZW5kYW50T2YoX2FuY2VzdG9yOiBOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgIGxldCBub2RlOiBOb2RlID0gdGhpcztcclxuICAgICAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPSBfYW5jZXN0b3IpXHJcbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50O1xyXG4gICAgICByZXR1cm4gKG5vZGUgIT0gbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIGEgTXV0YXRvciBmcm9tIHtAbGluayBBbmltYXRpb259IHRvIGFsbCBpdHMgY29tcG9uZW50cyBhbmQgdHJhbnNmZXJzIGl0IHRvIGl0cyBjaGlsZHJlbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5QW5pbWF0aW9uKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGlmIChcImNvbXBvbmVudHNcIiBpbiBfbXV0YXRvcikge1xyXG4gICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50VHlwZSBpbiBfbXV0YXRvci5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICBsZXQgY29tcG9uZW50c09mVHlwZTogQ29tcG9uZW50W10gPSB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50VHlwZV07IC8vIFRPRE86IGFkZCBlcnJvcnMgaWYgbm9kZSBkb2Vzbid0IGNvbnRhaW4gcHJvcGVydHlcclxuICAgICAgICAgIGxldCBtdXRhdG9yc0ZvclR5cGU6IE11dGF0b3JbXSA9IF9tdXRhdG9yLmNvbXBvbmVudHNbY29tcG9uZW50VHlwZV07XHJcbiAgICAgICAgICBpZiAoY29tcG9uZW50c09mVHlwZSAhPSB1bmRlZmluZWQgJiYgbXV0YXRvcnNGb3JUeXBlICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gbXV0YXRvcnNGb3JUeXBlKSB7XHJcbiAgICAgICAgICAgICAgY29tcG9uZW50c09mVHlwZVtpXS5tdXRhdGUobXV0YXRvcnNGb3JUeXBlW2ldLCBudWxsLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKFwiY2hpbGRyZW5cIiBpbiBfbXV0YXRvcikge1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGROYW1lIGluIF9tdXRhdG9yLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkTm9kZSBvZiB0aGlzLmdldENoaWxkcmVuQnlOYW1lKGNoaWxkTmFtZSkpIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlLmFwcGx5QW5pbWF0aW9uKF9tdXRhdG9yLmNoaWxkcmVuW2NoaWxkTmFtZV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vICNyZWdpb24gQ29tcG9uZW50c1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgY29tcG9uZW50cyBhdHRhY2hlZCB0byB0aGlzIG5vZGUsIGluZGVwZW5kZW50IG9mIHR5cGUuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWxsQ29tcG9uZW50cygpOiBDb21wb25lbnRbXSB7XHJcbiAgICAgIGxldCBhbGw6IENvbXBvbmVudFtdID0gW107XHJcbiAgICAgIGZvciAobGV0IHR5cGUgaW4gdGhpcy5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgYWxsID0gYWxsLmNvbmNhdCh0aGlzLmNvbXBvbmVudHNbdHlwZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhbGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGxpc3Qgb2YgY29tcG9uZW50cyBvZiB0aGUgZ2l2ZW4gY2xhc3MgYXR0YWNoZWQgdG8gdGhpcyBub2RlLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENvbXBvbmVudHM8VCBleHRlbmRzIENvbXBvbmVudD4oX2NsYXNzOiBuZXcgKCkgPT4gVCk6IFRbXSB7XHJcbiAgICAgIHJldHVybiA8VFtdPih0aGlzLmNvbXBvbmVudHNbX2NsYXNzLm5hbWVdIHx8IFtdKS5zbGljZSgwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgY29tcG9udGVudCBmb3VuZCBvZiB0aGUgZ2l2ZW4gY2xhc3MgYXR0YWNoZWQgdGhpcyBub2RlIG9yIG51bGwsIGlmIGxpc3QgaXMgZW1wdHkgb3IgZG9lc24ndCBleGlzdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q29tcG9uZW50PFQgZXh0ZW5kcyBDb21wb25lbnQ+KF9jbGFzczogbmV3ICgpID0+IFQpOiBUIHtcclxuICAgICAgbGV0IGxpc3Q6IFRbXSA9IDxUW10+dGhpcy5jb21wb25lbnRzW19jbGFzcy5uYW1lXTtcclxuICAgICAgaWYgKGxpc3QpXHJcbiAgICAgICAgcmV0dXJuIGxpc3RbMF07XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIHRoZSBnaXZlbiBjb21wb25lbnQgdG8gdGhpcyBub2RlLiBJZGVudGljYWwgdG8ge0BsaW5rIGFkZENvbXBvbmVudH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGF0dGFjaChfY29tcG9uZW50OiBDb21wb25lbnQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5hZGRDb21wb25lbnQoX2NvbXBvbmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2ggdGhlIGdpdmVuIGNvbXBvbmVudCB0byB0aGlzIG5vZGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbXBvbmVudChfY29tcG9uZW50OiBDb21wb25lbnQpOiB2b2lkIHtcclxuICAgICAgaWYgKF9jb21wb25lbnQubm9kZSA9PSB0aGlzKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgbGV0IGNtcExpc3Q6IENvbXBvbmVudFtdID0gdGhpcy5jb21wb25lbnRzW19jb21wb25lbnQudHlwZV07XHJcbiAgICAgIGlmIChjbXBMaXN0ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzW19jb21wb25lbnQudHlwZV0gPSBbX2NvbXBvbmVudF07XHJcbiAgICAgIGVsc2UgaWYgKGNtcExpc3QubGVuZ3RoICYmIF9jb21wb25lbnQuaXNTaW5nbGV0b24pXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtfY29tcG9uZW50LnR5cGV9IGlzIG1hcmtlZCBzaW5nbGV0b24gYW5kIGNhbid0IGJlIGF0dGFjaGVkLCBubyBtb3JlIHRoYW4gb25lIGFsbG93ZWRgKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIGNtcExpc3QucHVzaChfY29tcG9uZW50KTtcclxuXHJcbiAgICAgIF9jb21wb25lbnQuYXR0YWNoVG9Ob2RlKHRoaXMpO1xyXG4gICAgICBfY29tcG9uZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULkNPTVBPTkVOVF9BREQpKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50VG9UYXJnZXRPbmx5KG5ldyBDdXN0b21FdmVudChFVkVOVC5DT01QT05FTlRfQURELCB7IGRldGFpbDogX2NvbXBvbmVudCB9KSk7IC8vIFRPRE86IHNlZSBpZiB0aGlzIGlzIGJlIGZlYXNhYmxlXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRhY2ggdGhlIGdpdmVuIGNvbXBvbmVudCBmcm9tIHRoaXMgbm9kZS4gSWRlbnRpY2FsIHRvIHtAbGluayByZW1vdmVDb21wb25lbnR9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXRhY2goX2NvbXBvbmVudDogQ29tcG9uZW50KTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ29tcG9uZW50KF9jb21wb25lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBvZiB0aGUgZ2l2ZW4gY2xhc3MgYXR0YWNoZWQgdG8gdGhpcyBub2RlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ29tcG9uZW50cyhfY2xhc3M6IG5ldyAoKSA9PiBDb21wb25lbnQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5nZXRDb21wb25lbnRzKF9jbGFzcykuZm9yRWFjaChfY29tcG9uZW50ID0+IHRoaXMucmVtb3ZlQ29tcG9uZW50KF9jb21wb25lbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBjb21wb25lbnQgZnJvbSB0aGUgbm9kZSwgaWYgaXQgd2FzIGF0dGFjaGVkLCBhbmQgc2V0cyBpdHMgcGFyZW50IHRvIG51bGwuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ29tcG9uZW50KF9jb21wb25lbnQ6IENvbXBvbmVudCk6IHZvaWQge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxldCBjb21wb25lbnRzT2ZUeXBlOiBDb21wb25lbnRbXSA9IHRoaXMuY29tcG9uZW50c1tfY29tcG9uZW50LnR5cGVdO1xyXG4gICAgICAgIGxldCBmb3VuZEF0OiBudW1iZXIgPSBjb21wb25lbnRzT2ZUeXBlLmluZGV4T2YoX2NvbXBvbmVudCk7XHJcbiAgICAgICAgaWYgKGZvdW5kQXQgPCAwKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIF9jb21wb25lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuQ09NUE9ORU5UX1JFTU9WRSkpO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudFRvVGFyZ2V0T25seShuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuQ09NUE9ORU5UX1JFTU9WRSwgeyBkZXRhaWw6IF9jb21wb25lbnQgfSkpOyAvLyBUT0RPOiBzZWUgaWYgdGhpcyB3b3VsZCBiZSBmZWFzYWJsZVxyXG4gICAgICAgIGNvbXBvbmVudHNPZlR5cGUuc3BsaWNlKGZvdW5kQXQsIDEpO1xyXG4gICAgICAgIF9jb21wb25lbnQuYXR0YWNoVG9Ob2RlKG51bGwpO1xyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZW1vdmUgY29tcG9uZW50ICcke19jb21wb25lbnR9J2luIG5vZGUgbmFtZWQgJyR7dGhpcy5uYW1lfSdgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vICNyZWdpb24gU2VyaWFsaXphdGlvblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxldCBjb21wb25lbnRzOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIGZvciAobGV0IHR5cGUgaW4gdGhpcy5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgY29tcG9uZW50c1t0eXBlXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHNbdHlwZV0pIHtcclxuICAgICAgICAgIC8vIGNvbXBvbmVudHNbdHlwZV0ucHVzaChjb21wb25lbnQuc2VyaWFsaXplKCkpO1xyXG4gICAgICAgICAgY29tcG9uZW50c1t0eXBlXS5wdXNoKFNlcmlhbGl6ZXIuc2VyaWFsaXplKGNvbXBvbmVudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzZXJpYWxpemF0aW9uW1wiY29tcG9uZW50c1wiXSA9IGNvbXBvbmVudHM7XHJcblxyXG4gICAgICBsZXQgY2hpbGRyZW46IFNlcmlhbGl6YXRpb25bXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgY2hpbGRyZW4ucHVzaChTZXJpYWxpemVyLnNlcmlhbGl6ZShjaGlsZCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bXCJjaGlsZHJlblwiXSA9IGNoaWxkcmVuO1xyXG5cclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5OT0RFX1NFUklBTElaRUQpKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5uYW1lID0gX3NlcmlhbGl6YXRpb24ubmFtZTtcclxuICAgICAgLy8gdGhpcy5wYXJlbnQgPSBpcyBzZXQgd2hlbiB0aGUgbm9kZXMgYXJlIGFkZGVkXHJcblxyXG4gICAgICAvLyBkZXNlcmlhbGl6ZSBjb21wb25lbnRzIGZpcnN0IHNvIHNjcmlwdHMgY2FuIHJlYWN0IHRvIGNoaWxkcmVuIGJlaW5nIGFwcGVuZGVkXHJcbiAgICAgIGZvciAobGV0IHR5cGUgaW4gX3NlcmlhbGl6YXRpb24uY29tcG9uZW50cykge1xyXG4gICAgICAgIGZvciAobGV0IHNlcmlhbGl6ZWRDb21wb25lbnQgb2YgX3NlcmlhbGl6YXRpb24uY29tcG9uZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgbGV0IGRlc2VyaWFsaXplZENvbXBvbmVudDogQ29tcG9uZW50ID0gPENvbXBvbmVudD5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRDb21wb25lbnQpO1xyXG4gICAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoZGVzZXJpYWxpemVkQ29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChfc2VyaWFsaXphdGlvbi5jaGlsZHJlbilcclxuICAgICAgICBmb3IgKGxldCBzZXJpYWxpemVkQ2hpbGQgb2YgX3NlcmlhbGl6YXRpb24uY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGxldCBkZXNlcmlhbGl6ZWRDaGlsZDogTm9kZSA9IDxOb2RlPmF3YWl0IFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoc2VyaWFsaXplZENoaWxkKTtcclxuICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZGVzZXJpYWxpemVkQ2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuTk9ERV9ERVNFUklBTElaRUQpKTtcclxuICAgICAgZm9yIChsZXQgY29tcG9uZW50IG9mIHRoaXMuZ2V0QWxsQ29tcG9uZW50cygpKVxyXG4gICAgICAgIGNvbXBvbmVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCkpO1xyXG5cclxuICAgICAgLy8gVE9ETzogY29uc2lkZXIgaWYgdGhpcyBpcyBhIGdvb2QgaWRlYVxyXG4gICAgICAvLyBjb25zdCBobmRHcmFwaERlc2VyaWFsaXplZDogRXZlbnRMaXN0ZW5lclVuaWZpZWQgPSAoKSA9PiB7XHJcbiAgICAgIC8vICAgZm9yIChsZXQgY29tcG9uZW50IG9mIHRoaXMuZ2V0QWxsQ29tcG9uZW50cygpKVxyXG4gICAgICAvLyAgICAgY29tcG9uZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULkdSQVBIX0RFU0VSSUFMSVpFRCwgeyBidWJibGVzOiBmYWxzZSB9KSk7XHJcbiAgICAgIC8vICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkdSQVBIX0RFU0VSSUFMSVpFRCwgaG5kR3JhcGhEZXNlcmlhbGl6ZWQsIHRydWUpO1xyXG4gICAgICAvLyAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5HUkFQSF9JTlNUQU5USUFURUQsIGhuZEdyYXBoRGVzZXJpYWxpemVkLCB0cnVlKTtcclxuICAgICAgLy8gfTtcclxuICAgICAgLy8gdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkdSQVBIX0RFU0VSSUFMSVpFRCwgaG5kR3JhcGhEZXNlcmlhbGl6ZWQsIHRydWUpO1xyXG4gICAgICAvLyB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuR1JBUEhfSU5TVEFOVElBVEVELCBobmRHcmFwaERlc2VyaWFsaXplZCwgdHJ1ZSk7XHJcblxyXG4gICAgICB0aGlzLmFjdGl2YXRlKF9zZXJpYWxpemF0aW9uLmFjdGl2ZSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHN0cmluZyBhcyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9IaWVyYXJjaHlTdHJpbmcoX25vZGU6IE5vZGUgPSBudWxsLCBfbGV2ZWw6IG51bWJlciA9IDApOiBzdHJpbmcge1xyXG4gICAgICAvLyBUT0RPOiByZWZhY3RvciBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5XHJcbiAgICAgIGlmICghX25vZGUpXHJcbiAgICAgICAgX25vZGUgPSB0aGlzO1xyXG5cclxuICAgICAgbGV0IHByZWZpeDogc3RyaW5nID0gXCIrXCIucmVwZWF0KF9sZXZlbCk7XHJcblxyXG4gICAgICBsZXQgb3V0cHV0OiBzdHJpbmcgPSBwcmVmaXggKyBcIiBcIiArIF9ub2RlLm5hbWUgKyBcIiB8IFwiO1xyXG4gICAgICBmb3IgKGxldCB0eXBlIGluIF9ub2RlLmNvbXBvbmVudHMpXHJcbiAgICAgICAgb3V0cHV0ICs9IF9ub2RlLmNvbXBvbmVudHNbdHlwZV0ubGVuZ3RoICsgXCIgXCIgKyB0eXBlLnNwbGl0KFwiQ29tcG9uZW50XCIpLnBvcCgpICsgXCIsIFwiO1xyXG4gICAgICBvdXRwdXQgPSBvdXRwdXQuc2xpY2UoMCwgLTIpICsgXCI8L2JyPlwiO1xyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiBfbm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgIG91dHB1dCArPSB0aGlzLnRvSGllcmFyY2h5U3RyaW5nKGNoaWxkLCBfbGV2ZWwgKyAxKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vICNyZWdpb24gRXZlbnRzXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIG5vZGUuIFRoZSBnaXZlbiBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIHdoZW4gYSBtYXRjaGluZyBldmVudCBpcyBwYXNzZWQgdG8gdGhlIG5vZGUuXHJcbiAgICAgKiBEZXZpYXRpbmcgZnJvbSB0aGUgc3RhbmRhcmQgRXZlbnRUYXJnZXQsIGhlcmUgdGhlIF9oYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbiBhbmQgX2NhcHR1cmUgaXMgdGhlIG9ubHkgb3B0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcihfdHlwZTogRVZFTlQgfCBzdHJpbmcsIF9oYW5kbGVyOiBFdmVudExpc3RlbmVyVW5pZmllZCwgX2NhcHR1cmU6IGJvb2xlYW4gLyp8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zKi8gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICBsZXQgbGlzdExpc3RlbmVyczogTWFwRXZlbnRUeXBlVG9MaXN0ZW5lciA9IF9jYXB0dXJlID8gdGhpcy5jYXB0dXJlcyA6IHRoaXMubGlzdGVuZXJzO1xyXG4gICAgICBpZiAoIWxpc3RMaXN0ZW5lcnNbX3R5cGVdKVxyXG4gICAgICAgIGxpc3RMaXN0ZW5lcnNbX3R5cGVdID0gW107XHJcbiAgICAgIGxpc3RMaXN0ZW5lcnNbX3R5cGVdLnB1c2goX2hhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyIGZyb20gdGhlIG5vZGUuIFRoZSBzaWduYXR1cmUgbXVzdCBtYXRjaCB0aGUgb25lIHVzZWQgd2l0aCBhZGRFdmVudExpc3RlbmVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyKF90eXBlOiBFVkVOVCB8IHN0cmluZywgX2hhbmRsZXI6IEV2ZW50TGlzdGVuZXJVbmlmaWVkLCBfY2FwdHVyZTogYm9vbGVhbiAvKnwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMqLyA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICAgIGxldCBsaXN0ZW5lcnNGb3JUeXBlOiBFdmVudExpc3RlbmVyVW5pZmllZFtdID0gX2NhcHR1cmUgPyB0aGlzLmNhcHR1cmVzW190eXBlXSA6IHRoaXMubGlzdGVuZXJzW190eXBlXTtcclxuICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGUpXHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gbGlzdGVuZXJzRm9yVHlwZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgIGlmIChsaXN0ZW5lcnNGb3JUeXBlW2ldID09IF9oYW5kbGVyKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGF0Y2hlcyBhIHN5bnRoZXRpYyBldmVudCB0byB0YXJnZXQuIFRoaXMgaW1wbGVtZW50YXRpb24gYWx3YXlzIHJldHVybnMgdHJ1ZSAoc3RhbmRhcmQ6IHJldHVybiB0cnVlIG9ubHkgaWYgZWl0aGVyIGV2ZW50J3MgY2FuY2VsYWJsZSBhdHRyaWJ1dGUgdmFsdWUgaXMgZmFsc2Ugb3IgaXRzIHByZXZlbnREZWZhdWx0KCkgbWV0aG9kIHdhcyBub3QgaW52b2tlZClcclxuICAgICAqIFRoZSBldmVudCB0cmF2ZWxzIGludG8gdGhlIGhpZXJhcmNoeSB0byB0aGlzIG5vZGUgZGlzcGF0Y2hpbmcgdGhlIGV2ZW50LCBpbnZva2luZyBtYXRjaGluZyBoYW5kbGVycyBvZiB0aGUgbm9kZXMgYW5jZXN0b3JzIGxpc3RlbmluZyB0byB0aGUgY2FwdHVyZSBwaGFzZSwgXHJcbiAgICAgKiB0aGFuIHRoZSBtYXRjaGluZyBoYW5kbGVyIG9mIHRoZSB0YXJnZXQgbm9kZSBpbiB0aGUgdGFyZ2V0IHBoYXNlLCBhbmQgYmFjayBvdXQgb2YgdGhlIGhpZXJhcmNoeSBpbiB0aGUgYnViYmxpbmcgcGhhc2UsIGludm9raW5nIGFwcHJvcHJpYXRlIGhhbmRsZXJzIG9mIHRoZSBhbnZlc3RvcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpc3BhdGNoRXZlbnQoX2V2ZW50OiBFdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICBsZXQgYW5jZXN0b3JzOiBOb2RlW10gPSBbXTtcclxuICAgICAgbGV0IHVwY29taW5nOiBOb2RlID0gdGhpcztcclxuICAgICAgLy8gb3ZlcndyaXRlIGV2ZW50IHRhcmdldFxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcInRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcyB9KTtcclxuICAgICAgLy8gVE9ETzogY29uc2lkZXIgdXNpbmcgUmVmbGVjdCBpbnN0ZWFkIG9mIE9iamVjdCB0aHJvdWdob3V0LiBTZWUgYWxzbyBSZW5kZXIgYW5kIE11dGFibGUuLi5cclxuICAgICAgd2hpbGUgKHVwY29taW5nLnBhcmVudClcclxuICAgICAgICBhbmNlc3RvcnMucHVzaCh1cGNvbWluZyA9IHVwY29taW5nLnBhcmVudCk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwicGF0aFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogbmV3IEFycmF5PE5vZGU+KHRoaXMsIC4uLmFuY2VzdG9ycykgfSk7XHJcblxyXG4gICAgICAvLyBjYXB0dXJlIHBoYXNlXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiZXZlbnRQaGFzZVwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogRXZlbnQuQ0FQVFVSSU5HX1BIQVNFIH0pO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBhbmNlc3RvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICBsZXQgYW5jZXN0b3I6IE5vZGUgPSBhbmNlc3RvcnNbaV07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9ldmVudCwgXCJjdXJyZW50VGFyZ2V0XCIsIHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBhbmNlc3RvciB9KTtcclxuICAgICAgICB0aGlzLmNhbGxMaXN0ZW5lcnMoYW5jZXN0b3IuY2FwdHVyZXNbX2V2ZW50LnR5cGVdLCBfZXZlbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB0YXJnZXQgcGhhc2VcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9ldmVudCwgXCJldmVudFBoYXNlXCIsIHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBFdmVudC5BVF9UQVJHRVQgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcyB9KTtcclxuICAgICAgdGhpcy5jYWxsTGlzdGVuZXJzKHRoaXMuY2FwdHVyZXNbX2V2ZW50LnR5cGVdLCBfZXZlbnQpO1xyXG4gICAgICB0aGlzLmNhbGxMaXN0ZW5lcnModGhpcy5saXN0ZW5lcnNbX2V2ZW50LnR5cGVdLCBfZXZlbnQpO1xyXG5cclxuICAgICAgaWYgKCFfZXZlbnQuYnViYmxlcylcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIGJ1YmJsZSBwaGFzZVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcImV2ZW50UGhhc2VcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IEV2ZW50LkJVQkJMSU5HX1BIQVNFIH0pO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgYW5jZXN0b3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGFuY2VzdG9yOiBOb2RlID0gYW5jZXN0b3JzW2ldO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogYW5jZXN0b3IgfSk7XHJcbiAgICAgICAgdGhpcy5jYWxsTGlzdGVuZXJzKGFuY2VzdG9yLmxpc3RlbmVyc1tfZXZlbnQudHlwZV0sIF9ldmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7IC8vVE9ETzogcmV0dXJuIGEgbWVhbmluZ2Z1bCB2YWx1ZSwgc2VlIGRvY3VtZW50YXRpb24gb2YgZGlzcGF0Y2ggZXZlbnRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGF0Y2hlcyBhIHN5bnRoZXRpYyBldmVudCB0byB0YXJnZXQgd2l0aG91dCB0cmF2ZWxsaW5nIHRocm91Z2ggdGhlIGdyYXBoIGhpZXJhcmNoeSBuZWl0aGVyIGR1cmluZyBjYXB0dXJlIG5vciBidWJibGluZyBwaGFzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudFRvVGFyZ2V0T25seShfZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiZXZlbnRQaGFzZVwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogRXZlbnQuQVRfVEFSR0VUIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcImN1cnJlbnRUYXJnZXRcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRoaXMgfSk7XHJcbiAgICAgIHRoaXMuY2FsbExpc3RlbmVycyh0aGlzLmxpc3RlbmVyc1tfZXZlbnQudHlwZV0sIF9ldmVudCk7IC8vIFRPRE86IGV4YW1pbmUgaWYgdGhpcyBzaG91bGQgZ28gdG8gdGhlIGNhcHR1cmVzIGluc3RlYWQgb2YgdGhlIGxpc3RlbmVyc1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQnJvYWRjYXN0cyBhIHN5bnRoZXRpYyBldmVudCB0byB0aGlzIG5vZGUgYW5kIGZyb20gdGhlcmUgdG8gYWxsIG5vZGVzIGRlZXBlciBpbiB0aGUgaGllcmFyY2h5LFxyXG4gICAgICogaW52b2tpbmcgbWF0Y2hpbmcgaGFuZGxlcnMgb2YgdGhlIG5vZGVzIGxpc3RlbmluZyB0byB0aGUgY2FwdHVyZSBwaGFzZS4gV2F0Y2ggcGVyZm9ybWFuY2Ugd2hlbiB0aGVyZSBhcmUgbWFueSBub2RlcyBpbnZvbHZlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYnJvYWRjYXN0RXZlbnQoX2V2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAvLyBvdmVyd3JpdGUgZXZlbnQgdGFyZ2V0IGFuZCBwaGFzZVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcImV2ZW50UGhhc2VcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IEV2ZW50LkNBUFRVUklOR19QSEFTRSB9KTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9ldmVudCwgXCJ0YXJnZXRcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRoaXMgfSk7XHJcbiAgICAgIHRoaXMuYnJvYWRjYXN0RXZlbnRSZWN1cnNpdmUoX2V2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJyb2FkY2FzdEV2ZW50UmVjdXJzaXZlKF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgLy8gY2FwdHVyZSBwaGFzZSBvbmx5XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcyB9KTtcclxuICAgICAgbGV0IGNhcHR1cmVzOiBFdmVudExpc3RlbmVyVW5pZmllZFtdID0gdGhpcy5jYXB0dXJlc1tfZXZlbnQudHlwZV0gfHwgW107XHJcbiAgICAgIGZvciAobGV0IGhhbmRsZXIgb2YgY2FwdHVyZXMpXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGhhbmRsZXIoX2V2ZW50KTtcclxuICAgICAgLy8gYXBwZWFycyB0byBiZSBzbG93ZXIsIGFzdG9uaXNoaW5nbHkuLi5cclxuICAgICAgLy8gY2FwdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgICAgLy8gICAgIGhhbmRsZXIoX2V2ZW50KTtcclxuICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAvLyBzYW1lIGZvciBjaGlsZHJlblxyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgY2hpbGQuYnJvYWRjYXN0RXZlbnRSZWN1cnNpdmUoX2V2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsbExpc3RlbmVycyhfbGlzdGVuZXJzOiBFdmVudExpc3RlbmVyVW5pZmllZFtdLCBfZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgIGlmIChfbGlzdGVuZXJzPy5sZW5ndGggPiAwKVxyXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2YgX2xpc3RlbmVycylcclxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgIGhhbmRsZXIoX2V2ZW50KTtcclxuICAgIH1cclxuICAgIC8vICNlbmRyZWdpb25cclxuICB9XHJcbn0iLCIvLyAvIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1RyYW5zZmVyL1NlcmlhbGl6ZXIudHNcIi8+XHJcbi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVHJhbnNmZXIvTXV0YWJsZS50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqIFxyXG4gICAqIFN1cGVyY2xhc3MgZm9yIGFsbCB7QGxpbmsgQ29tcG9uZW50fXMgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8ge0BsaW5rIE5vZGV9cy5cclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMCB8IEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5ICBcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vaHMtZnVydHdhbmdlbi9GVURHRS93aWtpL0NvbXBvbmVudFxyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnQgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcclxuICAgIC8qKiBzdWJjbGFzc2VzIGdldCBhIGlTdWJjbGFzcyBudW1iZXIgZm9yIGlkZW50aWZpY2F0aW9uICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyO1xyXG4gICAgLyoqIHJlZmVycyBiYWNrIHRvIHRoaXMgY2xhc3MgZnJvbSBhbnkgc3ViY2xhc3MgZS5nLiBpbiBvcmRlciB0byBmaW5kIGNvbXBhdGlibGUgb3RoZXIgcmVzb3VyY2VzKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgYmFzZUNsYXNzOiB0eXBlb2YgQ29tcG9uZW50ID0gQ29tcG9uZW50O1xyXG4gICAgLyoqIGxpc3Qgb2YgYWxsIHRoZSBzdWJjbGFzc2VzIGRlcml2ZWQgZnJvbSB0aGlzIGNsYXNzLCBpZiB0aGV5IHJlZ2lzdGVyZWQgcHJvcGVybHkqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBzdWJjbGFzc2VzOiB0eXBlb2YgQ29tcG9uZW50W10gPSBbXTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc2luZ2xldG9uOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByb3RlY3RlZCBhY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgI25vZGU6IE5vZGUgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5NVVRBVEUsIChfZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuI25vZGUpIHtcclxuICAgICAgICAgIC8vIFRPRE86IGZpbmQgdGhlIG51bWJlciBvZiB0aGUgY29tcG9uZW50IGluIHRoZSBhcnJheSBpZiBub3Qgc2luZ2xldG9uXHJcbiAgICAgICAgICBfZXZlbnQuZGV0YWlsLmNvbXBvbmVudCA9IHRoaXM7XHJcbiAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgIF9ldmVudC5kZXRhaWwuY29tcG9uZW50SW5kZXggPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50cyh0aGlzLmNvbnN0cnVjdG9yKS5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgdGhpcy4jbm9kZS5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlZ2lzdGVyU3ViY2xhc3MoX3N1YmNsYXNzOiB0eXBlb2YgQ29tcG9uZW50KTogbnVtYmVyIHsgcmV0dXJuIENvbXBvbmVudC5zdWJjbGFzc2VzLnB1c2goX3N1YmNsYXNzKSAtIDE7IH1cclxuXHJcblxyXG4gICAgcHVibGljIGdldCBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSXMgdHJ1ZSwgd2hlbiBvbmx5IG9uZSBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50IGNsYXNzIGNhbiBiZSBhdHRhY2hlZCB0byBhIG5vZGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBpc1NpbmdsZXRvbigpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2luZ2xldG9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBub2RlLCB0aGlzIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgYXR0YWNoZWQgdG9cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBub2RlKCk6IE5vZGUgfCBudWxsIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI25vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZS0gLyBBY3RpdmF0ZSB0aGlzIGNvbXBvbmVudC4gSW5hY3RpdmUgY29tcG9uZW50cyB3aWxsIG5vdCBiZSBwcm9jZXNzZWQgYnkgdGhlIHJlbmRlcmVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gX29uO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KF9vbiA/IEVWRU5ULkNPTVBPTkVOVF9BQ1RJVkFURSA6IEVWRU5ULkNPTVBPTkVOVF9ERUFDVElWQVRFKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmllcyB0byBhdHRhY2ggdGhlIGNvbXBvbmVudCB0byB0aGUgZ2l2ZW4gbm9kZSwgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgbm9kZSBpdCB3YXMgYXR0YWNoZWQgdG8gaWYgYXBwbGljYWJsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXR0YWNoVG9Ob2RlKF9jb250YWluZXI6IE5vZGUgfCBudWxsKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLiNub2RlID09IF9jb250YWluZXIpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBsZXQgcHJldmlvdXNDb250YWluZXI6IE5vZGUgPSB0aGlzLiNub2RlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChwcmV2aW91c0NvbnRhaW5lcilcclxuICAgICAgICAgIHByZXZpb3VzQ29udGFpbmVyLnJlbW92ZUNvbXBvbmVudCh0aGlzKTtcclxuICAgICAgICB0aGlzLiNub2RlID0gX2NvbnRhaW5lcjtcclxuICAgICAgICBpZiAodGhpcy4jbm9kZSlcclxuICAgICAgICAgIHRoaXMuI25vZGUuYWRkQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICB0aGlzLiNub2RlID0gcHJldmlvdXNDb250YWluZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE92ZXJyaWRlIHRoaXMgdG8gZHJhdyB2aXN1YWwgYWlkcyBmb3IgdGhpcyBjb21wb25lbnQgaW5zaWRlIHRoZSBlZGl0b3JzIHJlbmRlciB2aWV3LiBVc2Uge0BsaW5rIEdpem1vc30gaW5zaWRlIHRoZSBvdmVycmlkZSB0byBkcmF3IHN0dWZmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZHJhd0dpem1vcz8oKTogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlZSB7QGxpbmsgZHJhd0dpem1vc30uIE9ubHkgZGlzcGxheWVkIHdoaWxlIHRoZSBjb3JyZXNwb25kaW5nIG5vZGUgaXMgc2VsZWN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3R2l6bW9zU2VsZWN0ZWQ/KCk6IHZvaWQ7XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBhY3RpdmU6IHRoaXMuYWN0aXZlXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5hY3RpdmF0ZShfc2VyaWFsaXphdGlvbi5hY3RpdmUpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci5hY3RpdmUpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuYWN0aXZhdGUoX211dGF0b3IuYWN0aXZlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBkZWxldGUgX211dGF0b3Iuc2luZ2xldG9uO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IubXR4V29ybGQ7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBXcmFwcyBhIHJlZ3VsYXIgSmF2YXNjcmlwdCBBcnJheSBhbmQgb2ZmZXJzIHZlcnkgbGltaXRlZCBmdW5jdGlvbmFsaXR5IGdlYXJlZCBzb2xlbHkgdG93YXJkcyBhdm9pZGluZyBnYXJiYWdlIGNvbGxldGlvbi5cclxuICAgKiBAYXV0aG9yIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2hzLWZ1cnR3YW5nZW4vRlVER0Uvd2lraS9SZWN5Y2xlclxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSZWN5Y2FibGVBcnJheTxUPiB7XHJcbiAgICAjbGVuZ3RoOiBudW1iZXIgPSAwO1xyXG4gICAgI2FycmF5OiBBcnJheTxUPiA9IG5ldyBBcnJheTxUPigpO1xyXG4gICAgLy8gI3R5cGU6IG5ldyAoKSA9PiBUO1xyXG5cclxuICAgIC8vIC8vdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxyXG4gICAgLy8gY29uc3RydWN0b3IoX3R5cGU6IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQpIHtcclxuICAgIC8vICAgdGhpcy4jdHlwZSA9IF90eXBlO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNsZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB2aXJ0dWFsIGxlbmd0aCBvZiB0aGUgYXJyYXkgdG8gemVybyBidXQga2VlcHMgdGhlIGVudHJpZXMgYmV5b25kLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI2xlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN5Y2xlIHRoaXMgYXJyYXlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZHMgYSBuZXcgZW50cnkgdG8gdGhlIGVuZCBvZiB0aGUgYXJyYXksIGFuZCByZXR1cm5zIHRoZSBuZXcgbGVuZ3RoIG9mIHRoZSBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHB1c2goX2VudHJ5OiBUKTogbnVtYmVyIHtcclxuICAgICAgdGhpcy4jYXJyYXlbdGhpcy4jbGVuZ3RoXSA9IF9lbnRyeTtcclxuICAgICAgdGhpcy4jbGVuZ3RoKys7XHJcbiAgICAgIHJldHVybiB0aGlzLiNsZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBsYXN0IGVudHJ5IGZyb20gdGhlIGFycmF5IGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9wKCk6IFQge1xyXG4gICAgICB0aGlzLiNsZW5ndGgtLTtcclxuICAgICAgcmV0dXJuIHRoaXMuI2FycmF5W3RoaXMuI2xlbmd0aF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN5Y2xlcyB0aGUgb2JqZWN0IGZvbGxvd2luZyB0aGUgbGFzdCBpbiB0aGUgYXJyYXkgYW5kIGluY3JlYXNlcyB0aGUgYXJyYXkgbGVuZ3RoXHJcbiAgICAgKiBJdCBtdXN0IGJlIGFzc3VyZWQsIHRoYXQgbm9uZSBvZiB0aGUgb2JqZWN0cyBpbiB0aGUgYXJyYXkgaXMgc3RpbGwgaW4gYW55IHVzZSBvZiBhbnkga2luZCFcclxuICAgICAqL1xyXG4gICAgLy8gcHVibGljIHJlY3ljbGUoKTogVCB7XHJcbiAgICAvLyAgIGlmICh0aGlzLiNsZW5ndGggPCB0aGlzLiNhcnJheS5sZW5ndGgpIHtcclxuICAgIC8vICAgICB0aGlzLiNsZW5ndGgrKztcclxuICAgIC8vICAgICByZXR1cm4gdGhpcy4jYXJyYXlbdGhpcy4jbGVuZ3RoKytdO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIHRoaXMuI2FycmF5LnB1c2goUmVjeWNsZXIuZ2V0KHRoaXMuI3R5cGUpKTtcclxuICAgIC8vICAgcmV0dXJuIHRoaXMuI2FycmF5W3RoaXMuI2xlbmd0aCsrXTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBwdWJsaWMgKltTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhYmxlSXRlcmF0b3I8VD4ge1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy4jbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgeWllbGQgdGhpcy4jYXJyYXlbaV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgYXJyYXkgc29ydGVkIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gY29tcGFyZSBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U29ydGVkKF9zb3J0OiAoYTogVCwgYjogVCkgPT4gbnVtYmVyKTogVFtdIHtcclxuICAgICAgbGV0IHNvcnRlZDogVFtdID0gdGhpcy4jYXJyYXkuc2xpY2UoMCwgdGhpcy4jbGVuZ3RoKTtcclxuICAgICAgc29ydGVkLnNvcnQoX3NvcnQpO1xyXG4gICAgICByZXR1cm4gc29ydGVkO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEJhc2VjbGFzcyBmb3Ige0BsaW5rIFJlbmRlckluamVjdG9yQ29hdH0gYW5kIHtAbGluayBSZW5kZXJJbmplY3RvclRleHR1cmV9XHJcbiAgICogQGludGVybmFsXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlckluamVjdG9yIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluamVjdHMgdGhlIGdpdmVuIGNvbnN0cnVjdG9yIHdpdGggdGhlIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIGdpdmVuIGluamVjdG9yLiBOYW1lIG9mIHRoZSBjb25zdHJ1Y3RvciBhbmQgdGhlIG5hbWUgb2YgdGhlIGluamVjdG9yIG1ldGhvZCBtdXN0IG1hdGNoLlxyXG4gICAgICogVXNlZCBpbiBzdWJjbGFzc2VzIG9mIHRoaXMgY2xhc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5qZWN0KF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24sIF9pbmplY3RvcjogdHlwZW9mIFJlbmRlckluamVjdG9yKTogdm9pZCB7XHJcbiAgICAgIGxldCBpbmplY3Rpb246IEZ1bmN0aW9uID0gUmVmbGVjdC5nZXQoX2luamVjdG9yLCBcImluamVjdFwiICsgX2NvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICBpZiAoIWluamVjdGlvbikge1xyXG4gICAgICAgIERlYnVnLmVycm9yKFwiTm8gaW5qZWN0aW9uIGRlY29yYXRvciBkZWZpbmVkIGZvciBcIiArIF9jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgfVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJ1c2VSZW5kZXJEYXRhXCIsIHtcclxuICAgICAgICB2YWx1ZTogaW5qZWN0aW9uXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBHaXZlcyBXZWJHTCBCdWZmZXIgdGhlIGRhdGEgZnJvbSB0aGUge0BsaW5rIFNoYWRlcn1cclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUmVuZGVySW5qZWN0b3JTaGFkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmplY3RzIHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoaXMgY2xhc3MgaW50byB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGdpdmVuIHtAbGluayBTaGFkZXJ9LXN1YmNsYXNzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbiwgX2NvbnRleHQ6IENsYXNzRGVjb3JhdG9yQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLCBcInVzZVByb2dyYW1cIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlci51c2VQcm9ncmFtXHJcbiAgICAgIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLCBcImRlbGV0ZVByb2dyYW1cIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlci5kZWxldGVQcm9ncmFtXHJcbiAgICAgIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLCBcImNyZWF0ZVByb2dyYW1cIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlci5jcmVhdGVQcm9ncmFtXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoaXMgcHJvZ3JhbSB0byB1c2UgYXMgdGhlIGFjdGl2ZSBwcm9ncmFtIGluIFdlYkdMXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgdXNlUHJvZ3JhbSh0aGlzOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5wcm9ncmFtKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlUHJvZ3JhbSgpO1xyXG5cclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGNyYzMudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlcyB0aGlzIHByb2dyYW0gZnJvbSBXZWJHTCwgY2xlYXJpbmcgdGhlIHVzZWQgbWVtb3J5IG9uIHRoZSBHUFUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVsZXRlUHJvZ3JhbSh0aGlzOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7XHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICBpZiAodGhpcy5wcm9ncmFtKSB7XHJcbiAgICAgICAgY3JjMy5kZWxldGVQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuYXR0cmlidXRlcztcclxuICAgICAgICBkZWxldGUgdGhpcy51bmlmb3JtcztcclxuICAgICAgICBkZWxldGUgdGhpcy5wcm9ncmFtO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBjcmVhdGVQcm9ncmFtKHRoaXM6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZnVkZ2UoXCJDcmVhdGUgc2hhZGVyIHByb2dyYW1cIiwgdGhpcy5uYW1lKTtcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGxldCBwcm9ncmFtOiBXZWJHTFByb2dyYW0gPSBjcmMzLmNyZWF0ZVByb2dyYW0oKTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IHNoZFZlcnRleDogV2ViR0xTaGFkZXIgPSBjb21waWxlU2hhZGVyKHRoaXMuZ2V0VmVydGV4U2hhZGVyU291cmNlKCksIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVkVSVEVYX1NIQURFUik7XHJcbiAgICAgICAgbGV0IHNoZEZyYWdtZW50OiBXZWJHTFNoYWRlciA9IGNvbXBpbGVTaGFkZXIodGhpcy5nZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZSQUdNRU5UX1NIQURFUik7XHJcblxyXG4gICAgICAgIGNyYzMuYXR0YWNoU2hhZGVyKHByb2dyYW0sIFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTFNoYWRlcj4oc2hkVmVydGV4KSk7XHJcbiAgICAgICAgY3JjMy5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMU2hhZGVyPihzaGRGcmFnbWVudCkpO1xyXG4gICAgICAgIGNyYzMubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgICAgIGxldCBlcnJvcjogc3RyaW5nID0gUmVuZGVyV2ViR0wuYXNzZXJ0PHN0cmluZz4oY3JjMy5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XHJcbiAgICAgICAgaWYgKGVycm9yICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBsaW5raW5nIFNoYWRlcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGRldGVjdEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICB0aGlzLnVuaWZvcm1zID0gZGV0ZWN0VW5pZm9ybXMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGVmaW5lLmluY2x1ZGVzKFwiU0tJTlwiKSkge1xyXG4gICAgICAgICAgY29uc3QgYmxvY2tJbmRleDogbnVtYmVyID0gY3JjMy5nZXRVbmlmb3JtQmxvY2tJbmRleChwcm9ncmFtLCBVTklGT1JNX0JMT0NLUy5TS0lOLk5BTUUpO1xyXG4gICAgICAgICAgY3JjMy51bmlmb3JtQmxvY2tCaW5kaW5nKHByb2dyYW0sIGJsb2NrSW5kZXgsIFVOSUZPUk1fQkxPQ0tTLlNLSU4uQklORElORyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWZpbmUuZmluZChfZGVmaW5lID0+IFtcIkZMQVRcIiwgXCJHT1VSQVVEXCIsIFwiUEhPTkdcIl0uaW5jbHVkZXMoX2RlZmluZSkpKSB7XHJcbiAgICAgICAgICBpZiAoIVJlbmRlcldlYkdMLnVib0xpZ2h0cylcclxuICAgICAgICAgICAgUmVuZGVyV2ViR0wudWJvTGlnaHRzID0gY3JlYXRlVUJPTGlnaHRzKCk7XHJcbiAgICAgICAgICBpZiAoIVJlbmRlcldlYkdMLnVib0xpZ2h0c1ZhcmlhYmxlT2Zmc2V0cylcclxuICAgICAgICAgICAgUmVuZGVyV2ViR0wudWJvTGlnaHRzVmFyaWFibGVPZmZzZXRzID0gZGV0ZWN0VUJPTGlnaHRzVmFyaWFibGVPZmZzZXRzKCk7XHJcblxyXG4gICAgICAgICAgLy8gYmluZCBsaWdodHMgVUJPIHRvIHNoYWRlciBwcm9ncmFtXHJcbiAgICAgICAgICBjb25zdCBibG9ja0luZGV4OiBudW1iZXIgPSBjcmMzLmdldFVuaWZvcm1CbG9ja0luZGV4KHByb2dyYW0sIFVOSUZPUk1fQkxPQ0tTLkxJR0hUUy5OQU1FKTtcclxuICAgICAgICAgIGNyYzMudW5pZm9ybUJsb2NrQmluZGluZyhwcm9ncmFtLCBibG9ja0luZGV4LCBVTklGT1JNX0JMT0NLUy5MSUdIVFMuQklORElORyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBibG9ja0luZGV4OiBudW1iZXIgPSBjcmMzLmdldFVuaWZvcm1CbG9ja0luZGV4KHByb2dyYW0sIFVOSUZPUk1fQkxPQ0tTLkZPRy5OQU1FKTtcclxuICAgICAgICBpZiAoYmxvY2tJbmRleCAhPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LklOVkFMSURfSU5ERVgpXHJcbiAgICAgICAgICBjcmMzLnVuaWZvcm1CbG9ja0JpbmRpbmcocHJvZ3JhbSwgYmxvY2tJbmRleCwgVU5JRk9STV9CTE9DS1MuRk9HLkJJTkRJTkcpO1xyXG5cclxuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgRGVidWcuZXJyb3IoX2Vycm9yKTtcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY29tcGlsZVNoYWRlcihfc2hhZGVyQ29kZTogc3RyaW5nLCBfc2hhZGVyVHlwZTogR0xlbnVtKTogV2ViR0xTaGFkZXIgfCBudWxsIHtcclxuICAgICAgICBsZXQgd2ViR0xTaGFkZXI6IFdlYkdMU2hhZGVyID0gY3JjMy5jcmVhdGVTaGFkZXIoX3NoYWRlclR5cGUpO1xyXG4gICAgICAgIGNyYzMuc2hhZGVyU291cmNlKHdlYkdMU2hhZGVyLCBfc2hhZGVyQ29kZSk7XHJcbiAgICAgICAgY3JjMy5jb21waWxlU2hhZGVyKHdlYkdMU2hhZGVyKTtcclxuICAgICAgICBsZXQgZXJyb3I6IHN0cmluZyA9IFJlbmRlcldlYkdMLmFzc2VydDxzdHJpbmc+KGNyYzMuZ2V0U2hhZGVySW5mb0xvZyh3ZWJHTFNoYWRlcikpO1xyXG4gICAgICAgIGlmIChlcnJvciAhPT0gXCJcIikge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coX3NoYWRlckNvZGUpO1xyXG5cclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbXBpbGluZyBzaGFkZXI6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDaGVjayBmb3IgYW55IGNvbXBpbGF0aW9uIGVycm9ycy5cclxuICAgICAgICBpZiAoIWNyYzMuZ2V0U2hhZGVyUGFyYW1ldGVyKHdlYkdMU2hhZGVyLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICAgICAgYWxlcnQoY3JjMy5nZXRTaGFkZXJJbmZvTG9nKHdlYkdMU2hhZGVyKSk7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdlYkdMU2hhZGVyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBkZXRlY3RBdHRyaWJ1dGVzKCk6IHsgW25hbWU6IHN0cmluZ106IG51bWJlciB9IHtcclxuICAgICAgICBsZXQgZGV0ZWN0ZWRBdHRyaWJ1dGVzOiB7IFtuYW1lOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG4gICAgICAgIGxldCBhdHRyaWJ1dGVDb3VudDogbnVtYmVyID0gY3JjMy5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQUNUSVZFX0FUVFJJQlVURVMpO1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBhdHRyaWJ1dGVDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgYXR0cmlidXRlSW5mbzogV2ViR0xBY3RpdmVJbmZvID0gUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMQWN0aXZlSW5mbz4oY3JjMy5nZXRBY3RpdmVBdHRyaWIocHJvZ3JhbSwgaSkpO1xyXG4gICAgICAgICAgaWYgKCFhdHRyaWJ1dGVJbmZvKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRldGVjdGVkQXR0cmlidXRlc1thdHRyaWJ1dGVJbmZvLm5hbWVdID0gY3JjMy5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJ1dGVJbmZvLm5hbWUpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRldGVjdGVkQXR0cmlidXRlcztcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZGV0ZWN0VW5pZm9ybXMoKTogeyBbbmFtZTogc3RyaW5nXTogV2ViR0xVbmlmb3JtTG9jYXRpb24gfSB7XHJcbiAgICAgICAgbGV0IGRldGVjdGVkVW5pZm9ybXM6IHsgW25hbWU6IHN0cmluZ106IFdlYkdMVW5pZm9ybUxvY2F0aW9uIH0gPSB7fTtcclxuICAgICAgICBsZXQgdW5pZm9ybUNvdW50OiBudW1iZXIgPSBjcmMzLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BQ1RJVkVfVU5JRk9STVMpO1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB1bmlmb3JtQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGluZm86IFdlYkdMQWN0aXZlSW5mbyA9IFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTEFjdGl2ZUluZm8+KGNyYzMuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpKSk7XHJcbiAgICAgICAgICBpZiAoIWluZm8pIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgbG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uID0gY3JjMy5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgaW5mby5uYW1lKTtcclxuICAgICAgICAgIGlmIChsb2NhdGlvbilcclxuICAgICAgICAgICAgZGV0ZWN0ZWRVbmlmb3Jtc1tpbmZvLm5hbWVdID0gUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMVW5pZm9ybUxvY2F0aW9uPihsb2NhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZXRlY3RlZFVuaWZvcm1zO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjcmVhdGVVQk9MaWdodHMoKTogV2ViR0xCdWZmZXIge1xyXG4gICAgICAgIGNvbnN0IGJsb2NrSW5kZXg6IG51bWJlciA9IGNyYzMuZ2V0VW5pZm9ybUJsb2NrSW5kZXgocHJvZ3JhbSwgVU5JRk9STV9CTE9DS1MuTElHSFRTLk5BTUUpO1xyXG4gICAgICAgIGNvbnN0IGJsb2NrU2l6ZTogbnVtYmVyID0gY3JjMy5nZXRBY3RpdmVVbmlmb3JtQmxvY2tQYXJhbWV0ZXIocHJvZ3JhbSwgYmxvY2tJbmRleCwgY3JjMy5VTklGT1JNX0JMT0NLX0RBVEFfU0laRSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVibzogV2ViR0xCdWZmZXIgPSBSZW5kZXJXZWJHTC5hc3NlcnQoY3JjMy5jcmVhdGVCdWZmZXIoKSk7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIHVibyk7XHJcbiAgICAgICAgY3JjMy5idWZmZXJEYXRhKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIGJsb2NrU2l6ZSwgY3JjMy5EWU5BTUlDX0RSQVcpO1xyXG4gICAgICAgIGNyYzMuYmluZEJ1ZmZlckJhc2UoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTklGT1JNX0JVRkZFUiwgVU5JRk9STV9CTE9DS1MuTElHSFRTLkJJTkRJTkcsIHVibyk7XHJcblxyXG4gICAgICAgIHJldHVybiB1Ym87XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGRldGVjdFVCT0xpZ2h0c1ZhcmlhYmxlT2Zmc2V0cygpOiB0eXBlb2YgUmVuZGVyV2ViR0wudWJvTGlnaHRzVmFyaWFibGVPZmZzZXRzIHtcclxuICAgICAgICBjb25zdCB1Ym9WYXJpYWJsZU5hbWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgIFwidV9uTGlnaHRzRGlyZWN0aW9uYWxcIixcclxuICAgICAgICAgIFwidV9uTGlnaHRzUG9pbnRcIixcclxuICAgICAgICAgIFwidV9uTGlnaHRzU3BvdFwiLFxyXG4gICAgICAgICAgXCJ1X2FtYmllbnQudmN0Q29sb3JcIixcclxuICAgICAgICAgIFwidV9kaXJlY3Rpb25hbFswXS52Y3RDb2xvclwiLFxyXG4gICAgICAgICAgXCJ1X3BvaW50WzBdLnZjdENvbG9yXCIsXHJcbiAgICAgICAgICBcInVfc3BvdFswXS52Y3RDb2xvclwiXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgdWJvVmFyaWFibGVJbmRpY2VzOiBudW1iZXJbXSA9IDxudW1iZXJbXT5jcmMzLmdldFVuaWZvcm1JbmRpY2VzKFxyXG4gICAgICAgICAgcHJvZ3JhbSxcclxuICAgICAgICAgIHVib1ZhcmlhYmxlTmFtZXNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB1Ym9WYXJpYWJsZU9mZnNldHM6IG51bWJlcltdID0gY3JjMy5nZXRBY3RpdmVVbmlmb3JtcyhcclxuICAgICAgICAgIHByb2dyYW0sXHJcbiAgICAgICAgICB1Ym9WYXJpYWJsZUluZGljZXMsXHJcbiAgICAgICAgICBjcmMzLlVOSUZPUk1fT0ZGU0VUXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgdWJvVmFyaWFibGVOYW1lVG9PZmZzZXQ6IHR5cGVvZiBSZW5kZXJXZWJHTC51Ym9MaWdodHNWYXJpYWJsZU9mZnNldHMgPSB7fTtcclxuICAgICAgICB1Ym9WYXJpYWJsZU5hbWVzLmZvckVhY2goKF9uYW1lLCBfaW5kZXgpID0+IHVib1ZhcmlhYmxlTmFtZVRvT2Zmc2V0W19uYW1lXSA9IHVib1ZhcmlhYmxlT2Zmc2V0c1tfaW5kZXhdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVib1ZhcmlhYmxlTmFtZVRvT2Zmc2V0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdpdmVzIFdlYkdMIEJ1ZmZlciB0aGUgZGF0YSBmcm9tIHRoZSB7QGxpbmsgQ29hdH1cclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUmVuZGVySW5qZWN0b3JDb2F0IGV4dGVuZHMgUmVuZGVySW5qZWN0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmplY3RzIHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoaXMgY2xhc3MgaW50byB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGdpdmVuIHtAbGluayBDb2F0fS1zdWJjbGFzc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlY29yYXRlKF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24sIF9jb250ZXh0OiBDbGFzc0RlY29yYXRvckNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgUmVuZGVySW5qZWN0b3IuaW5qZWN0KF9jb25zdHJ1Y3RvciwgUmVuZGVySW5qZWN0b3JDb2F0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluamVjdENvYXRDb2xvcmVkKHRoaXM6IENvYXRDb2xvcmVkLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyLCBfY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsKTogdm9pZCB7XHJcbiAgICAgIGxldCB1bmlmb3JtOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IF9zaGFkZXIudW5pZm9ybXNbXCJ1X3ZjdENvbG9yXCJdO1xyXG4gICAgICBsZXQgY29sb3I6IENvbG9yID0gQ29sb3IuUFJPRFVDVCh0aGlzLmNvbG9yLCBfY21wTWF0ZXJpYWwuY2xyUHJpbWFyeSk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKS51bmlmb3JtNGZ2KHVuaWZvcm0sIGNvbG9yLmdldCgpKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUoY29sb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgaW5qZWN0Q29hdFJlbWlzc2l2ZSh0aGlzOiBDb2F0UmVtaXNzaXZlLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyLCBfY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlckluamVjdG9yQ29hdC5pbmplY3RDb2F0Q29sb3JlZC5jYWxsKHRoaXMsIF9zaGFkZXIsIF9jbXBNYXRlcmlhbCk7XHJcbiAgICAgIGxldCB1bmlmb3JtOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcclxuICAgICAgdW5pZm9ybSA9IF9zaGFkZXIudW5pZm9ybXNbXCJ1X2ZEaWZmdXNlXCJdO1xyXG4gICAgICBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkudW5pZm9ybTFmKHVuaWZvcm0sIHRoaXMuZGlmZnVzZSk7XHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9mTWV0YWxsaWNcIl07XHJcbiAgICAgIFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKS51bmlmb3JtMWYodW5pZm9ybSwgdGhpcy5tZXRhbGxpYyk7XHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9mU3BlY3VsYXJcIl07XHJcbiAgICAgIFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKS51bmlmb3JtMWYodW5pZm9ybSwgdGhpcy5zcGVjdWxhcik7XHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9mSW50ZW5zaXR5XCJdO1xyXG4gICAgICBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkudW5pZm9ybTFmKHVuaWZvcm0sIHRoaXMuaW50ZW5zaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluamVjdENvYXRUZXh0dXJlZCh0aGlzOiBDb2F0VGV4dHVyZWQsIF9zaGFkZXI6IHR5cGVvZiBTaGFkZXIsIF9jbXBNYXRlcmlhbDogQ29tcG9uZW50TWF0ZXJpYWwpOiB2b2lkIHtcclxuICAgICAgUmVuZGVySW5qZWN0b3JDb2F0LmluamVjdENvYXRDb2xvcmVkLmNhbGwodGhpcywgX3NoYWRlciwgX2NtcE1hdGVyaWFsKTtcclxuXHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICB0aGlzLnRleHR1cmUudXNlUmVuZGVyRGF0YShURVhUVVJFX0xPQ0FUSU9OLkNPTE9SLlVOSVQpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShfc2hhZGVyLnVuaWZvcm1zW1RFWFRVUkVfTE9DQVRJT04uQ09MT1IuVU5JRk9STV0sIFRFWFRVUkVfTE9DQVRJT04uQ09MT1IuSU5ERVgpO1xyXG4gICAgICBjcmMzLnVuaWZvcm1NYXRyaXgzZnYoX3NoYWRlci51bmlmb3Jtc1tcInVfbXR4UGl2b3RcIl0sIGZhbHNlLCBfY21wTWF0ZXJpYWwubXR4UGl2b3QuZ2V0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgaW5qZWN0Q29hdFJlbWlzc2l2ZVRleHR1cmVkKHRoaXM6IENvYXRSZW1pc3NpdmVUZXh0dXJlZCwgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX2NtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJJbmplY3RvckNvYXQuaW5qZWN0Q29hdFJlbWlzc2l2ZS5jYWxsKHRoaXMsIF9zaGFkZXIsIF9jbXBNYXRlcmlhbCk7XHJcblxyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgdGhpcy50ZXh0dXJlLnVzZVJlbmRlckRhdGEoVEVYVFVSRV9MT0NBVElPTi5DT0xPUi5VTklUKTtcclxuICAgICAgY3JjMy51bmlmb3JtMWkoX3NoYWRlci51bmlmb3Jtc1tURVhUVVJFX0xPQ0FUSU9OLkNPTE9SLlVOSUZPUk1dLCBURVhUVVJFX0xPQ0FUSU9OLkNPTE9SLklOREVYKTtcclxuICAgICAgY3JjMy51bmlmb3JtTWF0cml4M2Z2KF9zaGFkZXIudW5pZm9ybXNbXCJ1X210eFBpdm90XCJdLCBmYWxzZSwgX2NtcE1hdGVyaWFsLm10eFBpdm90LmdldCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluamVjdENvYXRSZW1pc3NpdmVUZXh0dXJlZE5vcm1hbHModGhpczogQ29hdFJlbWlzc2l2ZVRleHR1cmVkTm9ybWFscywgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX2NtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJJbmplY3RvckNvYXQuaW5qZWN0Q29hdFJlbWlzc2l2ZVRleHR1cmVkLmNhbGwodGhpcywgX3NoYWRlciwgX2NtcE1hdGVyaWFsKTtcclxuXHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICB0aGlzLm5vcm1hbE1hcC51c2VSZW5kZXJEYXRhKFRFWFRVUkVfTE9DQVRJT04uTk9STUFMLlVOSVQpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShfc2hhZGVyLnVuaWZvcm1zW1RFWFRVUkVfTE9DQVRJT04uTk9STUFMLlVOSUZPUk1dLCBURVhUVVJFX0xPQ0FUSU9OLk5PUk1BTC5JTkRFWCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBpbmplY3RDb2F0VG9vbih0aGlzOiBDb2F0VG9vbiwgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX2NtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJJbmplY3RvckNvYXQuaW5qZWN0Q29hdFJlbWlzc2l2ZS5jYWxsKHRoaXMsIF9zaGFkZXIsIF9jbXBNYXRlcmlhbCk7XHJcblxyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgdGhpcy50ZXhUb29uLnVzZVJlbmRlckRhdGEoVEVYVFVSRV9MT0NBVElPTi5UT09OLlVOSVQpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShfc2hhZGVyLnVuaWZvcm1zW1RFWFRVUkVfTE9DQVRJT04uVE9PTi5VTklGT1JNXSwgVEVYVFVSRV9MT0NBVElPTi5UT09OLklOREVYKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluamVjdENvYXRUb29uVGV4dHVyZWQodGhpczogQ29hdFRvb24sIF9zaGFkZXI6IHR5cGVvZiBTaGFkZXIsIF9jbXBNYXRlcmlhbDogQ29tcG9uZW50TWF0ZXJpYWwpOiB2b2lkIHtcclxuICAgICAgUmVuZGVySW5qZWN0b3JDb2F0LmluamVjdENvYXRSZW1pc3NpdmVUZXh0dXJlZC5jYWxsKHRoaXMsIF9zaGFkZXIsIF9jbXBNYXRlcmlhbCk7XHJcblxyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgdGhpcy50ZXhUb29uLnVzZVJlbmRlckRhdGEoVEVYVFVSRV9MT0NBVElPTi5UT09OLlVOSVQpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShfc2hhZGVyLnVuaWZvcm1zW1RFWFRVUkVfTE9DQVRJT04uVE9PTi5VTklGT1JNXSwgVEVYVFVSRV9MT0NBVElPTi5UT09OLklOREVYKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQnVmZmVycyB0aGUgZGF0YSBmcm9tIHRoZSB7QGxpbmsgTWVzaH0gaW50byBhIFdlYkdMIEJ1ZmZlclxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSZW5kZXJJbmplY3Rvck1lc2gge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5qZWN0cyB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGlzIGNsYXNzIGludG8gdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBnaXZlbiB7QGxpbmsgTWVzaH0tc3ViY2xhc3NcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWNvcmF0ZShfY29uc3RydWN0b3I6IEZ1bmN0aW9uLCBfY29udGV4dDogQ2xhc3NEZWNvcmF0b3JDb250ZXh0KTogdm9pZCB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcInVzZVJlbmRlckJ1ZmZlcnNcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3Rvck1lc2gudXNlUmVuZGVyQnVmZmVyc1xyXG4gICAgICB9KTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiZ2V0UmVuZGVyQnVmZmVyc1wiLCB7XHJcbiAgICAgICAgdmFsdWU6IFJlbmRlckluamVjdG9yTWVzaC5nZXRSZW5kZXJCdWZmZXJzXHJcbiAgICAgIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJkZWxldGVSZW5kZXJCdWZmZXJzXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JNZXNoLmRlbGV0ZVJlbmRlckJ1ZmZlcnNcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBnZXRSZW5kZXJCdWZmZXJzKHRoaXM6IE1lc2gpOiBSZW5kZXJCdWZmZXJzIHtcclxuICAgICAgaWYgKHRoaXMucmVuZGVyTWVzaC5idWZmZXJzID09IG51bGwpIHtcclxuICAgICAgICB0aGlzLnJlbmRlck1lc2guYnVmZmVycyA9IHtcclxuICAgICAgICAgIHZlcnRpY2VzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHRoaXMucmVuZGVyTWVzaC52ZXJ0aWNlcyksXHJcbiAgICAgICAgICBpbmRpY2VzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5yZW5kZXJNZXNoLmluZGljZXMpLFxyXG4gICAgICAgICAgbm9ybWFsczogY3JlYXRlQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2gubm9ybWFscyksXHJcbiAgICAgICAgICB0ZXh0dXJlVVZzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHRoaXMucmVuZGVyTWVzaC50ZXh0dXJlVVZzKSxcclxuICAgICAgICAgIGNvbG9yczogY3JlYXRlQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2guY29sb3JzKSxcclxuICAgICAgICAgIHRhbmdlbnRzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHRoaXMucmVuZGVyTWVzaC50YW5nZW50cyksXHJcbiAgICAgICAgICBuSW5kaWNlczogdGhpcy5yZW5kZXJNZXNoLmluZGljZXMubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyTWVzaC5ib25lcylcclxuICAgICAgICAgIHRoaXMucmVuZGVyTWVzaC5idWZmZXJzLmJvbmVzID0gY3JlYXRlQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2guYm9uZXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJNZXNoLndlaWdodHMpXHJcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc2guYnVmZmVycy53ZWlnaHRzID0gY3JlYXRlQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2gud2VpZ2h0cyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlck1lc2guYnVmZmVycztcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlcihfdHlwZTogR0xlbnVtLCBfYXJyYXk6IEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSk6IFdlYkdMQnVmZmVyIHtcclxuICAgICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICAgIGxldCBidWZmZXI6IFdlYkdMQnVmZmVyID0gUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMQnVmZmVyPihjcmMzLmNyZWF0ZUJ1ZmZlcigpKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoX3R5cGUsIGJ1ZmZlcik7XHJcbiAgICAgICAgY3JjMy5idWZmZXJEYXRhKF90eXBlLCBfYXJyYXksIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHVzZVJlbmRlckJ1ZmZlcnModGhpczogTWVzaCwgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX210eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQsIF9tdHhNZXNoVG9WaWV3OiBNYXRyaXg0eDQsIF9pZD86IG51bWJlcik6IFJlbmRlckJ1ZmZlcnMge1xyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgbGV0IHJlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMgPSB0aGlzLmdldFJlbmRlckJ1ZmZlcnMoKTtcclxuXHJcbiAgICAgIGxldCB1bmlmb3JtOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcclxuXHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9tdHhNZXNoVG9WaWV3XCJdO1xyXG4gICAgICBjcmMzLnVuaWZvcm1NYXRyaXg0ZnYodW5pZm9ybSwgZmFsc2UsIF9tdHhNZXNoVG9WaWV3LmdldCgpKTtcclxuXHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9tdHhNZXNoVG9Xb3JsZFwiXTtcclxuICAgICAgaWYgKHVuaWZvcm0pXHJcbiAgICAgICAgY3JjMy51bmlmb3JtTWF0cml4NGZ2KHVuaWZvcm0sIGZhbHNlLCBfbXR4TWVzaFRvV29ybGQuZ2V0KCkpO1xyXG5cclxuICAgICAgdW5pZm9ybSA9IF9zaGFkZXIudW5pZm9ybXNbXCJ1X210eE5vcm1hbE1lc2hUb1dvcmxkXCJdO1xyXG4gICAgICBpZiAodW5pZm9ybSkge1xyXG4gICAgICAgIGxldCBub3JtYWxNYXRyaXg6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5UUkFOU1BPU0UoTWF0cml4NHg0LklOVkVSU0UoX210eE1lc2hUb1dvcmxkKSk7XHJcbiAgICAgICAgY3JjMy51bmlmb3JtTWF0cml4NGZ2KHVuaWZvcm0sIGZhbHNlLCBub3JtYWxNYXRyaXguZ2V0KCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBmZWVkIGluIGFuIGlkIG9mIHRoZSBub2RlIGlmIHNoYWRlciBhY2NlcHRzIHVfaWQuIFVzZWQgZm9yIHBpY2tpbmdcclxuICAgICAgdW5pZm9ybSA9IF9zaGFkZXIudW5pZm9ybXNbXCJ1X2lkXCJdO1xyXG4gICAgICBpZiAodW5pZm9ybSlcclxuICAgICAgICBjcmMzLnVuaWZvcm0xaSh1bmlmb3JtLCBfaWQpO1xyXG5cclxuICAgICAgc2V0QXR0cmlidXRlQnVmZmVyKFwiYV92Y3RQb3NpdGlvblwiLCByZW5kZXJCdWZmZXJzLnZlcnRpY2VzLCAzKTtcclxuICAgICAgc2V0QXR0cmlidXRlQnVmZmVyKFwiYV92Y3RDb2xvclwiLCByZW5kZXJCdWZmZXJzLmNvbG9ycywgNCk7XHJcbiAgICAgIHNldEF0dHJpYnV0ZUJ1ZmZlcihcImFfdmN0VGV4dHVyZVwiLCByZW5kZXJCdWZmZXJzLnRleHR1cmVVVnMsIDIpO1xyXG4gICAgICBzZXRBdHRyaWJ1dGVCdWZmZXIoXCJhX3ZjdE5vcm1hbFwiLCByZW5kZXJCdWZmZXJzLm5vcm1hbHMsIDMpO1xyXG4gICAgICBzZXRBdHRyaWJ1dGVCdWZmZXIoXCJhX3ZjdFRhbmdlbnRcIiwgcmVuZGVyQnVmZmVycy50YW5nZW50cywgNCk7XHJcblxyXG4gICAgICBjb25zdCBhQm9uZTogbnVtYmVyID0gX3NoYWRlci5hdHRyaWJ1dGVzW1wiYV92Y3RCb25lc1wiXTtcclxuICAgICAgaWYgKGFCb25lKSB7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCByZW5kZXJCdWZmZXJzLmJvbmVzKTtcclxuICAgICAgICBjcmMzLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFCb25lKTtcclxuICAgICAgICBjcmMzLnZlcnRleEF0dHJpYklQb2ludGVyKGFCb25lLCA0LCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOU0lHTkVEX0JZVEUsIDAsIDApO1xyXG4gICAgICB9XHJcbiAgICAgIHNldEF0dHJpYnV0ZUJ1ZmZlcihcImFfdmN0V2VpZ2h0c1wiLCByZW5kZXJCdWZmZXJzLndlaWdodHMsIDQpO1xyXG5cclxuICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHJlbmRlckJ1ZmZlcnMuaW5kaWNlcyk7XHJcblxyXG4gICAgICByZXR1cm4gcmVuZGVyQnVmZmVycztcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZUJ1ZmZlcihfbmFtZTogc3RyaW5nLCBfYnVmZmVyOiBXZWJHTEJ1ZmZlciwgX3NpemU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGxldCBhdHRyaWJ1dGU6IG51bWJlciA9IF9zaGFkZXIuYXR0cmlidXRlc1tfbmFtZV07XHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZSA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCBfYnVmZmVyKTtcclxuICAgICAgICBjcmMzLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgY3JjMy52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dHJpYnV0ZSwgX3NpemUsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZGVsZXRlUmVuZGVyQnVmZmVycyhfcmVuZGVyQnVmZmVyczogUmVuZGVyQnVmZmVycyk6IHZvaWQge1xyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgaWYgKF9yZW5kZXJCdWZmZXJzKSB7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhfcmVuZGVyQnVmZmVycykuZmlsdGVyKF9idWZmZXIgPT4gX2J1ZmZlciBpbnN0YW5jZW9mIFdlYkdMQnVmZmVyKS5mb3JFYWNoKChfYnVmZmVyLCBfaW5kZXgpID0+IHtcclxuICAgICAgICAgIGNyYzMuZGVsZXRlQnVmZmVyKF9idWZmZXIpO1xyXG4gICAgICAgICAgY3JjMy5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoX2luZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBleHBvcnQgbmFtZXNwYWNlIFBhcnRpY2xlRGF0YSB7XHJcblxyXG4gICAgZXhwb3J0IGVudW0gRlVOQ1RJT04ge1xyXG4gICAgICAvLyBWQUxVRSA9IFwidmFsdWVcIixcclxuICAgICAgQURESVRJT04gPSBcImFkZGl0aW9uXCIsXHJcbiAgICAgIFNVQlRSQUNUSU9OID0gXCJzdWJ0cmFjdGlvblwiLFxyXG4gICAgICBNVUxUSVBMSUNBVElPTiA9IFwibXVsdGlwbGljYXRpb25cIixcclxuICAgICAgRElWSVNJT04gPSBcImRpdmlzaW9uXCIsXHJcbiAgICAgIE1PRFVMTyA9IFwibW9kdWxvXCIsXHJcbiAgICAgIFBPV0VSID0gXCJwb3dlclwiLFxyXG4gICAgICBQT0xZTk9NSUFMMyA9IFwicG9seW5vbWlhbDNcIixcclxuICAgICAgU1FVQVJFX1JPT1QgPSBcInNxdWFyZVJvb3RcIixcclxuICAgICAgUkFORE9NID0gXCJyYW5kb21cIixcclxuICAgICAgUkFORE9NX1JBTkdFID0gXCJyYW5kb21SYW5nZVwiXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IEZVTkNUSU9OX01JTklNVU1fUEFSQU1FVEVSUzogeyBba2V5IGluIFBhcnRpY2xlRGF0YS5GVU5DVElPTl06IG51bWJlciB9ID0ge1xyXG4gICAgICAvLyBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlZBTFVFXTogMSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5BRERJVElPTl06IDIsXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uU1VCVFJBQ1RJT05dOiAyLFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLk1VTFRJUExJQ0FUSU9OXTogMixcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5ESVZJU0lPTl06IDIsXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uTU9EVUxPXTogMixcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5QT1dFUl06IDIsXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uUE9MWU5PTUlBTDNdOiA1LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlNRVUFSRV9ST09UXTogMSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5SQU5ET01dOiAxLFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlJBTkRPTV9SQU5HRV06IDNcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IFBSRURFRklORURfVkFSSUFCTEVTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgICBzeXN0ZW1EdXJhdGlvbjogXCJ1X2ZQYXJ0aWNsZVN5c3RlbUR1cmF0aW9uXCIsXHJcbiAgICAgIHN5c3RlbVNpemU6IFwidV9mUGFydGljbGVTeXN0ZW1TaXplXCIsXHJcbiAgICAgIHN5c3RlbVRpbWU6IFwidV9mUGFydGljbGVTeXN0ZW1UaW1lXCIsXHJcbiAgICAgIHBhcnRpY2xlSWQ6IFwiZlBhcnRpY2xlSWRcIlxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBpbGVzIHBhcnRpY2xlIHN5c3RlbSBzaGFkZXJzICh7QGxpbmsgU2hhZGVyUGFydGljbGVTeXN0ZW19KSBmcm9tIHNoYWRlciB1bml2ZXJzYWwgZGVyaXZhdGVzIGZvciBXZWJHTFxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyMlxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtIGV4dGVuZHMgUmVuZGVySW5qZWN0b3JTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBGVU5DVElPTlM6IHsgW2tleSBpbiBQYXJ0aWNsZURhdGEuRlVOQ1RJT05dOiBGdW5jdGlvbiB9ID0ge1xyXG4gICAgICAvLyBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlZBTFVFXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAvLyAgIHJldHVybiBgKCR7X3BhcmFtZXRlcnNbMF19KWA7XHJcbiAgICAgIC8vIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uQURESVRJT05dOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGAoJHtfcGFyYW1ldGVycy5yZWR1Y2UoKF9hY2N1bXVsYXRvcjogc3RyaW5nLCBfdmFsdWU6IHN0cmluZykgPT4gYCR7X2FjY3VtdWxhdG9yfSArICR7X3ZhbHVlfWApfSlgO1xyXG4gICAgICB9LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlNVQlRSQUNUSU9OXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBgKCR7X3BhcmFtZXRlcnMucmVkdWNlKChfYWNjdW11bGF0b3I6IHN0cmluZywgX3ZhbHVlOiBzdHJpbmcpID0+IGAke19hY2N1bXVsYXRvcn0gLSAke192YWx1ZX1gKX0pYDtcclxuICAgICAgfSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5NVUxUSVBMSUNBVElPTl06IChfcGFyYW1ldGVyczogc3RyaW5nW10pID0+IHtcclxuICAgICAgICByZXR1cm4gYCgke19wYXJhbWV0ZXJzLnJlZHVjZSgoX2FjY3VtdWxhdG9yOiBzdHJpbmcsIF92YWx1ZTogc3RyaW5nKSA9PiBgJHtfYWNjdW11bGF0b3J9ICogJHtfdmFsdWV9YCl9KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uRElWSVNJT05dOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGAoJHtfcGFyYW1ldGVyc1swXX0gLyAke19wYXJhbWV0ZXJzWzFdfSlgO1xyXG4gICAgICB9LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLk1PRFVMT106IChfcGFyYW1ldGVyczogc3RyaW5nW10pID0+IHtcclxuICAgICAgICByZXR1cm4gYCgke19wYXJhbWV0ZXJzLnJlZHVjZSgoX2FjY3VtdWxhdG9yOiBzdHJpbmcsIF92YWx1ZTogc3RyaW5nKSA9PiBgbW9kKCR7X2FjY3VtdWxhdG9yfSwgJHtfdmFsdWV9KWApfSlgO1xyXG4gICAgICB9LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlBPV0VSXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBgcG93KCR7X3BhcmFtZXRlcnNbMF19LCAke19wYXJhbWV0ZXJzWzFdfSlgO1xyXG4gICAgICB9LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlBPTFlOT01JQUwzXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIGxldCB4OiBzdHJpbmcgPSBfcGFyYW1ldGVyc1swXTtcclxuICAgICAgICBsZXQgYTogc3RyaW5nID0gX3BhcmFtZXRlcnNbMV07XHJcbiAgICAgICAgbGV0IGI6IHN0cmluZyA9IF9wYXJhbWV0ZXJzWzJdO1xyXG4gICAgICAgIGxldCBjOiBzdHJpbmcgPSBfcGFyYW1ldGVyc1szXTtcclxuICAgICAgICBsZXQgZDogc3RyaW5nID0gX3BhcmFtZXRlcnNbNF07XHJcbiAgICAgICAgcmV0dXJuIGAoJHthfSAqIHBvdygke3h9LCAzLjApICsgJHtifSAqIHBvdygke3h9LCAyLjApICsgJHtjfSAqICR7eH0gKyAke2R9KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uU1FVQVJFX1JPT1RdOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgbGV0IHg6IHN0cmluZyA9IF9wYXJhbWV0ZXJzWzBdO1xyXG4gICAgICAgIHJldHVybiBgc3FydCgke3h9KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uUkFORE9NXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBgZmV0Y2hSYW5kb21OdW1iZXIoaW50KCR7X3BhcmFtZXRlcnNbMF19KSwgaVBhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVyc1NpemUsIGlQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNMZW5ndGgpYDtcclxuICAgICAgfSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5SQU5ET01fUkFOR0VdOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGAoJHtSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLkZVTkNUSU9OU1tcInJhbmRvbVwiXShfcGFyYW1ldGVycyl9ICogKCR7X3BhcmFtZXRlcnNbMl19IC0gJHtfcGFyYW1ldGVyc1sxXX0pICsgJHtfcGFyYW1ldGVyc1sxXX0pYDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIGRlY29yYXRlKF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24sIF9jb250ZXh0OiBDbGFzc0RlY29yYXRvckNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgc3VwZXIuZGVjb3JhdGUoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgX2NvbnRleHQpO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJnZXRWZXJ0ZXhTaGFkZXJTb3VyY2VcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmdldFZlcnRleFNoYWRlclNvdXJjZVxyXG4gICAgICB9KTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2VcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmdldEZyYWdtZW50U2hhZGVyU291cmNlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIHRoZSBzb3VyY2UgY29kZSBmb3IgdGhlIHZlcnRleCBzaGFkZXIgb2YgdGhlIHtAbGluayBTaGFkZXJQYXJ0aWNsZVN5c3RlbX0gZnJvbSB0aGUgc2V0IHtAbGluayBTaGFkZXJQYXJ0aWNsZVN5c3RlbS5kYXRhfSBhbmQgdGhlIG9yaWdpbmFsIHtAbGluayBTaGFkZXJQYXJ0aWNsZVN5c3RlbS52ZXJ0ZXhTaGFkZXJTb3VyY2V9LlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSh0aGlzOiBTaGFkZXJQYXJ0aWNsZVN5c3RlbSk6IHN0cmluZyB7XHJcbiAgICAgIGxldCBkYXRhOiBQYXJ0aWNsZURhdGEuU3lzdGVtID0gdGhpcy5kYXRhO1xyXG4gICAgICBsZXQgbXR4TG9jYWw6IFBhcnRpY2xlRGF0YS5UcmFuc2Zvcm1hdGlvbltdID0gZGF0YT8ubXR4TG9jYWw7XHJcbiAgICAgIGxldCBtdHhXb3JsZDogUGFydGljbGVEYXRhLlRyYW5zZm9ybWF0aW9uW10gPSBkYXRhPy5tdHhXb3JsZDtcclxuXHJcbiAgICAgIGxldCBzb3VyY2U6IHN0cmluZyA9IHRoaXMudmVydGV4U2hhZGVyU291cmNlXHJcbiAgICAgICAgLnJlcGxhY2UoXCIjdmVyc2lvbiAzMDAgZXNcIiwgYCN2ZXJzaW9uIDMwMCBlc1xcbiNkZWZpbmUgJHt0aGlzLmRlZmluZVswXX0ke2RhdGEuY29sb3IgPyBcIlxcbiNkZWZpbmUgUEFSVElDTEVfQ09MT1JcIiA6IFwiXCJ9YClcclxuICAgICAgICAucmVwbGFjZShcIi8qJHZhcmlhYmxlcyovXCIsIFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZ2VuZXJhdGVWYXJpYWJsZXMoZGF0YT8udmFyaWFibGVzLCBkYXRhPy52YXJpYWJsZU5hbWVzKSlcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eExvY2FsKi9cIiwgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZVRyYW5zZm9ybWF0aW9ucyhtdHhMb2NhbCwgXCJMb2NhbFwiKSlcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eExvY2FsKi9cIiwgbXR4TG9jYWwgJiYgbXR4TG9jYWwubGVuZ3RoID4gMCA/IFwiKiBtdHhMb2NhbFwiIDogXCJcIilcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eFdvcmxkKi9cIiwgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZVRyYW5zZm9ybWF0aW9ucyhtdHhXb3JsZCwgXCJXb3JsZFwiKSlcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eFdvcmxkKi9cIiwgbXR4V29ybGQgJiYgbXR4V29ybGQubGVuZ3RoID4gMCA/IFwibXR4V29ybGQgKlwiIDogXCJcIilcclxuICAgICAgICAucmVwbGFjZUFsbChcIi8qJGNvbG9yKi9cIiwgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZUNvbG9yKGRhdGE/LmNvbG9yKSk7XHJcbiAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgdGhlIHNvdXJjZSBjb2RlIGZvciB0aGUgZnJhZ21lbnQgc2hhZGVyIG9mIHRoZSB7QGxpbmsgU2hhZGVyUGFydGljbGVTeXN0ZW19IGZyb20gdGhlIHNldCB7QGxpbmsgU2hhZGVyUGFydGljbGVTeXN0ZW0uZGF0YX0gYW5kIHRoZSBvcmlnaW5hbCB7QGxpbmsgU2hhZGVyUGFydGljbGVTeXN0ZW0uZnJhZ21lbnRTaGFkZXJTb3VyY2V9LlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGdldEZyYWdtZW50U2hhZGVyU291cmNlKHRoaXM6IFNoYWRlclBhcnRpY2xlU3lzdGVtKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnRTaGFkZXJTb3VyY2UucmVwbGFjZShcIiN2ZXJzaW9uIDMwMCBlc1wiLCBgI3ZlcnNpb24gMzAwIGVzXFxuI2RlZmluZSAke3RoaXMuZGVmaW5lWzBdfSR7dGhpcy5kYXRhLmNvbG9yID8gXCJcXG4jZGVmaW5lIFBBUlRJQ0xFX0NPTE9SXCIgOiBcIlwifWApXHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIGNvZGUgZ2VuZXJhdGlvblxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlVmFyaWFibGVzKF92YXJpYWJsZXM6IFBhcnRpY2xlRGF0YS5TeXN0ZW1bXCJ2YXJpYWJsZXNcIl0sIF92YXJpYWJsZU5hbWVzOiBQYXJ0aWNsZURhdGEuU3lzdGVtW1widmFyaWFibGVOYW1lc1wiXSk6IHN0cmluZyB7XHJcbiAgICAgIGlmICghX3ZhcmlhYmxlcykgcmV0dXJuIFwiXCI7XHJcblxyXG4gICAgICByZXR1cm4gX3ZhcmlhYmxlc1xyXG4gICAgICAgIC5tYXAoKF92YXJpYWJsZSwgX2luZGV4KSA9PiAoeyBuYW1lOiBcImZQYXJ0aWNsZVN5c3RlbVZhcmlhYmxlX1wiICsgX3ZhcmlhYmxlTmFtZXNbX2luZGV4XSwgdmFsdWU6IFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZ2VuZXJhdGVFeHByZXNzaW9uKF92YXJpYWJsZSkgfSkpXHJcbiAgICAgICAgLm1hcChfdmFyaWFibGUgPT4gYGZsb2F0ICR7X3ZhcmlhYmxlLm5hbWV9ID0gJHtfdmFyaWFibGUudmFsdWV9O2ApXHJcbiAgICAgICAgLnJlZHVjZSgoX2FjY3VtdWxhdG9yOiBzdHJpbmcsIF9jb2RlOiBzdHJpbmcpID0+IGAke19hY2N1bXVsYXRvcn1cXG4ke19jb2RlfWAsIFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlVHJhbnNmb3JtYXRpb25zKF90cmFuc2Zvcm1hdGlvbnM6IFBhcnRpY2xlRGF0YS5TeXN0ZW1bXCJtdHhMb2NhbFwiXSwgX2xvY2FsT3JXb3JsZDogXCJMb2NhbFwiIHwgXCJXb3JsZFwiKTogc3RyaW5nIHtcclxuICAgICAgaWYgKCFfdHJhbnNmb3JtYXRpb25zIHx8IF90cmFuc2Zvcm1hdGlvbnMubGVuZ3RoID09IDApIHJldHVybiBcIlwiO1xyXG5cclxuICAgICAgbGV0IHRyYW5zZm9ybWF0aW9uczogW1BhcnRpY2xlRGF0YS5UcmFuc2Zvcm1hdGlvbltcInRyYW5zZm9ybWF0aW9uXCJdLCBzdHJpbmcsIHN0cmluZywgc3RyaW5nXVtdID0gX3RyYW5zZm9ybWF0aW9uc1xyXG4gICAgICAgIC5tYXAoX2RhdGEgPT4ge1xyXG4gICAgICAgICAgbGV0IGlzU2NhbGU6IGJvb2xlYW4gPSBfZGF0YS50cmFuc2Zvcm1hdGlvbiA9PT0gXCJzY2FsZVwiO1xyXG4gICAgICAgICAgbGV0IFt4LCB5LCB6XSA9IFtfZGF0YS5wYXJhbWV0ZXJzWzBdLCBfZGF0YS5wYXJhbWV0ZXJzWzFdLCBfZGF0YS5wYXJhbWV0ZXJzWzJdXVxyXG4gICAgICAgICAgICAubWFwKChfdmFsdWUpID0+IF92YWx1ZSA/IFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZ2VuZXJhdGVFeHByZXNzaW9uKF92YWx1ZSkgOiAoaXNTY2FsZSA/IFwiMS4wXCIgOiBcIjAuMFwiKSkgYXMgW3N0cmluZywgc3RyaW5nLCBzdHJpbmddO1xyXG5cclxuICAgICAgICAgIHJldHVybiBbX2RhdGEudHJhbnNmb3JtYXRpb24sIHgsIHksIHpdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgbGV0IGNvZGU6IHN0cmluZyA9IFwiXCI7XHJcbiAgICAgIGNvZGUgKz0gdHJhbnNmb3JtYXRpb25zXHJcbiAgICAgICAgLm1hcCgoW190cmFuc2Zvcm1hdGlvbiwgX3gsIF95LCBfel0sIF9pbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICBsZXQgcm90YXRlSWQ6IHN0cmluZyA9IF9pbmRleCArIF9sb2NhbE9yV29ybGQ7XHJcbiAgICAgICAgICBpZiAoX3RyYW5zZm9ybWF0aW9uID09IFwicm90YXRlXCIpIHtcclxuICAgICAgICAgICAgbGV0IHRvUmFkaWFuczogKF92YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgPSAoX3ZhbHVlOiBzdHJpbmcpID0+IGAke192YWx1ZX0gKiAke0NhbGMuZGVnMnJhZH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gYGZsb2F0IGZYUmFkaWFucyR7cm90YXRlSWR9ID0gJHt0b1JhZGlhbnMoX3gpfTtcclxuICAgICAgICAgICAgICBmbG9hdCBmWVJhZGlhbnMke3JvdGF0ZUlkfSA9ICR7dG9SYWRpYW5zKF95KX07XHJcbiAgICAgICAgICAgICAgZmxvYXQgZlpSYWRpYW5zJHtyb3RhdGVJZH0gPSAke3RvUmFkaWFucyhfeil9O1xyXG4gICAgICAgICAgICAgIGZsb2F0IGZTaW5YJHtyb3RhdGVJZH0gPSBzaW4oZlhSYWRpYW5zJHtyb3RhdGVJZH0pO1xyXG4gICAgICAgICAgICAgIGZsb2F0IGZDb3NYJHtyb3RhdGVJZH0gPSBjb3MoZlhSYWRpYW5zJHtyb3RhdGVJZH0pOyBcclxuICAgICAgICAgICAgICBmbG9hdCBmU2luWSR7cm90YXRlSWR9ID0gc2luKGZZUmFkaWFucyR7cm90YXRlSWR9KTtcclxuICAgICAgICAgICAgICBmbG9hdCBmQ29zWSR7cm90YXRlSWR9ID0gY29zKGZZUmFkaWFucyR7cm90YXRlSWR9KTtcclxuICAgICAgICAgICAgICBmbG9hdCBmU2luWiR7cm90YXRlSWR9ID0gc2luKGZaUmFkaWFucyR7cm90YXRlSWR9KTtcclxuICAgICAgICAgICAgICBmbG9hdCBmQ29zWiR7cm90YXRlSWR9ID0gY29zKGZaUmFkaWFucyR7cm90YXRlSWR9KTtcXG5gO1xyXG4gICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbHRlcigoX3RyYW5zZm9ybWF0aW9uOiBzdHJpbmcpID0+IF90cmFuc2Zvcm1hdGlvbiAhPSBcIlwiKVxyXG4gICAgICAgIC5yZWR1Y2UoKF9hY2N1bXVsYXRvcjogc3RyaW5nLCBfY29kZTogc3RyaW5nKSA9PiBgJHtfYWNjdW11bGF0b3J9XFxuJHtfY29kZX1gLCBcIlwiKTtcclxuICAgICAgY29kZSArPSBcIlxcblwiO1xyXG5cclxuICAgICAgY29kZSArPSBgbWF0NCBtdHgke19sb2NhbE9yV29ybGR9ID0gYDtcclxuICAgICAgY29kZSArPSB0cmFuc2Zvcm1hdGlvbnNcclxuICAgICAgICAubWFwKChbX3RyYW5zZm9ybWF0aW9uLCBfeCwgX3ksIF96XSwgX2luZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgIGxldCByb3RhdGVJZDogc3RyaW5nID0gX2luZGV4ICsgX2xvY2FsT3JXb3JsZDtcclxuICAgICAgICAgIHN3aXRjaCAoX3RyYW5zZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVcIjpcclxuICAgICAgICAgICAgICByZXR1cm4gYG1hdDQoXHJcbiAgICAgICAgICAgICAgMS4wLCAwLjAsIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgIDAuMCwgMS4wLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAwLjAsIDAuMCwgMS4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgJHtfeH0sICR7X3l9LCAke196fSwgMS4wKWA7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3RhdGVcIjpcclxuICAgICAgICAgICAgICByZXR1cm4gYG1hdDQoXHJcbiAgICAgICAgICAgICAgZkNvc1oke3JvdGF0ZUlkfSAqIGZDb3NZJHtyb3RhdGVJZH0sIGZTaW5aJHtyb3RhdGVJZH0gKiBmQ29zWSR7cm90YXRlSWR9LCAtZlNpblkke3JvdGF0ZUlkfSwgMC4wLFxyXG4gICAgICAgICAgICAgIGZDb3NaJHtyb3RhdGVJZH0gKiBmU2luWSR7cm90YXRlSWR9ICogZlNpblgke3JvdGF0ZUlkfSAtIGZTaW5aJHtyb3RhdGVJZH0gKiBmQ29zWCR7cm90YXRlSWR9LCBmU2luWiR7cm90YXRlSWR9ICogZlNpblkke3JvdGF0ZUlkfSAqIGZTaW5YJHtyb3RhdGVJZH0gKyBmQ29zWiR7cm90YXRlSWR9ICogZkNvc1gke3JvdGF0ZUlkfSwgZkNvc1kke3JvdGF0ZUlkfSAqIGZTaW5YJHtyb3RhdGVJZH0sIDAuMCxcclxuICAgICAgICAgICAgICBmQ29zWiR7cm90YXRlSWR9ICogZlNpblkke3JvdGF0ZUlkfSAqIGZDb3NYJHtyb3RhdGVJZH0gKyBmU2luWiR7cm90YXRlSWR9ICogZlNpblgke3JvdGF0ZUlkfSwgZlNpbloke3JvdGF0ZUlkfSAqIGZTaW5ZJHtyb3RhdGVJZH0gKiBmQ29zWCR7cm90YXRlSWR9IC0gZkNvc1oke3JvdGF0ZUlkfSAqIGZTaW5YJHtyb3RhdGVJZH0sIGZDb3NZJHtyb3RhdGVJZH0gKiBmQ29zWCR7cm90YXRlSWR9LCAwLjAsXHJcbiAgICAgICAgICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wXHJcbiAgICAgICAgICAgICAgKWA7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY2FsZVwiOlxyXG4gICAgICAgICAgICAgIHJldHVybiBgbWF0NChcclxuICAgICAgICAgICAgICAke194fSwgMC4wLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAwLjAsICR7X3l9LCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAwLjAsIDAuMCwgJHtfen0sIDAuMCxcclxuICAgICAgICAgICAgICAwLjAsIDAuMCwgMC4wLCAxLjBcclxuICAgICAgICAgICAgICApYDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICB0aHJvdyBgRXJyb3IgaW4gJHtQYXJ0aWNsZVN5c3RlbS5uYW1lfTogXCIke190cmFuc2Zvcm1hdGlvbn1cIiBpcyBub3QgYSB0cmFuc2Zvcm1hdGlvbmA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAucmVkdWNlKChfYWNjdW11bGF0b3I6IHN0cmluZywgX2NvZGU6IHN0cmluZykgPT4gYCR7X2FjY3VtdWxhdG9yfSAqIFxcbiR7X2NvZGV9YCk7XHJcbiAgICAgIGNvZGUgKz0gXCI7XFxuXCI7XHJcblxyXG4gICAgICByZXR1cm4gY29kZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUNvbG9yKF9jb2xvcjogUGFydGljbGVEYXRhLkV4cHJlc3Npb25bXSk6IHN0cmluZyB7XHJcbiAgICAgIGlmICghX2NvbG9yKSByZXR1cm4gXCJcIjtcclxuXHJcbiAgICAgIGxldCByZ2JhOiBzdHJpbmcgPSBbX2NvbG9yWzBdLCBfY29sb3JbMV0sIF9jb2xvclsyXSwgX2NvbG9yWzNdXVxyXG4gICAgICAgIC5tYXAoKF92YWx1ZSk6IHN0cmluZyA9PiBfdmFsdWUgPyBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmdlbmVyYXRlRXhwcmVzc2lvbihfdmFsdWUpIDogXCIxLjBcIilcclxuICAgICAgICAuam9pbihcIiwgXCIpO1xyXG5cclxuICAgICAgcmV0dXJuIGB2ZWM0KCR7cmdiYX0pO2A7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVFeHByZXNzaW9uKF9leHByZXNzaW9uOiBQYXJ0aWNsZURhdGEuRXhwcmVzc2lvbik6IHN0cmluZyB7XHJcbiAgICAgIGlmIChQYXJ0aWNsZURhdGEuaXNGdW5jdGlvbihfZXhwcmVzc2lvbikpIHtcclxuICAgICAgICBsZXQgcGFyYW1ldGVyczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBwYXJhbSBvZiBfZXhwcmVzc2lvbi5wYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2goUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZUV4cHJlc3Npb24ocGFyYW0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZ2VuZXJhdGVGdW5jdGlvbihfZXhwcmVzc2lvbi5mdW5jdGlvbiwgcGFyYW1ldGVycyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChQYXJ0aWNsZURhdGEuaXNWYXJpYWJsZShfZXhwcmVzc2lvbikpIHtcclxuICAgICAgICByZXR1cm4gUGFydGljbGVEYXRhLlBSRURFRklORURfVkFSSUFCTEVTW19leHByZXNzaW9uLnZhbHVlXSB8fCBcImZQYXJ0aWNsZVN5c3RlbVZhcmlhYmxlX1wiICsgX2V4cHJlc3Npb24udmFsdWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChQYXJ0aWNsZURhdGEuaXNDb25zdGFudChfZXhwcmVzc2lvbikpIHtcclxuICAgICAgICBsZXQgdmFsdWU6IHN0cmluZyA9IF9leHByZXNzaW9uLnZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfSR7dmFsdWUuaW5jbHVkZXMoXCIuXCIpID8gXCJcIiA6IFwiLjBcIn1gO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoUGFydGljbGVEYXRhLmlzQ29kZShfZXhwcmVzc2lvbikpIHtcclxuICAgICAgICBsZXQgY29kZTogc3RyaW5nID0gX2V4cHJlc3Npb24uY29kZVxyXG4gICAgICAgICAgLnJlcGxhY2VBbGwoL1xcYlthLXpBLXpdK1xcdyooPyFcXCgpXFxiL2csIChfbWF0Y2gpID0+IFBhcnRpY2xlRGF0YS5QUkVERUZJTkVEX1ZBUklBQkxFU1tfbWF0Y2hdIHx8IFwiZlBhcnRpY2xlU3lzdGVtVmFyaWFibGVfXCIgKyBfbWF0Y2gpXHJcbiAgICAgICAgICAucmVwbGFjZUFsbCgvKD88IVxcLilcXGJcXGQrXFxiKD8hXFwuKS9nLCAoX21hdGNoKSA9PiBfbWF0Y2ggKyBcIi4wXCIpO1xyXG4gICAgICAgIGNvZGUgPSBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLnJlcGxhY2VGdW5jdGlvbnMoY29kZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb2RlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHJvdyBgRXJyb3IgaW4gJHtQYXJ0aWNsZVN5c3RlbS5uYW1lfTogaW52YWxpZCBub2RlIHN0cnVjdHVyZSBpbiBwYXJ0aWNsZSBzeXN0ZW0gc2VyaWFsaXphdGlvbmA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVGdW5jdGlvbihfZnVuY3Rpb246IFBhcnRpY2xlRGF0YS5GVU5DVElPTiwgX3BhcmFtZXRlcnM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICAgICAgaWYgKF9wYXJhbWV0ZXJzLmxlbmd0aCA8IFBhcnRpY2xlRGF0YS5GVU5DVElPTl9NSU5JTVVNX1BBUkFNRVRFUlNbX2Z1bmN0aW9uXSlcclxuICAgICAgICB0aHJvdyBgRXJyb3IgaW4gJHtQYXJ0aWNsZVN5c3RlbS5uYW1lfTogXCIke19mdW5jdGlvbn1cIiBuZWVkcyBhdCBsZWFzdCAke1BhcnRpY2xlRGF0YS5GVU5DVElPTl9NSU5JTVVNX1BBUkFNRVRFUlNbX2Z1bmN0aW9uXX0gcGFyYW1ldGVyc2A7XHJcbiAgICAgIGlmIChPYmplY3QudmFsdWVzKFBhcnRpY2xlRGF0YS5GVU5DVElPTikuaW5jbHVkZXMoX2Z1bmN0aW9uKSlcclxuICAgICAgICByZXR1cm4gUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5GVU5DVElPTlNbX2Z1bmN0aW9uXShfcGFyYW1ldGVycyk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aHJvdyBgRXJyb3IgaW4gJHtQYXJ0aWNsZVN5c3RlbS5uYW1lfTogXCIke19mdW5jdGlvbn1cIiBpcyBub3QgYW4gb3BlcmF0aW9uYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZXBsYWNlRnVuY3Rpb25zKF9jb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgZnVuY3Rpb25SZWdleDogUmVnRXhwID0gL1xcYlthLXpBLXpfXStcXHcqXFwoL2c7XHJcbiAgICAgIGxldCBtYXRjaDogUmVnRXhwRXhlY0FycmF5O1xyXG4gICAgICB3aGlsZSAoKG1hdGNoID0gZnVuY3Rpb25SZWdleC5leGVjKF9jb2RlKSkgIT0gbnVsbCkge1xyXG4gICAgICAgIGxldCBmdW5jdGlvbkdlbmVyYXRvcjogRnVuY3Rpb24gPSBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLkZVTkNUSU9OU1s8UGFydGljbGVEYXRhLkZVTkNUSU9OPm1hdGNoWzBdLnNsaWNlKDAsIC0xKV07XHJcbiAgICAgICAgaWYgKCFmdW5jdGlvbkdlbmVyYXRvcilcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBsZXQgY29tbWFJbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgIGxldCBvcGVuQnJhY2tldHM6IG51bWJlciA9IDE7XHJcbiAgICAgICAgbGV0IGFyZ3VtZW50c0xhc3RJbmRleDogbnVtYmVyID0gZnVuY3Rpb25SZWdleC5sYXN0SW5kZXg7XHJcbiAgICAgICAgd2hpbGUgKG9wZW5CcmFja2V0cyA+IDApIHtcclxuICAgICAgICAgIHN3aXRjaCAoX2NvZGVbYXJndW1lbnRzTGFzdEluZGV4XSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiKFwiOlxyXG4gICAgICAgICAgICAgIG9wZW5CcmFja2V0cysrO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiKVwiOlxyXG4gICAgICAgICAgICAgIG9wZW5CcmFja2V0cy0tO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiLFwiOlxyXG4gICAgICAgICAgICAgIGlmIChvcGVuQnJhY2tldHMgPT0gMSlcclxuICAgICAgICAgICAgICAgIGNvbW1hSW5kaWNlcy5wdXNoKGFyZ3VtZW50c0xhc3RJbmRleCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhcmd1bWVudHNMYXN0SW5kZXgrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBhcmdzOiBzdHJpbmdbXSA9XHJcbiAgICAgICAgICBbZnVuY3Rpb25SZWdleC5sYXN0SW5kZXggLSAxLCAuLi5jb21tYUluZGljZXMsIGFyZ3VtZW50c0xhc3RJbmRleCAtIDFdLnJlZHVjZTxzdHJpbmdbXT4oKF9hY2N1bXVsYXRvciwgX3Bvc2l0aW9uLCBfaW5kZXgsIF9wb3NpdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIF9pbmRleCA9PSBfcG9zaXRpb25zLmxlbmd0aCAtIDEgP1xyXG4gICAgICAgICAgICAgIF9hY2N1bXVsYXRvciA6XHJcbiAgICAgICAgICAgICAgX2FjY3VtdWxhdG9yLmNvbmNhdChfY29kZS5zbGljZShfcG9zaXRpb24gKyAxLCBfcG9zaXRpb25zW19pbmRleCArIDFdKS50cmltKCkpO1xyXG4gICAgICAgICAgfSwgW10pO1xyXG5cclxuICAgICAgICBmdW5jdGlvblJlZ2V4Lmxhc3RJbmRleCA9IG1hdGNoLmluZGV4O1xyXG4gICAgICAgIF9jb2RlID0gYCR7X2NvZGUuc2xpY2UoMCwgbWF0Y2guaW5kZXgpfSgke2Z1bmN0aW9uR2VuZXJhdG9yKGFyZ3MpfSkke19jb2RlLnNsaWNlKGFyZ3VtZW50c0xhc3RJbmRleCl9YDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gX2NvZGU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQnVmZmVycyB0aGUgcmFuZG9tIG51bWJlciBkYXRhIGZvciB0aGUgcGFydGljbGUgc3lzdGVtICh7QGxpbmsgQ29tcG9uZW50UGFydGljbGVTeXN0ZW19KSBpbnRvIGEgV2ViR0wgVGV4dHVyZVxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyMlxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSZW5kZXJJbmplY3RvckNvbXBvbmVudFBhcnRpY2xlU3lzdGVtIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5qZWN0cyB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGlzIGNsYXNzIGludG8gdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSB7QGxpbmsgQ29tcG9uZW50UGFydGljbGVTeXN0ZW19XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbiwgX2NvbnRleHQ6IENsYXNzRGVjb3JhdG9yQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJ1c2VSZW5kZXJEYXRhXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS51c2VSZW5kZXJEYXRhXHJcbiAgICAgIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJkZWxldGVSZW5kZXJEYXRhXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS5kZWxldGVSZW5kZXJEYXRhXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgdXNlUmVuZGVyRGF0YSh0aGlzOiBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbSk6IHZvaWQge1xyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgaWYgKHRoaXMucmVuZGVyRGF0YSkge1xyXG4gICAgICAgIC8vIGJ1ZmZlcnMgZXhpc3RcclxuICAgICAgICBjcmMzLmFjdGl2ZVRleHR1cmUoVEVYVFVSRV9MT0NBVElPTi5QQVJUSUNMRS5VTklUKTsgLy8gQVRURU5USU9OITogY2hhbmdpbmcgdGhpcyBpZCByZXF1aXJlcyBjaGFuZ2luZyBvZiBjb3JyZXNwb25kaW5nIGlkIGluIHBhcnRpY2xlIHJlbmRlciBtZXRob2QsIHVzZSBjdHJsICsgc2hpZnQgKyBmIHNlYXJjaCFcclxuICAgICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgdGhpcy5yZW5kZXJEYXRhKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUgPSBSZW5kZXIuYXNzZXJ0PFdlYkdMVGV4dHVyZT4oY3JjMy5jcmVhdGVUZXh0dXJlKCkpO1xyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcclxuXHJcbiAgICAgICAgbGV0IHRleHR1cmVTaXplOiBudW1iZXIgPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KHRoaXMuc2l6ZSkpO1xyXG4gICAgICAgIHRleHR1cmVTaXplID0gTWF0aC5taW4odGV4dHVyZVNpemUsIGNyYzMuZ2V0UGFyYW1ldGVyKGNyYzMuTUFYX1RFWFRVUkVfU0laRSkpO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiB1c2UgaW50ZXJuYWwgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IsIGFkZGl0aW9uYWxseSBtYXliZSB1c2UgYSBzZWVkIHRvIG1ha2UgaXQgcG9zc2libGUgdG8gcmVjcmVhdGUgdGhlIHNhbWUgcmFuZG9tIG51bWJlcnNcclxuICAgICAgICBsZXQgcmFuZG9tTnVtYmVyczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGV4dHVyZVNpemUgKiB0ZXh0dXJlU2l6ZTsgaSsrKVxyXG4gICAgICAgICAgcmFuZG9tTnVtYmVycy5wdXNoKE1hdGgucmFuZG9tKCkpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY3JjMy50ZXhJbWFnZTJEKFxyXG4gICAgICAgICAgICBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUjMyRiwgdGV4dHVyZVNpemUsIHRleHR1cmVTaXplLCAwLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJFRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GTE9BVCxcclxuICAgICAgICAgICAgRmxvYXQzMkFycmF5LmZyb20ocmFuZG9tTnVtYmVycylcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgICBEZWJ1Zy5lcnJvcihfZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKGNyYzMuVEVYVFVSRV8yRCwgY3JjMy5URVhUVVJFX01JTl9GSUxURVIsIGNyYzMuTkVBUkVTVCk7XHJcbiAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKGNyYzMuVEVYVFVSRV8yRCwgY3JjMy5URVhUVVJFX01BR19GSUxURVIsIGNyYzMuTkVBUkVTVCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyRGF0YSA9IHRleHR1cmU7XHJcblxyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBudWxsKTtcclxuXHJcbiAgICAgICAgdGhpcy51c2VSZW5kZXJEYXRhKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRlbGV0ZVJlbmRlckRhdGEodGhpczogQ29tcG9uZW50UGFydGljbGVTeXN0ZW0pOiB2b2lkIHtcclxuICAgICAgaWYgKCF0aGlzLnJlbmRlckRhdGEpIHJldHVybjtcclxuXHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgbnVsbCk7XHJcbiAgICAgIGNyYzMuZGVsZXRlVGV4dHVyZSh0aGlzLnJlbmRlckRhdGEpO1xyXG4gICAgICBkZWxldGUgdGhpcy5yZW5kZXJEYXRhO1xyXG4gICAgICBcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogSW50ZXJmYWNlIHRvIGJlIGltcGxlbWVudGVkIGJ5IG9iamVjdHMgdGhhdCBjYW4gYmUgcmVjeWNsZWQsIGkuZS4gdG8gYXZvaWQgZ2FyYmFnZSBjb2xsZWN0aW9uIGJ5IHJldXNpbmcgdGhlIG9iamVjdCBpbnN0ZWFkIG9mIHJlcGxhY2luZyBpdCB3aXRoIGEgbmV3IG9uZS5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIFJlY3ljYWJsZSB7XHJcbiAgICAvKipcclxuICAgICAqIFJlY3ljbGVzIHRoZSBvYmplY3QgZm9yIHRoZSBuZXh0IHJldXNlIGJ5IHNldHRpbmcgaXRzIHByb3BlcnRpZXMgdG8gdGhlaXIgZGVmYXVsdCBzdGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIHJlY3ljbGUoKTogdm9pZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEtlZXBzIGEgZGVwb3Qgb2Ygb2JqZWN0cyB0aGF0IGhhdmUgYmVlbiBtYXJrZWQgZm9yIHJldXNlLCBzb3J0ZWQgYnkgdHlwZS4gIFxyXG4gICAqIFVzaW5nIHtAbGluayBSZWN5Y2xlcn0gcmVkdWNlcyBsb2FkIG9uIHRoZSBjYXJiYWdlIGNvbGxlY3RvciBhbmQgdGh1cyBzdXBwb3J0cyBzbW9vdGggcGVyZm9ybWFuY2UuXHJcbiAgICogQGF1dGhvciBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9ocy1mdXJ0d2FuZ2VuL0ZVREdFL3dpa2kvUmVjeWNsZXJcclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVjeWNsZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZGVwb3Q6IHsgW3R5cGU6IHN0cmluZ106IE9iamVjdFtdIH0gPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZldGNoZXMgYW4gb2JqZWN0IG9mIHRoZSByZXF1ZXN0ZWQgdHlwZSBmcm9tIHRoZSBkZXBvdCwgY2FsbHMgaXRzIHJlY3ljbGUtbWV0aG9kIGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICogSWYgdGhlIGRlcG90IGZvciB0aGF0IHR5cGUgaXMgZW1wdHkgaXQgcmV0dXJucyBhIG5ldyBvYmplY3Qgb2YgdGhlIHJlcXVlc3RlZCB0eXBlLlxyXG4gICAgICogQHBhcmFtIF90IFRoZSBjbGFzcyBpZGVudGlmaWVyIG9mIHRoZSBkZXNpcmVkIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldDxUIGV4dGVuZHMgUmVjeWNhYmxlIHwgUmVjeWNhYmxlQXJyYXk8VD4+KF90OiBuZXcgKCkgPT4gVCk6IFQge1xyXG4gICAgICBsZXQga2V5OiBzdHJpbmcgPSBfdC5uYW1lO1xyXG4gICAgICBsZXQgaW5zdGFuY2VzOiBPYmplY3RbXSA9IFJlY3ljbGVyLmRlcG90W2tleV07XHJcbiAgICAgIGlmIChpbnN0YW5jZXMgJiYgaW5zdGFuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2U6IFQgPSA8VD5pbnN0YW5jZXMucG9wKCk7XHJcbiAgICAgICAgaW5zdGFuY2UucmVjeWNsZSgpO1xyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgfSBlbHNlXHJcbiAgICAgICAgcmV0dXJuIG5ldyBfdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmV0Y2hlcyBhbiBvYmplY3Qgb2YgdGhlIHJlcXVlc3RlZCB0eXBlIGZyb20gdGhlIGRlcG90IGFuZCByZXR1cm5zIGl0LiDimqDvuI8qKkRPRVMgTk9UKiogY2FsbCBpdHMgcmVjeWNsZS1tZXRob2QuXHJcbiAgICAgKiBGYXN0ZXIgdGhhbiB7QGxpbmsgUmVjeWNsZXIuZ2V0fSwgYnV0IHNob3VsZCBiZSB1c2VkIHdpdGggY2F1dGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZXVzZTxUIGV4dGVuZHMgT2JqZWN0PihfdDogbmV3ICgpID0+IFQpOiBUIHtcclxuICAgICAgcmV0dXJuIDxUPlJlY3ljbGVyLmRlcG90W190Lm5hbWVdPy5wb3AoKSA/PyBuZXcgX3QoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gYW4gb2JqZWN0IG9mIHRoZSByZXF1ZXN0ZWQgdHlwZSBpbiB0aGUgZGVwb3QsIGJ1dCBkb2VzIG5vdCByZW1vdmUgaXQgdGhlcmUuIFxyXG4gICAgICogSWYgbm8gb2JqZWN0IG9mIHRoZSByZXF1ZXN0ZWQgdHlwZSB3YXMgaW4gdGhlIGRlcG90LCBvbmUgaXMgY3JlYXRlZCwgc3RvcmVkIGFuZCBib3Jyb3dlZC5cclxuICAgICAqIEZvciBzaG9ydCB0ZXJtIHVzYWdlIG9mIG9iamVjdHMgaW4gYSBsb2NhbCBzY29wZSwgd2hlbiB0aGVyZSB3aWxsIGJlIG5vIG90aGVyIGNhbGwgdG8ge0BsaW5rIFJlY3ljbGVyLmdldH0sIHtAbGluayBSZWN5Y2xlci5yZXVzZX0gb3Ige0BsaW5rIFJlY3ljbGVyLmJvcnJvd30hXHJcbiAgICAgKiBAcGFyYW0gX3QgVGhlIGNsYXNzIGlkZW50aWZpZXIgb2YgdGhlIGRlc2lyZWQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYm9ycm93PFQgZXh0ZW5kcyBSZWN5Y2FibGU+KF90OiBuZXcgKCkgPT4gVCk6IFQge1xyXG4gICAgICBsZXQgdDogVDtcclxuICAgICAgbGV0IGtleTogc3RyaW5nID0gX3QubmFtZTtcclxuICAgICAgbGV0IGluc3RhbmNlczogT2JqZWN0W10gPSBSZWN5Y2xlci5kZXBvdFtrZXldO1xyXG4gICAgICBpZiAoIWluc3RhbmNlcyB8fCBpbnN0YW5jZXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICB0ID0gbmV3IF90KCk7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUodCk7XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGluc3RhbmNlOiBUID0gPFQ+aW5zdGFuY2VzWzBdO1xyXG4gICAgICBpbnN0YW5jZS5yZWN5Y2xlKCk7XHJcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlcyB0aGUgb2JqZWN0IGluIHRoZSBkZXBvdCBmb3IgbGF0ZXIgcmVjeWNsaW5nLiBVc2VycyBhcmUgcmVzcG9uc2libGUgZm9yIHRocm93aW5nIGluIG9iamVjdHMgdGhhdCBhcmUgYWJvdXQgdG8gbG9vc2Ugc2NvcGUgYW5kIGFyZSBub3QgcmVmZXJlbmNlZCBieSBhbnkgb3RoZXJcclxuICAgICAqIEBwYXJhbSBfaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzdG9yZShfaW5zdGFuY2U6IE9iamVjdCk6IHZvaWQge1xyXG4gICAgICBsZXQga2V5OiBzdHJpbmcgPSBfaW5zdGFuY2UuY29uc3RydWN0b3IubmFtZTtcclxuICAgICAgLy9EZWJ1Zy5sb2coa2V5KTtcclxuICAgICAgbGV0IGluc3RhbmNlczogT2JqZWN0W10gPSBSZWN5Y2xlci5kZXBvdFtrZXldIHx8IFtdO1xyXG4gICAgICBpbnN0YW5jZXMucHVzaChfaW5zdGFuY2UpO1xyXG4gICAgICBSZWN5Y2xlci5kZXBvdFtrZXldID0gaW5zdGFuY2VzO1xyXG4gICAgICAvLyBEZWJ1Zy5sb2coYE9iamVjdE1hbmFnZXIuZGVwb3RbJHtrZXl9XTogJHtPYmplY3RNYW5hZ2VyLmRlcG90W2tleV0ubGVuZ3RofWApO1xyXG4gICAgICAvL0RlYnVnLmxvZyh0aGlzLmRlcG90KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlcyB0aGUgcHJvdmlkZWQgb2JqZWN0cyB1c2luZyB0aGUge0BsaW5rIFJlY3ljbGVyLnN0b3JlfSBtZXRob2RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzdG9yZU11bHRpcGxlKC4uLl9pbnN0YW5jZXM6IE9iamVjdFtdKTogdm9pZCB7IC8vIFRPRE86IG1heWJlIG1ha2UgdGhpcyB0aGUgZGVmYXVsdCBzdG9yZSBtZXRob2RcclxuICAgICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBfaW5zdGFuY2VzKVxyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKGluc3RhbmNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVtcHR5cyB0aGUgZGVwb3Qgb2YgYSBnaXZlbiB0eXBlLCBsZWF2aW5nIHRoZSBvYmplY3RzIGZvciB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IuIE1heSByZXN1bHQgaW4gYSBzaG9ydCBzdGFsbCB3aGVuIG1hbnkgb2JqZWN0cyB3ZXJlIGluXHJcbiAgICAgKiBAcGFyYW0gX3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkdW1wPFQ+KF90OiBuZXcgKCkgPT4gVCk6IHZvaWQge1xyXG4gICAgICBsZXQga2V5OiBzdHJpbmcgPSBfdC5uYW1lO1xyXG4gICAgICBSZWN5Y2xlci5kZXBvdFtrZXldID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbXB0eXMgYWxsIGRlcG90cywgbGVhdmluZyBhbGwgb2JqZWN0cyB0byB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IuIE1heSByZXN1bHQgaW4gYSBzaG9ydCBzdGFsbCB3aGVuIG1hbnkgb2JqZWN0cyB3ZXJlIGluXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZHVtcEFsbCgpOiB2b2lkIHtcclxuICAgICAgUmVjeWNsZXIuZGVwb3QgPSB7fTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBTdG9yZXMgYW5kIG1hbmlwdWxhdGVzIGEgdHdvZGltZW5zaW9uYWwgdmVjdG9yIGNvbXByaXNlZCBvZiB0aGUgY29tcG9uZW50cyB4IGFuZCB5XHJcbiAgICogYGBgdGV4dFxyXG4gICAqICAgICAgICAgICAgK3lcclxuICAgKiAgICAgICAgICAgICB8X18gK3hcclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBMdWthcyBTY2hldWVybGUsIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFZlY3RvcjIgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlLCBSZWN5Y2FibGUge1xyXG4gICAgcHVibGljIHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF94OiBudW1iZXIgPSAwLCBfeTogbnVtYmVyID0gMCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnNldChfeCwgX3kpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBTdGF0aWNcclxuICAgIC8qKiBcclxuICAgICAqIEEgc2hvcnRoYW5kIGZvciB3cml0aW5nIGBuZXcgVmVjdG9yMigwLCAwKWAuXHJcbiAgICAgKiBAcmV0dXJucyBBIG5ldyB2ZWN0b3Igd2l0aCB0aGUgdmFsdWVzICgwLCAwKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFpFUk8oKTogVmVjdG9yMiB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KDAsIDApO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIEEgc2hvcnRoYW5kIGZvciB3cml0aW5nIGBuZXcgVmVjdG9yMihfc2NhbGUsIF9zY2FsZSlgLlxyXG4gICAgICogQHBhcmFtIF9zY2FsZSB0aGUgc2NhbGUgb2YgdGhlIHZlY3Rvci4gRGVmYXVsdDogMVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE9ORShfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMik7XHJcbiAgICAgIHZlY3Rvci5zZXQoX3NjYWxlLCBfc2NhbGUpO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIEEgc2hvcnRoYW5kIGZvciB3cml0aW5nIGBuZXcgVmVjdG9yMih4LCAwKWAuXHJcbiAgICAgKiBAcGFyYW0gX3NjYWxlIFRoZSBudW1iZXIgdG8gd3JpdGUgaW4gdGhlIHggY29vcmRpbmF0ZS4gRGVmYXVsdDogMVxyXG4gICAgICogQHJldHVybnMgQSBuZXcgdmVjdG9yIHdpdGggdGhlIHZhbHVlcyAoX3NjYWxlLCAwKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFgoX3NjYWxlOiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9zY2FsZSwgMCk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQSBzaG9ydGhhbmQgZm9yIHdyaXRpbmcgYG5ldyBWZWN0b3IyKDAsIHkpYC5cclxuICAgICAqIEBwYXJhbSBfc2NhbGUgVGhlIG51bWJlciB0byB3cml0ZSBpbiB0aGUgeSBjb29yZGluYXRlLiBEZWZhdWx0OiAxXHJcbiAgICAgKiBAcmV0dXJucyBBIG5ldyB2ZWN0b3Igd2l0aCB0aGUgdmFsdWVzICgwLCBfc2NhbGUpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgWShfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMik7XHJcbiAgICAgIHZlY3Rvci5zZXQoMCwgX3NjYWxlKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3IgdGhyb3VnaCB0cmFuc2Zvcm1hdGlvbiBvZiB0aGUgZ2l2ZW4gdmVjdG9yIGJ5IHRoZSBnaXZlbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBUUkFOU0ZPUk1BVElPTihfdmVjdG9yOiBWZWN0b3IyLCBfbXR4VHJhbnNmb3JtOiBNYXRyaXgzeDMsIF9pbmNsdWRlVHJhbnNsYXRpb246IGJvb2xlYW4gPSB0cnVlKTogVmVjdG9yMiB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjIpO1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gX210eFRyYW5zZm9ybS5nZXQoKTtcclxuICAgICAgdmVjdG9yLnNldChcclxuICAgICAgICBtWzBdICogX3ZlY3Rvci54ICsgbVszXSAqIF92ZWN0b3IueSxcclxuICAgICAgICBtWzFdICogX3ZlY3Rvci54ICsgbVs0XSAqIF92ZWN0b3IueVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKF9pbmNsdWRlVHJhbnNsYXRpb24pXHJcbiAgICAgICAgdmVjdG9yLmFkZChfbXR4VHJhbnNmb3JtLnRyYW5zbGF0aW9uKTtcclxuXHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgdmVjdG9yIHdoaWNoIGlzIGEgY29weSBvZiB0aGUgZ2l2ZW4gdmVjdG9yIHNjYWxlZCB0byB0aGUgZ2l2ZW4gbGVuZ3RoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE5PUk1BTElaQVRJT04oX3ZlY3RvcjogVmVjdG9yMiwgX2xlbmd0aDogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgbWFnbml0dWRlU3F1YXJlZDogbnVtYmVyID0gX3ZlY3Rvci5tYWduaXR1ZGVTcXVhcmVkO1xyXG4gICAgICBpZiAobWFnbml0dWRlU3F1YXJlZCA9PSAwKVxyXG4gICAgICAgIHRocm93IChuZXcgUmFuZ2VFcnJvcihcIkltcG9zc2libGUgbm9ybWFsaXphdGlvblwiKSk7XHJcbiAgICAgIGxldCB2ZWN0b3I6IFZlY3RvcjIgPSBfdmVjdG9yLmNsb25lO1xyXG4gICAgICB2ZWN0b3Iuc2NhbGUoX2xlbmd0aCAvIE1hdGguc3FydChtYWduaXR1ZGVTcXVhcmVkKSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGdpdmVuIHZlY3RvciBzY2FsZWQgYnkgdGhlIGdpdmVuIHNjYWxpbmcgZmFjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgU0NBTEUoX3ZlY3RvcjogVmVjdG9yMiwgX3NjYWxlOiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMik7XHJcbiAgICAgIHZlY3Rvci5zZXQoX3ZlY3Rvci54ICogX3NjYWxlLCBfdmVjdG9yLnkgKiBfc2NhbGUpO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0aW5nIHZlY3RvciBhdHRhaW5lZCBieSBhZGRpdGlvbiBvZiBhbGwgZ2l2ZW4gdmVjdG9ycy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBTVU0oLi4uX3ZlY3RvcnM6IFZlY3RvcjJbXSk6IFZlY3RvcjIge1xyXG4gICAgICBjb25zdCByZXN1bHQ6IFZlY3RvcjIgPSBSZWN5Y2xlci5yZXVzZShWZWN0b3IyKTtcclxuICAgICAgZm9yIChsZXQgdmVjdG9yIG9mIF92ZWN0b3JzKVxyXG4gICAgICAgIHJlc3VsdC5zZXQocmVzdWx0LnggKyB2ZWN0b3IueCwgcmVzdWx0LnkgKyB2ZWN0b3IueSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHN1YnRyYWN0aW9uIG9mIHR3byB2ZWN0b3JzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIERJRkZFUkVOQ0UoX21pbnVlbmQ6IFZlY3RvcjIsIF9zdWJ0cmFoZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9taW51ZW5kLnggLSBfc3VidHJhaGVuZC54LCBfbWludWVuZC55IC0gX3N1YnRyYWhlbmQueSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byBWZWN0b3JzLiBEdWUgdG8gdGhlbSBiZWluZyBvbmx5IDIgRGltZW5zaW9uYWwsIHRoZSByZXN1bHQgaXMgYSBzaW5nbGUgbnVtYmVyLFxyXG4gICAgICogd2hpY2ggaW1wbGljaXRseSBpcyBvbiB0aGUgWiBheGlzLiBJdCBpcyBhbHNvIHRoZSBzaWduZWQgbWFnbml0dWRlIG9mIHRoZSByZXN1bHQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQ1JPU1MoX2E6IFZlY3RvcjIsIF9iOiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIF9hLnggKiBfYi55IC0gX2EueSAqIF9iLng7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgZG90cHJvZHVjdCBvZiAyIHZlY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgRE9UKF9hOiBWZWN0b3IyLCBfYjogVmVjdG9yMik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBfYS54ICogX2IueCArIF9hLnkgKiBfYi55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgb3J0aG9nb25hbCB2ZWN0b3IgdG8gdGhlIGdpdmVuIHZlY3Rvci4gUm90YXRlcyBjb3VudGVyY2xvY2t3aXNlIGJ5IGRlZmF1bHQuXHJcbiAgICAgKiBgYGB0ZXh0XHJcbiAgICAgKiDihpEgPT4g4oaQID0+IOKGkyA9PiDihpIgPT4g4oaRXHJcbiAgICAgKiBgYGBcclxuICAgICAqIEBwYXJhbSBfdmVjdG9yIFZlY3RvciB0byBnZXQgdGhlIG9ydGhvZ29uYWwgZXF1aXZhbGVudCBvZlxyXG4gICAgICogQHBhcmFtIF9jbG9ja3dpc2UgU2hvdWxkIHRoZSByb3RhdGlvbiBiZSBjbG9ja3dpc2UgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBjb3VudGVyY2xvY2t3aXNlPyBkZWZhdWx0OiBmYWxzZVxyXG4gICAgICogQHJldHVybnMgQSBWZWN0b3IgdGhhdCBpcyBvcnRob2dvbmFsIHRvIGFuZCBoYXMgdGhlIHNhbWUgbWFnbml0dWRlIGFzIHRoZSBnaXZlbiBWZWN0b3IuICBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBPUlRIT0dPTkFMKF92ZWN0b3I6IFZlY3RvcjIsIF9jbG9ja3dpc2U6IGJvb2xlYW4gPSBmYWxzZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMik7XHJcbiAgICAgIGlmIChfY2xvY2t3aXNlKVxyXG4gICAgICAgIHJlc3VsdC5zZXQoX3ZlY3Rvci55LCAtX3ZlY3Rvci54KTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJlc3VsdC5zZXQoLV92ZWN0b3IueSwgX3ZlY3Rvci54KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjYXJ0ZXNpYW4gdmVjdG9yIGZyb20gcG9sYXIgY29vcmRpbmF0ZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBHRU8oX2FuZ2xlOiBudW1iZXIgPSAwLCBfbWFnbml0dWRlOiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCB2ZWN0b3I6IFZlY3RvcjIgPSBSZWN5Y2xlci5yZXVzZShWZWN0b3IyKTtcclxuICAgICAgbGV0IGdlbzogR2VvMiA9IFJlY3ljbGVyLnJldXNlKEdlbzIpO1xyXG4gICAgICBnZW8uc2V0KF9hbmdsZSwgX21hZ25pdHVkZSk7XHJcbiAgICAgIHZlY3Rvci5nZW8gPSBnZW87XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGdlbyk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gQWNjZXNzb3JzXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWFnbml0dWRlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLmh5cG90KHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgbWFnbml0dWRlIG9mIHRoZSB2ZWN0b3Igd2l0aG91dCBjYWxjdWxhdGluZyBhIHNxdWFyZSByb290LiBGYXN0ZXIgZm9yIHNpbXBsZSBwcm94aW1pdHkgZXZhbHVhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtYWduaXR1ZGVTcXVhcmVkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBWZWN0b3IyLkRPVCh0aGlzLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwb2xhciByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGdlbygpOiBHZW8yIHtcclxuICAgICAgbGV0IGdlbzogR2VvMiA9IFJlY3ljbGVyLmdldChHZW8yKTtcclxuICAgICAgZ2VvLm1hZ25pdHVkZSA9IHRoaXMubWFnbml0dWRlO1xyXG5cclxuICAgICAgaWYgKGdlby5tYWduaXR1ZGUgPT09IDApXHJcbiAgICAgICAgcmV0dXJuIGdlbztcclxuXHJcbiAgICAgIGdlby5hbmdsZSA9IDE4MCAqIE1hdGguYXRhbjIodGhpcy55IC8gZ2VvLm1hZ25pdHVkZSwgdGhpcy54IC8gZ2VvLm1hZ25pdHVkZSkgLyBNYXRoLlBJO1xyXG4gICAgICByZXR1cm4gZ2VvO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRqdXN0IHRoZSBjYXJ0ZXNpYW4gdmFsdWVzIG9mIHRoaXMgdmVjdG9yIHRvIHJlcHJlc2VudCB0aGUgZ2l2ZW4gYXMgcG9sYXIgY29vcmRpbmF0ZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBnZW8oX2dlbzogR2VvMikge1xyXG4gICAgICB0aGlzLnNldChfZ2VvLm1hZ25pdHVkZSwgMCk7XHJcbiAgICAgIHRoaXMudHJhbnNmb3JtKE1hdHJpeDN4My5ST1RBVElPTihfZ2VvLmFuZ2xlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgY2xvbmUgb2YgdGhpcyB2ZWN0b3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgY2xvbmUoKTogVmVjdG9yMiB7XHJcbiAgICAgIHJldHVybiBSZWN5Y2xlci5yZXVzZShWZWN0b3IyKS5jb3B5KHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb3BpZXMgdGhlIGNvbXBvbmVudHMgb2YgdGhlIGdpdmVuIHZlY3RvciBpbnRvIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29weShfb3JpZ2luYWw6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2V0KF9vcmlnaW5hbC54LCBfb3JpZ2luYWwueSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjb29yZGluYXRlcyBvZiB0aGlzIGFuZCB0aGUgZ2l2ZW4gdmVjdG9yIGFyZSB0byBiZSBjb25zaWRlcmVkIGlkZW50aWNhbCB3aXRoaW4gdGhlIGdpdmVuIHRvbGVyYW5jZVxyXG4gICAgICogVE9ETzogZXhhbWluZSwgaWYgdG9sZXJhbmNlIGFzIGNyaXRlcml1bSBmb3IgdGhlIGRpZmZlcmVuY2UgaXMgYXBwcm9wcmlhdGUgd2l0aCB2ZXJ5IGxhcmdlIGNvb3JkaW5hdGUgdmFsdWVzIG9yIGlmIF90b2xlcmFuY2Ugc2hvdWxkIGJlIG11bHRpcGxpZWQgYnkgY29vcmRpbmF0ZSB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZXF1YWxzKF9jb21wYXJlOiBWZWN0b3IyLCBfdG9sZXJhbmNlOiBudW1iZXIgPSBOdW1iZXIuRVBTSUxPTik6IGJvb2xlYW4ge1xyXG4gICAgICBpZiAoTWF0aC5hYnModGhpcy54IC0gX2NvbXBhcmUueCkgPiBfdG9sZXJhbmNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnkgLSBfY29tcGFyZS55KSA+IF90b2xlcmFuY2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiB2ZWN0b3IgdG8gdGhlIGV4ZWN1dGluZyB2ZWN0b3IsIGNoYW5naW5nIHRoZSBleGVjdXRvci5cclxuICAgICAqIEBwYXJhbSBfYWRkZW5kIFRoZSB2ZWN0b3IgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkKF9hZGRlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgdGhpcy54ICs9IF9hZGRlbmQueDtcclxuICAgICAgdGhpcy55ICs9IF9hZGRlbmQueTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJ0cmFjdHMgdGhlIGdpdmVuIHZlY3RvciBmcm9tIHRoZSBleGVjdXRpbmcgdmVjdG9yLCBjaGFuZ2luZyB0aGUgZXhlY3V0b3IuXHJcbiAgICAgKiBAcGFyYW0gX3N1YnRyYWhlbmQgVGhlIHZlY3RvciB0byBzdWJ0cmFjdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN1YnRyYWN0KF9zdWJ0cmFoZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIHRoaXMueCAtPSBfc3VidHJhaGVuZC54O1xyXG4gICAgICB0aGlzLnkgLT0gX3N1YnRyYWhlbmQueTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTY2FsZXMgdGhlIFZlY3RvciBieSB0aGUgZ2l2ZW4gX3NjYWxhci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlKF9zY2FsYXI6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgICB0aGlzLnggKj0gX3NjYWxhcjtcclxuICAgICAgdGhpcy55ICo9IF9zY2FsYXI7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm9ybWFsaXplcyB0aGlzIHRvIHRoZSBnaXZlbiBsZW5ndGgsIDEgYnkgZGVmYXVsdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbm9ybWFsaXplKF9sZW5ndGg6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29weShWZWN0b3IyLk5PUk1BTElaQVRJT04odGhpcywgX2xlbmd0aCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfeDogbnVtYmVyID0gMCwgX3k6IG51bWJlciA9IDApOiBWZWN0b3IyIHtcclxuICAgICAgdGhpcy54ID0gX3g7XHJcbiAgICAgIHRoaXMueSA9IF95O1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGNvbXBvbmVudHMgb2YgdGhpcyB2ZWN0b3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoW3RoaXMueCwgdGhpcy55XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2Zvcm1zIHRoaXMgdmVjdG9yIGJ5IHRoZSBnaXZlbiBtYXRyaXgsIGluY2x1ZGluZyBvciBleGx1ZGluZyB0aGUgdHJhbnNsYXRpb24uXHJcbiAgICAgKiBJbmNsdWRpbmcgaXMgdGhlIGRlZmF1bHQsIGV4Y2x1ZGluZyB3aWxsIG9ubHkgcm90YXRlIGFuZCBzY2FsZSB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zZm9ybShfbXR4VHJhbnNmb3JtOiBNYXRyaXgzeDMsIF9pbmNsdWRlVHJhbnNsYXRpb246IGJvb2xlYW4gPSB0cnVlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCB0cmFuc2Zvcm1lZDogVmVjdG9yMiA9IFZlY3RvcjIuVFJBTlNGT1JNQVRJT04odGhpcywgX210eFRyYW5zZm9ybSwgX2luY2x1ZGVUcmFuc2xhdGlvbik7XHJcbiAgICAgIHRoaXMuY29weSh0cmFuc2Zvcm1lZCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHRyYW5zZm9ybWVkKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgZWFjaCBkaW1lbnNpb24sIG1vdmVzIHRoZSBjb21wb25lbnQgdG8gdGhlIG1pbmltdW0gb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWluKF9jb21wYXJlOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgX2NvbXBhcmUueCk7XHJcbiAgICAgIHRoaXMueSA9IE1hdGgubWluKHRoaXMueSwgX2NvbXBhcmUueSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgZWFjaCBkaW1lbnNpb24sIG1vdmVzIHRoZSBjb21wb25lbnQgdG8gdGhlIG1heGltdW0gb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWF4KF9jb21wYXJlOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIHRoaXMueCA9IE1hdGgubWF4KHRoaXMueCwgX2NvbXBhcmUueCk7XHJcbiAgICAgIHRoaXMueSA9IE1hdGgubWF4KHRoaXMueSwgX2NvbXBhcmUueSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHotY29tcG9uZW50IG9mIHRoZSBnaXZlbiBtYWduaXR1ZGUgKGRlZmF1bHQ9MCkgdG8gdGhlIHZlY3RvciBhbmQgcmV0dXJucyBhIG5ldyBWZWN0b3IzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1ZlY3RvcjMoX3o6IG51bWJlciA9IDApOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMueCwgdGhpcy55LCBfeik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgZm9ybWF0dGVkIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgbGV0IHJlc3VsdDogc3RyaW5nID0gYCgke3RoaXMueC50b1ByZWNpc2lvbig1KX0sICR7dGhpcy55LnRvUHJlY2lzaW9uKDUpfSlgO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlcyB0aGUgc3RhbmRhcmQgYXJyYXkubWFwIGZ1bmN0aW9uYWxpdHkgdG8gcGVyZm9ybSB0aGUgZ2l2ZW4gZnVuY3Rpb24gb24gYWxsIGNvbXBvbmVudHMgb2YgdGhpcyB2ZWN0b3JcclxuICAgICAqIGFuZCByZXR1cm4gYSBuZXcgdmVjdG9yIHdpdGggdGhlIHJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIG1hcChfZnVuY3Rpb246ICh2YWx1ZTogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBhcnJheTogQXJyYXlMaWtlPG51bWJlcj4pID0+IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgY29weTogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgY29weS5zZXQoLi4uW3RoaXMueCwgdGhpcy55XS5tYXAoX2Z1bmN0aW9uKSk7XHJcbiAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgLy8gc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgeyBcInJcIjogJHt0aGlzLnJ9LCBcImdcIjogJHt0aGlzLmd9LCBcImJcIjogJHt0aGlzLmJ9LCBcImFcIjogJHt0aGlzLmF9fWA7IH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udG9KU09OID0gKCkgPT4geyByZXR1cm4gYFske3RoaXMueH0sICR7dGhpcy55fV1gOyB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFZlY3RvcjI+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX3NlcmlhbGl6YXRpb24pID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBbdGhpcy54LCB0aGlzLnldID0gSlNPTi5wYXJzZSg8c3RyaW5nPjx1bmtub3duPl9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgfSBlbHNlXHJcbiAgICAgICAgdGhpcy5tdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgeDogdGhpcy54LCB5OiB0aGlzLnlcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9SZWN5Y2xlL1JlY3ljbGVyLnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJWZWN0b3IyLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyB0aGUgb3JpZ2luIG9mIGEgcmVjdGFuZ2xlXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gT1JJR0lOMkQge1xyXG4gICAgVE9QTEVGVCA9IDB4MDAsXHJcbiAgICBUT1BDRU5URVIgPSAweDAxLFxyXG4gICAgVE9QUklHSFQgPSAweDAyLFxyXG4gICAgQ0VOVEVSTEVGVCA9IDB4MTAsXHJcbiAgICBDRU5URVIgPSAweDExLFxyXG4gICAgQ0VOVEVSUklHSFQgPSAweDEyLFxyXG4gICAgQk9UVE9NTEVGVCA9IDB4MjAsXHJcbiAgICBCT1RUT01DRU5URVIgPSAweDIxLFxyXG4gICAgQk9UVE9NUklHSFQgPSAweDIyXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWZpbmVzIGEgcmVjdGFuZ2xlIHdpdGggcG9zaXRpb24gYW5kIHNpemUgYW5kIGFkZCBjb21mb3J0YWJsZSBtZXRob2RzIHRvIGl0XHJcbiAgICogQGF1dGhvciBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgIHB1YmxpYyBzaXplOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfeDogbnVtYmVyID0gMCwgX3k6IG51bWJlciA9IDAsIF93aWR0aDogbnVtYmVyID0gMSwgX2hlaWdodDogbnVtYmVyID0gMSwgX29yaWdpbjogT1JJR0lOMkQgPSBPUklHSU4yRC5UT1BMRUZUKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuc2V0UG9zaXRpb25BbmRTaXplKF94LCBfeSwgX3dpZHRoLCBfaGVpZ2h0LCBfb3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBuZXcgcmVjdGFuZ2xlIGNyZWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1ldGVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIEdFVChfeDogbnVtYmVyID0gMCwgX3k6IG51bWJlciA9IDAsIF93aWR0aDogbnVtYmVyID0gMSwgX2hlaWdodDogbnVtYmVyID0gMSwgX29yaWdpbjogT1JJR0lOMkQgPSBPUklHSU4yRC5UT1BMRUZUKTogUmVjdGFuZ2xlIHtcclxuICAgICAgbGV0IHJlY3Q6IFJlY3RhbmdsZSA9IFJlY3ljbGVyLmdldChSZWN0YW5nbGUpO1xyXG4gICAgICByZWN0LnNldFBvc2l0aW9uQW5kU2l6ZShfeCwgX3ksIF93aWR0aCwgX2hlaWdodCk7XHJcbiAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgeCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi54O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCB5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNpemUueDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNpemUueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiB0aGUgbGVmdG1vc3QgZXhwYW5zaW9uLCByZXNwZWN0aW5nIGFsc28gbmVnYXRpdmUgdmFsdWVzIG9mIHdpZHRoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdCgpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy5zaXplLnggPiAwKVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICAgIHJldHVybiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy5zaXplLngpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIHRvcG1vc3QgZXhwYW5zaW9uLCByZXNwZWN0aW5nIGFsc28gbmVnYXRpdmUgdmFsdWVzIG9mIGhlaWdodFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHRvcCgpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy5zaXplLnkgPiAwKVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICAgIHJldHVybiAodGhpcy5wb3NpdGlvbi55ICsgdGhpcy5zaXplLnkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIHJpZ2h0bW9zdCBleHBhbnNpb24sIHJlc3BlY3RpbmcgYWxzbyBuZWdhdGl2ZSB2YWx1ZXMgb2Ygd2lkdGhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodCgpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy5zaXplLnggPiAwKVxyXG4gICAgICAgIHJldHVybiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy5zaXplLngpO1xyXG4gICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi54O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGxvd2VzdCBleHBhbnNpb24sIHJlc3BlY3RpbmcgYWxzbyBuZWdhdGl2ZSB2YWx1ZXMgb2YgaGVpZ2h0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYm90dG9tKCk6IG51bWJlciB7XHJcbiAgICAgIGlmICh0aGlzLnNpemUueSA+IDApXHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLnNpemUueSk7XHJcbiAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB4KF94OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5wb3NpdGlvbi54ID0gX3g7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHkoX3k6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLnkgPSBfeTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgd2lkdGgoX3dpZHRoOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zaXplLnggPSBfd2lkdGg7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGhlaWdodChfaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zaXplLnkgPSBfaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBsZWZ0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuc2l6ZS54ID0gdGhpcy5yaWdodCAtIF92YWx1ZTtcclxuICAgICAgdGhpcy5wb3NpdGlvbi54ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCB0b3AoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zaXplLnkgPSB0aGlzLmJvdHRvbSAtIF92YWx1ZTtcclxuICAgICAgdGhpcy5wb3NpdGlvbi55ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCByaWdodChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnNpemUueCA9IHRoaXMucG9zaXRpb24ueCArIF92YWx1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgYm90dG9tKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuc2l6ZS55ID0gdGhpcy5wb3NpdGlvbi55ICsgX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2xvbmUoKTogUmVjdGFuZ2xlIHtcclxuICAgICAgcmV0dXJuIFJlY3RhbmdsZS5HRVQodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXRQb3NpdGlvbkFuZFNpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGlzIHJlY3RhbmdsZSB0byB0aGUgdmFsdWVzIGdpdmVuIGJ5IHRoZSByZWN0YW5nbGUgcHJvdmlkZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvcHkoX3JlY3Q6IFJlY3RhbmdsZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNldFBvc2l0aW9uQW5kU2l6ZShfcmVjdC54LCBfcmVjdC55LCBfcmVjdC53aWR0aCwgX3JlY3QuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHBvc2l0aW9uIGFuZCBzaXplIG9mIHRoZSByZWN0YW5nbGUgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwYXJhbWV0ZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRQb3NpdGlvbkFuZFNpemUoX3g6IG51bWJlciA9IDAsIF95OiBudW1iZXIgPSAwLCBfd2lkdGg6IG51bWJlciA9IDEsIF9oZWlnaHQ6IG51bWJlciA9IDEsIF9vcmlnaW46IE9SSUdJTjJEID0gT1JJR0lOMkQuVE9QTEVGVCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNpemUuc2V0KF93aWR0aCwgX2hlaWdodCk7XHJcbiAgICAgIHN3aXRjaCAoX29yaWdpbiAmIDB4MDMpIHtcclxuICAgICAgICBjYXNlIDB4MDA6IHRoaXMucG9zaXRpb24ueCA9IF94OyBicmVhaztcclxuICAgICAgICBjYXNlIDB4MDE6IHRoaXMucG9zaXRpb24ueCA9IF94IC0gX3dpZHRoIC8gMjsgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAweDAyOiB0aGlzLnBvc2l0aW9uLnggPSBfeCAtIF93aWR0aDsgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgc3dpdGNoIChfb3JpZ2luICYgMHgzMCkge1xyXG4gICAgICAgIGNhc2UgMHgwMDogdGhpcy5wb3NpdGlvbi55ID0gX3k7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMHgxMDogdGhpcy5wb3NpdGlvbi55ID0gX3kgLSBfaGVpZ2h0IC8gMjsgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAweDIwOiB0aGlzLnBvc2l0aW9uLnkgPSBfeSAtIF9oZWlnaHQ7IGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBwb2ludCBmcm9tIHRoaXMgcmVjdGFuZ2xlcyBzcGFjZSB0byB0aGUgdGFyZ2V0IHJlY3RhbmdsZXMgc3BhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50VG9SZWN0KF9wb2ludDogVmVjdG9yMiwgX3RhcmdldDogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBfcG9pbnQuY2xvbmU7XHJcbiAgICAgIHJlc3VsdC5zdWJ0cmFjdCh0aGlzLnBvc2l0aW9uKTtcclxuICAgICAgcmVzdWx0LnggKj0gX3RhcmdldC53aWR0aCAvIHRoaXMud2lkdGg7XHJcbiAgICAgIHJlc3VsdC55ICo9IF90YXJnZXQuaGVpZ2h0IC8gdGhpcy5oZWlnaHQ7XHJcbiAgICAgIHJlc3VsdC5hZGQoX3RhcmdldC5wb3NpdGlvbik7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHBvaW50IGlzIGluc2lkZSBvZiB0aGlzIHJlY3RhbmdsZSBvciBvbiB0aGUgYm9yZGVyXHJcbiAgICAgKiBAcGFyYW0gX3BvaW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0luc2lkZShfcG9pbnQ6IFZlY3RvcjIpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIChfcG9pbnQueCA+PSB0aGlzLmxlZnQgJiYgX3BvaW50LnggPD0gdGhpcy5yaWdodCAmJiBfcG9pbnQueSA+PSB0aGlzLnRvcCAmJiBfcG9pbnQueSA8PSB0aGlzLmJvdHRvbSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyByZWN0YW5nbGUgY29sbGlkZXMgd2l0aCB0aGUgcmVjdGFuZ2xlIGdpdmVuXHJcbiAgICAgKiBAcGFyYW0gX3JlY3QgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb2xsaWRlcyhfcmVjdDogUmVjdGFuZ2xlKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLmxlZnQgPiBfcmVjdC5yaWdodCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5yaWdodCA8IF9yZWN0LmxlZnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYgKHRoaXMudG9wID4gX3JlY3QuYm90dG9tKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLmJvdHRvbSA8IF9yZWN0LnRvcCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHJlY3RhbmdsZSBjcmVhdGVkIGJ5IHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHJlY3RhbmdsZSBvciBudWxsLCBpZiB0aGV5IGRvbid0IGNvbGxpZGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEludGVyc2VjdGlvbihfcmVjdDogUmVjdGFuZ2xlKTogUmVjdGFuZ2xlIHtcclxuICAgICAgaWYgKCF0aGlzLmNvbGxpZGVzKF9yZWN0KSlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIGxldCBpbnRlcnNlY3Rpb246IFJlY3RhbmdsZSA9IG5ldyBSZWN0YW5nbGUoKTtcclxuICAgICAgaW50ZXJzZWN0aW9uLnggPSBNYXRoLm1heCh0aGlzLmxlZnQsIF9yZWN0LmxlZnQpO1xyXG4gICAgICBpbnRlcnNlY3Rpb24ueSA9IE1hdGgubWF4KHRoaXMudG9wLCBfcmVjdC50b3ApO1xyXG4gICAgICBpbnRlcnNlY3Rpb24ud2lkdGggPSBNYXRoLm1pbih0aGlzLnJpZ2h0LCBfcmVjdC5yaWdodCkgLSBpbnRlcnNlY3Rpb24ueDtcclxuICAgICAgaW50ZXJzZWN0aW9uLmhlaWdodCA9IE1hdGgubWluKHRoaXMuYm90dG9tLCBfcmVjdC5ib3R0b20pIC0gaW50ZXJzZWN0aW9uLnk7XHJcblxyXG4gICAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gKiBSZXR1cm5zIHRoZSByZWN0YW5nbGUgY3JlYXRlZCBieSB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoaXMgYW5kIHRoZSBnaXZlbiByZWN0YW5nbGUgb3IgbnVsbCwgaWYgdGhleSBkb24ndCBjb2xsaWRlXHJcbiAqL1xyXG4gICAgcHVibGljIGNvdmVycyhfcmVjdDogUmVjdGFuZ2xlKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLmxlZnQgPiBfcmVjdC5sZWZ0KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnJpZ2h0IDwgX3JlY3QucmlnaHQpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYgKHRoaXMudG9wID4gX3JlY3QudG9wKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLmJvdHRvbSA8IF9yZWN0LmJvdHRvbSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN0YW5nbGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IHN0cmluZyA9IGDGki5SZWN0YW5nbGUocG9zaXRpb246JHt0aGlzLnBvc2l0aW9uLnRvU3RyaW5nKCl9LCBzaXplOiR7dGhpcy5zaXplLnRvU3RyaW5nKCl9YDtcclxuICAgICAgcmVzdWx0ICs9IGAsIGxlZnQ6JHt0aGlzLmxlZnQudG9QcmVjaXNpb24oNSl9LCB0b3A6JHt0aGlzLnRvcC50b1ByZWNpc2lvbig1KX0sIHJpZ2h0OiR7dGhpcy5yaWdodC50b1ByZWNpc2lvbig1KX0sIGJvdHRvbToke3RoaXMuYm90dG9tLnRvUHJlY2lzaW9uKDUpfWA7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHsvKiAqLyB9XHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiUmVuZGVySW5qZWN0b3IudHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlJlbmRlckluamVjdG9yU2hhZGVyLnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXJJbmplY3RvckNvYXQudHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlJlbmRlckluamVjdG9yTWVzaC50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiUmVuZGVySW5qZWN0b3JDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vTWF0aC9SZWN0YW5nbGUudHNcIi8+XHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvLyBleHBvcnQgZGVjbGFyZSBsZXQgZnVkZ2VDb25maWc6IEdlbmVyYWw7XHJcblxyXG4gIGV4cG9ydCB0eXBlIFJlbmRlclRleHR1cmUgPSBXZWJHTFRleHR1cmU7XHJcblxyXG4gIGV4cG9ydCBlbnVtIEJMRU5EIHtcclxuICAgIE9QQVFVRSwgVFJBTlNQQVJFTlQsIEFERElUSVZFLCBTVUJUUkFDVElWRSwgTU9EVUxBVEVcclxuICB9XHJcblxyXG4gIC8vIHdlIHdhbnQgdHlwZSBpbmZlcmVuY2UgaGVyZSBzbyB3ZSBjYW4gdXNlIHZzIGNvZGUgdG8gc2VhcmNoIGZvciByZWZlcmVuY2VzXHJcbiAgZXhwb3J0IGNvbnN0IFVOSUZPUk1fQkxPQ0tTID0geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICBMSUdIVFM6IHtcclxuICAgICAgTkFNRTogXCJMaWdodHNcIixcclxuICAgICAgQklORElORzogMFxyXG4gICAgfSxcclxuICAgIFNLSU46IHtcclxuICAgICAgTkFNRTogXCJTa2luXCIsXHJcbiAgICAgIEJJTkRJTkc6IDFcclxuICAgIH0sXHJcbiAgICBGT0c6IHtcclxuICAgICAgTkFNRTogXCJGb2dcIixcclxuICAgICAgQklORElORzogMlxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGV4cG9ydCBjb25zdCBURVhUVVJFX0xPQ0FUSU9OID0geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICBDT0xPUjoge1xyXG4gICAgICBVTklGT1JNOiBcInVfdGV4Q29sb3JcIixcclxuICAgICAgVU5JVDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMCxcclxuICAgICAgSU5ERVg6IDAgLy8gY291bGQgY29tcHV0ZSB0aGVzZSBieSBVTklUIC0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMCBcclxuICAgIH0sXHJcbiAgICBOT1JNQUw6IHtcclxuICAgICAgVU5JRk9STTogXCJ1X3RleE5vcm1hbFwiLFxyXG4gICAgICBVTklUOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkUxLFxyXG4gICAgICBJTkRFWDogMVxyXG4gICAgfSxcclxuICAgIFBBUlRJQ0xFOiB7XHJcbiAgICAgIFVOSUZPUk06IFwidV9wYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNcIixcclxuICAgICAgVU5JVDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMixcclxuICAgICAgSU5ERVg6IDJcclxuICAgIH0sXHJcbiAgICBURVhUOiB7XHJcbiAgICAgIFVOSUZPUk06IFwidV90ZXhUZXh0XCIsIC8vIFRPRE86IGFkZCB0ZXh0IHVuaWZvcm0gdG8gc2hhZGVyLi4uXHJcbiAgICAgIFVOSVQ6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRTMsXHJcbiAgICAgIElOREVYOiAzXHJcbiAgICB9LFxyXG4gICAgVE9PTjoge1xyXG4gICAgICBVTklGT1JNOiBcInVfdGV4VG9vblwiLFxyXG4gICAgICBVTklUOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkU0LFxyXG4gICAgICBJTkRFWDogNFxyXG4gICAgfVxyXG4gIH0gYXMgY29uc3Q7XHJcblxyXG4gIC8qKlxyXG4gICAqIEJhc2UgY2xhc3MgZm9yIFJlbmRlck1hbmFnZXIsIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIHRvIHRoZSByZW5kZXJpbmcgc3lzdGVtLCBpbiB0aGlzIGNhc2UgV2ViR0wuXHJcbiAgICogTWV0aG9kcyBhbmQgYXR0cmlidXRlcyBvZiB0aGlzIGNsYXNzIHNob3VsZCBub3QgYmUgY2FsbGVkIGRpcmVjdGx5LCBvbmx5IHRocm91Z2gge0BsaW5rIFJlbmRlcn1cclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVuZGVyV2ViR0wgZXh0ZW5kcyBFdmVudFRhcmdldFN0YXRpYyB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHVib0xpZ2h0czogV2ViR0xCdWZmZXI7XHJcbiAgICBwdWJsaWMgc3RhdGljIHVib0xpZ2h0c1ZhcmlhYmxlT2Zmc2V0czogeyBbX25hbWU6IHN0cmluZ106IG51bWJlciB9OyAvLyBNYXBzIHRoZSBuYW1lcyBvZiB0aGUgdmFyaWFibGVzIGluc2lkZSB0aGUgTGlnaHRzIHVuaWZvcm0gYmxvY2sgdG8gdGhlaXIgcmVzcGVjdGl2ZSBieXRlIG9mZnNldFxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmluaXRpYWxpemUoKTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgxpJwaWNrZWQ6IFBpY2tbXTtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWN0UmVuZGVyOiBSZWN0YW5nbGUgPSBSZW5kZXJXZWJHTC5nZXRDYW52YXNSZWN0KCk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBzaXplUGljazogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGZib01haW46IFdlYkdMRnJhbWVidWZmZXI7IC8vIHVzZWQgZm9yIGZvcndhcmQgcmVuZGVyaW5nIHBhc3NlcywgZS5nLiBvcGFxdWUgYW5kIHRyYW5zcGFyZW50IG9iamVjdHNcclxuICAgIHByaXZhdGUgc3RhdGljIGZib1Bvc3Q6IFdlYkdMRnJhbWVidWZmZXI7IC8vIHVzZWQgZm9yIHBvc3QtcHJvY2Vzc2luZyBlZmZlY3RzLCBhdHRhY2htZW50cyBnZXQgc3dhcHBlZCBmb3IgZGlmZmVyZW50IGVmZmVjdHNcclxuICAgIHByaXZhdGUgc3RhdGljIGZib1RhcmdldDogV2ViR0xGcmFtZWJ1ZmZlcjsgLy8gdXNlZCB0byByZW5kZXIgdGhlIGZpbmFsIGltYWdlIHRvLCB1c3VhbGx5IFwibnVsbFwiIHRvIHJlbmRlciB0byB0aGUgY2FudmFzIGRlZmF1bHQgZnJhbWVidWZmZXIuIFVzZWQgYnkgWFIgdG8gcmVuZGVyIHRvIHRoZSBYUldlYkdMTGF5ZXIgZnJhbWVidWZmZXIuXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdGV4Q29sb3I6IFdlYkdMVGV4dHVyZTsgLy8gc3RvcmVzIHRoZSBjb2xvciBvZiBlYWNoIHBpeGVsIHJlbmRlcmVkXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0ZXhQb3NpdGlvbjogV2ViR0xUZXh0dXJlOyAvLyBzdG9yZXMgdGhlIHBvc2l0aW9uIG9mIGVhY2ggcGl4ZWwgaW4gd29ybGQgc3BhY2VcclxuICAgIHByaXZhdGUgc3RhdGljIHRleE5vcm1hbDogV2ViR0xUZXh0dXJlOyAvLyBzdG9yZXMgdGhlIG5vcm1hbCBvZiBlYWNoIHBpeGVsIGluIHdvcmxkIHNwYWNlXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0ZXhOb2lzZTogV2ViR0xUZXh0dXJlOyAvLyBzdG9yZXMgcmFuZG9tIHZhbHVlcyBmb3IgZWFjaCBwaXhlbCwgdXNlZCBmb3IgYW1iaWVudCBvY2NsdXNpb25cclxuICAgIHByaXZhdGUgc3RhdGljIHRleERlcHRoU3RlbmNpbDogV2ViR0xUZXh0dXJlOyAvLyBzdG9yZXMgdGhlIGRlcHRoIG9mIGVhY2ggcGl4ZWwsIGN1cnJlbnRseSB1bnVzZWRcclxuICAgIHByaXZhdGUgc3RhdGljIHRleEJsb29tU2FtcGxlczogV2ViR0xUZXh0dXJlW107IC8vIHN0b3JlcyBkb3duIGFuZCB1cHNhbXBsZWQgdmVyc2lvbnMgb2YgdGhlIGNvbG9yIHRleHR1cmUsIHVzZWQgZm9yIGJsb29tXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdWJvRm9nOiBXZWJHTEJ1ZmZlcjsgLy8gc3RvcmVzIHRoZSBmb2cgcGFyYW1ldGVyc1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgb2Zmc2NyZWVuLWNhbnZhcywgcmVuZGVyaW5nY29udGV4dCBhbmQgaGFyZHdhcmUgdmlld3BvcnQuIENhbGwgb25jZSBiZWZvcmUgY3JlYXRpbmcgYW55IHJlc291cmNlcyBsaWtlIG1lc2hlcyBvciBzaGFkZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZShfYW50aWFsaWFzPzogYm9vbGVhbiwgX2FscGhhPzogYm9vbGVhbik6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQge1xyXG4gICAgICBsZXQgZnVkZ2VDb25maWc6IEdlbmVyYWwgPSBSZWZsZWN0LmdldChnbG9iYWxUaGlzLCBcImZ1ZGdlQ29uZmlnXCIpIHx8IHt9O1xyXG4gICAgICBjb25zdCBhbnRpYWxpYXM6IGJvb2xlYW4gPSAoX2FudGlhbGlhcyAhPSB1bmRlZmluZWQpID8gX2FudGlhbGlhcyA6IGZ1ZGdlQ29uZmlnLmFudGlhbGlhcyB8fCBmYWxzZTtcclxuICAgICAgaWYgKGFudGlhbGlhcylcclxuICAgICAgICBEZWJ1Zy5lcnJvcihcIlRoZSBkZWZhdWx0IGFudGlhbGlhc2luZyBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHBvc3QtcHJvY2Vzc2luZyBlZmZlY3RzIGFuZCB3aWxsIHRoZXJlZm9yZSBiZSBkaXNhYmxlZC5cIik7XHJcbiAgICAgIGxldCBjb250ZXh0QXR0cmlidXRlczogV2ViR0xDb250ZXh0QXR0cmlidXRlcyA9IHsgLy8gVE9ETzogXHJcbiAgICAgICAgYWxwaGE6IChfYWxwaGEgIT0gdW5kZWZpbmVkKSA/IF9hbHBoYSA6IGZ1ZGdlQ29uZmlnLmFscGhhIHx8IGZhbHNlLFxyXG4gICAgICAgIGFudGlhbGlhczogZmFsc2UsXHJcbiAgICAgICAgcHJlbXVsdGlwbGllZEFscGhhOiBmYWxzZSxcclxuICAgICAgICBzdGVuY2lsOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIERlYnVnLmZ1ZGdlKFwiSW5pdGlhbGl6ZSBSZW5kZXJXZWJHTFwiLCBjb250ZXh0QXR0cmlidXRlcyk7XHJcbiAgICAgIGxldCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICAgIGNyYzMgPSBSZW5kZXJXZWJHTC5hc3NlcnQ8V2ViR0wyUmVuZGVyaW5nQ29udGV4dD4oXHJcbiAgICAgICAgY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbDJcIiwgY29udGV4dEF0dHJpYnV0ZXMpLFxyXG4gICAgICAgIFwiV2ViR0wtY29udGV4dCBjb3VsZG4ndCBiZSBjcmVhdGVkXCJcclxuICAgICAgKTtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMyA9IGNyYzM7XHJcbiAgICAgIC8vIEVuYWJsZSBiYWNrZmFjZS0gYW5kIHpCdWZmZXItY3VsbGluZy5cclxuICAgICAgY3JjMy5lbmFibGUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DVUxMX0ZBQ0UpO1xyXG4gICAgICBjcmMzLmVuYWJsZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkRFUFRIX1RFU1QpO1xyXG4gICAgICBjcmMzLmVuYWJsZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkJMRU5EKTtcclxuICAgICAgUmVuZGVyV2ViR0wuc2V0QmxlbmRNb2RlKEJMRU5ELlRSQU5TUEFSRU5UKTtcclxuICAgICAgUmVuZGVyV2ViR0wucmVjdFJlbmRlciA9IFJlbmRlcldlYkdMLmdldENhbnZhc1JlY3QoKTtcclxuXHJcbiAgICAgIFJlbmRlcldlYkdMLmluaXRpYWxpemVBdHRhY2htZW50cygpO1xyXG4gICAgICBSZW5kZXJXZWJHTC5hZGp1c3RBdHRhY2htZW50cygpO1xyXG5cclxuICAgICAgUmVuZGVyV2ViR0wudWJvRm9nID0gUmVuZGVyV2ViR0wuYXNzZXJ0KGNyYzMuY3JlYXRlQnVmZmVyKCkpO1xyXG5cclxuICAgICAgcmV0dXJuIGNyYzM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIENoZWNrcyB0aGUgZmlyc3QgcGFyYW1ldGVyIGFuZCB0aHJvd3MgYW4gZXhjZXB0aW9uIHdpdGggdGhlIFdlYkdMLWVycm9yY29kZSBpZiB0aGUgdmFsdWUgaXMgbnVsbFxyXG4gICAgKiBAcGFyYW0gX3ZhbHVlICB2YWx1ZSB0byBjaGVjayBhZ2FpbnN0IG51bGxcclxuICAgICogQHBhcmFtIF9tZXNzYWdlICBvcHRpb25hbCwgYWRkaXRpb25hbCBtZXNzYWdlIGZvciB0aGUgZXhjZXB0aW9uXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3NlcnQ8VD4oX3ZhbHVlOiBUIHwgbnVsbCwgX21lc3NhZ2U6IHN0cmluZyA9IFwiXCIpOiBUIHtcclxuICAgICAgaWYgKF92YWx1ZSA9PT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzc2VydGlvbiBmYWlsZWQuICR7X21lc3NhZ2V9LCBXZWJHTC1FcnJvcjogJHtSZW5kZXJXZWJHTC5jcmMzID8gUmVuZGVyV2ViR0wuY3JjMy5nZXRFcnJvcigpIDogXCJcIn1gKTtcclxuICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHJlZmVyZW5jZSB0byB0aGUgb2Zmc2NyZWVuLWNhbnZhc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICAgIHJldHVybiA8SFRNTENhbnZhc0VsZW1lbnQ+UmVuZGVyV2ViR0wuY3JjMy5jYW52YXM7IC8vIFRPRE86IGVuYWJsZSBPZmZzY3JlZW5DYW52YXNcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHJlZmVyZW5jZSB0byB0aGUgcmVuZGVyaW5nIGNvbnRleHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRSZW5kZXJpbmdDb250ZXh0KCk6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQge1xyXG4gICAgICByZXR1cm4gUmVuZGVyV2ViR0wuY3JjMztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHJlY3RhbmdsZSBkZXNjcmliaW5nIHRoZSBzaXplIG9mIHRoZSBvZmZzY3JlZW4tY2FudmFzLiB4LHkgYXJlIDAgYXQgYWxsIHRpbWVzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENhbnZhc1JlY3QoKTogUmVjdGFuZ2xlIHtcclxuICAgICAgbGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSA8SFRNTENhbnZhc0VsZW1lbnQ+UmVuZGVyV2ViR0wuY3JjMy5jYW52YXM7XHJcbiAgICAgIHJldHVybiBSZWN0YW5nbGUuR0VUKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHNpemUgb2YgdGhlIG9mZnNjcmVlbi1jYW52YXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0Q2FudmFzU2l6ZShfd2lkdGg6IG51bWJlciwgX2hlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMuY2FudmFzLndpZHRoID0gX3dpZHRoO1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLmNhbnZhcy5oZWlnaHQgPSBfaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBhcmVhIG9uIHRoZSBvZmZzY3JlZW4tY2FudmFzIHRvIHJlbmRlciB0aGUgY2FtZXJhIGltYWdlIHRvLlxyXG4gICAgICogQHBhcmFtIF9yZWN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0UmVuZGVyUmVjdGFuZ2xlKF9yZWN0OiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wucmVjdFJlbmRlci5zZXRQb3NpdGlvbkFuZFNpemUoX3JlY3QueCwgX3JlY3QueSwgX3JlY3Qud2lkdGgsIF9yZWN0LmhlaWdodCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMudmlld3BvcnQoX3JlY3QueCwgX3JlY3QueSwgX3JlY3Qud2lkdGgsIF9yZWN0LmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciB0aGUgb2Zmc2NyZWVuIHJlbmRlcmJ1ZmZlciB3aXRoIHRoZSBnaXZlbiB7QGxpbmsgQ29sb3J9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXIoX2NvbG9yPzogQ29sb3IpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5jbGVhckNvbG9yKF9jb2xvcj8uciA/PyAwLCBfY29sb3I/LmcgPz8gMCwgX2NvbG9yPy5iID8/IDAsIF9jb2xvcj8uYSA/PyAxKTtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5jbGVhcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0JVRkZFUl9CSVQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkRFUFRIX0JVRkZFUl9CSVQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlNURU5DSUxfQlVGRkVSX0JJVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGZpbmFsIGZyYW1lYnVmZmVyIHRvIHJlbmRlciB0by4gSWYgbnVsbCwgdGhlIGNhbnZhcyBkZWZhdWx0IGZyYW1lYnVmZmVyIGlzIHVzZWQuXHJcbiAgICAgKiBVc2VkIGJ5IFhSIHRvIHJlbmRlciB0byB0aGUgWFJXZWJHTExheWVyIGZyYW1lYnVmZmVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldEZyYW1lYnVmZmVyVGFyZ2V0KF9idWZmZXI6IFdlYkdMRnJhbWVidWZmZXIpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuZmJvVGFyZ2V0ID0gX2J1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IHRoZSBmcmFtZWJ1ZmZlciB0byB0aGUgbWFpbiBjb2xvciBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVzZXRGcmFtZWJ1ZmZlcigpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgUmVuZGVyV2ViR0wuZmJvTWFpbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgYXJlYSBvbiB0aGUgb2Zmc2NyZWVuLWNhbnZhcyB0aGUgY2FtZXJhIGltYWdlIGdldHMgcmVuZGVyZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVuZGVyUmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIHJldHVybiBSZW5kZXJXZWJHTC5yZWN0UmVuZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5hYmxlIC8gRGlzYWJsZSBXZWJHTHMgZGVwdGggdGVzdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXREZXB0aFRlc3QoX3Rlc3Q6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgaWYgKF90ZXN0KVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuZW5hYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuREVQVEhfVEVTVCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmRpc2FibGUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5ERVBUSF9URVNUKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZSAvIERpc2FibGUgV2ViR0xzIHNjaXNzb3IgdGVzdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRTY2lzc29yVGVzdChfdGVzdDogYm9vbGVhbiwgX3g/OiBudW1iZXIsIF95PzogbnVtYmVyLCBfd2lkdGg/OiBudW1iZXIsIF9oZWlnaHQ/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgaWYgKF90ZXN0KVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuZW5hYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU0NJU1NPUl9URVNUKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuZGlzYWJsZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlNDSVNTT1JfVEVTVCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMuc2Npc3NvcihfeCwgX3ksIF93aWR0aCwgX2hlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgV2ViR0xzIHZpZXdwb3J0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldFZpZXdwb3J0KF94OiBudW1iZXIsIF95OiBudW1iZXIsIF93aWR0aDogbnVtYmVyLCBfaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy52aWV3cG9ydChfeCwgX3ksIF93aWR0aCwgX2hlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGJsZW5kIG1vZGUgdG8gcmVuZGVyIHdpdGhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRCbGVuZE1vZGUoX21vZGU6IEJMRU5EKTogdm9pZCB7XHJcbiAgICAgIHN3aXRjaCAoX21vZGUpIHtcclxuICAgICAgICBjYXNlIEJMRU5ELk9QQVFVRTpcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRFcXVhdGlvbihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZVTkNfQUREKTtcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlpFUk8pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCTEVORC5UUkFOU1BBUkVOVDpcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRFcXVhdGlvbihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZVTkNfQUREKTtcclxuICAgICAgICAgIC8vIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk9ORV9NSU5VU19TUkNfQUxQSEEpO1xyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5TUkNfQUxQSEEsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FX01JTlVTX1NSQ19BTFBIQSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJMRU5ELkFERElUSVZFOlxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEVxdWF0aW9uKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlVOQ19BREQpO1xyXG4gICAgICAgICAgLy8gUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5PTkUsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FKTtcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1JDX0FMUEhBLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk9ORSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJMRU5ELlNVQlRSQUNUSVZFOlxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEVxdWF0aW9uKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlVOQ19SRVZFUlNFX1NVQlRSQUNUKTtcclxuICAgICAgICAgIC8vIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk9ORSk7XHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmJsZW5kRnVuYyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlNSQ19BTFBIQSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5PTkUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCTEVORC5NT0RVTEFURTogLy8gY29sb3IgZ2V0cyBtdWx0aXBsaWVkLCB0cmllZCB0byBjb3B5IHVuaXR5cyBcIlBhcnRpY2xlIFNoYWRlcjogQmxlbmRpbmcgT3B0aW9uOiBSZW5kZXJpbmcgTW9kZTogTW9kdWxhdGVcIlxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEVxdWF0aW9uKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlVOQ19BREQpO1xyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5EU1RfQ09MT1IsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FX01JTlVTX1NSQ19BTFBIQSk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIHRoZSAod29ybGQpIHBvc2l0aW9uIGZyb20gdGhlIHBpeGVsIGF0IHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgcmVuZGVyLXJlY3RhbmdsZSAob3JpZ2luIHRvcCBsZWZ0KS5cclxuICAgICAqIOKaoO+4jyBDQVVUSU9OOiBDdXJyZW50bHkgb25seSB3b3JrcyB3aGVuIGFtYmllbnQgb2NjbHVzaW9uIGlzIGFjdGl2ZSBkdWUgdG8gd3JpdGluZyB0byB0aGUgcG9zaXRpb24gdGV4dHVyZSBiZWluZyBkaXNhYmxlZCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcG9pbnRSZW5kZXJUb1dvcmxkKF9yZW5kZXI6IFZlY3RvcjIpOiBWZWN0b3IzIHtcclxuICAgICAgY29uc3QgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgY29uc3QgZGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxuICAgICAgY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgUmVuZGVyV2ViR0wuZmJvTWFpbik7XHJcbiAgICAgIGNyYzMucmVhZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0FUVEFDSE1FTlQxKTtcclxuICAgICAgY3JjMy5yZWFkUGl4ZWxzKF9yZW5kZXIueCwgUmVuZGVyV2ViR0wucmVjdFJlbmRlci5oZWlnaHQgLSBfcmVuZGVyLnksIDEsIDEsIGNyYzMuUkdCQSwgY3JjMy5GTE9BVCwgZGF0YSk7XHJcbiAgICAgIGNyYzMucmVhZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0FUVEFDSE1FTlQwKTtcclxuICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICBwb3NpdGlvbi5zZXQoZGF0YVswXSwgZGF0YVsxXSwgZGF0YVsyXSk7XHJcbiAgICAgIHJldHVybiBwb3NpdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGRpZmZlcmVudCBmcmFtZWJ1ZmZlcnMgYXN3ZWxsIGFzIHRleHR1cmUgYXR0YWNobWVudHMgdG8gdXNlIGFzIHJlbmRlciB0YXJnZXRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZUF0dGFjaG1lbnRzKCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLmdldEV4dGVuc2lvbihcIkVYVF9jb2xvcl9idWZmZXJfZmxvYXRcIik7IC8vIFRPRE86IGRpc2FibGUgc3NhbyBpZiBub3Qgc3VwcG9ydGVkXHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5mYm9NYWluID0gUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMRnJhbWVidWZmZXI+KFJlbmRlcldlYkdMLmNyYzMuY3JlYXRlRnJhbWVidWZmZXIoKSk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmZib1Bvc3QgPSBSZW5kZXJXZWJHTC5hc3NlcnQ8V2ViR0xGcmFtZWJ1ZmZlcj4oUmVuZGVyV2ViR0wuY3JjMy5jcmVhdGVGcmFtZWJ1ZmZlcigpKTtcclxuICAgICAgUmVuZGVyV2ViR0wuZmJvVGFyZ2V0ID0gbnVsbDtcclxuXHJcbiAgICAgIFJlbmRlcldlYkdMLnRleENvbG9yID0gY3JlYXRlVGV4dHVyZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICAgIFJlbmRlcldlYkdMLnRleFBvc2l0aW9uID0gY3JlYXRlVGV4dHVyZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICAgIFJlbmRlcldlYkdMLnRleE5vcm1hbCA9IGNyZWF0ZVRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5ORUFSRVNULCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNMQU1QX1RPX0VER0UpO1xyXG4gICAgICBSZW5kZXJXZWJHTC50ZXhEZXB0aFN0ZW5jaWwgPSBjcmVhdGVUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DTEFNUF9UT19FREdFKTtcclxuICAgICAgUmVuZGVyV2ViR0wudGV4Tm9pc2UgPSBjcmVhdGVUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DTEFNUF9UT19FREdFKTtcclxuXHJcbiAgICAgIFJlbmRlcldlYkdMLnRleEJsb29tU2FtcGxlcyA9IG5ldyBBcnJheSg2KTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IFJlbmRlcldlYkdMLnRleEJsb29tU2FtcGxlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICBSZW5kZXJXZWJHTC50ZXhCbG9vbVNhbXBsZXNbaV0gPSBjcmVhdGVUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTElORUFSLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNMQU1QX1RPX0VER0UpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gY3JlYXRlVGV4dHVyZShfZmlsdGVyOiBudW1iZXIsIF93cmFwOiBudW1iZXIpOiBXZWJHTFRleHR1cmUge1xyXG4gICAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5jcmMzO1xyXG4gICAgICAgIGNvbnN0IHRleHR1cmU6IFdlYkdMVGV4dHVyZSA9IFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTFRleHR1cmU+KGNyYzMuY3JlYXRlVGV4dHVyZSgpKTtcclxuICAgICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XHJcbiAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01JTl9GSUxURVIsIF9maWx0ZXIpO1xyXG4gICAgICAgIGNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9NQUdfRklMVEVSLCBfZmlsdGVyKTtcclxuICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfV1JBUF9TLCBfd3JhcCk7XHJcbiAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX1dSQVBfVCwgX3dyYXApO1xyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBudWxsKTtcclxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRqdXN0cyB0aGUgc2l6ZSBvZiB0aGUgZGlmZmVyZW50IHRleHR1cmUgYXR0YWNobWVudHMgKHJlbmRlciB0YXJnZXRzKSB0byB0aGUgY2FudmFzIHNpemVcclxuICAgICAqIOKaoO+4jyBDQVVUSU9OOiBFeHBlbnNpdmUgb3BlcmF0aW9uLCB1c2Ugb25seSB3aGVuIGNhbnZhcyBzaXplIGNoYW5nZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhZGp1c3RBdHRhY2htZW50cygpOiB2b2lkIHtcclxuICAgICAgY29uc3QgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgY29uc3Qgd2lkdGg6IG51bWJlciA9IGNyYzMuY2FudmFzLndpZHRoIHx8IDE7XHJcbiAgICAgIGNvbnN0IGhlaWdodDogbnVtYmVyID0gY3JjMy5jYW52YXMuaGVpZ2h0IHx8IDE7XHJcblxyXG4gICAgICBjcmMzLmFjdGl2ZVRleHR1cmUoY3JjMy5URVhUVVJFMCk7XHJcblxyXG4gICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgUmVuZGVyV2ViR0wudGV4Q29sb3IpO1xyXG4gICAgICBjcmMzLnRleEltYWdlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCAwLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJHQkEsIHdpZHRoLCBoZWlnaHQsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlNJR05FRF9CWVRFLCBudWxsKTtcclxuXHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhQb3NpdGlvbik7XHJcbiAgICAgIC8vIEluIHZpZXcgc3BhY2UgMTZGIHdvdWxkIGJlIHByZWNpc2UgZW5vdWdoLi4uIGJ1dCB3ZSB3YW50IHRvIHVzZSB3b3JsZCBzcGFjZSBmb3IgY2FsY3VsYXRpb25zXHJcbiAgICAgIGNyYzMudGV4SW1hZ2UyRChXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQTMyRiwgd2lkdGgsIGhlaWdodCwgMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SR0JBLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZMT0FULCBudWxsKTtcclxuXHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhOb3JtYWwpO1xyXG4gICAgICBjcmMzLnRleEltYWdlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCAwLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJHQkExNkYsIHdpZHRoLCBoZWlnaHQsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GTE9BVCwgbnVsbCk7XHJcblxyXG4gICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgUmVuZGVyV2ViR0wudGV4RGVwdGhTdGVuY2lsKTtcclxuICAgICAgY3JjMy50ZXhJbWFnZTJEKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5ERVBUSDI0X1NURU5DSUw4LCB3aWR0aCwgaGVpZ2h0LCAwLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkRFUFRIX1NURU5DSUwsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5TSUdORURfSU5UXzI0XzgsIG51bGwpO1xyXG5cclxuICAgICAgY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgUmVuZGVyV2ViR0wuZmJvTWFpbik7XHJcbiAgICAgIGNyYzMuZnJhbWVidWZmZXJUZXh0dXJlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhDb2xvciwgMCk7XHJcbiAgICAgIGNyYzMuZnJhbWVidWZmZXJUZXh0dXJlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhQb3NpdGlvbiwgMCk7XHJcbiAgICAgIGNyYzMuZnJhbWVidWZmZXJUZXh0dXJlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhOb3JtYWwsIDApO1xyXG4gICAgICBjcmMzLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFJlbmRlcldlYkdMLnRleERlcHRoU3RlbmNpbCwgMCk7XHJcbiAgICAgIGNyYzMuYmluZEZyYW1lYnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIG51bGwpO1xyXG5cclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMCwgZGl2aXNvcjogbnVtYmVyID0gMTsgaSA8IFJlbmRlcldlYkdMLnRleEJsb29tU2FtcGxlcy5sZW5ndGg7IGkrKywgZGl2aXNvciAqPSAyKSB7XHJcbiAgICAgICAgbGV0IHdpZHRoOiBudW1iZXIgPSBNYXRoLm1heChNYXRoLnJvdW5kKGNyYzMuY2FudmFzLndpZHRoIC8gZGl2aXNvciksIDEpO1xyXG4gICAgICAgIGxldCBoZWlnaHQ6IG51bWJlciA9IE1hdGgubWF4KE1hdGgucm91bmQoY3JjMy5jYW52YXMuaGVpZ2h0IC8gZGl2aXNvciksIDEpO1xyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhCbG9vbVNhbXBsZXNbaV0pO1xyXG4gICAgICAgIGNyYzMudGV4SW1hZ2UyRChXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQSwgd2lkdGgsIGhlaWdodCwgMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SR0JBLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOU0lHTkVEX0JZVEUsIG51bGwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBuVmFsdWVzOiBudW1iZXIgPSB3aWR0aCAqIGhlaWdodCAqIDQ7XHJcbiAgICAgIGNvbnN0IG5vaXNlRGF0YTogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KG5WYWx1ZXMpO1xyXG5cclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IG5WYWx1ZXM7IGkgKz0gNCkge1xyXG4gICAgICAgIG5vaXNlRGF0YVtpXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XHJcbiAgICAgICAgbm9pc2VEYXRhW2kgKyAxXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XHJcbiAgICAgICAgbm9pc2VEYXRhW2kgKyAyXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XHJcbiAgICAgICAgbm9pc2VEYXRhW2kgKyAzXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoY3JjMy5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhOb2lzZSk7XHJcbiAgICAgIGNyYzMudGV4SW1hZ2UyRChjcmMzLlRFWFRVUkVfMkQsIDAsIGNyYzMuUkdCQSwgd2lkdGgsIGhlaWdodCwgMCwgY3JjMy5SR0JBLCBjcmMzLlVOU0lHTkVEX0JZVEUsIG5vaXNlRGF0YSk7XHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoY3JjMy5URVhUVVJFXzJELCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gUGlja2luZ1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgdGV4dHVyZSBidWZmZXIgdG8gYmUgdXNlZCBhcyBwaWNrLWJ1ZmZlclxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGNyZWF0ZVBpY2tUZXh0dXJlKF9zaXplOiBudW1iZXIpOiBSZW5kZXJUZXh0dXJlIHtcclxuICAgICAgLy8gY3JlYXRlIHRvIHJlbmRlciB0b1xyXG4gICAgICBjb25zdCB0YXJnZXRUZXh0dXJlOiBSZW5kZXJUZXh0dXJlID0gUmVuZGVyV2ViR0wuYXNzZXJ0KFJlbmRlci5jcmMzLmNyZWF0ZVRleHR1cmUoKSk7XHJcbiAgICAgIFJlbmRlci5jcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgdGFyZ2V0VGV4dHVyZSk7IC8vIFRPRE86IGNoZWNrIGlmIHN1cGVyY2xhc3MgKFJlbmRlcldlYkdMKSBzaG91bGQgcmVmZXIgZG93bndhcmRzIHRvIHN1YmNsYXNzIChSZW5kZXIpIGxpa2UgdGhpc1xyXG5cclxuICAgICAge1xyXG4gICAgICAgIGNvbnN0IGludGVybmFsRm9ybWF0OiBudW1iZXIgPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJHQkEzMkk7XHJcbiAgICAgICAgY29uc3QgZm9ybWF0OiBudW1iZXIgPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJHQkFfSU5URUdFUjtcclxuICAgICAgICBjb25zdCB0eXBlOiBudW1iZXIgPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LklOVDtcclxuICAgICAgICBSZW5kZXIucGlja0J1ZmZlciA9IG5ldyBJbnQzMkFycmF5KF9zaXplICogX3NpemUgKiA0KTtcclxuICAgICAgICBSZW5kZXIuY3JjMy50ZXhJbWFnZTJEKFxyXG4gICAgICAgICAgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCAwLCBpbnRlcm5hbEZvcm1hdCwgX3NpemUsIF9zaXplLCAwLCBmb3JtYXQsIHR5cGUsIFJlbmRlci5waWNrQnVmZmVyXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRoZSBmaWx0ZXJpbmcgc28gd2UgZG9uJ3QgbmVlZCBtaXBzXHJcbiAgICAgICAgUmVuZGVyLmNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9NSU5fRklMVEVSLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkxJTkVBUik7XHJcbiAgICAgICAgUmVuZGVyLmNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9XUkFQX1MsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICAgICAgUmVuZGVyLmNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9XUkFQX1QsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZyYW1lYnVmZmVyOiBXZWJHTEZyYW1lYnVmZmVyID0gUmVuZGVyLmNyYzMuY3JlYXRlRnJhbWVidWZmZXIoKTtcclxuICAgICAgUmVuZGVyLmNyYzMuYmluZEZyYW1lYnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKTtcclxuICAgICAgY29uc3QgYXR0YWNobWVudFBvaW50OiBudW1iZXIgPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0FUVEFDSE1FTlQwO1xyXG4gICAgICBSZW5kZXIuY3JjMy5mcmFtZWJ1ZmZlclRleHR1cmUyRChXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZSQU1FQlVGRkVSLCBhdHRhY2htZW50UG9pbnQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgdGFyZ2V0VGV4dHVyZSwgMCk7XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5zaXplUGljayA9IF9zaXplO1xyXG4gICAgICByZXR1cm4gdGFyZ2V0VGV4dHVyZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGdldFBpY2tzKF9zaXplOiBudW1iZXIsIF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IFBpY2tbXSB7XHJcbiAgICAgIC8vIGV2YWx1YXRlIHRleHR1cmUgYnkgcmVhZGluZyBwaXhlbHMgYW5kIGV4dHJhY3QsIGNvbnZlcnQgYW5kIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG1lc2ggaGl0XHJcbiAgICAgIGxldCBkYXRhOiBJbnQzMkFycmF5ID0gbmV3IEludDMyQXJyYXkoX3NpemUgKiBfc2l6ZSAqIDQpO1xyXG4gICAgICBSZW5kZXIuY3JjMy5yZWFkUGl4ZWxzKDAsIDAsIF9zaXplLCBfc2l6ZSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SR0JBX0lOVEVHRVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuSU5ULCBkYXRhKTtcclxuXHJcbiAgICAgIGxldCBtdHhWaWV3VG9Xb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklOVkVSU0UoX2NtcENhbWVyYS5tdHhXb3JsZFRvVmlldyk7XHJcbiAgICAgIGxldCBwaWNrZWQ6IFBpY2tbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgUmVuZGVyLsaScGlja2VkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHpCdWZmZXI6IG51bWJlciA9IGRhdGFbNCAqIGkgKyAwXSArIGRhdGFbNCAqIGkgKyAxXSAvIDI1NjtcclxuICAgICAgICBpZiAoekJ1ZmZlciA9PSAwKSAvLyBkaXNjYXJkIG1pc3NlcyBcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGxldCBwaWNrOiBQaWNrID0gUmVuZGVyLsaScGlja2VkW2ldO1xyXG4gICAgICAgIHBpY2suekJ1ZmZlciA9IGNvbnZlcnRJbnQzMnRvRmxvYXQzMihkYXRhLCA0ICogaSArIDApICogMiAtIDE7XHJcbiAgICAgICAgcGljay5jb2xvciA9IGNvbnZlcnRJbnQzMnRvQ29sb3IoZGF0YSwgNCAqIGkgKyAxKTtcclxuICAgICAgICBwaWNrLnRleHR1cmVVViA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgICBwaWNrLnRleHR1cmVVVi5zZXQoY29udmVydEludDMydG9GbG9hdDMyKGRhdGEsIDQgKiBpICsgMiksIGNvbnZlcnRJbnQzMnRvRmxvYXQzMihkYXRhLCA0ICogaSArIDMpKTtcclxuICAgICAgICBwaWNrLm10eFZpZXdUb1dvcmxkID0gbXR4Vmlld1RvV29ybGQ7XHJcblxyXG4gICAgICAgIHBpY2tlZC5wdXNoKHBpY2spO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcGlja2VkO1xyXG5cclxuICAgICAgZnVuY3Rpb24gY29udmVydEludDMydG9GbG9hdDMyKF9pbnQzMkFycmF5OiBJbnQzMkFycmF5LCBfaW5kZXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGJ1ZmZlcjogQXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XHJcbiAgICAgICAgbGV0IHZpZXc6IERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XHJcbiAgICAgICAgdmlldy5zZXRJbnQzMigwLCBfaW50MzJBcnJheVtfaW5kZXhdKTtcclxuICAgICAgICByZXR1cm4gdmlldy5nZXRGbG9hdDMyKDApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjb252ZXJ0SW50MzJ0b0NvbG9yKF9pbnQzMkFycmF5OiBJbnQzMkFycmF5LCBfaW5kZXg6IG51bWJlcik6IENvbG9yIHtcclxuICAgICAgICBsZXQgYnVmZmVyOiBBcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig0KTtcclxuICAgICAgICBsZXQgdmlldzogRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcclxuICAgICAgICB2aWV3LnNldEludDMyKDAsIF9pbnQzMkFycmF5W19pbmRleF0pO1xyXG4gICAgICAgIGxldCBjb2xvcjogQ29sb3IgPSBDb2xvci5DU1MoYHJnYigke3ZpZXcuZ2V0VWludDgoMCl9LCAke3ZpZXcuZ2V0VWludDgoMSl9LCAke3ZpZXcuZ2V0VWludDgoMil9KWAsIHZpZXcuZ2V0VWludDgoMykgLyAyNTUpO1xyXG4gICAgICAgIHJldHVybiBjb2xvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBUaGUgcmVuZGVyIGZ1bmN0aW9uIGZvciBwaWNraW5nIGEgc2luZ2xlIG5vZGUuIFxyXG4gICAgKiBBIGNhbWVyYXByb2plY3Rpb24gd2l0aCBleHRyZW1lbHkgbmFycm93IGZvY3VzIGlzIHVzZWQsIHNvIGVhY2ggcGl4ZWwgb2YgdGhlIGJ1ZmZlciB3b3VsZCBob2xkIHRoZSBzYW1lIGluZm9ybWF0aW9uIGZyb20gdGhlIG5vZGUsICBcclxuICAgICogYnV0IHRoZSBmcmFnbWVudCBzaGFkZXIgcmVuZGVycyBvbmx5IDEgcGl4ZWwgZm9yIGVhY2ggbm9kZSBpbnRvIHRoZSByZW5kZXIgYnVmZmVyLCAxc3Qgbm9kZSB0byAxc3QgcGl4ZWwsIDJuZCBub2RlIHRvIHNlY29uZCBwaXhlbCBldGMuXHJcbiAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBwaWNrKF9ub2RlOiBOb2RlLCBfY21wQ2FtZXJhOiBDb21wb25lbnRDYW1lcmEpOiB2b2lkIHsgLy8gY3JlYXRlIFRleHR1cmUgdG8gcmVuZGVyIHRvLCBpbnQtcmdiYVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxldCBjbXBNZXNoOiBDb21wb25lbnRNZXNoID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1lc2gpO1xyXG4gICAgICAgIGxldCBjbXBNYXRlcmlhbDogQ29tcG9uZW50TWF0ZXJpYWwgPSBfbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWF0ZXJpYWwpO1xyXG4gICAgICAgIGxldCBjb2F0OiBDb2F0ID0gY21wTWF0ZXJpYWwubWF0ZXJpYWwuY29hdDtcclxuICAgICAgICBsZXQgc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UgPSBjb2F0IGluc3RhbmNlb2YgQ29hdFRleHR1cmVkID8gU2hhZGVyUGlja1RleHR1cmVkIDogU2hhZGVyUGljaztcclxuXHJcbiAgICAgICAgc2hhZGVyLnVzZVByb2dyYW0oKTtcclxuICAgICAgICBjb2F0LnVzZVJlbmRlckRhdGEoc2hhZGVyLCBjbXBNYXRlcmlhbCk7XHJcbiAgICAgICAgbGV0IG10eE1lc2hUb1ZpZXc6IE1hdHJpeDR4NCA9IHRoaXMuY2FsY01lc2hUb1ZpZXcoX25vZGUsIGNtcE1lc2gubXR4V29ybGQsIF9jbXBDYW1lcmEubXR4V29ybGRUb1ZpZXcsIF9jbXBDYW1lcmEubXR4V29ybGQudHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICBsZXQgc2l6ZVVuaWZvcm1Mb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSBzaGFkZXIudW5pZm9ybXNbXCJ1X3ZjdFNpemVcIl07XHJcbiAgICAgICAgUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpLnVuaWZvcm0yZnYoc2l6ZVVuaWZvcm1Mb2NhdGlvbiwgW1JlbmRlcldlYkdMLnNpemVQaWNrLCBSZW5kZXJXZWJHTC5zaXplUGlja10pO1xyXG5cclxuICAgICAgICBsZXQgbWVzaDogTWVzaCA9IGNtcE1lc2gubWVzaDtcclxuICAgICAgICBsZXQgcmVuZGVyQnVmZmVyczogUmVuZGVyQnVmZmVycyA9IG1lc2gudXNlUmVuZGVyQnVmZmVycyhzaGFkZXIsIF9ub2RlLm10eFdvcmxkLCBtdHhNZXNoVG9WaWV3LCBSZW5kZXIuxpJwaWNrZWQubGVuZ3RoKTtcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmRyYXdFbGVtZW50cyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRSSUFOR0xFUywgcmVuZGVyQnVmZmVycy5uSW5kaWNlcywgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcblxyXG4gICAgICAgIGxldCBwaWNrOiBQaWNrID0gbmV3IFBpY2soX25vZGUpO1xyXG4gICAgICAgIFJlbmRlci7GknBpY2tlZC5wdXNoKHBpY2spO1xyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICAvL1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBwaWNrR2l6bW9zKF9naXptb3M6IENvbXBvbmVudFtdLCBfY21wQ2FtZXJhOiBDb21wb25lbnRDYW1lcmEpOiB2b2lkIHtcclxuICAgICAgY29uc3QgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuXHJcbiAgICAgIC8vIGJ1ZmZlciB0aGVzZSBpbnRvIGJvdGggc2hhZGVycyBhcyB3ZSBkb24ndCBrbm93IHdoaWNoIG9uZSB3aWxsIGJlIHVzZWQgZm9yIHRoZSBnaXptb1xyXG4gICAgICBsZXQgc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UgPSBTaGFkZXJQaWNrO1xyXG4gICAgICBzaGFkZXIudXNlUHJvZ3JhbSgpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0yZnYoc2hhZGVyLnVuaWZvcm1zW1widV92Y3RTaXplXCJdLCBbUmVuZGVyV2ViR0wuc2l6ZVBpY2ssIFJlbmRlcldlYkdMLnNpemVQaWNrXSk7XHJcbiAgICAgIHNoYWRlciA9IFNoYWRlclBpY2tUZXh0dXJlZDtcclxuICAgICAgc2hhZGVyLnVzZVByb2dyYW0oKTtcclxuICAgICAgY3JjMy51bmlmb3JtMmZ2KHNoYWRlci51bmlmb3Jtc1tcInVfdmN0U2l6ZVwiXSwgW1JlbmRlcldlYkdMLnNpemVQaWNrLCBSZW5kZXJXZWJHTC5zaXplUGlja10pO1xyXG4gICAgICBjcmMzLnVuaWZvcm1NYXRyaXgzZnYoc2hhZGVyLnVuaWZvcm1zW1widV9tdHhQaXZvdFwiXSwgZmFsc2UsIE1hdHJpeDN4My5JREVOVElUWSgpLmdldCgpKTsgLy8gb25seSBuZWVkZWQgZm9yIHRleHR1cmVkIHBpY2sgc2hhZGVyLCBidXQgZ2l6bW9zIGhhdmUgbm8gcGl2b3RcclxuXHJcbiAgICAgIEdpem1vcy5waWNrKF9naXptb3MsIF9jbXBDYW1lcmEsIFJlbmRlci7GknBpY2tlZCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1ZmZlciB0aGUgZm9nIHBhcmFtZXRlcnMgaW50byB0aGUgZm9nIHVib1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGJ1ZmZlckZvZyhfY21wRm9nOiBDb21wb25lbnRGb2cpOiB2b2lkIHtcclxuICAgICAgY29uc3QgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGRhdGE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XHJcblxyXG4gICAgICBkYXRhWzBdID0gX2NtcEZvZz8uaXNBY3RpdmUgPyAxIDogMDtcclxuICAgICAgaWYgKF9jbXBGb2cpIHtcclxuICAgICAgICBkYXRhWzFdID0gX2NtcEZvZy5uZWFyO1xyXG4gICAgICAgIGRhdGFbMl0gPSBfY21wRm9nLmZhcjtcclxuICAgICAgICBkYXRhLnNldChfY21wRm9nLmNvbG9yLmdldCgpLCA0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gYnVmZmVyIGRhdGEgdG8gYm91bmQgYnVmZmVyXHJcbiAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOSUZPUk1fQlVGRkVSLCBSZW5kZXJXZWJHTC51Ym9Gb2cpO1xyXG4gICAgICBjcmMzLmJ1ZmZlckRhdGEoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTklGT1JNX0JVRkZFUiwgZGF0YSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5TVEFUSUNfRFJBVyk7XHJcblxyXG4gICAgICAvLyBiaW5kIGJ1ZmZlciB0byBiaW5kaW5nIHBvaW50XHJcbiAgICAgIGNyYzMuYmluZEJ1ZmZlckJhc2UoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTklGT1JNX0JVRkZFUiwgVU5JRk9STV9CTE9DS1MuRk9HLkJJTkRJTkcsIFJlbmRlcldlYkdMLnVib0ZvZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWZmZXIgdGhlIGRhdGEgZnJvbSB0aGUgbGlnaHRzIGluIHRoZSBzY2VuZWdyYXBoIGludG8gdGhlIGxpZ2h0cyB1Ym9cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBidWZmZXJMaWdodHMoX2xpZ2h0czogTWFwTGlnaHRUeXBlVG9MaWdodExpc3QpOiB2b2lkIHtcclxuICAgICAgaWYgKCFSZW5kZXJXZWJHTC51Ym9MaWdodHMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIFJlbmRlcldlYkdMLnVib0xpZ2h0cyk7XHJcblxyXG4gICAgICAvLyBmaWxsIHRoZSBidWZmZXIgd2l0aCB0aGUgYW1iaWVudCBsaWdodCBjb2xvclxyXG4gICAgICBsZXQgY21wTGlnaHRzOiBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRMaWdodD4gPSBfbGlnaHRzLmdldChMaWdodEFtYmllbnQpO1xyXG4gICAgICBpZiAoY21wTGlnaHRzKSB7XHJcbiAgICAgICAgbGV0IGNsclN1bTogQ29sb3IgPSBuZXcgQ29sb3IoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgZm9yIChsZXQgY21wTGlnaHQgb2YgY21wTGlnaHRzKVxyXG4gICAgICAgICAgY2xyU3VtLmFkZChjbXBMaWdodC5saWdodC5jb2xvcik7XHJcblxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYnVmZmVyU3ViRGF0YShcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuVU5JRk9STV9CVUZGRVIsXHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC51Ym9MaWdodHNWYXJpYWJsZU9mZnNldHNbXCJ1X2FtYmllbnQudmN0Q29sb3JcIl0sIC8vIGJ5dGUgb2Zmc2V0IG9mIHRoZSBzdHJ1Y3QgTGlnaHQgXCJ1X2FtYmllbnRcIiBpbnNpZGUgdGhlIHVib1xyXG4gICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShjbHJTdW0uZ2V0KCkpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gZmlsbCB0aGUgYnVmZmVyIHdpdGggdGhlIGxpZ2h0IGRhdGEgZm9yIGVhY2ggbGlnaHQgdHlwZVxyXG4gICAgICAvLyB3ZSBhcmUgY3VycmVudGx5IGRvaW5nIGEgbWF4aW11bSBvZiA0IGNyYzMuYnVmZmVyU3ViRGF0YSgpIGNhbGxzLCBidXQgd2UgY291bGQgZG8gdGhpcyBpbiBvbmUgY2FsbFxyXG4gICAgICBidWZmZXJMaWdodHNPZlR5cGUoTGlnaHREaXJlY3Rpb25hbCwgXCJ1X25MaWdodHNEaXJlY3Rpb25hbFwiLCBcInVfZGlyZWN0aW9uYWxcIik7XHJcbiAgICAgIGJ1ZmZlckxpZ2h0c09mVHlwZShMaWdodFBvaW50LCBcInVfbkxpZ2h0c1BvaW50XCIsIFwidV9wb2ludFwiKTtcclxuICAgICAgYnVmZmVyTGlnaHRzT2ZUeXBlKExpZ2h0U3BvdCwgXCJ1X25MaWdodHNTcG90XCIsIFwidV9zcG90XCIpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gYnVmZmVyTGlnaHRzT2ZUeXBlKF90eXBlOiBUeXBlT2ZMaWdodCwgX3VuaU5hbWU6IHN0cmluZywgX3VuaVN0cnVjdDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY21wTGlnaHRzOiBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRMaWdodD4gPSBfbGlnaHRzLmdldChfdHlwZSk7XHJcblxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYnVmZmVyU3ViRGF0YShcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuVU5JRk9STV9CVUZGRVIsXHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC51Ym9MaWdodHNWYXJpYWJsZU9mZnNldHNbX3VuaU5hbWVdLCAvLyBieXRlIG9mZnNldCBvZiB0aGUgdWludCBcInVfbkxpZ2h0c0RpcmVjdGlvbmFsXCIgaW5zaWRlIHRoZSB1Ym9cclxuICAgICAgICAgIG5ldyBVaW50OEFycmF5KFtjbXBMaWdodHM/Lmxlbmd0aCA/PyAwXSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoIWNtcExpZ2h0cylcclxuICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbGlnaHREYXRhU2l6ZTogbnVtYmVyID0gNCArIDE2ICsgMTY7IC8vIHZjdENvbG9yICsgbXR4U2hhcGUgKyBtdHhTaGFwZUludmVyc2UsIGFzIGZsb2F0MzJzXHJcbiAgICAgICAgY29uc3QgbGlnaHRzRGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShjbXBMaWdodHMubGVuZ3RoICogbGlnaHREYXRhU2l6ZSk7XHJcblxyXG4gICAgICAgIGxldCBpTGlnaHQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgY21wTGlnaHQgb2YgY21wTGlnaHRzKSB7XHJcbiAgICAgICAgICBjb25zdCBsaWdodERhdGFPZmZzZXQ6IG51bWJlciA9IGlMaWdodCAqIGxpZ2h0RGF0YVNpemU7XHJcblxyXG4gICAgICAgICAgLy8gc2V0IHZjdENvbG9yXHJcbiAgICAgICAgICBsaWdodHNEYXRhLnNldChjbXBMaWdodC5saWdodC5jb2xvci5nZXQoKSwgbGlnaHREYXRhT2Zmc2V0ICsgMCk7XHJcblxyXG4gICAgICAgICAgLy8gc2V0IG10eFNoYXBlXHJcbiAgICAgICAgICBsZXQgbXR4VG90YWw6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5QUk9EVUNUKGNtcExpZ2h0Lm5vZGUubXR4V29ybGQsIGNtcExpZ2h0Lm10eFBpdm90KTtcclxuICAgICAgICAgIGlmIChfdHlwZSA9PSBMaWdodERpcmVjdGlvbmFsKSB7XHJcbiAgICAgICAgICAgIGxldCB6ZXJvOiBWZWN0b3IzID0gVmVjdG9yMy5aRVJPKCk7XHJcbiAgICAgICAgICAgIG10eFRvdGFsLnRyYW5zbGF0aW9uID0gemVybztcclxuICAgICAgICAgICAgUmVjeWNsZXIuc3RvcmUoemVybyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGlnaHRzRGF0YS5zZXQobXR4VG90YWwuZ2V0KCksIGxpZ2h0RGF0YU9mZnNldCArIDQpOyAvLyBvZmZzZXQgKyB2Y3RDb2xvclxyXG5cclxuICAgICAgICAgIC8vIHNldCBtdHhTaGFwZUludmVyc2VcclxuICAgICAgICAgIGlmIChfdHlwZSAhPSBMaWdodERpcmVjdGlvbmFsKSB7XHJcbiAgICAgICAgICAgIGxldCBtdHhJbnZlcnNlOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTRShtdHhUb3RhbCk7XHJcbiAgICAgICAgICAgIGxpZ2h0c0RhdGEuc2V0KG10eEludmVyc2UuZ2V0KCksIGxpZ2h0RGF0YU9mZnNldCArIDQgKyAxNik7IC8vIG9mZnNldCArIHZjdENvbG9yICsgbXR4U2hhcGVcclxuICAgICAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4SW52ZXJzZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4VG90YWwpO1xyXG4gICAgICAgICAgaUxpZ2h0Kys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmJ1ZmZlclN1YkRhdGEoXHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLlVOSUZPUk1fQlVGRkVSLFxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wudWJvTGlnaHRzVmFyaWFibGVPZmZzZXRzW2Ake191bmlTdHJ1Y3R9WzBdLnZjdENvbG9yYF0sIC8vIGJ5dGUgb2Zmc2V0IG9mIHRoZSBzdHJ1Y3QgTGlnaHQgYXJyYXkgaW5zaWRlIHRoZSB1Ym9cclxuICAgICAgICAgIGxpZ2h0c0RhdGFcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgZ2l2ZW4gbm9kZXMgdXNpbmcgdGhlIGdpdmVuIGNhbWVyYSBhbmQgdGhlIHBvc3QgcHJvY2VzcyBjb21wb25lbnRzIGF0dGFjaGVkIHRvIHRoZSBzYW1lIG5vZGUgYXMgdGhlIGNhbWVyYVxyXG4gICAgICogVGhlIG9wYXF1ZSBub2RlcyBhcmUgZHJhd24gZmlyc3QsIHRoZW4gc3NhbyBpcyBhcHBsaWVkLCB0aGVuIGJsb29tIGlzIGFwcGxpZWQsIHRoZW4gbm9kZXMgYWxwaGEgKHNvcnRGb3JBbHBoYSkgYXJlIGRyYXduLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRyYXdOb2Rlcyhfbm9kZXNPcGFxdWU6IEl0ZXJhYmxlPE5vZGU+LCBfbm9kZXNBbHBoYTogSXRlcmFibGU8Tm9kZT4sIF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IHZvaWQge1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgY29uc3QgY21wRm9nOiBDb21wb25lbnRGb2cgPSBfY21wQ2FtZXJhLm5vZGU/LmdldENvbXBvbmVudChDb21wb25lbnRGb2cpO1xyXG4gICAgICBjb25zdCBjbXBBbWJpZW50T2NjbHVzaW9uOiBDb21wb25lbnRBbWJpZW50T2NjbHVzaW9uID0gX2NtcENhbWVyYS5ub2RlPy5nZXRDb21wb25lbnQoQ29tcG9uZW50QW1iaWVudE9jY2x1c2lvbik7XHJcbiAgICAgIGNvbnN0IGNtcEJsb29tOiBDb21wb25lbnRCbG9vbSA9IF9jbXBDYW1lcmEubm9kZT8uZ2V0Q29tcG9uZW50KENvbXBvbmVudEJsb29tKTtcclxuXHJcbiAgICAgIFJlbmRlcldlYkdMLmJ1ZmZlckZvZyhjbXBGb2cpO1xyXG5cclxuICAgICAgLy8gb3BhcXVlIHBhc3MgXHJcbiAgICAgIC8vIFRPRE86IHRoaW5rIGFib3V0IGRpc2FibGluZyBibGVuZGluZyBmb3IgYWxsIG9wYXF1ZSBvYmplY3RzLCB0aGlzIG1pZ2h0IGltcHJvdmUgcGVyZm9ybWFuY2UgXHJcbiAgICAgIC8vIGFzIG90aGVyd2lzZSB0aGUgMyBjb2xvciBhdHRhY2htZW50cyAoY29sb3IsIHBvc2l0aW9uIGFuZCBub3JtYWxzKSBhbGwgbmVlZCB0byBiZSBibGVuZGVkXHJcbiAgICAgIGNyYzMuYmluZEZyYW1lYnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIFJlbmRlcldlYkdMLmZib01haW4pO1xyXG4gICAgICBjcmMzLmRyYXdCdWZmZXJzKGNtcEFtYmllbnRPY2NsdXNpb24/LmlzQWN0aXZlID8gLy8gb25seSB1c2UgcG9zaXRpb24gYW5kIG5vcm1hbCB0ZXh0dXJlcyBpZiBhbWJpZW50IG9jY2x1c2lvbiBpcyBhY3RpdmVcclxuICAgICAgICBbV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMl0gOlxyXG4gICAgICAgIFtXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0FUVEFDSE1FTlQwXVxyXG4gICAgICApO1xyXG4gICAgICBSZW5kZXJXZWJHTC5jbGVhcihfY21wQ2FtZXJhLmNsckJhY2tncm91bmQpO1xyXG5cclxuICAgICAgY3JjMy5kaXNhYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQkxFTkQpO1xyXG4gICAgICBmb3IgKGxldCBub2RlIG9mIF9ub2Rlc09wYXF1ZSlcclxuICAgICAgICBSZW5kZXJXZWJHTC5kcmF3Tm9kZShub2RlLCBfY21wQ2FtZXJhKTtcclxuICAgICAgY3JjMy5lbmFibGUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5CTEVORCk7XHJcblxyXG4gICAgICAvLyBhbWJpZW50IG9jY2x1c2lvbiBwYXNzXHJcbiAgICAgIGlmIChjbXBBbWJpZW50T2NjbHVzaW9uPy5pc0FjdGl2ZSlcclxuICAgICAgICBSZW5kZXJXZWJHTC5kcmF3QW1iaWVudE9jY2x1c2lvbihfY21wQ2FtZXJhLCBjbXBBbWJpZW50T2NjbHVzaW9uKTtcclxuXHJcbiAgICAgIC8vIGJsb29tIHBhc3NcclxuICAgICAgaWYgKGNtcEJsb29tPy5pc0FjdGl2ZSlcclxuICAgICAgICBSZW5kZXJXZWJHTC5kcmF3Qmxvb20oY21wQmxvb20pO1xyXG5cclxuICAgICAgLy8gdHJhbnNwYXJlbnQgcGFzcyBUT0RPOiB0aGluayBhYm91dCBkaXNhYmxpbmcgZGVwdGggd3JpdGUgZm9yIGFsbCB0cmFuc3BhcmVudCBvYmplY3RzIC0+IHRoaXMgbWlnaHQgbWFrZSBkZXB0aCBtYXNrIG9wdGlvbiBpbiBjb21wb25lbnQgcGFydGljbGUgc3lzdGVtIG9ic29sZXRlXHJcbiAgICAgIGNyYzMuYmluZEZyYW1lYnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIFJlbmRlcldlYkdMLmZib01haW4pO1xyXG4gICAgICBjcmMzLmRyYXdCdWZmZXJzKFtXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0FUVEFDSE1FTlQwXSk7XHJcblxyXG4gICAgICAvLyBjcmMzLmRlcHRoTWFzayhmYWxzZSk7XHJcbiAgICAgIGZvciAobGV0IG5vZGUgb2YgX25vZGVzQWxwaGEpXHJcbiAgICAgICAgUmVuZGVyV2ViR0wuZHJhd05vZGUobm9kZSwgX2NtcENhbWVyYSk7XHJcbiAgICAgIC8vIGNyYzMuZGVwdGhNYXNrKHRydWUpO1xyXG5cclxuICAgICAgLy8gY29weSBmcmFtZWJ1ZmZlciB0byBjYW52YXNcclxuICAgICAgY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SRUFEX0ZSQU1FQlVGRkVSLCBSZW5kZXJXZWJHTC5mYm9NYWluKTtcclxuICAgICAgY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5EUkFXX0ZSQU1FQlVGRkVSLCBSZW5kZXJXZWJHTC5mYm9UYXJnZXQpO1xyXG4gICAgICBjcmMzLmJsaXRGcmFtZWJ1ZmZlcigwLCAwLCBjcmMzLmNhbnZhcy53aWR0aCwgY3JjMy5jYW52YXMuaGVpZ2h0LCAwLCAwLCBjcmMzLmNhbnZhcy53aWR0aCwgY3JjMy5jYW52YXMuaGVpZ2h0LCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNPTE9SX0JVRkZFUl9CSVQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkRFUFRIX0JVRkZFUl9CSVQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgb2NjbHVzaW9uIG92ZXIgdGhlIGNvbG9yLWJ1ZmZlciwgdXNpbmcgdGhlIGdpdmVuIGFtYmllbnQtb2NjbHVzaW9uLWNvbXBvbmVudFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRyYXdBbWJpZW50T2NjbHVzaW9uKF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSwgX2NtcEFtYmllbnRPY2NsdXNpb246IENvbXBvbmVudEFtYmllbnRPY2NsdXNpb24pOiB2b2lkIHtcclxuICAgICAgY29uc3QgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgU2hhZGVyQW1iaWVudE9jY2x1c2lvbi51c2VQcm9ncmFtKCk7XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5iaW5kVGV4dHVyZShTaGFkZXJBbWJpZW50T2NjbHVzaW9uLCBSZW5kZXJXZWJHTC50ZXhQb3NpdGlvbiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMCwgXCJ1X3RleFBvc2l0aW9uXCIpO1xyXG4gICAgICBSZW5kZXJXZWJHTC5iaW5kVGV4dHVyZShTaGFkZXJBbWJpZW50T2NjbHVzaW9uLCBSZW5kZXJXZWJHTC50ZXhOb3JtYWwsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRTEsIFwidV90ZXhOb3JtYWxcIik7XHJcbiAgICAgIFJlbmRlcldlYkdMLmJpbmRUZXh0dXJlKFNoYWRlckFtYmllbnRPY2NsdXNpb24sIFJlbmRlcldlYkdMLnRleE5vaXNlLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkUyLCBcInVfdGV4Tm9pc2VcIik7XHJcblxyXG4gICAgICBjcmMzLnVuaWZvcm0xZihTaGFkZXJBbWJpZW50T2NjbHVzaW9uLnVuaWZvcm1zW1widV9mTmVhclwiXSwgX2NtcENhbWVyYS5nZXROZWFyKCkpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xZihTaGFkZXJBbWJpZW50T2NjbHVzaW9uLnVuaWZvcm1zW1widV9mRmFyXCJdLCBfY21wQ2FtZXJhLmdldEZhcigpKTtcclxuICAgICAgY3JjMy51bmlmb3JtMWYoU2hhZGVyQW1iaWVudE9jY2x1c2lvbi51bmlmb3Jtc1tcInVfZkJpYXNcIl0sIF9jbXBBbWJpZW50T2NjbHVzaW9uLmJpYXMpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xZihTaGFkZXJBbWJpZW50T2NjbHVzaW9uLnVuaWZvcm1zW1widV9mU2FtcGxlUmFkaXVzXCJdLCBfY21wQW1iaWVudE9jY2x1c2lvbi5zYW1wbGVSYWRpdXMpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xZihTaGFkZXJBbWJpZW50T2NjbHVzaW9uLnVuaWZvcm1zW1widV9mQXR0ZW51YXRpb25Db25zdGFudFwiXSwgX2NtcEFtYmllbnRPY2NsdXNpb24uYXR0ZW51YXRpb25Db25zdGFudCk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFmKFNoYWRlckFtYmllbnRPY2NsdXNpb24udW5pZm9ybXNbXCJ1X2ZBdHRlbnVhdGlvbkxpbmVhclwiXSwgX2NtcEFtYmllbnRPY2NsdXNpb24uYXR0ZW51YXRpb25MaW5lYXIpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xZihTaGFkZXJBbWJpZW50T2NjbHVzaW9uLnVuaWZvcm1zW1widV9mQXR0ZW51YXRpb25RdWFkcmF0aWNcIl0sIF9jbXBBbWJpZW50T2NjbHVzaW9uLmF0dGVudWF0aW9uUXVhZHJhdGljKTtcclxuICAgICAgY3JjMy51bmlmb3JtMmYoU2hhZGVyQW1iaWVudE9jY2x1c2lvbi51bmlmb3Jtc1tcInVfdmN0UmVzb2x1dGlvblwiXSwgUmVuZGVyV2ViR0wuZ2V0Q2FudmFzKCkud2lkdGgsIFJlbmRlcldlYkdMLmdldENhbnZhcygpLmhlaWdodCk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTNmdihTaGFkZXJBbWJpZW50T2NjbHVzaW9uLnVuaWZvcm1zW1widV92Y3RDYW1lcmFcIl0sIF9jbXBDYW1lcmEubXR4V29ybGQudHJhbnNsYXRpb24uZ2V0KCkpO1xyXG5cclxuICAgICAgY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgUmVuZGVyV2ViR0wuZmJvUG9zdCk7XHJcbiAgICAgIGNyYzMuZnJhbWVidWZmZXJUZXh0dXJlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhDb2xvciwgMCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLnNldEJsZW5kTW9kZShCTEVORC5TVUJUUkFDVElWRSk7XHJcbiAgICAgIGNyYzMuZHJhd0FycmF5cyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRSSUFOR0xFUywgMCwgMyk7XHJcbiAgICAgIFJlbmRlcldlYkdMLnNldEJsZW5kTW9kZShCTEVORC5UUkFOU1BBUkVOVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgYmxvb20tZWZmZWN0IG92ZXIgdGhlIGNvbG9yLWJ1ZmZlciwgdXNpbmcgdGhlIGdpdmVuIGJsb29tLWNvbXBvbmVudFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRyYXdCbG9vbShfY21wQmxvb206IENvbXBvbmVudEJsb29tKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIFNoYWRlckJsb29tLnVzZVByb2dyYW0oKTtcclxuXHJcbiAgICAgIC8vIGV4dHJhY3QgYnJpZ2h0IGNvbG9ycywgY291bGQgbW92ZSB0aGlzIHRvIG1haW4gcmVuZGVyIHBhc3Mgc28gdGhhdCBpbmRpdmlkdWFsIG9iamVjdHMgY2FuIGJlIGV4ZW1wdCBmcm9tIGJsb29tXHJcbiAgICAgIGNyYzMuYmluZEZyYW1lYnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIFJlbmRlcldlYkdMLmZib1Bvc3QpO1xyXG4gICAgICBjcmMzLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ09MT1JfQVRUQUNITUVOVDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgUmVuZGVyV2ViR0wudGV4Qmxvb21TYW1wbGVzWzBdLCAwKTtcclxuICAgICAgUmVuZGVyV2ViR0wuY2xlYXIoKTtcclxuXHJcbiAgICAgIFJlbmRlcldlYkdMLmJpbmRUZXh0dXJlKFNoYWRlckJsb29tLCBSZW5kZXJXZWJHTC50ZXhDb2xvciwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMCwgXCJ1X3RleFNvdXJjZVwiKTtcclxuICAgICAgY3JjMy51bmlmb3JtMWYoU2hhZGVyQmxvb20udW5pZm9ybXNbXCJ1X2ZUaHJlc2hvbGRcIl0sIF9jbXBCbG9vbS50aHJlc2hvbGQpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShTaGFkZXJCbG9vbS51bmlmb3Jtc1tcInVfaU1vZGVcIl0sIDApO1xyXG4gICAgICBjcmMzLmRyYXdBcnJheXMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5UUklBTkdMRVMsIDAsIDMpO1xyXG5cclxuICAgICAgLy8gZG93bnNhbXBsZVxyXG4gICAgICBjb25zdCBpdGVyYXRpb25zOiBudW1iZXIgPSBSZW5kZXJXZWJHTC50ZXhCbG9vbVNhbXBsZXMubGVuZ3RoO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAxLCBkaXZpc29yOiBudW1iZXIgPSAyOyBpIDwgaXRlcmF0aW9uczsgaSsrLCBkaXZpc29yICo9IDIpIHtcclxuICAgICAgICBsZXQgd2lkdGg6IG51bWJlciA9IE1hdGgubWF4KE1hdGgucm91bmQoY3JjMy5jYW52YXMud2lkdGggLyBkaXZpc29yKSwgMSk7XHJcbiAgICAgICAgbGV0IGhlaWdodDogbnVtYmVyID0gTWF0aC5tYXgoTWF0aC5yb3VuZChjcmMzLmNhbnZhcy5oZWlnaHQgLyBkaXZpc29yKSwgMSk7XHJcblxyXG4gICAgICAgIGNyYzMuZnJhbWVidWZmZXJUZXh0dXJlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhCbG9vbVNhbXBsZXNbaV0sIDApO1xyXG4gICAgICAgIGNyYzMudmlld3BvcnQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIFJlbmRlcldlYkdMLmJpbmRUZXh0dXJlKFNoYWRlckJsb29tLCBSZW5kZXJXZWJHTC50ZXhCbG9vbVNhbXBsZXNbaSAtIDFdLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkUwLCBcInVfdGV4U291cmNlXCIpO1xyXG4gICAgICAgIGNyYzMudW5pZm9ybTFpKFNoYWRlckJsb29tLnVuaWZvcm1zW1widV9pTW9kZVwiXSwgMSk7XHJcbiAgICAgICAgY3JjMy51bmlmb3JtMmYoU2hhZGVyQmxvb20udW5pZm9ybXNbXCJ1X3ZjdFRleGVsXCJdLCAwLjUgLyB3aWR0aCwgMC41IC8gaGVpZ2h0KTsgLy8gaGFsZiB0ZXhlbCBzaXplXHJcbiAgICAgICAgLy8gY3JjMy51bmlmb3JtMmYoU2hhZGVyQmxvb20udW5pZm9ybXNbXCJ1X3ZjdFJlc29sdXRpb25cIl0sIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICBjcmMzLmRyYXdBcnJheXMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5UUklBTkdMRVMsIDAsIDMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5zZXRCbGVuZE1vZGUoQkxFTkQuQURESVRJVkUpO1xyXG5cclxuICAgICAgLy8gdXBzYW1wbGVcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gaXRlcmF0aW9ucyAtIDEsIGRpdmlzb3I6IG51bWJlciA9IDIgKiogKGl0ZXJhdGlvbnMgLSAyKTsgaSA+IDA7IGktLSwgZGl2aXNvciAvPSAyKSB7XHJcbiAgICAgICAgbGV0IHdpZHRoOiBudW1iZXIgPSBNYXRoLm1heChNYXRoLnJvdW5kKGNyYzMuY2FudmFzLndpZHRoIC8gZGl2aXNvciksIDEpO1xyXG4gICAgICAgIGxldCBoZWlnaHQ6IG51bWJlciA9IE1hdGgubWF4KE1hdGgucm91bmQoY3JjMy5jYW52YXMuaGVpZ2h0IC8gZGl2aXNvciksIDEpO1xyXG5cclxuICAgICAgICBjcmMzLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ09MT1JfQVRUQUNITUVOVDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgUmVuZGVyV2ViR0wudGV4Qmxvb21TYW1wbGVzW2kgLSAxXSwgMCk7XHJcbiAgICAgICAgY3JjMy52aWV3cG9ydCgwLCAwLCBNYXRoLnJvdW5kKHdpZHRoKSwgTWF0aC5yb3VuZChoZWlnaHQpKTtcclxuXHJcbiAgICAgICAgUmVuZGVyV2ViR0wuYmluZFRleHR1cmUoU2hhZGVyQmxvb20sIFJlbmRlcldlYkdMLnRleEJsb29tU2FtcGxlc1tpXSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMCwgXCJ1X3RleFNvdXJjZVwiKTtcclxuICAgICAgICBjcmMzLnVuaWZvcm0xaShTaGFkZXJCbG9vbS51bmlmb3Jtc1tcInVfaU1vZGVcIl0sIDIpO1xyXG4gICAgICAgIGNyYzMudW5pZm9ybTJmKFNoYWRlckJsb29tLnVuaWZvcm1zW1widV92Y3RUZXhlbFwiXSwgMC41IC8gd2lkdGgsIDAuNSAvIGhlaWdodCk7IC8vIGhhbGYgdGV4ZWwgc2l6ZVxyXG4gICAgICAgIC8vIGNyYzMudW5pZm9ybTJmKFNoYWRlckJsb29tLnVuaWZvcm1zW1widV92Y3RSZXNvbHV0aW9uXCJdLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgY3JjMy5kcmF3QXJyYXlzKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVFJJQU5HTEVTLCAwLCAzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3JjMy52aWV3cG9ydCgwLCAwLCBjcmMzLmNhbnZhcy53aWR0aCwgY3JjMy5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgIGNyYzMuZnJhbWVidWZmZXJUZXh0dXJlMkQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBSZW5kZXJXZWJHTC50ZXhDb2xvciwgMCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmJpbmRUZXh0dXJlKFNoYWRlckJsb29tLCBSZW5kZXJXZWJHTC50ZXhCbG9vbVNhbXBsZXNbMF0sIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRTAsIFwidV90ZXhTb3VyY2VcIik7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFpKFNoYWRlckJsb29tLnVuaWZvcm1zW1widV9pTW9kZVwiXSwgMyk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFmKFNoYWRlckJsb29tLnVuaWZvcm1zW1widV9mSW50ZW5zaXR5XCJdLCBfY21wQmxvb20uaW50ZW5zaXR5KTtcclxuICAgICAgY3JjMy51bmlmb3JtMWYoU2hhZGVyQmxvb20udW5pZm9ybXNbXCJ1X2ZIaWdobGlnaHREZXNhdHVyYXRpb25cIl0sIF9jbXBCbG9vbS5oaWdobGlnaHREZXNhdHVyYXRpb24pO1xyXG4gICAgICBjcmMzLmRyYXdBcnJheXMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5UUklBTkdMRVMsIDAsIDMpO1xyXG5cclxuICAgICAgUmVuZGVyV2ViR0wuc2V0QmxlbmRNb2RlKEJMRU5ELlRSQU5TUEFSRU5UKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXcgYSBtZXNoIGJ1ZmZlciB1c2luZyB0aGUgZ2l2ZW4gaW5mb3MgYW5kIHRoZSBjb21wbGV0ZSBwcm9qZWN0aW9uIG1hdHJpeFxyXG4gICAgKi9cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZHJhd05vZGUoX25vZGU6IE5vZGUsIF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IHZvaWQge1xyXG4gICAgICBsZXQgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IF9ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNZXNoKTtcclxuICAgICAgbGV0IGNtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCA9IF9ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNYXRlcmlhbCk7XHJcbiAgICAgIGxldCBjbXBUZXh0OiBDb21wb25lbnRUZXh0ID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudFRleHQpO1xyXG4gICAgICBsZXQgY29hdDogQ29hdCA9IGNtcE1hdGVyaWFsLm1hdGVyaWFsLmNvYXQ7XHJcbiAgICAgIGxldCBjbXBQYXJ0aWNsZVN5c3RlbTogQ29tcG9uZW50UGFydGljbGVTeXN0ZW0gPSBfbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50UGFydGljbGVTeXN0ZW0pO1xyXG4gICAgICBsZXQgZHJhd1BhcnRpY2xlczogYm9vbGVhbiA9IGNtcFBhcnRpY2xlU3lzdGVtICYmIGNtcFBhcnRpY2xlU3lzdGVtLmlzQWN0aXZlO1xyXG4gICAgICBsZXQgc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UgPSBjbXBNYXRlcmlhbC5tYXRlcmlhbC5nZXRTaGFkZXIoKTtcclxuICAgICAgaWYgKGRyYXdQYXJ0aWNsZXMpXHJcbiAgICAgICAgc2hhZGVyID0gY21wUGFydGljbGVTeXN0ZW0ucGFydGljbGVTeXN0ZW0uZ2V0U2hhZGVyRnJvbShzaGFkZXIpO1xyXG5cclxuICAgICAgc2hhZGVyLnVzZVByb2dyYW0oKTtcclxuICAgICAgY29hdC51c2VSZW5kZXJEYXRhKHNoYWRlciwgY21wTWF0ZXJpYWwpO1xyXG5cclxuICAgICAgbGV0IG10eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQgPSBjbXBNZXNoLm10eFdvcmxkO1xyXG5cclxuICAgICAgaWYgKGNtcFRleHQ/LmlzQWN0aXZlKVxyXG4gICAgICAgIG10eE1lc2hUb1dvcmxkID0gY21wVGV4dC51c2VSZW5kZXJEYXRhKG10eE1lc2hUb1dvcmxkLCBfY21wQ2FtZXJhKTtcclxuXHJcbiAgICAgIGxldCBtdHhNZXNoVG9WaWV3OiBNYXRyaXg0eDQgPSBSZW5kZXJXZWJHTC5jYWxjTWVzaFRvVmlldyhfbm9kZSwgbXR4TWVzaFRvV29ybGQsIF9jbXBDYW1lcmEubXR4V29ybGRUb1ZpZXcsIF9jbXBDYW1lcmEubXR4V29ybGQudHJhbnNsYXRpb24pO1xyXG4gICAgICBsZXQgcmVuZGVyQnVmZmVyczogUmVuZGVyQnVmZmVycyA9IGNtcE1lc2gubWVzaC51c2VSZW5kZXJCdWZmZXJzKHNoYWRlciwgbXR4TWVzaFRvV29ybGQsIG10eE1lc2hUb1ZpZXcpO1xyXG5cclxuICAgICAgaWYgKGNtcE1lc2guc2tlbGV0b24/LmlzQWN0aXZlKVxyXG4gICAgICAgIGNtcE1lc2guc2tlbGV0b24udXNlUmVuZGVyQnVmZmVyKHNoYWRlcik7XHJcblxyXG4gICAgICBsZXQgdW5pZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSBzaGFkZXIudW5pZm9ybXNbXCJ1X3ZjdENhbWVyYVwiXTtcclxuICAgICAgaWYgKHVuaWZvcm0pXHJcbiAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy51bmlmb3JtM2Z2KHVuaWZvcm0sIF9jbXBDYW1lcmEubXR4V29ybGQudHJhbnNsYXRpb24uZ2V0KCkpO1xyXG5cclxuICAgICAgdW5pZm9ybSA9IHNoYWRlci51bmlmb3Jtc1tcInVfbXR4V29ybGRUb1ZpZXdcIl07XHJcbiAgICAgIGlmICh1bmlmb3JtKVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMudW5pZm9ybU1hdHJpeDRmdih1bmlmb3JtLCBmYWxzZSwgX2NtcENhbWVyYS5tdHhXb3JsZFRvVmlldy5nZXQoKSk7XHJcblxyXG4gICAgICB1bmlmb3JtID0gc2hhZGVyLnVuaWZvcm1zW1widV9tdHhXb3JsZFRvQ2FtZXJhXCJdO1xyXG4gICAgICBpZiAodW5pZm9ybSkge1xyXG4gICAgICAgIC8vIGxldCBtdHhXb3JsZFRvQ2FtZXJhOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKF9jbXBDYW1lcmEubXR4V29ybGQpOyAvLyB0b2RvOiBvcHRpbWl6ZS9zdG9yZSBpbiBjYW1lcmFcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLnVuaWZvcm1NYXRyaXg0ZnYodW5pZm9ybSwgZmFsc2UsIF9jbXBDYW1lcmEubXR4Q2FtZXJhSW52ZXJzZS5nZXQoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVuaWZvcm0gPSBzaGFkZXIudW5pZm9ybXNbXCJ1X2ZBbHBoYUNsaXBcIl07XHJcbiAgICAgIGlmICh1bmlmb3JtKVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMudW5pZm9ybTFmKHVuaWZvcm0sIGNtcE1hdGVyaWFsLm1hdGVyaWFsLmFscGhhQ2xpcCk7XHJcblxyXG4gICAgICBpZiAoZHJhd1BhcnRpY2xlcylcclxuICAgICAgICBSZW5kZXJXZWJHTC5kcmF3UGFydGljbGVzKGNtcFBhcnRpY2xlU3lzdGVtLCBzaGFkZXIsIHJlbmRlckJ1ZmZlcnMsIF9ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRGYWNlQ2FtZXJhKSk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmRyYXdFbGVtZW50cyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRSSUFOR0xFUywgcmVuZGVyQnVmZmVycy5uSW5kaWNlcywgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBkcmF3UGFydGljbGVzKF9jbXBQYXJ0aWNsZVN5c3RlbTogQ29tcG9uZW50UGFydGljbGVTeXN0ZW0sIF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSwgX3JlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMsIF9jbXBGYWNlQ2FtZXJhOiBDb21wb25lbnRGYWNlQ2FtZXJhKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcblxyXG4gICAgICBjcmMzLmRlcHRoTWFzayhfY21wUGFydGljbGVTeXN0ZW0uZGVwdGhNYXNrKTtcclxuICAgICAgUmVuZGVyV2ViR0wuc2V0QmxlbmRNb2RlKF9jbXBQYXJ0aWNsZVN5c3RlbS5ibGVuZE1vZGUpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShfc2hhZGVyLnVuaWZvcm1zW1widV9pQmxlbmRNb2RlXCJdLCBfY21wUGFydGljbGVTeXN0ZW0uYmxlbmRNb2RlKTtcclxuICAgICAgX2NtcFBhcnRpY2xlU3lzdGVtLnVzZVJlbmRlckRhdGEoKTtcclxuXHJcbiAgICAgIGNyYzMudW5pZm9ybTFmKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2ZQYXJ0aWNsZVN5c3RlbUR1cmF0aW9uXCJdLCBfY21wUGFydGljbGVTeXN0ZW0uZHVyYXRpb24pO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xZihfc2hhZGVyLnVuaWZvcm1zW1widV9mUGFydGljbGVTeXN0ZW1TaXplXCJdLCBfY21wUGFydGljbGVTeXN0ZW0uc2l6ZSk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFmKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2ZQYXJ0aWNsZVN5c3RlbVRpbWVcIl0sIF9jbXBQYXJ0aWNsZVN5c3RlbS50aW1lKTtcclxuICAgICAgY3JjMy51bmlmb3JtMWkoX3NoYWRlci51bmlmb3Jtc1tURVhUVVJFX0xPQ0FUSU9OLlBBUlRJQ0xFLlVOSUZPUk1dLCBURVhUVVJFX0xPQ0FUSU9OLlBBUlRJQ0xFLklOREVYKTtcclxuXHJcbiAgICAgIGxldCBmYWNlQ2FtZXJhOiBib29sZWFuID0gX2NtcEZhY2VDYW1lcmEgJiYgX2NtcEZhY2VDYW1lcmEuaXNBY3RpdmU7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2JQYXJ0aWNsZVN5c3RlbUZhY2VDYW1lcmFcIl0sIGZhY2VDYW1lcmEgPyAxIDogMCk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2JQYXJ0aWNsZVN5c3RlbVJlc3RyaWN0XCJdLCBmYWNlQ2FtZXJhICYmIF9jbXBGYWNlQ2FtZXJhLnJlc3RyaWN0ID8gMSA6IDApO1xyXG5cclxuICAgICAgY3JjMy5kcmF3RWxlbWVudHNJbnN0YW5jZWQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5UUklBTkdMRVMsIF9yZW5kZXJCdWZmZXJzLm5JbmRpY2VzLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOU0lHTkVEX1NIT1JULCAwLCBfY21wUGFydGljbGVTeXN0ZW0uc2l6ZSk7XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5zZXRCbGVuZE1vZGUoQkxFTkQuVFJBTlNQQVJFTlQpO1xyXG4gICAgICBjcmMzLmRlcHRoTWFzayh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjYWxjTWVzaFRvVmlldyhfbm9kZTogTm9kZSwgX210eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQsIF9tdHhXb3JsZFRvVmlldzogTWF0cml4NHg0LCBfdGFyZ2V0PzogVmVjdG9yMyk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIC8vIFRPRE86IFRoaXMgY291bGQgYmUgYSBSZW5kZXIgZnVuY3Rpb24gYXMgaXQgZG9lcyBub3QgZG8gYW55dGhpbmcgd2l0aCBXZWJHTFxyXG4gICAgICBsZXQgY21wRmFjZUNhbWVyYTogQ29tcG9uZW50RmFjZUNhbWVyYSA9IF9ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRGYWNlQ2FtZXJhKTtcclxuICAgICAgaWYgKGNtcEZhY2VDYW1lcmEgJiYgY21wRmFjZUNhbWVyYS5pc0FjdGl2ZSkge1xyXG4gICAgICAgIGxldCBtdHhNZXNoVG9WaWV3OiBNYXRyaXg0eDQ7IC8vIG1lc2ggdG8gd29ybGQ/XHJcbiAgICAgICAgbXR4TWVzaFRvVmlldyA9IF9tdHhNZXNoVG9Xb3JsZC5jbG9uZTtcclxuICAgICAgICBtdHhNZXNoVG9WaWV3Lmxvb2tBdChfdGFyZ2V0LCBjbXBGYWNlQ2FtZXJhLnVwTG9jYWwgPyBudWxsIDogY21wRmFjZUNhbWVyYS51cCwgY21wRmFjZUNhbWVyYS5yZXN0cmljdCk7XHJcbiAgICAgICAgcmV0dXJuIE1hdHJpeDR4NC5QUk9EVUNUKF9tdHhXb3JsZFRvVmlldywgbXR4TWVzaFRvVmlldyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBNYXRyaXg0eDQuUFJPRFVDVChfbXR4V29ybGRUb1ZpZXcsIF9tdHhNZXNoVG9Xb3JsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYmluZFRleHR1cmUoX3NoYWRlcjogU2hhZGVySW50ZXJmYWNlLCBfdGV4dHVyZTogV2ViR0xUZXh0dXJlLCBfdW5pdDogbnVtYmVyLCBfdW5pZm9ybTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGNyYzMuYWN0aXZlVGV4dHVyZShfdW5pdCk7XHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBfdGV4dHVyZSk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbX3VuaWZvcm1dLCBfdW5pdCAtIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRTApO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBHaXZlcyBXZWJHTCBCdWZmZXIgdGhlIGRhdGEgZnJvbSB0aGUge0BsaW5rIFRleHR1cmV9XHJcbiAgICogQGludGVybmFsXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlckluamVjdG9yVGV4dHVyZSBleHRlbmRzIFJlbmRlckluamVjdG9yIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbiwgX2NvbnRleHQ6IENsYXNzRGVjb3JhdG9yQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJJbmplY3Rvci5pbmplY3QoX2NvbnN0cnVjdG9yLCBSZW5kZXJJbmplY3RvclRleHR1cmUpO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJkZWxldGVSZW5kZXJEYXRhXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JUZXh0dXJlLmRlbGV0ZVJlbmRlckRhdGFcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBpbmplY3RUZXh0dXJlKHRoaXM6IFRleHR1cmUsIF90ZXh0dXJlVW5pdDogbnVtYmVyID0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFMCk6IHZvaWQge1xyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgaWYgKCF0aGlzLnJlbmRlckRhdGEpXHJcbiAgICAgICAgdGhpcy5yZW5kZXJEYXRhID0gUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMVGV4dHVyZT4oY3JjMy5jcmVhdGVUZXh0dXJlKCkpOyAvLyBUT0RPOiBjaGVjayBpZiBhbGwgV2ViR0wtQ3JlYXRpb25zIGFyZSBhc3NlcnRlZFxyXG5cclxuICAgICAgY3JjMy5hY3RpdmVUZXh0dXJlKF90ZXh0dXJlVW5pdCk7XHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCB0aGlzLnJlbmRlckRhdGEpO1xyXG5cclxuICAgICAgaWYgKHRoaXMudGV4dHVyZURpcnR5KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIEFsd2F5cyBwcmVtdWx0aXBseSBhbHBoYSB3aGlsZSBsb2FkaW5nIHRleHR1cmVzXHJcbiAgICAgICAgICBjcmMzLnBpeGVsU3RvcmVpKGNyYzMuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLCB0cnVlKTtcclxuICAgICAgICAgIGNyYzMudGV4SW1hZ2UyRChcclxuICAgICAgICAgICAgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCAwLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJHQkEsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlNJR05FRF9CWVRFLFxyXG4gICAgICAgICAgICB0aGlzLnRleEltYWdlU291cmNlXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgY3JjMy5waXhlbFN0b3JlaShjcmMzLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgIHRoaXMubWlwbWFwRGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy50ZXh0dXJlRGlydHkgPSBmYWxzZTtcclxuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICAgIERlYnVnLmVycm9yKF9lcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5taXBtYXBEaXJ0eSkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5taXBtYXApIHtcclxuICAgICAgICAgIGNhc2UgTUlQTUFQLkNSSVNQOlxyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfTUFHX0ZJTFRFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5ORUFSRVNUKTtcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01JTl9GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBNSVBNQVAuTUVESVVNOlxyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfTUFHX0ZJTFRFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5ORUFSRVNUKTtcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01JTl9GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVF9NSVBNQVBfTElORUFSKTtcclxuICAgICAgICAgICAgY3JjMy5nZW5lcmF0ZU1pcG1hcChXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgTUlQTUFQLkJMVVJSWTpcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01BR19GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTElORUFSKTtcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01JTl9GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTElORUFSX01JUE1BUF9MSU5FQVIpO1xyXG4gICAgICAgICAgICBjcmMzLmdlbmVyYXRlTWlwbWFwKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBNSVBNQVAuU01PT1RIOlxyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfTUFHX0ZJTFRFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5MSU5FQVIpO1xyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfTUlOX0ZJTFRFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5MSU5FQVIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5taXBtYXBEaXJ0eSA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy53cmFwRGlydHkpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMud3JhcCkge1xyXG4gICAgICAgICAgY2FzZSBXUkFQLlJFUEVBVDpcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX1dSQVBfUywgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SRVBFQVQpO1xyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfV1JBUF9ULCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJFUEVBVCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBXUkFQLkNMQU1QOlxyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfV1JBUF9TLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNMQU1QX1RPX0VER0UpO1xyXG4gICAgICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfV1JBUF9ULCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNMQU1QX1RPX0VER0UpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgV1JBUC5NSVJST1I6XHJcbiAgICAgICAgICAgIGNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9XUkFQX1MsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTUlSUk9SRURfUkVQRUFUKTtcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX1dSQVBfVCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5NSVJST1JFRF9SRVBFQVQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMud3JhcERpcnR5ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRlbGV0ZVJlbmRlckRhdGEodGhpczogVGV4dHVyZSk6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMucmVuZGVyRGF0YSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgY3JjMy5iaW5kVGV4dHVyZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICAgICBjcmMzLmRlbGV0ZVRleHR1cmUodGhpcy5yZW5kZXJEYXRhKTtcclxuICAgICAgdGhpcy5yZW5kZXJEYXRhID0gbnVsbDtcclxuICAgICAgdGhpcy50ZXh0dXJlRGlydHkgPSB0cnVlO1xyXG4gICAgICB0aGlzLm1pcG1hcERpcnR5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy53cmFwRGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBleHBvcnQgY29uc3QgZW51bSBFVkVOVF9QSFlTSUNTIHtcclxuICAgIFRSSUdHRVJfRU5URVIgPSBcIlRyaWdnZXJFbnRlcmVkQ29sbGlzaW9uXCIsXHJcbiAgICBUUklHR0VSX0VYSVQgPSBcIlRyaWdnZXJMZWZ0Q29sbGlzaW9uXCIsXHJcbiAgICBDT0xMSVNJT05fRU5URVIgPSBcIkNvbGxpZGVyRW50ZXJlZENvbGxpc2lvblwiLFxyXG4gICAgQ09MTElTSU9OX0VYSVQgPSBcIkNvbGxpZGVyTGVmdENvbGxpc2lvblwiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTcGVjaWFsIHR5cGUgb2Yge0BsaW5rIEV2ZW50fSBmb3IgcGh5c2ljcy5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRXZlbnRQaHlzaWNzIGV4dGVuZHMgRXZlbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnRSaWdpZGJvZHkgdGhhdCBjb2xsaWRlZCB3aXRoIHRoaXMgQ29tcG9uZW50UmlnaWRib2R5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbXBSaWdpZGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5vcm1hbCBpbXB1bHNlIGJldHdlZW4gdGhlIHR3byBjb2xsaWRpbmcgb2JqZWN0cy4gTm9ybWFsIHJlcHJlc2VudHMgdGhlIGRlZmF1bHQgaW1wdWxzZS5cclxuICAgICAqIEltcHVsc2UgaXMgb25seSBoYXBwZW5pbmcgb24gQ09MTElTSU9OX0VOVEVSLCBzbyB0aGVyZSBpcyBubyBpbXB1bHNlIG9uIGV4aXQgbm9yIG9uIHRyaWdnZXJzLlxyXG4gICAgICogVXNlIHRoZSB2ZWxvY2l0eSBvZiB0aGUgY21wUmlnaWRib2R5IHRvIGRldGVybWluZSB0aGUgaW50ZW5zaXR5IG9mIHRoZSBFVkVOVCBpbnN0ZWFkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbm9ybWFsSW1wdWxzZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHRhbmdlbnRJbXB1bHNlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYmlub21hbEltcHVsc2U6IG51bWJlcjtcclxuICAgIC8qKiBUaGUgcG9pbnQgd2hlcmUgdGhlIGNvbGxpc2lvbi90cmlnZ2VyaW5nIGluaXRpYWxseSBoYXBwZW5lZC4gVGhlIGNvbGxpc2lvbiBwb2ludCBleGlzdHMgb25seSBvbiBDT0xMSVNJT05fRU5URVIgLyBUUklHR0VSX0VOVEVSLiAqL1xyXG4gICAgcHVibGljIGNvbGxpc2lvblBvaW50OiBWZWN0b3IzO1xyXG4gICAgLyoqIFRoZSBub3JtYWwgdmVjdG9yIG9mIHRoZSBjb2xsaXNpb24uIE9ubHkgZXhpc3Rpbmcgb24gQ09MTElTSU9OX0VOVEVSICovXHJcbiAgICBwdWJsaWMgY29sbGlzaW9uTm9ybWFsOiBWZWN0b3IzO1xyXG5cclxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGV2ZW50IGN1c3RvbWl6ZWQgZm9yIHBoeXNpY3MuIEhvbGRpbmcgaW5mb3JtYXRpb25zIGFib3V0IGltcHVsc2VzLiBDb2xsaXNpb24gcG9pbnQgYW5kIHRoZSBib2R5IHRoYXQgaXMgY29sbGlkaW5nICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3R5cGU6IEVWRU5UX1BIWVNJQ1MsIF9oaXRSaWdpZGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keSwgX25vcm1hbEltcHVsc2U6IG51bWJlciwgX3RhbmdlbnRJbXB1bHNlOiBudW1iZXIsIF9iaW5vcm1hbEltcHVsc2U6IG51bWJlciwgX2NvbGxpc2lvblBvaW50OiBWZWN0b3IzID0gbnVsbCwgX2NvbGxpc2lvbk5vcm1hbDogVmVjdG9yMyA9IG51bGwpIHtcclxuICAgICAgc3VwZXIoX3R5cGUpO1xyXG4gICAgICB0aGlzLmNtcFJpZ2lkYm9keSA9IF9oaXRSaWdpZGJvZHk7XHJcbiAgICAgIHRoaXMubm9ybWFsSW1wdWxzZSA9IF9ub3JtYWxJbXB1bHNlO1xyXG4gICAgICB0aGlzLnRhbmdlbnRJbXB1bHNlID0gX3RhbmdlbnRJbXB1bHNlO1xyXG4gICAgICB0aGlzLmJpbm9tYWxJbXB1bHNlID0gX2Jpbm9ybWFsSW1wdWxzZTtcclxuICAgICAgdGhpcy5jb2xsaXNpb25Qb2ludCA9IF9jb2xsaXNpb25Qb2ludDtcclxuICAgICAgdGhpcy5jb2xsaXNpb25Ob3JtYWwgPSBfY29sbGlzaW9uTm9ybWFsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHcm91cHMgdG8gcGxhY2UgYSBub2RlIGluLCBub3QgZXZlcnkgZ3JvdXAgc2hvdWxkIGNvbGxpZGUgd2l0aCBldmVyeSBncm91cC4gVXNlIGEgTWFzayBpbiB0byBleGNsdWRlIGNvbGxpc2lvbnNcclxuICAqL1xyXG4gIGV4cG9ydCBlbnVtIENPTExJU0lPTl9HUk9VUCB7IC8vVE9ETyBHaXZlIGEgcG9zc2libGl0aHkgdG8gc2V0IHdoaWNoIGxheWVyIGNvbGxpZGVzIHdpdGggd2hpY2gsIENvbGxpc2lvbk1hdHJpeD9cclxuICAgIERFRkFVTFQgPSAxLFxyXG4gICAgR1JPVVBfMSA9IDIsXHJcbiAgICBHUk9VUF8yID0gNCxcclxuICAgIEdST1VQXzMgPSA4LFxyXG4gICAgR1JPVVBfNCA9IDE2LFxyXG4gICAgR1JPVVBfNSA9IDMyXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIERlZmluZXMgdGhlIHR5cGUgb2YgdGhlIHJpZ2lkYm9keSB3aGljaCBkZXRlcm1pbmVzIHRoZSB3YXkgaXQgaW50ZXJhY3RzIHdpdGggdGhlIHBoeXNpY2FsIGFuZCB0aGUgdmlzdWFsIHdvcmxkXHJcbiAgKi9cclxuICBleHBvcnQgZW51bSBCT0RZX1RZUEUge1xyXG4gICAgLyoqIFRoZSBib2R5IGlnbm9yZXMgdGhlIGhpZXJhcmNoeSBvZiB0aGUgcmVuZGVyIGdyYXBoLCBpcyBjb21wbGV0ZWx5IGNvbnRyb2xsZWQgIGJ5IHBoeXNpY3MgYW5kIHRha2VzIGl0cyBub2RlIHdpdGggaXQgICovXHJcbiAgICBEWU5BTUlDLCAvLyA9IE9JTU8uUmlnaWRCb2R5VHlwZS5EWU5BTUlDLFxyXG4gICAgLyoqIFRoZSBib2R5IGlnbm9yZXMgdGhlIGhpZXJhcmNoeSBvZiB0aGUgcmVuZGVyIGdyYXBoLCBpcyBjb21wbGV0ZWx5IGltbW92ZWJsZSBhbmQga2VlcHMgaXRzIG5vZGUgZnJvbSBtb3ZpbmcgICovXHJcbiAgICBTVEFUSUMsIC8vID0gT0lNTy5SaWdpZEJvZHlUeXBlLlNUQVRJQyxcclxuICAgIC8qKiBUaGUgYm9keSBpcyBjb250cm9sbGVkIGJ5IGl0cyBub2RlIGFuZCBtb3ZlcyB3aXRoIGl0LCB3aGlsZSBpdCBpbXBhY3RzIHRoZSBwaHlzaWNhbCB3b3JsZCBlLmcuIGJ5IGNvbGxpc2lvbnMgKi9cclxuICAgIEtJTkVNQVRJQyAvLyA9IE9JTU8uUmlnaWRCb2R5VHlwZS5LSU5FTUFUSUNcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogRGlmZmVyZW50IHR5cGVzIG9mIGNvbGxpZGVyIHNoYXBlcywgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBpbiBzY2FsaW5nIEJPWCA9IFZlY3RvcjMobGVuZ3RoLCBoZWlnaHQsIGRlcHRoKSxcclxuICAqIFNQSEVSRSA9IFZlY3RvcjMoZGlhbWV0ZXIsIHgsIHgpLCBDQVBTVUxFID0gVmVjdG9yMyhkaWFtZXRlciwgaGVpZ2h0LCB4KSwgQ1lMSU5ERVIgPSBWZWN0b3IzKGRpYW1ldGVyLCBoZWlnaHQsIHgpLFxyXG4gICogQ09ORSA9IFZlY3RvcihkaWFtZXRlciwgaGVpZ2h0LCB4KSwgUFlSQU1JRCA9IFZlY3RvcjMobGVuZ3RoLCBoZWlnaHQsIGRlcHRoKTsgeCA9PSB1bnVzZWQuXHJcbiAgKiBDT05WRVggPSBDb21wb25lbnRNZXNoIG5lZWRzIHRvIGJlIGF2YWlsYWJsZSBpbiB0aGUgUkIgUHJvcGVydHkgY29udmV4TWVzaCwgdGhlIHBvaW50cyBvZiB0aGF0IGNvbXBvbmVudCBhcmUgdXNlZCB0byBjcmVhdGUgYSBjb2xsaWRlciB0aGF0IG1hdGNoZXMsXHJcbiAgKiB0aGUgY2xvc2VzdCBwb3NzaWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGF0IGZvcm0sIGluIGZvcm0gb2YgYSBodWxsLiBDb252ZXggaXMgZXhwZXJpbWVudGFsIGFuZCBjYW4gcHJvZHVjZSB1bmV4cGVjdGVkIGJlaGF2aW91ciB3aGVuIHZlcnRpY2VzXHJcbiAgKiBhcmUgdG9vIGNsb3NlIHRvIG9uZSBhbm90aGVyIGFuZCB0aGUgZ2l2ZW4gdmVydGljZXMgZG8gbm90IGZvcm0gYSBpbiBpdHNlbGYgY2xvc2VkIHNoYXBlIGFuZCBoYXZpbmcgYSBnZW51cyBvZiAwIChubyBob2xlcykuIFZlcnRpY2VzIGluIHRoZSBDb21wb25lbnRNZXNoIGNhbiBiZSBzY2FsZWQgZGlmZmVyZW50bHkgXHJcbiAgKiBmb3IgdGV4dHVyaW5nL25vcm1hbCBvciBvdGhlciByZWFzb25zLCBzbyB0aGUgY29sbGlkZXIgbWlnaHQgYmUgb2ZmIGNvbXBhcmVkIHRvIHRoZSB2aXN1YWwgc2hhcGUsIHRoaXMgY2FuIGJlIGNvcnJlY3RlZCBieSBjaGFuZ2luZyB0aGUgcGl2b3Qgc2NhbGUgb2YgdGhlIENvbXBvbmVudFJpZ2lkYm9keS4gIFxyXG4gICovXHJcbiAgZXhwb3J0IGVudW0gQ09MTElERVJfVFlQRSB7XHJcbiAgICBDVUJFLFxyXG4gICAgU1BIRVJFLFxyXG4gICAgQ0FQU1VMRSxcclxuICAgIENZTElOREVSLFxyXG4gICAgQ09ORSxcclxuICAgIFBZUkFNSUQsXHJcbiAgICBDT05WRVhcclxuICB9XHJcblxyXG4gIC8qKiBEaXNwbGF5aW5nIGRpZmZlcmVudCB0eXBlcyBvZiBkZWJ1ZyBpbmZvcm1hdGlvbiBhYm91dCBkaWZmZXJlbnQgcGh5c2ljIGZlYXR1cmVzLiBEZWZhdWx0ID0gSk9JTlRTX0FORF9DT0xMSURFUi4gKi9cclxuICBleHBvcnQgZW51bSBQSFlTSUNTX0RFQlVHTU9ERSB7XHJcbiAgICBOT05FLFxyXG4gICAgQ09MTElERVJTLFxyXG4gICAgSk9JTlRTX0FORF9DT0xMSURFUixcclxuICAgIEJPVU5ESU5HX0JPWEVTLFxyXG4gICAgQ09OVEFDVFMsXHJcbiAgICBQSFlTSUNfT0JKRUNUU19PTkxZXHJcbiAgfVxyXG5cclxuICAvKiogSW5mbyBhYm91dCBSYXljYXN0cyBzaG90IGZyb20gdGhlIHBoeXNpY3Mgc3lzdGVtLiAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSYXlIaXRJbmZvIGltcGxlbWVudHMgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyBoaXQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaGl0RGlzdGFuY2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBoaXRQb2ludDogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgcHVibGljIHJpZ2lkYm9keUNvbXBvbmVudDogQ29tcG9uZW50UmlnaWRib2R5O1xyXG4gICAgcHVibGljIGhpdE5vcm1hbDogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgcHVibGljIHJheUVuZDogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgcHVibGljIHJheU9yaWdpbjogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgdGhpcy5yZWN5Y2xlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuaGl0ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaGl0RGlzdGFuY2UgPSAwO1xyXG4gICAgICB0aGlzLmhpdFBvaW50LnJlY3ljbGUoKTtcclxuICAgICAgdGhpcy5yaWdpZGJvZHlDb21wb25lbnQgPSBudWxsO1xyXG4gICAgICB0aGlzLmhpdE5vcm1hbC5yZWN5Y2xlKCk7XHJcbiAgICAgIHRoaXMucmF5T3JpZ2luLnJlY3ljbGUoKTtcclxuICAgICAgdGhpcy5yYXlFbmQucmVjeWNsZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIEdlbmVyYWwgc2V0dGluZ3MgZm9yIHRoZSBwaHlzaWMgc2ltdWxhdGlvbiBhbmQgdGhlIGRlYnVnIG9mIGl0LiAqL1xyXG4gIGV4cG9ydCBjbGFzcyBQaHlzaWNzU2V0dGluZ3Mge1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfZGVmYXVsdENvbGxpc2lvbkdyb3VwOiBudW1iZXIsIF9kZWZhdWx0Q29sbGlzaW9uTWFzazogbnVtYmVyKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgT0lNTyA9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgdGhpcy5kZWZhdWx0Q29sbGlzaW9uR3JvdXAgPSBfZGVmYXVsdENvbGxpc2lvbkdyb3VwO1xyXG4gICAgICB0aGlzLmRlZmF1bHRDb2xsaXNpb25NYXNrID0gX2RlZmF1bHRDb2xsaXNpb25NYXNrO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDaGFuZ2UgaWYgcmlnaWRib2RpZXMgYXJlIGFibGUgdG8gc2xlZXAgKGRvbid0IGJlIGNvbnNpZGVyZWQgaW4gcGh5c2ljYWwgY2FsY3VsYXRpb25zKSB3aGVuIHRoZWlyIG1vdmVtZW50IGlzIGJlbG93IGEgdGhyZXNob2xkLiBEZWFjdGl2YXRpb24gaXMgZGVjcmVhc2luZyBwZXJmb3JtYW5jZSBmb3IgbWlub3IgYWR2YW50YWdlIGluIHByZWNpc2lvbi4gKi9cclxuICAgIHB1YmxpYyBnZXQgZGlzYWJsZVNsZWVwaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLmRpc2FibGVTbGVlcGluZztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZGlzYWJsZVNsZWVwaW5nKF92YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICBPSU1PLlNldHRpbmcuZGlzYWJsZVNsZWVwaW5nID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqIFNsZWVwaW5nIFRocmVzaG9sZCBmb3IgTW92ZW1lbnQgVmVsb2N0aXkuICovXHJcbiAgICBwdWJsaWMgZ2V0IHNsZWVwaW5nVmVsb2NpdHlUaHJlc2hvbGQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE9JTU8uU2V0dGluZy5zbGVlcGluZ1ZlbG9jaXR5VGhyZXNob2xkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzbGVlcGluZ1ZlbG9jaXR5VGhyZXNob2xkKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIE9JTU8uU2V0dGluZy5zbGVlcGluZ1ZlbG9jaXR5VGhyZXNob2xkID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBTbGVlcGluZyBUaHJlc2hvbGQgZm9yIFJvdGF0aW9uIFZlbG9jaXR5LiAqL1xyXG4gICAgcHVibGljIGdldCBzbGVlcGluZ0FuZ3VsYXJWZWxvY2l0eVRocmVzaG9sZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLnNsZWVwaW5nQW5ndWxhclZlbG9jaXR5VGhyZXNob2xkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzbGVlcGluZ0FuZ3VsYXJWZWxvY2l0eVRocmVzaG9sZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBPSU1PLlNldHRpbmcuc2xlZXBpbmdBbmd1bGFyVmVsb2NpdHlUaHJlc2hvbGQgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRocmVzaG9sZCBob3cgbG9uZyB0aGUgUmlnaWRib2R5IG11c3QgYmUgYmVsb3cvYWJvdmUgdGhlIHRocmVzaG9sZCB0byBjb3VudCBhcyBzbGVlcGluZy4gKi9cclxuICAgIHB1YmxpYyBnZXQgc2xlZXBpbmdUaW1lVGhyZXNob2xkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuc2xlZXBpbmdUaW1lVGhyZXNob2xkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzbGVlcGluZ1RpbWVUaHJlc2hvbGQoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgT0lNTy5TZXR0aW5nLnNsZWVwaW5nVGltZVRocmVzaG9sZCA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogRXJyb3IgdGhyZXNob2xkLiBEZWZhdWx0IGlzIDAuMDUuIFRoZSBoaWdoZXIgdGhlIG1vcmUgbGlrZWx5IGNvbGxpc2lvbnMgZ2V0IGRldGVjdGVkIGJlZm9yZSBhY3R1YWwgaW1wYWN0IGF0IGhpZ2ggc3BlZWRzIGJ1dCBpdCdzIHZpc3VhbGx5IGxlc3MgYWNjdXJhdGUuICovXHJcbiAgICBwdWJsaWMgZ2V0IGRlZmF1bHRDb2xsaXNpb25NYXJnaW4oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE9JTU8uU2V0dGluZy5kZWZhdWx0R0pLTWFyZ2luO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBkZWZhdWx0Q29sbGlzaW9uTWFyZ2luKF90aGlja25lc3M6IG51bWJlcikge1xyXG4gICAgICBPSU1PLlNldHRpbmcuZGVmYXVsdEdKS01hcmdpbiA9IF90aGlja25lc3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBkZWZhdWx0IGFwcGxpZWQgZnJpY3Rpb24gYmV0d2VlbiB0d28gcmlnaWRib2RpZXMgd2l0aCB0aGUgZGVmYXVsdCB2YWx1ZS4gSG93IG11Y2ggdmVsb2NpdHkgaXMgc2xvd2VkIGRvd24gd2hlbiBtb3ZpbmcgYWNjcm9zcyB0aGlzIHN1cmZhY2UuICovXHJcbiAgICBwdWJsaWMgZ2V0IGRlZmF1bHRGcmljdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLmRlZmF1bHRGcmljdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZGVmYXVsdEZyaWN0aW9uKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0RnJpY3Rpb24gPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEJvdW5jaW5lc3Mgb2YgcmlnaWRib2RpZXMuIEhvdyBtdWNoIG9mIHRoZSBpbXBhY3QgaXMgcmVzdGl0dXRlZC4gKi9cclxuICAgIHB1YmxpYyBnZXQgZGVmYXVsdFJlc3RpdHV0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuZGVmYXVsdFJlc3RpdHV0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBkZWZhdWx0UmVzdGl0dXRpb24oX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgT0lNTy5TZXR0aW5nLmRlZmF1bHRSZXN0aXR1dGlvbiA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogR3JvdXBzIHRoZSBkZWZhdWx0IHJpZ2lkYm9keSB3aWxsIGNvbGxpZGUgd2l0aC4gU2V0IGl0IGxpa2U6IChQSFlTSUNTX0dST1VQLkRFRkFVTFQgfCBQSFlTSUNTX0dST1VQLkdST1VQXzEgfCBQSFlTSUNTX0dST1VQLkdST1VQXzIgfCBQSFlTSUNTX0dST1VQLkdST1VQXzMpIFxyXG4gICAgICogdG8gY29sbGlkZSB3aXRoIG11bHRpcGxlIGdyb3Vwcy4gRGVmYXVsdCBpcyBjb2xsaXNpb24gd2l0aCBldmVyeXRoaW5nIGJ1dCB0cmlnZ2Vycy5cclxuICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGRlZmF1bHRDb2xsaXNpb25NYXNrKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuZGVmYXVsdENvbGxpc2lvbk1hc2s7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRlZmF1bHRDb2xsaXNpb25NYXNrKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0Q29sbGlzaW9uTWFzayA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogVGhlIGdyb3VwIHRoYXQgdGhpcyByaWdpZGJvZHkgYmVsb25ncyB0by4gRGVmYXVsdCBpcyB0aGUgREVGQVVMVCBHcm91cCB3aGljaCBtZWFucyBpdHMganVzdCBhIG5vcm1hbCBSaWdpZGJvZHkgbm90IGEgdHJpZ2dlciBub3IgYW55dGhpbmcgc3BlY2lhbC4gKi9cclxuICAgIHB1YmxpYyBnZXQgZGVmYXVsdENvbGxpc2lvbkdyb3VwKCk6IENPTExJU0lPTl9HUk9VUCB7XHJcbiAgICAgIHJldHVybiA8Q09MTElTSU9OX0dST1VQPk9JTU8uU2V0dGluZy5kZWZhdWx0Q29sbGlzaW9uR3JvdXA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRlZmF1bHRDb2xsaXNpb25Hcm91cChfdmFsdWU6IENPTExJU0lPTl9HUk9VUCkge1xyXG4gICAgICBPSU1PLlNldHRpbmcuZGVmYXVsdENvbGxpc2lvbkdyb3VwID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDaGFuZ2UgdGhlIHR5cGUgb2Ygam9pbnQgc29sdmVyIGFsZ29yaXRobS4gRGVmYXVsdCBJdGVyYXRpdmUgPT0gMCwgaXMgZmFzdGVyIGJ1dCBsZXNzIHN0YWJsZS4gRGlyZWN0ID09IDEsIHNsb3cgYnV0IG1vcmUgc3RhYmxlLCByZWNvbW1lbmRlZCBmb3IgY29tcGxleCBqb2ludCB3b3JrLiBDaGFuZ2UgdGhpcyBzZXR0aW5nIG9ubHkgYXQgdGhlIHN0YXJ0IG9mIHlvdXIgZ2FtZS4gKi9cclxuICAgIHB1YmxpYyBnZXQgZGVmYXVsdENvbnN0cmFpbnRTb2x2ZXJUeXBlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuZGVmYXVsdEpvaW50Q29uc3RyYWludFNvbHZlclR5cGU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRlZmF1bHRDb25zdHJhaW50U29sdmVyVHlwZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBPSU1PLlNldHRpbmcuZGVmYXVsdEpvaW50Q29uc3RyYWludFNvbHZlclR5cGUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBjb3JyZWN0aW9uIGFsZ29yaXRobSB1c2VkIHRvIGNvcnJlY3QgcGh5c2ljcyBjYWxjdWxhdGlvbnMuIENoYW5nZSB0aGlzIG9ubHkgYXQgdGhlIGJlZ2lubmluZyBvZiB5b3VyIGdhbWUuIEVhY2ggaGFzIGRpZmZlcmVudCBhcHByb2FjaGVzLCBzbyBpZiB5b3UgaGF2ZSBwcm9ibGVtcyB0ZXN0IGFub3RoZXJcclxuICAgICAqICBEZWZhdWx0IDAgPSBCYXVtZ2FydGUgKGZhc3QgYnV0IGxlc3MgY29ycmVjdCBpbmR1Y2VzIHNvbWUgZW5lcmd5IGVycm9ycyksIDEgPSBTcGxpdC1JbXB1bHNlIChmYXN0IGFuZCBubyBlbmdlcnkgZXJyb3JzLCBidXQgbW9yZSBpbmFjY3VyYXRlIGZvciBqb2ludHMpLCAyID0gTm9uLWxpbmVhciBHYXVzcyBTZWlkZWwgKHNsb3dlc3QgYnV0IG1vc3QgYWNjdXJhdGUpKi9cclxuICAgIHB1YmxpYyBnZXQgZGVmYXVsdENvcnJlY3Rpb25BbGdvcml0aG0oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE9JTU8uU2V0dGluZy5kZWZhdWx0Sm9pbnRQb3NpdGlvbkNvcnJlY3Rpb25BbGdvcml0aG07XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRlZmF1bHRDb3JyZWN0aW9uQWxnb3JpdGhtKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0Sm9pbnRQb3NpdGlvbkNvcnJlY3Rpb25BbGdvcml0aG0gPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBwcmVjaXNpb24gb2YgdGhlIHNpbXVsYXRpb24gaW4gZm9ybSBvZiBudW1iZXIgb2YgaXRlcmF0aW9ucyB0aGUgc2ltdWxhdGlvbnMgcnVucyB0aHJvdWdoIHVudGlsIGl0IGFjY2VwdHMgdGhlIHJlc3VsdC5cclxuICAgICAqICAxMCBEZWZhdWx0IC0gSGlnaGVyIG1lYW5zIG1vcmUgcHJlY2lzaW9uIGJ1dCByZXN1bHRzIGluIGEgcGVyZm9ybWFuY2UgZGVjcmVhc2UuIFRoaXMgaGVscHMgZXNwZWNpYWxseSB3aXRoIGpvaW50cyxcclxuICAgICAqIGJ1dCBhbHNvIHRoZSBnZW5lcmFsIHN0YWJpbGl0eSBvZiB0aGUgc2ltdWxhdGlvbiBkdWUgdG8gc2ltdWxhdGlvbiBzdGVwcyBiZWluZyByZWNoZWNrZWQgbXVsdGlwbGUgdGltZXMgYmVmb3JlIGJlaW5nIHNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBzb2x2ZXJJdGVyYXRpb25zKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBQaHlzaWNzLmFjdGl2ZUluc3RhbmNlLmdldE9pbW9Xb3JsZCgpLmdldE51bVBvc2l0aW9uSXRlcmF0aW9ucygpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzb2x2ZXJJdGVyYXRpb25zKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIFBoeXNpY3MuYWN0aXZlSW5zdGFuY2UuZ2V0T2ltb1dvcmxkKCkuc2V0TnVtUG9zaXRpb25JdGVyYXRpb25zKF92YWx1ZSk7XHJcbiAgICAgIFBoeXNpY3MuYWN0aXZlSW5zdGFuY2UuZ2V0T2ltb1dvcmxkKCkuc2V0TnVtVmVsb2NpdHlJdGVyYXRpb25zKF92YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICAgKiBBY3RzIGFzIHRoZSBwaHlzaWNhbCByZXByZXNlbnRhdGlvbiBvZiBhIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28ge0BsaW5rIE5vZGV9J3MuXHJcbiAgICAgKiBUaGUgdHlwZSBvZiBjb25uY2V0aW9uIGlzIGRlZmluZWQgYnkgdGhlIHN1YmNsYXNzZXMgbGlrZSBwcmlzbWF0aWMgam9pbnQsIGN5bGluZGVyIGpvaW50IGV0Yy5cclxuICAgICAqIEEgUmlnaWRib2R5IG9uIHRoZSB7QGxpbmsgTm9kZX0gdGhhdCB0aGlzIGNvbXBvbmVudCBpcyBhZGRlZCB0byBpcyBuZWVkZWQuIFNldHRpbmcgdGhlIGNvbm5lY3RlZFJpZ2lkYm9keSBhbmRcclxuICAgICAqIGluaXRpYWxpemluZyB0aGUgY29ubmVjdGlvbiBjcmVhdGVzIGEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZW0uIFRoaXMgZGlmZmVycyBmcm9tIGEgY29ubmVjdGlvbiB0aHJvdWdoIGhpZXJhcmNoeVxyXG4gICAgICogaW4gdGhlIG5vZGUgc3RydWN0dXJlIG9mIGZ1ZGdlLiBKb2ludHMgY2FuIGhhdmUgZGlmZmVyZW50IERPRidzIChEZWdyZWVzIE9mIEZyZWVkb20pLCAxIEF4aXMgdGhhdCBjYW4gZWl0aGVyIHR3aXN0IG9yIHN3aW5nIGlzIGEgZGVncmVlIG9mIGZyZWVkb20uXHJcbiAgICAgKiBBIGpvaW50IHR5cGljYWxseSBjb25zaXN0cyBvZiBhIG1vdG9yIHRoYXQgbGltaXRzIG1vdmVtZW50L3JvdGF0aW9uIG9yIGlzIGFjdGl2bHkgdHJ5aW5nIHRvIG1vdmUgdG8gYSBsaW1pdC4gQW5kIGEgc3ByaW5nIHdoaWNoIGRlZmluZXMgdGhlIHJpZ2lkaXR5LlxyXG4gICAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUgMjAyMFxyXG4gICAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEpvaW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIC8qKiByZWZlcnMgYmFjayB0byB0aGlzIGNsYXNzIGZyb20gYW55IHN1YmNsYXNzIGUuZy4gaW4gb3JkZXIgdG8gZmluZCBjb21wYXRpYmxlIG90aGVyIHJlc291cmNlcyovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGJhc2VDbGFzczogdHlwZW9mIEpvaW50ID0gSm9pbnQ7XHJcbiAgICAvKiogbGlzdCBvZiBhbGwgdGhlIHN1YmNsYXNzZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MsIGlmIHRoZXkgcmVnaXN0ZXJlZCBwcm9wZXJseSovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHN1YmNsYXNzZXM6IHR5cGVvZiBKb2ludFtdID0gW107XHJcblxyXG4gICAgLy8gcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudEpvaW50KTtcclxuICAgIHByb3RlY3RlZCBzaW5nbGV0b246IGJvb2xlYW4gPSBmYWxzZTsgLy9NdWx0aXBsZSBqb2ludHMgY2FuIGJlIGF0dGFjaGVkIHRvIG9uZSBOb2RlXHJcblxyXG4gICAgI2lkQm9keUFuY2hvcjogbnVtYmVyID0gMDtcclxuICAgICNpZEJvZHlUaWVkOiBudW1iZXIgPSAwO1xyXG4gICAgI2JvZHlBbmNob3I6IENvbXBvbmVudFJpZ2lkYm9keTtcclxuICAgICNib2R5VGllZDogQ29tcG9uZW50UmlnaWRib2R5O1xyXG5cclxuICAgICNjb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICNhbmNob3I6IE9JTU8uVmVjMztcclxuICAgICNpbnRlcm5hbENvbGxpc2lvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICNicmVha0ZvcmNlOiBudW1iZXIgPSAwO1xyXG4gICAgI2JyZWFrVG9ycXVlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNuYW1lQ2hpbGRUb0Nvbm5lY3Q6IHN0cmluZztcclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgam9pbnQ6IE9JTU8uSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY29uZmlnOiBPSU1PLkpvaW50Q29uZmlnO1xyXG5cclxuICAgIC8qKiBDcmVhdGUgYSBqb2ludCBjb25uZWN0aW9uIGJldHdlZW4gdGhlIHR3byBnaXZlbiBSaWdpZGJvZHlDb21wb25lbnRzLiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9ib2R5QW5jaG9yOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYm9keVRpZWQ6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5ib2R5QW5jaG9yID0gX2JvZHlBbmNob3I7XHJcbiAgICAgIHRoaXMuYm9keVRpZWQgPSBfYm9keVRpZWQ7XHJcblxyXG4gICAgICAvKlxyXG4gICAgICAgIFRlbGwgdGhlIHBoeXNpY3MgdGhhdCB0aGVyZSBpcyBhIG5ldyBqb2ludCBhbmQgb24gdGhlIHBoeXNpY3Mgc3RhcnQgdGhlIGFjdHVhbCBqb2ludCBpcyBmaXJzdCBjcmVhdGVkLiBWYWx1ZXMgY2FuIGJlIHNldCBidXQgdGhlXHJcbiAgICAgICAgYWN0dWFsIGNvbnN0cmFpbnQgYWluJ3QgZXhpc3RlbnQgdW50aWwgdGhlIGdhbWUgc3RhcnRzXHJcbiAgICAgICovXHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfQURELCB0aGlzLmhuZEV2ZW50KTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9SRU1PVkUsIHRoaXMuaG5kRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVnaXN0ZXJTdWJjbGFzcyhfc3ViY2xhc3M6IHR5cGVvZiBKb2ludCk6IG51bWJlciB7IHJldHVybiBKb2ludC5zdWJjbGFzc2VzLnB1c2goX3N1YmNsYXNzKSAtIDE7IH1cclxuXHJcbiAgICAvKiogR2V0L1NldCB0aGUgZmlyc3QgQ29tcG9uZW50UmlnaWRib2R5IG9mIHRoaXMgY29ubmVjdGlvbi4gSXQgc2hvdWxkIGFsd2F5cyBiZSB0aGUgb25lIHRoYXQgdGhpcyBjb21wb25lbnQgaXMgYXR0YWNoZWQgdG9vIGluIHRoZSBzY2VuZVRyZWUuICovXHJcbiAgICBwdWJsaWMgZ2V0IGJvZHlBbmNob3IoKTogQ29tcG9uZW50UmlnaWRib2R5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2JvZHlBbmNob3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBib2R5QW5jaG9yKF9jbXBSQjogQ29tcG9uZW50UmlnaWRib2R5KSB7XHJcbiAgICAgIHRoaXMuI2lkQm9keUFuY2hvciA9IF9jbXBSQiAhPSBudWxsID8gX2NtcFJCLmlkIDogLTE7XHJcbiAgICAgIHRoaXMuI2JvZHlBbmNob3IgPSBfY21wUkI7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldC9TZXQgdGhlIHNlY29uZCBDb21wb25lbnRSaWdpZGJvZHkgb2YgdGhpcyBjb25uZWN0aW9uLiAqL1xyXG4gICAgcHVibGljIGdldCBib2R5VGllZCgpOiBDb21wb25lbnRSaWdpZGJvZHkge1xyXG4gICAgICByZXR1cm4gdGhpcy4jYm9keVRpZWQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGJvZHlUaWVkKF9jbXBSQjogQ29tcG9uZW50UmlnaWRib2R5KSB7XHJcbiAgICAgIHRoaXMuI2lkQm9keVRpZWQgPSBfY21wUkIgIT0gbnVsbCA/IF9jbXBSQi5pZCA6IC0xO1xyXG4gICAgICB0aGlzLiNib2R5VGllZCA9IF9jbXBSQjtcclxuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgIHRoaXMuZGlydHlTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBleGFjdCBwb3NpdGlvbiB3aGVyZSB0aGUgdHdvIHtAbGluayBOb2RlfXMgYXJlIGNvbm5lY3RlZC4gV2hlbiBjaGFuZ2VkIGFmdGVyIGluaXRpYWxpemF0aW9uIHRoZSBqb2ludCBuZWVkcyB0byBiZSByZWNvbm5lY3RlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBhbmNob3IoKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLiNhbmNob3IueCwgdGhpcy4jYW5jaG9yLnksIHRoaXMuI2FuY2hvci56KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgYW5jaG9yKF92YWx1ZTogVmVjdG9yMykge1xyXG4gICAgICB0aGlzLiNhbmNob3IgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiBmb3JjZSBuZWVkZWQgdG8gYnJlYWsgdGhlIEpPSU5ULCB3aGlsZSByb3RhdGluZywgaW4gTmV3dG9uLiAwIGVxdWFscyB1bmJyZWFrYWJsZSAoZGVmYXVsdCkgXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldCBicmVha1RvcnF1ZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jYnJlYWtUb3JxdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGJyZWFrVG9ycXVlKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2JyZWFrVG9ycXVlID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LnNldEJyZWFrVG9ycXVlKHRoaXMuI2JyZWFrVG9ycXVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgZm9yY2UgbmVlZGVkIHRvIGJyZWFrIHRoZSBKT0lOVCwgaW4gTmV3dG9uLiAwIGVxdWFscyB1bmJyZWFrYWJsZSAoZGVmYXVsdCkgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYnJlYWtGb3JjZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jYnJlYWtGb3JjZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgYnJlYWtGb3JjZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNicmVha0ZvcmNlID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LnNldEJyZWFrRm9yY2UodGhpcy4jYnJlYWtGb3JjZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogSWYgdGhlIHR3byBjb25uZWN0ZWQgUmlnaWRCb2RpZXMgY29sbGlkZSB3aXRoIGVhdGggb3RoZXIuIChEZWZhdWx0ID0gZmFsc2UpXHJcbiAgICAgICogT24gYSB3ZWxkaW5nIGpvaW50IHRoZSBjb25uZWN0ZWQgYm9kaWVzIHNob3VsZCBub3QgYmUgY29sbGlkaW5nIHdpdGggZWFjaCBvdGhlcixcclxuICAgICAgKiBmb3IgYmVzdCByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgaW50ZXJuYWxDb2xsaXNpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNpbnRlcm5hbENvbGxpc2lvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgaW50ZXJuYWxDb2xsaXNpb24oX3ZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgIHRoaXMuI2ludGVybmFsQ29sbGlzaW9uID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LnNldEFsbG93Q29sbGlzaW9uKHRoaXMuI2ludGVybmFsQ29sbGlzaW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3QgYSBjaGlsZCBub2RlIHdpdGggdGhlIGdpdmVuIG5hbWUgdG8gdGhlIGpvaW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29ubmVjdENoaWxkKF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jbmFtZUNoaWxkVG9Db25uZWN0ID0gX25hbWU7XHJcbiAgICAgIGlmICghdGhpcy5ub2RlKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGxldCBjaGlsZHJlbjogTm9kZVtdID0gdGhpcy5ub2RlLmdldENoaWxkcmVuQnlOYW1lKF9uYW1lKTtcclxuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PSAxKVxyXG4gICAgICAgIHRoaXMuY29ubmVjdE5vZGUoY2hpbGRyZW4ucG9wKCkpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgRGVidWcud2FybihgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IGF0ICR7dGhpcy5ub2RlLm5hbWV9IGZhaWxzIHRvIGNvbm5lY3QgY2hpbGQgd2l0aCBub24gZXhpc3RlbnQgb3IgYW1iaWdvdXMgbmFtZSAke19uYW1lfWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ubmVjdCB0aGUgZ2l2ZW4gbm9kZSB0byB0aGUgam9pbnQuIFRpZWluZyBpdHMgcmlnaWRib2R5IHRvIHRoZSBub2RlcyByaWdpZGJvZHkgdGhpcyBjb21wb25lbnQgaXMgYXR0YWNoZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25uZWN0Tm9kZShfbm9kZTogTm9kZSk6IHZvaWQge1xyXG4gICAgICBpZiAoIV9ub2RlIHx8ICF0aGlzLm5vZGUpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgRGVidWcuZnVkZ2UoYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSBjb25uZWN0ZWQgJHt0aGlzLm5vZGUubmFtZX0gYW5kICR7X25vZGUubmFtZX1gKTtcclxuXHJcbiAgICAgIGxldCBjb25uZWN0Qm9keTogQ29tcG9uZW50UmlnaWRib2R5ID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudFJpZ2lkYm9keSk7XHJcbiAgICAgIGxldCB0aGlzQm9keTogQ29tcG9uZW50UmlnaWRib2R5ID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRSaWdpZGJvZHkpO1xyXG5cclxuICAgICAgaWYgKCFjb25uZWN0Qm9keSB8fCAhdGhpc0JvZHkpIHtcclxuICAgICAgICBEZWJ1Zy53YXJuKGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0gYXQgJHt0aGlzLm5vZGUubmFtZX0gZmFpbHMgZHVlIHRvIG1pc3NpbmcgcmlnaWRib2RpZXMgb24gJHt0aGlzLm5vZGUubmFtZX0gb3IgJHtfbm9kZS5uYW1lfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5ib2R5QW5jaG9yID0gdGhpc0JvZHk7XHJcbiAgICAgIHRoaXMuYm9keVRpZWQgPSBjb25uZWN0Qm9keTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ2hlY2sgaWYgY29ubmVjdGlvbiBpcyBkaXJ0eSwgc28gd2hlbiBlaXRoZXIgcmIgaXMgY2hhbmdlZCBkaXNjb25uZWN0IGFuZCByZWNvbm5lY3QuIEludGVybmFsbHkgdXNlZCBubyB1c2VyIGludGVyYWN0aW9uIG5lZWRlZC4gKi9cclxuICAgIHB1YmxpYyBpc0Nvbm5lY3RlZCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2Nvbm5lY3RlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemluZyBhbmQgY29ubmVjdGluZyB0aGUgdHdvIHJpZ2lkYm9kaWVzIHdpdGggdGhlIGNvbmZpZ3VyZWQgam9pbnQgcHJvcGVydGllc1xyXG4gICAgICogaXMgYXV0b21hdGljYWxseSBjYWxsZWQgYnkgdGhlIHBoeXNpY3Mgc3lzdGVtLiBObyB1c2VyIGludGVyYWN0aW9uIG5lZWRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbm5lY3QoKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLiNjb25uZWN0ZWQgPT0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodGhpcy4jaWRCb2R5QW5jaG9yID09IC0xIHx8IHRoaXMuI2lkQm9keVRpZWQgPT0gLTEpIHtcclxuICAgICAgICAgIGlmICh0aGlzLiNuYW1lQ2hpbGRUb0Nvbm5lY3QpXHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdENoaWxkKHRoaXMuI25hbWVDaGlsZFRvQ29ubmVjdCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnN0cnVjdEpvaW50KCk7XHJcbiAgICAgICAgdGhpcy4jY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFkZEpvaW50KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2Nvbm5lY3RpbmcgdGhlIHR3byByaWdpZGJvZGllcyBhbmQgcmVtb3ZpbmcgdGhlbSBmcm9tIHRoZSBwaHlzaWNzIHN5c3RlbSxcclxuICAgICAqIGlzIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IHRoZSBwaHlzaWNzIHN5c3RlbS4gTm8gdXNlciBpbnRlcmFjdGlvbiBuZWVkZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNjb25uZWN0KCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy4jY29ubmVjdGVkID09IHRydWUpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUpvaW50KCk7XHJcbiAgICAgICAgdGhpcy4jY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG9yaWdpbmFsIEpvaW50IHVzZWQgYnkgdGhlIHBoeXNpY3MgZW5naW5lLiBVc2VkIGludGVybmFsbHkgbm8gdXNlciBpbnRlcmFjdGlvbiBuZWVkZWQuXHJcbiAgICAgKiBPbmx5IHRvIGJlIHVzZWQgd2hlbiBmdW5jdGlvbmFsaXR5IHRoYXQgaXMgbm90IGFkZGVkIHdpdGhpbiBGVURHRSBpcyBuZWVkZWQuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldE9pbW9Kb2ludCgpOiBPSU1PLkpvaW50IHtcclxuICAgICAgcmV0dXJuIHRoaXMuam9pbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLiNnZXRNdXRhdG9yKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uYW5jaG9yID0gdGhpcy5hbmNob3Iuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5hbmNob3IgPSBhd2FpdCBuZXcgVmVjdG9yMygpLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmFuY2hvcik7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgdGhpcy5jb25uZWN0Q2hpbGQoX3NlcmlhbGl6YXRpb24ubmFtZUNoaWxkVG9Db25uZWN0KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgT2JqZWN0LmFzc2lnbihtdXRhdG9yLCB0aGlzLiNnZXRNdXRhdG9yKCkpO1xyXG4gICAgICBtdXRhdG9yLmFuY2hvciA9IHRoaXMuYW5jaG9yLmdldE11dGF0b3IoKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmFuY2hvcikgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5hbmNob3IgPSBuZXcgVmVjdG9yMyguLi48bnVtYmVyW10+KE9iamVjdC52YWx1ZXMoX211dGF0b3IuYW5jaG9yKSkpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuYW5jaG9yO1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci5uYW1lQ2hpbGRUb0Nvbm5lY3QpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuY29ubmVjdENoaWxkKF9tdXRhdG9yLm5hbWVDaGlsZFRvQ29ubmVjdCk7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIHRoaXMuZGVsZXRlRnJvbU11dGF0b3IoX211dGF0b3IsIHRoaXMuI2dldE11dGF0b3IoKSk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5zcHJpbmdEYW1wZXI7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5qb2ludDtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLm1vdG9yO1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogVGVsbCB0aGUgRnVkZ2VQaHlzaWNzIHN5c3RlbSB0aGF0IHRoaXMgam9pbnQgbmVlZHMgdG8gYmUgaGFuZGxlZCBpbiB0aGUgbmV4dCBmcmFtZS4gKi9cclxuICAgIHByb3RlY3RlZCBkaXJ0eVN0YXR1cygpOiB2b2lkIHtcclxuICAgICAgUGh5c2ljcy5jaGFuZ2VKb2ludFN0YXR1cyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWRkSm9pbnQoKTogdm9pZCB7XHJcbiAgICAgIFBoeXNpY3MuYWRkSm9pbnQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlbW92ZUpvaW50KCk6IHZvaWQge1xyXG4gICAgICBQaHlzaWNzLnJlbW92ZUpvaW50KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RKb2ludCguLi5fY29uZmlnUGFyYW1zOiBPYmplY3RbXSk6IHZvaWQge1xyXG4gICAgICBsZXQgcG9zQm9keUFuY2hvcjogVmVjdG9yMyA9IHRoaXMuYm9keUFuY2hvci5ub2RlLm10eFdvcmxkLnRyYW5zbGF0aW9uOyAvL1NldHRpbmcgdGhlIGFuY2hvciBwb3NpdGlvbiBsb2NhbGx5IGZyb20gdGhlIGZpcnN0IHJpZ2lkYm9keVxyXG4gICAgICBsZXQgd29ybGRBbmNob3I6IE9JTU8uVmVjMyA9IG5ldyBPSU1PLlZlYzMocG9zQm9keUFuY2hvci54ICsgdGhpcy4jYW5jaG9yLngsIHBvc0JvZHlBbmNob3IueSArIHRoaXMuI2FuY2hvci55LCBwb3NCb2R5QW5jaG9yLnogKyB0aGlzLiNhbmNob3Iueik7XHJcblxyXG4gICAgICAvLyBAdHMtaWdub3JlICAgIC8vIHVuZm9ydHVuYXRlbHksIG1ldGhvZCBpbml0IGlzIG5vdCBhIG1lbWJlciBvZiB0aGUgYmFzZSBjbGFzcyBPSU1PLkpvaW50Q29uZmlnXHJcbiAgICAgIHRoaXMuY29uZmlnLmluaXQodGhpcy4jYm9keUFuY2hvci5nZXRPaW1vUmlnaWRib2R5KCksIHRoaXMuI2JvZHlUaWVkLmdldE9pbW9SaWdpZGJvZHkoKSwgd29ybGRBbmNob3IsIC4uLl9jb25maWdQYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjb25maWd1cmVKb2ludCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5qb2ludC5zZXRCcmVha0ZvcmNlKHRoaXMuYnJlYWtGb3JjZSk7XHJcbiAgICAgIHRoaXMuam9pbnQuc2V0QnJlYWtUb3JxdWUodGhpcy5icmVha1RvcnF1ZSk7XHJcbiAgICAgIHRoaXMuam9pbnQuc2V0QWxsb3dDb2xsaXNpb24odGhpcy4jaW50ZXJuYWxDb2xsaXNpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBkZWxldGVGcm9tTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvciwgX2RlbGV0ZTogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBrZXkgaW4gX2RlbGV0ZSlcclxuICAgICAgICBkZWxldGUgX211dGF0b3Jba2V5XTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhuZEV2ZW50ID0gKF9ldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgc3dpdGNoIChfZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgRVZFTlQuQ09NUE9ORU5UX0FERDpcclxuICAgICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkRJU0NPTk5FQ1RfSk9JTlQsICgpID0+IHsgdGhpcy5kaXNjb25uZWN0KCk7IHRoaXMuZGlydHlTdGF0dXMoKTsgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVWRU5ULkNPTVBPTkVOVF9SRU1PVkU6XHJcbiAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5ESVNDT05ORUNUX0pPSU5ULCAoKSA9PiB7IHRoaXMuZGlzY29ubmVjdCgpOyB0aGlzLmRpcnR5U3RhdHVzKCk7IH0sIHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVKb2ludCgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgI2dldE11dGF0b3IgPSAoKTogTXV0YXRvciA9PiB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIG5hbWVDaGlsZFRvQ29ubmVjdDogdGhpcy4jbmFtZUNoaWxkVG9Db25uZWN0LFxyXG4gICAgICAgIGludGVybmFsQ29sbGlzaW9uOiB0aGlzLiNpbnRlcm5hbENvbGxpc2lvbixcclxuICAgICAgICBicmVha0ZvcmNlOiB0aGlzLiNicmVha0ZvcmNlLFxyXG4gICAgICAgIGJyZWFrVG9ycXVlOiB0aGlzLiNicmVha1RvcnF1ZVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH07XHJcblxyXG4gICAgI211dGF0ZSA9IChfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcImludGVybmFsQ29sbGlzaW9uXCIsIFwiYnJlYWtGb3JjZVwiLCBcImJyZWFrVG9ycXVlXCJdKTtcclxuICAgIH07XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICAgKiBCYXNlIGNsYXNzIGZvciBqb2ludHMgb3BlcmF0aW5nIHdpdGggZXhhY3RseSBvbmUgYXhpc1xyXG4gICAgICogQGF1dGhvciBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBKb2ludEF4aWFsIGV4dGVuZHMgSm9pbnQge1xyXG4gICAgcHJvdGVjdGVkIHNwcmluZ0RhbXBlcjogT0lNTy5TcHJpbmdEYW1wZXI7XHJcbiAgICBcclxuICAgIC8vSW50ZXJuYWwgVmFyaWFibGVzXHJcbiAgICAjbWF4TW90b3I6IG51bWJlciA9IDEwO1xyXG4gICAgI21pbk1vdG9yOiBudW1iZXIgPSAtMTA7XHJcbiAgICAjbW90b3JTcGVlZDogbnVtYmVyID0gMDtcclxuICAgICNheGlzOiBPSU1PLlZlYzM7XHJcbiAgICAjc3ByaW5nRnJlcXVlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgI3NwcmluZ0RhbXBpbmc6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLyoqIENyZWF0aW5nIGEgY3lsaW5kcmljYWwgam9pbnQgYmV0d2VlbiB0d28gQ29tcG9uZW50UmlnaWRib2RpZXMgbW92aW5nIG9uIG9uZSBheGlzIGFuZCByb3RhdGluZyBhcm91bmQgYW5vdGhlciBib3VuZCBvbiBhIGxvY2FsIGFuY2hvcnBvaW50LiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9ib2R5QW5jaG9yOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYm9keVRpZWQ6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9heGlzOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMCwgMSwgMCksIF9sb2NhbEFuY2hvcjogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDApKSB7XHJcbiAgICAgIHN1cGVyKF9ib2R5QW5jaG9yLCBfYm9keVRpZWQpO1xyXG4gICAgICB0aGlzLmF4aXMgPSBfYXhpcztcclxuICAgICAgdGhpcy5hbmNob3IgPSBfbG9jYWxBbmNob3I7XHJcbiAgICAgIHRoaXMubWluTW90b3IgPSAtMTA7XHJcbiAgICAgIHRoaXMubWF4TW90b3IgPSAxMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0L1NldCB0cmFuc2ZvciBvZiBmdWRnZSBwcm9wZXJ0aWVzIHRvIHRoZSBwaHlzaWNzIGVuZ2luZVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXhpcyBjb25uZWN0aW5nIHRoZSB0aGUgdHdvIHtAbGluayBOb2RlfXMgZS5nLiBWZWN0b3IzKDAsMSwwKSB0byBoYXZlIGEgdXB3YXJkIGNvbm5lY3Rpb24uXHJcbiAgICAgKiAgV2hlbiBjaGFuZ2VkIGFmdGVyIGluaXRpYWxpemF0aW9uIHRoZSBqb2ludCBuZWVkcyB0byBiZSByZWNvbm5lY3RlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBheGlzKCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy4jYXhpcy54LCB0aGlzLiNheGlzLnksIHRoaXMuI2F4aXMueik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGF4aXMoX3ZhbHVlOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMuI2F4aXMgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBVcHBlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtYXhNb3RvcigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWF4TW90b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBtYXhNb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtYXhNb3RvciA9IF92YWx1ZTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAoPE9JTU8uUHJpc21hdGljSm9pbnQ+PHVua25vd24+dGhpcy5qb2ludCkuZ2V0TGltaXRNb3RvcigpLnVwcGVyTGltaXQgPSBfdmFsdWU7XHJcbiAgICAgIH0gY2F0Y2ggKF9lOiB1bmtub3duKSB7IC8qICovIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgTG93ZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtaW5Nb3RvcigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWluTW90b3I7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IG1pbk1vdG9yKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21pbk1vdG9yID0gX3ZhbHVlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICg8T0lNTy5QcmlzbWF0aWNKb2ludD48dW5rbm93bj50aGlzLmpvaW50KS5nZXRMaW1pdE1vdG9yKCkubG93ZXJMaW1pdCA9IF92YWx1ZTtcclxuICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHsgLyogKi8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBzcHJpbmdEYW1waW5nKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdEYW1waW5nO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzcHJpbmdEYW1waW5nKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBpbmcgPSBfdmFsdWU7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgKDxPSU1PLlByaXNtYXRpY0pvaW50Pjx1bmtub3duPnRoaXMuam9pbnQpLmdldFNwcmluZ0RhbXBlcigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHsgLyogKi8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSB0YXJnZXQgc3BlZWQgb2YgdGhlIG1vdG9yIGluIG0vcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtb3RvclNwZWVkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtb3RvclNwZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgbW90b3JTcGVlZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICg8T0lNTy5QcmlzbWF0aWNKb2ludD50aGlzLmpvaW50KS5nZXRMaW1pdE1vdG9yKCkubW90b3JTcGVlZCA9IF92YWx1ZTtcclxuICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHsgLyogKi8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZyZXF1ZW5jeSBvZiB0aGUgc3ByaW5nIGluIEh6LiBBdCAwIHRoZSBzcHJpbmcgaXMgcmlnaWQsIGVxdWFscyBubyBzcHJpbmcuIFRoZSBzbWFsbGVyIHRoZSB2YWx1ZSB0aGUgbGVzcyByZXN0cmljdGl2ZSBpcyB0aGUgc3ByaW5nLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3ByaW5nRnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3k7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0ZyZXF1ZW5jeShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdGcmVxdWVuY3kgPSBfdmFsdWU7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgKDxPSU1PLlByaXNtYXRpY0pvaW50PnRoaXMuam9pbnQpLmdldFNwcmluZ0RhbXBlcigpLmZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHsgLyogKi8gfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFNhdmluZy9Mb2FkaW5nXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHRoaXMuI2dldE11dGF0b3IoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5heGlzID0gdGhpcy5heGlzLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuYXhpcyA9IGF3YWl0IG5ldyBWZWN0b3IzKCkuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uYXhpcyk7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmF4aXMpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuYXhpcyA9IG5ldyBWZWN0b3IzKC4uLjxudW1iZXJbXT4oT2JqZWN0LnZhbHVlcyhfbXV0YXRvci5heGlzKSkpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuYXhpcztcclxuICAgICAgdGhpcy4jbXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5kZWxldGVGcm9tTXV0YXRvcihfbXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IoKTtcclxuICAgICAgbXV0YXRvci5heGlzID0gdGhpcy5heGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgT2JqZWN0LmFzc2lnbihtdXRhdG9yLCB0aGlzLiNnZXRNdXRhdG9yKCkpO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNwcmluZ0RhbXBlciA9IG5ldyBPSU1PLlNwcmluZ0RhbXBlcigpLnNldFNwcmluZyh0aGlzLiNzcHJpbmdGcmVxdWVuY3ksIHRoaXMuI3NwcmluZ0RhbXBpbmcpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCh0aGlzLiNheGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAjZ2V0TXV0YXRvciA9ICgpOiBNdXRhdG9yID0+IHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgc3ByaW5nRGFtcGluZzogdGhpcy4jc3ByaW5nRGFtcGluZyxcclxuICAgICAgICBzcHJpbmdGcmVxdWVuY3k6IHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeSxcclxuICAgICAgICBtYXhNb3RvcjogdGhpcy4jbWF4TW90b3IsXHJcbiAgICAgICAgbWluTW90b3I6IHRoaXMuI21pbk1vdG9yLFxyXG4gICAgICAgIG1vdG9yU3BlZWQ6IHRoaXMuI21vdG9yU3BlZWRcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9O1xyXG5cclxuICAgICNtdXRhdGUgPSAoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkID0+IHtcclxuICAgICAgdGhpcy5tdXRhdGVCYXNlKF9tdXRhdG9yLCBbXCJzcHJpbmdEYW1waW5nXCIsIFwic3ByaW5nRnJlcXVlbmN5XCIsIFwibWF4TW90b3JcIiwgXCJtaW5Nb3RvclwiLCBcIm1vdG9yU3BlZWRcIl0pO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWcvRGVidWdUYXJnZXQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEZWJ1Zy9EZWJ1Zy50c1wiLz5cclxuLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCJUaW1lL1RpbWUudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJFdmVudC9FdmVudC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNlcmlhbGl6YXRpb24vTXV0YWJsZS50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNlcmlhbGl6YXRpb24vU2VyaWFsaXplci50c1wiLz4gXHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJHcmFwaC9Ob2RlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tcG9uZW50L0NvbXBvbmVudC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlJlY3ljbGUvUmVjeWNhYmxlQXJyYXkudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXIvUmVuZGVyV2ViR0wudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXIvUmVuZGVySW5qZWN0b3JUZXh0dXJlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiUGh5c2ljcy9IZWxwZXJzUGh5c2ljcy50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlBoeXNpY3MvSm9pbnQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJQaHlzaWNzL0pvaW50QXhpYWwudHNcIi8+XHJcblxyXG5cclxuLy9nbG9iYWwgZnVuY3Rpb25zXHJcbmZ1bmN0aW9uIGlmTnVtYmVyKF9jaGVjazogbnVtYmVyLCBfZGVmYXVsdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gdHlwZW9mIF9jaGVjayA9PSBcInVuZGVmaW5lZFwiID8gX2RlZmF1bHQgOiBfY2hlY2s7XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgQW5pbWF0aW9uU3RydWN0dXJlIHRoYXQgdGhlIEFuaW1hdGlvbiB1c2VzIHRvIG1hcCB0aGUgU2VxdWVuY2VzIHRvIHRoZSBBdHRyaWJ1dGVzLlxyXG4gICAqIEJ1aWx0IG91dCBvZiBhIHtAbGluayBOb2RlfSdzIHNlcmlhbHNhdGlvbiwgaXQgc3dhcHMgdGhlIHZhbHVlcyB3aXRoIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX1zLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uU3RydWN0dXJlIHtcclxuICAgIFthdHRyaWJ1dGU6IHN0cmluZ106IEFuaW1hdGlvblN0cnVjdHVyZVtdIHwgQW5pbWF0aW9uU3RydWN0dXJlIHwgQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yMyBleHRlbmRzIEFuaW1hdGlvblN0cnVjdHVyZSB7XHJcbiAgICB4PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB5PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB6PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yNCBleHRlbmRzIEFuaW1hdGlvblN0cnVjdHVyZSB7XHJcbiAgICB4PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB5PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB6PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB3PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvblNlcXVlbmNlTWF0cml4NHg0IGV4dGVuZHMgQW5pbWF0aW9uU3RydWN0dXJlIHtcclxuICAgIHJvdGF0aW9uPzogQW5pbWF0aW9uU2VxdWVuY2VWZWN0b3IzIHwgQW5pbWF0aW9uU2VxdWVuY2VWZWN0b3I0O1xyXG4gICAgc2NhbGU/OiBBbmltYXRpb25TZXF1ZW5jZVZlY3RvcjM7XHJcbiAgICB0cmFuc2xhdGlvbj86IEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yMztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQW4gYXNzb2NpYXRpdmUgYXJyYXkgbWFwcGluZyBuYW1lcyBvZiBsYWJsZXMgdG8gdGltZXN0YW1wcy5cclxuICAqIExhYmVscyBuZWVkIHRvIGJlIHVuaXF1ZSBwZXIgQW5pbWF0aW9uLlxyXG4gICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOVxyXG4gICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25MYWJlbCB7XHJcbiAgICBbbmFtZTogc3RyaW5nXTogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBBbmltYXRpb24gRXZlbnQgVHJpZ2dlcnNcclxuICAqIEBhdXRob3IgTHVrYXMgU2NoZXVlcmxlLCBIRlUsIDIwMTlcclxuICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uRXZlbnRUcmlnZ2VyIHtcclxuICAgIFtuYW1lOiBzdHJpbmddOiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnRlcm5hbGx5IHVzZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIHRoZSB2YXJpb3VzIGdlbmVyYXRlZCBzdHJ1Y3R1cmVzIGFuZCBldmVudHMuXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGVudW0gQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFIHtcclxuICAgIC8qKkRlZmF1bHQ6IGZvcndhcmQsIGNvbnRpbm91cyAqL1xyXG4gICAgTk9STUFMLFxyXG4gICAgLyoqYmFja3dhcmQsIGNvbnRpbm91cyAqL1xyXG4gICAgUkVWRVJTRSxcclxuICAgIC8qKmZvcndhcmQsIHJhc3RlcmVkICovXHJcbiAgICBSQVNURVJFRCxcclxuICAgIC8qKmJhY2t3YXJkLCByYXN0ZXJlZCAqL1xyXG4gICAgUkFTVEVSRURSRVZFUlNFXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIb2xkcyBkaWZmZXJlbnQgcGxheW1vZGVzIHRoZSBhbmltYXRpb24gdXNlcyB0byBwbGF5IGJhY2sgaXRzIGFuaW1hdGlvbi5cclxuICAgKiBAYXV0aG9yIEx1a2FzIFNjaGV1ZXJsZSwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gQU5JTUFUSU9OX1BMQVlNT0RFIHtcclxuICAgIC8qKlBsYXlzIGFuaW1hdGlvbiBpbiBhIGxvb3A6IGl0IHJlc3RhcnRzIG9uY2UgaXQgaGl0IHRoZSBlbmQuKi9cclxuICAgIExPT1AgPSBcImxvb3BcIixcclxuICAgIC8qKlBsYXlzIGFuaW1hdGlvbiBvbmNlIGFuZCBzdG9wcyBhdCB0aGUgbGFzdCBrZXkvZnJhbWUqL1xyXG4gICAgUExBWV9PTkNFID0gXCJwbGF5T25jZVwiLFxyXG4gICAgLyoqUGxheXMgYW5pbWF0aW9uIG9uY2UgYW5kIHN0b3BzIG9uIHRoZSBmaXJzdCBrZXkvZnJhbWUgKi9cclxuICAgIFBMQVlfT05DRV9SRVNFVCA9IFwicGxheU9uY2VSZXNldFwiLFxyXG4gICAgLyoqUGxheXMgYW5pbWF0aW9uIGxpa2UgTE9PUCwgYnV0IGJhY2t3YXJkcy4qL1xyXG4gICAgUkVWRVJTRV9MT09QID0gXCJyZXZlcnNlTG9vcFwiLFxyXG4gICAgLyoqQ2F1c2VzIHRoZSBhbmltYXRpb24gbm90IHRvIHBsYXkgYXQgYWxsLiBVc2VmdWwgZm9yIGp1bXBpbmcgdG8gdmFyaW91cyBwb3NpdGlvbnMgaW4gdGhlIGFuaW1hdGlvbiB3aXRob3V0IHByb2NlZWRpbmcgaW4gdGhlIGFuaW1hdGlvbi4qL1xyXG4gICAgU1RPUCA9IFwic3RvcFwiXHJcbiAgICAvL1RPRE86IGFkZCBhbiBJTkhFUklUIGFuZCBhIFBJTkdQT05HIG1vZGVcclxuICB9XHJcblxyXG4gIGV4cG9ydCBlbnVtIEFOSU1BVElPTl9RVUFOVElaQVRJT04ge1xyXG4gICAgLy9UT0RPOiBhZGQgYW4gaW4tZGVwdGggZGVzY3JpcHRpb24gb2Ygd2hhdCBoYXBwZW5zIHRvIHRoZSBhbmltYXRpb24gKGFuZCBldmVudHMpIGRlcGVuZGluZyBvbiB0aGUgcXVhbnRpemF0aW9uLiBVc2UgR3JhcGhzIHRvIGV4cGxhaW4uXHJcbiAgICAvKipDYWxjdWxhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgYW5pbWF0aW9uIGF0IHRoZSBleGFjdCBwb3NpdGlvbiBvZiB0aW1lLiBJZ25vcmVzIEZQUyB2YWx1ZSBvZiBhbmltYXRpb24uKi9cclxuICAgIENPTlRJTk9VUyA9IFwiY29udGlub3VzXCIsXHJcbiAgICAvKipMaW1pdHMgdGhlIGNhbGN1bGF0aW9uIG9mIHRoZSBzdGF0ZSBvZiB0aGUgYW5pbWF0aW9uIHRvIHRoZSBGUFMgdmFsdWUgb2YgdGhlIGFuaW1hdGlvbi4gU2tpcHMgZnJhbWVzIGlmIG5lZWRlZC4qL1xyXG4gICAgRElTQ1JFVEUgPSBcImRpc2NyZXRlXCIsXHJcbiAgICAvKiogQWR2YW5jZXMgdGhlIHRpbWUgZWFjaCBmcmFtZSBhY2NvcmRpbmcgdG8gdGhlIEZQUyB2YWx1ZSBvZiB0aGUgYW5pbWF0aW9uLCBpZ25vcmluZyB0aGUgYWN0dWFsIGR1cmF0aW9uIG9mIHRoZSBmcmFtZXMuIERvZXNuJ3Qgc2tpcCBhbnkgZnJhbWVzLiovXHJcbiAgICBGUkFNRVMgPSBcImZyYW1lc1wiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgYW5kIGNvbnRyb2xzIGFuZCBhbmltYXRpb24gYnkgeWllbGRpbmcgbXV0YXRvcnMgXHJcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBzdG9yZWQge0BsaW5rIEFuaW1hdGlvblN0cnVjdHVyZX0gYW5kIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX1zXHJcbiAgICogQXBwbGllZCB0byBhIHtAbGluayBOb2RlfSBkaXJlY3RseSB2aWEgc2NyaXB0IG9yIHtAbGluayBDb21wb25lbnRBbmltYXRvcn0uXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjEwMTkgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEFuaW1hdGlvbiBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGVSZXNvdXJjZSB7XHJcbiAgICAvLyAvKiogcmVmZXJzIGJhY2sgdG8gdGhpcyBjbGFzcyBmcm9tIGFueSBzdWJjbGFzcyBlLmcuIGluIG9yZGVyIHRvIGZpbmQgY29tcGF0aWJsZSBvdGhlciByZXNvdXJjZXMqL1xyXG4gICAgLy8gcHVibGljIHN0YXRpYyByZWFkb25seSBiYXNlQ2xhc3M6IHR5cGVvZiBBbmltYXRpb24gPSBBbmltYXRpb247XHJcbiAgICAvLyAvKiogbGlzdCBvZiBhbGwgdGhlIHN1YmNsYXNzZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MsIGlmIHRoZXkgcmVnaXN0ZXJlZCBwcm9wZXJseSovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHN1YmNsYXNzZXM6IHR5cGVvZiBBbmltYXRpb25bXSA9IFtdO1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IEFuaW1hdGlvbi5yZWdpc3RlclN1YmNsYXNzKEFuaW1hdGlvbik7XHJcbiAgICBwdWJsaWMgaWRSZXNvdXJjZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB0b3RhbFRpbWU6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgbGFiZWxzOiBBbmltYXRpb25MYWJlbCA9IHt9OyAvLyBhIGxhYmVsIG1hcmtzIGEgc3BlY2lmaWMgdGltZSB0byBjb252ZW5pZW50bHkganVtcCB0byB1c2luZyBhIHRleHQgaWRlbnRpZmllclxyXG4gICAgLy8gc3RlcHNQZXJTZWNvbmQ6IG51bWJlciA9IDEwO1xyXG4gICAgcHVibGljIGFuaW1hdGlvblN0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlOyAvLyBUT0RPOiBpZiBzZXQgdGhlIGNhY2hlIG5lZWRzIHRvIGJlIGFkanVzdGVkIChhbmltYXRpb25TdHJ1Y3R1cmVzUHJvY2Vzc2VkKVxyXG4gICAgcHVibGljIGV2ZW50czogQW5pbWF0aW9uRXZlbnRUcmlnZ2VyID0ge307XHJcbiAgICBwcm90ZWN0ZWQgZnJhbWVzUGVyU2Vjb25kOiBudW1iZXIgPSA2MDsgLy8gVE9ETzogY2hhbmdlIHRoaXMgYW5kIGl0cyBhY2Nlc3NvcnMgdG8gI2ZyYW1lc1BlclNlY29uZD9cclxuXHJcbiAgICAvLyBwcm9jZXNzZWQgZXZlbnRsaXN0IGFuZCBhbmltYXRpb24gc3RydWN1dHJlcyBmb3IgcGxheWJhY2suXHJcbiAgICBwcml2YXRlIGV2ZW50c1Byb2Nlc3NlZDogTWFwPEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSwgQW5pbWF0aW9uRXZlbnRUcmlnZ2VyPiA9IG5ldyBNYXA8QU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLCBBbmltYXRpb25FdmVudFRyaWdnZXI+KCk7XHJcbiAgICAjYW5pbWF0aW9uU3RydWN0dXJlc1Byb2Nlc3NlZDogTWFwPEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSwgQW5pbWF0aW9uU3RydWN0dXJlPiA9IG5ldyBNYXA8QU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLCBBbmltYXRpb25TdHJ1Y3R1cmU+KCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBBbmltYXRpb24ubmFtZSwgX2FuaW1TdHJ1Y3R1cmU6IEFuaW1hdGlvblN0cnVjdHVyZSA9IHt9LCBfZnBzOiBudW1iZXIgPSA2MCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUgPSBfYW5pbVN0cnVjdHVyZTtcclxuICAgICAgdGhpcy4jYW5pbWF0aW9uU3RydWN0dXJlc1Byb2Nlc3NlZC5zZXQoQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLk5PUk1BTCwgX2FuaW1TdHJ1Y3R1cmUpO1xyXG4gICAgICB0aGlzLmZyYW1lc1BlclNlY29uZCA9IF9mcHM7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxUaW1lKCk7XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWdpc3RlclN1YmNsYXNzKF9zdWJDbGFzczogdHlwZW9mIEFuaW1hdGlvbik6IG51bWJlciB7IHJldHVybiBBbmltYXRpb24uc3ViY2xhc3Nlcy5wdXNoKF9zdWJDbGFzcykgLSAxOyB9XHJcblxyXG4gICAgcHVibGljIGdldCBnZXRMYWJlbHMoKTogRW51bWVyYXRvciB7XHJcbiAgICAgIC8vVE9ETzogdGhpcyBhY3R1YWxseSBuZWVkcyB0ZXN0aW5nXHJcbiAgICAgIGxldCBlbjogRW51bWVyYXRvciA9IG5ldyBFbnVtZXJhdG9yKHRoaXMubGFiZWxzKTtcclxuICAgICAgcmV0dXJuIGVuO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZnBzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZyYW1lc1BlclNlY29uZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGZwcyhfZnBzOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5mcmFtZXNQZXJTZWNvbmQgPSBfZnBzO1xyXG4gICAgICB0aGlzLmV2ZW50c1Byb2Nlc3NlZC5jbGVhcigpO1xyXG4gICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoaXMgYW5pbWF0aW9ucyBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyQ2FjaGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIHtAbGluayBNdXRhdG9yfSB3aXRoIHRoZSBpbmZvcm1hdGlvbiB0byBhcHBseSB0byB0aGUge0BsaW5rIE5vZGV9IHRvIGFuaW1hdGVcclxuICAgICAqIGluIHRoZSBzdGF0ZSB0aGUgYW5pbWF0aW9uIGlzIGluIGF0IHRoZSBnaXZlbiB0aW1lLCBkaXJlY3Rpb24gYW5kIHF1YW50aXphdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U3RhdGUoX3RpbWU6IG51bWJlciwgX2RpcmVjdGlvbjogbnVtYmVyLCBfcXVhbnRpemF0aW9uOiBBTklNQVRJT05fUVVBTlRJWkFUSU9OKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtOiBNdXRhdG9yID0ge307XHJcbiAgICAgIGxldCBhbmltYXRpb25TdHJ1Y3R1cmU6IEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRTtcclxuXHJcbiAgICAgIGlmIChfcXVhbnRpemF0aW9uID09IEFOSU1BVElPTl9RVUFOVElaQVRJT04uQ09OVElOT1VTKVxyXG4gICAgICAgIGFuaW1hdGlvblN0cnVjdHVyZSA9IF9kaXJlY3Rpb24gPCAwID8gQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJFVkVSU0UgOiBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuTk9STUFMO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgYW5pbWF0aW9uU3RydWN0dXJlID0gX2RpcmVjdGlvbiA8IDAgPyBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRURSRVZFUlNFIDogQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJBU1RFUkVEO1xyXG5cclxuICAgICAgbSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JNdXRhdG9yKHRoaXMuZ2V0UHJvY2Vzc2VkQW5pbWF0aW9uU3RydWN0dXJlKGFuaW1hdGlvblN0cnVjdHVyZSksIF90aW1lKTtcclxuICAgICAgcmV0dXJuIG07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiB0aGUgbmFtZXMgb2YgdGhlIGV2ZW50cyB0aGUge0BsaW5rIENvbXBvbmVudEFuaW1hdG9yfSBuZWVkcyB0byBmaXJlIGJldHdlZW4gX21pbiBhbmQgX21heCBpbnB1dCB2YWx1ZXMuXHJcbiAgICAgKiBAcGFyYW0gX2RpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIHRoZSBhbmltYXRpb24gaXMgc3VwcG9zZWQgdG8gcnVuIGluLiA+MCA9PSBmb3J3YXJkLCAwID09IHN0b3AsIDwwID09IGJhY2t3YXJkc1xyXG4gICAgICogQHJldHVybnMgYSBsaXN0IG9mIHN0cmluZ3Mgd2l0aCB0aGUgbmFtZXMgb2YgdGhlIGN1c3RvbSBldmVudHMgdG8gZmlyZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEV2ZW50c1RvRmlyZShfbWluOiBudW1iZXIsIF9tYXg6IG51bWJlciwgX3F1YW50aXphdGlvbjogQU5JTUFUSU9OX1FVQU5USVpBVElPTiwgX2RpcmVjdGlvbjogbnVtYmVyKTogc3RyaW5nW10ge1xyXG4gICAgICBsZXQgZXZlbnRMaXN0OiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBsZXQgbWluU2VjdGlvbjogbnVtYmVyID0gTWF0aC5mbG9vcihfbWluIC8gdGhpcy50b3RhbFRpbWUpO1xyXG4gICAgICBsZXQgbWF4U2VjdGlvbjogbnVtYmVyID0gTWF0aC5mbG9vcihfbWF4IC8gdGhpcy50b3RhbFRpbWUpO1xyXG4gICAgICBfbWluID0gX21pbiAlIHRoaXMudG90YWxUaW1lO1xyXG4gICAgICBfbWF4ID0gX21heCAlIHRoaXMudG90YWxUaW1lO1xyXG5cclxuICAgICAgd2hpbGUgKG1pblNlY3Rpb24gPD0gbWF4U2VjdGlvbikge1xyXG4gICAgICAgIGxldCBldmVudFRyaWdnZXJzOiBBbmltYXRpb25FdmVudFRyaWdnZXIgPSB0aGlzLmdldENvcnJlY3RFdmVudExpc3QoX2RpcmVjdGlvbiwgX3F1YW50aXphdGlvbik7XHJcbiAgICAgICAgaWYgKG1pblNlY3Rpb24gPT0gbWF4U2VjdGlvbikge1xyXG4gICAgICAgICAgZXZlbnRMaXN0ID0gZXZlbnRMaXN0LmNvbmNhdCh0aGlzLmNoZWNrRXZlbnRzQmV0d2VlbihldmVudFRyaWdnZXJzLCBfbWluLCBfbWF4KSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGV2ZW50TGlzdCA9IGV2ZW50TGlzdC5jb25jYXQodGhpcy5jaGVja0V2ZW50c0JldHdlZW4oZXZlbnRUcmlnZ2VycywgX21pbiwgdGhpcy50b3RhbFRpbWUpKTtcclxuICAgICAgICAgIF9taW4gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtaW5TZWN0aW9uKys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBldmVudExpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGFuIEV2ZW50IHRvIHRoZSBMaXN0IG9mIGV2ZW50cy5cclxuICAgICAqIEBwYXJhbSBfbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgKG5lZWRzIHRvIGJlIHVuaXF1ZSBwZXIgQW5pbWF0aW9uKS5cclxuICAgICAqIEBwYXJhbSBfdGltZSBUaGUgdGltZXN0YW1wIG9mIHRoZSBldmVudCAoaW4gbWlsbGlzZWNvbmRzKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEV2ZW50KF9uYW1lOiBzdHJpbmcsIF90aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5ldmVudHNbX25hbWVdID0gX3RpbWU7XHJcbiAgICAgIHRoaXMuZXZlbnRzUHJvY2Vzc2VkLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBldmVudCB3aXRoIHRoZSBnaXZlbiBuYW1lIGZyb20gdGhlIGxpc3Qgb2YgZXZlbnRzLlxyXG4gICAgICogQHBhcmFtIF9uYW1lIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlbW92ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZUV2ZW50KF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW19uYW1lXTtcclxuICAgICAgdGhpcy5ldmVudHNQcm9jZXNzZWQuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAoUmUtKUNhbGN1bGF0ZSB0aGUgdG90YWwgdGltZSBvZiB0aGUgQW5pbWF0aW9uLiBDYWxjdWxhdGlvbi1oZWF2eSwgdXNlIG9ubHkgaWYgYWN0dWFsbHkgbmVlZGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FsY3VsYXRlVG90YWxUaW1lKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnRvdGFsVGltZSA9IDA7XHJcbiAgICAgIHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JUaW1lKHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlKTtcclxuICAgICAgLy8gaWYgKHRoaXMudG90YWxUaW1lID09IDApIC8vIGFuaW1hdGlvbnMgd2l0aCBvbmUga2V5ZnJhbWUgbmVlZCBhIHRvdGFsIHRpbWUgIT0gMCB0byB3b3JrXHJcbiAgICAgIC8vICAgdGhpcy50b3RhbFRpbWUgPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdGltZSB0byB1c2UgZm9yIGFuaW1hdGlvbiBzYW1wbGluZyB3aGVuIGFwcGx5aW5nIGEgcGxheW1vZGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE1vZGFsVGltZShfdGltZTogbnVtYmVyLCBfcGxheW1vZGU6IEFOSU1BVElPTl9QTEFZTU9ERSwgX3RpbWVTdG9wOiBudW1iZXIgPSBfdGltZSk6IG51bWJlciB7XHJcbiAgICAgIHN3aXRjaCAoX3BsYXltb2RlKSB7XHJcbiAgICAgICAgY2FzZSBBTklNQVRJT05fUExBWU1PREUuU1RPUDpcclxuICAgICAgICAgIC8vIHJldHVybiB0aGlzLmxvY2FsVGltZS5nZXRPZmZzZXQoKTtcclxuICAgICAgICAgIHJldHVybiBfdGltZVN0b3A7XHJcbiAgICAgICAgY2FzZSBBTklNQVRJT05fUExBWU1PREUuUExBWV9PTkNFOlxyXG4gICAgICAgICAgaWYgKF90aW1lID49IHRoaXMudG90YWxUaW1lKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbFRpbWUgLSAwLjAxOyAgICAgLy9UT0RPOiB0aGlzIG1pZ2h0IGNhdXNlIHNvbWUgaXNzdWVzXHJcbiAgICAgICAgY2FzZSBBTklNQVRJT05fUExBWU1PREUuUExBWV9PTkNFX1JFU0VUOlxyXG4gICAgICAgICAgaWYgKF90aW1lID49IHRoaXMudG90YWxUaW1lKVxyXG4gICAgICAgICAgICAvLyBUT0RPOiByZXR1cm4gX3RpbWVTdG9wIGluc3RlYWQ/XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvdGFsVGltZSArIDAuMDE7ICAgICAvL1RPRE86IHRoaXMgbWlnaHQgY2F1c2Ugc29tZSBpc3N1ZXNcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gX3RpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSBkaXJlY3Rpb24gdGhlIGFuaW1hdGlvbiBzaG91bGQgY3VycmVudGx5IGJlIHBsYXlpbmcgaW4uXHJcbiAgICAgKiBAcGFyYW0gX3RpbWUgdGhlIHRpbWUgYXQgd2hpY2ggdG8gY2FsY3VsYXRlIHRoZSBkaXJlY3Rpb25cclxuICAgICAqIEByZXR1cm5zIDEgaWYgZm9yd2FyZCwgMCBpZiBzdG9wLCAtMSBpZiBiYWNrd2FyZHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNhbGN1bGF0ZURpcmVjdGlvbihfdGltZTogbnVtYmVyLCBfcGxheW1vZGU6IEFOSU1BVElPTl9QTEFZTU9ERSk6IG51bWJlciB7XHJcbiAgICAgIHN3aXRjaCAoX3BsYXltb2RlKSB7XHJcbiAgICAgICAgY2FzZSBBTklNQVRJT05fUExBWU1PREUuU1RPUDpcclxuICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIC8vIGNhc2UgQU5JTUFUSU9OX1BMQVlNT0RFLlBJTkdQT05HOlxyXG4gICAgICAgIC8vICAgaWYgKE1hdGguZmxvb3IoX3RpbWUgLyB0aGlzLmFuaW1hdGlvbi50b3RhbFRpbWUpICUgMiA9PSAwKVxyXG4gICAgICAgIC8vICAgICByZXR1cm4gMTtcclxuICAgICAgICAvLyAgIGVsc2VcclxuICAgICAgICAvLyAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIGNhc2UgQU5JTUFUSU9OX1BMQVlNT0RFLlJFVkVSU0VfTE9PUDpcclxuICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICBjYXNlIEFOSU1BVElPTl9QTEFZTU9ERS5QTEFZX09OQ0U6XHJcbiAgICAgICAgY2FzZSBBTklNQVRJT05fUExBWU1PREUuUExBWV9PTkNFX1JFU0VUOlxyXG4gICAgICAgICAgaWYgKF90aW1lID49IHRoaXMudG90YWxUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiB0cmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHM6IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgaWRSZXNvdXJjZTogdGhpcy5pZFJlc291cmNlLFxyXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICBsYWJlbHM6IHt9LFxyXG4gICAgICAgIGV2ZW50czoge30sXHJcbiAgICAgICAgZnJhbWVzUGVyU2Vjb25kOiB0aGlzLmZyYW1lc1BlclNlY29uZFxyXG4gICAgICAgIC8vIHNwczogdGhpcy5zdGVwc1BlclNlY29uZFxyXG4gICAgICB9O1xyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIHRoaXMubGFiZWxzKSB7XHJcbiAgICAgICAgcy5sYWJlbHNbbmFtZV0gPSB0aGlzLmxhYmVsc1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIHRoaXMuZXZlbnRzKSB7XHJcbiAgICAgICAgcy5ldmVudHNbbmFtZV0gPSB0aGlzLmV2ZW50c1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICBzLmFuaW1hdGlvblN0cnVjdHVyZSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JTZXJpYWxpemF0aW9uKHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlKTtcclxuICAgICAgcmV0dXJuIHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzLCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5uYW1lID0gX3NlcmlhbGl6YXRpb24ubmFtZTtcclxuICAgICAgdGhpcy5mcmFtZXNQZXJTZWNvbmQgPSBfc2VyaWFsaXphdGlvbi5mcmFtZXNQZXJTZWNvbmQ7XHJcbiAgICAgIC8vIHRoaXMuc3RlcHNQZXJTZWNvbmQgPSBfc2VyaWFsaXphdGlvbi5zcHM7XHJcbiAgICAgIHRoaXMubGFiZWxzID0ge307XHJcbiAgICAgIGZvciAobGV0IG5hbWUgaW4gX3NlcmlhbGl6YXRpb24ubGFiZWxzKSB7XHJcbiAgICAgICAgdGhpcy5sYWJlbHNbbmFtZV0gPSBfc2VyaWFsaXphdGlvbi5sYWJlbHNbbmFtZV07XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbmFtZSBpbiBfc2VyaWFsaXphdGlvbi5ldmVudHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50c1tuYW1lXSA9IF9zZXJpYWxpemF0aW9uLmV2ZW50c1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmV2ZW50c1Byb2Nlc3NlZCA9IG5ldyBNYXA8QU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLCBBbmltYXRpb25FdmVudFRyaWdnZXI+KCk7XHJcblxyXG4gICAgICB0aGlzLmFuaW1hdGlvblN0cnVjdHVyZSA9IGF3YWl0IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JEZXNlcmlhbGl6YXRpb24oX3NlcmlhbGl6YXRpb24uYW5pbWF0aW9uU3RydWN0dXJlKTtcclxuXHJcbiAgICAgIHRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQgPSBuZXcgTWFwPEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSwgQW5pbWF0aW9uU3RydWN0dXJlPigpO1xyXG5cclxuICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbFRpbWUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAvLyAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZSgpO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci50b3RhbFRpbWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRyYXZlcnNlcyBhbiBBbmltYXRpb25TdHJ1Y3R1cmUgYW5kIHJldHVybnMgdGhlIFNlcmlhbGl6YXRpb24gb2Ygc2FpZCBTdHJ1Y3R1cmUuXHJcbiAgICAgKiBAcGFyYW0gX3N0cnVjdHVyZSBUaGUgQW5pbWF0aW9uIFN0cnVjdHVyZSBhdCB0aGUgY3VycmVudCBsZXZlbCB0byB0cmFuc2Zvcm0gaW50byB0aGUgU2VyaWFsaXphdGlvbi5cclxuICAgICAqIEByZXR1cm5zIHRoZSBmaWxsZWQgU2VyaWFsaXphdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0cmF2ZXJzZVN0cnVjdHVyZUZvclNlcmlhbGl6YXRpb24oX3N0cnVjdHVyZTogT2JqZWN0KTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gX3N0cnVjdHVyZSkge1xyXG4gICAgICAgIGxldCBzdHJ1Y3R1cmVPclNlcXVlbmNlOiBPYmplY3QgPSAoPEdlbmVyYWw+X3N0cnVjdHVyZSlbcHJvcGVydHldO1xyXG4gICAgICAgIGlmIChzdHJ1Y3R1cmVPclNlcXVlbmNlIGluc3RhbmNlb2YgQW5pbWF0aW9uU2VxdWVuY2UpXHJcbiAgICAgICAgICBzZXJpYWxpemF0aW9uW3Byb3BlcnR5XSA9IHN0cnVjdHVyZU9yU2VxdWVuY2Uuc2VyaWFsaXplKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgc2VyaWFsaXphdGlvbltwcm9wZXJ0eV0gPSB0aGlzLnRyYXZlcnNlU3RydWN0dXJlRm9yU2VyaWFsaXphdGlvbihzdHJ1Y3R1cmVPclNlcXVlbmNlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVHJhdmVyc2VzIGEgU2VyaWFsaXphdGlvbiB0byBjcmVhdGUgYSBuZXcgQW5pbWF0aW9uU3RydWN0dXJlLlxyXG4gICAgICogQHBhcmFtIF9zZXJpYWxpemF0aW9uIFRoZSBzZXJpYWxpemF0aW9uIHRvIHRyYW5zZmVyIGludG8gYW4gQW5pbWF0aW9uU3RydWN0dXJlXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgbmV3bHkgY3JlYXRlZCBBbmltYXRpb25TdHJ1Y3R1cmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgdHJhdmVyc2VTdHJ1Y3R1cmVGb3JEZXNlcmlhbGl6YXRpb24oX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPEFuaW1hdGlvblN0cnVjdHVyZT4ge1xyXG4gICAgICBsZXQgc3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbiBpbiBfc2VyaWFsaXphdGlvbikge1xyXG4gICAgICAgIGlmIChfc2VyaWFsaXphdGlvbltuXS5hbmltYXRpb25TZXF1ZW5jZSkge1xyXG4gICAgICAgICAgbGV0IGFuaW1TZXE6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgICAgICBzdHJ1Y3R1cmVbbl0gPSA8QW5pbWF0aW9uU2VxdWVuY2U+KGF3YWl0IGFuaW1TZXEuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bbl0pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3RydWN0dXJlW25dID0gYXdhaXQgdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvckRlc2VyaWFsaXphdGlvbihfc2VyaWFsaXphdGlvbltuXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzdHJ1Y3R1cmU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmRzIGFuZCByZXR1cm5zIHRoZSBsaXN0IG9mIGV2ZW50cyB0byBiZSB1c2VkIHdpdGggdGhlc2Ugc2V0dGluZ3MuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0Q29ycmVjdEV2ZW50TGlzdChfZGlyZWN0aW9uOiBudW1iZXIsIF9xdWFudGl6YXRpb246IEFOSU1BVElPTl9RVUFOVElaQVRJT04pOiBBbmltYXRpb25FdmVudFRyaWdnZXIge1xyXG4gICAgICBpZiAoX3F1YW50aXphdGlvbiAhPSBBTklNQVRJT05fUVVBTlRJWkFUSU9OLkZSQU1FUykge1xyXG4gICAgICAgIGlmIChfZGlyZWN0aW9uID49IDApIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb2Nlc3NlZEV2ZW50VHJpZ2dlcihBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuTk9STUFMKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvY2Vzc2VkRXZlbnRUcmlnZ2VyKEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SRVZFUlNFKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gPj0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvY2Vzc2VkRXZlbnRUcmlnZ2VyKEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SQVNURVJFRCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb2Nlc3NlZEV2ZW50VHJpZ2dlcihBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRURSRVZFUlNFKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYXZlcnNlcyBhbiB7QGxpbmsgQW5pbWF0aW9uU3RydWN0dXJlfSBhbmQgcmV0dXJucyBhIHtAbGluayBNdXRhdG9yfSBkZXNjcmliaW5nIHRoZSBzdGF0ZSBhdCB0aGUgZ2l2ZW4gdGltZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRyYXZlcnNlU3RydWN0dXJlRm9yTXV0YXRvcihfc3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUsIF90aW1lOiBudW1iZXIpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG5ld011dGF0b3I6IE11dGF0b3IgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbiBpbiBfc3RydWN0dXJlKSB7XHJcbiAgICAgICAgaWYgKF9zdHJ1Y3R1cmVbbl0gaW5zdGFuY2VvZiBBbmltYXRpb25TZXF1ZW5jZSkge1xyXG4gICAgICAgICAgbmV3TXV0YXRvcltuXSA9ICg8QW5pbWF0aW9uU2VxdWVuY2U+X3N0cnVjdHVyZVtuXSkuZXZhbHVhdGUoX3RpbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXdNdXRhdG9yW25dID0gdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvck11dGF0b3IoPEFuaW1hdGlvblN0cnVjdHVyZT5fc3RydWN0dXJlW25dLCBfdGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3TXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYXZlcnNlcyB0aGUgY3VycmVudCBBbmltYXRpb25TdHJjdXR1cmUgdG8gZmluZCB0aGUgdG90YWxUaW1lIG9mIHRoaXMgYW5pbWF0aW9uLlxyXG4gICAgICogQHBhcmFtIF9zdHJ1Y3R1cmUgVGhlIHN0cnVjdHVyZSB0byB0cmF2ZXJzZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRyYXZlcnNlU3RydWN0dXJlRm9yVGltZShfc3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgbiBpbiBfc3RydWN0dXJlKSB7XHJcbiAgICAgICAgaWYgKF9zdHJ1Y3R1cmVbbl0gaW5zdGFuY2VvZiBBbmltYXRpb25TZXF1ZW5jZSkge1xyXG4gICAgICAgICAgbGV0IHNlcXVlbmNlOiBBbmltYXRpb25TZXF1ZW5jZSA9IDxBbmltYXRpb25TZXF1ZW5jZT5fc3RydWN0dXJlW25dO1xyXG4gICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHNlcXVlbmNlVGltZTogbnVtYmVyID0gc2VxdWVuY2UuZ2V0S2V5KHNlcXVlbmNlLmxlbmd0aCAtIDEpLnRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxUaW1lID0gTWF0aC5tYXgoc2VxdWVuY2VUaW1lLCB0aGlzLnRvdGFsVGltZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JUaW1lKDxBbmltYXRpb25TdHJ1Y3R1cmU+X3N0cnVjdHVyZVtuXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbnN1cmVzIHRoZSBleGlzdGFuY2Ugb2YgdGhlIHJlcXVlc3RlZCB7QGxpbmsgQW5pbWF0aW9uU3RyY3V0dXJlfSBhbmQgcmV0dXJucyBpdC5cclxuICAgICAqIEBwYXJhbSBfdHlwZSB0aGUgdHlwZSBvZiB0aGUgc3RydWN0dXJlIHRvIGdldFxyXG4gICAgICogQHJldHVybnMgdGhlIHJlcXVlc3RlZCBbW0BsaW5rIEFuaW1hdGlvblN0cnVjdHVyZV1dXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0UHJvY2Vzc2VkQW5pbWF0aW9uU3RydWN0dXJlKF90eXBlOiBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUpOiBBbmltYXRpb25TdHJ1Y3R1cmUge1xyXG4gICAgICBpZiAoIXRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQuaGFzKF90eXBlKSkge1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxUaW1lKCk7XHJcbiAgICAgICAgbGV0IGFlOiBBbmltYXRpb25TdHJ1Y3R1cmUgPSB7fTtcclxuICAgICAgICBzd2l0Y2ggKF90eXBlKSB7XHJcbiAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5OT1JNQUw6XHJcbiAgICAgICAgICAgIGFlID0gdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkVWRVJTRTpcclxuICAgICAgICAgICAgYWUgPSB0aGlzLnRyYXZlcnNlU3RydWN0dXJlRm9yTmV3U3RydWN0dXJlKHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlLCB0aGlzLmNhbGN1bGF0ZVJldmVyc2VTZXF1ZW5jZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SQVNURVJFRDpcclxuICAgICAgICAgICAgYWUgPSB0aGlzLnRyYXZlcnNlU3RydWN0dXJlRm9yTmV3U3RydWN0dXJlKHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlLCB0aGlzLmNhbGN1bGF0ZVJhc3RlcmVkU2VxdWVuY2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRURSRVZFUlNFOlxyXG4gICAgICAgICAgICBhZSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JOZXdTdHJ1Y3R1cmUodGhpcy5nZXRQcm9jZXNzZWRBbmltYXRpb25TdHJ1Y3R1cmUoQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJFVkVSU0UpLCB0aGlzLmNhbGN1bGF0ZVJhc3RlcmVkU2VxdWVuY2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiNhbmltYXRpb25TdHJ1Y3R1cmVzUHJvY2Vzc2VkLnNldChfdHlwZSwgYWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiNhbmltYXRpb25TdHJ1Y3R1cmVzUHJvY2Vzc2VkLmdldChfdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbnN1cmVzIHRoZSBleGlzdGFuY2Ugb2YgdGhlIHJlcXVlc3RlZCB7QGxpbmsgQW5pbWF0aW9uRXZlbnRUcmlnZ2VyfSBhbmQgcmV0dXJucyBpdC5cclxuICAgICAqIEBwYXJhbSBfdHlwZSBUaGUgdHlwZSBvZiBBbmltYXRpb25FdmVudFRyaWdnZXIgdG8gZ2V0XHJcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVxdWVzdGVkIHtAbGluayBBbmltYXRpb25FdmVudFRyaWdnZXJ9XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0UHJvY2Vzc2VkRXZlbnRUcmlnZ2VyKF90eXBlOiBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUpOiBBbmltYXRpb25FdmVudFRyaWdnZXIge1xyXG4gICAgICBpZiAoIXRoaXMuZXZlbnRzUHJvY2Vzc2VkLmhhcyhfdHlwZSkpIHtcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsVGltZSgpO1xyXG4gICAgICAgIGxldCBldjogQW5pbWF0aW9uRXZlbnRUcmlnZ2VyID0ge307XHJcbiAgICAgICAgc3dpdGNoIChfdHlwZSkge1xyXG4gICAgICAgICAgY2FzZSBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuTk9STUFMOlxyXG4gICAgICAgICAgICBldiA9IHRoaXMuZXZlbnRzO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJFVkVSU0U6XHJcbiAgICAgICAgICAgIGV2ID0gdGhpcy5jYWxjdWxhdGVSZXZlcnNlRXZlbnRUcmlnZ2Vycyh0aGlzLmV2ZW50cyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRUQ6XHJcbiAgICAgICAgICAgIGV2ID0gdGhpcy5jYWxjdWxhdGVSYXN0ZXJlZEV2ZW50VHJpZ2dlcnModGhpcy5ldmVudHMpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJBU1RFUkVEUkVWRVJTRTpcclxuICAgICAgICAgICAgZXYgPSB0aGlzLmNhbGN1bGF0ZVJhc3RlcmVkRXZlbnRUcmlnZ2Vycyh0aGlzLmdldFByb2Nlc3NlZEV2ZW50VHJpZ2dlcihBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkVWRVJTRSkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ldmVudHNQcm9jZXNzZWQuc2V0KF90eXBlLCBldik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzUHJvY2Vzc2VkLmdldChfdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmF2ZXJzZXMgYW4gZXhpc3Rpbmcgc3RydWN0dXJlIHRvIGFwcGx5IGEgcmVjYWxjdWxhdGlvbiBmdW5jdGlvbiB0byB0aGUgQW5pbWF0aW9uU3RydWN0dXJlIHRvIHN0b3JlIGluIGEgbmV3IFN0cnVjdHVyZS5cclxuICAgICAqIEBwYXJhbSBfb2xkU3RydWN0dXJlIFRoZSBvbGQgc3RydWN0dXJlIHRvIHRyYXZlcnNlXHJcbiAgICAgKiBAcGFyYW0gX2Z1bmN0aW9uVG9Vc2UgVGhlIGZ1bmN0aW9uIHRvIHVzZSB0byByZWNhbGN1bGF0ZWQgdGhlIHN0cnVjdHVyZS5cclxuICAgICAqIEByZXR1cm5zIEEgbmV3IEFuaW1hdGlvbiBTdHJ1Y3R1cmUgd2l0aCB0aGUgcmVjYWx1bGF0ZWQgQW5pbWF0aW9uIFNlcXVlbmNlcy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0cmF2ZXJzZVN0cnVjdHVyZUZvck5ld1N0cnVjdHVyZShfb2xkU3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUsIF9mdW5jdGlvblRvVXNlOiBGdW5jdGlvbik6IEFuaW1hdGlvblN0cnVjdHVyZSB7XHJcbiAgICAgIGxldCBuZXdTdHJ1Y3R1cmU6IEFuaW1hdGlvblN0cnVjdHVyZSA9IHt9O1xyXG4gICAgICBmb3IgKGxldCBuIGluIF9vbGRTdHJ1Y3R1cmUpIHtcclxuICAgICAgICBpZiAoX29sZFN0cnVjdHVyZVtuXSBpbnN0YW5jZW9mIEFuaW1hdGlvblNlcXVlbmNlKSB7XHJcbiAgICAgICAgICBuZXdTdHJ1Y3R1cmVbbl0gPSBfZnVuY3Rpb25Ub1VzZShfb2xkU3RydWN0dXJlW25dKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmV3U3RydWN0dXJlW25dID0gdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvck5ld1N0cnVjdHVyZSg8QW5pbWF0aW9uU3RydWN0dXJlPl9vbGRTdHJ1Y3R1cmVbbl0sIF9mdW5jdGlvblRvVXNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ld1N0cnVjdHVyZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSByZXZlcnNlZCBBbmltYXRpb24gU2VxdWVuY2Ugb3V0IG9mIGEgZ2l2ZW4gU2VxdWVuY2UuXHJcbiAgICAgKiBAcGFyYW0gX3NlcXVlbmNlIFRoZSBzZXF1ZW5jZSB0byBjYWxjdWxhdGUgdGhlIG5ldyBzZXF1ZW5jZSBvdXQgb2ZcclxuICAgICAqIEByZXR1cm5zIFRoZSByZXZlcnNlZCBTZXF1ZW5jZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJldmVyc2VTZXF1ZW5jZShfc2VxdWVuY2U6IEFuaW1hdGlvblNlcXVlbmNlKTogQW5pbWF0aW9uU2VxdWVuY2Uge1xyXG4gICAgICBsZXQgc2VxOiBBbmltYXRpb25TZXF1ZW5jZSA9IG5ldyBBbmltYXRpb25TZXF1ZW5jZSgpO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgX3NlcXVlbmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IG9sZEtleTogQW5pbWF0aW9uS2V5ID0gX3NlcXVlbmNlLmdldEtleShpKTtcclxuICAgICAgICBsZXQga2V5OiBBbmltYXRpb25LZXkgPSBuZXcgQW5pbWF0aW9uS2V5KHRoaXMudG90YWxUaW1lIC0gb2xkS2V5LnRpbWUsIG9sZEtleS52YWx1ZSwgb2xkS2V5LmludGVycG9sYXRpb24sIG9sZEtleS5zbG9wZU91dCwgb2xkS2V5LnNsb3BlSW4pO1xyXG4gICAgICAgIHNlcS5hZGRLZXkoa2V5KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHJhc3RlcmVkIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX0gb3V0IG9mIGEgZ2l2ZW4gc2VxdWVuY2UuXHJcbiAgICAgKiBAcGFyYW0gX3NlcXVlbmNlIFRoZSBzZXF1ZW5jZSB0byBjYWxjdWxhdGUgdGhlIG5ldyBzZXF1ZW5jZSBvdXQgb2ZcclxuICAgICAqIEByZXR1cm5zIHRoZSByYXN0ZXJlZCBzZXF1ZW5jZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVSYXN0ZXJlZFNlcXVlbmNlKF9zZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UpOiBBbmltYXRpb25TZXF1ZW5jZSB7XHJcbiAgICAgIGxldCBzZXE6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIGxldCBmcmFtZVRpbWU6IG51bWJlciA9IDEwMDAgLyB0aGlzLmZyYW1lc1BlclNlY29uZDtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMudG90YWxUaW1lOyBpICs9IGZyYW1lVGltZSkge1xyXG4gICAgICAgIGxldCBrZXk6IEFuaW1hdGlvbktleSA9IG5ldyBBbmltYXRpb25LZXkoaSwgX3NlcXVlbmNlLmV2YWx1YXRlKGkpLCBBTklNQVRJT05fSU5URVJQT0xBVElPTi5DT05TVEFOVCwgMCwgMCk7XHJcbiAgICAgICAgc2VxLmFkZEtleShrZXkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHJldmVyc2VkIHtAbGluayBBbmltYXRpb25FdmVudFRyaWdnZXJ9IG9iamVjdCBiYXNlZCBvbiB0aGUgZ2l2ZW4gb25lLiAgXHJcbiAgICAgKiBAcGFyYW0gX2V2ZW50cyB0aGUgZXZlbnQgb2JqZWN0IHRvIGNhbGN1bGF0ZSB0aGUgbmV3IG9uZSBvdXQgb2ZcclxuICAgICAqIEByZXR1cm5zIHRoZSByZXZlcnNlZCBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVSZXZlcnNlRXZlbnRUcmlnZ2VycyhfZXZlbnRzOiBBbmltYXRpb25FdmVudFRyaWdnZXIpOiBBbmltYXRpb25FdmVudFRyaWdnZXIge1xyXG4gICAgICBsZXQgYWU6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlciA9IHt9O1xyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIF9ldmVudHMpIHtcclxuICAgICAgICBhZVtuYW1lXSA9IHRoaXMudG90YWxUaW1lIC0gX2V2ZW50c1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcmFzdGVyZWQge0BsaW5rIEFuaW1hdGlvbkV2ZW50VHJpZ2dlcn0gb2JqZWN0IGJhc2VkIG9uIHRoZSBnaXZlbiBvbmUuICBcclxuICAgICAqIEBwYXJhbSBfZXZlbnRzIHRoZSBldmVudCBvYmplY3QgdG8gY2FsY3VsYXRlIHRoZSBuZXcgb25lIG91dCBvZlxyXG4gICAgICogQHJldHVybnMgdGhlIHJhc3RlcmVkIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJhc3RlcmVkRXZlbnRUcmlnZ2VycyhfZXZlbnRzOiBBbmltYXRpb25FdmVudFRyaWdnZXIpOiBBbmltYXRpb25FdmVudFRyaWdnZXIge1xyXG4gICAgICBsZXQgYWU6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlciA9IHt9O1xyXG4gICAgICBsZXQgZnJhbWVUaW1lOiBudW1iZXIgPSAxMDAwIC8gdGhpcy5mcmFtZXNQZXJTZWNvbmQ7XHJcbiAgICAgIGZvciAobGV0IG5hbWUgaW4gX2V2ZW50cykge1xyXG4gICAgICAgIGFlW25hbWVdID0gX2V2ZW50c1tuYW1lXSAtIChfZXZlbnRzW25hbWVdICUgZnJhbWVUaW1lKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3Mgd2hpY2ggZXZlbnRzIGxheSBiZXR3ZWVuIHR3byBnaXZlbiB0aW1lcyBhbmQgcmV0dXJucyB0aGUgbmFtZXMgb2YgdGhlIG9uZXMgdGhhdCBkby5cclxuICAgICAqIEBwYXJhbSBfZXZlbnRUcmlnZ2VycyBUaGUgZXZlbnQgb2JqZWN0IHRvIGNoZWNrIHRoZSBldmVudHMgaW5zaWRlIG9mXHJcbiAgICAgKiBAcGFyYW0gX21pbiB0aGUgbWluaW11bSBvZiB0aGUgcmFuZ2UgdG8gY2hlY2sgYmV0d2VlbiAoaW5jbHVzaXZlKVxyXG4gICAgICogQHBhcmFtIF9tYXggdGhlIG1heGltdW0gb2YgdGhlIHJhbmdlIHRvIGNoZWNrIGJldHdlZW4gKGV4Y2x1c2l2ZSlcclxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBuYW1lcyBvZiB0aGUgZXZlbnRzIGluIHRoZSBnaXZlbiByYW5nZS4gXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2hlY2tFdmVudHNCZXR3ZWVuKF9ldmVudFRyaWdnZXJzOiBBbmltYXRpb25FdmVudFRyaWdnZXIsIF9taW46IG51bWJlciwgX21heDogbnVtYmVyKTogc3RyaW5nW10ge1xyXG4gICAgICBsZXQgZXZlbnRzVG9UcmlnZ2VyOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIF9ldmVudFRyaWdnZXJzKSB7XHJcbiAgICAgICAgaWYgKF9taW4gPD0gX2V2ZW50VHJpZ2dlcnNbbmFtZV0gJiYgX2V2ZW50VHJpZ2dlcnNbbmFtZV0gPCBfbWF4KSB7XHJcbiAgICAgICAgICBldmVudHNUb1RyaWdnZXIucHVzaChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGV2ZW50c1RvVHJpZ2dlcjtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBDYWxjdWxhdGVzIHRoZSB2YWx1ZXMgYmV0d2VlbiB7QGxpbmsgQW5pbWF0aW9uS2V5fXMuXHJcbiAgICogUmVwcmVzZW50ZWQgaW50ZXJuYWxseSBieSBhIGN1YmljIGZ1bmN0aW9uIChgZih4KSA9IGF4wrMgKyBieMKyICsgY3ggKyBkYCkuIFxyXG4gICAqIE9ubHkgbmVlZHMgdG8gYmUgcmVjYWxjdWxhdGVkIHdoZW4gdGhlIGtleXMgY2hhbmdlLCBzbyBhdCBydW50aW1lIGl0IHNob3VsZCBvbmx5IGJlIGNhbGN1bGF0ZWQgb25jZS5cclxuICAgKiBAYXV0aG9yIEx1a2FzIFNjaGV1ZXJsZSwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEFuaW1hdGlvbkZ1bmN0aW9uIHtcclxuICAgIHByaXZhdGUgYTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgYjogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgYzogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgZDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUga2V5SW46IEFuaW1hdGlvbktleTtcclxuICAgIHByaXZhdGUga2V5T3V0OiBBbmltYXRpb25LZXk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9rZXlJbjogQW5pbWF0aW9uS2V5LCBfa2V5T3V0OiBBbmltYXRpb25LZXkgPSBudWxsKSB7XHJcbiAgICAgIHRoaXMua2V5SW4gPSBfa2V5SW47XHJcbiAgICAgIHRoaXMua2V5T3V0ID0gX2tleU91dDtcclxuICAgICAgdGhpcy5jYWxjdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHNldEtleUluKF9rZXlJbjogQW5pbWF0aW9uS2V5KSB7XHJcbiAgICAgIHRoaXMua2V5SW4gPSBfa2V5SW47XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBzZXRLZXlPdXQoX2tleU91dDogQW5pbWF0aW9uS2V5KSB7XHJcbiAgICAgIHRoaXMua2V5T3V0ID0gX2tleU91dDtcclxuICAgICAgdGhpcy5jYWxjdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHBhcmFtZXRlciB2YWx1ZXMgb2YgdGhpcyBjdWJpYyBmdW5jdGlvbi4gYGYoeCkgPSBheMKzICsgYnjCsiArIGN4ICsgZGBcclxuICAgICAqIFVzZWQgYnkgZWRpdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UGFyYW1ldGVycygpOiB7IGE6IG51bWJlcjsgYjogbnVtYmVyOyBjOiBudW1iZXI7IGQ6IG51bWJlciB9IHtcclxuICAgICAgcmV0dXJuIHsgYTogdGhpcy5hLCBiOiB0aGlzLmIsIGM6IHRoaXMuYywgZDogdGhpcy5kIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gYXQgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gX3RpbWUgdGhlIHBvaW50IGluIHRpbWUgYXQgd2hpY2ggdG8gZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGluIG1pbGxpc2Vjb25kcy4gV2lsbCBiZSBjb3JyZWN0ZWQgZm9yIG9mZnNldCBpbnRlcm5hbGx5LlxyXG4gICAgICogQHJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiB0aW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBldmFsdWF0ZShfdGltZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgX3RpbWUgLT0gdGhpcy5rZXlJbi50aW1lO1xyXG4gICAgICBsZXQgdGltZTI6IG51bWJlciA9IF90aW1lICogX3RpbWU7XHJcbiAgICAgIGxldCB0aW1lMzogbnVtYmVyID0gdGltZTIgKiBfdGltZTtcclxuICAgICAgcmV0dXJuIHRoaXMuYSAqIHRpbWUzICsgdGhpcy5iICogdGltZTIgKyB0aGlzLmMgKiBfdGltZSArIHRoaXMuZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIChSZS0pQ2FsY3VsYXRlcyB0aGUgcGFyYW1ldGVycyBvZiB0aGUgY3ViaWMgZnVuY3Rpb24uXHJcbiAgICAgKiBTZWUgaHR0cHM6Ly9tYXRoLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8zMTczNDY5L2NhbGN1bGF0ZS1jdWJpYy1lcXVhdGlvbi1mcm9tLXR3by1wb2ludHMtYW5kLXR3by1zbG9wZXMtdmFyaWFibHlcclxuICAgICAqIGFuZCBodHRwczovL2ppcmthZGVsbG9yby5naXRodWIuaW8vRlVER0UvRG9jdW1lbnRhdGlvbi9Mb2dzLzE5MDQxMF9Ob3RpemVuX0xTXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjYWxjdWxhdGUoKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5rZXlJbikge1xyXG4gICAgICAgIHRoaXMuZCA9IHRoaXMuYyA9IHRoaXMuYiA9IHRoaXMuYSA9IDA7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5rZXlPdXQgfHwgdGhpcy5rZXlJbi5pbnRlcnBvbGF0aW9uID09IEFOSU1BVElPTl9JTlRFUlBPTEFUSU9OLkNPTlNUQU5UKSB7XHJcbiAgICAgICAgdGhpcy5kID0gdGhpcy5rZXlJbi52YWx1ZTtcclxuICAgICAgICB0aGlzLmMgPSB0aGlzLmIgPSB0aGlzLmEgPSAwO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHgxOiBudW1iZXIgPSB0aGlzLmtleU91dC50aW1lIC0gdGhpcy5rZXlJbi50aW1lO1xyXG5cclxuICAgICAgdGhpcy5kID0gdGhpcy5rZXlJbi52YWx1ZTtcclxuICAgICAgaWYgKHRoaXMua2V5SW4uaW50ZXJwb2xhdGlvbiA9PSBBTklNQVRJT05fSU5URVJQT0xBVElPTi5MSU5FQVIpIHtcclxuICAgICAgICB0aGlzLmMgPSAodGhpcy5rZXlPdXQudmFsdWUgLSB0aGlzLmtleUluLnZhbHVlKSAvIHgxO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jID0gdGhpcy5rZXlJbi5zbG9wZU91dDtcclxuICAgICAgdGhpcy5hID0gKC14MSAqICh0aGlzLmtleUluLnNsb3BlT3V0ICsgdGhpcy5rZXlPdXQuc2xvcGVJbikgLSAyICogdGhpcy5rZXlJbi52YWx1ZSArIDIgKiB0aGlzLmtleU91dC52YWx1ZSkgLyAtTWF0aC5wb3coeDEsIDMpO1xyXG4gICAgICB0aGlzLmIgPSAodGhpcy5rZXlPdXQuc2xvcGVJbiAtIHRoaXMua2V5SW4uc2xvcGVPdXQgLSAzICogdGhpcy5hICogTWF0aC5wb3coeDEsIDIpKSAvICgyICogeDEpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEFuIHtAbGluayBBbmltYXRpb259IGxvYWRlZCBmcm9tIGEgZ2xURi1GaWxlLlxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3lcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQW5pbWF0aW9uR0xURiBleHRlbmRzIG1peGluU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbChBbmltYXRpb24pIHtcclxuICAgIHB1YmxpYyBhc3luYyBsb2FkKF91cmw6IFJlcXVlc3RJbmZvID0gdGhpcy51cmwsIF9uYW1lOiBzdHJpbmcgPSB0aGlzLm5hbWUpOiBQcm9taXNlPEFuaW1hdGlvbkdMVEY+IHtcclxuICAgICAgdGhpcy51cmwgPSBfdXJsO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgcmV0dXJuIEdMVEZMb2FkZXIubG9hZFJlc291cmNlKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAvLyAgIGNvbnN0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgIC8vICAgc2VyaWFsaXphdGlvbi5mcmFtZXNQZXJTZWNvbmQgPSB0aGlzLmZwczsgLy8gVE9ETzogY2hlY2sgaWYgdGhpcyBpcyBjb3JyZWN0Pz9cclxuICAgIC8vICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICAvLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgXHJcbiAgZXhwb3J0IGVudW0gQU5JTUFUSU9OX0lOVEVSUE9MQVRJT04ge1xyXG4gICAgQ09OU1RBTlQsXHJcbiAgICBMSU5FQVIsXHJcbiAgICBDVUJJQ1xyXG4gIH1cclxuICAvLyB0eXBlIEFuaW1hdGlvbkludGVycG9sYXRpb24gPSBcImNvbnN0YW50XCIgfCBcImxpbmVhclwiIHwgXCJjdWJpY1wiO1xyXG5cclxuICAvKipcclxuICAgKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBjb250aW5vdXMgcG9pbnRzIGluIHRpbWUgdGhlaXIgYWNjb21wYW55aW5nIHZhbHVlcyBhcyB3ZWxsIGFzIHRoZWlyIHNsb3Blcy4gXHJcbiAgICogQWxzbyBob2xkcyBhIHJlZmVyZW5jZSB0byB0aGUge0BsaW5rIEFuaW1hdGlvbkZ1bmN0aW9ufXMgdGhhdCBjb21lIGluIGFuZCBvdXQgb2YgdGhlIHNpZGVzLiBcclxuICAgKiBUaGUge0BsaW5rIEFuaW1hdGlvbkZ1bmN0aW9ufXMgYXJlIGhhbmRsZWQgYnkgdGhlIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX1zLlxyXG4gICAqIElmIHRoZSBwcm9wZXJ0eSBjb25zdGFudCBpcyB0cnVlLCB0aGUgdmFsdWUgZG9lcyBub3QgY2hhbmdlIGFuZCB3aWwgbm90IGJlIGludGVycG9sYXRlZCBiZXR3ZWVuIHRoaXMgYW5kIHRoZSBuZXh0IGtleSBpbiBhIHNlcXVlbmNlXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBBbmltYXRpb25LZXkgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcclxuICAgIC8vIFRPRE86IGNoZWNrIGlmIGZ1bmN0aW9uSW4gY2FuIGJlIHJlbW92ZWRcclxuICAgIC8qKkRvbid0IG1vZGlmeSB0aGlzIHVubGVzcyB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZy4qL1xyXG4gICAgcHVibGljIGZ1bmN0aW9uSW46IEFuaW1hdGlvbkZ1bmN0aW9uO1xyXG4gICAgLyoqRG9uJ3QgbW9kaWZ5IHRoaXMgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nLiovXHJcbiAgICBwdWJsaWMgZnVuY3Rpb25PdXQ6IEFuaW1hdGlvbkZ1bmN0aW9uO1xyXG5cclxuICAgICN0aW1lOiBudW1iZXI7XHJcbiAgICAjdmFsdWU6IG51bWJlcjtcclxuICAgICNpbnRlcnBvbGF0aW9uOiBBTklNQVRJT05fSU5URVJQT0xBVElPTjtcclxuXHJcbiAgICAjc2xvcGVJbjogbnVtYmVyID0gMDtcclxuICAgICNzbG9wZU91dDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3RpbWU6IG51bWJlciA9IDAsIF92YWx1ZTogbnVtYmVyID0gMCwgX2ludGVycG9sYXRpb246IEFOSU1BVElPTl9JTlRFUlBPTEFUSU9OID0gQU5JTUFUSU9OX0lOVEVSUE9MQVRJT04uQ1VCSUMsIF9zbG9wZUluOiBudW1iZXIgPSAwLCBfc2xvcGVPdXQ6IG51bWJlciA9IDApIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy4jdGltZSA9IF90aW1lO1xyXG4gICAgICB0aGlzLiN2YWx1ZSA9IF92YWx1ZTtcclxuICAgICAgdGhpcy4jaW50ZXJwb2xhdGlvbiA9IF9pbnRlcnBvbGF0aW9uO1xyXG4gICAgICB0aGlzLiNzbG9wZUluID0gX3Nsb3BlSW47XHJcbiAgICAgIHRoaXMuI3Nsb3BlT3V0ID0gX3Nsb3BlT3V0O1xyXG5cclxuICAgICAgdGhpcy5mdW5jdGlvbk91dCA9IG5ldyBBbmltYXRpb25GdW5jdGlvbih0aGlzLCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBjb21wYXJhdGlvbiBmdW5jdGlvbiB0byB1c2UgaW4gYW4gYXJyYXkgc29ydCBmdW5jdGlvbiB0byBzb3J0IHRoZSBrZXlzIGJ5IHRoZWlyIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gX2EgdGhlIGFuaW1hdGlvbiBrZXkgdG8gY2hlY2tcclxuICAgICAqIEBwYXJhbSBfYiB0aGUgYW5pbWF0aW9uIGtleSB0byBjaGVjayBhZ2FpbnN0XHJcbiAgICAgKiBAcmV0dXJucyA+MCBpZiBhPmIsIDAgaWYgYT1iLCA8MCBpZiBhPGJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjb21wYXJlKF9hOiBBbmltYXRpb25LZXksIF9iOiBBbmltYXRpb25LZXkpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gX2EudGltZSAtIF9iLnRpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0aW1lKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN0aW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgdGltZShfdGltZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3RpbWUgPSBfdGltZTtcclxuICAgICAgdGhpcy5mdW5jdGlvbkluLmNhbGN1bGF0ZSgpO1xyXG4gICAgICB0aGlzLmZ1bmN0aW9uT3V0LmNhbGN1bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdmFsdWUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgdmFsdWUoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jdmFsdWUgPSBfdmFsdWU7XHJcbiAgICAgIHRoaXMuZnVuY3Rpb25Jbi5jYWxjdWxhdGUoKTtcclxuICAgICAgdGhpcy5mdW5jdGlvbk91dC5jYWxjdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGludGVycG9sYXRpb24oKTogQU5JTUFUSU9OX0lOVEVSUE9MQVRJT04ge1xyXG4gICAgICByZXR1cm4gdGhpcy4jaW50ZXJwb2xhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGludGVycG9sYXRpb24oX2ludGVycG9sYXRpb246IEFOSU1BVElPTl9JTlRFUlBPTEFUSU9OKSB7XHJcbiAgICAgIHRoaXMuI2ludGVycG9sYXRpb24gPSBfaW50ZXJwb2xhdGlvbjtcclxuICAgICAgdGhpcy5mdW5jdGlvbkluLmNhbGN1bGF0ZSgpO1xyXG4gICAgICB0aGlzLmZ1bmN0aW9uT3V0LmNhbGN1bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc2xvcGVJbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc2xvcGVJbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHNsb3BlSW4oX3Nsb3BlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc2xvcGVJbiA9IF9zbG9wZTtcclxuICAgICAgdGhpcy5mdW5jdGlvbkluLmNhbGN1bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc2xvcGVPdXQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3Nsb3BlT3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgc2xvcGVPdXQoX3Nsb3BlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc2xvcGVPdXQgPSBfc2xvcGU7XHJcbiAgICAgIHRoaXMuZnVuY3Rpb25PdXQuY2FsY3VsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHt9O1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnRpbWUgPSB0aGlzLiN0aW1lO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnZhbHVlID0gdGhpcy4jdmFsdWU7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaW50ZXJwb2xhdGlvbiA9IHRoaXMuI2ludGVycG9sYXRpb247XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2xvcGVJbiA9IHRoaXMuI3Nsb3BlSW47XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2xvcGVPdXQgPSB0aGlzLiNzbG9wZU91dDtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy4jdGltZSA9IF9zZXJpYWxpemF0aW9uLnRpbWU7XHJcbiAgICAgIHRoaXMuI3ZhbHVlID0gX3NlcmlhbGl6YXRpb24udmFsdWU7XHJcbiAgICAgIHRoaXMuI2ludGVycG9sYXRpb24gPSBfc2VyaWFsaXphdGlvbi5pbnRlcnBvbGF0aW9uO1xyXG4gICAgICB0aGlzLiNzbG9wZUluID0gX3NlcmlhbGl6YXRpb24uc2xvcGVJbjtcclxuICAgICAgdGhpcy4jc2xvcGVPdXQgPSBfc2VyaWFsaXphdGlvbi5zbG9wZU91dDtcclxuICAgICAgLy8gaWYgKF9zZXJpYWxpemF0aW9uLmludGVycG9sYXRpb24gPT0gdW5kZWZpbmVkKVxyXG4gICAgICAvLyAgIGlmIChfc2VyaWFsaXphdGlvbi5jb25zdGFudCkgLy8gVE9ETzogcmVtb3ZlIHRoaXMgd2hlbiBjb25zdGFudCBpcyByZW1vdmVkXHJcbiAgICAgIC8vICAgICB0aGlzLiNpbnRlcnBvbGF0aW9uID0gXCJjb25zdGFudFwiO1xyXG4gICAgICAvLyAgIGVsc2VcclxuICAgICAgLy8gICAgIHRoaXMuI2ludGVycG9sYXRpb24gPSBcImN1YmljXCI7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgLy9cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEEgc2VxdWVuY2Ugb2Yge0BsaW5rIEFuaW1hdGlvbktleX1zIHRoYXQgaXMgbWFwcGVkIHRvIGFuIGF0dHJpYnV0ZSBvZiBhIHtAbGluayBOb2RlfSBvciBpdHMge0BsaW5rIENvbXBvbmVudH1zIGluc2lkZSB0aGUge0BsaW5rIEFuaW1hdGlvbn0uXHJcbiAgICogUHJvdmlkZXMgZnVuY3Rpb25zIHRvIG1vZGlmeSBzYWlkIGtleXNcclxuICAgKiBAYXV0aG9ycyBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOSB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyMlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBBbmltYXRpb25TZXF1ZW5jZSBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xyXG4gICAgcHJpdmF0ZSBrZXlzOiBBbmltYXRpb25LZXlbXTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2tleXM6IEFuaW1hdGlvbktleVtdID0gW10pIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5rZXlzID0gX2tleXM7XHJcbiAgICAgIHRoaXMucmVnZW5lcmF0ZUZ1bmN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmtleXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZhbHVhdGVzIHRoZSBzZXF1ZW5jZSBhdCB0aGUgZ2l2ZW4gcG9pbnQgaW4gdGltZS5cclxuICAgICAqIEBwYXJhbSBfdGltZSB0aGUgcG9pbnQgaW4gdGltZSBhdCB3aGljaCB0byBldmFsdWF0ZSB0aGUgc2VxdWVuY2UgaW4gbWlsbGlzZWNvbmRzLlxyXG4gICAgICogQHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBzZXF1ZW5jZSBhdCB0aGUgZ2l2ZW4gdGltZS4gdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBubyBrZXlzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZXZhbHVhdGUoX3RpbWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIGlmICh0aGlzLmtleXMubGVuZ3RoID09IDApXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy9UT0RPOiBzaG91bGRuJ3QgcmV0dXJuIDAgYnV0IHNvbWV0aGluZyBpbmRpY2F0aW5nIG5vIGNoYW5nZSwgbGlrZSBudWxsLiBwcm9iYWJseSBuZWVkcyB0byBiZSBjaGFuZ2VkIGluIE5vZGUgYXMgd2VsbCB0byBpZ25vcmUgbm9uLW51bWVyaWMgdmFsdWVzIGluIHRoZSBhcHBseUFuaW1hdGlvbiBmdW5jdGlvblxyXG4gICAgICBpZiAodGhpcy5rZXlzLmxlbmd0aCA9PSAxIHx8IHRoaXMua2V5c1swXS50aW1lID49IF90aW1lKVxyXG4gICAgICAgIHJldHVybiB0aGlzLmtleXNbMF0udmFsdWU7XHJcblxyXG5cclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBpZiAodGhpcy5rZXlzW2ldLnRpbWUgPD0gX3RpbWUgJiYgX3RpbWUgPCB0aGlzLmtleXNbaSArIDFdLnRpbWUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmtleXNbaV0uZnVuY3Rpb25PdXQuZXZhbHVhdGUoX3RpbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiAodGhpcy5rZXlzW2ldLnRpbWUgPT0gX3RpbWUpXHJcbiAgICAgICAgLy8gICByZXR1cm4gdGhpcy5rZXlzW2ldLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmtleXNbdGhpcy5rZXlzLmxlbmd0aCAtIDFdLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyBrZXkgdG8gdGhlIHNlcXVlbmNlLlxyXG4gICAgICogQHBhcmFtIF9rZXkgdGhlIGtleSB0byBhZGRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEtleShfa2V5OiBBbmltYXRpb25LZXkpOiB2b2lkIHtcclxuICAgICAgdGhpcy5rZXlzLnB1c2goX2tleSk7XHJcbiAgICAgIHRoaXMua2V5cy5zb3J0KEFuaW1hdGlvbktleS5jb21wYXJlKTtcclxuICAgICAgdGhpcy5yZWdlbmVyYXRlRnVuY3Rpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RpZnlzIGEgZ2l2ZW4ga2V5IGluIHRoZSBzZXF1ZW5jZS5cclxuICAgICAqIEBwYXJhbSBfa2V5IHRoZSBrZXkgdG8gYWRkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtb2RpZnlLZXkoX2tleTogQW5pbWF0aW9uS2V5LCBfdGltZT86IG51bWJlciwgX3ZhbHVlPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIGlmIChfdGltZSAhPSBudWxsKVxyXG4gICAgICAgIF9rZXkudGltZSA9IF90aW1lO1xyXG4gICAgICBpZiAoX3ZhbHVlICE9IG51bGwpXHJcbiAgICAgICAgX2tleS52YWx1ZSA9IF92YWx1ZTtcclxuICAgICAgdGhpcy5rZXlzLnNvcnQoQW5pbWF0aW9uS2V5LmNvbXBhcmUpO1xyXG4gICAgICB0aGlzLnJlZ2VuZXJhdGVGdW5jdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYSBnaXZlbiBrZXkgZnJvbSB0aGUgc2VxdWVuY2UuXHJcbiAgICAgKiBAcGFyYW0gX2tleSB0aGUga2V5IHRvIHJlbW92ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlS2V5KF9rZXk6IEFuaW1hdGlvbktleSk6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMua2V5c1tpXSA9PSBfa2V5KSB7XHJcbiAgICAgICAgICB0aGlzLmtleXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgdGhpcy5yZWdlbmVyYXRlRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kIGEga2V5IGluIHRoZSBzZXF1ZW5jZSBleGFjdGx5IG1hdGNoaW5nIHRoZSBnaXZlbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmluZEtleShfdGltZTogbnVtYmVyKTogQW5pbWF0aW9uS2V5IHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIHRoaXMua2V5cylcclxuICAgICAgICBpZiAoa2V5LnRpbWUgPT0gX3RpbWUpXHJcbiAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIEFuaW1hdGlvbiBLZXkgYXQgdGhlIGdpdmVuIGluZGV4IGZyb20gdGhlIGtleXMuXHJcbiAgICAgKiBAcGFyYW0gX2luZGV4IHRoZSB6ZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRvIHJlbW92ZSB0aGUga2V5XHJcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVtb3ZlZCBBbmltYXRpb25LZXkgaWYgc3VjY2Vzc2Z1bCwgbnVsbCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW1vdmVLZXlBdEluZGV4KF9pbmRleDogbnVtYmVyKTogQW5pbWF0aW9uS2V5IHtcclxuICAgICAgaWYgKF9pbmRleCA8IDAgfHwgX2luZGV4ID49IHRoaXMua2V5cy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBsZXQgYWs6IEFuaW1hdGlvbktleSA9IHRoaXMua2V5c1tfaW5kZXhdO1xyXG4gICAgICB0aGlzLmtleXMuc3BsaWNlKF9pbmRleCwgMSk7XHJcbiAgICAgIHRoaXMucmVnZW5lcmF0ZUZ1bmN0aW9ucygpO1xyXG4gICAgICByZXR1cm4gYWs7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGEga2V5IGZyb20gdGhlIHNlcXVlbmNlIGF0IHRoZSBkZXNpcmVkIGluZGV4LlxyXG4gICAgICogQHBhcmFtIF9pbmRleCB0aGUgemVyby1iYXNlZCBpbmRleCBhdCB3aGljaCB0byBnZXQgdGhlIGtleVxyXG4gICAgICogQHJldHVybnMgdGhlIEFuaW1hdGlvbktleSBhdCB0aGUgaW5kZXggaWYgaXQgZXhpc3RzLCBudWxsIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEtleShfaW5kZXg6IG51bWJlcik6IEFuaW1hdGlvbktleSB7XHJcbiAgICAgIGlmIChfaW5kZXggPCAwIHx8IF9pbmRleCA+PSB0aGlzLmtleXMubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICByZXR1cm4gdGhpcy5rZXlzW19pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoaXMgc2VxdWVuY2UncyBrZXlzLiBUaGlzIGlzIG5vdCBhIGNvcHksIGJ1dCB0aGUgYWN0dWFsIGFycmF5IHVzZWQgaW50ZXJuYWxseS4gSGFuZGxlIHdpdGggY2FyZSFcclxuICAgICAqIFVzZWQgYnkgRWRpdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0S2V5cygpOiBBbmltYXRpb25LZXlbXSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmtleXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgczogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBrZXlzOiBbXSxcclxuICAgICAgICBhbmltYXRpb25TZXF1ZW5jZTogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcy5rZXlzW2ldID0gdGhpcy5rZXlzW2ldLnNlcmlhbGl6ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBfc2VyaWFsaXphdGlvbi5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gdGhpcy5rZXlzLnB1c2goPEFuaW1hdGlvbktleT5TZXJpYWxpemVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmtleXNbaV0pKTtcclxuICAgICAgICBsZXQgazogQW5pbWF0aW9uS2V5ID0gbmV3IEFuaW1hdGlvbktleSgpO1xyXG4gICAgICAgIGF3YWl0IGsuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ua2V5c1tpXSk7XHJcbiAgICAgICAgdGhpcy5rZXlzW2ldID0gaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5yZWdlbmVyYXRlRnVuY3Rpb25zKCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHsgLyogKi8gfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRoYXQgKHJlLSlnZW5lcmF0ZXMgYWxsIGZ1bmN0aW9ucyBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVnZW5lcmF0ZUZ1bmN0aW9ucygpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBmOiBBbmltYXRpb25GdW5jdGlvbiA9IG5ldyBBbmltYXRpb25GdW5jdGlvbih0aGlzLmtleXNbaV0pO1xyXG4gICAgICAgIHRoaXMua2V5c1tpXS5mdW5jdGlvbk91dCA9IGY7XHJcbiAgICAgICAgaWYgKGkgPT0gdGhpcy5rZXlzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIC8vVE9ETzogY2hlY2sgaWYgdGhpcyBpcyBldmVuIHVzZWZ1bC4gTWF5YmUgdXBkYXRlIHRoZSBydW5jb25kaXRpb24gdG8gbGVuZ3RoIC0gMSBpbnN0ZWFkLiBNaWdodCBiZSByZWR1bmRhbnQgaWYgZnVuY3Rpb25JbiBpcyByZW1vdmVkLCBzZWUgVE9ETyBpbiBBbmltYXRpb25LZXkuXHJcbiAgICAgICAgICBmLnNldEtleU91dCA9IHRoaXMua2V5c1swXTtcclxuICAgICAgICAgIHRoaXMua2V5c1swXS5mdW5jdGlvbkluID0gZjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmLnNldEtleU91dCA9IHRoaXMua2V5c1tpICsgMV07XHJcbiAgICAgICAgdGhpcy5rZXlzW2kgKyAxXS5mdW5jdGlvbkluID0gZjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBjbGFzcyBBbmltYXRpb25TcHJpdGUgZXh0ZW5kcyBBbmltYXRpb24ge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IEFuaW1hdGlvbi5yZWdpc3RlclN1YmNsYXNzKEFuaW1hdGlvblNwcml0ZSk7XHJcbiAgICBwdWJsaWMgdGV4dHVyZTogVGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LmNvbG9yO1xyXG4gICAgcHJpdmF0ZSBpZFRleHR1cmU6IHN0cmluZztcclxuICAgIHByaXZhdGUgZnJhbWVzOiBudW1iZXIgPSAyNTtcclxuICAgIHByaXZhdGUgd3JhcEFmdGVyOiBudW1iZXIgPSA1O1xyXG4gICAgcHJpdmF0ZSBzdGFydDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAsIDApO1xyXG4gICAgcHJpdmF0ZSBzaXplOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoODAsIDgwKTtcclxuICAgIHByaXZhdGUgbmV4dDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDgwLCAwKTtcclxuICAgIHByaXZhdGUgd3JhcDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAsIDgwKTtcclxuXHJcbiAgICAvLyBUT0RPOiBmcHMgc2hvdWxkIGJlIGEgcGFyYW1ldGVyIHRvb1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBcIkFuaW1hdGlvblNwcml0ZVwiKSB7IC8vfSwgX2ZwczogbnVtYmVyID0gMTUpIHtcclxuICAgICAgc3VwZXIoX25hbWUsIHt9LCAxKTtcclxuICAgICAgdGhpcy5mcmFtZXNQZXJTZWNvbmQgPSB0aGlzLmZyYW1lcztcclxuICAgICAgdGhpcy5jcmVhdGUodGhpcy50ZXh0dXJlLCB0aGlzLmZyYW1lcywgdGhpcy53cmFwQWZ0ZXIsIHRoaXMuc3RhcnQsIHRoaXMuc2l6ZSwgdGhpcy5uZXh0LCB0aGlzLndyYXAsIHRoaXMuZnJhbWVzUGVyU2Vjb25kKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHRleHR1cmUgdG8gYmUgdXNlZCBhcyB0aGUgc3ByaXRlc2hlZXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFRleHR1cmUoX3RleHR1cmU6IFRleHR1cmUpOiB2b2lkIHtcclxuICAgICAgdGhpcy50ZXh0dXJlID0gX3RleHR1cmU7XHJcbiAgICAgIHRoaXMuaWRUZXh0dXJlID0gX3RleHR1cmUuaWRSZXNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhpcyBhbmltYXRpb24gc3ByaXRlIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY3JlYXRlKF90ZXh0dXJlOiBUZXh0dXJlLCBfZnJhbWVzOiBudW1iZXIsIF93cmFwQWZ0ZXI6IG51bWJlciwgX3N0YXJ0OiBWZWN0b3IyLCBfc2l6ZTogVmVjdG9yMiwgX25leHQ6IFZlY3RvcjIsIF93cmFwOiBWZWN0b3IyLCBfZnJhbWVzUGVyU2Vjb25kOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXRUZXh0dXJlKF90ZXh0dXJlKTtcclxuICAgICAgdGhpcy5mcmFtZXMgPSBfZnJhbWVzO1xyXG4gICAgICB0aGlzLndyYXBBZnRlciA9IF93cmFwQWZ0ZXI7XHJcbiAgICAgIHRoaXMuc3RhcnQgPSBfc3RhcnQ7XHJcbiAgICAgIHRoaXMuc2l6ZSA9IF9zaXplO1xyXG4gICAgICB0aGlzLm5leHQgPSBfbmV4dDtcclxuICAgICAgdGhpcy53cmFwID0gX3dyYXA7XHJcbiAgICAgIHRoaXMuZnJhbWVzUGVyU2Vjb25kID0gX2ZyYW1lc1BlclNlY29uZDtcclxuXHJcbiAgICAgIGxldCBzY2FsZTogVmVjdG9yMiA9IHRoaXMuZ2V0U2NhbGUoKTtcclxuICAgICAgbGV0IHBvc2l0aW9uczogVmVjdG9yMltdID0gdGhpcy5nZXRQb3NpdGlvbnMoKTtcclxuXHJcbiAgICAgIGxldCB4VHJhbnNsYXRpb246IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIGxldCB5VHJhbnNsYXRpb246IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIGxldCB4U2NhbGU6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIGxldCB5U2NhbGU6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIHhTY2FsZS5hZGRLZXkobmV3IEFuaW1hdGlvbktleSgwLCBzY2FsZS54KSk7XHJcbiAgICAgIHlTY2FsZS5hZGRLZXkobmV3IEFuaW1hdGlvbktleSgwLCBzY2FsZS55KSk7XHJcblxyXG4gICAgICBmb3IgKGxldCBmcmFtZTogbnVtYmVyID0gMDsgZnJhbWUgPD0gdGhpcy5mcmFtZXM7IGZyYW1lKyspIHtcclxuICAgICAgICBsZXQgdGltZTogbnVtYmVyID0gMTAwMCAqIGZyYW1lIC8gdGhpcy5mcmFtZXNQZXJTZWNvbmQ7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IyID0gcG9zaXRpb25zW01hdGgubWluKGZyYW1lLCB0aGlzLmZyYW1lcyAtIDEpXTsgLy9yZXBlYXQgdGhlIGxhc3Qga2V5IHRvIGdpdmUgdGhlIGxhc3QgZnJhbWUgc29tZSB0aW1lXHJcbiAgICAgICAgeFRyYW5zbGF0aW9uLmFkZEtleShuZXcgQW5pbWF0aW9uS2V5KHRpbWUsIHBvc2l0aW9uLnggLyB0aGlzLnRleHR1cmUudGV4SW1hZ2VTb3VyY2Uud2lkdGgpKTsvLywgMCwgMCwgdHJ1ZSkpXHJcbiAgICAgICAgeVRyYW5zbGF0aW9uLmFkZEtleShuZXcgQW5pbWF0aW9uS2V5KHRpbWUsIHBvc2l0aW9uLnkgLyB0aGlzLnRleHR1cmUudGV4SW1hZ2VTb3VyY2UuaGVpZ2h0KSk7Ly8sIDAsIDAsIHRydWUpKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmFuaW1hdGlvblN0cnVjdHVyZSA9IHtcclxuICAgICAgICBcImNvbXBvbmVudHNcIjoge1xyXG4gICAgICAgICAgXCJDb21wb25lbnRNYXRlcmlhbFwiOiBbe1xyXG4gICAgICAgICAgICBcIm10eFBpdm90XCI6IHtcclxuICAgICAgICAgICAgICBcInRyYW5zbGF0aW9uXCI6IHtcclxuICAgICAgICAgICAgICAgIHg6IHhUcmFuc2xhdGlvbixcclxuICAgICAgICAgICAgICAgIHk6IHlUcmFuc2xhdGlvblxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgXCJzY2FsaW5nXCI6IHtcclxuICAgICAgICAgICAgICAgIHg6IHhTY2FsZSxcclxuICAgICAgICAgICAgICAgIHk6IHlTY2FsZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfV1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsVGltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc2NhbGUgb2YgdGhlIHNwcml0ZXNoZWV0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTY2FsZSgpOiBWZWN0b3IyIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKFxyXG4gICAgICAgIHRoaXMuc2l6ZS54IC8gdGhpcy50ZXh0dXJlLnRleEltYWdlU291cmNlLndpZHRoLFxyXG4gICAgICAgIHRoaXMuc2l6ZS55IC8gdGhpcy50ZXh0dXJlLnRleEltYWdlU291cmNlLmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcG9zaXRpb25zIG9mIHRoZSBzcHJpdGVzaGVldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb25zKCk6IFZlY3RvcjJbXSB7XHJcbiAgICAgIGxldCBpTmV4dDogbnVtYmVyID0gMDtcclxuICAgICAgbGV0IGlXcmFwOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgcG9zaXRpb25zOiBWZWN0b3IyW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgZnJhbWU6IG51bWJlciA9IDA7IGZyYW1lIDwgdGhpcy5mcmFtZXM7IGZyYW1lKyspIHtcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgVmVjdG9yMihcclxuICAgICAgICAgIHRoaXMuc3RhcnQueCArIGlOZXh0ICogdGhpcy5uZXh0LnggKyBpV3JhcCAqIHRoaXMud3JhcC54LFxyXG4gICAgICAgICAgdGhpcy5zdGFydC55ICsgaU5leHQgKiB0aGlzLm5leHQueSArIGlXcmFwICogdGhpcy53cmFwLnlcclxuICAgICAgICApKTtcclxuXHJcbiAgICAgICAgaU5leHQrKztcclxuICAgICAgICBpZiAoaU5leHQgPj0gdGhpcy53cmFwQWZ0ZXIpIHtcclxuICAgICAgICAgIGlOZXh0ID0gMDtcclxuICAgICAgICAgIGlXcmFwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBwb3NpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uPzogc3RyaW5nW10sIF9kaXNwYXRjaE11dGF0ZT86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnRleHR1cmUsIHRoaXMuZnJhbWVzLCB0aGlzLndyYXBBZnRlciwgdGhpcy5zdGFydCwgdGhpcy5zaXplLCB0aGlzLm5leHQsIHRoaXMud3JhcCwgdGhpcy5mcmFtZXNQZXJTZWNvbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSA9IHRoaXMuaWRSZXNvdXJjZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5pZFRleHR1cmUgPSB0aGlzLmlkVGV4dHVyZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5mcmFtZXMgPSB0aGlzLmZyYW1lcztcclxuICAgICAgc2VyaWFsaXphdGlvbi53cmFwQWZ0ZXIgPSB0aGlzLndyYXBBZnRlcjtcclxuICAgICAgZm9yIChsZXQgbmFtZSBvZiBbXCJzdGFydFwiLCBcInNpemVcIiwgXCJuZXh0XCIsIFwid3JhcFwiXSlcclxuICAgICAgICBzZXJpYWxpemF0aW9uW25hbWVdID0gKDxWZWN0b3IyPlJlZmxlY3QuZ2V0KHRoaXMsIG5hbWUpKS5zZXJpYWxpemUoKTtcclxuXHJcbiAgICAgIGxldCBhbmltYXRpb25zU3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUgPSB0aGlzLmFuaW1hdGlvblN0cnVjdHVyZTtcclxuICAgICAgdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUgPSB7fTsgLy8gbm8gbmVlZCB0byBzZXJpYWxpemUgc3RydWN0dXJlXHJcbiAgICAgIC8vIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUgPSBhbmltYXRpb25zU3RydWN0dXJlOyAvLyByZXN0b3JlIGV4aXN0ZW50IHN0cnVjdHVyZVxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3M6IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc1tzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIGlmIChfcy5pZFRleHR1cmUpXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gPFRleHR1cmU+YXdhaXQgUHJvamVjdC5nZXRSZXNvdXJjZShfcy5pZFRleHR1cmUpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gVGV4dHVyZURlZmF1bHQuY29sb3I7XHJcblxyXG4gICAgICBmb3IgKGxldCBuYW1lIG9mIFtcInN0YXJ0XCIsIFwic2l6ZVwiLCBcIm5leHRcIiwgXCJ3cmFwXCJdKVxyXG4gICAgICAgICg8VmVjdG9yMj5SZWZsZWN0LmdldCh0aGlzLCBuYW1lKSkuZGVzZXJpYWxpemUoX3NbbmFtZV0pO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnRleHR1cmUsIF9zLmZyYW1lcywgX3Mud3JhcEFmdGVyLCB0aGlzLnN0YXJ0LCB0aGlzLnNpemUsIHRoaXMubmV4dCwgdGhpcy53cmFwLCB0aGlzLmZyYW1lc1BlclNlY29uZCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyB0aGUge0BsaW5rIEFuaW1hdGlvblNwcml0ZX0gaW50byBhbiB7QGxpbmsgQW5pbWF0aW9ufVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29udmVydFRvQW5pbWF0aW9uKCk6IEFuaW1hdGlvbiB7XHJcbiAgICAgIGxldCBhbmltYXRpb246IEFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24odGhpcy5uYW1lLCB0aGlzLmFuaW1hdGlvblN0cnVjdHVyZSwgdGhpcy5mcmFtZXNQZXJTZWNvbmQpO1xyXG4gICAgICByZXR1cm4gYW5pbWF0aW9uO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2lvbiBvZiBBdWRpb0J1ZmZlciB3aXRoIGEgbG9hZCBtZXRob2QgdGhhdCBjcmVhdGVzIGEgYnVmZmVyIGluIHRoZSB7QGxpbmsgQXVkaW9NYW5hZ2VyfS5kZWZhdWx0IHRvIGJlIHVzZWQgd2l0aCB7QGxpbmsgQ29tcG9uZW50QXVkaW99XHJcbiAgICogQGF1dGhvcnMgVGhvbWFzIERvcm5lciwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQXVkaW8gZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlUmVzb3VyY2Uge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyA9IFwiQXVkaW9cIjtcclxuICAgIHB1YmxpYyBpZFJlc291cmNlOiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICBwdWJsaWMgYnVmZmVyOiBBdWRpb0J1ZmZlciA9IHVuZGVmaW5lZDtcclxuICAgIHB1YmxpYyBwYXRoOiBVUkwgPSB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHVybDogUmVxdWVzdEluZm8gPSB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHJlYWR5OiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF91cmw/OiBSZXF1ZXN0SW5mbykge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICBpZiAoX3VybCkge1xyXG4gICAgICAgIHRoaXMubG9hZChfdXJsKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBfdXJsLnRvU3RyaW5nKCkuc3BsaXQoXCIvXCIpLnBvcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpc1JlYWR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5yZWFkeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jaHJvbm91c2x5IGxvYWRzIHRoZSBhdWRpbyAobXAzKSBmcm9tIHRoZSBnaXZlbiB1cmxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGxvYWQoX3VybDogUmVxdWVzdEluZm8pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgRGVidWcuZnVkZ2UoXCJBdWRpb0xvYWRcIiwgX3VybCk7XHJcbiAgICAgIHRoaXMudXJsID0gX3VybDtcclxuICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnBhdGggPSBuZXcgVVJMKHRoaXMudXJsLnRvU3RyaW5nKCksIFByb2plY3QuYmFzZVVSTCk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlOiBSZXNwb25zZSA9IGF3YWl0IHdpbmRvdy5mZXRjaCh0aGlzLnBhdGgudG9TdHJpbmcoKSk7XHJcbiAgICAgIGNvbnN0IGFycmF5QnVmZmVyOiBBcnJheUJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgIGxldCBidWZmZXI6IEF1ZGlvQnVmZmVyID0gYXdhaXQgQXVkaW9NYW5hZ2VyLmRlZmF1bHQuZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyKTtcclxuICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XHJcbiAgICAgIHRoaXMucmVhZHkgPSB0cnVlO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5UX0FVRElPLlJFQURZKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHVybDogdGhpcy51cmwsXHJcbiAgICAgICAgaWRSZXNvdXJjZTogdGhpcy5pZFJlc291cmNlLFxyXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICB0eXBlOiB0aGlzLnR5cGVcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcywgX3NlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSk7XHJcbiAgICAgIGF3YWl0IHRoaXMubG9hZChfc2VyaWFsaXphdGlvbi51cmwpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfc2VyaWFsaXphdGlvbi5uYW1lO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uPzogc3RyaW5nW10sIF9kaXNwYXRjaE11dGF0ZT86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IHVybDogc3RyaW5nID0gX211dGF0b3IudXJsOyAvLyBzYXZlIHVybCBmb3IgcmVjb25zdHJ1Y3Rpb24gYWZ0ZXIgZXhjbHVzaW9uXHJcbiAgICAgIGlmIChfbXV0YXRvci51cmwgIT0gdGhpcy51cmwudG9TdHJpbmcoKSlcclxuICAgICAgICB0aGlzLmxvYWQoX211dGF0b3IudXJsKTtcclxuICAgICAgLy8gZXhjZXB0IHVybCBmcm9tIG11dGF0b3IgZm9yIGZ1cnRoZXIgcHJvY2Vzc2luZ1xyXG4gICAgICBkZWxldGUgKF9tdXRhdG9yLnVybCk7XHJcbiAgICAgIHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgICAgLy8gcmVjb25zdHJ1Y3QsIGZvciBtdXRhdG9yIG1heSBiZSBrZXB0IGJ5IGNhbGxlclxyXG4gICAgICBSZWZsZWN0LnNldChfbXV0YXRvciwgXCJ1cmxcIiwgdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICAvLyBkZWxldGUgX211dGF0b3IuaWRSZXNvdXJjZTsgXHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5yZWFkeTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBjb25zdCBlbnVtIEVWRU5UX0FVRElPIHtcclxuICAgIC8qKiBicm9hZGNhc3QgdG8gYSB7QGxpbmsgTm9kZX0gYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMgaW4gdGhlIGdyYXBoIGFmdGVyIGl0IHdhcyBhcHBlbmRlZCB0byBhIHBhcmVudCAqL1xyXG4gICAgQ0hJTERfQVBQRU5EID0gXCJjaGlsZEFwcGVuZFRvQXVkaW9HcmFwaFwiLFxyXG4gICAgLyoqIGJyb2FkY2FzdCB0byBhIHtAbGluayBOb2RlfSBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cyBpbiB0aGUgZ3JhcGgganVzdCBiZWZvcmUgaXRzIGJlaW5nIHJlbW92ZWQgZnJvbSBpdHMgcGFyZW50ICovXHJcbiAgICBDSElMRF9SRU1PVkUgPSBcImNoaWxkUmVtb3ZlRnJvbUF1ZGlvR3JhcGhcIixcclxuICAgIC8qKiBicm9hZGNhc3QgdG8gYSB7QGxpbmsgTm9kZX0gYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMgaW4gdGhlIGdyYXBoIHRvIHVwZGF0ZSB0aGUgcGFubmVycyBpbiBBdWRpb0NvbXBvbmVudHMgKi9cclxuICAgIFVQREFURSA9IFwidXBkYXRlQXVkaW9HcmFwaFwiLFxyXG4gICAgLyoqIGZpcmVkIHdoZW4gdGhlIGF1ZGlvIGZpbGUgd2FzIGxvYWRlZCBhbmQgaXMgcmVhZHkgZm9yIHBsYXlpbmcgKi9cclxuICAgIFJFQURZID0gXCJyZWFkeVwiLFxyXG4gICAgLyoqIGZpcmVkIHdoZW4gdGhlIGVuZCBvZiB0aGUgYXVkaW8gaXMgcmVhY2hlZCB3aGlsZSBwbGF5aW5nICovXHJcbiAgICBFTkRFRCA9IFwiZW5kZWRcIlxyXG4gIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL0V2ZW50L0V2ZW50QXVkaW8udHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZHMgdGhlIHN0YW5kYXJkIEF1ZGlvQ29udGV4dCBmb3IgaW50ZWdyYXRpb24gd2l0aCBGVURHRS1ncmFwaHMuXHJcbiAgICogQ3JlYXRlcyBhIGRlZmF1bHQgb2JqZWN0IGF0IHN0YXJ0dXAgdG8gYmUgYWRkcmVzc2VkIGFzIEF1ZGlvTWFuYWdlciBkZWZhdWx0LlxyXG4gICAqIE90aGVyIG9iamVjdHMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgY3JlYXRlIGZvciBzcGVjaWFsIHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBBdWRpb01hbmFnZXIgZXh0ZW5kcyBBdWRpb0NvbnRleHQge1xyXG4gICAgLyoqIFRoZSBkZWZhdWx0IGNvbnRleHQgdGhhdCBtYXkgYmUgdXNlZCB0aHJvdWdob3V0IHRoZSBwcm9qZWN0IHdpdGhvdXQgdGhlIG5lZWQgdG8gY3JlYXRlIG90aGVycyAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBkZWZhdWx0OiBBdWRpb01hbmFnZXIgPSBuZXcgQXVkaW9NYW5hZ2VyKHsgbGF0ZW5jeUhpbnQ6IFwiaW50ZXJhY3RpdmVcIiwgc2FtcGxlUmF0ZTogNDQxMDAgfSk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBldmVudFVwZGF0ZTogRXZlbnQgPSBuZXcgRXZlbnQoRVZFTlRfQVVESU8uVVBEQVRFKTtcclxuICAgIC8qKiBUaGUgbWFzdGVyIHZvbHVtZSBhbGwgQXVkaW9Ob2RlcyBpbiB0aGUgY29udGV4dCBzaG91bGQgYXR0YWNoIHRvICovXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgZ2FpbjogR2Fpbk5vZGU7XHJcbiAgICBwcml2YXRlIGdyYXBoOiBOb2RlID0gbnVsbDtcclxuICAgIHByaXZhdGUgY21wTGlzdGVuZXI6IENvbXBvbmVudEF1ZGlvTGlzdGVuZXIgPSBudWxsO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfY29udGV4dE9wdGlvbnM/OiBBdWRpb0NvbnRleHRPcHRpb25zKSB7XHJcbiAgICAgIHN1cGVyKF9jb250ZXh0T3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuZ2FpbiA9IHRoaXMuY3JlYXRlR2FpbigpO1xyXG4gICAgICB0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmRlc3RpbmF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbWFzdGVyIHZvbHVtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IHZvbHVtZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmdhaW4uZ2Fpbi52YWx1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbWFzdGVyIHZvbHVtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHZvbHVtZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIEZVREdFLWdyYXBoIHRvIGxpc3RlbiB0by4gRWFjaCB7QGxpbmsgQ29tcG9uZW50QXVkaW99IGluIHRoZSBncmFwaCB3aWxsIGNvbm5lY3QgdG8gdGhpcyBjb250ZXh0cyBtYXN0ZXIgZ2FpbiwgYWxsIG90aGVycyBkaXNjb25uZWN0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbGlzdGVuVG8gPSAoX2dyYXBoOiBOb2RlIHwgbnVsbCk6IHZvaWQgPT4ge1xyXG4gICAgICBpZiAodGhpcy5ncmFwaClcclxuICAgICAgICB0aGlzLmdyYXBoLmJyb2FkY2FzdEV2ZW50KG5ldyBFdmVudChFVkVOVF9BVURJTy5DSElMRF9SRU1PVkUpKTtcclxuICAgICAgaWYgKCFfZ3JhcGgpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB0aGlzLmdyYXBoID0gX2dyYXBoO1xyXG4gICAgICB0aGlzLmdyYXBoLmJyb2FkY2FzdEV2ZW50KG5ldyBFdmVudChFVkVOVF9BVURJTy5DSElMRF9BUFBFTkQpKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgRlVER0UtZ3JhcGggY3VycmVudGx5IGxpc3RlbmluZyB0b1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0R3JhcGhMaXN0ZW5pbmdUbyA9ICgpOiBOb2RlID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGg7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSB7QGxpbmsgQ29tcG9uZW50QXVkaW9MaXN0ZW5lcn0gdGhhdCBzZXJ2ZXMgdGhlIHNwYXRpYWwgbG9jYXRpb24gYW5kIG9yaWVudGF0aW9uIGZvciB0aGlzIGNvbnRleHRzIGxpc3RlbmVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBsaXN0ZW5XaXRoID0gKF9jbXBMaXN0ZW5lcjogQ29tcG9uZW50QXVkaW9MaXN0ZW5lciB8IG51bGwpOiB2b2lkID0+IHtcclxuICAgICAgdGhpcy5jbXBMaXN0ZW5lciA9IF9jbXBMaXN0ZW5lcjtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBzcGF0aWFsIHNldHRpbmdzIG9mIHRoZSBBdWRpb05vZGVzIGVmZmVjdGVkIGluIHRoZSBjdXJyZW50IEZVREdFLWdyYXBoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXRlICE9IFwicnVubmluZ1wiKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgLy8gdGhpcy5ncmFwaC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uVVBEQVRFKSk7XHJcbiAgICAgIHRoaXMuZ3JhcGguYnJvYWRjYXN0RXZlbnQoQXVkaW9NYW5hZ2VyLmV2ZW50VXBkYXRlKTtcclxuICAgICAgaWYgKHRoaXMuY21wTGlzdGVuZXIpXHJcbiAgICAgICAgdGhpcy5jbXBMaXN0ZW5lci51cGRhdGUodGhpcy5saXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gIH1cclxufSIsIi8vIG5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gICAgXHJcbi8vICAgICAvKipcclxuLy8gICAgICAqIEVudW1lcmF0b3IgZm9yIGFsbCBwb3NzaWJsZSBPc2NpbGxhdG9yIFR5cGVzXHJcbi8vICAgICAgKi9cclxuLy8gICAgIHR5cGUgT1NDSUxMQVRPUl9UWVBFID0gXCJzaW5lXCIgfCBcInNxdWFyZVwiIHwgXCJzYXd0b290aFwiIHwgXCJ0cmlhbmdsZVwiIHwgXCJjdXN0b21cIjtcclxuXHJcbi8vICAgICAvKipcclxuLy8gICAgICAqIEludGVyZmFjZSB0byBjcmVhdGUgQ3VzdG9tIE9zY2lsbGF0b3IgVHlwZXMuXHJcbi8vICAgICAgKiBTdGFydC0vRW5kcG9pbnQgb2YgYSBjdXN0dW0gY3VydmUgZS5nLiBzaW5lIGN1cnZlLlxyXG4vLyAgICAgICogQm90aCBwYXJhbWV0ZXJzIG5lZWQgdG8gYmUgaW5iZXR3ZWVuIC0xIGFuZCAxLlxyXG4vLyAgICAgICogQHBhcmFtIHN0YXJ0cG9pbnQgc3RhcnRwb2ludCBvZiBhIGN1cnZlIFxyXG4vLyAgICAgICogQHBhcmFtIGVuZHBvaW50IEVuZHBvaW50IG9mIGEgY3VydmUgXHJcbi8vICAgICAgKi9cclxuLy8gICAgIGludGVyZmFjZSBPc2NpbGxhdG9yV2F2ZSB7XHJcbi8vICAgICAgICAgc3RhcnRwb2ludDogbnVtYmVyO1xyXG4vLyAgICAgICAgIGVuZHBvaW50OiBudW1iZXI7XHJcbi8vICAgICB9XHJcbi8vICAgICAvKipcclxuLy8gICAgICAqIEFkZCBhbiB7QGxpbmsgQXVkaW9GaWx0ZXJ9IHRvIGFuIHtAbGluayBBdWRpb11dXHJcbi8vICAgICAgKiBAYXV0aG9ycyBUaG9tYXMgRG9ybmVyLCBIRlUsIDIwMTlcclxuLy8gICAgICAqL1xyXG4vLyAgICAgZXhwb3J0IGNsYXNzIEF1ZGlvT3NjaWxsYXRvciB7XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBhdWRpb09zY2lsbGF0b3I6IE9zY2lsbGF0b3JOb2RlOyBcclxuXHJcbi8vICAgICAgICAgcHJpdmF0ZSBmcmVxdWVuY3k6IG51bWJlcjtcclxuLy8gICAgICAgICBwcml2YXRlIG9zY2lsbGF0b3JUeXBlOiBPU0NJTExBVE9SX1RZUEU7XHJcbi8vICAgICAgICAgcHJpdmF0ZSBvc2NpbGxhdG9yV2F2ZTogUGVyaW9kaWNXYXZlO1xyXG5cclxuLy8gICAgICAgICBwcml2YXRlIGxvY2FsR2FpbjogR2Fpbk5vZGU7XHJcbi8vICAgICAgICAgcHJpdmF0ZSBsb2NhbEdhaW5WYWx1ZTogbnVtYmVyO1xyXG5cclxuLy8gICAgICAgICBjb25zdHJ1Y3RvcihfYXVkaW9TZXR0aW5nczogQXVkaW9TZXR0aW5ncywgX29zY2lsbGF0b3JUeXBlPzogT1NDSUxMQVRPUl9UWVBFKSB7XHJcbi8vICAgICAgICAgICAgIHRoaXMuYXVkaW9Pc2NpbGxhdG9yID0gX2F1ZGlvU2V0dGluZ3MuZ2V0QXVkaW9Db250ZXh0KCkuY3JlYXRlT3NjaWxsYXRvcigpO1xyXG4vLyAgICAgICAgICAgICB0aGlzLmxvY2FsR2FpbiA9IF9hdWRpb1NldHRpbmdzLmdldEF1ZGlvQ29udGV4dCgpLmNyZWF0ZUdhaW4oKTtcclxuLy8gICAgICAgICAgICAgdGhpcy5vc2NpbGxhdG9yVHlwZSA9IF9vc2NpbGxhdG9yVHlwZTtcclxuLy8gICAgICAgICAgICAgaWYgKHRoaXMub3NjaWxsYXRvclR5cGUgIT0gXCJjdXN0b21cIikge1xyXG4vLyAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb09zY2lsbGF0b3IudHlwZSA9IHRoaXMub3NjaWxsYXRvclR5cGU7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3NjaWxsYXRvcldhdmUpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvT3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUodGhpcy5vc2NpbGxhdG9yV2F2ZSk7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNyZWF0ZSBhIEN1c3RvbSBQZXJpb2RpYyBXYXZlIGZpcnN0IHRvIHVzZSBDdXN0b20gVHlwZVwiKTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIHNldE9zY2lsbGF0b3JUeXBlKF9vc2NpbGxhdG9yVHlwZTogT1NDSUxMQVRPUl9UWVBFKTogdm9pZCB7XHJcbi8vICAgICAgICAgICAgIGlmICh0aGlzLm9zY2lsbGF0b3JUeXBlICE9IFwiY3VzdG9tXCIpIHtcclxuLy8gICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9Pc2NpbGxhdG9yLnR5cGUgPSB0aGlzLm9zY2lsbGF0b3JUeXBlO1xyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9zY2lsbGF0b3JXYXZlKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb09zY2lsbGF0b3Iuc2V0UGVyaW9kaWNXYXZlKHRoaXMub3NjaWxsYXRvcldhdmUpO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBwdWJsaWMgZ2V0T3NjaWxsYXRvclR5cGUoKTogT1NDSUxMQVRPUl9UWVBFIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIHRoaXMub3NjaWxsYXRvclR5cGU7XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBwdWJsaWMgY3JlYXRlUGVyaW9kaWNXYXZlKF9hdWRpb1NldHRpbmdzOiBBdWRpb1NldHRpbmdzLCBfcmVhbDogT3NjaWxsYXRvcldhdmUsIF9pbWFnOiBPc2NpbGxhdG9yV2F2ZSk6IHZvaWQge1xyXG4vLyAgICAgICAgICAgICBsZXQgd2F2ZVJlYWw6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XHJcbi8vICAgICAgICAgICAgIHdhdmVSZWFsWzBdID0gX3JlYWwuc3RhcnRwb2ludDtcclxuLy8gICAgICAgICAgICAgd2F2ZVJlYWxbMV0gPSBfcmVhbC5lbmRwb2ludDtcclxuXHJcbi8vICAgICAgICAgICAgIGxldCB3YXZlSW1hZzogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcclxuLy8gICAgICAgICAgICAgd2F2ZUltYWdbMF0gPSBfaW1hZy5zdGFydHBvaW50O1xyXG4vLyAgICAgICAgICAgICB3YXZlSW1hZ1sxXSA9IF9pbWFnLmVuZHBvaW50O1xyXG5cclxuLy8gICAgICAgICAgICAgdGhpcy5vc2NpbGxhdG9yV2F2ZSA9IF9hdWRpb1NldHRpbmdzLmdldEF1ZGlvQ29udGV4dCgpLmNyZWF0ZVBlcmlvZGljV2F2ZSh3YXZlUmVhbCwgd2F2ZUltYWcpO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIHNldExvY2FsR2FpbihfbG9jYWxHYWluOiBHYWluTm9kZSk6IHZvaWQge1xyXG4vLyAgICAgICAgICAgICB0aGlzLmxvY2FsR2FpbiA9IF9sb2NhbEdhaW47XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBwdWJsaWMgZ2V0TG9jYWxHYWluKCk6IEdhaW5Ob2RlIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxHYWluO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIHNldExvY2FsR2FpblZhbHVlKF9sb2NhbEdhaW5WYWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbi8vICAgICAgICAgICAgIHRoaXMubG9jYWxHYWluVmFsdWUgPSBfbG9jYWxHYWluVmFsdWU7XHJcbi8vICAgICAgICAgICAgIHRoaXMubG9jYWxHYWluLmdhaW4udmFsdWUgPSB0aGlzLmxvY2FsR2FpblZhbHVlO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIGdldExvY2FsR2FpblZhbHVlKCk6IG51bWJlciB7XHJcbi8vICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsR2FpblZhbHVlO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIHNldEZyZXF1ZW5jeShfYXVkaW9TZXR0aW5nczogQXVkaW9TZXR0aW5ncywgX2ZyZXF1ZW5jeTogbnVtYmVyKTogdm9pZCB7XHJcbi8vICAgICAgICAgICAgIHRoaXMuZnJlcXVlbmN5ID0gX2ZyZXF1ZW5jeTtcclxuLy8gICAgICAgICAgICAgdGhpcy5hdWRpb09zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHRoaXMuZnJlcXVlbmN5LCBfYXVkaW9TZXR0aW5ncy5nZXRBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZSk7XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBwdWJsaWMgZ2V0RnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbi8vICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyZXF1ZW5jeTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBjcmVhdGVTbmFyZShfYXVkaW9TZXR0aW5nczogQXVkaW9TZXR0aW5ncyk6IHZvaWQge1xyXG4vLyAgICAgICAgICAgICB0aGlzLnNldE9zY2lsbGF0b3JUeXBlKFwidHJpYW5nbGVcIik7XHJcbi8vICAgICAgICAgICAgIHRoaXMuc2V0RnJlcXVlbmN5KF9hdWRpb1NldHRpbmdzLCAxMDApO1xyXG4vLyAgICAgICAgICAgICB0aGlzLnNldExvY2FsR2FpblZhbHVlKDApO1xyXG4vLyAgICAgICAgICAgICB0aGlzLmxvY2FsR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIF9hdWRpb1NldHRpbmdzLmdldEF1ZGlvQ29udGV4dCgpLmN1cnJlbnRUaW1lKTtcclxuLy8gICAgICAgICAgICAgdGhpcy5sb2NhbEdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDEsIF9hdWRpb1NldHRpbmdzLmdldEF1ZGlvQ29udGV4dCgpLmN1cnJlbnRUaW1lICsgLjEpO1xyXG5cclxuLy8gICAgICAgICAgICAgdGhpcy5hdWRpb09zY2lsbGF0b3IuY29ubmVjdCh0aGlzLmxvY2FsR2Fpbik7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyB9IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQXR0YWNoZWQgdG8gYSB7QGxpbmsgTm9kZX0gd2l0aCBhbiBhdHRhY2hlZCB7QGxpbmsgQ29tcG9uZW50Q2FtZXJhfSB0aGlzIGNhdXNlcyB0aGUgcmVuZGVyZWQgaW1hZ2UgdG8gcmVjZWl2ZSBhbiBhbWJpZW50IG9jY2x1c2lvbiBlZmZlY3QuXHJcbiAgICogQGF1dGhvcnMgUm9sYW5kIEhlZXIsIEhGVSwgMjAyMyB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRBbWJpZW50T2NjbHVzaW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRBbWJpZW50T2NjbHVzaW9uKTtcclxuXHJcbiAgICBwdWJsaWMgc2FtcGxlUmFkaXVzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYmlhczogbnVtYmVyO1xyXG4gICAgcHVibGljIGF0dGVudWF0aW9uQ29uc3RhbnQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhdHRlbnVhdGlvbkxpbmVhcjogbnVtYmVyO1xyXG4gICAgcHVibGljIGF0dGVudWF0aW9uUXVhZHJhdGljOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9zYW1wbGVSYWRpdXM6IG51bWJlciA9IDE2LCBfYmlhczogbnVtYmVyID0gMC4wNywgX2F0dGVudWF0aW9uQ29uc3RhbnQ6IG51bWJlciA9IDIuNSwgX2F0dGVudWF0aW9uTGluZWFyOiBudW1iZXIgPSAxLCBfYXR0ZW51YXRpb25RdWFkcmF0aWM6IG51bWJlciA9IDEpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zYW1wbGVSYWRpdXMgPSBfc2FtcGxlUmFkaXVzO1xyXG4gICAgICB0aGlzLmJpYXMgPSBfYmlhcztcclxuICAgICAgdGhpcy5hdHRlbnVhdGlvbkNvbnN0YW50ID0gX2F0dGVudWF0aW9uQ29uc3RhbnQ7XHJcbiAgICAgIHRoaXMuYXR0ZW51YXRpb25MaW5lYXIgPSBfYXR0ZW51YXRpb25MaW5lYXI7XHJcbiAgICAgIHRoaXMuYXR0ZW51YXRpb25RdWFkcmF0aWMgPSBfYXR0ZW51YXRpb25RdWFkcmF0aWM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBzYW1wbGVSYWRpdXM6IHRoaXMuc2FtcGxlUmFkaXVzLFxyXG4gICAgICAgIGJpYXM6IHRoaXMuYmlhcyxcclxuICAgICAgICBhdHRlbnVhdGlvbkNvbnN0YW50OiB0aGlzLmF0dGVudWF0aW9uQ29uc3RhbnQsXHJcbiAgICAgICAgYXR0ZW51YXRpb25MaW5lYXI6IHRoaXMuYXR0ZW51YXRpb25MaW5lYXIsXHJcbiAgICAgICAgYXR0ZW51YXRpb25RdWFkcmF0aWM6IHRoaXMuYXR0ZW51YXRpb25RdWFkcmF0aWNcclxuICAgICAgfTtcclxuICAgICAgc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLnNhbXBsZVJhZGl1cyA9IF9zZXJpYWxpemF0aW9uLnNhbXBsZVJhZGl1cztcclxuICAgICAgdGhpcy5iaWFzID0gX3NlcmlhbGl6YXRpb24uYmlhcztcclxuICAgICAgdGhpcy5hdHRlbnVhdGlvbkNvbnN0YW50ID0gX3NlcmlhbGl6YXRpb24uYXR0ZW51YXRpb25Db25zdGFudDtcclxuICAgICAgdGhpcy5hdHRlbnVhdGlvbkxpbmVhciA9IF9zZXJpYWxpemF0aW9uLmF0dGVudWF0aW9uTGluZWFyO1xyXG4gICAgICB0aGlzLmF0dGVudWF0aW9uUXVhZHJhdGljID0gX3NlcmlhbGl6YXRpb24uYXR0ZW51YXRpb25RdWFkcmF0aWM7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9UaW1lL0xvb3AudHNcIi8+XHJcbi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vQW5pbWF0aW9uL0FuaW1hdGlvbi50c1wiLz5cclxuXHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBIb2xkcyBhIHJlZmVyZW5jZSB0byBhbiB7QGxpbmsgQW5pbWF0aW9ufSBhbmQgY29udHJvbHMgaXQuIENvbnRyb2xzIHF1YW50aXphdGlvbiBhbmQgcGxheW1vZGUgYXMgd2VsbCBhcyBzcGVlZC5cclxuICAgKiBAYXV0aG9ycyBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudEFuaW1hdG9yIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRBbmltYXRvcik7XHJcbiAgICAvL1RPRE86IGFkZCBmdW5jdGlvbmFsaXR5IHRvIGJsZW5kIGZyb20gb25lIGFuaW1hdGlvbiB0byBhbm90aGVyLlxyXG4gICAgcHVibGljIGFuaW1hdGlvbjogQW5pbWF0aW9uO1xyXG4gICAgcHVibGljIHBsYXltb2RlOiBBTklNQVRJT05fUExBWU1PREU7XHJcbiAgICBwdWJsaWMgcXVhbnRpemF0aW9uOiBBTklNQVRJT05fUVVBTlRJWkFUSU9OO1xyXG4gICAgcHVibGljIHNjYWxlV2l0aEdhbWVUaW1lOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHB1YmxpYyBhbmltYXRlSW5FZGl0b3I6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAjc2NhbGU6IG51bWJlciA9IDE7XHJcbiAgICAjdGltZUxvY2FsOiBUaW1lO1xyXG4gICAgI3ByZXZpb3VzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYW5pbWF0aW9uPzogQW5pbWF0aW9uLCBfcGxheW1vZGU6IEFOSU1BVElPTl9QTEFZTU9ERSA9IEFOSU1BVElPTl9QTEFZTU9ERS5MT09QLCBfcXVhbnRpemF0aW9uOiBBTklNQVRJT05fUVVBTlRJWkFUSU9OID0gQU5JTUFUSU9OX1FVQU5USVpBVElPTi5DT05USU5PVVMpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5wbGF5bW9kZSA9IF9wbGF5bW9kZTtcclxuICAgICAgdGhpcy5xdWFudGl6YXRpb24gPSBfcXVhbnRpemF0aW9uO1xyXG4gICAgICB0aGlzLmFuaW1hdGlvbiA9IF9hbmltYXRpb247XHJcblxyXG4gICAgICB0aGlzLiN0aW1lTG9jYWwgPSBuZXcgVGltZSgpO1xyXG5cclxuICAgICAgLy9UT0RPOiB1cGRhdGUgYW5pbWF0aW9uIHRvdGFsIHRpbWUgd2hlbiBsb2FkaW5nIGEgZGlmZmVyZW50IGFuaW1hdGlvbj9cclxuICAgICAgdGhpcy5hbmltYXRpb24/LmNhbGN1bGF0ZVRvdGFsVGltZSgpO1xyXG5cclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9SRU1PVkUsICgpID0+IHRoaXMuYWN0aXZhdGUoZmFsc2UpKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsICgpID0+IHtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DSElMRF9SRU1PVkUsICgpID0+IHRoaXMuYWN0aXZhdGUoZmFsc2UpKTtcclxuICAgICAgICB0aGlzLmFjdGl2YXRlKHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHNjYWxlKF9zY2FsZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NjYWxlID0gX3NjYWxlO1xyXG4gICAgICB0aGlzLnVwZGF0ZVNjYWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzY2FsZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IHJldHVybiB0aGUgY3VycmVudCBzYW1wbGUgdGltZSBvZiB0aGUgYW5pbWF0aW9uICBcclxuICAgICAqIC0gc2V0OiBqdW1wIHRvIGEgY2VydGFpbiBzYW1wbGUgdGltZSBpbiB0aGUgYW5pbWF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgdGltZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdGltZUxvY2FsLmdldCgpICUgdGhpcy5hbmltYXRpb24udG90YWxUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgdGltZShfdGltZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuanVtcFRvKF90aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLmFjdGl2YXRlKF9vbik7XHJcbiAgICAgIGlmICghdGhpcy5ub2RlKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIHRoaXMuYWN0aXZhdGVMaXN0ZW5lcnMoX29uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEp1bXBzIHRvIGEgY2VydGFpbiB0aW1lIGluIHRoZSBhbmltYXRpb24gdG8gcGxheSBmcm9tIHRoZXJlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMganVtcFRvKF90aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jdGltZUxvY2FsLnNldChfdGltZSk7XHJcbiAgICAgIHRoaXMuI3ByZXZpb3VzID0gX3RpbWU7XHJcbiAgICAgIF90aW1lID0gX3RpbWUgJSB0aGlzLmFuaW1hdGlvbi50b3RhbFRpbWU7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gdGhpcy5hbmltYXRpb24uZ2V0U3RhdGUoX3RpbWUsIHRoaXMuYW5pbWF0aW9uLmNhbGN1bGF0ZURpcmVjdGlvbihfdGltZSwgdGhpcy5wbGF5bW9kZSksIHRoaXMucXVhbnRpemF0aW9uKTtcclxuICAgICAgdGhpcy5ub2RlLmFwcGx5QW5pbWF0aW9uKG11dGF0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSnVtcHMgdG8gYSBjZXJ0YWluIGxhYmVsIGluIHRoZSBhbmltYXRpb24gaWYgZGVmaW5lZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMganVtcFRvTGFiZWwoX2xhYmVsOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgbGV0IHRpbWU6IG51bWJlciA9IHRoaXMuYW5pbWF0aW9uLmxhYmVsc1tfbGFiZWxdO1xyXG4gICAgICBpZiAodGltZSlcclxuICAgICAgICB0aGlzLmp1bXBUbyh0aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcmNlcyBhbiB1cGRhdGUgb2YgdGhlIGFuaW1hdGlvbiBmcm9tIG91dHNpZGUuIFVzZWQgaW4gdGhlIFZpZXdBbmltYXRpb24uIFNob3VsZG4ndCBiZSB1c2VkIGR1cmluZyB0aGUgZ2FtZS5cclxuICAgICAqIEBwYXJhbSBfdGltZSB0aGUgKHVuc2NhbGVkKSB0aW1lIHRvIHVwZGF0ZSB0aGUgYW5pbWF0aW9uIHdpdGguXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgTXV0YXRvciBmb3IgQW5pbWF0aW9uLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZUFuaW1hdGlvbihfdGltZTogbnVtYmVyKTogTXV0YXRvciB7XHJcbiAgICAgIHRoaXMuI3ByZXZpb3VzID0gdW5kZWZpbmVkO1xyXG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVBbmltYXRpb25Mb29wKG51bGwsIF90aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gdHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5pZEFuaW1hdGlvbiA9IHRoaXMuYW5pbWF0aW9uLmlkUmVzb3VyY2U7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucGxheW1vZGUgPSB0aGlzLnBsYXltb2RlO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnF1YW50aXphdGlvbiA9IHRoaXMucXVhbnRpemF0aW9uO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNjYWxlID0gdGhpcy5zY2FsZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zY2FsZVdpdGhHYW1lVGltZSA9IHRoaXMuc2NhbGVXaXRoR2FtZVRpbWU7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uYW5pbWF0ZUluRWRpdG9yID0gdGhpcy5hbmltYXRlSW5FZGl0b3I7XHJcblxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uID0gPEFuaW1hdGlvbj5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkQW5pbWF0aW9uKTtcclxuICAgICAgdGhpcy5wbGF5bW9kZSA9IF9zZXJpYWxpemF0aW9uLnBsYXltb2RlO1xyXG4gICAgICB0aGlzLnF1YW50aXphdGlvbiA9IF9zZXJpYWxpemF0aW9uLnF1YW50aXphdGlvbjtcclxuICAgICAgdGhpcy5zY2FsZSA9IF9zZXJpYWxpemF0aW9uLnNjYWxlO1xyXG4gICAgICB0aGlzLnNjYWxlV2l0aEdhbWVUaW1lID0gX3NlcmlhbGl6YXRpb24uc2NhbGVXaXRoR2FtZVRpbWU7XHJcbiAgICAgIHRoaXMuYW5pbWF0ZUluRWRpdG9yID0gX3NlcmlhbGl6YXRpb24uYW5pbWF0ZUluRWRpdG9yO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IuYW5pbWF0ZUluRWRpdG9yKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uKDApO1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGVMaXN0ZW5lcnModGhpcy5hY3RpdmUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLnBsYXltb2RlKVxyXG4gICAgICAgIHR5cGVzLnBsYXltb2RlID0gQU5JTUFUSU9OX1BMQVlNT0RFO1xyXG4gICAgICBpZiAodHlwZXMucXVhbnRpemF0aW9uKVxyXG4gICAgICAgIHR5cGVzLnF1YW50aXphdGlvbiA9IEFOSU1BVElPTl9RVUFOVElaQVRJT047XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgYWN0aXZhdGVMaXN0ZW5lcnMoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIGlmIChfb24gJiYgKFByb2plY3QubW9kZSAhPSBNT0RFLkVESVRPUiB8fCBQcm9qZWN0Lm1vZGUgPT0gTU9ERS5FRElUT1IgJiYgdGhpcy5hbmltYXRlSW5FZGl0b3IpKSB7XHJcbiAgICAgICAgVGltZS5nYW1lLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuVElNRV9TQ0FMRUQsIHRoaXMudXBkYXRlU2NhbGUpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlJFTkRFUl9QUkVQQVJFLCB0aGlzLnVwZGF0ZUFuaW1hdGlvbkxvb3ApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIFRpbWUuZ2FtZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULlRJTUVfU0NBTEVELCB0aGlzLnVwZGF0ZVNjYWxlKTtcclxuICAgICAgICB0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5SRU5ERVJfUFJFUEFSRSwgdGhpcy51cGRhdGVBbmltYXRpb25Mb29wKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiB1cGRhdGVBbmltYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgQW5pbWF0aW9uLlxyXG4gICAgICogVXNlcyB0aGUgYnVpbHQtaW4gdGltZSB1bmxlc3MgYSBkaWZmZXJlbnQgdGltZSBpcyBzcGVjaWZpZWQuXHJcbiAgICAgKiBNYXkgYWxzbyBiZSBjYWxsZWQgZnJvbSB1cGRhdGVBbmltYXRpb24oKS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVBbmltYXRpb25Mb29wID0gKF9lOiBFdmVudCwgX3RpbWU/OiBudW1iZXIpOiBNdXRhdG9yID0+IHtcclxuICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uLnRvdGFsVGltZSA9PSAwKSBcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIGxldCB0aW1lOiBudW1iZXIgPSBfdGltZSB8fCBfdGltZSA9PT0gMCA/IF90aW1lIDogdGhpcy4jdGltZUxvY2FsLmdldCgpO1xyXG4gICAgICBpZiAodGhpcy5xdWFudGl6YXRpb24gPT0gQU5JTUFUSU9OX1FVQU5USVpBVElPTi5GUkFNRVMpIHtcclxuICAgICAgICB0aW1lID0gdGhpcy4jcHJldmlvdXMgKyAoMTAwMCAvIHRoaXMuYW5pbWF0aW9uLmZwcyk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGRpcmVjdGlvbjogbnVtYmVyID0gdGhpcy5hbmltYXRpb24uY2FsY3VsYXRlRGlyZWN0aW9uKHRpbWUsIHRoaXMucGxheW1vZGUpO1xyXG4gICAgICB0aW1lID0gdGhpcy5hbmltYXRpb24uZ2V0TW9kYWxUaW1lKHRpbWUsIHRoaXMucGxheW1vZGUsIHRoaXMuI3RpbWVMb2NhbC5nZXRPZmZzZXQoKSk7XHJcbiAgICAgIHRoaXMuZXhlY3V0ZUV2ZW50cyh0aGlzLmFuaW1hdGlvbi5nZXRFdmVudHNUb0ZpcmUodGhpcy4jcHJldmlvdXMsIHRpbWUsIHRoaXMucXVhbnRpemF0aW9uLCBkaXJlY3Rpb24pKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLiNwcmV2aW91cyAhPSB0aW1lKSB7XHJcbiAgICAgICAgdGhpcy4jcHJldmlvdXMgPSB0aW1lO1xyXG4gICAgICAgIHRpbWUgPSB0aW1lICUgdGhpcy5hbmltYXRpb24udG90YWxUaW1lO1xyXG4gICAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gdGhpcy5hbmltYXRpb24uZ2V0U3RhdGUodGltZSwgZGlyZWN0aW9uLCB0aGlzLnF1YW50aXphdGlvbik7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZSkge1xyXG4gICAgICAgICAgdGhpcy5ub2RlLmFwcGx5QW5pbWF0aW9uKG11dGF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyBhbGwgY3VzdG9tIGV2ZW50cyB0aGUgQW5pbWF0aW9uIHNob3VsZCBoYXZlIGZpcmVkIGJldHdlZW4gdGhlIGxhc3QgZnJhbWUgYW5kIHRoZSBjdXJyZW50IGZyYW1lLlxyXG4gICAgICogQHBhcmFtIF9ldmVudHMgYSBsaXN0IG9mIG5hbWVzIG9mIGN1c3RvbSBldmVudHMgdG8gZmlyZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4ZWN1dGVFdmVudHMoX2V2ZW50czogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IF9ldmVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KF9ldmVudHNbaV0pKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgc2NhbGUgb2YgdGhlIGFuaW1hdGlvbiBpZiB0aGUgdXNlciBjaGFuZ2VzIGl0IG9yIGlmIHRoZSBnbG9iYWwgZ2FtZSB0aW1lciBjaGFuZ2VkIGl0cyBzY2FsZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVTY2FsZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgbGV0IG5ld1NjYWxlOiBudW1iZXIgPSB0aGlzLiNzY2FsZTtcclxuICAgICAgaWYgKHRoaXMuc2NhbGVXaXRoR2FtZVRpbWUpXHJcbiAgICAgICAgbmV3U2NhbGUgKj0gVGltZS5nYW1lLmdldFNjYWxlKCk7XHJcbiAgICAgIHRoaXMuI3RpbWVMb2NhbC5zZXRTY2FsZShuZXdTY2FsZSk7XHJcbiAgICB9O1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIGV4cG9ydCBlbnVtIEFVRElPX1BBTk5FUiB7XHJcbiAgICBDT05FX0lOTkVSX0FOR0xFID0gXCJjb25lSW5uZXJBbmdsZVwiLFxyXG4gICAgQ09ORV9PVVRFUl9BTkdMRSA9IFwiY29uZU91dGVyQW5nbGVcIixcclxuICAgIENPTkVfT1VURVJfR0FJTiA9IFwiY29uZU91dGVyR2FpblwiLFxyXG4gICAgRElTVEFOQ0VfTU9ERUwgPSBcImRpc3RhbmNlTW9kZWxcIixcclxuICAgIE1BWF9ESVNUQU5DRSA9IFwibWF4RGlzdGFuY2VcIixcclxuICAgIFBBTk5JTkdfTU9ERUwgPSBcInBhbm5pbmdNb2RlbFwiLFxyXG4gICAgUkVGX0RJU1RBTkNFID0gXCJyZWZEaXN0YW5jZVwiLFxyXG4gICAgUk9MTE9GRl9GQUNUT1IgPSBcInJvbGxvZmZGYWN0b3JcIlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGVudW0gQVVESU9fTk9ERV9UWVBFIHtcclxuICAgIFNPVVJDRSwgUEFOTkVSLCBHQUlOXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCdWlsZHMgYSBtaW5pbWFsIGF1ZGlvIGdyYXBoIChieSBkZWZhdWx0IGluIHtAbGluayBBdWRpb01hbmFnZXJ9LmRlZmF1bHQpIGFuZCBzeW5jaHJvbml6ZXMgaXQgd2l0aCB0aGUgY29udGFpbmluZyB7QGxpbmsgTm9kZX1cclxuICAgKiBgYGB0ZXh0XHJcbiAgICog4pSMIEF1ZGlvTWFuYWdlciguZGVmYXVsdCkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICog4pSCIOKUjCBDb21wb25lbnRBdWRpbyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICAgICAgICAg4pSCXHJcbiAgICog4pSCIOKUgiAgICDilIzilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilJAg4pSCIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCDilIIgIFxyXG4gICAqIOKUgiDilIIgICAg4pSCc291cmNl4pSCIOKGkiDilIJwYW5uZXLilIIg4oaSIOKUgiBnYWluIOKUgiDihpIg4pSCIGdhaW4g4pSCIOKUglxyXG4gICAqIOKUgiDilIIgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYIOKUgiDilJTilIDilIDilIDilIDilIDilIDilJgg4pSCICBcclxuICAgKiDilIIg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAgICAgICAgIOKUglxyXG4gICAqIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIFRob21hcyBEb3JuZXIsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudEF1ZGlvIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRBdWRpbyk7XHJcbiAgICAvKiogcGxhY2VzIGFuZCBkaXJlY3RzIHRoZSBwYW5uZXIgcmVsYXRpdmUgdG8gdGhlIHdvcmxkIHRyYW5zZm9ybSBvZiB0aGUge0BsaW5rIE5vZGV9ICAqL1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc2luZ2xldG9uOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBhdWRpbzogQXVkaW87XHJcbiAgICBwcml2YXRlIGdhaW46IEdhaW5Ob2RlO1xyXG4gICAgcHJpdmF0ZSBwYW5uZXI6IFBhbm5lck5vZGU7XHJcbiAgICBwcml2YXRlIHNvdXJjZTogQXVkaW9CdWZmZXJTb3VyY2VOb2RlO1xyXG4gICAgcHJpdmF0ZSBhdWRpb01hbmFnZXI6IEF1ZGlvTWFuYWdlcjtcclxuICAgIHByaXZhdGUgcGxheWluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBsaXN0ZW5lZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYXVkaW86IEF1ZGlvID0gbnVsbCwgX2xvb3A6IGJvb2xlYW4gPSBmYWxzZSwgX3N0YXJ0OiBib29sZWFuID0gZmFsc2UsIF9hdWRpb01hbmFnZXI6IEF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5kZWZhdWx0KSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuaW5zdGFsbChfYXVkaW9NYW5hZ2VyKTtcclxuICAgICAgdGhpcy5jcmVhdGVTb3VyY2UoX2F1ZGlvLCBfbG9vcCk7XHJcblxyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX0FERCwgdGhpcy5oYW5kbGVBdHRhY2gpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX1JFTU9WRSwgdGhpcy5oYW5kbGVBdHRhY2gpO1xyXG5cclxuICAgICAgaWYgKF9zdGFydClcclxuICAgICAgICB0aGlzLnBsYXkoX3N0YXJ0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHZvbHVtZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmdhaW4uZ2Fpbi52YWx1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHZvbHVtZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBsb29wKF9vbjogYm9vbGVhbikge1xyXG4gICAgICB0aGlzLnNvdXJjZS5sb29wID0gX29uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9vcCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmxvb3A7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBwbGF5YmFja1JhdGUoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcGxheWJhY2tSYXRlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNQbGF5aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wbGF5aW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNBdHRhY2hlZCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMubm9kZSAhPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNMaXN0ZW5lZCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBnaXZlbiB7QGxpbmsgQXVkaW99IGFzIHRoZSBhdWRpbyBzb3VyY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEF1ZGlvKF9hdWRpbzogQXVkaW8pOiB2b2lkIHtcclxuICAgICAgdGhpcy5jcmVhdGVTb3VyY2UoX2F1ZGlvLCB0aGlzLnNvdXJjZS5sb29wKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHtAbGluayBBdWRpb30gY3VycmVudGx5IHVzZWQgYXMgYXVkaW8gc291cmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRBdWRpbygpOiBBdWRpbyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmF1ZGlvO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBwcm9wZXJ0eSBvZiB0aGUgcGFubmVyIHRvIHRoZSBnaXZlbiB2YWx1ZS4gVXNlIHRvIG1hbmlwdWxhdGUgcmFuZ2UgYW5kIHJvbGxvZmYgZXRjLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UGFubmVyKF9wcm9wZXJ0eTogQVVESU9fUEFOTkVSLCBfdmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBSZWZsZWN0LnNldCh0aGlzLnBhbm5lciwgX3Byb3BlcnR5LCBfdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IG1heSBiZSB1c2VkIGZvciBzZXJpYWxpemF0aW9uIG9mIEF1ZGlvTm9kZXNcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbXV0YXRvciBmb3IgdGhlIHNwZWNpZmllZCBBdWRpb05vZGUgb2YgdGhlIHN0YW5kYXJkIGdyYXBoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yT2ZOb2RlKF90eXBlOiBBVURJT19OT0RFX1RZUEUpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG5vZGU6IEF1ZGlvTm9kZSA9IHRoaXMuZ2V0QXVkaW9Ob2RlKF90eXBlKTtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBnZXRNdXRhdG9yT2ZBcmJpdHJhcnkobm9kZSk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc3BlY2lmaWVkIEF1ZGlvTm9kZSBvZiB0aGUgc3RhbmRhcmQgZ3JhcGggZm9yIGZ1cnRoZXIgbWFuaXB1bGF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRBdWRpb05vZGUoX3R5cGU6IEFVRElPX05PREVfVFlQRSk6IEF1ZGlvTm9kZSB7XHJcbiAgICAgIHN3aXRjaCAoX3R5cGUpIHtcclxuICAgICAgICBjYXNlIEFVRElPX05PREVfVFlQRS5TT1VSQ0U6IHJldHVybiB0aGlzLnNvdXJjZTtcclxuICAgICAgICBjYXNlIEFVRElPX05PREVfVFlQRS5QQU5ORVI6IHJldHVybiB0aGlzLnBhbm5lcjtcclxuICAgICAgICBjYXNlIEFVRElPX05PREVfVFlQRS5HQUlOOiByZXR1cm4gdGhpcy5nYWluO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCBvciBzdG9wIHBsYXlpbmcgdGhlIGF1ZGlvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwbGF5KF9vbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICBpZiAoX29uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXVkaW8uaXNSZWFkeSkge1xyXG4gICAgICAgICAgdGhpcy5jcmVhdGVTb3VyY2UodGhpcy5hdWRpbywgdGhpcy5zb3VyY2UubG9vcCwgdGhpcy5wbGF5YmFja1JhdGUpO1xyXG4gICAgICAgICAgdGhpcy5zb3VyY2Uuc3RhcnQoMCwgMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihFVkVOVF9BVURJTy5SRUFEWSwgdGhpcy5obmRBdWRpb1JlYWR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVF9BVURJTy5FTkRFRCwgdGhpcy5obmRBdWRpb0VuZGVkKTtcclxuICAgICAgfSBlbHNlXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHRoaXMuc291cmNlLnN0b3AoKTtcclxuICAgICAgICB9IGNhdGNoIChfZXJyb3I6IHVua25vd24pIHsgLyogY2F0Y2ggZXhjZXB0aW9uIHdoZW4gc291cmNlIGhhc24ndCBiZWVuIHN0YXJ0ZWQuLi4gKi8gfVxyXG4gICAgICB0aGlzLnBsYXlpbmcgPSBfb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnNlcnRzIEF1ZGlvTm9kZXMgYmV0d2VlbiB0aGUgcGFubmVyIGFuZCB0aGUgbG9jYWwgZ2FpbiBvZiB0aGlzIHtAbGluayBDb21wb25lbnRBdWRpb31cclxuICAgICAqIF9pbnB1dCBhbmQgX291dHB1dCBtYXkgYmUgdGhlIHNhbWUgQXVkaW9Ob2RlLCBpZiB0aGVyZSBpcyBvbmx5IG9uZSB0byBpbnNlcnQsXHJcbiAgICAgKiBvciBtYXkgaGF2ZSBtdWx0aXBsZSBBdWRpb05vZGUgYmV0d2VlbiB0aGVtIHRvIGNyZWF0ZSBhbiBlZmZlY3QtZ3JhcGguXFxcclxuICAgICAqIE5vdGUgdGhhdCB7QGxpbmsgQ29tcG9uZW50QXVkaW99IGRvZXMgbm90IGtlZXAgdHJhY2sgb2YgaW5zZXJ0ZWQgQXVkaW9Ob2RlcyFcclxuICAgICAqIGBgYHRleHRcclxuICAgICAqIOKUjCBBdWRpb01hbmFnZXIoLmRlZmF1bHQpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxyXG4gICAgICog4pSCIOKUjCBDb21wb25lbnRBdWRpbyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICAgICAgICAg4pSCXHJcbiAgICAgKiDilIIg4pSCICAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgICAgICAgICDilIzilIDilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilJAg4pSCIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCDilIIgIFxyXG4gICAgICog4pSCIOKUgiAgICDilIJzb3VyY2XilIIg4oaSIOKUgnBhbm5lcuKUgiDihpIg4pSCX2lucHV04pSCIOKGkiAuLi4gIOKGkiDilIJfb3V0cHV04pSCIOKGkiDilIIgZ2FpbiDilIIg4oaSIOKUgiBnYWluIOKUgiDilIJcclxuICAgICAqIOKUgiDilIIgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAgICAgICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUmCDilIIg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSYIOKUgiAgXHJcbiAgICAgKiDilIIg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAgICAgICAgIOKUglxyXG4gICAgICog4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXHJcbiAgICAgKiBgYGBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluc2VydEF1ZGlvTm9kZXMoX2lucHV0OiBBdWRpb05vZGUsIF9vdXRwdXQ6IEF1ZGlvTm9kZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLnBhbm5lci5kaXNjb25uZWN0KDApO1xyXG4gICAgICBpZiAoIV9pbnB1dCAmJiAhX291dHB1dCkge1xyXG4gICAgICAgIHRoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wYW5uZXIuY29ubmVjdChfaW5wdXQpO1xyXG4gICAgICBfb3V0cHV0LmNvbm5lY3QodGhpcy5nYWluKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2YXRlIG92ZXJyaWRlLiBDb25uZWN0cyBvciBkaXNjb25uZWN0cyBBdWRpb05vZGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhY3RpdmF0ZShfb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgc3VwZXIuYWN0aXZhdGUoX29uKTtcclxuICAgICAgdGhpcy51cGRhdGVDb25uZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25uZWN0cyB0aGlzIGNvbXBvbmVudHMgZ2Fpbi1ub2RlIHRvIHRoZSBnYWluIG5vZGUgb2YgdGhlIEF1ZGlvTWFuYWdlciB0aGlzIGNvbXBvbmVudCBydW5zIG9uLlxyXG4gICAgICogT25seSBjYWxsIHRoaXMgbWV0aG9kIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGF0dGFjaGVkIHRvIGEge0BsaW5rIE5vZGV9IGJ1dCBuZWVkcyB0byBiZSBoZWFyZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbm5lY3QoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIGlmIChfb24pXHJcbiAgICAgICAgdGhpcy5nYWluLmNvbm5lY3QodGhpcy5hdWRpb01hbmFnZXIuZ2Fpbik7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmF1ZGlvTWFuYWdlci5nYWluKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd0dpem1vcygpOiB2b2lkIHtcclxuICAgICAgbGV0IG10eFNoYXBlOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUFJPRFVDVCh0aGlzLm5vZGUubXR4V29ybGQsIHRoaXMubXR4UGl2b3QpO1xyXG4gICAgICBtdHhTaGFwZS5zY2FsaW5nID0gbmV3IFZlY3RvcjMoMC41LCAwLjUsIDAuNSk7XHJcbiAgICAgIGxldCBjb2xvcjogQ29sb3IgPSBDb2xvci5DU1MoXCJjb3JuZmxvd2VyYmx1ZVwiKTtcclxuICAgICAgR2l6bW9zLmRyYXdJY29uKFRleHR1cmVEZWZhdWx0Lmljb25BdWRpbywgbXR4U2hhcGUsIGNvbG9yKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmVNdWx0aXBsZShtdHhTaGFwZSwgY29sb3IpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSA9IHRoaXMuYXVkaW8/LmlkUmVzb3VyY2U7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucGxheWluZyA9IHRoaXMucGxheWluZztcclxuICAgICAgc2VyaWFsaXphdGlvbi5sb29wID0gdGhpcy5sb29wO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnZvbHVtZSA9IHRoaXMudm9sdW1lO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdldE11dGF0b3JPZk5vZGUoQVVESU9fTk9ERV9UWVBFLlBBTk5FUikpO1xyXG4gICAgICAvLyBUT0RPOiBzZXJpYWxpemUgcGFubmVyIHBhcmFtZXRlcnNcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGxldCBhdWRpbzogQXVkaW8gPSA8QXVkaW8+YXdhaXQgUHJvamVjdC5nZXRSZXNvdXJjZShfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5jcmVhdGVTb3VyY2UoYXVkaW8sIF9zZXJpYWxpemF0aW9uLmxvb3ApO1xyXG4gICAgICB0aGlzLnZvbHVtZSA9IF9zZXJpYWxpemF0aW9uLnZvbHVtZTtcclxuICAgICAgdGhpcy5wbGF5KF9zZXJpYWxpemF0aW9uLnBsYXlpbmcpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICBsZXQgYXVkaW86IE11dGF0b3IgPSBtdXRhdG9yLmF1ZGlvO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5hdWRpbzsgLy8ganVzdCB0byByZWFycmFuZ2UgaW4gaW50ZXJmYWNlcy4uLlxyXG4gICAgICBtdXRhdG9yLmxvb3AgPSB0aGlzLmxvb3A7XHJcbiAgICAgIG11dGF0b3Iudm9sdW1lID0gdGhpcy52b2x1bWU7XHJcbiAgICAgIG11dGF0b3IuYXVkaW8gPSBhdWRpbzsgLy8uLi4gc28gYXVkaW8gY29tZXMgbGFzdFxyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICAvLyAgIC8vIHRoaXMudm9sdW1lID0gX211dGF0b3Iudm9sdW1lO1xyXG4gICAgLy8gICAvLyB0aGlzLmxvb3AgPSBfbXV0YXRvci5sb29wO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IubGlzdGVuZWQ7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBobmRBdWRpb1JlYWR5OiBFdmVudExpc3RlbmVyID0gKF9ldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgRGVidWcuZnVkZ2UoXCJBdWRpbyBzdGFydFwiLCBSZWZsZWN0LmdldChfZXZlbnQudGFyZ2V0LCBcInVybFwiKSk7XHJcbiAgICAgIGlmICh0aGlzLnBsYXlpbmcpXHJcbiAgICAgICAgdGhpcy5wbGF5KHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIGhuZEF1ZGlvRW5kZWQ6IEV2ZW50TGlzdGVuZXIgPSAoX2V2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAvLyBEZWJ1Zy5mdWRnZShcIkF1ZGlvIGVuZGVkXCIsIFJlZmxlY3QuZ2V0KF9ldmVudC50YXJnZXQsIFwidXJsXCIpKTtcclxuICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgaW5zdGFsbChfYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXIgPSBBdWRpb01hbmFnZXIuZGVmYXVsdCk6IHZvaWQge1xyXG4gICAgICBsZXQgYWN0aXZlOiBib29sZWFuID0gdGhpcy5pc0FjdGl2ZTtcclxuICAgICAgdGhpcy5hY3RpdmF0ZShmYWxzZSk7XHJcbiAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyID0gX2F1ZGlvTWFuYWdlcjtcclxuICAgICAgdGhpcy5wYW5uZXIgPSBfYXVkaW9NYW5hZ2VyLmNyZWF0ZVBhbm5lcigpO1xyXG4gICAgICB0aGlzLmdhaW4gPSBfYXVkaW9NYW5hZ2VyLmNyZWF0ZUdhaW4oKTtcclxuICAgICAgdGhpcy5wYW5uZXIuY29ubmVjdCh0aGlzLmdhaW4pO1xyXG4gICAgICB0aGlzLmdhaW4uY29ubmVjdChfYXVkaW9NYW5hZ2VyLmdhaW4pO1xyXG4gICAgICB0aGlzLmFjdGl2YXRlKGFjdGl2ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVTb3VyY2UoX2F1ZGlvOiBBdWRpbywgX2xvb3A6IGJvb2xlYW4sIF9wbGF5YmFja1JhdGU6IG51bWJlciA9IDEuMCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5zb3VyY2UpIHtcclxuICAgICAgICB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zb3VyY2UuYnVmZmVyID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNvdXJjZSA9IHRoaXMuYXVkaW9NYW5hZ2VyLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xyXG4gICAgICB0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMucGFubmVyKTtcclxuXHJcbiAgICAgIGlmIChfYXVkaW8pIHtcclxuICAgICAgICB0aGlzLmF1ZGlvID0gX2F1ZGlvO1xyXG4gICAgICAgIHRoaXMuc291cmNlLmJ1ZmZlciA9IF9hdWRpby5idWZmZXI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc291cmNlLmxvb3AgPSBfbG9vcDtcclxuICAgICAgdGhpcy5wbGF5YmFja1JhdGUgPSBfcGxheWJhY2tSYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ29ubmVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLmNvbm5lY3QodGhpcy5pc0FjdGl2ZSAmJiB0aGlzLmlzQXR0YWNoZWQgJiYgdGhpcy5saXN0ZW5lZCk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIC8vIG5vcFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQXV0b21hdGljYWxseSBjb25uZWN0cy9kaXNjb25uZWN0cyBBdWRpb05vZGVzIHdoZW4gYWRkaW5nL3JlbW92aW5nIHRoaXMgY29tcG9uZW50IHRvL2Zyb20gYSBub2RlLiBcclxuICAgICAqIFRoZXJlZm9yZSB1bnVzZWQgQXVkaW9Ob2RlcyBtYXkgYmUgZ2FyYmFnZSBjb2xsZWN0ZWQgd2hlbiBhbiB1bnVzZWQgY29tcG9uZW50IGlzIGNvbGxlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZUF0dGFjaCA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIC8vIERlYnVnLmxvZyhfZXZlbnQpO1xyXG4gICAgICBpZiAoX2V2ZW50LnR5cGUgPT0gRVZFTlQuQ09NUE9ORU5UX0FERCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0FVRElPLkNISUxEX0FQUEVORCwgdGhpcy5oYW5kbGVHcmFwaCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfQVVESU8uQ0hJTERfUkVNT1ZFLCB0aGlzLmhhbmRsZUdyYXBoLCB0cnVlKTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVF9BVURJTy5VUERBVEUsIHRoaXMudXBkYXRlLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVkID0gdGhpcy5ub2RlLmlzRGVzY2VuZGFudE9mKEF1ZGlvTWFuYWdlci5kZWZhdWx0LmdldEdyYXBoTGlzdGVuaW5nVG8oKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfQVVESU8uQ0hJTERfQVBQRU5ELCB0aGlzLmhhbmRsZUdyYXBoLCB0cnVlKTtcclxuICAgICAgICB0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVF9BVURJTy5DSElMRF9SRU1PVkUsIHRoaXMuaGFuZGxlR3JhcGgsIHRydWUpO1xyXG4gICAgICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5UX0FVRElPLlVQREFURSwgdGhpcy51cGRhdGUsIHRydWUpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVwZGF0ZUNvbm5lY3Rpb24oKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQXV0b21hdGljYWxseSBjb25uZWN0cy9kaXNjb25uZWN0cyBBdWRpb05vZGVzIHdoZW4gYXBwZW5kaW5nL3JlbW92aW5nIHRoZSBGVURHRS1ncmFwaCB0aGUgY29tcG9uZW50IGlzIGluLiBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVHcmFwaCA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIC8vIERlYnVnLmxvZyhfZXZlbnQpO1xyXG4gICAgICB0aGlzLmxpc3RlbmVkID0gKF9ldmVudC50eXBlID09IEVWRU5UX0FVRElPLkNISUxEX0FQUEVORCk7XHJcbiAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBwYW5uZXIgbm9kZSwgaXRzIHBvc2l0aW9uIGFuZCBkaXJlY3Rpb24sIHVzaW5nIHRoZSB3b3JsZG1hdHJpeCBvZiB0aGUgY29udGFpbmVyIGFuZCB0aGUgcGl2b3Qgb2YgdGhpcyBjb21wb25lbnQuIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZSA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IHRoaXMubXR4UGl2b3Q7XHJcbiAgICAgIGlmICh0aGlzLm5vZGUpXHJcbiAgICAgICAgbXR4UmVzdWx0ID0gTWF0cml4NHg0LlBST0RVQ1QodGhpcy5ub2RlLm10eFdvcmxkLCB0aGlzLm10eFBpdm90KTtcclxuXHJcbiAgICAgIC8vIERlYnVnLmxvZyhtdHhSZXN1bHQudG9TdHJpbmcoKSk7XHJcbiAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMyA9IG10eFJlc3VsdC50cmFuc2xhdGlvbjtcclxuICAgICAgbGV0IGZvcndhcmQ6IFZlY3RvcjMgPSBWZWN0b3IzLlRSQU5TRk9STUFUSU9OKFZlY3RvcjMuWigxKSwgbXR4UmVzdWx0LCBmYWxzZSk7XHJcblxyXG4gICAgICB0aGlzLnBhbm5lci5wb3NpdGlvblgudmFsdWUgPSBwb3NpdGlvbi54O1xyXG4gICAgICB0aGlzLnBhbm5lci5wb3NpdGlvblkudmFsdWUgPSBwb3NpdGlvbi55O1xyXG4gICAgICB0aGlzLnBhbm5lci5wb3NpdGlvbloudmFsdWUgPSBwb3NpdGlvbi56O1xyXG5cclxuICAgICAgdGhpcy5wYW5uZXIub3JpZW50YXRpb25YLnZhbHVlID0gZm9yd2FyZC54O1xyXG4gICAgICB0aGlzLnBhbm5lci5vcmllbnRhdGlvblkudmFsdWUgPSBmb3J3YXJkLnk7XHJcbiAgICAgIHRoaXMucGFubmVyLm9yaWVudGF0aW9uWi52YWx1ZSA9IGZvcndhcmQuejtcclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGZvcndhcmQpO1xyXG4gICAgICAvLyBUT0RPOiBleGFtaW5lIHdoeSB0aGUgZm9sbG93aW5nIHByb2R1Y2VzIGVycm9uZW91cyByZXN1bHRzLCBzZWUgdGVzdCBcIlNwYXRpYWwgQXVkaW9cIlxyXG4gICAgICBpZiAodGhpcy5ub2RlKVxyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcbiAgICB9O1xyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFNlcnZlcyB0byBzZXQgdGhlIHNwYXRpYWwgbG9jYXRpb24gYW5kIG9yaWVudGF0aW9uIG9mIEF1ZGlvTGlzdGVuZXJzIHJlbGF0aXZlIHRvIHRoZVxyXG4gICAqIHdvcmxkIHRyYW5zZm9ybSBvZiB0aGUge0BsaW5rIE5vZGV9IGl0IGlzIGF0dGFjaGVkIHRvLlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudEF1ZGlvTGlzdGVuZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudEF1ZGlvTGlzdGVuZXIpO1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIGFuZCBvcmllbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gQXVkaW9MaXN0ZW5lclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKF9saXN0ZW5lcjogQXVkaW9MaXN0ZW5lcik6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSB0aGlzLm10eFBpdm90O1xyXG4gICAgICBpZiAodGhpcy5ub2RlKVxyXG4gICAgICAgIG10eFJlc3VsdCA9IE1hdHJpeDR4NC5QUk9EVUNUKHRoaXMubm9kZS5tdHhXb3JsZCwgdGhpcy5tdHhQaXZvdCk7XHJcblxyXG4gICAgICAvLyBEZWJ1Zy5sb2cobXR4UmVzdWx0LnRvU3RyaW5nKCkpO1xyXG4gICAgICBsZXQgcG9zaXRpb246IFZlY3RvcjMgPSBtdHhSZXN1bHQudHJhbnNsYXRpb247XHJcbiAgICAgIGxldCBmb3J3YXJkOiBWZWN0b3IzID0gVmVjdG9yMy5UUkFOU0ZPUk1BVElPTihWZWN0b3IzLlooMSksIG10eFJlc3VsdCwgZmFsc2UpO1xyXG4gICAgICBsZXQgdXA6IFZlY3RvcjMgPSBWZWN0b3IzLlRSQU5TRk9STUFUSU9OKFZlY3RvcjMuWSgpLCBtdHhSZXN1bHQsIGZhbHNlKTtcclxuICAgICAgaWYgKF9saXN0ZW5lci5wb3NpdGlvblggIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgX2xpc3RlbmVyLnBvc2l0aW9uWC52YWx1ZSA9IHBvc2l0aW9uLng7XHJcbiAgICAgICAgX2xpc3RlbmVyLnBvc2l0aW9uWS52YWx1ZSA9IHBvc2l0aW9uLnk7XHJcbiAgICAgICAgX2xpc3RlbmVyLnBvc2l0aW9uWi52YWx1ZSA9IHBvc2l0aW9uLno7XHJcblxyXG4gICAgICAgIF9saXN0ZW5lci5mb3J3YXJkWC52YWx1ZSA9IGZvcndhcmQueDtcclxuICAgICAgICBfbGlzdGVuZXIuZm9yd2FyZFkudmFsdWUgPSBmb3J3YXJkLnk7XHJcbiAgICAgICAgX2xpc3RlbmVyLmZvcndhcmRaLnZhbHVlID0gZm9yd2FyZC56O1xyXG5cclxuICAgICAgICBfbGlzdGVuZXIudXBYLnZhbHVlID0gdXAueDtcclxuICAgICAgICBfbGlzdGVuZXIudXBZLnZhbHVlID0gdXAueTtcclxuICAgICAgICBfbGlzdGVuZXIudXBaLnZhbHVlID0gdXAuejtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGaXJlZm94IHN0aWxsIHVzZXMgZGVwcmVjYXRlZCBtZXRob2RzLiBUT0RPOiBkZWxldGUgYXMgc29vbiBhcyBwb3NzaWJsZSFcclxuICAgICAgICBfbGlzdGVuZXIuc2V0UG9zaXRpb24ocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueik7XHJcbiAgICAgICAgX2xpc3RlbmVyLnNldE9yaWVudGF0aW9uKGZvcndhcmQueCwgZm9yd2FyZC55LCBmb3J3YXJkLnosIHVwLngsIHVwLnksIHVwLnopO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBSZWN5Y2xlci5zdG9yZShmb3J3YXJkKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodXApO1xyXG4gICAgICBpZiAodGhpcy5ub2RlKVxyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcblxyXG4gICAgICAvLyBEZWJ1Zy5sb2cobXR4UmVzdWx0LnRyYW5zbGF0aW9uLnRvU3RyaW5nKCksIGZvcndhcmQudG9TdHJpbmcoKSwgdXAudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVkIHRvIGEge0BsaW5rIE5vZGV9IHdpdGggYW4gYXR0YWNoZWQge0BsaW5rIENvbXBvbmVudENhbWVyYX0gdGhpcyBjYXVzZXMgdGhlIHJlbmRlcmVkIGltYWdlIHRvIHJlY2VpdmUgYSBibG9vbS1lZmZlY3QuXHJcbiAgICogQGF1dGhvcnMgUm9sYW5kIEhlZXIsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRCbG9vbSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50Qmxvb20pO1xyXG4gICAgXHJcbiAgICAjdGhyZXNob2xkOiBudW1iZXI7XHJcbiAgICAjaW50ZW5zaXR5OiBudW1iZXI7XHJcbiAgICAjaGlnaGxpZ2h0RGVzYXR1cmF0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF90aHJlc2hvbGQ6IG51bWJlciA9IDAuOTUsIF9pbnRlbnNpdHk6IG51bWJlciA9IDEuMCwgX2Rlc2F0dXJhdGVIaWdobGlnaHRzOiBudW1iZXIgPSAwLjUpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy4jdGhyZXNob2xkID0gX3RocmVzaG9sZDtcclxuICAgICAgdGhpcy4jaW50ZW5zaXR5ID0gX2ludGVuc2l0eTtcclxuICAgICAgdGhpcy4jaGlnaGxpZ2h0RGVzYXR1cmF0aW9uID0gX2Rlc2F0dXJhdGVIaWdobGlnaHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdGhyZXNob2xkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN0aHJlc2hvbGQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHRocmVzaG9sZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiN0aHJlc2hvbGQgPSBDYWxjLmNsYW1wKF92YWx1ZSwgMCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpbnRlbnNpdHkoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2ludGVuc2l0eTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgaW50ZW5zaXR5KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2ludGVuc2l0eSA9IE1hdGgubWF4KDAsIF92YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBoaWdobGlnaHREZXNhdHVyYXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2hpZ2hsaWdodERlc2F0dXJhdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgaGlnaGxpZ2h0RGVzYXR1cmF0aW9uKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2hpZ2hsaWdodERlc2F0dXJhdGlvbiA9IENhbGMuY2xhbXAoX3ZhbHVlLCAwLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIHRocmVzaG9sZDogdGhpcy4jdGhyZXNob2xkLFxyXG4gICAgICAgIGludGVuc2l0eTogdGhpcy4jaW50ZW5zaXR5LFxyXG4gICAgICAgIGRlc2F0dXJhdGVIaWdobGlnaHRzOiB0aGlzLiNoaWdobGlnaHREZXNhdHVyYXRpb24sXHJcbiAgICAgIH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy4jdGhyZXNob2xkID0gX3NlcmlhbGl6YXRpb24udGhyZXNob2xkO1xyXG4gICAgICB0aGlzLiNpbnRlbnNpdHkgPSBfc2VyaWFsaXphdGlvbi5pbnRlbnNpdHk7XHJcbiAgICAgIHRoaXMuI2hpZ2hsaWdodERlc2F0dXJhdGlvbiA9IF9zZXJpYWxpemF0aW9uLmRlc2F0dXJhdGVIaWdobGlnaHRzO1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IodHJ1ZSk7XHJcbiAgICAgIG11dGF0b3IudGhyZXNob2xkID0gdGhpcy50aHJlc2hvbGQ7XHJcbiAgICAgIG11dGF0b3IuaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHk7XHJcbiAgICAgIG11dGF0b3IuaGlnaGxpZ2h0RGVzYXR1cmF0aW9uID0gdGhpcy5oaWdobGlnaHREZXNhdHVyYXRpb247XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tcG9uZW50LnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgZW51bSBGSUVMRF9PRl9WSUVXIHtcclxuICAgIEhPUklaT05UQUwgPSBcImhvcml6b250YWxcIixcclxuICAgIFZFUlRJQ0FMID0gXCJ2ZXJ0aWNhbFwiLFxyXG4gICAgRElBR09OQUwgPSBcImRpYWdvbmFsXCJcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBpZGVudGlmaWVycyBmb3IgdGhlIHZhcmlvdXMgcHJvamVjdGlvbnMgYSBjYW1lcmEgY2FuIHByb3ZpZGUuICBcclxuICAgKiBUT0RPOiBjaGFuZ2UgYmFjayB0byBudW1iZXIgZW51bSBpZiBzdHJpbmdzIG5vdCBuZWVkZWRcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBQUk9KRUNUSU9OIHtcclxuICAgIENFTlRSQUwgPSBcImNlbnRyYWxcIixcclxuICAgIE9SVEhPR1JBUEhJQyA9IFwib3J0aG9ncmFwaGljXCIsXHJcbiAgICBESU1FVFJJQyA9IFwiZGltZXRyaWNcIixcclxuICAgIFNURVJFTyA9IFwic3RlcmVvXCJcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhbWVyYSBjb21wb25lbnQgaG9sZHMgdGhlIHByb2plY3Rpb24tbWF0cml4IGFuZCBvdGhlciBkYXRhIG5lZWRlZCB0byByZW5kZXIgYSBzY2VuZSBmcm9tIHRoZSBwZXJzcGVjdGl2ZSBvZiB0aGUgbm9kZSBpdCBpcyBhdHRhY2hlZCB0by5cclxuICAgKiBAYXV0aG9ycyBKYXNjaGEgS2FyYWfDtmwsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudENhbWVyYSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50Q2FtZXJhKTtcclxuXHJcbiAgICBwdWJsaWMgbXR4UGl2b3Q6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgcHVibGljIGNsckJhY2tncm91bmQ6IENvbG9yID0gbmV3IENvbG9yKDAsIDAsIDAsIDEpOyAvLyBUaGUgY29sb3Igb2YgdGhlIGJhY2tncm91bmQgdGhlIGNhbWVyYSB3aWxsIHJlbmRlci5cclxuICAgIC8vcHJpdmF0ZSBvcnRob2dyYXBoaWM6IGJvb2xlYW4gPSBmYWxzZTsgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBpbWFnZSB3aWxsIGJlIHJlbmRlcmVkIHdpdGggcGVyc3BlY3RpdmUgb3Igb3J0aG9ncmFwaGljIHByb2plY3Rpb24uXHJcbiAgICBwcml2YXRlIHByb2plY3Rpb246IFBST0pFQ1RJT04gPSBQUk9KRUNUSU9OLkNFTlRSQUw7XHJcbiAgICBwcml2YXRlIGZpZWxkT2ZWaWV3OiBudW1iZXIgPSA0NTsgLy8gVGhlIGNhbWVyYSdzIHNlbnNvcmFuZ2xlLlxyXG4gICAgcHJpdmF0ZSBhc3BlY3RSYXRpbzogbnVtYmVyID0gMS4wO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IEZJRUxEX09GX1ZJRVcgPSBGSUVMRF9PRl9WSUVXLkRJQUdPTkFMO1xyXG4gICAgcHJpdmF0ZSBuZWFyOiBudW1iZXIgPSAxO1xyXG4gICAgcHJpdmF0ZSBmYXI6IG51bWJlciA9IDIwMDA7XHJcbiAgICBwcml2YXRlIGJhY2tncm91bmRFbmFibGVkOiBib29sZWFuID0gdHJ1ZTsgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0aGUgYmFja2dyb3VuZCBvZiB0aGlzIGNhbWVyYSB3aWxsIGJlIHJlbmRlcmVkLlxyXG4gICAgLy8gVE9ETzogZXhhbWluZSwgaWYgYmFja2dyb3VuZCBzaG91bGQgYmUgYW4gYXR0cmlidXRlIG9mIENhbWVyYSBvciBWaWV3cG9ydFxyXG5cclxuICAgICNtdHhXb3JsZFRvVmlldzogTWF0cml4NHg0O1xyXG4gICAgI210eENhbWVyYUludmVyc2U6IE1hdHJpeDR4NDtcclxuICAgICNtdHhQcm9qZWN0aW9uOiBNYXRyaXg0eDQgPSBuZXcgTWF0cml4NHg0OyAvLyBUaGUgbWF0cml4IHRvIG11bHRpcGx5IGVhY2ggc2NlbmUgb2JqZWN0cyB0cmFuc2Zvcm1hdGlvbiBieSwgdG8gZGV0ZXJtaW5lIHdoZXJlIGl0IHdpbGwgYmUgZHJhd24uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjYW1lcmFzIHdvcmxkdHJhbnNmb3JtYXRpb24gbWF0cml4IGkuZS4gdGhlIHRyYW5zZm9ybWF0aW9uIHJlbGF0aXZlIHRvIHRoZSByb290IG9mIHRoZSBncmFwaFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG10eFdvcmxkKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtdHhDYW1lcmE6IE1hdHJpeDR4NCA9IHRoaXMubXR4UGl2b3QuY2xvbmU7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbXR4Q2FtZXJhID0gTWF0cml4NHg0LlBST0RVQ1QodGhpcy5ub2RlLm10eFdvcmxkLCB0aGlzLm10eFBpdm90KTtcclxuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgLy8gbm8gY29udGFpbmVyIG5vZGUgb3Igbm8gd29ybGQgdHJhbnNmb3JtYXRpb24gZm91bmQgLT4gY29udGludWUgd2l0aCBwaXZvdCBvbmx5XHJcbiAgICAgICAgLy8gVE9ETzogbWF5YmUgdXNlIGlmICgpIHRoZW4gaW5zdGVhZCBvZiB0cnkgY2F0Y2hcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbXR4Q2FtZXJhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbXVsdGlwbGljYXRpb24gb2YgdGhlIHdvcmxkdHJhbnNmb3JtYXRpb24gb2YgdGhlIGNhbWVyYSBjb250YWluZXIsIHRoZSBwaXZvdCBvZiB0aGlzIGNhbWVyYSBhbmQgdGhlIGludmVyc2lvbiBvZiB0aGUgcHJvamVjdGlvbiBtYXRyaXhcclxuICAgICAqIHlpZWxkaW5nIHRoZSB3b3JsZHNwYWNlIHRvIHZpZXdzcGFjZSBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtdHhXb3JsZFRvVmlldygpOiBNYXRyaXg0eDQge1xyXG4gICAgICBpZiAodGhpcy4jbXR4V29ybGRUb1ZpZXcpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI210eFdvcmxkVG9WaWV3O1xyXG5cclxuICAgICAgLy9UT0RPOiBvcHRpbWl6ZSwgbm8gbmVlZCB0byByZWNhbGN1bGF0ZSBpZiBuZWl0aGVyIG10eFdvcmxkIG5vciBwaXZvdCBoYXZlIGNoYW5nZWRcclxuICAgICAgdGhpcy4jbXR4V29ybGRUb1ZpZXcgPSBNYXRyaXg0eDQuUFJPRFVDVCh0aGlzLiNtdHhQcm9qZWN0aW9uLCB0aGlzLm10eENhbWVyYUludmVyc2UpO1xyXG4gICAgICByZXR1cm4gdGhpcy4jbXR4V29ybGRUb1ZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBpbnZlcnNpb24gb2YgdGhpcyBjYW1lcmFzIHdvcmxkdHJhbnNmb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtdHhDYW1lcmFJbnZlcnNlKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGlmICh0aGlzLiNtdHhDYW1lcmFJbnZlcnNlKVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNtdHhDYW1lcmFJbnZlcnNlO1xyXG5cclxuICAgICAgLy9UT0RPOiBvcHRpbWl6ZSwgbm8gbmVlZCB0byByZWNhbGN1bGF0ZSBpZiBuZWl0aGVyIG10eFdvcmxkIG5vciBwaXZvdCBoYXZlIGNoYW5nZWRcclxuICAgICAgdGhpcy4jbXR4Q2FtZXJhSW52ZXJzZSA9IE1hdHJpeDR4NC5JTlZFUlNFKHRoaXMubXR4V29ybGQpO1xyXG4gICAgICByZXR1cm4gdGhpcy4jbXR4Q2FtZXJhSW52ZXJzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHByb2plY3Rpb25tYXRyaXggb2YgdGhpcyBjYW1lcmFcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtdHhQcm9qZWN0aW9uKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGlmICh0aGlzLiNtdHhQcm9qZWN0aW9uKVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNtdHhQcm9qZWN0aW9uO1xyXG5cclxuICAgICAgLy9UT0RPOiBvcHRpbWl6ZSwgbm8gbmVlZCB0byByZWNhbGN1bGF0ZSBpZiBuZWl0aGVyIG10eFdvcmxkIG5vciBwaXZvdCBoYXZlIGNoYW5nZWRcclxuICAgICAgdGhpcy4jbXR4UHJvamVjdGlvbiA9IG5ldyBNYXRyaXg0eDQ7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtdHhQcm9qZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoaXMgY2FtZXJhcyB7QGxpbmsgbXR4V29ybGRUb1ZpZXd9IGFuZCB7QGxpbmsgbXR4Q2FtZXJhSW52ZXJzZX0gbWF0cmljZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0V29ybGRUb1ZpZXcoKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLiNtdHhXb3JsZFRvVmlldykgUmVjeWNsZXIuc3RvcmUodGhpcy4jbXR4V29ybGRUb1ZpZXcpO1xyXG4gICAgICBpZiAodGhpcy4jbXR4Q2FtZXJhSW52ZXJzZSkgUmVjeWNsZXIuc3RvcmUodGhpcy4jbXR4Q2FtZXJhSW52ZXJzZSk7XHJcbiAgICAgIHRoaXMuI210eFdvcmxkVG9WaWV3ID0gbnVsbDtcclxuICAgICAgdGhpcy4jbXR4Q2FtZXJhSW52ZXJzZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjYW1lcmFzIHtAbGluayBQUk9KRUNUSU9OfSBtb2RlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQcm9qZWN0aW9uKCk6IFBST0pFQ1RJT04ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNrZ3JvdW5kIG9mIHRoZSBjYW1lcmEgc2hvdWxkIGJlIHJlbmRlcmVkLCBmYWxzZSBpZiBub3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEJhY2tncm91bmRFbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kRW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNhbWVyYXMgYXNwZWN0IHJhdGlvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRBc3BlY3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjYW1lcmFzIGZpZWxkIG9mIHZpZXcgaW4gZGVncmVlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RmllbGRPZlZpZXcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZmllbGRPZlZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjYW1lcmFzIGRpcmVjdGlvbiBpLmUuIHRoZSBwbGFuZSBvbiB3aGljaCB0aGUgZmllbGRPZlZpZXctQW5nbGUgaXMgZ2l2ZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERpcmVjdGlvbigpOiBGSUVMRF9PRl9WSUVXIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY2FtZXJhcyBuZWFyIHZhbHVlIGkuZS4gdGhlIG1pbmltdW0gZGlzdGFuY2UgdG8gcmVuZGVyIG9iamVjdHMgYXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE5lYXIoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMubmVhcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNhbWVyYXMgZmFyIHZhbHVlIGkuZS4gdGhlIG1heGltdW0gZGlzdGFuY2UgdG8gcmVuZGVyIG9iamVjdHMgYXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZhcigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5mYXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNhbWVyYSB0byBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uLiBUaGUgd29ybGQgb3JpZ2luIGlzIGluIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc2VsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gX2FzcGVjdCBUaGUgYXNwZWN0IHJhdGlvIGJldHdlZW4gd2lkdGggYW5kIGhlaWdodCBvZiBwcm9qZWN0aW9uc3BhY2UuKERlZmF1bHQgPSBjYW52YXMuY2xpZW50V2lkdGggLyBjYW52YXMuQ2xpZW50SGVpZ2h0KVxyXG4gICAgICogQHBhcmFtIF9maWVsZE9mVmlldyBUaGUgZmllbGQgb2YgdmlldyBpbiBEZWdyZWVzLiAoRGVmYXVsdCA9IDQ1KVxyXG4gICAgICogQHBhcmFtIF9kaXJlY3Rpb24gVGhlIHBsYW5lIG9uIHdoaWNoIHRoZSBmaWVsZE9mVmlldy1BbmdsZSBpcyBnaXZlbiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHByb2plY3RDZW50cmFsKF9hc3BlY3Q6IG51bWJlciA9IHRoaXMuYXNwZWN0UmF0aW8sIF9maWVsZE9mVmlldzogbnVtYmVyID0gdGhpcy5maWVsZE9mVmlldywgX2RpcmVjdGlvbjogRklFTERfT0ZfVklFVyA9IHRoaXMuZGlyZWN0aW9uLCBfbmVhcjogbnVtYmVyID0gdGhpcy5uZWFyLCBfZmFyOiBudW1iZXIgPSB0aGlzLmZhcik6IHZvaWQge1xyXG4gICAgICB0aGlzLmFzcGVjdFJhdGlvID0gX2FzcGVjdDtcclxuICAgICAgdGhpcy5maWVsZE9mVmlldyA9IF9maWVsZE9mVmlldztcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSBfZGlyZWN0aW9uO1xyXG4gICAgICB0aGlzLnByb2plY3Rpb24gPSBQUk9KRUNUSU9OLkNFTlRSQUw7XHJcbiAgICAgIHRoaXMubmVhciA9IF9uZWFyO1xyXG4gICAgICB0aGlzLmZhciA9IF9mYXI7XHJcbiAgICAgIHRoaXMuI210eFByb2plY3Rpb24gPSBNYXRyaXg0eDQuUFJPSkVDVElPTl9DRU5UUkFMKF9hc3BlY3QsIHRoaXMuZmllbGRPZlZpZXcsIF9uZWFyLCBfZmFyLCB0aGlzLmRpcmVjdGlvbik7IC8vIFRPRE86IHJlbW92ZSBtYWdpYyBudW1iZXJzXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNhbWVyYSB0byBvcnRob2dyYXBoaWMgcHJvamVjdGlvbi4gRGVmYXVsdCB2YWx1ZXMgYXJlIGRlcml2ZWQgdGhlIGNhbnZhcyBjbGllbnQgZGltZW5zaW9uc1xyXG4gICAgICogQHBhcmFtIF9sZWZ0IFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyBsZWZ0IGJvcmRlci4gICAgXHJcbiAgICAgKiBAcGFyYW0gX3JpZ2h0IFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyByaWdodCBib3JkZXIuICBcclxuICAgICAqIEBwYXJhbSBfYm90dG9tIFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyBib3R0b20gYm9yZGVyLlxyXG4gICAgICogQHBhcmFtIF90b3AgVGhlIHBvc2l0aW9udmFsdWUgb2YgdGhlIHByb2plY3Rpb25zcGFjZSdzIHRvcCBib3JkZXIuICAgICAgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwcm9qZWN0T3J0aG9ncmFwaGljKF9sZWZ0OiBudW1iZXIgPSAtUmVuZGVyLmdldENhbnZhcygpLmNsaWVudFdpZHRoIC8gMiwgX3JpZ2h0OiBudW1iZXIgPSBSZW5kZXIuZ2V0Q2FudmFzKCkuY2xpZW50V2lkdGggLyAyLCBfYm90dG9tOiBudW1iZXIgPSBSZW5kZXIuZ2V0Q2FudmFzKCkuY2xpZW50SGVpZ2h0IC8gMiwgX3RvcDogbnVtYmVyID0gLVJlbmRlci5nZXRDYW52YXMoKS5jbGllbnRIZWlnaHQgLyAyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucHJvamVjdGlvbiA9IFBST0pFQ1RJT04uT1JUSE9HUkFQSElDO1xyXG4gICAgICB0aGlzLiNtdHhQcm9qZWN0aW9uID0gTWF0cml4NHg0LlBST0pFQ1RJT05fT1JUSE9HUkFQSElDKF9sZWZ0LCBfcmlnaHQsIF9ib3R0b20sIF90b3AsIDQwMCwgLTQwMCk7IC8vIFRPRE86IGV4YW1pbmUgbWFnaWMgbnVtYmVycyFcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiB0aGUgY2FsY3VsYXRlZCBkaW1lbnNpb24gb2YgYSBwcm9qZWN0aW9uIHN1cmZhY2UgaW4gdGhlIGh5cG90aGV0aWNhbCBkaXN0YW5jZSBvZiAxIHRvIHRoZSBjYW1lcmFcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFByb2plY3Rpb25SZWN0YW5nbGUoKTogUmVjdGFuZ2xlIHtcclxuICAgICAgbGV0IHRhbkZvdjogbnVtYmVyID0gTWF0aC50YW4oTWF0aC5QSSAqIHRoaXMuZmllbGRPZlZpZXcgLyAzNjApOyAvLyBIYWxmIG9mIHRoZSBhbmdsZSwgdG8gY2FsY3VsYXRlIGRpbWVuc2lvbiBmcm9tIHRoZSBjZW50ZXIgLT4gcmlnaHQgYW5nbGVcclxuICAgICAgbGV0IHRhbkhvcml6b250YWw6IG51bWJlciA9IDA7XHJcbiAgICAgIGxldCB0YW5WZXJ0aWNhbDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PSBGSUVMRF9PRl9WSUVXLkRJQUdPTkFMKSB7XHJcbiAgICAgICAgbGV0IGFzcGVjdDogbnVtYmVyID0gTWF0aC5zcXJ0KHRoaXMuYXNwZWN0UmF0aW8pO1xyXG4gICAgICAgIHRhbkhvcml6b250YWwgPSB0YW5Gb3YgKiBhc3BlY3Q7XHJcbiAgICAgICAgdGFuVmVydGljYWwgPSB0YW5Gb3YgLyBhc3BlY3Q7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT0gRklFTERfT0ZfVklFVy5WRVJUSUNBTCkge1xyXG4gICAgICAgIHRhblZlcnRpY2FsID0gdGFuRm92O1xyXG4gICAgICAgIHRhbkhvcml6b250YWwgPSB0YW5WZXJ0aWNhbCAqIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgIH0gZWxzZSB7Ly9GT1ZfRElSRUNUSU9OLkhPUklaT05UQUxcclxuICAgICAgICB0YW5Ib3Jpem9udGFsID0gdGFuRm92O1xyXG4gICAgICAgIHRhblZlcnRpY2FsID0gdGFuSG9yaXpvbnRhbCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBSZWN0YW5nbGUuR0VUKDAsIDAsIHRhbkhvcml6b250YWwgKiAyLCB0YW5WZXJ0aWNhbCAqIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gcG9pbnQgZnJvbSB3b3JsZCBzcGFjZSB0byBjbGlwIHNwYWNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwb2ludFdvcmxkVG9DbGlwKF9wb2ludEluV29ybGRTcGFjZTogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IzO1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gdGhpcy5tdHhXb3JsZFRvVmlldy5nZXQoKTtcclxuICAgICAgbGV0IHc6IG51bWJlciA9IG1bM10gKiBfcG9pbnRJbldvcmxkU3BhY2UueCArIG1bN10gKiBfcG9pbnRJbldvcmxkU3BhY2UueSArIG1bMTFdICogX3BvaW50SW5Xb3JsZFNwYWNlLnogKyBtWzE1XTtcclxuXHJcbiAgICAgIHJlc3VsdCA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3BvaW50SW5Xb3JsZFNwYWNlLCB0aGlzLm10eFdvcmxkVG9WaWV3KTtcclxuICAgICAgcmVzdWx0LnNjYWxlKDEgLyB3KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHBvaW50IGZyb20gY2xpcCBzcGFjZSB0byB3b3JsZCBzcGFjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRDbGlwVG9Xb3JsZChfcG9pbnRJbkNsaXBTcGFjZTogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgbXR4Vmlld1RvV29ybGQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JTlZFUlNFKHRoaXMubXR4V29ybGRUb1ZpZXcpO1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gbXR4Vmlld1RvV29ybGQuZ2V0KCk7XHJcbiAgICAgIGxldCByYXlXb3JsZDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3BvaW50SW5DbGlwU3BhY2UsIG10eFZpZXdUb1dvcmxkLCB0cnVlKTtcclxuICAgICAgbGV0IHc6IG51bWJlciA9IG1bM10gKiBfcG9pbnRJbkNsaXBTcGFjZS54ICsgbVs3XSAqIF9wb2ludEluQ2xpcFNwYWNlLnkgKyBtWzExXSAqIF9wb2ludEluQ2xpcFNwYWNlLnogKyBtWzE1XTtcclxuICAgICAgcmF5V29ybGQuc2NhbGUoMSAvIHcpO1xyXG5cclxuICAgICAgcmV0dXJuIHJheVdvcmxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmNsckJhY2tncm91bmQsXHJcbiAgICAgICAgYmFja2dyb3VuZEVuYWJsZWQ6IHRoaXMuYmFja2dyb3VuZEVuYWJsZWQsXHJcbiAgICAgICAgcHJvamVjdGlvbjogdGhpcy5wcm9qZWN0aW9uLFxyXG4gICAgICAgIGZpZWxkT2ZWaWV3OiB0aGlzLmZpZWxkT2ZWaWV3LFxyXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgbmVhcjogdGhpcy5uZWFyLFxyXG4gICAgICAgIGZhcjogdGhpcy5mYXIsXHJcbiAgICAgICAgYXNwZWN0OiB0aGlzLmFzcGVjdFJhdGlvLFxyXG4gICAgICAgIHBpdm90OiB0aGlzLm10eFBpdm90LnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgdGhpcy5jbHJCYWNrZ3JvdW5kLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmJhY2tncm91bmRDb2xvcik7XHJcbiAgICAgIHRoaXMuYmFja2dyb3VuZEVuYWJsZWQgPSBfc2VyaWFsaXphdGlvbi5iYWNrZ3JvdW5kRW5hYmxlZDtcclxuICAgICAgdGhpcy5wcm9qZWN0aW9uID0gX3NlcmlhbGl6YXRpb24ucHJvamVjdGlvbjtcclxuICAgICAgdGhpcy5maWVsZE9mVmlldyA9IF9zZXJpYWxpemF0aW9uLmZpZWxkT2ZWaWV3O1xyXG4gICAgICB0aGlzLmFzcGVjdFJhdGlvID0gX3NlcmlhbGl6YXRpb24uYXNwZWN0O1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9IF9zZXJpYWxpemF0aW9uLmRpcmVjdGlvbjtcclxuICAgICAgdGhpcy5uZWFyID0gX3NlcmlhbGl6YXRpb24ubmVhciA/PyB0aGlzLm5lYXI7XHJcbiAgICAgIHRoaXMuZmFyID0gX3NlcmlhbGl6YXRpb24uZmFyID8/IHRoaXMuZmFyO1xyXG4gICAgICBhd2FpdCB0aGlzLm10eFBpdm90LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnBpdm90KTtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBzd2l0Y2ggKHRoaXMucHJvamVjdGlvbikge1xyXG4gICAgICAgIGNhc2UgUFJPSkVDVElPTi5PUlRIT0dSQVBISUM6XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RPcnRob2dyYXBoaWMoKTsgLy8gVE9ETzogc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZSBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFBST0pFQ1RJT04uQ0VOVFJBTDpcclxuICAgICAgICAgIHRoaXMucHJvamVjdENlbnRyYWwoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3I6IE11dGF0b3IpOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHN1cGVyLmdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcik7XHJcbiAgICAgIGlmICh0eXBlcy5kaXJlY3Rpb24pXHJcbiAgICAgICAgdHlwZXMuZGlyZWN0aW9uID0gRklFTERfT0ZfVklFVztcclxuICAgICAgaWYgKHR5cGVzLnByb2plY3Rpb24pXHJcbiAgICAgICAgdHlwZXMucHJvamVjdGlvbiA9IFBST0pFQ1RJT047XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG5cclxuICAgICAgc3dpdGNoICh0aGlzLnByb2plY3Rpb24pIHtcclxuICAgICAgICBjYXNlIFBST0pFQ1RJT04uQ0VOVFJBTDpcclxuICAgICAgICAgIHRoaXMucHJvamVjdENlbnRyYWwodGhpcy5hc3BlY3RSYXRpbywgdGhpcy5maWVsZE9mVmlldywgdGhpcy5kaXJlY3Rpb24sIHRoaXMubmVhciwgdGhpcy5mYXIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd0dpem1vcygpOiB2b2lkIHtcclxuICAgICAgbGV0IG10eFdvcmxkOiBNYXRyaXg0eDQgPSB0aGlzLm10eFdvcmxkLmNsb25lO1xyXG4gICAgICBtdHhXb3JsZC5zY2FsaW5nID0gbmV3IFZlY3RvcjMoMC41LCAwLjUsIDAuNSk7XHJcbiAgICAgIGxldCBjb2xvcjogQ29sb3IgPSBDb2xvci5DU1MoXCJsaWdodGdyZXlcIik7XHJcbiAgICAgIEdpem1vcy5kcmF3SWNvbihUZXh0dXJlRGVmYXVsdC5pY29uQ2FtZXJhLCBtdHhXb3JsZCwgY29sb3IpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZU11bHRpcGxlKG10eFdvcmxkLCBjb2xvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdHaXptb3NTZWxlY3RlZCgpOiB2b2lkIHtcclxuICAgICAgR2l6bW9zLmRyYXdXaXJlRnJ1c3R1bSh0aGlzLmdldEFzcGVjdCgpLCB0aGlzLmdldEZpZWxkT2ZWaWV3KCksIHRoaXMuZ2V0TmVhcigpLCB0aGlzLmdldEZhcigpLCB0aGlzLmdldERpcmVjdGlvbigpLCB0aGlzLm10eFdvcmxkLCBDb2xvci5DU1MoXCJsaWdodGdyZXlcIikpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBkZWxldGUgX211dGF0b3IudHJhbnNmb3JtO1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIE1ha2VzIHRoZSBub2RlIGZhY2UgdGhlIGNhbWVyYSB3aGVuIHJlbmRlcmluZywgcmVzcGVjdGluZyByZXN0cmljdGlvbnMgZm9yIHJvdGF0aW9uIGFyb3VuZCBzcGVjaWZpYyBheGlzXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vaHMtZnVydHdhbmdlbi9GVURHRS93aWtpL0NvbXBvbmVudFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRGYWNlQ2FtZXJhIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRGYWNlQ2FtZXJhKTtcclxuXHJcbiAgICBwdWJsaWMgdXBMb2NhbDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwdWJsaWMgdXA6IFZlY3RvcjMgPSBWZWN0b3IzLlkoMSk7XHJcbiAgICBwdWJsaWMgcmVzdHJpY3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuc2luZ2xldG9uID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBdHRhY2hlZCB0byBhIHtAbGluayBOb2RlfSB3aXRoIGFuIGF0dGFjaGVkIHtAbGluayBDb21wb25lbnRDYW1lcmF9IHRoaXMgY2F1c2VzIHRoZSByZW5kZXJlZCBpbWFnZSB0byByZWNlaXZlIGEgZm9nLWVmZmVjdC5cclxuICAgKiBAYXV0aG9ycyBSb2xhbmQgSGVlciwgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudEZvZyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50Rm9nKTtcclxuICAgIHB1YmxpYyBjb2xvcjogQ29sb3I7XHJcbiAgICBwdWJsaWMgbmVhcjogbnVtYmVyO1xyXG4gICAgcHVibGljIGZhcjogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfY29sb3I6IENvbG9yID0gbmV3IENvbG9yKDEsIDEsIDEsIDEpLCBfbmVhcjogbnVtYmVyID0gMSwgX2ZhcjogbnVtYmVyID0gNTApIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5jb2xvciA9IF9jb2xvcjtcclxuICAgICAgdGhpcy5uZWFyID0gX25lYXI7XHJcbiAgICAgIHRoaXMuZmFyID0gX2ZhcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIG5lYXI6IHRoaXMubmVhcixcclxuICAgICAgICBmYXI6IHRoaXMuZmFyXHJcbiAgICAgIH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgdGhpcy5jb2xvci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5jb2xvcik7XHJcbiAgICAgIHRoaXMubmVhciA9IF9zZXJpYWxpemF0aW9uLm5lYXIgPz8gdGhpcy5uZWFyO1xyXG4gICAgICB0aGlzLmZhciA9IF9zZXJpYWxpemF0aW9uLmZhciA/PyB0aGlzLmZhcjtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBGaWx0ZXJzIHN5bmNocm9uaXphdGlvbiBiZXR3ZWVuIGEgZ3JhcGggaW5zdGFuY2UgYW5kIHRoZSBncmFwaCBpdCBpcyBjb25uZWN0ZWQgdG8uIElmIGFjdGl2ZSwgbm8gc3luY2hyb25pemF0aW9uIG9jY3Vycy5cclxuICAgKiBNYXliZSBtb3JlIGZpbmVncmFpbmVkIGluIHRoZSBmdXR1cmUuLi5cclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMlxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9ocy1mdXJ0d2FuZ2VuL0ZVREdFL3dpa2kvQ29tcG9uZW50XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudEdyYXBoRmlsdGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRHcmFwaEZpbHRlcik7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnNpbmdsZXRvbiA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IHR5cGUgVHlwZU9mTGlnaHQgPSBuZXcgKCkgPT4gTGlnaHQ7XHJcbiAgLyoqXHJcbiAgICogQmFzZWNsYXNzIGZvciBkaWZmZXJlbnQga2luZHMgb2YgbGlnaHRzLiBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBMaWdodCBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xyXG4gICAgcHVibGljIGNvbG9yOiBDb2xvcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2NvbG9yOiBDb2xvciA9IG5ldyBDb2xvcigxLCAxLCAxLCAxKSkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLmNvbG9yID0gX2NvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIFR5cGVPZkxpZ2h0fSBvZiB0aGlzIGxpZ2h0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VHlwZSgpOiBUeXBlT2ZMaWdodCB7XHJcbiAgICAgIHJldHVybiA8VHlwZU9mTGlnaHQ+dGhpcy5jb25zdHJ1Y3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBjb2xvcjogdGhpcy5jb2xvci5zZXJpYWxpemUoKVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCB0aGlzLmNvbG9yLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmNvbG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoKTogdm9pZCB7LyoqLyB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbWJpZW50IGxpZ2h0LCBjb21pbmcgZnJvbSBhbGwgZGlyZWN0aW9ucywgaWxsdW1pbmF0aW5nIGV2ZXJ5dGhpbmcgd2l0aCBpdHMgY29sb3IgaW5kZXBlbmRlbnQgb2YgcG9zaXRpb24gYW5kIG9yaWVudGF0aW9uIChsaWtlIGEgZm9nZ3kgZGF5IG9yIGluIHRoZSBzaGFkZXMpICBcclxuICAgKiBBdHRhY2hlZCB0byBhIG5vZGUgYnkge0BsaW5rIENvbXBvbmVudExpZ2h0fSwgdGhlIHBpdm90IG1hdHJpeCBpcyBpZ25vcmVkLlxyXG4gICAqIGBgYHRleHRcclxuICAgKiB+IH4gfiAgXHJcbiAgICogIH4gfiB+ICBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTGlnaHRBbWJpZW50IGV4dGVuZHMgTGlnaHQge1xyXG4gIH1cclxuICAvKipcclxuICAgKiBEaXJlY3Rpb25hbCBsaWdodCwgaWxsdW1pbmF0aW5nIGV2ZXJ5dGhpbmcgZnJvbSBhIHNwZWNpZmllZCBkaXJlY3Rpb24gd2l0aCBpdHMgY29sb3IgKGxpa2Ugc3RhbmRpbmcgaW4gYnJpZ2h0IHN1bmxpZ2h0KSAgXHJcbiAgICogQXR0YWNoZWQgdG8gYSBub2RlIGJ5IHtAbGluayBDb21wb25lbnRMaWdodH0sIHRoZSBwaXZvdCBtYXRyaXggc3BlY2lmaWVzIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGxpZ2h0IG9ubHkuXHJcbiAgICogYGBgdGV4dFxyXG4gICAqIC0tLT4gIFxyXG4gICAqIC0tLT4gIFxyXG4gICAqIC0tLT4gIFxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBMaWdodERpcmVjdGlvbmFsIGV4dGVuZHMgTGlnaHQge1xyXG4gIH1cclxuICAvKipcclxuICAgKiBPbW5pZGlyZWN0aW9uYWwgbGlnaHQgZW1pdHRpbmcgZnJvbSBpdHMgcG9zaXRpb24sIGlsbHVtaW5hdGluZyBvYmplY3RzIGRlcGVuZGluZyBvbiB0aGVpciBwb3NpdGlvbiBhbmQgZGlzdGFuY2Ugd2l0aCBpdHMgY29sb3IgKGxpa2UgYSBjb2xvcmVkIGxpZ2h0IGJ1bGIpICBcclxuICAgKiBBdHRhY2hlZCB0byBhIG5vZGUgYnkge0BsaW5rIENvbXBvbmVudExpZ2h0fSwgdGhlIHBpdm90IG1hdHJpeCBzcGVjaWZpZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCwgaXQncyBzaGFwZSBhbmQgcm90YXRpb24uIFxyXG4gICAqIFNvIHdpdGggdW5ldmVuIHNjYWxpbmcsIG90aGVyIHNoYXBlcyB0aGFuIGEgcGVyZmVjdCBzcGhlcmUsIHN1Y2ggYXMgYW4gb3ZhbCBvciBhIGRpc2MsIGFyZSBwb3NzaWJsZSwgd2hpY2ggY3JlYXRlcyBhIHZpc2libGUgZWZmZWN0IG9mIHRoZSByb3RhdGlvbiB0b28uIFxyXG4gICAqIFRoZSBpbnRlbnNpdHkgb2YgdGhlIGxpZ2h0IGRyb3BzIGxpbmVhcmx5IGZyb20gMSBpbiB0aGUgY2VudGVyIHRvIDAgYXQgdGhlIHBlcmltZXRlciBvZiB0aGUgc2hhcGUuXHJcbiAgICogYGBgdGV4dFxyXG4gICAqICAgICAgICAgLlxcfC8uXHJcbiAgICogICAgICAgIC0tIG8gLS1cclxuICAgKiAgICAgICAgIMK0L3xcXGBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTGlnaHRQb2ludCBleHRlbmRzIExpZ2h0IHtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogU3BvdCBsaWdodCBlbWl0dGluZyB3aXRoaW4gYSBzcGVjaWZpZWQgYW5nbGUgZnJvbSBpdHMgcG9zaXRpb24sIGlsbHVtaW5hdGluZyBvYmplY3RzIGRlcGVuZGluZyBvbiB0aGVpciBwb3NpdGlvbiBhbmQgZGlzdGFuY2Ugd2l0aCBpdHMgY29sb3IgIFxyXG4gICAqIEF0dGFjaGVkIHRvIGEgbm9kZSBieSB7QGxpbmsgQ29tcG9uZW50TGlnaHR9LCB0aGUgcGl2b3QgbWF0cml4IHNwZWNpZmllcyB0aGUgcG9zaXRpb24gb2YgdGhlIGxpZ2h0LCB0aGUgZGlyZWN0aW9uIGFuZCB0aGUgc2l6ZSBhbmQgYW5nbGVzIG9mIHRoZSBjb25lLlxyXG4gICAqIFRoZSBpbnRlbnNpdHkgb2YgdGhlIGxpZ2h0IGRyb3BzIGxpbmVhcmx5IGZyb20gMSBpbiB0aGUgY2VudGVyIHRvIDAgYXQgdGhlIG91dGVyIGxpbWl0cyBvZiB0aGUgY29uZS5cclxuICAgKiBgYGB0ZXh0XHJcbiAgICogICAgICAgICAgbyAgXHJcbiAgICogICAgICAgICAvfFxcICBcclxuICAgKiAgICAgICAgLyB8IFxcIFxyXG4gICAqIGBgYCAgIFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBMaWdodFNwb3QgZXh0ZW5kcyBMaWdodCB7XHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vTGlnaHQvTGlnaHQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBEZWZpbmVzIGlkZW50aWZpZXJzIGZvciB0aGUgdmFyaW91cyB0eXBlcyBvZiBsaWdodCB0aGlzIGNvbXBvbmVudCBjYW4gcHJvdmlkZS4gIFxyXG4gICAqL1xyXG4gIC8vIGV4cG9ydCBsZXQgTElHSFRfVFlQRTogeyBbdHlwZTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XHJcbiAgZXhwb3J0IGVudW0gTElHSFRfVFlQRSB7XHJcbiAgICBBTUJJRU5UID0gXCJMaWdodEFtYmllbnRcIixcclxuICAgIERJUkVDVElPTkFMID0gXCJMaWdodERpcmVjdGlvbmFsXCIsXHJcbiAgICBQT0lOVCA9IFwiTGlnaHRQb2ludFwiLFxyXG4gICAgU1BPVCA9IFwiTGlnaHRTcG90XCJcclxuICB9XHJcbiAgLyoqXHJcbiAgICAqIEF0dGFjaGVzIGEge0BsaW5rIExpZ2h0fSB0byB0aGUgbm9kZVxyXG4gICAgKiBUaGUgcGl2b3QgbWF0cml4IGhhcyBkaWZmZXJlbnQgZWZmZWN0cyBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgdGhlIHtAbGluayBMaWdodH0uIFNlZSB0aGVyZSBmb3IgZGV0YWlscy5cclxuICAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudExpZ2h0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRMaWdodCk7XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBzdGF0aWMgY29uc3RydWN0b3JzOiB7IFt0eXBlOiBzdHJpbmddOiBHZW5lcmFsIH0gPSB7IFtMSUdIVF9UWVBFLkFNQklFTlRdOiBMaWdodEFtYmllbnQsIFtMSUdIVF9UWVBFLkRJUkVDVElPTkFMXTogTGlnaHREaXJlY3Rpb25hbCwgW0xJR0hUX1RZUEUuUE9JTlRdOiBMaWdodFBvaW50LCBbTElHSFRfVFlQRS5TUE9UXTogTGlnaHRTcG90IH07XHJcbiAgICBwdWJsaWMgbXR4UGl2b3Q6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgcHVibGljIGxpZ2h0OiBMaWdodCA9IG51bGw7XHJcbiAgICAvL1RPRE86IHNpbmNlIHRoZXJlIGlzIGFsbW9zdCBubyBmdW5jdGlvbmFsaXR5IGxlZnQgaW4gTGlnaHQsIGVsaW1pbmF0ZSBpdCBhbmQgcHV0IGFsbCBpbiB0aGUgY29tcG9uZW50IGFzIHdpdGggdGhlIGNhbWVyYS4uLlxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbGlnaHQ6IExpZ2h0ID0gbmV3IExpZ2h0QW1iaWVudCgpKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuc2luZ2xldG9uID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubGlnaHQgPSBfbGlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogdXNlIFR5cGVPZkxpZ2h0IGFzIHJldHVybiB0eXBlP1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHR5cGUgb2Yge0BsaW5rIExpZ2h0fSB1c2VkIGJ5IHRoaXMgY29tcG9uZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VHlwZTxUIGV4dGVuZHMgTGlnaHQ+KF9jbGFzczogbmV3ICgpID0+IFQpOiB2b2lkIHtcclxuICAgICAgbGV0IG10ck9sZDogTXV0YXRvciA9IHt9O1xyXG4gICAgICBpZiAodGhpcy5saWdodClcclxuICAgICAgICBtdHJPbGQgPSB0aGlzLmxpZ2h0LmdldE11dGF0b3IoKTtcclxuXHJcbiAgICAgIHRoaXMubGlnaHQgPSBuZXcgX2NsYXNzKCk7XHJcbiAgICAgIHRoaXMubGlnaHQubXV0YXRlKG10ck9sZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgcGl2b3Q6IHRoaXMubXR4UGl2b3Quc2VyaWFsaXplKCksXHJcbiAgICAgICAgbGlnaHQ6IFNlcmlhbGl6ZXIuc2VyaWFsaXplKHRoaXMubGlnaHQpXHJcbiAgICAgIH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBhd2FpdCB0aGlzLm10eFBpdm90LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnBpdm90KTtcclxuICAgICAgdGhpcy5saWdodCA9IGF3YWl0IDxQcm9taXNlPExpZ2h0Pj5TZXJpYWxpemVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmxpZ2h0KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgbXV0YXRvci50eXBlID0gdGhpcy5saWdodC5nZXRUeXBlKCkubmFtZTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLnR5cGUpXHJcbiAgICAgICAgdHlwZXMudHlwZSA9IExJR0hUX1RZUEU7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IHR5cGU6IHN0cmluZyA9IF9tdXRhdG9yLnR5cGU7XHJcbiAgICAgIGlmICh0eXBlb2YgKHR5cGUpICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGUgIT0gdGhpcy5saWdodC5jb25zdHJ1Y3Rvci5uYW1lKVxyXG4gICAgICAgIHRoaXMuc2V0VHlwZShTZXJpYWxpemVyLmdldENvbnN0cnVjdG9yPExpZ2h0Pih0eXBlKSk7XHJcbiAgICAgIGRlbGV0ZSAoX211dGF0b3IudHlwZSk7IC8vIGV4Y2x1ZGUgbGlnaHQgdHlwZSBmcm9tIGZ1cnRoZXIgbXV0YXRpb25cclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgICBfbXV0YXRvci50eXBlID0gdHlwZTsgLy8gcmVjb25zdHJ1Y3QgbXV0YXRvclxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3R2l6bW9zKCk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4U2hhcGU6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5QUk9EVUNUKHRoaXMubm9kZS5tdHhXb3JsZCwgdGhpcy5tdHhQaXZvdCk7XHJcbiAgICAgIG10eFNoYXBlLnNjYWxpbmcgPSBuZXcgVmVjdG9yMygwLjUsIDAuNSwgMC41KTtcclxuICAgICAgR2l6bW9zLmRyYXdJY29uKFRleHR1cmVEZWZhdWx0Lmljb25MaWdodCwgbXR4U2hhcGUsIHRoaXMubGlnaHQuY29sb3IpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhTaGFwZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBkcmF3R2l6bW9zU2VsZWN0ZWQoKTogdm9pZCB7XHJcbiAgICAgIGxldCBtdHhTaGFwZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LlBST0RVQ1QodGhpcy5ub2RlLm10eFdvcmxkLCB0aGlzLm10eFBpdm90KTtcclxuICAgICAgbGV0IGNvbG9yOiBDb2xvciA9IENvbG9yLkNTUyhcInllbGxvd1wiKTtcclxuXHJcbiAgICAgIHN3aXRjaCAodGhpcy5saWdodC5nZXRUeXBlKCkpIHtcclxuICAgICAgICBjYXNlIExpZ2h0RGlyZWN0aW9uYWw6XHJcbiAgICAgICAgICBjb25zdCByYWRpdXM6IG51bWJlciA9IDAuNTtcclxuICAgICAgICAgIEdpem1vcy5kcmF3V2lyZUNpcmNsZShtdHhTaGFwZSwgY29sb3IpO1xyXG4gICAgICAgICAgY29uc3QgbGluZXM6IFZlY3RvcjNbXSA9IG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpKTtcclxuICAgICAgICAgIGxpbmVzWzBdLnNldCgwLCAwLCAwKTsgbGluZXNbMV0uc2V0KDAsIDAsIDEpO1xyXG4gICAgICAgICAgbGluZXNbMl0uc2V0KDAsIHJhZGl1cywgMCk7IGxpbmVzWzNdLnNldCgwLCByYWRpdXMsIDEpO1xyXG4gICAgICAgICAgbGluZXNbNl0uc2V0KDAsIC1yYWRpdXMsIDApOyBsaW5lc1s3XS5zZXQoMCwgLXJhZGl1cywgMSk7XHJcbiAgICAgICAgICBsaW5lc1s0XS5zZXQocmFkaXVzLCAwLCAwKTsgbGluZXNbNV0uc2V0KHJhZGl1cywgMCwgMSk7XHJcbiAgICAgICAgICBsaW5lc1s4XS5zZXQoLXJhZGl1cywgMCwgMCk7IGxpbmVzWzldLnNldCgtcmFkaXVzLCAwLCAxKTtcclxuICAgICAgICAgIEdpem1vcy5kcmF3TGluZXMobGluZXMsIG10eFNoYXBlLCBjb2xvcik7XHJcbiAgICAgICAgICBSZWN5Y2xlci5zdG9yZU11bHRpcGxlKC4uLmxpbmVzKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTGlnaHRQb2ludDpcclxuICAgICAgICAgIG10eFNoYXBlLnNjYWxlKG5ldyBWZWN0b3IzKDIsIDIsIDIpKTtcclxuICAgICAgICAgIEdpem1vcy5kcmF3V2lyZVNwaGVyZShtdHhTaGFwZSwgY29sb3IpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMaWdodFNwb3Q6XHJcbiAgICAgICAgICBHaXptb3MuZHJhd1dpcmVDb25lKG10eFNoYXBlLCBjb2xvcik7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgUmVjeWNsZXIuc3RvcmVNdWx0aXBsZShtdHhTaGFwZSwgY29sb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIGEge0BsaW5rIE1hdGVyaWFsfSB0byB0aGUgbm9kZVxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5IC0gMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRNYXRlcmlhbCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50TWF0ZXJpYWwpO1xyXG4gICAgcHVibGljIGNsclByaW1hcnk6IENvbG9yID0gQ29sb3IuQ1NTKFwid2hpdGVcIik7XHJcbiAgICBwdWJsaWMgY2xyU2Vjb25kYXJ5OiBDb2xvciA9IENvbG9yLkNTUyhcIndoaXRlXCIpO1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXgzeDMgPSBNYXRyaXgzeDMuSURFTlRJVFkoKTtcclxuICAgIHB1YmxpYyBtYXRlcmlhbDogTWF0ZXJpYWw7XHJcbiAgICAvKiogU3VwcG9ydCBzb3J0aW5nIG9mIG9iamVjdHMgd2l0aCB0cmFuc3BhcmVuY3kgd2hlbiByZW5kZXJpbmcsIHJlbmRlciBvYmplY3RzIGluIHRoZSBiYWNrIGZpcnN0LiBXaGVuIHRoaXMgY29tcG9uZW50IGlzIHVzZWQgYXMgYSBwYXJ0IG9mIGEge0BsaW5rIFBhcnRpY2xlU3lzdGVtfSwgdHJ5IGVuYWJsaW5nIHRoaXMgd2hlbiBkaXNhYmxpbmcge0BsaW5rIENvbXBvbmVudFBhcnRpY2xlU3lzdGVtLmRlcHRoTWFza30gKi9cclxuICAgIHB1YmxpYyBzb3J0Rm9yQWxwaGE6IGJvb2xlYW4gPSBmYWxzZTsgLy8gVE9ETzogbWF5YmUgbWFrZSB0aGlzIGEgcHJvcGVydHkgb2YgdGhlIG1hdGVyaWFsP1xyXG4gICAgLy8gcHVibGljIG11dGF0b3JDb2F0OiBNdXRhdG9yRm9yQ29tcG9uZW50O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbWF0ZXJpYWw6IE1hdGVyaWFsID0gbnVsbCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm1hdGVyaWFsID0gX21hdGVyaWFsO1xyXG4gICAgICAvLyB0aGlzLm11dGF0b3JDb2F0ID0gX21hdGVyaWFsLmdldENvYXQoKS5nZXRNdXRhdG9yRm9yQ29tcG9uZW50KCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgc29ydEZvckFscGhhOiB0aGlzLnNvcnRGb3JBbHBoYSxcclxuICAgICAgICBjbHJQcmltYXJ5OiB0aGlzLmNsclByaW1hcnkuc2VyaWFsaXplKCksXHJcbiAgICAgICAgY2xyU2Vjb25kYXJ5OiB0aGlzLmNsclNlY29uZGFyeS5zZXJpYWxpemUoKSxcclxuICAgICAgICBwaXZvdDogdGhpcy5tdHhQaXZvdC5zZXJpYWxpemUoKSxcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIGlkTWF0ZXJpYWw6IHRoaXMubWF0ZXJpYWwuaWRSZXNvdXJjZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5tYXRlcmlhbCA9IDxNYXRlcmlhbD5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkTWF0ZXJpYWwpO1xyXG4gICAgICBhd2FpdCB0aGlzLmNsclByaW1hcnkuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uY2xyUHJpbWFyeSk7XHJcbiAgICAgIGF3YWl0IHRoaXMuY2xyU2Vjb25kYXJ5LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmNsclNlY29uZGFyeSk7XHJcbiAgICAgIHRoaXMuc29ydEZvckFscGhhID0gX3NlcmlhbGl6YXRpb24uc29ydEZvckFscGhhO1xyXG4gICAgICBhd2FpdCB0aGlzLm10eFBpdm90LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnBpdm90KTtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2UoKTogTXV0YXRvckZvclVzZXJJbnRlcmZhY2Uge1xyXG4gICAgLy8gICBsZXQgbXV0YXRvckNvYXQ6IE11dGF0b3JGb3JDb21wb25lbnQgPSB0aGlzLm1hdGVyaWFsLmdldENvYXQoKS5nZXRNdXRhdG9yRm9yQ29tcG9uZW50KCk7XHJcbiAgICAvLyAgIHJldHVybiA8TXV0YXRvckZvclVzZXJJbnRlcmZhY2U+PHVua25vd24+bXV0YXRvckNvYXQ7XHJcbiAgICAvLyB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBdHRhY2hlcyBhIHtAbGluayBNZXNofSB0byB0aGUgbm9kZVxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudE1lc2ggZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudE1lc2gpO1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgIHB1YmxpYyByZWFkb25seSBtdHhXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcbiAgICBwdWJsaWMgbWVzaDogTWVzaDtcclxuICAgIHB1YmxpYyBza2VsZXRvbjogQ29tcG9uZW50U2tlbGV0b247XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9tZXNoPzogTWVzaCwgX3NrZWxldG9uPzogQ29tcG9uZW50U2tlbGV0b24pIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5tZXNoID0gX21lc2g7XHJcbiAgICAgIHRoaXMuc2tlbGV0b24gPSBfc2tlbGV0b247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByYWRpdXMoKTogbnVtYmVyIHtcclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLm10eFdvcmxkLnNjYWxpbmc7XHJcbiAgICAgIGxldCBzY2FsZTogbnVtYmVyID0gTWF0aC5tYXgoTWF0aC5hYnMoc2NhbGluZy54KSwgTWF0aC5hYnMoc2NhbGluZy55KSwgTWF0aC5hYnMoc2NhbGluZy56KSk7XHJcbiAgICAgIHJldHVybiB0aGlzLm1lc2gucmFkaXVzICogc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLyoqXHJcbiAgICAvLyAgKiBDYWxjdWxhdGVzIHRoZSBwb3NpdGlvbiBvZiBhIHZlcnRleCB0cmFuc2Zvcm1lZCBieSB0aGUgc2tlbGV0b25cclxuICAgIC8vICAqIEBwYXJhbSBfaW5kZXggaW5kZXggb2YgdGhlIHZlcnRleFxyXG4gICAgLy8gICovXHJcbiAgICAvLyBwdWJsaWMgZ2V0VmVydGV4UG9zaXRpb24oX2luZGV4OiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgIC8vICAgLy8gZXh0cmFjdCB0aGUgdmVydGV4IGRhdGEgKHZlcnRpY2VzOiAzRCB2ZWN0b3JzLCBib25lIGluZGljZXMgJiB3ZWlnaHRzOiA0RCB2ZWN0b3JzKVxyXG4gICAgLy8gICBjb25zdCBpVmVydGV4OiBudW1iZXIgPSBfaW5kZXggKiAzO1xyXG4gICAgLy8gICBjb25zdCBpQm9uZUluZmx1ZW5jZTogbnVtYmVyID0gX2luZGV4ICogNDtcclxuXHJcbiAgICAvLyAgIGNvbnN0IHZlcnRleDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKC4uLlJlZmxlY3QuZ2V0KHRoaXMubWVzaCwgXCJyZW5kZXJNZXNoXCIpLnZlcnRpY2VzLnNsaWNlKGlWZXJ0ZXgsIGlWZXJ0ZXggKyAzKSk7XHJcbiAgICAvLyAgIGlmICghKHRoaXMubWVzaCBpbnN0YW5jZW9mIE1lc2hTa2luKSkgcmV0dXJuIHZlcnRleDtcclxuXHJcbiAgICAvLyAgIGNvbnN0IGlCb25lczogVWludDhBcnJheSA9IHRoaXMubWVzaC5pQm9uZXMuc2xpY2UoaUJvbmVJbmZsdWVuY2UsIGlCb25lSW5mbHVlbmNlICsgNCk7XHJcbiAgICAvLyAgIGNvbnN0IHdlaWdodHM6IEZsb2F0MzJBcnJheSA9IHRoaXMubWVzaC53ZWlnaHRzLnNsaWNlKGlCb25lSW5mbHVlbmNlLCBpQm9uZUluZmx1ZW5jZSArIDQpO1xyXG5cclxuICAgIC8vICAgLy8gZ2V0IGJvbmUgbWF0cmljZXNcclxuICAgIC8vICAgY29uc3QgbXR4Qm9uZXM6IEFycmF5PE1hdHJpeDR4ND4gPSB0aGlzLnNrZWxldG9uLm10eEJvbmVzO1xyXG5cclxuICAgIC8vICAgLy8gc2tpbiBtYXRyaXggUyA9IHN1bV9pPTFebXt3X2kgKiBCX2l9XHJcbiAgICAvLyAgIGNvbnN0IHNraW5NYXRyaXg6IE1hdHJpeDR4NCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgIC8vICAgc2tpbk1hdHJpeC5zZXQoQXJyYXlcclxuICAgIC8vICAgICAuZnJvbShpQm9uZXMpXHJcbiAgICAvLyAgICAgLm1hcCgoaUJvbmUsIGlXZWlnaHQpID0+IG10eEJvbmVzW2lCb25lXS5nZXQoKS5tYXAodmFsdWUgPT4gdmFsdWUgKiB3ZWlnaHRzW2lXZWlnaHRdKSkgLy8gYXBwbHkgd2VpZ2h0IG9uIGVhY2ggbWF0cml4XHJcbiAgICAvLyAgICAgLnJlZHVjZSgobXR4U3VtLCBtdHhCb25lKSA9PiBtdHhTdW0ubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlICsgbXR4Qm9uZVtpbmRleF0pKSAvLyBzdW0gdXAgdGhlIG1hdHJpY2VzXHJcbiAgICAvLyAgICk7XHJcblxyXG4gICAgLy8gICAvLyB0cmFuc2Zvcm0gdmVydGV4XHJcbiAgICAvLyAgIHZlcnRleC50cmFuc2Zvcm0oc2tpbk1hdHJpeCk7XHJcblxyXG4gICAgLy8gICByZXR1cm4gdmVydGV4O1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIFRPRE86IHJlbW92ZSBvciB0aGluayBpZiB0aGUgdHJhbnNmb3JtZWQgYm91bmRpbmcgYm94IGlzIG9mIHZhbHVlIG9yIGNhbiBiZSBtYWRlIHRvIGJlXHJcbiAgICAvLyBwdWJsaWMgZ2V0IGJvdW5kaW5nQm94KCk6IEJveCB7XHJcbiAgICAvLyAgIGxldCBib3g6IEJveCA9IFJlY3ljbGVyLmdldChCb3gpO1xyXG4gICAgLy8gICBib3guc2V0KFxyXG4gICAgLy8gICAgIFZlY3RvcjMuVFJBTlNGT1JNQVRJT04odGhpcy5tZXNoLmJvdW5kaW5nQm94Lm1pbiwgdGhpcy5tdHhXb3JsZCwgdHJ1ZSksXHJcbiAgICAvLyAgICAgVmVjdG9yMy5UUkFOU0ZPUk1BVElPTih0aGlzLm1lc2guYm91bmRpbmdCb3gubWF4LCB0aGlzLm10eFdvcmxkLCB0cnVlKVxyXG4gICAgLy8gICApO1xyXG4gICAgLy8gICByZXR1cm4gYm94O1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb247XHJcbiAgICAgIC8qIGF0IHRoaXMgcG9pbnQgb2YgdGltZSwgc2VyaWFsaXphdGlvbiBhcyByZXNvdXJjZSBhbmQgYXMgaW5saW5lIG9iamVjdCBpcyBwb3NzaWJsZS4gVE9ETzogY2hlY2sgaWYgaW5saW5lIGJlY29tZXMgb2Jzb2xldGUgKi9cclxuICAgICAgbGV0IGlkTWVzaDogc3RyaW5nID0gdGhpcy5tZXNoLmlkUmVzb3VyY2U7XHJcbiAgICAgIGlmIChpZE1lc2gpXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbiA9IHsgaWRNZXNoOiBpZE1lc2ggfTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24gPSB7IG1lc2g6IFNlcmlhbGl6ZXIuc2VyaWFsaXplKHRoaXMubWVzaCkgfTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnNrZWxldG9uKVxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24uc2tlbGV0b24gPSBOb2RlLlBBVEhfRlJPTV9UTyh0aGlzLCB0aGlzLnNrZWxldG9uKTtcclxuXHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucGl2b3QgPSB0aGlzLm10eFBpdm90LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGxldCBtZXNoOiBNZXNoO1xyXG4gICAgICBpZiAoX3NlcmlhbGl6YXRpb24uaWRNZXNoKVxyXG4gICAgICAgIG1lc2ggPSA8TWVzaD5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkTWVzaCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBtZXNoID0gPE1lc2g+YXdhaXQgU2VyaWFsaXplci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5tZXNoKTtcclxuICAgICAgdGhpcy5tZXNoID0gbWVzaDtcclxuXHJcbiAgICAgIGlmIChfc2VyaWFsaXphdGlvbi5za2VsZXRvbikge1xyXG4gICAgICAgIGNvbnN0IGhuZE5vZGVEZXNlcmlhbGl6ZWQ6IEV2ZW50TGlzdGVuZXJVbmlmaWVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaG5kR3JhcGhEZXNlcmlhbGl6ZWQ6IEV2ZW50TGlzdGVuZXJVbmlmaWVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNrZWxldG9uID0gTm9kZS5GSU5EKHRoaXMsIF9zZXJpYWxpemF0aW9uLnNrZWxldG9uKSBhcyBDb21wb25lbnRTa2VsZXRvbjtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuR1JBUEhfREVTRVJJQUxJWkVELCBobmRHcmFwaERlc2VyaWFsaXplZCk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkdSQVBIX0lOU1RBTlRJQVRFRCwgaG5kR3JhcGhEZXNlcmlhbGl6ZWQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuTk9ERV9ERVNFUklBTElaRUQsIGhuZE5vZGVEZXNlcmlhbGl6ZWQpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkdSQVBIX0RFU0VSSUFMSVpFRCwgaG5kR3JhcGhEZXNlcmlhbGl6ZWQsIHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuR1JBUEhfSU5TVEFOVElBVEVELCBobmRHcmFwaERlc2VyaWFsaXplZCwgdHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTk9ERV9ERVNFUklBTElaRUQsIGhuZE5vZGVEZXNlcmlhbGl6ZWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLm10eFBpdm90LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnBpdm90KTtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2UoKTogTXV0YXRvckZvclVzZXJJbnRlcmZhY2Uge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvckZvclVzZXJJbnRlcmZhY2UgPSA8TXV0YXRvckZvclVzZXJJbnRlcmZhY2U+dGhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIC8vIGlmICghdGhpcy5tZXNoKVxyXG4gICAgICAvLyAgIG11dGF0b3IubWVzaCA9IE1lc2g7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHVibGljIGRyYXdHaXptb3NTZWxlY3RlZCgpOiB2b2lkIHtcclxuICAgICAgaWYgKCF0aGlzLm1lc2gpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBsZXQgY29sb3I6IENvbG9yID0gQ29sb3IuQ1NTKFwic2FsbW9uXCIpO1xyXG4gICAgICBHaXptb3MuZHJhd1dpcmVNZXNoKHRoaXMubWVzaCwgdGhpcy5tdHhXb3JsZCwgY29sb3IsIDAuMSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGNvbG9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBleHBvcnQgZW51bSBQQVJUSUNMRV9TWVNURU1fUExBWU1PREUge1xyXG4gICAgLyoqUGxheXMgcGFydGljbGUgc3lzdGVtIGluIGEgbG9vcDogaXQgcmVzdGFydHMgb25jZSBpdCBoaXQgdGhlIGVuZC4qL1xyXG4gICAgTE9PUCxcclxuICAgIC8qKlBsYXlzIHBhcnRpY2xlIHN5c3RlbSBvbmNlIGFuZCBzdG9wcyBhdCB0aGUgbGFzdCBwb2ludCBpbiB0aW1lLiovXHJcbiAgICBQTEFZX09OQ0VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIGEge0BsaW5rIFBhcnRpY2xlU3lzdGVtfSB0byB0aGUgbm9kZS4gXHJcbiAgICogV29ya3MgaW4gY29uanVuY3Rpb24gd2l0aCB7QGxpbmsgQ29tcG9uZW50TWVzaH0gYW5kIHtAbGluayBDb21wb25lbnRNYXRlcmlhbH0gdG8gY3JlYXRlIGEgc2hhZGVyIHBhcnRpY2xlIHN5c3RlbS5cclxuICAgKiBBZGRpdGlvbmFsbHkgYSB7QGxpbmsgQ29tcG9uZW50RmFjZUNhbWVyYX0gY2FuIGJlIGF0dGFjaGVkIHRvIG1ha2UgdGhlIHBhcnRpY2xlcyBmYWNlIHRoZSBjYW1lcmEuXHJcbiAgICogQGF1dGhvciBKb25hcyBQbG90emt5LCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50UGFydGljbGVTeXN0ZW0pO1xyXG4gICAgcHVibGljIHBhcnRpY2xlU3lzdGVtOiBQYXJ0aWNsZVN5c3RlbTtcclxuICAgIC8qKiBXaGVuIGRpc2FibGVkIHRyeSBlbmFibGluZyB7QGxpbmsgQ29tcG9uZW50TWF0ZXJpYWwuc29ydEZvckFscGhhfSAqL1xyXG4gICAgcHVibGljIGRlcHRoTWFzazogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBibGVuZE1vZGU6IEJMRU5EO1xyXG4gICAgcHVibGljIHBsYXlNb2RlOiBQQVJUSUNMRV9TWVNURU1fUExBWU1PREU7XHJcbiAgICBwdWJsaWMgZHVyYXRpb246IG51bWJlcjtcclxuXHJcbiAgICAvKiogQGludGVybmFsIEEgdGV4dHVyZSBmaWxlZCB3aXRoIHJhbmRvbSBudW1iZXJzLiBVc2VkIGJ5IHRoZSByZW5kZXIgZW5naW5lICovXHJcbiAgICBwcm90ZWN0ZWQgcmVuZGVyRGF0YTogdW5rbm93bjtcclxuXHJcbiAgICAvKiogVGhlIG51bWJlciBvZiBwYXJ0aWNsZXMgKi9cclxuICAgICNzaXplOiBudW1iZXI7XHJcbiAgICAjdGltZVNjYWxlOiBudW1iZXIgPSAxO1xyXG4gICAgcmVhZG9ubHkgI3RpbWU6IFRpbWU7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9wYXJ0aWNsZVN5c3RlbTogUGFydGljbGVTeXN0ZW0gPSBudWxsKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMucGFydGljbGVTeXN0ZW0gPSBfcGFydGljbGVTeXN0ZW07XHJcbiAgICAgIHRoaXMuZGVwdGhNYXNrID0gdHJ1ZTtcclxuICAgICAgdGhpcy5ibGVuZE1vZGUgPSBCTEVORC5BRERJVElWRTtcclxuICAgICAgdGhpcy5wbGF5TW9kZSA9IFBBUlRJQ0xFX1NZU1RFTV9QTEFZTU9ERS5MT09QO1xyXG4gICAgICB0aGlzLmR1cmF0aW9uID0gMTAwMDtcclxuICAgICAgdGhpcy5zaXplID0gMTA7XHJcbiAgICAgIHRoaXMuI3RpbWUgPSBuZXcgVGltZSgpO1xyXG5cclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsIHRoaXMuaG5kRXZlbnQpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX1JFTU9WRSwgdGhpcy5obmRFdmVudCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCwgdGhpcy5obmRFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBwYXJ0aWNsZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBzaXplKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzaXplO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBudW1iZXIgb2YgcGFydGljbGVzLiBDYXV0aW9uOiBTZXR0aW5nIHRoaXMgd2lsbCByZWluaXRpYWxpemUgdGhlIHJhbmRvbSBudW1iZXJzIGFycmF5KHRleHR1cmUpIHVzZWQgaW4gdGhlIHNoYWRlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBzaXplKF9zaXplOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc2l6ZSA9IF9zaXplO1xyXG4gICAgICB0aGlzLmRlbGV0ZVJlbmRlckRhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRpbWUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3RpbWUuZ2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB0aW1lKF90aW1lOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jdGltZS5zZXQoX3RpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdGltZVNjYWxlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN0aW1lU2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB0aW1lU2NhbGUoX3NjYWxlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jdGltZVNjYWxlID0gX3NjYWxlO1xyXG4gICAgICB0aGlzLnVwZGF0ZVRpbWVTY2FsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIEdlbmVyYXRlcyBhbmQgYmluZHMgdGhlIHJhbmRvbSBudW1iZXJzIHRleHR1cmUgaW4gV2ViR0xcclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvckNvbXBvbmVudFBhcnRpY2xlU3lzdGVtfS4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS5cclxuICAgICAqIEBpbnRlcm5hbCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVzZVJlbmRlckRhdGEoKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogRGVsZXRlcyB0aGUgcmFuZG9tIG51bWJlcnMgdGV4dHVyZSBpbiBXZWJHTCBmcmVlaW5nIHRoZSBhbGxvY2F0ZWQgZ3B1IG1lbW9yeS5cclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvckNvbXBvbmVudFBhcnRpY2xlU3lzdGVtfS4gXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVJlbmRlckRhdGEoKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIGlkUGFydGljbGVTeXN0ZW06IHRoaXMucGFydGljbGVTeXN0ZW0/LmlkUmVzb3VyY2UsXHJcbiAgICAgICAgZGVwdGhNYXNrOiB0aGlzLmRlcHRoTWFzayxcclxuICAgICAgICBibGVuZE1vZGU6IHRoaXMuYmxlbmRNb2RlLFxyXG4gICAgICAgIHBsYXlNb2RlOiB0aGlzLnBsYXlNb2RlLFxyXG4gICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxyXG4gICAgICAgIHNpemU6IHRoaXMuc2l6ZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBpZiAoX3NlcmlhbGl6YXRpb24uaWRQYXJ0aWNsZVN5c3RlbSkgdGhpcy5wYXJ0aWNsZVN5c3RlbSA9IDxQYXJ0aWNsZVN5c3RlbT5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkUGFydGljbGVTeXN0ZW0pO1xyXG4gICAgICB0aGlzLmRlcHRoTWFzayA9IF9zZXJpYWxpemF0aW9uLmRlcHRoTWFzaztcclxuICAgICAgdGhpcy5ibGVuZE1vZGUgPSBfc2VyaWFsaXphdGlvbi5ibGVuZE1vZGU7XHJcbiAgICAgIHRoaXMucGxheU1vZGUgPSBfc2VyaWFsaXphdGlvbi5wbGF5TW9kZTtcclxuICAgICAgdGhpcy5kdXJhdGlvbiA9IF9zZXJpYWxpemF0aW9uLmR1cmF0aW9uO1xyXG4gICAgICB0aGlzLnNpemUgPSBfc2VyaWFsaXphdGlvbi5zaXplO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoX2V4dGVuZGFibGU/OiBib29sZWFuKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgbXV0YXRvci5zaXplID0gdGhpcy5zaXplO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2UoKTogTXV0YXRvckZvclVzZXJJbnRlcmZhY2Uge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvckZvclVzZXJJbnRlcmZhY2UgPSA8TXV0YXRvckZvclVzZXJJbnRlcmZhY2U+dGhpcy5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5wYXJ0aWNsZVN5c3RlbTtcclxuICAgICAgbXV0YXRvci5wYXJ0aWNsZVN5c3RlbSA9IHRoaXMucGFydGljbGVTeXN0ZW0/LmdldE11dGF0b3JGb3JVc2VySW50ZXJmYWNlKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yRm9yQW5pbWF0aW9uKCk6IE11dGF0b3JGb3JBbmltYXRpb24ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvckZvckFuaW1hdGlvbiA9IDxNdXRhdG9yRm9yQW5pbWF0aW9uPnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5wYXJ0aWNsZVN5c3RlbTtcclxuICAgICAgZGVsZXRlIG11dGF0b3Iuc2l6ZTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLmJsZW5kTW9kZSlcclxuICAgICAgICB0eXBlcy5ibGVuZE1vZGUgPSBCTEVORDtcclxuICAgICAgaWYgKHR5cGVzLnBsYXlNb2RlKVxyXG4gICAgICAgIHR5cGVzLnBsYXlNb2RlID0gUEFSVElDTEVfU1lTVEVNX1BMQVlNT0RFO1xyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5yYW5kb21OdW1iZXJzUmVuZGVyRGF0YTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnRpbWU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIGhuZEV2ZW50ID0gKF9ldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgc3dpdGNoIChfZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgRVZFTlQuTk9ERV9ERVNFUklBTElaRUQ6XHJcbiAgICAgICAgY2FzZSBFVkVOVC5DT01QT05FTlRfQUREOlxyXG4gICAgICAgICAgVGltZS5nYW1lLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuVElNRV9TQ0FMRUQsIHRoaXMudXBkYXRlVGltZVNjYWxlKTtcclxuICAgICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlJFTkRFUl9QUkVQQVJFLCB0aGlzLnVwZGF0ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVWRU5ULkNPTVBPTkVOVF9SRU1PVkU6XHJcbiAgICAgICAgICBUaW1lLmdhbWUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5USU1FX1NDQUxFRCwgdGhpcy51cGRhdGVUaW1lU2NhbGUpO1xyXG4gICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuUkVOREVSX1BSRVBBUkUsIHRoaXMudXBkYXRlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKHRoaXMudGltZSA+IHRoaXMuZHVyYXRpb24pXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsYXlNb2RlKSB7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY2FzZSBQQVJUSUNMRV9TWVNURU1fUExBWU1PREUuTE9PUDpcclxuICAgICAgICAgICAgdGhpcy50aW1lID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFBBUlRJQ0xFX1NZU1RFTV9QTEFZTU9ERS5QTEFZX09OQ0U6XHJcbiAgICAgICAgICAgIHRoaXMudGltZSA9IHRoaXMuZHVyYXRpb247XHJcbiAgICAgICAgICAgIHRoaXMudGltZVNjYWxlID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRpbWVTY2FsZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgbGV0IHRpbWVTY2FsZTogbnVtYmVyID0gdGhpcy4jdGltZVNjYWxlICogVGltZS5nYW1lLmdldFNjYWxlKCk7XHJcbiAgICAgIHRoaXMuI3RpbWUuc2V0U2NhbGUodGltZVNjYWxlKTtcclxuICAgIH07XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGVudW0gUElDSyB7XHJcbiAgICBSQURJVVMgPSBcInJhZGl1c1wiLFxyXG4gICAgQ0FNRVJBID0gXCJjYW1lcmFcIixcclxuICAgIFBIWVNJQ1MgPSBcInBoeXNpY3NcIlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXR0YWNoZXMgcGlja2luZyBmdW5jdGlvbmFsaXR5IHRvIHRoZSBub2RlXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50UGljayBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50UGljayk7XHJcbiAgICBwdWJsaWMgcGljazogUElDSyA9IFBJQ0suUkFESVVTO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGlja3MgdGhlIG5vZGUgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiB7QGxpbmsgUmF5fSBhbmQgaW52b2tlcyBldmVudHMgYWNjb3JkaW5nbHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBpY2tBbmREaXNwYXRjaChfcmF5OiBSYXksIF9ldmVudDogUG9pbnRlckV2ZW50KTogdm9pZCB7XHJcbiAgICAgIGxldCBjbXBNZXNoOiBDb21wb25lbnRNZXNoID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNZXNoKTtcclxuICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IzID0gY21wTWVzaCA/IGNtcE1lc2gubXR4V29ybGQudHJhbnNsYXRpb24gOiB0aGlzLm5vZGUubXR4V29ybGQudHJhbnNsYXRpb247XHJcblxyXG4gICAgICBzd2l0Y2ggKHRoaXMucGljaykge1xyXG4gICAgICAgIGNhc2UgUElDSy5SQURJVVM6XHJcbiAgICAgICAgICAvLyBUT0RPOiBzaG91bGQgb25seSBiZSBub2RlLnJhZGl1cy4gQWRqdXN0bWVudCBuZWVkZWQsIGlmIG1lc2ggd2FzIHRyYW5zZm9ybWVkLi4uXHJcbiAgICAgICAgICBpZiAoX3JheS5nZXREaXN0YW5jZShwb3NpdGlvbikubWFnbml0dWRlIDwgdGhpcy5ub2RlLnJhZGl1cykge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuZGlzcGF0Y2hFdmVudChfZXZlbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBQSUNLLlBIWVNJQ1M6XHJcbiAgICAgICAgICBsZXQgaGl0SW5mbzogUmF5SGl0SW5mbyA9IFBoeXNpY3MucmF5Y2FzdChfcmF5Lm9yaWdpbiwgX3JheS5kaXJlY3Rpb24sIFZlY3RvcjMuRElGRkVSRU5DRShwb3NpdGlvbiwgX3JheS5vcmlnaW4pLm1hZ25pdHVkZVNxdWFyZWQpO1xyXG4gICAgICAgICAgaWYgKGhpdEluZm8uaGl0KVxyXG4gICAgICAgICAgICB0aGlzLm5vZGUuZGlzcGF0Y2hFdmVudChfZXZlbnQpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy9UT0RPOiBQSUNLLkNBTUVSQVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLnBpY2spXHJcbiAgICAgICAgdHlwZXMucGljayA9IFBJQ0s7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBCYXNlIGNsYXNzIGZvciBzY3JpcHRzIHRoZSB1c2VyIHdyaXRlc1xyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2hzLWZ1cnR3YW5nZW4vRlVER0Uvd2lraS9Db21wb25lbnRcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50U2NyaXB0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIC8vIHJlZ2lzdGVyaW5nIHRoaXMgZG9lc24ndCBtYWtlIHNlbnNlLCBvbmx5IGl0cyBzdWJjbGFzc2VzLiBPciB0aGlzIGNvbXBvbmVudCBtdXN0IHJlZmVyIHRvIHNjcmlwdHMgdG8gYmUgYXR0YWNoZWQgdG8gdGhpcyBjb21wb25lbnRcclxuICAgIC8vIFRPRE86IHJldGhpbmsgJiByZWZhY3RvclxyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFNjcmlwdCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnNpbmdsZXRvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBCdWZmZXJzIHRoZSBib25lIGRhdGEgZnJvbSB0aGUge0BsaW5rIENvbXBvbmVudFNrZWxldG9ufSBpbnRvIGEgV2ViR0wgQnVmZmVyXHJcbiAgICogQGludGVybmFsXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlckluamVjdG9yQ29tcG9uZW50U2tlbGV0b24ge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbiwgX2NvbnRleHQ6IENsYXNzRGVjb3JhdG9yQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJ1c2VSZW5kZXJCdWZmZXJcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvckNvbXBvbmVudFNrZWxldG9uLnVzZVJlbmRlckJ1ZmZlclxyXG4gICAgICB9KTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwidXBkYXRlUmVuZGVyQnVmZmVyXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JDb21wb25lbnRTa2VsZXRvbi51cGRhdGVSZW5kZXJCdWZmZXJcclxuICAgICAgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcImRlbGV0ZVJlbmRlckJ1ZmZlclwiLCB7XHJcbiAgICAgICAgdmFsdWU6IFJlbmRlckluamVjdG9yQ29tcG9uZW50U2tlbGV0b24uZGVsZXRlUmVuZGVyQnVmZmVyXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgdXNlUmVuZGVyQnVmZmVyKHRoaXM6IENvbXBvbmVudFNrZWxldG9uLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5yZW5kZXJCdWZmZXIpXHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyQmFzZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOSUZPUk1fQlVGRkVSLCBVTklGT1JNX0JMT0NLUy5TS0lOLkJJTkRJTkcsIHRoaXMucmVuZGVyQnVmZmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHVwZGF0ZVJlbmRlckJ1ZmZlcih0aGlzOiBDb21wb25lbnRTa2VsZXRvbik6IHZvaWQge1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLnJlbmRlckJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGJvbmVzQnl0ZVNpemU6IG51bWJlciA9IDI1NiAqIDE2ICogNDsgLy8gQ0FVVElPTjogdGhpcyBpcyBkZXBlbmRlbnQgb24gdGhlIHNoYWRlciBzb3VyY2UgY29kZSB3aGVyZSAyNTYgaXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGJvbmVzXHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyQnVmZmVyID0gUmVuZGVyV2ViR0wuYXNzZXJ0KGNyYzMuY3JlYXRlQnVmZmVyKCkpO1xyXG4gICAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOSUZPUk1fQlVGRkVSLCB0aGlzLnJlbmRlckJ1ZmZlcik7XHJcbiAgICAgICAgY3JjMy5idWZmZXJEYXRhKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIGJvbmVzQnl0ZVNpemUsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRFlOQU1JQ19EUkFXKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLm10eEJvbmVzLmxlbmd0aCAqIDE2KTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubXR4Qm9uZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgZGF0YS5zZXQodGhpcy5tdHhCb25lc1tpXS5nZXQoKSwgaSAqIDE2KTtcclxuXHJcbiAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOSUZPUk1fQlVGRkVSLCB0aGlzLnJlbmRlckJ1ZmZlcik7XHJcbiAgICAgIGNyYzMuYnVmZmVyU3ViRGF0YShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOSUZPUk1fQlVGRkVSLCAwLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRlbGV0ZVJlbmRlckJ1ZmZlcih0aGlzOiBDb21wb25lbnRTa2VsZXRvbik6IHZvaWQge1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgaWYgKHRoaXMucmVuZGVyQnVmZmVyKVxyXG4gICAgICAgIGNyYzMuZGVsZXRlQnVmZmVyKHRoaXMucmVuZGVyQnVmZmVyKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLy4uL1JlbmRlci9SZW5kZXJJbmplY3RvckNvbXBvbmVudFNrZWxldG9uLnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogSG9sZHMgYW4gYXJyYXkgb2YgYm9uZXMgKHtAbGluayBOb2RlfXMgd2l0aGluIGEge0BsaW5rIEdyYXBofSkuIFJlZmVyZW5jZWQgZnJvbSBhIHtAbGluayBDb21wb25lbnRNZXNofSBpdCBjYW4gYmUgYXNzb2NpYXRlZCB3aXRoIGEge0BsaW5rIE1lc2h9IGFuZCBlbmFibGUgc2tpbm5pbmcgZm9yIHRoZSBtZXNoLlxyXG4gICAqIEBhdXRob3JzIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIyLTIwMjMgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JDb21wb25lbnRTa2VsZXRvbi5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRTa2VsZXRvbiBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICAvKiogVGhlIGJvbmVzIHVzZWQgZm9yIHNraW5uaW5nICovXHJcbiAgICBwdWJsaWMgYm9uZXM6IE5vZGVbXTtcclxuICAgIC8qKiBXaGVuIGFwcGxpZWQgdG8gdmVydGljZXMsIGl0IG1vdmVzIHRoZW0gZnJvbSBvYmplY3QvbW9kZWwgc3BhY2UgdG8gYm9uZS1sb2NhbCBzcGFjZSBhcyBpZiB0aGUgYm9uZSB3ZXJlIGF0IGl0cyBpbml0aWFsIHBvc2UgKi9cclxuICAgIHB1YmxpYyBtdHhCaW5kSW52ZXJzZXM6IE1hdHJpeDR4NFtdOyAvLyBUT0RPOiB0aGluayBhYm91dCBzZXJpYWxpemluZyB0aGlzIHNlcGFyYXRlbHkgdG8gbWFrZSBpdCBzaGFyZWFibGUgYmV0d2VlbiBza2VsZXRvbiBzZXJpYWxpemF0aW9uc1xyXG5cclxuICAgIHByb3RlY3RlZCByZW5kZXJCdWZmZXI6IHVua25vd247XHJcbiAgICBwcm90ZWN0ZWQgc2luZ2xldG9uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKiogQ29udGFpbnMgdGhlIGJvbmUgdHJhbnNmb3JtYXRpb25zIGFwcGxpY2FibGUgdG8gdGhlIHZlcnRpY2VzIG9mIGEge0BsaW5rIE1lc2h9ICovXHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgbXR4Qm9uZXM6IE1hdHJpeDR4NFtdID0gW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9ib25lczogTm9kZVtdID0gW10sIF9tdHhCb25lSW52ZXJzZXM6IE1hdHJpeDR4NFtdID0gW10pIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5ib25lcyA9IF9ib25lcztcclxuICAgICAgdGhpcy5tdHhCaW5kSW52ZXJzZXMgPSBfbXR4Qm9uZUludmVyc2VzO1xyXG5cclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuYm9uZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgaWYgKHRoaXMubXR4QmluZEludmVyc2VzW2ldID09IG51bGwpXHJcbiAgICAgICAgICB0aGlzLm10eEJpbmRJbnZlcnNlc1tpXSA9IHRoaXMuYm9uZXNbaV0ubXR4V29ybGRJbnZlcnNlLmNsb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yQ29tcG9uZW50U2tlbGV0b259LlxyXG4gICAgICogVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXNlUmVuZGVyQnVmZmVyKF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSk6IFJlbmRlckJ1ZmZlcnMgeyByZXR1cm4gbnVsbDsgLyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcbiAgICAvKipcclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvckNvbXBvbmVudFNrZWxldG9ufS5cclxuICAgICAqIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZVJlbmRlckJ1ZmZlcigpOiBSZW5kZXJCdWZmZXJzIHsgcmV0dXJuIG51bGw7IC8qIGluamVjdGVkIGJ5IFJlbmRlckluamVjdG9yKi8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmplY3RlZCBieSB7QGxpbmsgUmVuZGVySW5qZWN0b3JDb21wb25lbnRTa2VsZXRvbn0uXHJcbiAgICAgKiBVc2VkIGJ5IHRoZSByZW5kZXIgc3lzdGVtLlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVSZW5kZXJCdWZmZXIoKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbm9kZSBhcyBhIGJvbmUgd2l0aCBpdHMgYmluZCBpbnZlcnNlIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQm9uZShfYm9uZTogTm9kZSwgX210eEJpbmRJbnZlcnNlOiBNYXRyaXg0eDQgPSBfYm9uZS5tdHhXb3JsZEludmVyc2UuY2xvbmUpOiB2b2lkIHtcclxuICAgICAgdGhpcy5ib25lcy5wdXNoKF9ib25lKTtcclxuICAgICAgdGhpcy5tdHhCaW5kSW52ZXJzZXMucHVzaChfbXR4QmluZEludmVyc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgYm9uZSBpbiB0aGUgYm9uZXMgYXJyYXkgd2hpY2ggaGFzIHRoZSBnaXZlbiBuYW1lLCBhbmQgLTEgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5kZXhPZihfbmFtZTogc3RyaW5nKTogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIHRoZSBnaXZlbiBib25lIG5vZGUgaW4gdGhlIGJvbmUgYXJyYXksIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5kZXhPZihfbm9kZTogTm9kZSk6IG51bWJlcjtcclxuICAgIHB1YmxpYyBpbmRleE9mKF9uYW1lOiBzdHJpbmcgfCBOb2RlKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHR5cGVvZiAoX25hbWUpID09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9uZXMuZmluZEluZGV4KChfYm9uZTogTm9kZSkgPT4gX2JvbmUubmFtZSA9PSBfbmFtZSk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gdGhpcy5ib25lcy5pbmRleE9mKF9uYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGJvbmUgbWF0cmljZXMgdG8gYmUgdXNlZCBieSB0aGUgc2hhZGVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgIGZvciAoY29uc3QgbXR4Qm9uZSBvZiB0aGlzLm10eEJvbmVzKVxyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eEJvbmUpO1xyXG4gICAgICB0aGlzLm10eEJvbmVzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5ib25lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBtdHhCb25lOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUFJPRFVDVCh0aGlzLmJvbmVzW2ldLm10eFdvcmxkLCB0aGlzLm10eEJpbmRJbnZlcnNlc1tpXSk7XHJcbiAgICAgICAgdGhpcy5tdHhCb25lcy5wdXNoKG10eEJvbmUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIHBvc2Ugb2YgdGhpcyBza2VsZXRvbiB0byB0aGUgZGVmYXVsdCBwb3NlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldFBvc2UoKTogdm9pZCB7IC8vIFRPRE86IHRlc3QgdGhpc1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5ib25lcy5sZW5ndGg7IGkrKylcclxuICAgICAgICB0aGlzLmJvbmVzW2ldLm10eExvY2FsLmNvcHkoTWF0cml4NHg0LklOVkVSU0UodGhpcy5tdHhCaW5kSW52ZXJzZXNbaV0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBjb25zdCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5ib25lcyA9IHRoaXMuYm9uZXMubWFwKF9ib25lID0+IE5vZGUuUEFUSF9GUk9NX1RPKHRoaXMsIF9ib25lKSk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ubXR4QmluZEludmVyc2VzID0gU2VyaWFsaXplci5zZXJpYWxpemVBcnJheShNYXRyaXg0eDQsIHRoaXMubXR4QmluZEludmVyc2VzKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxDb21wb25lbnRTa2VsZXRvbj4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcblxyXG4gICAgICBjb25zdCBobmROb2RlRGVzZXJpYWxpemVkOiBFdmVudExpc3RlbmVyVW5pZmllZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmJvbmVzID0gX3NlcmlhbGl6YXRpb24uYm9uZXMubWFwKChfcGF0aDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICBsZXQgYm9uZTogTm9kZSA9IE5vZGUuRklORCh0aGlzLCBfcGF0aCkgYXMgTm9kZTtcclxuICAgICAgICAgIGlmICghYm9uZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke05vZGUubmFtZX0gXCIke3RoaXMubm9kZS5uYW1lfVwiICR7Q29tcG9uZW50U2tlbGV0b24ubmFtZX06IENvdWxkIG5vdCBmaW5kIGJvbmUgJHtfcGF0aH1gKTtcclxuICAgICAgICAgIHJldHVybiBib25lO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCwgaG5kTm9kZURlc2VyaWFsaXplZCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCwgaG5kTm9kZURlc2VyaWFsaXplZCk7XHJcblxyXG4gICAgICB0aGlzLm10eEJpbmRJbnZlcnNlcyA9IDxNYXRyaXg0eDRbXT5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplQXJyYXkoX3NlcmlhbGl6YXRpb24ubXR4QmluZEludmVyc2VzKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIGEge0BsaW5rIFRleHR1cmVUZXh0fSB0byB0aGUgbm9kZS4gXHJcbiAgICogV29ya3MgaW4gY29uanVuY3Rpb24gd2l0aCB7QGxpbmsgQ29tcG9uZW50TWVzaH0gYW5kIHtAbGluayBDb21wb25lbnRNYXRlcmlhbH0gdG8gY3JlYXRlIGEgdGV4dCBub2RlLlxyXG4gICAqIEEgJ3RleHR1cmVkJyB7QGxpbmsgTWF0ZXJpYWx9IChlLmcuIHtAbGluayBTaGFkZXJMaXRUZXh0dXJlZH0pIG11c3QgYmUgdXNlZCB0byBkaXNwbGF5IHRoZSB0ZXh0IHByb3Blcmx5LiBJZGVhbGx5IGEge0BsaW5rIE1lc2hRdWFkfSBzaG91bGQgYmUgdXNlZCB0byByZW5kZXIgdGhlIHRleHQgb250by5cclxuICAgKiBBZGRpdGlvbmFsbHkgYSB7QGxpbmsgQ29tcG9uZW50RmFjZUNhbWVyYX0gY2FuIGJlIGF0dGFjaGVkIHRvIG1ha2UgdGhlIHRleHQgZmFjZSB0aGUgY2FtZXJhLlxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyNFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRUZXh0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRUZXh0KTtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgdGV4dHVyZTogVGV4dHVyZVRleHQ7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbXR4V29ybGQ6IE1hdHJpeDR4NDtcclxuXHJcbiAgICAvKiogLSBvbjogVGhlIHRleHRzIHNpemUgaXMgZml4ZWQgdG8gbWF0Y2ggdGhlIHNldCBmb250IHNpemVcclxuICAgICAqICAtIG9mZjogVGhlIGZvbnQgc2l6ZSBpcyBzdHJldGNoZWQgdG8gbWF0Y2ggdGhlIGF0dGFjaGVkIG1lc2hlcyBzaXplXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaXhlZFNpemU6IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF90ZXh0Pzogc3RyaW5nLCBfZm9udD86IHN0cmluZykge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnRleHR1cmUgPSBuZXcgVGV4dHVyZVRleHQoQ29tcG9uZW50VGV4dC5uYW1lLCBfdGV4dCwgX2ZvbnQpO1xyXG4gICAgICB0aGlzLm10eFdvcmxkID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcbiAgICAgIHRoaXMuZml4ZWRTaXplID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVzZVJlbmRlckRhdGEoX210eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQsIF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIHRoaXMudGV4dHVyZS51c2VSZW5kZXJEYXRhKFRFWFRVUkVfTE9DQVRJT04uQ09MT1IuVU5JVCk7XHJcbiAgICAgIHRoaXMubXR4V29ybGQuY29weShfbXR4TWVzaFRvV29ybGQpO1xyXG5cclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5maXhlZFNpemUpIHtcclxuICAgICAgICBsZXQgc2NhbGU6IG51bWJlcjtcclxuICAgICAgICBsZXQgcmVjdDogUmVjdGFuZ2xlID0gUmVuZGVyLmdldFJlbmRlclJlY3RhbmdsZSgpO1xyXG4gICAgICAgIHN3aXRjaCAoX2NtcENhbWVyYS5nZXREaXJlY3Rpb24oKSkge1xyXG4gICAgICAgICAgY2FzZSBGSUVMRF9PRl9WSUVXLlZFUlRJQ0FMOlxyXG4gICAgICAgICAgICBzY2FsZSA9IDEgLyByZWN0LmhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgRklFTERfT0ZfVklFVy5IT1JJWk9OVEFMOlxyXG4gICAgICAgICAgICBzY2FsZSA9IDEgLyByZWN0LndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBGSUVMRF9PRl9WSUVXLkRJQUdPTkFMOlxyXG4gICAgICAgICAgICBzY2FsZSA9IDEgLyBNYXRoLnNxcnQoKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCkgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRpc3RhbmNlOiBudW1iZXIgPSBfY21wQ2FtZXJhLm10eFdvcmxkLnRyYW5zbGF0aW9uLmdldERpc3RhbmNlKF9tdHhNZXNoVG9Xb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICAgICAgc2NhbGUgPSBzY2FsZSAqIGRpc3RhbmNlO1xyXG4gICAgICAgIHNjYWxpbmcuc2V0KHRoaXMudGV4dHVyZS53aWR0aCAqIHNjYWxlLCB0aGlzLnRleHR1cmUuaGVpZ2h0ICogc2NhbGUsIDEpO1xyXG4gICAgICAgIHRoaXMubXR4V29ybGQuc2NhbGluZyA9IHNjYWxpbmc7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUoZGlzdGFuY2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBwaXhlbHNUb1VuaXRzOiBudW1iZXIgPSAxIC8gdGhpcy50ZXh0dXJlLmhlaWdodDtcclxuICAgICAgICBzY2FsaW5nLnNldCh0aGlzLnRleHR1cmUud2lkdGggKiBwaXhlbHNUb1VuaXRzLCB0aGlzLnRleHR1cmUuaGVpZ2h0ICogcGl4ZWxzVG9Vbml0cywgMSk7XHJcbiAgICAgICAgdGhpcy5tdHhXb3JsZC5zY2FsZShzY2FsaW5nKTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHNjYWxpbmcpO1xyXG4gICAgICByZXR1cm4gdGhpcy5tdHhXb3JsZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd0dpem1vc1NlbGVjdGVkKCk6IHZvaWQge1xyXG4gICAgICBsZXQgbWVzaDogTWVzaCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk/Lm1lc2g7XHJcbiAgICAgIGxldCBjbXBNYXRlcmlhbDogQ29tcG9uZW50TWF0ZXJpYWwgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1hdGVyaWFsKTtcclxuICAgICAgaWYgKG1lc2ggPT0gbnVsbCB8fCBjbXBNYXRlcmlhbCA9PSBudWxsKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIEdpem1vcy5kcmF3V2lyZU1lc2gobWVzaCwgdGhpcy5tdHhXb3JsZCwgY21wTWF0ZXJpYWwuY2xyUHJpbWFyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci50ZXh0dXJlLm5hbWU7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIGV4cG9ydCBlbnVtIEJBU0Uge1xyXG4gICAgU0VMRiwgUEFSRU5ULCBXT1JMRCwgTk9ERVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXR0YWNoZXMgYSB0cmFuc2Zvcm0te0BsaW5rIE1hdHJpeDR4NH0gdG8gdGhlIG5vZGUsIG1vdmluZywgc2NhbGluZyBhbmQgcm90YXRpbmcgaXQgaW4gc3BhY2UgcmVsYXRpdmUgdG8gaXRzIHBhcmVudC5cclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRUcmFuc2Zvcm0gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFRyYW5zZm9ybSk7XHJcbiAgICBwdWJsaWMgbXR4TG9jYWw6IE1hdHJpeDR4NDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX210eEluaXQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMubXR4TG9jYWwgPSBfbXR4SW5pdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmb3JtYXRpb25zIHJlc3BlY3RpbmcgdGhlIGhpZXJhcmNoeVxyXG4gICAgLyoqXHJcbiAgICAgKiByZWNhbGN1bGF0ZXMgdGhpcyBsb2NhbCBtYXRyaXggdG8geWllbGQgdGhlIGlkZW50aWNhbCB3b3JsZCBtYXRyaXggYmFzZWQgb24gdGhlIGdpdmVuIG5vZGUuXHJcbiAgICAgKiBVc2UgcmViYXNlIGJlZm9yZSBhcHBlbmRpbmcgdGhlIGNvbnRhaW5lciBvZiB0aGlzIGNvbXBvbmVudCB0byBhbm90aGVyIG5vZGUgd2hpbGUgcHJlc2VydmluZyBpdHMgdHJhbnNmb3JtYXRpb24gaW4gdGhlIHdvcmxkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmViYXNlKF9ub2RlOiBOb2RlID0gbnVsbCk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSB0aGlzLm10eExvY2FsO1xyXG4gICAgICBsZXQgY29udGFpbmVyOiBOb2RlID0gdGhpcy5ub2RlO1xyXG4gICAgICBpZiAoY29udGFpbmVyKVxyXG4gICAgICAgIG10eFJlc3VsdCA9IGNvbnRhaW5lci5tdHhXb3JsZDtcclxuXHJcbiAgICAgIGlmIChfbm9kZSlcclxuICAgICAgICBtdHhSZXN1bHQgPSBNYXRyaXg0eDQuUkVMQVRJVkUobXR4UmVzdWx0LCBudWxsLCBfbm9kZS5tdHhXb3JsZEludmVyc2UpO1xyXG5cclxuICAgICAgdGhpcy5tdHhMb2NhbCA9IG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIHRyYW5zZm9ybWF0aW9uIHJlbGF0aXZlIHRvIHRoZSBzZWxlY3RlZCBiYXNlIChTRUxGLCBQQVJFTlQsIFdPUkxEKSBvciBhIHBhcnRpY3VsYXIgb3RoZXIgbm9kZSAoTk9ERSlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zZm9ybShfbXR4VHJhbnNmb3JtOiBNYXRyaXg0eDQsIF9iYXNlOiBCQVNFID0gQkFTRS5TRUxGLCBfbm9kZTogTm9kZSA9IG51bGwpOiB2b2lkIHtcclxuICAgICAgc3dpdGNoIChfYmFzZSkge1xyXG4gICAgICAgIGNhc2UgQkFTRS5TRUxGOlxyXG4gICAgICAgICAgdGhpcy5tdHhMb2NhbC5tdWx0aXBseShfbXR4VHJhbnNmb3JtKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQkFTRS5QQVJFTlQ6XHJcbiAgICAgICAgICB0aGlzLm10eExvY2FsLm11bHRpcGx5KF9tdHhUcmFuc2Zvcm0sIHRydWUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCQVNFLk5PREU6XHJcbiAgICAgICAgICBpZiAoIV9ub2RlKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCQVNFLk5PREUgcmVxdWlyZXMgYSBub2RlIGdpdmVuIGFzIGJhc2VcIik7XHJcbiAgICAgICAgY2FzZSBCQVNFLldPUkxEOlxyXG4gICAgICAgICAgdGhpcy5yZWJhc2UoX25vZGUpO1xyXG4gICAgICAgICAgdGhpcy5tdHhMb2NhbC5tdWx0aXBseShfbXR4VHJhbnNmb3JtLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICBsZXQgbm9kZTogTm9kZSA9IHRoaXMubm9kZTtcclxuICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgIGxldCBtdHhUZW1wOiBNYXRyaXg0eDQ7XHJcbiAgICAgICAgICAgIGlmIChfYmFzZSA9PSBCQVNFLk5PREUpIHtcclxuICAgICAgICAgICAgICAvLyBmaXggbXR4V29ybGQgb2YgY29udGFpbmVyIGZvciBzdWJzZXF1ZW50IHJlYmFzaW5nIFxyXG4gICAgICAgICAgICAgIG10eFRlbXAgPSBNYXRyaXg0eDQuUFJPRFVDVChfbm9kZS5tdHhXb3JsZCwgbm9kZS5tdHhMb2NhbCk7XHJcbiAgICAgICAgICAgICAgbm9kZS5tdHhXb3JsZC5jb3B5KG10eFRlbXApO1xyXG4gICAgICAgICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFRlbXApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcGFyZW50OiBOb2RlID0gbm9kZS5nZXRQYXJlbnQoKTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgIC8vIGZpeCBtdHhMb2NhbCBmb3IgY3VycmVudCBwYXJlbnRcclxuICAgICAgICAgICAgICB0aGlzLnJlYmFzZShub2RlLmdldFBhcmVudCgpKTtcclxuICAgICAgICAgICAgICBtdHhUZW1wID0gTWF0cml4NHg0LlBST0RVQ1Qobm9kZS5nZXRQYXJlbnQoKS5tdHhXb3JsZCwgbm9kZS5tdHhMb2NhbCk7XHJcbiAgICAgICAgICAgICAgbm9kZS5tdHhXb3JsZC5jb3B5KG10eFRlbXApO1xyXG4gICAgICAgICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFRlbXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBsb2NhbDogdGhpcy5tdHhMb2NhbC5zZXJpYWxpemUoKSxcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBhd2FpdCB0aGlzLm10eExvY2FsLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmxvY2FsKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHVibGljIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgLy8gICAgIHRoaXMubG9jYWwubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgIC8vIH1cclxuICAgIC8vIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3IgeyBcclxuICAgIC8vICAgICByZXR1cm4gdGhpcy5sb2NhbC5nZXRNdXRhdG9yKCk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAvLyAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSB0aGlzLmxvY2FsLmdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcik7XHJcbiAgICAvLyAgICAgcmV0dXJuIHR5cGVzO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci53b3JsZDtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyBhIFZSIENvbnRyb2xsZXIgYW5kIGl0cyBjYXBhYmlsaXRpZXMuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFZSQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgY21wVHJhbnNmb3JtOiBDb21wb25lbnRUcmFuc2Zvcm0gPSBudWxsO1xyXG4gICAgcHVibGljIGdhbWVQYWQ6IEdhbWVwYWQgPSBudWxsO1xyXG4gICAgcHVibGljIHRodW1ic3RpY2tYOiBudW1iZXIgPSBudWxsO1xyXG4gICAgcHVibGljIHRodW1ic3RpY2tZOiBudW1iZXIgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVlIgQ29tcG9uZW50IENsYXNzLCBmb3IgU2Vzc2lvbiBNYW5hZ2VtZW50LCBDb250cm9sbGVyIE1hbmFnZW1lbnQgYW5kIFJlZmVyZW5jZSBTcGFjZSBNYW5hZ2VtZW50LiBcclxuICAgKiBAYXV0aG9yIFZhbGVudGluIFNjaG1pZGJlcmdlciwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudFZSRGV2aWNlIGV4dGVuZHMgQ29tcG9uZW50Q2FtZXJhIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRWUkRldmljZSk7XHJcbiAgICBwdWJsaWMgcmlnaHRDbnRybDogVlJDb250cm9sbGVyID0gbmV3IFZSQ29udHJvbGxlcigpO1xyXG4gICAgcHVibGljIGxlZnRDbnRybDogVlJDb250cm9sbGVyID0gbmV3IFZSQ29udHJvbGxlcigpO1xyXG5cclxuICAgICNtdHhMb2NhbDogTWF0cml4NHg0O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsIHRoaXMuZ2V0TXR4TG9jYWxGcm9tQ21wVHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGFjdHVhbCBtYXRyaXggb2YgdGhlIHZyIC0gZGV2aWNlLlxyXG4gICAgICogQ3JlYXRvcnMgc2hvdWxkIHVzZSB0aGlzIGZvciByZWFkb25seSBwdXJwb3Nlcy4gIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG10eExvY2FsKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtdHhMb2NhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgYSBWZWN0b3IzIGFzIFBvc2l0aW9uIG9mIHRoZSByZWZlcmVuY2Ugc3BhY2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQgdHJhbnNsYXRpb24oX3RyYW5zbGF0aW9uOiBWZWN0b3IzKSB7XHJcbiAgICAgIGxldCB0cmFuc2xhdGlvbjogVmVjdG9yMyA9IF90cmFuc2xhdGlvbi5jbG9uZTtcclxuICAgICAgdHJhbnNsYXRpb24uc3VidHJhY3QodGhpcy4jbXR4TG9jYWwudHJhbnNsYXRpb24pO1xyXG4gICAgICB0cmFuc2xhdGlvbi5uZWdhdGUoKTtcclxuICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlID0gWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlLmdldE9mZnNldFJlZmVyZW5jZVNwYWNlKG5ldyBYUlJpZ2lkVHJhbnNmb3JtKHRyYW5zbGF0aW9uKSk7XHJcbiAgICAgIHRoaXMuI210eExvY2FsLnRyYW5zbGF0aW9uID0gX3RyYW5zbGF0aW9uO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh0cmFuc2xhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIFZlY3RvcjMgUm90YXRpb24gb2YgdGhlIHJlZmVyZW5jZSBzcGFjZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCByb3RhdGlvbihfcm90YXRpb246IFZlY3RvcjMpIHtcclxuICAgICAgbGV0IHJvdGF0aW9uOiBWZWN0b3IzID0gX3JvdGF0aW9uLmNsb25lOyBcclxuICAgICAgcm90YXRpb24uc3VidHJhY3QodGhpcy4jbXR4TG9jYWwucm90YXRpb24pO1xyXG4gICAgICByb3RhdGlvbi5uZWdhdGUoKTtcclxuICAgICAgbGV0IG9yaWVudGF0aW9uOiBRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgb3JpZW50YXRpb24uZXVsZXJBbmdsZXMgPSByb3RhdGlvbjtcclxuICAgICAgLy8gUm90YXRpb24gbmVlZHMgdG8gYmUgc2V0IGluIHRoZSBPcmlnaW4gKDAsMCwwKSwgb3RoZXJ3aXNlIHRoZSBYUi1SaWcgZ2V0cyByb3RhdGVkIGFyb3VuZCB0aGUgb3JpZ2luLiBcclxuICAgICAgLy8gc2V0IHhyIC0gcmlnIGJhY2sgdG8gb3JpZ2luXHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSA9IFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZS5nZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShuZXcgWFJSaWdpZFRyYW5zZm9ybShWZWN0b3IzLkRJRkZFUkVOQ0UodGhpcy4jbXR4TG9jYWwudHJhbnNsYXRpb24sIFZlY3RvcjMuWkVSTygpKSkpO1xyXG4gICAgICAvLyByb3RhdGUgeHIgcmlnIGluIG9yaWdpblxyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oVmVjdG9yMy5aRVJPKCksIG9yaWVudGF0aW9uKSk7XHJcbiAgICAgIC8vIHNldCB4ciAtIHJpZyBiYWNrIHRvIGxhc3QgcG9zaXRpb24gXHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSA9IFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZS5nZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShuZXcgWFJSaWdpZFRyYW5zZm9ybShWZWN0b3IzLkRJRkZFUkVOQ0UoVmVjdG9yMy5aRVJPKCksIHRoaXMuI210eExvY2FsLnRyYW5zbGF0aW9uKSkpO1xyXG4gICAgICB0aGlzLiNtdHhMb2NhbC5yb3RhdGlvbiA9IF9yb3RhdGlvbjtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocm90YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIFZlY3RvcjMgaW4gUG9zaXRpb24gb2YgdGhlIHJlZmVyZW5jZSBzcGFjZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZShfYnk6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgbGV0IHRyYW5zbGF0aW9uOiBWZWN0b3IzID0gX2J5LmNsb25lO1xyXG4gICAgICB0cmFuc2xhdGlvbi50cmFuc2Zvcm0odGhpcy4jbXR4TG9jYWwucXVhdGVybmlvbik7XHJcbiAgICAgIHRyYW5zbGF0aW9uLm5lZ2F0ZSgpO1xyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0odHJhbnNsYXRpb24pKTtcclxuICAgICAgdGhpcy4jbXR4TG9jYWwudHJhbnNsYXRlKF9ieSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHRyYW5zbGF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBWZWN0b3IzIGluIFJvdGF0aW9uIG9mIHRoZSByZWZlcmVuY2Ugc3BhY2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByb3RhdGUoX2J5OiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIGxldCByb3RhdGlvbjogVmVjdG9yMyA9IF9ieS5jbG9uZS5uZWdhdGUoKTsgXHJcbiAgICAgIGxldCBvcmllbnRhdGlvbjogUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgIG9yaWVudGF0aW9uLmV1bGVyQW5nbGVzID0gcm90YXRpb247XHJcbiAgICAgIC8vIFJvdGF0aW9uIG5lZWRzIHRvIGJlIGFkZGVkIGluIHRoZSBPcmlnaW4gKDAsMCwwKSwgb3RoZXJ3aXNlIHRoZSBYUi1SaWcgZ2V0cyByb3RhdGVkIGFyb3VuZCB0aGUgb3JpZ2luLiBcclxuICAgICAgLy8gc2V0IHhyIC0gcmlnIGJhY2sgdG8gb3JpZ2luXHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSA9IFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZS5nZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShuZXcgWFJSaWdpZFRyYW5zZm9ybShWZWN0b3IzLkRJRkZFUkVOQ0UodGhpcy4jbXR4TG9jYWwudHJhbnNsYXRpb24sIFZlY3RvcjMuWkVSTygpKSkpO1xyXG4gICAgICAvLyByb3RhdGUgeHIgcmlnIGluIG9yaWdpblxyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oVmVjdG9yMy5aRVJPKCksIG9yaWVudGF0aW9uKSk7XHJcbiAgICAgIC8vIHNldCB4ciAtIHJpZyBiYWNrIHRvIGxhc3QgcG9zaXRpb24gXHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSA9IFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZS5nZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShuZXcgWFJSaWdpZFRyYW5zZm9ybShWZWN0b3IzLkRJRkZFUkVOQ0UoVmVjdG9yMy5aRVJPKCksIHRoaXMuI210eExvY2FsLnRyYW5zbGF0aW9uKSkpO1xyXG4gICAgICB0aGlzLiNtdHhMb2NhbC5yb3RhdGUoX2J5KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocm90YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0TXR4TG9jYWxGcm9tQ21wVHJhbnNmb3JtKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNtdHhMb2NhbCA9IHRoaXMubm9kZS5tdHhMb2NhbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBleHBvcnQgY29uc3QgZW51bSBFVkVOVF9DT05UUk9MIHtcclxuICAgIElOUFVUID0gXCJpbnB1dFwiLFxyXG4gICAgT1VUUFVUID0gXCJvdXRwdXRcIlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGNvbnN0IGVudW0gQ09OVFJPTF9UWVBFIHtcclxuICAgIC8qKiBUaGUgb3V0cHV0IHNpbXBseSBmb2xsb3dzIHRoZSBzY2FsZWQgYW5kIGRlbGF5ZWQgaW5wdXQgKi9cclxuICAgIFBST1BPUlRJT05BTCxcclxuICAgIC8qKiBUaGUgb3V0cHV0IHZhbHVlIGNoYW5nZXMgb3ZlciB0aW1lIHdpdGggYSByYXRlIGdpdmVuIGJ5IHRoZSBzY2FsZWQgYW5kIGRlbGF5ZWQgaW5wdXQgKi9cclxuICAgIElOVEVHUkFMLFxyXG4gICAgLyoqIFRoZSBvdXRwdXQgdmFsdWUgcmVhY3RzIHRvIGNoYW5nZXMgb2YgdGhlIHNjYWxlZCBpbnB1dCBhbmQgZHJvcHMgdG8gMCB3aXRoIGdpdmVuIGRlbGF5LCBpZiBpbnB1dCByZW1haW5zIGNvbnN0YW50ICovXHJcbiAgICBESUZGRVJFTlRJQUxcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3NlcyBpbnB1dCBzaWduYWxzIG9mIHR5cGUgbnVtYmVyIGFuZCBnZW5lcmF0ZXMgYW4gb3V0cHV0IHNpZ25hbCBvZiB0aGUgc2FtZSB0eXBlIHVzaW5nIFxyXG4gICAqIHByb3BvcnRpb25hbCwgaW50ZWdyYWwgb3IgZGlmZmVyZW50aWFsIG1hcHBpbmcsIGFuIGFtcGxpZmljYXRpb24gZmFjdG9yIGFuZCBhIGxpbmVhciBkYW1wZW5pbmcvZGVsYXlcclxuICAgKiBgYGB0ZXh0XHJcbiAgICogICAgICAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcclxuICAgKiAgICAgICAgIOKUgiAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUkCAgICAgIHBhc3MgdGhyb3VnaCAoUHJvcG9ydGlvbmFsKSAgICAgIOKUglxyXG4gICAqIElucHV0IOKGkiDilIIg4oaSIOKUgmFtcGxpZnnilIIg4oaSIOKUgmRlbGF54pSCIOKGkiDimp8gc3VtIHVwIG92ZXIgdGltZSAoSW50ZWdyYWwpIOKaniDihpIg4pSCIOKGkiBPdXRwdXRcclxuICAgKiAgICAgICAgIOKUgiAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUmCAgICAgIHBhc3MgY2hhbmdlICAoRGlmZmVyZW50aWFsKSAgICAgIOKUglxyXG4gICAqICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIFxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb250cm9sIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHR5cGU6IENPTlRST0xfVFlQRTtcclxuICAgIHB1YmxpYyBhY3RpdmU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCByYXRlRGlzcGF0Y2hPdXRwdXQ6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgdmFsdWVQcmV2aW91czogbnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCBvdXRwdXRCYXNlOiBudW1iZXIgPSAwO1xyXG4gICAgcHJvdGVjdGVkIG91dHB1dFRhcmdldDogbnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCBvdXRwdXRQcmV2aW91czogbnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCBvdXRwdXRUYXJnZXRQcmV2aW91czogbnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCBmYWN0b3I6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJvdGVjdGVkIHRpbWU6IFRpbWUgPSBUaW1lLmdhbWU7XHJcbiAgICBwcm90ZWN0ZWQgdGltZVZhbHVlRGVsYXk6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgdGltZU91dHB1dFRhcmdldFNldDogbnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCBpZFRpbWVyOiBudW1iZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9mYWN0b3I6IG51bWJlciA9IDEsIF90eXBlOiBDT05UUk9MX1RZUEUgPSBDT05UUk9MX1RZUEUuUFJPUE9SVElPTkFMLCBfZGVsYXk6IG51bWJlciA9IDApIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5mYWN0b3IgPSBfZmFjdG9yO1xyXG4gICAgICB0aGlzLnR5cGUgPSBfdHlwZTtcclxuICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5zZXREZWxheShfZGVsYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSB0aW1lLW9iamVjdCB0byBiZSB1c2VkIHdoZW4gY2FsY3VsYXRpbmcgdGhlIG91dHB1dCBpbiB7QGxpbmsgQ09OVFJPTF9UWVBFLklOVEVHUkFMfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VGltZWJhc2UoX3RpbWU6IFRpbWUpOiB2b2lkIHtcclxuICAgICAgdGhpcy50aW1lID0gX3RpbWU7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlT3V0cHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZWVkIGFuIGlucHV0IHZhbHVlIGludG8gdGhpcyBjb250cm9sIGFuZCBmaXJlIHRoZSBldmVudHMge0BsaW5rIEVWRU5UX0NPTlRST0wuSU5QVVR9IGFuZCB7QGxpbmsgRVZFTlRfQ09OVFJPTC5PVVRQVVR9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRJbnB1dChfaW5wdXQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMuYWN0aXZlKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIHRoaXMub3V0cHV0QmFzZSA9IHRoaXMuY2FsY3VsYXRlT3V0cHV0KCk7XHJcbiAgICAgIHRoaXMudmFsdWVQcmV2aW91cyA9IHRoaXMuZ2V0VmFsdWVEZWxheWVkKCk7XHJcbiAgICAgIHRoaXMub3V0cHV0VGFyZ2V0ID0gdGhpcy5mYWN0b3IgKiBfaW5wdXQ7XHJcbiAgICAgIHRoaXMudGltZU91dHB1dFRhcmdldFNldCA9IHRoaXMudGltZS5nZXQoKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnR5cGUgPT0gQ09OVFJPTF9UWVBFLkRJRkZFUkVOVElBTCkge1xyXG4gICAgICAgIHRoaXMudmFsdWVQcmV2aW91cyA9IHRoaXMub3V0cHV0VGFyZ2V0IC0gdGhpcy5vdXRwdXRUYXJnZXRQcmV2aW91cztcclxuICAgICAgICB0aGlzLm91dHB1dFRhcmdldFByZXZpb3VzID0gdGhpcy5vdXRwdXRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5vdXRwdXRUYXJnZXQgPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5UX0NPTlRST0wuSU5QVVQpKTtcclxuICAgICAgaWYgKHRoaXMudHlwZSA9PSBDT05UUk9MX1RZUEUuRElGRkVSRU5USUFMKVxyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hPdXRwdXQodGhpcy52YWx1ZVByZXZpb3VzKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hPdXRwdXQobnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUT0RPOiBkZXNjcmliZSFcclxuICAgICAqL1xyXG4gICAgcHVibGljIHB1bHNlKF9pbnB1dDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0SW5wdXQoX2lucHV0KTtcclxuICAgICAgdGhpcy5zZXRJbnB1dCgwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgdGltZSB0byB0YWtlIGZvciB0aGUgaW50ZXJuYWwgbGluZWFyIGRhbXBlbmluZyB1bnRpbCB0aGUgZmluYWwgb3VwdXQgdmFsdWUgaXMgcmVhY2hlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0RGVsYXkoX3RpbWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnRpbWVWYWx1ZURlbGF5ID0gTWF0aC5tYXgoMCwgX3RpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBudW1iZXIgb2Ygb3V0cHV0LWV2ZW50cyB0byBkaXNwYXRjaCBwZXIgc2Vjb25kLiBcclxuICAgICAqIEF0IHRoZSBkZWZhdWx0IG9mIDAsIHRoZSBjb250cm9sIG91dHB1dCBtdXN0IGJlIHBvbGxlZCBhbmQgd2lsbCBvbmx5IGFjdGl2ZWx5IGRpc3BhdGNoZWQgb25jZSBlYWNoIHRpbWUgaW5wdXQgb2NjdXJzIGFuZCB0aGUgb3V0cHV0IGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRSYXRlRGlzcGF0Y2hPdXRwdXQoX3JhdGVEaXNwYXRjaE91dHB1dDogbnVtYmVyID0gMCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnJhdGVEaXNwYXRjaE91dHB1dCA9IF9yYXRlRGlzcGF0Y2hPdXRwdXQ7XHJcbiAgICAgIHRoaXMudGltZS5kZWxldGVUaW1lcih0aGlzLmlkVGltZXIpO1xyXG4gICAgICB0aGlzLmlkVGltZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgIGlmICh0aGlzLnJhdGVEaXNwYXRjaE91dHB1dClcclxuICAgICAgICB0aGlzLmlkVGltZXIgPSB0aGlzLnRpbWUuc2V0VGltZXIoMTAwMCAvIHRoaXMucmF0ZURpc3BhdGNoT3V0cHV0LCAwLCB0aGlzLmRpc3BhdGNoT3V0cHV0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgZmFjdG9yIHRvIG11bHRpcGx5IHRoZSBpbnB1dCB2YWx1ZSBnaXZlbiB3aXRoIHtAbGluayBzZXRJbnB1dH0gd2l0aFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0RmFjdG9yKF9mYWN0b3I6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLmZhY3RvciA9IF9mYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gdGhlIG91dHB1dCBvZiB0aGlzIGNvbnRyb2xcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE91dHB1dCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVPdXRwdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgdGhlIG91dHB1dCBvZiB0aGlzIGNvbnRyb2xcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGNhbGN1bGF0ZU91dHB1dCgpOiBudW1iZXIge1xyXG4gICAgICBsZXQgb3V0cHV0OiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdmFsdWU6IG51bWJlciA9IHRoaXMuZ2V0VmFsdWVEZWxheWVkKCk7XHJcblxyXG4gICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICAgIGNhc2UgQ09OVFJPTF9UWVBFLklOVEVHUkFMOlxyXG4gICAgICAgICAgbGV0IHRpbWVDdXJyZW50OiBudW1iZXIgPSB0aGlzLnRpbWUuZ2V0KCk7XHJcbiAgICAgICAgICBsZXQgdGltZUVsYXBzZWRTaW5jZUlucHV0OiBudW1iZXIgPSB0aW1lQ3VycmVudCAtIHRoaXMudGltZU91dHB1dFRhcmdldFNldDtcclxuICAgICAgICAgIG91dHB1dCA9IHRoaXMub3V0cHV0QmFzZTtcclxuXHJcbiAgICAgICAgICBpZiAodGhpcy50aW1lVmFsdWVEZWxheSA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHRpbWVFbGFwc2VkU2luY2VJbnB1dCA8IHRoaXMudGltZVZhbHVlRGVsYXkpIHtcclxuICAgICAgICAgICAgICBvdXRwdXQgKz0gMC41ICogKHRoaXMudmFsdWVQcmV2aW91cyArIHZhbHVlKSAqIHRpbWVFbGFwc2VkU2luY2VJbnB1dDtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBvdXRwdXQgKz0gMC41ICogKHRoaXMudmFsdWVQcmV2aW91cyArIHZhbHVlKSAqIHRoaXMudGltZVZhbHVlRGVsYXk7XHJcbiAgICAgICAgICAgICAgdGltZUVsYXBzZWRTaW5jZUlucHV0IC09IHRoaXMudGltZVZhbHVlRGVsYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG91dHB1dCArPSB2YWx1ZSAqIHRpbWVFbGFwc2VkU2luY2VJbnB1dDtcclxuICAgICAgICAgIC8vIHZhbHVlICs9IDAuNSAqICh0aGlzLmlucHV0UHJldmlvdXMgLSBpbnB1dCkgKiB0aGlzLnRpbWVJbnB1dERlbGF5ICsgaW5wdXQgKiB0aW1lRWxhcHNlZFNpbmNlSW5wdXQ7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENPTlRST0xfVFlQRS5ESUZGRVJFTlRJQUw6XHJcbiAgICAgICAgY2FzZSBDT05UUk9MX1RZUEUuUFJPUE9SVElPTkFMOlxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBvdXRwdXQgPSB2YWx1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGNhbGN1bGF0ZXMgdGhlIG91dHB1dCBjb25zaWRlcmluZyB0aGUgdGltZSBvZiB0aGUgZGVsYXlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRWYWx1ZURlbGF5ZWQoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMudGltZVZhbHVlRGVsYXkgPiAwKSB7XHJcbiAgICAgICAgbGV0IHRpbWVFbGFwc2VkU2luY2VJbnB1dDogbnVtYmVyID0gdGhpcy50aW1lLmdldCgpIC0gdGhpcy50aW1lT3V0cHV0VGFyZ2V0U2V0O1xyXG4gICAgICAgIGlmICh0aW1lRWxhcHNlZFNpbmNlSW5wdXQgPCB0aGlzLnRpbWVWYWx1ZURlbGF5KVxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVQcmV2aW91cyArICh0aGlzLm91dHB1dFRhcmdldCAtIHRoaXMudmFsdWVQcmV2aW91cykgKiB0aW1lRWxhcHNlZFNpbmNlSW5wdXQgLyB0aGlzLnRpbWVWYWx1ZURlbGF5O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLm91dHB1dFRhcmdldDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRpc3BhdGNoT3V0cHV0ID0gKF9ldmVudE9yVmFsdWU6IEV2ZW50VGltZXIgfCBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBsZXQgdGltZXI6IFRpbWVyID0gdGhpcy50aW1lLmdldFRpbWVyKHRoaXMuaWRUaW1lcik7XHJcbiAgICAgIGxldCBvdXRwdXQ6IG51bWJlcjtcclxuICAgICAgaWYgKHR5cGVvZiAoX2V2ZW50T3JWYWx1ZSkgPT0gXCJudW1iZXJcIilcclxuICAgICAgICBvdXRwdXQgPSBfZXZlbnRPclZhbHVlO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgb3V0cHV0ID0gdGhpcy5jYWxjdWxhdGVPdXRwdXQoKTtcclxuICAgICAgbGV0IG91dHB1dENoYW5nZWQ6IGJvb2xlYW4gPSAob3V0cHV0ICE9IHRoaXMub3V0cHV0UHJldmlvdXMpO1xyXG5cclxuICAgICAgaWYgKHRpbWVyKSB7XHJcbiAgICAgICAgdGltZXIuYWN0aXZlID0gb3V0cHV0Q2hhbmdlZDtcclxuICAgICAgICBpZiAoIW91dHB1dENoYW5nZWQpXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMub3V0cHV0UHJldmlvdXMgPSBvdXRwdXQ7XHJcblxyXG4gICAgICBsZXQgZXZlbnQ6IEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KEVWRU5UX0NPTlRST0wuT1VUUFVULCB7XHJcbiAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICBvdXRwdXQ6IG91dHB1dFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJDb250cm9sLnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBIYW5kbGVzIG11bHRpcGxlIGNvbnRyb2xzIGFzIGlucHV0cyBhbmQgY3JlYXRlcyBhbiBvdXRwdXQgZnJvbSB0aGF0LlxyXG4gICAqIEFzIGEgc3ViY2xhc3Mgb2Yge0BsaW5rIENvbnRyb2x9LCBheGlzIGNhbGN1bGF0ZXMgdGhlIG91cHV0IHN1bW1pbmcgdXAgdGhlIGlucHV0cyBhbmQgcHJvY2Vzc2luZyB0aGUgcmVzdWx0IHVzaW5nIGl0cyBvd24gc2V0dGluZ3MuICBcclxuICAgKiBEaXNwYXRjaGVzIHtAbGluayBFVkVOVF9DT05UUk9MLk9VVFBVVH0gYW5kIHtAbGluayBFVkVOVF9DT05UUk9MLklOUFVUfSB3aGVuIG9uZSBvZiB0aGUgY29udHJvbHMgZGlzcGF0Y2hlcyB0aGVtLlxyXG4gICAqIGBgYHRleHRcclxuICAgKiAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICogICAgICAgICAgIOKUgiDilIzilIDilIDilIDilIDilIDilIDilIDilJAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgIElucHV0IOKGkiDilIIg4pSCY29udHJvbOKUglxcICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgICAgICAgICAg4pSCIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCBcXCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgICAgICAgICAg4pSCIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgXFzilIzilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICDilIJcclxuICAgKiAgIElucHV0IOKGkiDilIIg4pSCY29udHJvbOKUgi0tLeKUgnN1beKUgiDihpIg4pSCaW50ZXJuYWwgY29udHJvbCDilIIg4oaSIOKUgiDihpIgT3V0cHV0XHJcbiAgICogICAgICAgICAgIOKUgiDilJTilIDilIDilIDilIDilIDilIDilIDilJggIC/ilJTilIDilIDilIDilJggICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICDilIJcclxuICAgKiAgICAgICAgICAg4pSCIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxyXG4gICAqICAgSW5wdXQg4oaSIOKUgiDilIJjb250cm9s4pSCLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCXHJcbiAgICogICAgICAgICAgIOKUgiDilJTilIDilIDilIDilIDilIDilIDilIDilJggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQXhpcyBleHRlbmRzIENvbnRyb2wge1xyXG4gICAgcHJpdmF0ZSBjb250cm9sczogTWFwPHN0cmluZywgQ29udHJvbD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHN1bVByZXZpb3VzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIHRoZSBjb250cm9sIGdpdmVuIHRvIHRoZSBsaXN0IG9mIGNvbnRyb2xzIGZlZWRpbmcgaW50byB0aGlzIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbnRyb2woX2NvbnRyb2w6IENvbnRyb2wpOiB2b2lkIHtcclxuICAgICAgdGhpcy5jb250cm9scy5zZXQoX2NvbnRyb2wubmFtZSwgX2NvbnRyb2wpO1xyXG4gICAgICBfY29udHJvbC5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0NPTlRST0wuSU5QVVQsIHRoaXMuaG5kSW5wdXRFdmVudCk7XHJcbiAgICAgIF9jb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHRoaXMuaG5kT3V0cHV0RXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY29udHJvbCB3aXRoIHRoZSBnaXZlbiBuYW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDb250cm9sKF9uYW1lOiBzdHJpbmcpOiBDb250cm9sIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29udHJvbHMuZ2V0KF9uYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIGNvbnRyb2wgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ29udHJvbChfbmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIGxldCBjb250cm9sOiBDb250cm9sID0gdGhpcy5nZXRDb250cm9sKF9uYW1lKTtcclxuICAgICAgaWYgKGNvbnRyb2wpIHtcclxuICAgICAgICBjb250cm9sLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OVFJPTC5JTlBVVCwgdGhpcy5obmRJbnB1dEV2ZW50KTtcclxuICAgICAgICBjb250cm9sLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHRoaXMuaG5kT3V0cHV0RXZlbnQpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMuZGVsZXRlKF9uYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhpcyBheGlzIGFmdGVyIHN1bW1pbmcgdXAgYWxsIGlucHV0cyBhbmQgcHJvY2Vzc2luZyB0aGUgc3VtIGFjY29yZGluZyB0byB0aGUgYXhpcycgc2V0dGluZ3NcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE91dHB1dCgpOiBudW1iZXIge1xyXG4gICAgICBsZXQgc3VtSW5wdXQ6IG51bWJlciA9IDA7XHJcbiAgICAgIGZvciAobGV0IGNvbnRyb2wgb2YgdGhpcy5jb250cm9scykge1xyXG5cclxuICAgICAgICBpZiAoY29udHJvbFsxXS5hY3RpdmUpXHJcbiAgICAgICAgICBzdW1JbnB1dCArPSBjb250cm9sWzFdLmdldE91dHB1dCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc3VtSW5wdXQgIT0gdGhpcy5zdW1QcmV2aW91cylcclxuICAgICAgICBzdXBlci5zZXRJbnB1dChzdW1JbnB1dCk7XHJcblxyXG4gICAgICB0aGlzLnN1bVByZXZpb3VzID0gc3VtSW5wdXQ7XHJcblxyXG4gICAgICByZXR1cm4gc3VwZXIuZ2V0T3V0cHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBobmRPdXRwdXRFdmVudDogRXZlbnRMaXN0ZW5lciA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5hY3RpdmUpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgbGV0IGNvbnRyb2w6IENvbnRyb2wgPSAoPENvbnRyb2w+X2V2ZW50LnRhcmdldCk7XHJcbiAgICAgIGxldCBldmVudDogQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHtcclxuICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgIGNvbnRyb2w6IGNvbnRyb2wsXHJcbiAgICAgICAgICBpbnB1dDogKDxDdXN0b21FdmVudD5fZXZlbnQpLmRldGFpbC5vdXRwdXQsXHJcbiAgICAgICAgICBvdXRwdXQ6IHRoaXMuZ2V0T3V0cHV0KClcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIGhuZElucHV0RXZlbnQ6IEV2ZW50TGlzdGVuZXIgPSAoX2V2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuYWN0aXZlKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGxldCBldmVudDogRXZlbnQgPSBuZXcgRXZlbnQoRVZFTlRfQ09OVFJPTC5JTlBVVCwgX2V2ZW50KTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH07XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgaW50ZXJmYWNlIEtleVByZXNzZWQge1xyXG4gICAgW2NvZGU6IHN0cmluZ106IGJvb2xlYW47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb2xsZWN0cyB0aGUga2V5cyBwcmVzc2VkIG9uIHRoZSBrZXlib2FyZCBhbmQgc3RvcmVzIHRoZWlyIHN0YXR1cy4gXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEtleWJvYXJkIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGtleXNQcmVzc2VkOiBLZXlQcmVzc2VkID0gS2V5Ym9hcmQuaW5pdGlhbGl6ZSgpO1xyXG4gICAgLy8gcHJpdmF0ZSBzdGF0aWMgY29kZV9lbjogT2JqZWN0O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIG9uZSBvZiB0aGUgZ2l2ZW4ga2V5cyBpcyBpcyBjdXJyZW50bHkgYmVpbmcgcHJlc3NlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc1ByZXNzZWRPbmUoX2tleXM6IEtFWUJPQVJEX0NPREVbXSk6IGJvb2xlYW4ge1xyXG4gICAgICBmb3IgKGxldCBjb2RlIG9mIF9rZXlzKSB7XHJcbiAgICAgICAgaWYgKEtleWJvYXJkLmtleXNQcmVzc2VkW2NvZGVdKVxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFsbCBvZiB0aGUgZ2l2ZW4ga2V5cyBhcmUgY3VycmVudGx5IGJlaW5nIHByZXNzZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc1ByZXNzZWRDb21ibyhfa2V5czogS0VZQk9BUkRfQ09ERVtdKTogYm9vbGVhbiB7XHJcbiAgICAgIGZvciAobGV0IGNvZGUgb2YgX2tleXMpIHtcclxuICAgICAgICBpZiAoIUtleWJvYXJkLmtleXNQcmVzc2VkW2NvZGVdKVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgZ2l2ZW4gYXMgX2FjdGl2ZSBpZiBvbmUgb3IsIHdoZW4gX2NvbWJvIGlzIHRydWUsIGFsbCBvZiB0aGUgZ2l2ZW4ga2V5cyBhcmUgcHJlc3NlZC5cclxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGdpdmVuIGFzIF9pbmFjdGl2ZSBpZiBub3QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgbWFwVG9WYWx1ZTxUPihfYWN0aXZlOiBULCBfaW5hY3RpdmU6IFQsIF9rZXlzOiBLRVlCT0FSRF9DT0RFW10sIF9jb21ibzogYm9vbGVhbiA9IGZhbHNlKTogVCB7XHJcbiAgICAgIGlmICghX2NvbWJvICYmIEtleWJvYXJkLmlzUHJlc3NlZE9uZShfa2V5cykpXHJcbiAgICAgICAgcmV0dXJuIF9hY3RpdmU7XHJcbiAgICAgIGlmIChLZXlib2FyZC5pc1ByZXNzZWRDb21ibyhfa2V5cykpXHJcbiAgICAgICAgcmV0dXJuIF9hY3RpdmU7XHJcbiAgICAgIHJldHVybiBfaW5hY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYmFsYW5jZWQgdGVybmFyeSB2YWx1ZSAoZWl0aGVyIC0xLCAwIG9yIDEpIFxyXG4gICAgICogYWNjb3JkaW5nIHRvIHRoZSBtYXRjaCBvZiB0aGUga2V5cyBjdXJyZW50bHkgYmVpbmcgcHJlc3NlZCBhbmQgdGhlIGxpc3RzIG9mIGtleXMgZ2l2ZW4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgbWFwVG9Ucml0KF9wb3NpdGl2ZTogS0VZQk9BUkRfQ09ERVtdLCBfbmVnYXRpdmU6IEtFWUJPQVJEX0NPREVbXSk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBLZXlib2FyZC5tYXBUb1ZhbHVlKC0xLCAwLCBfbmVnYXRpdmUpICsgS2V5Ym9hcmQubWFwVG9WYWx1ZSgxLCAwLCBfcG9zaXRpdmUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHB1YmxpYyBzdGF0aWMgbG9jYWxlKF9rZXlib2FyZDogT2JqZWN0KTogdm9pZCB7XHJcbiAgICAvLyAgIGlmICghS2V5Ym9hcmQuY29kZV9lbikge1xyXG4gICAgLy8gICAgIC8vIHNhdmUgb3JpZ2luYWwga2V5Ym9hcmQgY29kZXMgdG8gYmUgYWJsZSB0byBzd2l0Y2ggYmFjayBsYXRlclxyXG4gICAgLy8gICAgIEtleWJvYXJkLmNvZGVfZW4gPSB7fTtcclxuICAgIC8vICAgICBPYmplY3QuYXNzaWduKEtleWJvYXJkLmNvZGVfZW4sIEtFWUJPQVJEX0NPREUpO1xyXG4gICAgLy8gICB9XHJcblxyXG4gICAgLy8gICBmb3IgKGxldCBrZXkgaW4gX2tleWJvYXJkKSB7XHJcbiAgICAvLyAgICAgbGV0IHZhbHVlOiBzdHJpbmcgPSBSZWZsZWN0LmdldChfa2V5Ym9hcmQsIGtleSk7XHJcbiAgICAvLyAgICAgZm9yIChsZXQgb3JpZ2luYWwgaW4gS0VZQk9BUkRfQ09ERSlcclxuICAgIC8vICAgICAgIGlmIChSZWZsZWN0LmdldChLRVlCT0FSRF9DT0RFLCBvcmlnaW5hbCkgPT0gdmFsdWUpXHJcbiAgICAvLyAgICAgICAgIC8vIHJlbW92ZSBvcmlnaW5hbCBrZXkgdGhlIHlpZWxkcyB0aGUgdmFsdWVcclxuICAgIC8vICAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShLRVlCT0FSRF9DT0RFLCBvcmlnaW5hbCk7XHJcbiAgICAvLyAgICAgLy8gYWRkIG5ldyBrZXkgdG8geWllbGQgdGhhdCB2YWx1ZVxyXG4gICAgLy8gICAgIFJlZmxlY3Quc2V0KEtFWUJPQVJEX0NPREUsIGtleSwgdmFsdWUpO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5pdGlhbGl6ZSgpOiBLZXlQcmVzc2VkIHtcclxuICAgICAgbGV0IHN0b3JlOiBLZXlQcmVzc2VkID0ge307XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIEtleWJvYXJkLmhuZEtleUludGVyYWN0aW9uKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIEtleWJvYXJkLmhuZEtleUludGVyYWN0aW9uKTtcclxuICAgICAgcmV0dXJuIHN0b3JlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGhuZEtleUludGVyYWN0aW9uKF9ldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICBLZXlib2FyZC5rZXlzUHJlc3NlZFtfZXZlbnQuY29kZV0gPSAoX2V2ZW50LnR5cGUgPT0gXCJrZXlkb3duXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdUYXJnZXQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFJvdXRpbmcgdG8gdGhlIGFsZXJ0IGJveFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBEZWJ1Z0FsZXJ0IGV4dGVuZHMgRGVidWdUYXJnZXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWxlZ2F0ZXM6IE1hcERlYnVnRmlsdGVyVG9EZWxlZ2F0ZSA9IHtcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5JTkZPXTogRGVidWdBbGVydC5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLklORk9dKSxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5MT0ddOiBEZWJ1Z0FsZXJ0LmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuTE9HXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuV0FSTl06IERlYnVnQWxlcnQuY3JlYXRlRGVsZWdhdGUoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5XQVJOXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuRVJST1JdOiBEZWJ1Z0FsZXJ0LmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuRVJST1JdKSxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5GVURHRV06IERlYnVnQWxlcnQuY3JlYXRlRGVsZWdhdGUoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5GVURHRV0pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLlNPVVJDRV06IERlYnVnQWxlcnQuY3JlYXRlRGVsZWdhdGUoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5TT1VSQ0VdKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBSZXR1cm5zIGEgZGVsZWdhdGUtZnVuY3Rpb24gZXhwZWN0aW5nIGEgbWVzc2FnZSB0byBsb2cuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRGVsZWdhdGUoX2hlYWRsaW5lOiBzdHJpbmcpOiBGdW5jdGlvbiB7XHJcbiAgICAgIGxldCBkZWxlZ2F0ZTogRnVuY3Rpb24gPSBmdW5jdGlvbiAoX21lc3NhZ2U6IE9iamVjdCwgLi4uX2FyZ3M6IE9iamVjdFtdKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGFyZ3M6IHN0cmluZ1tdID0gX2FyZ3MubWFwKF9hcmcgPT4gX2FyZy50b1N0cmluZygpKTtcclxuICAgICAgICBsZXQgb3V0OiBzdHJpbmcgPSBfaGVhZGxpbmUgKyBcIiBcIiArIERlYnVnVGFyZ2V0Lm1lcmdlQXJndW1lbnRzKF9tZXNzYWdlLCBhcmdzKTtcclxuICAgICAgICBhbGVydChvdXQpO1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCJEZWJ1Z1RhcmdldC50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogUm91dGluZyB0byBhIEhUTUxEaWFsb2dFbGVtZW50XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIERlYnVnRGlhbG9nIGV4dGVuZHMgRGVidWdUYXJnZXQge1xyXG4gICAgLy8gVE9ETzogY2hlY2tvdXQgSFRNTERpYWxvZ0VsZW1lbnQ7ICEhIVxyXG4gIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdUYXJnZXQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFJvdXRlIHRvIGFuIEhUTUxUZXh0QXJlYSwgbWF5IGJlIG9ic29sZXRlIHdoZW4gdXNpbmcgSFRNTERpYWxvZ0VsZW1lbnRcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRGVidWdUZXh0QXJlYSBleHRlbmRzIERlYnVnVGFyZ2V0IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgdGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgICBwdWJsaWMgc3RhdGljIGF1dG9TY3JvbGw6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVsZWdhdGVzOiBNYXBEZWJ1Z0ZpbHRlclRvRGVsZWdhdGUgPSB7XHJcbiAgICAgIFtERUJVR19GSUxURVIuSU5GT106IERlYnVnVGV4dEFyZWEuY3JlYXRlRGVsZWdhdGUoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5JTkZPXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuTE9HXTogRGVidWdUZXh0QXJlYS5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLkxPR10pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLldBUk5dOiBEZWJ1Z1RleHRBcmVhLmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuV0FSTl0pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkVSUk9SXTogRGVidWdUZXh0QXJlYS5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLkVSUk9SXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuRlVER0VdOiBEZWJ1Z1RleHRBcmVhLmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuRlVER0VdKSxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5DTEVBUl06IERlYnVnVGV4dEFyZWEuY2xlYXIsXHJcbiAgICAgIFtERUJVR19GSUxURVIuR1JPVVBdOiBEZWJ1Z1RleHRBcmVhLmdyb3VwLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkdST1VQQ09MTEFQU0VEXTogRGVidWdUZXh0QXJlYS5ncm91cCxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5HUk9VUEVORF06IERlYnVnVGV4dEFyZWEuZ3JvdXBFbmQsXHJcbiAgICAgIFtERUJVR19GSUxURVIuU09VUkNFXTogRGVidWdUZXh0QXJlYS5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLlNPVVJDRV0pXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ3JvdXBzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSB0ZXh0IGFyZWEgYW5kIHRoZSBncm91cHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgRGVidWdUZXh0QXJlYS50ZXh0QXJlYS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgIERlYnVnVGV4dEFyZWEuZ3JvdXBzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCZWdpbnMgYSBuZXcgZ3JvdXAgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdyb3VwKF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgRGVidWdUZXh0QXJlYS5wcmludChcIuKWvCBcIiArIF9uYW1lKTtcclxuICAgICAgRGVidWdUZXh0QXJlYS5ncm91cHMucHVzaChfbmFtZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEVuZHMgdGhlIGxhc3QgZ3JvdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBncm91cEVuZCgpOiB2b2lkIHtcclxuICAgICAgRGVidWdUZXh0QXJlYS5ncm91cHMucG9wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgZGVsZWdhdGUtZnVuY3Rpb24gZXhwZWN0aW5nIGEgbWVzc2FnZSB0byBsb2cuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRGVsZWdhdGUoX2hlYWRsaW5lOiBzdHJpbmcpOiBGdW5jdGlvbiB7XHJcbiAgICAgIGxldCBkZWxlZ2F0ZTogRnVuY3Rpb24gPSBmdW5jdGlvbiAoX21lc3NhZ2U6IE9iamVjdCwgLi4uX2FyZ3M6IE9iamVjdFtdKTogdm9pZCB7XHJcbiAgICAgICAgRGVidWdUZXh0QXJlYS5wcmludChfaGVhZGxpbmUgKyBcIiBcIiArIERlYnVnVGFyZ2V0Lm1lcmdlQXJndW1lbnRzKF9tZXNzYWdlLCBfYXJncykpO1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gZGVsZWdhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0SW5kZW50YXRpb24oX2xldmVsOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgX2xldmVsOyBpKyspXHJcbiAgICAgICAgcmVzdWx0ICs9IFwifCBcIjtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBwcmludChfdGV4dDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIERlYnVnVGV4dEFyZWEudGV4dEFyZWEudGV4dENvbnRlbnQgKz0gRGVidWdUZXh0QXJlYS5nZXRJbmRlbnRhdGlvbihEZWJ1Z1RleHRBcmVhLmdyb3Vwcy5sZW5ndGgpICsgX3RleHQgKyBcIlxcblwiO1xyXG4gICAgICBpZiAoRGVidWdUZXh0QXJlYS5hdXRvU2Nyb2xsKVxyXG4gICAgICAgIERlYnVnVGV4dEFyZWEudGV4dEFyZWEuc2Nyb2xsVG9wID0gRGVidWdUZXh0QXJlYS50ZXh0QXJlYS5zY3JvbGxIZWlnaHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGVzIHNlbnQgZnJvbSBhIHN0YW5kYXJkIGVuZ2xpc2gga2V5Ym9hcmQgbGF5b3V0XHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gS0VZQk9BUkRfQ09ERSB7XHJcbiAgICBBID0gXCJLZXlBXCIsXHJcbiAgICBCID0gXCJLZXlCXCIsXHJcbiAgICBDID0gXCJLZXlDXCIsXHJcbiAgICBEID0gXCJLZXlEXCIsXHJcbiAgICBFID0gXCJLZXlFXCIsXHJcbiAgICBGID0gXCJLZXlGXCIsXHJcbiAgICBHID0gXCJLZXlHXCIsXHJcbiAgICBIID0gXCJLZXlIXCIsXHJcbiAgICBJID0gXCJLZXlJXCIsXHJcbiAgICBKID0gXCJLZXlKXCIsXHJcbiAgICBLID0gXCJLZXlLXCIsXHJcbiAgICBMID0gXCJLZXlMXCIsXHJcbiAgICBNID0gXCJLZXlNXCIsXHJcbiAgICBOID0gXCJLZXlOXCIsXHJcbiAgICBPID0gXCJLZXlPXCIsXHJcbiAgICBQID0gXCJLZXlQXCIsXHJcbiAgICBRID0gXCJLZXlRXCIsXHJcbiAgICBSID0gXCJLZXlSXCIsXHJcbiAgICBTID0gXCJLZXlTXCIsXHJcbiAgICBUID0gXCJLZXlUXCIsXHJcbiAgICBVID0gXCJLZXlVXCIsXHJcbiAgICBWID0gXCJLZXlWXCIsXHJcbiAgICBXID0gXCJLZXlXXCIsXHJcbiAgICBYID0gXCJLZXlYXCIsXHJcbiAgICBZID0gXCJLZXlZXCIsXHJcbiAgICBaID0gXCJLZXlaXCIsXHJcbiAgICBFU0MgPSBcIkVzY2FwZVwiLFxyXG4gICAgWkVSTyA9IFwiRGlnaXQwXCIsXHJcbiAgICBPTkUgPSBcIkRpZ2l0MVwiLFxyXG4gICAgVFdPID0gXCJEaWdpdDJcIixcclxuICAgIFRIUkVFID0gXCJEaWdpdDNcIixcclxuICAgIEZPVVIgPSBcIkRpZ2l0NFwiLFxyXG4gICAgRklWRSA9IFwiRGlnaXQ1XCIsXHJcbiAgICBTSVggPSBcIkRpZ2l0NlwiLFxyXG4gICAgU0VWRU4gPSBcIkRpZ2l0N1wiLFxyXG4gICAgRUlHSFQgPSBcIkRpZ2l0OFwiLFxyXG4gICAgTklORSA9IFwiRGlnaXQ5XCIsXHJcbiAgICBNSU5VUyA9IFwiTWludXNcIixcclxuICAgIEVRVUFMID0gXCJFcXVhbFwiLFxyXG4gICAgQkFDS1NQQUNFID0gXCJCYWNrc3BhY2VcIixcclxuICAgIFRBQlVMQVRPUiA9IFwiVGFiXCIsXHJcbiAgICBCUkFDS0VUX0xFRlQgPSBcIkJyYWNrZXRMZWZ0XCIsXHJcbiAgICBCUkFDS0VUX1JJR0hUID0gXCJCcmFja2V0UmlnaHRcIixcclxuICAgIEVOVEVSID0gXCJFbnRlclwiLFxyXG4gICAgQ1RSTF9MRUZUID0gXCJDb250cm9sTGVmdFwiLFxyXG4gICAgU0VNSUNPTE9OID0gXCJTZW1pY29sb25cIixcclxuICAgIFFVT1RFID0gXCJRdW90ZVwiLFxyXG4gICAgQkFDS19RVU9URSA9IFwiQmFja3F1b3RlXCIsXHJcbiAgICBTSElGVF9MRUZUID0gXCJTaGlmdExlZnRcIixcclxuICAgIEJBQ0tTTEFTSCA9IFwiQmFja3NsYXNoXCIsXHJcbiAgICBDT01NQSA9IFwiQ29tbWFcIixcclxuICAgIFBFUklPRCA9IFwiUGVyaW9kXCIsXHJcbiAgICBTTEFTSCA9IFwiU2xhc2hcIixcclxuICAgIFNISUZUX1JJR0hUID0gXCJTaGlmdFJpZ2h0XCIsXHJcbiAgICBOVU1QQURfTVVMVElQTFkgPSBcIk51bXBhZE11bHRpcGx5XCIsXHJcbiAgICBBTFRfTEVGVCA9IFwiQWx0TGVmdFwiLFxyXG4gICAgU1BBQ0UgPSBcIlNwYWNlXCIsXHJcbiAgICBDQVBTX0xPQ0sgPSBcIkNhcHNMb2NrXCIsXHJcbiAgICBGMSA9IFwiRjFcIixcclxuICAgIEYyID0gXCJGMlwiLFxyXG4gICAgRjMgPSBcIkYzXCIsXHJcbiAgICBGNCA9IFwiRjRcIixcclxuICAgIEY1ID0gXCJGNVwiLFxyXG4gICAgRjYgPSBcIkY2XCIsXHJcbiAgICBGNyA9IFwiRjdcIixcclxuICAgIEY4ID0gXCJGOFwiLFxyXG4gICAgRjkgPSBcIkY5XCIsXHJcbiAgICBGMTAgPSBcIkYxMFwiLFxyXG4gICAgUEFVU0UgPSBcIlBhdXNlXCIsXHJcbiAgICBTQ1JPTExfTE9DSyA9IFwiU2Nyb2xsTG9ja1wiLFxyXG4gICAgTlVNUEFENyA9IFwiTnVtcGFkN1wiLFxyXG4gICAgTlVNUEFEOCA9IFwiTnVtcGFkOFwiLFxyXG4gICAgTlVNUEFEOSA9IFwiTnVtcGFkOVwiLFxyXG4gICAgTlVNUEFEX1NVQlRSQUNUID0gXCJOdW1wYWRTdWJ0cmFjdFwiLFxyXG4gICAgTlVNUEFENCA9IFwiTnVtcGFkNFwiLFxyXG4gICAgTlVNUEFENSA9IFwiTnVtcGFkNVwiLFxyXG4gICAgTlVNUEFENiA9IFwiTnVtcGFkNlwiLFxyXG4gICAgTlVNUEFEX0FERCA9IFwiTnVtcGFkQWRkXCIsXHJcbiAgICBOVU1QQUQxID0gXCJOdW1wYWQxXCIsXHJcbiAgICBOVU1QQUQyID0gXCJOdW1wYWQyXCIsXHJcbiAgICBOVU1QQUQzID0gXCJOdW1wYWQzXCIsXHJcbiAgICBOVU1QQUQwID0gXCJOdW1wYWQwXCIsXHJcbiAgICBOVU1QQURfREVDSU1BTCA9IFwiTnVtcGFkRGVjaW1hbFwiLFxyXG4gICAgUFJJTlRfU0NSRUVOID0gXCJQcmludFNjcmVlblwiLFxyXG4gICAgSU5UTF9CQUNLX1NMQVNIID0gXCJJbnRsQmFja1NsYXNoXCIsXHJcbiAgICBGMTEgPSBcIkYxMVwiLFxyXG4gICAgRjEyID0gXCJGMTJcIixcclxuICAgIE5VTVBBRF9FUVVBTCA9IFwiTnVtcGFkRXF1YWxcIixcclxuICAgIEYxMyA9IFwiRjEzXCIsXHJcbiAgICBGMTQgPSBcIkYxNFwiLFxyXG4gICAgRjE1ID0gXCJGMTVcIixcclxuICAgIEYxNiA9IFwiRjE2XCIsXHJcbiAgICBGMTcgPSBcIkYxN1wiLFxyXG4gICAgRjE4ID0gXCJGMThcIixcclxuICAgIEYxOSA9IFwiRjE5XCIsXHJcbiAgICBGMjAgPSBcIkYyMFwiLFxyXG4gICAgRjIxID0gXCJGMjFcIixcclxuICAgIEYyMiA9IFwiRjIyXCIsXHJcbiAgICBGMjMgPSBcIkYyM1wiLFxyXG4gICAgRjI0ID0gXCJGMjRcIixcclxuICAgIEtBTkFfTU9ERSA9IFwiS2FuYU1vZGVcIixcclxuICAgIExBTkcyID0gXCJMYW5nMlwiLFxyXG4gICAgTEFORzEgPSBcIkxhbmcxXCIsXHJcbiAgICBJTlRMX1JPID0gXCJJbnRsUm9cIixcclxuICAgIENPTlZFUlQgPSBcIkNvbnZlcnRcIixcclxuICAgIE5PTl9DT05WRVJUID0gXCJOb25Db252ZXJ0XCIsXHJcbiAgICBJTlRMX1lFTiA9IFwiSW50bFllblwiLFxyXG4gICAgTlVNUEFEX0NPTU1BID0gXCJOdW1wYWRDb21tYVwiLFxyXG4gICAgVU5ETyA9IFwiVW5kb1wiLFxyXG4gICAgUEFTVEUgPSBcIlBhc3RlXCIsXHJcbiAgICBNRURJQV9UUkFDS19QUkVWSU9VUyA9IFwiTWVkaWFUcmFja1ByZXZpb3VzXCIsXHJcbiAgICBDVVQgPSBcIkN1dFwiLFxyXG4gICAgQ09QWSA9IFwiQ29weVwiLFxyXG4gICAgTUVESUFfVFJBQ0tfTkVYVCA9IFwiTWVkaWFUcmFja05leHRcIixcclxuICAgIE5VTVBBRF9FTlRFUiA9IFwiTnVtcGFkRW50ZXJcIixcclxuICAgIENUUkxfUklHSFQgPSBcIkNvbnRyb2xSaWdodFwiLFxyXG4gICAgQVVESU9fVk9MVU1FX01VVEUgPSBcIkF1ZGlvVm9sdW1lTXV0ZVwiLFxyXG4gICAgTEFVTkNIX0FQUDIgPSBcIkxhdW5jaEFwcDJcIixcclxuICAgIE1FRElBX1BMQVlfUEFVU0UgPSBcIk1lZGlhUGxheVBhdXNlXCIsXHJcbiAgICBNRURJQV9TVE9QID0gXCJNZWRpYVN0b3BcIixcclxuICAgIEVKRUNUID0gXCJFamVjdFwiLFxyXG4gICAgQVVESU9fVk9MVU1FX0RPV04gPSBcIkF1ZGlvVm9sdW1lRG93blwiLFxyXG4gICAgVk9MVU1FX0RPV04gPSBcIlZvbHVtZURvd25cIixcclxuICAgIEFVRElPX1ZPTFVNRV9VUCA9IFwiQXVkaW9Wb2x1bWVVcFwiLFxyXG4gICAgVk9MVU1FX1VQID0gXCJWb2x1bWVVcFwiLFxyXG4gICAgQlJPV1NFUl9IT01FID0gXCJCcm93c2VySG9tZVwiLFxyXG4gICAgTlVNUEFEX0RJVklERSA9IFwiTnVtcGFkRGl2aWRlXCIsXHJcbiAgICBBTFRfUklHSFQgPSBcIkFsdFJpZ2h0XCIsXHJcbiAgICBIRUxQID0gXCJIZWxwXCIsXHJcbiAgICBOVU1fTE9DSyA9IFwiTnVtTG9ja1wiLFxyXG4gICAgSE9NRSA9IFwiSG9tZVwiLFxyXG4gICAgQVJST1dfVVAgPSBcIkFycm93VXBcIixcclxuICAgIEFSUk9XX1JJR0hUID0gXCJBcnJvd1JpZ2h0XCIsXHJcbiAgICBBUlJPV19ET1dOID0gXCJBcnJvd0Rvd25cIixcclxuICAgIEFSUk9XX0xFRlQgPSBcIkFycm93TGVmdFwiLFxyXG4gICAgRU5EID0gXCJFbmRcIixcclxuICAgIFBBR0VfVVAgPSBcIlBhZ2VVcFwiLFxyXG4gICAgUEFHRV9ET1dOID0gXCJQYWdlRG93blwiLFxyXG4gICAgSU5TRVJUID0gXCJJbnNlcnRcIixcclxuICAgIERFTEVURSA9IFwiRGVsZXRlXCIsXHJcbiAgICBNRVRBX0xFRlQgPSBcIk1ldGFfTGVmdFwiLFxyXG4gICAgT1NfTEVGVCA9IFwiT1NMZWZ0XCIsXHJcbiAgICBNRVRBX1JJR0hUID0gXCJNZXRhUmlnaHRcIixcclxuICAgIE9TX1JJR0hUID0gXCJPU1JpZ2h0XCIsXHJcbiAgICBDT05URVhUX01FTlUgPSBcIkNvbnRleHRNZW51XCIsXHJcbiAgICBQT1dFUiA9IFwiUG93ZXJcIixcclxuICAgIEJST1dTRVJfU0VBUkNIID0gXCJCcm93c2VyU2VhcmNoXCIsXHJcbiAgICBCUk9XU0VSX0ZBVk9SSVRFUyA9IFwiQnJvd3NlckZhdm9yaXRlc1wiLFxyXG4gICAgQlJPV1NFUl9SRUZSRVNIID0gXCJCcm93c2VyUmVmcmVzaFwiLFxyXG4gICAgQlJPV1NFUl9TVE9QID0gXCJCcm93c2VyU3RvcFwiLFxyXG4gICAgQlJPV1NFUl9GT1JXQVJEID0gXCJCcm93c2VyRm9yd2FyZFwiLFxyXG4gICAgQlJPV1NFUl9CQUNLID0gXCJCcm93c2VyQmFja1wiLFxyXG4gICAgTEFVTkNIX0FQUDEgPSBcIkxhdW5jaEFwcDFcIixcclxuICAgIExBVU5DSF9NQUlMID0gXCJMYXVuY2hNYWlsXCIsXHJcbiAgICBMQVVOQ0hfTUVESUFfUExBWUVSID0gXCJMYXVuY2hNZWRpYVBsYXllclwiLFxyXG5cclxuICAgIC8vbWFjIGJyaW5ncyB0aGlzIGJ1dHR0b25cclxuICAgIEZOID0gXCJGblwiLCAvL25vIGV2ZW50IGZpcmVkIGFjdHVhbGx5XHJcblxyXG4gICAgLy9MaW51eCBicmluZ3MgdGhlc2VcclxuICAgIEFHQUlOID0gXCJBZ2FpblwiLFxyXG4gICAgUFJPUFMgPSBcIlByb3BzXCIsXHJcbiAgICBTRUxFQ1QgPSBcIlNlbGVjdFwiLFxyXG4gICAgT1BFTiA9IFwiT3BlblwiLFxyXG4gICAgRklORCA9IFwiRmluZFwiLFxyXG4gICAgV0FLRV9VUCA9IFwiV2FrZVVwXCIsXHJcbiAgICBOVU1QQURfUEFSRU5UX0xFRlQgPSBcIk51bXBhZFBhcmVudExlZnRcIixcclxuICAgIE5VTVBBRF9QQVJFTlRfUklHSFQgPSBcIk51bXBhZFBhcmVudFJpZ2h0XCIsXHJcblxyXG4gICAgLy9hbmRyb2lkXHJcbiAgICBTTEVFUCA9IFwiU2xlZXBcIlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGVudW0gS0VZQk9BUkRfQ09ERV9ERSB7XHJcbiAgICBaID0gS0VZQk9BUkRfQ09ERS5ZLFxyXG4gICAgWSA9IEtFWUJPQVJEX0NPREUuWixcclxuICAgIMOWID0gS0VZQk9BUkRfQ09ERS5TRU1JQ09MT04sXHJcbiAgICDDhCA9IEtFWUJPQVJEX0NPREUuUVVPVEUsXHJcbiAgICDDnCA9IEtFWUJPQVJEX0NPREUuQlJBQ0tFVF9MRUZULFxyXG4gICAgSEFTSCA9IEtFWUJPQVJEX0NPREUuQkFDS1NMQVNILFxyXG4gICAgUExVUyA9IEtFWUJPQVJEX0NPREUuQlJBQ0tFVF9SSUdIVCxcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBcclxuICAgIMOfID0gS0VZQk9BUkRfQ09ERS5NSU5VUyxcclxuICAgIEFDVVRFID0gS0VZQk9BUkRfQ09ERS5FUVVBTCxcclxuICAgIExFU1NfVEhBTiA9IEtFWUJPQVJEX0NPREUuSU5UTF9CQUNLX1NMQVNILFxyXG4gICAgTUlOVVMgPSBLRVlCT0FSRF9DT0RFLlNMQVNIXHJcbiAgfVxyXG5cclxuICAvKiBcclxuICBGaXJlZm94IGNhbid0IG1ha2UgdXNlIG9mIHRob3NlIGJ1dHRvbnMgYW5kIENvbWJpbmF0aW9uczpcclxuICBTSU5HRUxFX0JVVFRPTlM6XHJcbiAgIERydWNrLFxyXG4gIENPTUJJTkFUSU9OUzpcclxuICAgU2hpZnQgKyBGMTAsIFNoaWZ0ICsgTnVtcGFkNSxcclxuICAgQ1RSTCArIHEsIENUUkwgKyBGNCxcclxuICAgQUxUICsgRjEsIEFMVCArIEYyLCBBTFQgKyBGMywgQUxUICsgRjcsIEFMVCArIEY4LCBBTFQgKyBGMTBcclxuICBPcGVyYSB3b24ndCBkbyBnb29kIHdpdGggdGhlc2UgQnV0dG9ucyBhbmQgY29tYmluYXRpb25zOlxyXG4gIFNJTkdMRV9CVVRUT05TOlxyXG4gICBGbG9hdDMyQXJyYXksIEYxMSwgQUxULFxyXG4gIENPTUJJTkFUSU9OUzpcclxuICAgQ1RSTCArIHEsIENUUkwgKyB0LCBDVFJMICsgaCwgQ1RSTCArIGcsIENUUkwgKyBuLCBDVFJMICsgZiBcclxuICAgQUxUICsgRjEsIEFMVCArIEYyLCBBTFQgKyBGNCwgQUxUICsgRjUsIEFMVCArIEY2LCBBTFQgKyBGNywgQUxUICsgRjgsIEFMVCArIEYxMFxyXG4gICAqL1xyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGNvbnN0IGVudW0gRVZFTlRfVElNRVIge1xyXG4gICAgQ0FMTCA9IFwixpJsYXBzZVwiXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFuIGV2ZW50IHRoYXQgcmVwcmVzZW50cyBhIGNhbGwgZnJvbSBhIHtAbGluayBUaW1lcn1cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRXZlbnRUaW1lciB7XHJcbiAgICBwdWJsaWMgdHlwZTogRVZFTlRfVElNRVIgPSBFVkVOVF9USU1FUi5DQUxMO1xyXG4gICAgcHVibGljIHRhcmdldDogVGltZXI7XHJcbiAgICBwdWJsaWMgYXJndW1lbnRzOiBPYmplY3RbXTtcclxuICAgIHB1YmxpYyBmaXJzdENhbGw6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHVibGljIGxhc3RDYWxsOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgY291bnQ6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3RpbWVyOiBUaW1lciwgLi4uX2FyZ3VtZW50czogT2JqZWN0W10pIHtcclxuICAgICAgdGhpcy50YXJnZXQgPSBfdGltZXI7XHJcbiAgICAgIHRoaXMuYXJndW1lbnRzID0gX2FyZ3VtZW50cztcclxuICAgICAgdGhpcy5maXJzdENhbGwgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEN1c3RvbSB0b3VjaCBldmVudHNcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBFVkVOVF9UT1VDSCB7XHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IGZpcmVkIGluIGFkZGl0aW9uIHRvIHRoZSBzdGFuZGFyZCB0b3VjaG1vdmUsIGRldGFpbHMgb2Zmc2V0IHRvIHN0YXJ0aW5nIHRvdWNoICovXHJcbiAgICBNT1ZFID0gXCJ0b3VjaE1vdmVcIixcclxuICAgIC8qKiBjdXN0b20gZXZlbnQgZmlyZWQgd2hlbiB0aGUgdG91Y2hlcyBoYXZlbid0IG1vdmVkIG91dHNpZGUgb2YgdGhlIHRhcCByYWRpdXMgKi9cclxuICAgIFRBUCA9IFwidG91Y2hUYXBcIixcclxuICAgIC8qKiBjdXN0b20gZXZlbnQgZmlyZWQgd2hlbiB0aGUgdG91Y2hlcyBoYXZlIG1vdmVkIG91dHNpZGUgb2YgdGhlIG5vdGNoIHJhZGl1cywgZGV0YWlscyBvZmZzZXQgYW5kIGNhcmRpbmFsIGRpcmVjdGlvbiAqL1xyXG4gICAgTk9UQ0ggPSBcInRvdWNoTm90Y2hcIixcclxuICAgIC8qKiBjdXN0b20gZXZlbnQgZmlyZWQgd2hlbiB0aGUgdG91Y2hlcyBoYXZlbid0IG1vdmVkIG91dHNpZGUgb2YgdGhlIHRhcCByYWRpdXMgZm9yIHNvbWUgdGltZSAqL1xyXG4gICAgTE9ORyA9IFwidG91Y2hMb25nXCIsXHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IGZpcmVkIHdoZW4gdHdvIHRhcHMgd2VyZSBkZXRlY3RlZCBpbiBzaG9ydCBzdWNjZXNzaW9uICovXHJcbiAgICBET1VCTEUgPSBcInRvdWNoRG91YmxlXCIsXHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IGZpcmVkIHdoZW4gdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIG9ubHkgdHdvIHRvdWNoZXMgY2hhbmdlcyBiZXlvbmQgYSB0b2xlcmFuY2UgKi9cclxuICAgIFBJTkNIID0gXCJ0b3VjaFBpbmNoXCIsXHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IG5vdCBpbXBsZW1lbnRlZCB5ZXQgKi9cclxuICAgIFJPVEFURSA9IFwidG91Y2hSb3RhdGVcIlxyXG4gIH1cclxuXHJcbiAgLyoqIERldGFpbHMgZm9yIEN1c3RvbVRvdWNoRXZlbnRzLCB1c2UgYXMgZ2VuZXJpYyBDdXN0b21FdmVudDxFdmVudFRvdWNoRGV0YWlsPiAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgRXZlbnRUb3VjaERldGFpbCB7XHJcbiAgICBwb3NpdGlvbjogVmVjdG9yMjtcclxuICAgIHRvdWNoZXM6IFRvdWNoTGlzdDtcclxuICAgIG9mZnNldD86IFZlY3RvcjI7XHJcbiAgICBtb3ZlbWVudD86IFZlY3RvcjI7XHJcbiAgICBjYXJkaW5hbD86IFZlY3RvcjI7XHJcbiAgICBwaW5jaD86IFZlY3RvcjI7XHJcbiAgICBwaW5jaERlbHRhPzogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzcGF0Y2hlcyBDdXN0b21Ub3VjaEV2ZW50cyB0byB0aGUgRXZlbnRUYXJnZXQgZ2l2ZW4gd2l0aCB0aGUgY29uc3RydWN0b3IuXHJcbiAgICogV2hlbiB1c2luZyB0b3VjaCBldmVudHMsIG1ha2Ugc3VyZSB0byBzZXQgYHRvdWNoLWFjdGlvbjogbm9uZWAgaW4gQ1NTIFxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgVG91Y2hFdmVudERpc3BhdGNoZXIge1xyXG4gICAgcHVibGljIHBvc1N0YXJ0OiBWZWN0b3IyID0gVmVjdG9yMi5aRVJPKCk7XHJcbiAgICBwdWJsaWMgcG9zTm90Y2g6IFZlY3RvcjIgPSBWZWN0b3IyLlpFUk8oKTtcclxuICAgIHB1YmxpYyByYWRpdXNUYXA6IG51bWJlcjtcclxuICAgIHB1YmxpYyByYWRpdXNOb3RjaDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YXJnZXQ6IEV2ZW50VGFyZ2V0O1xyXG4gICAgcHJpdmF0ZSBwb3NQcmV2OiBWZWN0b3IyID0gVmVjdG9yMi5aRVJPKCk7XHJcbiAgICBwcml2YXRlIG1vdmVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHRpbWVyRG91YmxlOiBUaW1lcjtcclxuICAgIHByaXZhdGUgdGltZXJMb25nOiBUaW1lcjtcclxuICAgIHByaXZhdGUgdGltZURvdWJsZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aW1lTG9uZzogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aW1lOiBUaW1lID0gbmV3IFRpbWUoKTtcclxuICAgIHByaXZhdGUgcGluY2hEaXN0YW5jZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcGluY2hUb2xlcmFuY2U6IG51bWJlciA9IDE7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF90YXJnZXQ6IEV2ZW50VGFyZ2V0LCBfcmFkaXVzVGFwOiBudW1iZXIgPSA1LCBfcmFkaXVzTm90Y2g6IG51bWJlciA9IDUwLCBfdGltZURvdWJsZTogbnVtYmVyID0gMjAwLCBfdGltZXJMb25nOiBudW1iZXIgPSAxMDAwKSB7XHJcbiAgICAgIHRoaXMudGFyZ2V0ID0gX3RhcmdldDtcclxuICAgICAgdGhpcy5yYWRpdXNUYXAgPSBfcmFkaXVzVGFwO1xyXG4gICAgICB0aGlzLnJhZGl1c05vdGNoID0gX3JhZGl1c05vdGNoO1xyXG4gICAgICB0aGlzLnRpbWVEb3VibGUgPSBfdGltZURvdWJsZTtcclxuICAgICAgdGhpcy50aW1lTG9uZyA9IF90aW1lckxvbmc7XHJcbiAgICAgIHRoaXMuYWN0aXZhdGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZS0vQWN0aXZhdGVzIHRoZSBkaXNwYXRjaCBvZiBDdXN0b21Ub3VjaEV2ZW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIGlmIChfb24pIHtcclxuICAgICAgICB0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCA8RXZlbnRMaXN0ZW5lcj50aGlzLmhuZEV2ZW50KTtcclxuICAgICAgICB0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgPEV2ZW50TGlzdGVuZXI+dGhpcy5obmRFdmVudCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCA8RXZlbnRMaXN0ZW5lcj50aGlzLmhuZEV2ZW50KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIDxFdmVudExpc3RlbmVyPnRoaXMuaG5kRXZlbnQpO1xyXG4gICAgICB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgPEV2ZW50TGlzdGVuZXI+dGhpcy5obmRFdmVudCk7XHJcbiAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgPEV2ZW50TGlzdGVuZXI+dGhpcy5obmRFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBobmRFdmVudCA9IChfZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgX2V2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGxldCB0b3VjaEZpcnN0OiBUb3VjaCA9IF9ldmVudC50b3VjaGVzWzBdO1xyXG4gICAgICBsZXQgcG9zaXRpb246IFZlY3RvcjIgPSB0aGlzLmNhbGNBdmVyYWdlUG9zaXRpb24oX2V2ZW50LnRvdWNoZXMpOyAvL25ldyBWZWN0b3IyKHRvdWNoRmlyc3Q/LmNsaWVudFgsIHRvdWNoRmlyc3Q/LmNsaWVudFkpO1xyXG4gICAgICBsZXQgb2Zmc2V0OiBWZWN0b3IyO1xyXG5cclxuICAgICAgc3dpdGNoIChfZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJ0b3VjaHN0YXJ0XCI6XHJcbiAgICAgICAgICB0aGlzLm1vdmVkID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLnN0YXJ0R2VzdHVyZShwb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgaWYgKF9ldmVudC50b3VjaGVzLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHBpbmNoXHJcbiAgICAgICAgICAgIGxldCBwaW5jaDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKF9ldmVudC50b3VjaGVzWzFdLmNsaWVudFggLSB0b3VjaEZpcnN0LmNsaWVudFgsIF9ldmVudC50b3VjaGVzWzFdLmNsaWVudFkgLSB0b3VjaEZpcnN0LmNsaWVudFkpO1xyXG4gICAgICAgICAgICB0aGlzLnBpbmNoRGlzdGFuY2UgPSBwaW5jaC5tYWduaXR1ZGU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGV0IGRpc3BhdGNoTG9uZzogVGltZXJIYW5kbGVyID0gKF9ldmVudFRpbWVyOiBFdmVudFRpbWVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudDxFdmVudFRvdWNoRGV0YWlsPihFVkVOVF9UT1VDSC5MT05HLCB7XHJcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLCBkZXRhaWw6IHsgcG9zaXRpb246IHBvc2l0aW9uLCB0b3VjaGVzOiBfZXZlbnQudG91Y2hlcyB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgdGhpcy50aW1lckxvbmc/LmNsZWFyKCk7XHJcbiAgICAgICAgICB0aGlzLnRpbWVyTG9uZyA9IG5ldyBUaW1lcih0aGlzLnRpbWUsIHRoaXMudGltZUxvbmcsIDEsIGRpc3BhdGNoTG9uZyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidG91Y2hlbmRcIjpcclxuICAgICAgICAgIHRoaXMudGltZXJMb25nPy5jbGVhcigpO1xyXG5cclxuICAgICAgICAgIGlmIChfZXZlbnQudG91Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIHN0aWxsIHRvdWNoZXMgYWN0aXZlXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRHZXN0dXJlKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGV0IGRpc3BhdGNoVGFwOiBUaW1lckhhbmRsZXIgPSAoX2V2ZW50VGltZXI6IEV2ZW50VGltZXIpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4oRVZFTlRfVE9VQ0guVEFQLCB7XHJcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLCBkZXRhaWw6IHsgcG9zaXRpb246IHBvc2l0aW9uLCB0b3VjaGVzOiBfZXZlbnQudG91Y2hlcyB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgd2FzIGEgdGFwIGJlZm9yZSBhbmQgdGltZXIgaXMgc3RpbGwgcnVubmluZyAtPiBkb3VibGUgdGFwXHJcbiAgICAgICAgICBpZiAodGhpcy50aW1lckRvdWJsZT8uYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJEb3VibGUuY2xlYXIoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy50aW1lciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4oRVZFTlRfVE9VQ0guRE9VQkxFLCB7XHJcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLCBkZXRhaWw6IHsgcG9zaXRpb246IHBvc2l0aW9uLCB0b3VjaGVzOiBfZXZlbnQudG91Y2hlcyB9XHJcbiAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5tb3ZlZClcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgd2FzIG1vdmVtZW50LCBvdGhlcndpc2Ugc2V0IHRpbWVyIHRvIGZpcmUgdGFwXHJcbiAgICAgICAgICAgIHRoaXMudGltZXJEb3VibGUgPSBuZXcgVGltZXIodGhpcy50aW1lLCB0aGlzLnRpbWVEb3VibGUsIDEsIGRpc3BhdGNoVGFwKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidG91Y2htb3ZlXCI6XHJcbiAgICAgICAgICB0aGlzLmRldGVjdFBpbmNoKF9ldmVudCwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgb2Zmc2V0ID0gVmVjdG9yMi5ESUZGRVJFTkNFKHRoaXMucG9zUHJldiwgdGhpcy5wb3NTdGFydCk7XHJcbiAgICAgICAgICB0aGlzLm1vdmVkIHx8PSAob2Zmc2V0Lm1hZ25pdHVkZSA8IHRoaXMucmFkaXVzVGFwKTsgLy8gcmVtZW1iZXIgdGhhdCB0b3VjaCBtb3ZlZCBvdmVyIHRhcCByYWRpdXNcclxuICAgICAgICAgIGxldCBtb3ZlbWVudDogVmVjdG9yMiA9IFZlY3RvcjIuRElGRkVSRU5DRShwb3NpdGlvbiwgdGhpcy5wb3NQcmV2KTtcclxuICAgICAgICAgIHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudDxFdmVudFRvdWNoRGV0YWlsPihFVkVOVF9UT1VDSC5NT1ZFLCB7XHJcbiAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IHBvc2l0aW9uOiBwb3NpdGlvbiwgdG91Y2hlczogX2V2ZW50LnRvdWNoZXMsIG9mZnNldDogb2Zmc2V0LCBtb3ZlbWVudDogbW92ZW1lbnQgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAvLyBmaXJlIG5vdGNoIHdoZW4gdG91Y2hlcyBtb3ZlZCBvdXQgb2Ygbm90Y2ggcmFkaXVzIGFuZCByZXNldCBub3RjaFxyXG4gICAgICAgICAgb2Zmc2V0ID0gVmVjdG9yMi5ESUZGRVJFTkNFKHBvc2l0aW9uLCB0aGlzLnBvc05vdGNoKTtcclxuICAgICAgICAgIGlmIChvZmZzZXQubWFnbml0dWRlID4gdGhpcy5yYWRpdXNOb3RjaCkge1xyXG4gICAgICAgICAgICBsZXQgY2FyZGluYWw6IFZlY3RvcjIgPSBNYXRoLmFicyhvZmZzZXQueCkgPiBNYXRoLmFicyhvZmZzZXQueSkgP1xyXG4gICAgICAgICAgICAgIFZlY3RvcjIuWChvZmZzZXQueCA8IDAgPyAtMSA6IDEpIDpcclxuICAgICAgICAgICAgICBWZWN0b3IyLlkob2Zmc2V0LnkgPCAwID8gLTEgOiAxKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4oRVZFTlRfVE9VQ0guTk9UQ0gsIHtcclxuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsIGRldGFpbDogeyBwb3NpdGlvbjogcG9zaXRpb24sIHRvdWNoZXM6IF9ldmVudC50b3VjaGVzLCBvZmZzZXQ6IG9mZnNldCwgY2FyZGluYWw6IGNhcmRpbmFsLCBtb3ZlbWVudDogbW92ZW1lbnQgfVxyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NOb3RjaCA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy9UT0RPOiBwaW5jaCwgcm90YXRlLi4uXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucG9zUHJldi5zZXQocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgZGV0ZWN0UGluY2ggPSAoX2V2ZW50OiBUb3VjaEV2ZW50LCBfcG9zaXRpb246IFZlY3RvcjIpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKF9ldmVudC50b3VjaGVzLmxlbmd0aCAhPSAyKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGxldCB0OiBUb3VjaExpc3QgPSBfZXZlbnQudG91Y2hlcztcclxuICAgICAgbGV0IHBpbmNoOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIodFsxXS5jbGllbnRYIC0gdFswXS5jbGllbnRYLCB0WzFdLmNsaWVudFkgLSB0WzBdLmNsaWVudFkpO1xyXG4gICAgICBsZXQgcGluY2hEaXN0YW5jZTogbnVtYmVyID0gcGluY2gubWFnbml0dWRlO1xyXG4gICAgICBsZXQgcGluY2hEZWx0YTogbnVtYmVyID0gcGluY2hEaXN0YW5jZSAtIHRoaXMucGluY2hEaXN0YW5jZTtcclxuICAgICAgaWYgKE1hdGguYWJzKHBpbmNoRGVsdGEpID4gdGhpcy5waW5jaFRvbGVyYW5jZSlcclxuICAgICAgICB0aGlzLnRhcmdldC5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICAgICAgbmV3IEN1c3RvbUV2ZW50PEV2ZW50VG91Y2hEZXRhaWw+KEVWRU5UX1RPVUNILlBJTkNILCB7XHJcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsIGRldGFpbDogeyBwb3NpdGlvbjogX3Bvc2l0aW9uLCB0b3VjaGVzOiBfZXZlbnQudG91Y2hlcywgcGluY2g6IHBpbmNoLCBwaW5jaERlbHRhOiBwaW5jaERlbHRhIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgdGhpcy5waW5jaERpc3RhbmNlID0gcGluY2hEaXN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydEdlc3R1cmUoX3Bvc2l0aW9uOiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucG9zTm90Y2guc2V0KF9wb3NpdGlvbi54LCBfcG9zaXRpb24ueSk7XHJcbiAgICAgIHRoaXMucG9zU3RhcnQuc2V0KF9wb3NpdGlvbi54LCBfcG9zaXRpb24ueSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWxjQXZlcmFnZVBvc2l0aW9uKF90b3VjaGVzOiBUb3VjaExpc3QpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IGF2ZXJhZ2U6IFZlY3RvcjIgPSBWZWN0b3IyLlpFUk8oKTtcclxuICAgICAgZm9yIChsZXQgdG91Y2ggb2YgX3RvdWNoZXMpIHtcclxuICAgICAgICBhdmVyYWdlLnggKz0gdG91Y2guY2xpZW50WDtcclxuICAgICAgICBhdmVyYWdlLnkgKz0gdG91Y2guY2xpZW50WTtcclxuICAgICAgfVxyXG4gICAgICBhdmVyYWdlLnNjYWxlKDEgLyBfdG91Y2hlcy5sZW5ndGgpO1xyXG4gICAgICByZXR1cm4gYXZlcmFnZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEEgbm9kZSBtYW5hZ2VkIGJ5IHtAbGluayBQcm9qZWN0fSB0aGF0IGZ1bmN0aW9ucyBhcyBhIHRlbXBsYXRlIGZvciB7QGxpbmsgR3JhcGhJbnN0YW5jZX1zIFxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vaHMtZnVydHdhbmdlbi9GVURHRS93aWtpL1Jlc291cmNlXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEdyYXBoIGV4dGVuZHMgTm9kZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZVJlc291cmNlIHtcclxuICAgIHB1YmxpYyBpZFJlc291cmNlOiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAvLyAjc3luY2luZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJHcmFwaFwiKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk1VVEFURSwgdGhpcy5obmRNdXRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSA9IHRoaXMuaWRSZXNvdXJjZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50eXBlID0gdGhpcy50eXBlO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcywgX3NlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSk7XHJcbiAgICAgIGF3YWl0IFByb2plY3QucmVzeW5jR3JhcGhJbnN0YW5jZXModGhpcyk7XHJcbiAgICAgIHRoaXMuYnJvYWRjYXN0RXZlbnQobmV3IEV2ZW50KEVWRU5ULkdSQVBIX0RFU0VSSUFMSVpFRCkpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkRlc2VyaWFsaXplZFwiLCB0aGlzLm5hbWUpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhuZE11dGF0ZSA9IGFzeW5jIChfZXZlbnQ6IEN1c3RvbUV2ZW50KTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcblxyXG4gICAgICAvLyBUT0RPOiBpZiBwYXRoIGNvbnRhaW5zIGEgZ3JhcGggaW5zdGFuY2UgYmVsb3cgdGhpcywgZG9uJ3QgZGlzcGF0Y2ghXHJcbiAgICAgIC8vIGxldCBwYXRoOiBOb2RlW10gPSBSZWZsZWN0LmdldChfZXZlbnQsIFwicGF0aFwiKTtcclxuICAgICAgLy8gZm9yIChsZXQgbm9kZSBvZiBwYXRoKVxyXG4gICAgICAvLyAgIGlmIChub2RlIGluc3RhbmNlb2YgR3JhcGhJbnN0YW5jZSAmJiBub2RlLmlkU291cmNlICE9IHRoaXMuaWRSZXNvdXJjZSlcclxuICAgICAgLy8gICAgIHJldHVybjtcclxuXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiR3JhcGggbXV0YXRlc1wiLCB0aGlzLm5hbWUpO1xyXG4gICAgICAvLyB0aGlzLiNzeW5jaW5nID0gdHJ1ZTtcclxuICAgICAgX2V2ZW50LmRldGFpbC5wYXRoID0gUmVmbGVjdC5nZXQoX2V2ZW50LCBcInBhdGhcIik7IC8vIHNhdmUgcGF0aCB0byB0YXJnZXQgaW4gZGV0YWlsXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuTVVUQVRFX0dSQVBILCB7IGRldGFpbDogX2V2ZW50LmRldGFpbCB9KSk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuR1JBUEhfTVVUQVRFRCwgeyBkZXRhaWw6IF9ldmVudC5kZXRhaWwgfSkpO1xyXG4gICAgICAvLyB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULk1VVEFURV9JTlNUQU5DRSkpO1xyXG4gICAgICAvLyB0aGlzLiNzeW5jaW5nID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBBIHtAbGluayBHcmFwaH0gbG9hZGVkIGZyb20gYSBnbFRGLUZpbGUuXHJcbiAgICogQGF1dGhvcnMgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDI0XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEdyYXBoR0xURiBleHRlbmRzIG1peGluU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbChHcmFwaCkge1xyXG4gICAgcHVibGljIGFzeW5jIGxvYWQoX3VybDogUmVxdWVzdEluZm8gPSB0aGlzLnVybCwgX25hbWU6IHN0cmluZyA9IHRoaXMubmFtZSk6IFByb21pc2U8R3JhcGhHTFRGPiB7XHJcbiAgICAgIHRoaXMudXJsID0gX3VybDtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHJldHVybiBHTFRGTG9hZGVyLmxvYWRSZXNvdXJjZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBjb25zdCBzZXJpYWxpemF0aW9uRXh0ZXJuYWw6IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgY29uc3Qgc2VyaWFsaXphdGlvbk5vZGU6IFNlcmlhbGl6YXRpb24gPSBOb2RlLnByb3RvdHlwZS5zZXJpYWxpemUuY2FsbCh0aGlzKTsgLy8gdGhpcyBpcyB3YXN0ZWZ1bCBhcyB3ZSBvbmx5IG5lZWQgdGhlIGNvbXBvbmVudHMgZGVzZXJpYWxpemVkXHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uTm9kZS5jb21wb25lbnRzW0NvbXBvbmVudFNrZWxldG9uLm5hbWVdO1xyXG4gICAgICBkZWxldGUgc2VyaWFsaXphdGlvbk5vZGUuY2hpbGRyZW47XHJcbiAgICAgIHJldHVybiB7IC4uLnNlcmlhbGl6YXRpb25Ob2RlLCAuLi5zZXJpYWxpemF0aW9uRXh0ZXJuYWwgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGF3YWl0IEdyYXBoLnByb3RvdHlwZS5kZXNlcmlhbGl6ZS5jYWxsKHRoaXMsIF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8vIGVudW0gU1lOQyB7XHJcbiAgLy8gICBSRUFEWSwgR1JBUEhfU1lOQ0VELCBHUkFQSF9ET05FLCBJTlNUQU5DRVxyXG4gIC8vIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQW4gaW5zdGFuY2Ugb2YgYSB7QGxpbmsgR3JhcGh9LiAgXHJcbiAgICogVGhpcyBub2RlIGtlZXBzIGEgcmVmZXJlbmNlIHRvIGl0cyByZXNvdXJjZSBhbiBjYW4gdGh1cyBvcHRpbWl6ZSBzZXJpYWxpemF0aW9uXHJcbiAgICogQGF1dGhvciBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9ocy1mdXJ0d2FuZ2VuL0ZVREdFL3dpa2kvUmVzb3VyY2VcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgR3JhcGhJbnN0YW5jZSBleHRlbmRzIE5vZGUge1xyXG4gICAgLyoqIGlkIG9mIHRoZSByZXNvdXJjZSB0aGF0IGluc3RhbmNlIHdhcyBjcmVhdGVkIGZyb20gKi9cclxuICAgIC8vIFRPRE86IGV4YW1pbmUsIGlmIHRoaXMgc2hvdWxkIGJlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byB0aGUgR3JhcGgsIGluc3RlYWQgb2YgdGhlIGlkXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvdW50OiBudW1iZXIgPSAwO1xyXG4gICAgI2lkU291cmNlOiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAvLyAjc3luYzogU1lOQyA9IFNZTkMuUkVBRFk7XHJcbiAgICAjZGVzZXJpYWxpemVGcm9tU291cmNlOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgY29uc3RydWN0b3IgYWxvbmUgd2lsbCBub3QgY3JlYXRlIGEgcmVjb25zdHJ1Y3Rpb24sIGJ1dCBvbmx5IHNhdmUgdGhlIGlkLlxyXG4gICAgICogVG8gY3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBncmFwaCwgY2FsbCByZXNldCBvbiB0aGlzIG9yIHNldCB3aXRoIGEgZ3JhcGggYXMgcGFyYW1ldGVyLlxyXG4gICAgICogUHJlZmVyIFByb2plY3QuY3JlYXRlR3JhcGhJbnN0YW5jZShfZ3JhcGgpLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2dyYXBoPzogR3JhcGgpIHtcclxuICAgICAgc3VwZXIoXCJHcmFwaEluc3RhbmNlXCIpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTVVUQVRFLCB0aGlzLmhuZE11dGF0aW9uSW5zdGFuY2UpO1xyXG5cclxuICAgICAgaWYgKCFfZ3JhcGgpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB0aGlzLiNpZFNvdXJjZSA9IF9ncmFwaC5pZFJlc291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaWRTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2lkU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjcmVhdGUgdGhpcyBub2RlIGZyb20gdGhlIHtAbGluayBHcmFwaH0gcmVmZXJlbmNlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVzZXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGxldCByZXNvdXJjZTogR3JhcGggPSA8R3JhcGg+YXdhaXQgUHJvamVjdC5nZXRSZXNvdXJjZSh0aGlzLiNpZFNvdXJjZSk7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0KHJlc291cmNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1RPRE86IG9wdGltaXplIHVzaW5nIHRoZSByZWZlcmVuY2VkIEdyYXBoLCBzZXJpYWxpemUvZGVzZXJpYWxpemUgb25seSB0aGUgZGlmZmVyZW5jZXNcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBmaWx0ZXI6IENvbXBvbmVudEdyYXBoRmlsdGVyID0gdGhpcy5nZXRDb21wb25lbnQoQ29tcG9uZW50R3JhcGhGaWx0ZXIpO1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHt9O1xyXG5cclxuICAgICAgaWYgKGZpbHRlciAmJiBmaWx0ZXIuaXNBY3RpdmUpIHsgLy8gaWYgZ3JhcGggc3luY2hyb25pc2F0aW9uIGlzIHVuZmlsdGVyZWQsIGtub3dpbmcgdGhlIHNvdXJjZSBpcyBzdWZmaWNpZW50IGZvciBzZXJpYWxpemF0aW9uXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgIGxldCBncmFwaDogR3JhcGggPSB0aGlzLmdldCgpO1xyXG4gICAgICAgIGlmIChncmFwaCBpbnN0YW5jZW9mIEdyYXBoR0xURikgeyAvLyBsaWtlIGZvciB0aGUgR3JhcGhHTFRGOiBjaGlsZHJlbiBhbmQgY29tcG9uZW50cyBsb2FkZWQgZnJvbSBnbHRmIG11c3QgbmV2ZXIgYmUgc2VyaWFsaXplZFxyXG4gICAgICAgICAgZGVsZXRlIHNlcmlhbGl6YXRpb24uY29tcG9uZW50c1tDb21wb25lbnRTa2VsZXRvbi5uYW1lXTtcclxuICAgICAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLmNoaWxkcmVuO1xyXG4gICAgICAgICAgc2VyaWFsaXphdGlvbi51cmwgPSBncmFwaC51cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlcmlhbGl6YXRpb24uZGVzZXJpYWxpemVGcm9tU291cmNlID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkU291cmNlID0gdGhpcy4jaWRTb3VyY2U7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuI2lkU291cmNlID0gX3NlcmlhbGl6YXRpb24uaWRTb3VyY2UgPz8gX3NlcmlhbGl6YXRpb24uaWRSZXNvdXJjZTtcclxuICAgICAgaWYgKCFfc2VyaWFsaXphdGlvbi5kZXNlcmlhbGl6ZUZyb21Tb3VyY2UpIHtcclxuICAgICAgICBsZXQgZ3JhcGg6IEdyYXBoID0gPEdyYXBoPjx1bmtub3duPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UodGhpcy4jaWRTb3VyY2UpO1xyXG4gICAgICAgIGlmIChncmFwaCBpbnN0YW5jZW9mIEdyYXBoR0xURilcclxuICAgICAgICAgIGF3YWl0IEdMVEZMb2FkZXIubG9hZFJlc291cmNlKHRoaXMsIF9zZXJpYWxpemF0aW9uLnVybCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTsgLy8gaW5zdGFuY2UgaXMgZGVzZXJpYWxpemVkIGZyb20gaW5kaXZpZHVhbCBkYXRhXHJcblxyXG4gICAgICAgIHRoaXMuI2Rlc2VyaWFsaXplRnJvbVNvdXJjZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgZ3JhcGg6IEdyYXBoID0gdGhpcy5nZXQoKTtcclxuICAgICAgaWYgKGdyYXBoKVxyXG4gICAgICAgIC8vIGlmIChfc2VyaWFsaXphdGlvbi5kZXNlcmlhbGl6ZUZyb21Tb3VyY2UpIC8vIG5vIGNvbXBvbmVudHMtPiBhc3N1bWUgc3luY2hyb25pemVkIEdyYXBoSW5zdGFuY2VcclxuICAgICAgICAvLyAgIGF3YWl0IHRoaXMuc2V0KGdyYXBoKTsgLy8gcmVjcmVhdGUgY29tcGxldGUgaW5zdGFuY2UgZnJvbSBzb3VyY2UgZ3JhcGhcclxuICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3RUb0dyYXBoKCk7IC8vIG90aGVyd2lzZSBqdXN0IGNvbm5lY3RcclxuICAgICAgLy8gfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdGVyIGZvciByZXN5bmNcIiwgX3NlcmlhbGl6YXRpb24ubmFtZSwgdGhpcy5uYW1lKTtcclxuICAgICAgICBQcm9qZWN0LnJlZ2lzdGVyR3JhcGhJbnN0YW5jZUZvclJlc3luYyh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3RzIHRoaXMgZ3JhcGggaW5zdGFuY2UgdG8gdGhlIGdyYXBoIHJlZmVyZW5jZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0VG9HcmFwaCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IGdyYXBoOiBHcmFwaCA9IHRoaXMuZ2V0KCk7XHJcbiAgICAgIGlmICh0aGlzLiNkZXNlcmlhbGl6ZUZyb21Tb3VyY2UpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXQoZ3JhcGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoaXMgbm9kZSB0byBiZSBhIHJlY3JlYXRpb24gb2YgdGhlIHtAbGluayBHcmFwaH0gZ2l2ZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHNldChfZ3JhcGg6IEdyYXBoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIHRoaXMuI2lkU291cmNlID0gX2dyYXBoLmlkUmVzb3VyY2U7XHJcblxyXG4gICAgICBsZXQgY3VycmVudEdyYXBoOiBHcmFwaCA9IHRoaXMuZ2V0KCk7XHJcbiAgICAgIGlmIChjdXJyZW50R3JhcGgpIHtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkJlZm9yZSBSZW1vdmVcIiwgY3VycmVudEdyYXBoLm5hbWUsIHRoaXMubmFtZSwgY3VycmVudEdyYXBoLmxpc3RlbmVycyk7XHJcbiAgICAgICAgY3VycmVudEdyYXBoLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuTVVUQVRFX0dSQVBILCB0aGlzLmhuZE11dGF0aW9uR3JhcGgpO1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQWZ0ZXIgUmVtb3ZlXCIsIGN1cnJlbnRHcmFwaC5uYW1lLCB0aGlzLm5hbWUsIGN1cnJlbnRHcmFwaC5saXN0ZW5lcnMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUT0RPOiBleGFtaW5lLCBpZiB0aGUgc2VyaWFsaXphdGlvbiBzaG91bGQgYmUgc3RvcmVkIGluIHRoZSBHcmFwaCBmb3Igb3B0aW1pemF0aW9uIDwtIGFsc28gdXNlZnVsIGZvciBzeW5jIHdpdGggaW5zdGFuY2VzXHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gU2VyaWFsaXplci5zZXJpYWxpemUoX2dyYXBoKTtcclxuICAgICAgLy9TZXJpYWxpemVyLmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb24pO1xyXG4gICAgICBmb3IgKGxldCBwYXRoIGluIHNlcmlhbGl6YXRpb24pIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb25bcGF0aF0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUgKyBHcmFwaEluc3RhbmNlLmNvdW50KyspO1xyXG5cclxuICAgICAgLy8gZ3JhcGguYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5NVVRBVEUsIChfZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB0aGlzLmhuZE11dGF0aW9uLCB0cnVlKTtcclxuICAgICAgX2dyYXBoLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTVVUQVRFX0dSQVBILCB0aGlzLmhuZE11dGF0aW9uR3JhcGgpO1xyXG4gICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgLy8gY29uc29sZS5sb2coXCJBZGRcIiwgX2dyYXBoLm5hbWUsIHRoaXMubmFtZSwgX2dyYXBoLmxpc3RlbmVycyk7XHJcbiAgICAgIC8vIGdyYXBoLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTVVUQVRFX0dSQVBIX0RPTkUsICgpID0+IHsgY29uc29sZS5sb2coXCJEb25lXCIsIHRoaXMubmFtZSk7IC8qIHRoaXMuI3N5bmMgPSB0cnVlOyAqLyB9KTtcclxuXHJcbiAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICBjb25zb2xlLmxvZyhfZ3JhcGg/Lmxpc3RlbmVycyk7XHJcbiAgICAgIHRoaXMuYnJvYWRjYXN0RXZlbnQobmV3IEV2ZW50KEVWRU5ULkdSQVBIX0lOU1RBTlRJQVRFRCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGdyYXBoIHRoaXMgaW5zdGFuY2VzIHJlZmVycyB0b1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IEdyYXBoIHtcclxuICAgICAgcmV0dXJuIDxHcmFwaD5Qcm9qZWN0LnJlc291cmNlc1t0aGlzLiNpZFNvdXJjZV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTb3VyY2UgZ3JhcGggbXV0YXRlZCwgcmVmbGVjdCBtdXRhdGlvbiBpbiB0aGlzIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaG5kTXV0YXRpb25HcmFwaCA9IGFzeW5jIChfZXZlbnQ6IEN1c3RvbUV2ZW50KTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiUmVmbGVjdCBHcmFwaC1NdXRhdGlvbiB0byBJbnN0YW5jZVwiLCBTWU5DW3RoaXMuI3N5bmNdLCAoPEdyYXBoPl9ldmVudC5jdXJyZW50VGFyZ2V0KS5uYW1lLCB0aGlzLmdldFBhdGgoKS5tYXAoX25vZGUgPT4gX25vZGUubmFtZSkpO1xyXG4gICAgICAvLyBpZiAodGhpcy4jc3luYyAhPSBTWU5DLlJFQURZKSB7XHJcbiAgICAgIC8vICAgLy8gY29uc29sZS5sb2coXCJTeW5jIGFib3J0ZWQsIHN3aXRjaCB0byByZWFkeVwiKTtcclxuICAgICAgLy8gICB0aGlzLiNzeW5jID0gU1lOQy5SRUFEWTtcclxuICAgICAgLy8gICByZXR1cm47XHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmlzRmlsdGVyZWQoKSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAvLyB0aGlzLiNzeW5jID0gU1lOQy5HUkFQSF9TWU5DRUQ7IC8vIGRvIG5vdCBzeW5jIGFnYWluLCBzaW5jZSBtdXRhdGlvbiBpcyBhbHJlYWR5IGEgc3luY2hyb25pemF0aW9uXHJcbiAgICAgIGF3YWl0IHRoaXMucmVmbGVjdE11dGF0aW9uKF9ldmVudCwgPEdyYXBoPl9ldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLCBfZXZlbnQuZGV0YWlsLnBhdGgpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULk1VVEFURV9JTlNUQU5DRSwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGluc3RhbmNlIG11dGF0ZWQsIHJlZmxlY3QgbXV0YXRpb24gaW4gc291cmNlIGdyYXBoXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaG5kTXV0YXRpb25JbnN0YW5jZSA9IGFzeW5jIChfZXZlbnQ6IEN1c3RvbUV2ZW50KTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiUmVmbGVjdCBJbnN0YW5jZS1NdXRhdGlvbiB0byBHcmFwaFwiLCBTWU5DW3RoaXMuI3N5bmNdLCB0aGlzLmdldFBhdGgoKS5tYXAoX25vZGUgPT4gX25vZGUubmFtZSksIHRoaXMuZ2V0KCkubmFtZSk7XHJcbiAgICAgIC8vIGlmICh0aGlzLiNzeW5jICE9IFNZTkMuUkVBRFkpIHtcclxuICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhcIlN5bmMgYWJvcnRlZCwgc3dpdGNoIHRvIHJlYWR5XCIpO1xyXG4gICAgICAvLyAgIHRoaXMuI3N5bmMgPSBTWU5DLlJFQURZO1xyXG4gICAgICAvLyAgIHJldHVybjtcclxuICAgICAgLy8gfVxyXG5cclxuICAgICAgLy8gaWYgKF9ldmVudC50YXJnZXQgaW5zdGFuY2VvZiBHcmFwaEluc3RhbmNlICYmIF9ldmVudC50YXJnZXQgIT0gdGhpcykge1xyXG4gICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKFwiU3luYyBhYm9ydGVkLCB0YXJnZXQgYWxyZWFkeSBzeW5jZWRcIik7XHJcbiAgICAgIC8vICAgcmV0dXJuO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICBpZiAodGhpcy5pc0ZpbHRlcmVkKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgLy8gdGhpcy4jc3luYyA9IFNZTkMuSU5TVEFOQ0U7IC8vIGRvIG5vdCBzeW5jIGFnYWluLCBzaW5jZSBtdXRhdGlvbiBpcyBhbHJlYWR5IGEgc3luY2hyb25pemF0aW9uXHJcbiAgICAgIGF3YWl0IHRoaXMucmVmbGVjdE11dGF0aW9uKF9ldmVudCwgdGhpcywgdGhpcy5nZXQoKSwgUmVmbGVjdC5nZXQoX2V2ZW50LCBcInBhdGhcIikpO1xyXG4gICAgICB0aGlzLmdldCgpLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5ULk1VVEFURSwgeyBkZXRhaWw6IF9ldmVudC5kZXRhaWwgfSkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZWZsZWN0IG11dGF0aW9uIGZyb20gYSBzb3VyY2UgZ3JhcGggb3IgaW5zdGFuY2UgdG8gYSBkZXN0aW5hdGlvbiBpbnN0YW5jZSBvciBncmFwaFxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWZsZWN0TXV0YXRpb24oX2V2ZW50OiBDdXN0b21FdmVudCwgX3NvdXJjZTogTm9kZSwgX2Rlc3RpbmF0aW9uOiBOb2RlLCBfcGF0aDogTm9kZVtdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiUmVmbGVjdCBtdXRhdGlvblwiLCBfc291cmNlLCBfZGVzdGluYXRpb24pO1xyXG5cclxuXHJcbiAgICAgIGZvciAobGV0IG5vZGUgb2YgX3BhdGgpIC8vIGl0ZXJhdGUgdXAgdGhlIGV2ZW50IHBhdGgsIHdoaWNoIG1heSBjb250YWluIHJlZ3VsYXIgTm9kZXMgb3IgR3JhcGhJbnN0YW5jZXNcclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEdyYXBoSW5zdGFuY2UpIC8vIHVudGlsIHRoaXMgR3JhcGhJbnN0YW5jZSBpcyBmb3VuZCAob3Igbm8gR3JhcGhJbnN0YW5jZS4uLilcclxuICAgICAgICAgIGlmIChub2RlID09IHRoaXMpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3luYyBhYm9ydGVkLCB0YXJnZXQgYWxyZWFkeSBzeW5jZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgIC8vIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgbm9kZSBpbiB0aGUgZGVzdGluYXRpb24gaGllcmFyY2h5XHJcbiAgICAgIGxldCBpbmRleDogbnVtYmVyID0gX3BhdGguaW5kZXhPZihfc291cmNlKTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIGxldCBjaGlsZEluZGV4OiBudW1iZXIgPSBfcGF0aFtpXS5nZXRQYXJlbnQoKS5maW5kQ2hpbGQoX3BhdGhbaV0pOyAvLyBnZXQgdGhlIGluZGV4IG9mIHRoZSBjaGlsZG5vZGUgaW4gdGhlIG9yaWdpbmFsIHBhdGhcclxuICAgICAgICBfZGVzdGluYXRpb24gPSBfZGVzdGluYXRpb24uZ2V0Q2hpbGQoY2hpbGRJbmRleCk7IC8vIGdldCB0aGUgY29ycmVzcG9uZGluZyBjaGlsZCBpbiB0aGlzIHBhdGhcclxuICAgICAgICAvLyBUT0RPOiByZXNwZWN0IGluZGV4IGZvciBub24tc2luZ2xldG9uIGNvbXBvbmVudHMuLi5cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gbXV0YXRlIHRoZSBjb3JyZXNwb25kaW5nIGNvbXBvbmVudCBpbiB0aGUgZGVzdGluYXRpb25cclxuICAgICAgbGV0IGNtcE11dGF0ZTogQ29tcG9uZW50ID0gX2Rlc3RpbmF0aW9uLmdldENvbXBvbmVudChfZXZlbnQuZGV0YWlsLmNvbXBvbmVudC5jb25zdHJ1Y3Rvcik7XHJcbiAgICAgIGlmIChjbXBNdXRhdGUpXHJcbiAgICAgICAgYXdhaXQgY21wTXV0YXRlLm11dGF0ZShfZXZlbnQuZGV0YWlsLm11dGF0b3IsIG51bGwsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzRmlsdGVyZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIGxldCBjbXBGaWx0ZXI6IENvbXBvbmVudEdyYXBoRmlsdGVyID0gdGhpcy5nZXRDb21wb25lbnQoQ29tcG9uZW50R3JhcGhGaWx0ZXIpO1xyXG4gICAgICByZXR1cm4gKGNtcEZpbHRlciAmJiBjbXBGaWx0ZXIuaXNBY3RpdmUpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEhvbGRzIGRhdGEgdG8gZmVlZCBpbnRvIGEge0BsaW5rIFNoYWRlcn0gdG8gZGVzY3JpYmUgdGhlIHN1cmZhY2Ugb2Yge0BsaW5rIE1lc2h9LiAgXHJcbiAgICoge0BsaW5rIE1hdGVyaWFsfXMgcmVmZXJlbmNlIHtAbGluayBDb2F0fSBhbmQge0BsaW5rIFNoYWRlcn0uICAgXHJcbiAgICogVGhlIG1ldGhvZCB1c2VSZW5kZXJEYXRhIHdpbGwgYmUgaW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yfSBhdCBydW50aW1lLCBleHRlbmRpbmcgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgdGhpcyBjbGFzcyB0byBkZWFsIHdpdGggdGhlIHJlbmRlcmVyLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb2F0IGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XHJcbiAgICAvLyBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJDb2F0XCI7XHJcbiAgICAvLyBwcm90ZWN0ZWQgcmVuZGVyRGF0YTogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH07IC8vIHRoaXMgd2Fzbid0IHVzZWQgYW55d2hlcmUuLi5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHJlbmRlci1wYXJhbWV0ZXJzIGZyb20gdGhpcyBhbmQgdGhlIGdpdmVuIG1hdGVyaWFsIGluc2lkZSB0aGUgZ2l2ZW4gc2hhZGVyLlxyXG4gICAgICogSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yQ29hdH0uIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVzZVJlbmRlckRhdGEoX3NoYWRlcjogU2hhZGVySW50ZXJmYWNlLCBfY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBkZWxldGUgX211dGF0b3IucmVuZGVyRGF0YTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzaW1wbGVzdCB7QGxpbmsgQ29hdH0gcHJvdmlkaW5nIGp1c3QgYSBjb2xvclxyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3RvckNvYXQuZGVjb3JhdGVcclxuICBleHBvcnQgY2xhc3MgQ29hdENvbG9yZWQgZXh0ZW5kcyBDb2F0IHtcclxuICAgIHB1YmxpYyBjb2xvcjogQ29sb3I7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9jb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IoKSkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLmNvbG9yID0gX2NvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5jb2xvciA9IHRoaXMuY29sb3Iuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICBhd2FpdCB0aGlzLmNvbG9yLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmNvbG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBIHtAbGluayBDb2F0fSBwcm92aWRpbmcgYSBjb2xvciBhbmQgcGFyYW1ldGVycyBmb3IgdGhlIHBob25nIHNoYWRpbmcgbW9kZWwuXHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yQ29hdC5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb2F0UmVtaXNzaXZlIGV4dGVuZHMgQ29hdENvbG9yZWQge1xyXG4gICAgcHVibGljIGRpZmZ1c2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzcGVjdWxhcjogbnVtYmVyO1xyXG4gICAgcHVibGljIGludGVuc2l0eTogbnVtYmVyO1xyXG5cclxuICAgICNtZXRhbGxpYzogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfY29sb3I6IENvbG9yID0gbmV3IENvbG9yKCksIF9kaWZmdXNlOiBudW1iZXIgPSAxLCBfc3BlY3VsYXI6IG51bWJlciA9IDAuNSwgX2ludGVuc2l0eTogbnVtYmVyID0gMC43LCBfbWV0YWxsaWM6IG51bWJlciA9IDAuMCkge1xyXG4gICAgICBzdXBlcihfY29sb3IpO1xyXG4gICAgICB0aGlzLmRpZmZ1c2UgPSBfZGlmZnVzZTtcclxuICAgICAgdGhpcy5zcGVjdWxhciA9IF9zcGVjdWxhcjtcclxuICAgICAgdGhpcy5pbnRlbnNpdHkgPSBfaW50ZW5zaXR5O1xyXG4gICAgICB0aGlzLm1ldGFsbGljID0gX21ldGFsbGljO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbWV0YWxsaWMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21ldGFsbGljO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtZXRhbGxpYyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtZXRhbGxpYyA9IENhbGMuY2xhbXAoX3ZhbHVlLCAwLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uZGlmZnVzZSA9IHRoaXMuZGlmZnVzZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zcGVjdWxhciA9IHRoaXMuc3BlY3VsYXI7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ubWV0YWxsaWMgPSB0aGlzLm1ldGFsbGljO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuZGlmZnVzZSA9IF9zZXJpYWxpemF0aW9uLmRpZmZ1c2U7XHJcbiAgICAgIHRoaXMuc3BlY3VsYXIgPSBfc2VyaWFsaXphdGlvbi5zcGVjdWxhcjtcclxuICAgICAgdGhpcy5pbnRlbnNpdHkgPSBfc2VyaWFsaXphdGlvbi5pbnRlbnNpdHkgPz8gdGhpcy5pbnRlbnNpdHk7XHJcbiAgICAgIHRoaXMubWV0YWxsaWMgPSBfc2VyaWFsaXphdGlvbi5tZXRhbGxpYyA/PyB0aGlzLm1ldGFsbGljO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5kaWZmdXNlO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5zcGVjdWxhcjtcclxuICAgICAgZGVsZXRlIG11dGF0b3IuaW50ZW5zaXR5O1xyXG4gICAgICBtdXRhdG9yLmRpZmZ1c2UgPSB0aGlzLmRpZmZ1c2U7XHJcbiAgICAgIG11dGF0b3Iuc3BlY3VsYXIgPSB0aGlzLnNwZWN1bGFyO1xyXG4gICAgICBtdXRhdG9yLmludGVuc2l0eSA9IHRoaXMuaW50ZW5zaXR5O1xyXG4gICAgICBtdXRhdG9yLm1ldGFsbGljID0gdGhpcy5tZXRhbGxpYztcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBIHtAbGluayBDb2F0fSBwcm92aWRpbmcgYSB0ZXh0dXJlIGFuZCBhZGRpdGlvbmFsIGRhdGEgZm9yIHRleHR1cmluZ1xyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3RvckNvYXQuZGVjb3JhdGVcclxuICBleHBvcnQgY2xhc3MgQ29hdFRleHR1cmVkIGV4dGVuZHMgQ29hdENvbG9yZWQge1xyXG4gICAgcHVibGljIHRleHR1cmU6IFRleHR1cmUgPSBudWxsO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfY29sb3I6IENvbG9yID0gbmV3IENvbG9yKCksIF90ZXh0dXJlOiBUZXh0dXJlID0gVGV4dHVyZURlZmF1bHQuY29sb3IpIHtcclxuICAgICAgc3VwZXIoX2NvbG9yKTtcclxuICAgICAgdGhpcy50ZXh0dXJlID0gX3RleHR1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkVGV4dHVyZSA9IHRoaXMudGV4dHVyZS5pZFJlc291cmNlO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLmlkVGV4dHVyZSlcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSA8VGV4dHVyZT5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkVGV4dHVyZSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiQ29hdFRleHR1cmVkLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQSB7QGxpbmsgQ29hdH0gcHJvdmlkaW5nIGEgdGV4dHVyZSBhbmQgYWRkaXRpb25hbCBkYXRhIGZvciB0ZXh0dXJpbmdcclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JDb2F0LmRlY29yYXRlXHJcbiAgZXhwb3J0IGNsYXNzIENvYXRSZW1pc3NpdmVUZXh0dXJlZCBleHRlbmRzIENvYXRUZXh0dXJlZCB7XHJcbiAgICBwdWJsaWMgZGlmZnVzZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHNwZWN1bGFyOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaW50ZW5zaXR5OiBudW1iZXI7XHJcblxyXG4gICAgI21ldGFsbGljOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9jb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IoKSwgX3RleHR1cmU6IFRleHR1cmUgPSBUZXh0dXJlRGVmYXVsdC5jb2xvciwgX2RpZmZ1c2U6IG51bWJlciA9IDEsIF9zcGVjdWxhcjogbnVtYmVyID0gMC41LCBfaW50ZW5zaXR5OiBudW1iZXIgPSAwLjcsIF9tZXRhbGxpYzogbnVtYmVyID0gMC4wKSB7XHJcbiAgICAgIHN1cGVyKF9jb2xvciwgX3RleHR1cmUpO1xyXG4gICAgICB0aGlzLmRpZmZ1c2UgPSBfZGlmZnVzZTtcclxuICAgICAgdGhpcy5zcGVjdWxhciA9IF9zcGVjdWxhcjtcclxuICAgICAgdGhpcy5pbnRlbnNpdHkgPSBfaW50ZW5zaXR5O1xyXG4gICAgICB0aGlzLm1ldGFsbGljID0gX21ldGFsbGljO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbWV0YWxsaWMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21ldGFsbGljO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtZXRhbGxpYyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtZXRhbGxpYyA9IENhbGMuY2xhbXAoX3ZhbHVlLCAwLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uZGlmZnVzZSA9IHRoaXMuZGlmZnVzZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zcGVjdWxhciA9IHRoaXMuc3BlY3VsYXI7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ubWV0YWxsaWMgPSB0aGlzLm1ldGFsbGljO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgdGhpcy5kaWZmdXNlID0gX3NlcmlhbGl6YXRpb24uZGlmZnVzZTtcclxuICAgICAgdGhpcy5zcGVjdWxhciA9IF9zZXJpYWxpemF0aW9uLnNwZWN1bGFyO1xyXG4gICAgICB0aGlzLmludGVuc2l0eSA9IF9zZXJpYWxpemF0aW9uLmludGVuc2l0eSA/PyB0aGlzLmludGVuc2l0eTtcclxuICAgICAgdGhpcy5tZXRhbGxpYyA9IF9zZXJpYWxpemF0aW9uLm1ldGFsbGljID8/IHRoaXMubWV0YWxsaWM7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IodHJ1ZSk7XHJcbiAgICAgIGRlbGV0ZSBtdXRhdG9yLmRpZmZ1c2U7XHJcbiAgICAgIGRlbGV0ZSBtdXRhdG9yLnNwZWN1bGFyO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5pbnRlbnNpdHk7XHJcbiAgICAgIG11dGF0b3IuZGlmZnVzZSA9IHRoaXMuZGlmZnVzZTtcclxuICAgICAgbXV0YXRvci5zcGVjdWxhciA9IHRoaXMuc3BlY3VsYXI7XHJcbiAgICAgIG11dGF0b3IuaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHk7XHJcbiAgICAgIG11dGF0b3IubWV0YWxsaWMgPSB0aGlzLm1ldGFsbGljO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIkNvYXRUZXh0dXJlZC50c1wiLz5cclxuXHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEEge0BsaW5rIENvYXR9IHByb3ZpZGluZyBhIHRleHR1cmUgYW5kIGFkZGl0aW9uYWwgZGF0YSBmb3IgdGV4dHVyaW5nXHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yQ29hdC5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb2F0UmVtaXNzaXZlVGV4dHVyZWROb3JtYWxzIGV4dGVuZHMgQ29hdFJlbWlzc2l2ZVRleHR1cmVkIHtcclxuICAgIHB1YmxpYyBub3JtYWxNYXA6IFRleHR1cmUgPSBudWxsO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfY29sb3I6IENvbG9yID0gbmV3IENvbG9yKCksIF90ZXh0dXJlOiBUZXh0dXJlID0gVGV4dHVyZURlZmF1bHQuY29sb3IsIF9ub3JtYWxNYXA6IFRleHR1cmUgPSBUZXh0dXJlRGVmYXVsdC5ub3JtYWwsIF9kaWZmdXNlPzogbnVtYmVyLCBfc3BlY3VsYXI6IG51bWJlciA9IHVuZGVmaW5lZCwgX2ludGVuc2l0eTogbnVtYmVyID0gdW5kZWZpbmVkLCBfbWV0YWxsaWM6IG51bWJlciA9IHVuZGVmaW5lZCkge1xyXG4gICAgICBzdXBlcihfY29sb3IsIF90ZXh0dXJlLCBfZGlmZnVzZSwgX3NwZWN1bGFyLCBfaW50ZW5zaXR5LCBfbWV0YWxsaWMpO1xyXG4gICAgICB0aGlzLm5vcm1hbE1hcCA9IF9ub3JtYWxNYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkTm9ybWFsTWFwID0gdGhpcy5ub3JtYWxNYXAuaWRSZXNvdXJjZTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGlmIChfc2VyaWFsaXphdGlvbi5pZE5vcm1hbE1hcClcclxuICAgICAgICB0aGlzLm5vcm1hbE1hcCA9IDxUZXh0dXJlPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3NlcmlhbGl6YXRpb24uaWROb3JtYWxNYXApO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBBIHtAbGluayBDb2F0fSBwcm92aWRpbmcgYSBjb2xvciBhbmQgcGFyYW1ldGVycyBmb3IgdGhlIHRvb24gc2hhZGluZyBtb2RlbC5cclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JDb2F0LmRlY29yYXRlXHJcbiAgZXhwb3J0IGNsYXNzIENvYXRUb29uIGV4dGVuZHMgbWl4aW5Db2F0VG9vbihDb2F0UmVtaXNzaXZlKSB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2NvbG9yOiBDb2xvciA9IG5ldyBDb2xvcigpLCBfdGV4VG9vbjogVGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LnRvb24sIF9kaWZmdXNlPzogbnVtYmVyLCBfc3BlY3VsYXI6IG51bWJlciA9IDEuMiwgX2ludGVuc2l0eT86IG51bWJlciwgX21ldGFsbGljPzogbnVtYmVyKSB7XHJcbiAgICAgIHN1cGVyKF9jb2xvciwgX2RpZmZ1c2UsIF9zcGVjdWxhciwgX2ludGVuc2l0eSwgX21ldGFsbGljKTtcclxuICAgICAgdGhpcy50ZXhUb29uID0gX3RleFRvb247XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHtAbGluayBDb2F0fSBwcm92aWRpbmcgYSB0ZXh0dXJlLCBhIGNvbG9yIGFuZCBwYXJhbWV0ZXJzIGZvciB0aGUgdG9vbiBzaGFkaW5nIG1vZGVsLlxyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3RvckNvYXQuZGVjb3JhdGVcclxuICBleHBvcnQgY2xhc3MgQ29hdFRvb25UZXh0dXJlZCBleHRlbmRzIG1peGluQ29hdFRvb24oQ29hdFJlbWlzc2l2ZVRleHR1cmVkKSB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2NvbG9yOiBDb2xvciA9IG5ldyBDb2xvcigpLCBfdGV4dHVyZTogVGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LmNvbG9yLCBfdGV4VG9vbjogVGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LnRvb24sIF9kaWZmdXNlPzogbnVtYmVyLCBfc3BlY3VsYXI6IG51bWJlciA9IDEuMiwgX2ludGVuc2l0eT86IG51bWJlciwgX21ldGFsbGljPzogbnVtYmVyKSB7XHJcbiAgICAgIHN1cGVyKF9jb2xvciwgX3RleHR1cmUsIF9kaWZmdXNlLCBfc3BlY3VsYXIsIF9pbnRlbnNpdHksIF9tZXRhbGxpYyk7XHJcbiAgICAgIHRoaXMudGV4VG9vbiA9IF90ZXhUb29uO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbWl4aW5Db2F0VG9vbjxUQmFzZSBleHRlbmRzIG5ldyAoLi4uYXJnczogR2VuZXJhbFtdKSA9PiBTZXJpYWxpemFibGU+KF9iYXNlOiBUQmFzZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICBhYnN0cmFjdCBjbGFzcyBDb2F0VG9vbiBleHRlbmRzIF9iYXNlIHtcclxuICAgICAgcHVibGljIHRleFRvb246IFRleHR1cmU7XHJcblxyXG4gICAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgICAgc2VyaWFsaXphdGlvbi5pZFRleFRvb24gPSB0aGlzLnRleFRvb24uaWRSZXNvdXJjZTtcclxuICAgICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLmlkVGV4VG9vbilcclxuICAgICAgICAgIHRoaXMudGV4VG9vbiA9IDxUZXh0dXJlPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3NlcmlhbGl6YXRpb24uaWRUZXhUb29uKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBDb2F0VG9vbjtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBhIGNvbG9yIGFzIHZhbHVlcyBpbiB0aGUgcmFuZ2Ugb2YgMCB0byAxIGZvciB0aGUgZm91ciBjaGFubmVscyByZWQsIGdyZWVuLCBibHVlIGFuZCBhbHBoYSAoZm9yIG9wYWNpdHkpXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbG9yIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSwgUmVjeWNhYmxlIHtcclxuICAgIC8vIGNyYzIgb25seSB1c2VkIGZvciBjb252ZXJ0aW5nIGNvbG9ycyBmcm9tIHN0cmluZ3MgcHJlZGVmaW5lZCBieSBDU1NcclxuICAgIHByaXZhdGUgc3RhdGljIGNyYzI6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9ICgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNyYzI6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG4gICAgICBjcmMyLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xyXG4gICAgICByZXR1cm4gY3JjMjtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgcHVibGljIHI6IG51bWJlcjtcclxuICAgIHB1YmxpYyBnOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYjogbnVtYmVyO1xyXG4gICAgcHVibGljIGE6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3I6IG51bWJlciA9IDEsIF9nOiBudW1iZXIgPSAxLCBfYjogbnVtYmVyID0gMSwgX2E6IG51bWJlciA9IDEpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zZXRDbGFtcGVkKF9yLCBfZywgX2IsIF9hKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgVWludDhDbGFtcGVkQXJyYXl9IHdpdGggdGhlIDgtYml0IGNvbG9yIGNoYW5uZWxzIGluIHRoZSBvcmRlciBSR0JBLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEJ5dGVzRnJvbUNTUyhfa2V5d29yZDogc3RyaW5nKTogVWludDhDbGFtcGVkQXJyYXkge1xyXG4gICAgICBDb2xvci5jcmMyLmZpbGxTdHlsZSA9IF9rZXl3b3JkO1xyXG4gICAgICBDb2xvci5jcmMyLmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xyXG4gICAgICByZXR1cm4gQ29sb3IuY3JjMi5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSkuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBuZXcge0BsaW5rIENvbG9yfSBvYmplY3QgY3JlYXRlZCBmcm9tIHRoZSBnaXZlbiBjc3MgY29sb3Iga2V5d29yZC4gXHJcbiAgICAgKiBQYXNzaW5nIGFuIF9hbHBoYSB2YWx1ZSB3aWxsIG92ZXJyaWRlIHRoZSBhbHBoYSB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhlIGtleXdvcmQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQ1NTKF9rZXl3b3JkOiBzdHJpbmcsIF9hbHBoYT86IG51bWJlcik6IENvbG9yIHtcclxuICAgICAgcmV0dXJuIFJlY3ljbGVyLmdldChDb2xvcikuc2V0Q1NTKF9rZXl3b3JkLCBfYWxwaGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHJ1bnMgdGhlIHByb2R1Y3Qgb2YgdHdvIGNvbG9ycy4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUFJPRFVDVChfY2xyQTogQ29sb3IsIF9jbHJCOiBDb2xvcik6IENvbG9yIHtcclxuICAgICAgcmV0dXJuIF9jbHJBLmNsb25lLm11bHRpcGx5KF9jbHJCKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBjbG9uZSBvZiB0aGlzIGNvbG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNsb25lKCk6IENvbG9yIHtcclxuICAgICAgcmV0dXJuIFJlY3ljbGVyLnJldXNlKENvbG9yKS5jb3B5KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29waWVzIHRoZSBjb2xvciBjaGFubmVscyBvZiB0aGUgZ2l2ZW4gY29sb3IgaW50byB0aGlzIGNvbG9yIGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29weShfY29sb3I6IENvbG9yKTogQ29sb3Ige1xyXG4gICAgICB0aGlzLnIgPSBfY29sb3IucjtcclxuICAgICAgdGhpcy5nID0gX2NvbG9yLmc7XHJcbiAgICAgIHRoaXMuYiA9IF9jb2xvci5iO1xyXG4gICAgICB0aGlzLmEgPSBfY29sb3IuYTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuciA9IDE7IHRoaXMuZyA9IDE7IHRoaXMuYiA9IDE7IHRoaXMuYSA9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoaXMgY29sb3IgZnJvbSB0aGUgZ2l2ZW4gY3NzIGNvbG9yIGtleXdvcmQuIE9wdGluYWxseSBzZXRzIHRoZSBhbHBoYSB2YWx1ZSB0byB0aGUgZ2l2ZW4gdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRDU1MoX2tleXdvcmQ6IHN0cmluZywgX2FscGhhPzogbnVtYmVyKTogQ29sb3Ige1xyXG4gICAgICBjb25zdCBieXRlc1JHQkE6IFVpbnQ4Q2xhbXBlZEFycmF5ID0gQ29sb3IuZ2V0Qnl0ZXNGcm9tQ1NTKF9rZXl3b3JkKTtcclxuICAgICAgdGhpcy5zZXRCeXRlcyhieXRlc1JHQkFbMF0sIGJ5dGVzUkdCQVsxXSwgYnl0ZXNSR0JBWzJdLCBieXRlc1JHQkFbM10pO1xyXG4gICAgICB0aGlzLmEgPSBfYWxwaGEgPz8gdGhpcy5hO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhpcyBjb2xvciBmcm9tIHRoZSBnaXZlbiA4LWJpdCB2YWx1ZXMgZm9yIHRoZSBjb2xvciBjaGFubmVscy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEJ5dGVzKF9yOiBudW1iZXIsIF9nOiBudW1iZXIsIF9iOiBudW1iZXIsIF9hOiBudW1iZXIpOiBDb2xvcjtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGlzIGNvbG9yIGZyb20gdGhlIGdpdmVuIHtAbGluayBVaW50OENsYW1wZWRBcnJheX0uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRCeXRlcyhfcmdiYTogVWludDhDbGFtcGVkQXJyYXkpOiBDb2xvcjtcclxuICAgIHB1YmxpYyBzZXRCeXRlcyhfcjogbnVtYmVyIHwgVWludDhDbGFtcGVkQXJyYXksIF9nPzogbnVtYmVyLCBfYj86IG51bWJlciwgX2E/OiBudW1iZXIpOiBDb2xvciB7XHJcbiAgICAgIGlmIChfciBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KVxyXG4gICAgICAgIHRoaXMuc2V0Qnl0ZXMoX3JbMF0sIF9yWzFdLCBfclsyXSwgX3JbM10pO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5zZXRDbGFtcGVkKF9yIC8gMjU1LCBfZyAvIDI1NSwgX2IgLyAyNTUsIF9hIC8gMjU1KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjb2xvciBjaGFubmVscyBvZiB0aGlzIGNvbG9yIGFuZCBjbGFtcHMgdGhlbSBiZXR3ZWVuIDAgYW5kIDEuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRDbGFtcGVkKF9yOiBudW1iZXIsIF9nOiBudW1iZXIsIF9iOiBudW1iZXIsIF9hOiBudW1iZXIpOiBDb2xvcjtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGlzIGNvbG9yIGZyb20gdGhlIGdpdmVuIHtAbGluayBGbG9hdDMyQXJyYXl9IHdoaWxlIGNsYW1waW5nIHRoZSB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAxLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Q2xhbXBlZChfcmdiYTogRmxvYXQzMkFycmF5KTogQ29sb3I7XHJcbiAgICBwdWJsaWMgc2V0Q2xhbXBlZChfcjogbnVtYmVyIHwgRmxvYXQzMkFycmF5LCBfZz86IG51bWJlciwgX2I/OiBudW1iZXIsIF9hPzogbnVtYmVyKTogQ29sb3Ige1xyXG4gICAgICBpZiAoX3IgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpXHJcbiAgICAgICAgdGhpcy5zZXRDbGFtcGVkKF9yWzBdLCBfclsxXSwgX3JbMl0sIF9yWzNdKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMuc2V0KFxyXG4gICAgICAgICAgQ2FsYy5jbGFtcChfciwgMCwgMSksXHJcbiAgICAgICAgICBDYWxjLmNsYW1wKF9nLCAwLCAxKSxcclxuICAgICAgICAgIENhbGMuY2xhbXAoX2IsIDAsIDEpLFxyXG4gICAgICAgICAgQ2FsYy5jbGFtcChfYSwgMCwgMSlcclxuICAgICAgICApO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGNvbG9yIGNoYW5uZWxzIG9mIHRoaXMgY29sb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX3I6IG51bWJlciwgX2c6IG51bWJlciwgX2I6IG51bWJlciwgX2E6IG51bWJlcik6IENvbG9yIHtcclxuICAgICAgdGhpcy5yID0gX3I7IHRoaXMuZyA9IF9nOyB0aGlzLmIgPSBfYjsgdGhpcy5hID0gX2E7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgY29sb3IgY2hhbm5lbHMgb2YgdGhpcyBjb2xvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbdGhpcy5yLCB0aGlzLmcsIHRoaXMuYiwgdGhpcy5hXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFVpbnQ4Q2xhbXBlZEFycmF5fSBvZiB0aGUgY29sb3IgY2hhbm5lbHMgb2YgdGhpcyBjb2xvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEJ5dGVzKCk6IFVpbnQ4Q2xhbXBlZEFycmF5IHtcclxuICAgICAgcmV0dXJuIG5ldyBVaW50OENsYW1wZWRBcnJheShbdGhpcy5yICogMjU1LCB0aGlzLmcgKiAyNTUsIHRoaXMuYiAqIDI1NSwgdGhpcy5hICogMjU1XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjc3MgY29sb3Iga2V5d29yZCByZXByZXNlbnRpbmcgdGhpcyBjb2xvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENTUygpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgYnl0ZXM6IFVpbnQ4Q2xhbXBlZEFycmF5ID0gdGhpcy5nZXRCeXRlcygpO1xyXG4gICAgICByZXR1cm4gYFJHQkEoJHtieXRlc1swXX0sICR7Ynl0ZXNbMV19LCAke2J5dGVzWzJdfSwgJHt0aGlzLmF9KWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBoZXggc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29sb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRIZXgoKTogc3RyaW5nIHtcclxuICAgICAgbGV0IGJ5dGVzOiBVaW50OENsYW1wZWRBcnJheSA9IHRoaXMuZ2V0Qnl0ZXMoKTtcclxuICAgICAgbGV0IGhleDogc3RyaW5nID0gXCJcIjtcclxuICAgICAgZm9yIChsZXQgYnl0ZSBvZiBieXRlcylcclxuICAgICAgICBoZXggKz0gYnl0ZS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpO1xyXG4gICAgICByZXR1cm4gaGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGlzIGNvbG9yIGZyb20gdGhlIGdpdmVuIGhleCBzdHJpbmcgY29sb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRIZXgoX2hleDogc3RyaW5nKTogQ29sb3Ige1xyXG4gICAgICBsZXQgYnl0ZXM6IFVpbnQ4Q2xhbXBlZEFycmF5ID0gdGhpcy5nZXRCeXRlcygpO1xyXG4gICAgICBsZXQgY2hhbm5lbDogbnVtYmVyID0gMDtcclxuICAgICAgZm9yIChsZXQgYnl0ZSBpbiBieXRlcylcclxuICAgICAgICBieXRlc1tieXRlXSA9IHBhcnNlSW50KF9oZXguc3Vic3RyKGNoYW5uZWwrKyAqIDIsIDIpLCAxNik7XHJcbiAgICAgIHJldHVybiB0aGlzLnNldEJ5dGVzKGJ5dGVzKTs7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiBjb2xvciB0byB0aGlzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkKF9jb2xvcjogQ29sb3IpOiBDb2xvciB7XHJcbiAgICAgIHRoaXMuciArPSBfY29sb3IucjtcclxuICAgICAgdGhpcy5nICs9IF9jb2xvci5nO1xyXG4gICAgICB0aGlzLmIgKz0gX2NvbG9yLmI7XHJcbiAgICAgIHRoaXMuYSArPSBfY29sb3IuYTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdWx0aXBsaWVzIHRoaXMgd2l0aCB0aGUgZ2l2ZW4gY29sb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtdWx0aXBseShfY29sb3I6IENvbG9yKTogQ29sb3Ige1xyXG4gICAgICB0aGlzLnIgKj0gX2NvbG9yLnI7XHJcbiAgICAgIHRoaXMuZyAqPSBfY29sb3IuZztcclxuICAgICAgdGhpcy5iICo9IF9jb2xvci5iO1xyXG4gICAgICB0aGlzLmEgKj0gX2NvbG9yLmE7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb2xvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGAocjogJHt0aGlzLnIudG9GaXhlZCgzKX0sIGc6ICR7dGhpcy5nLnRvRml4ZWQoMyl9LCBiOiAke3RoaXMuYi50b0ZpeGVkKDMpfSwgYTogJHt0aGlzLmEudG9GaXhlZCgzKX0pYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICAvLyBzZXJpYWxpemF0aW9uLnRvSlNPTiA9ICgpID0+IHsgcmV0dXJuIGB7IFwiclwiOiAke3RoaXMucn0sIFwiZ1wiOiAke3RoaXMuZ30sIFwiYlwiOiAke3RoaXMuYn0sIFwiYVwiOiAke3RoaXMuYX19YDsgfTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgWyR7dGhpcy5yfSwgJHt0aGlzLmd9LCAke3RoaXMuYn0sICR7dGhpcy5hfV1gOyB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBpZiAodHlwZW9mIChfc2VyaWFsaXphdGlvbikgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIFt0aGlzLnIsIHRoaXMuZywgdGhpcy5iLCB0aGlzLmFdID0gSlNPTi5wYXJzZSg8c3RyaW5nPjx1bmtub3duPl9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgfSBlbHNlXHJcbiAgICAgICAgdGhpcy5tdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEJhc2VjbGFzcyBmb3IgbWF0ZXJpYWxzLiBDb21iaW5lcyBhIHtAbGluayBTaGFkZXJ9IHdpdGggYSBjb21wYXRpYmxlIHtAbGluayBDb2F0fVxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1hdGVyaWFsIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZVJlc291cmNlIHtcclxuICAgIC8qKiBUaGUgbmFtZSB0byBjYWxsIHRoZSBNYXRlcmlhbCBieS4gKi9cclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaWRSZXNvdXJjZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENsaXBwaW5nIHRocmVzaG9sZCBmb3IgYWxwaGEgdmFsdWVzLCBldmVyeSBwaXhlbCB3aXRoIGFscGhhIDwgYWxwaGFDbGlwIHdpbGwgYmUgZGlzY2FyZGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWxwaGFDbGlwOiBudW1iZXIgPSAwLjAxO1xyXG5cclxuICAgIHByaXZhdGUgc2hhZGVyVHlwZTogdHlwZW9mIFNoYWRlcjsgLy8gVGhlIHNoYWRlciBwcm9ncmFtIHVzZWQgYnkgdGhpcyBCYXNlTWF0ZXJpYWxcclxuICAgICNjb2F0OiBDb2F0O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nLCBfc2hhZGVyPzogdHlwZW9mIFNoYWRlciwgX2NvYXQ/OiBDb2F0KSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMubmFtZSA9IF9uYW1lO1xyXG4gICAgICB0aGlzLnNoYWRlclR5cGUgPSBfc2hhZGVyO1xyXG4gICAgICBpZiAoX3NoYWRlcikge1xyXG4gICAgICAgIGlmIChfY29hdClcclxuICAgICAgICAgIHRoaXMuY29hdCA9IF9jb2F0O1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIHRoaXMuY29hdCA9IHRoaXMuY3JlYXRlQ29hdE1hdGNoaW5nU2hhZGVyKCk7XHJcbiAgICAgIH1cclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSByZWZlcmVuY2VkIHtAbGluayBDb2F0fSBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNvYXQoKTogQ29hdCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjb2F0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWtlcyB0aGlzIG1hdGVyaWFsIHJlZmVyZW5jZSB0aGUgZ2l2ZW4ge0BsaW5rIENvYXR9IGlmIGl0IGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgcmVmZXJlbmNlZCB7QGxpbmsgU2hhZGVyfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IGNvYXQoX2NvYXQ6IENvYXQpIHtcclxuICAgICAgaWYgKHRoaXMuc2hhZGVyVHlwZSlcclxuICAgICAgICBpZiAoX2NvYXQuY29uc3RydWN0b3IgIT0gdGhpcy5zaGFkZXJUeXBlLmdldENvYXQoKSlcclxuICAgICAgICAgIGlmIChfY29hdCBpbnN0YW5jZW9mIHRoaXMuc2hhZGVyVHlwZS5nZXRDb2F0KCkpXHJcbiAgICAgICAgICAgIERlYnVnLmZ1ZGdlKFwiQ29hdCBpcyBleHRlbnNpb24gb2YgQ29hdCByZXF1aXJlZCBieSBzaGFkZXJcIik7XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRocm93IChuZXcgRXJyb3IoXCJTaGFkZXIgYW5kIGNvYXQgZG9uJ3QgbWF0Y2hcIikpO1xyXG4gICAgICB0aGlzLiNjb2F0ID0gX2NvYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBDb2F0fSBpbnN0YW5jZSB0aGF0IGlzIHZhbGlkIGZvciB0aGUge0BsaW5rIFNoYWRlcn0gcmVmZXJlbmNlZCBieSB0aGlzIG1hdGVyaWFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjcmVhdGVDb2F0TWF0Y2hpbmdTaGFkZXIoKTogQ29hdCB7XHJcbiAgICAgIGxldCBjb2F0OiBDb2F0ID0gbmV3ICh0aGlzLnNoYWRlclR5cGUuZ2V0Q29hdCgpKSgpO1xyXG4gICAgICByZXR1cm4gY29hdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZXMgdGhlIG1hdGVyaWFscyByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIHtAbGluayBTaGFkZXJ9LCBjcmVhdGVzIGFuZCByZWZlcmVuY2VzIGEgbmV3IHtAbGluayBDb2F0fSBpbnN0YW5jZSAgXHJcbiAgICAgKiBhbmQgbXV0YXRlcyB0aGUgbmV3IGNvYXQgdG8gcHJlc2VydmUgbWF0Y2hpbmcgcHJvcGVydGllcy5cclxuICAgICAqIEBwYXJhbSBfc2hhZGVyVHlwZSBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFNoYWRlcihfc2hhZGVyVHlwZTogdHlwZW9mIFNoYWRlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnNoYWRlclR5cGUgPSBfc2hhZGVyVHlwZTtcclxuICAgICAgbGV0IGNvYXQ6IENvYXQgPSB0aGlzLmNyZWF0ZUNvYXRNYXRjaGluZ1NoYWRlcigpO1xyXG4gICAgICBjb2F0Lm11dGF0ZSh0aGlzLiNjb2F0Py5nZXRNdXRhdG9yKCkpO1xyXG4gICAgICB0aGlzLmNvYXQgPSBjb2F0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIFNoYWRlcn0gcmVmZXJlbmNlZCBieSB0aGlzIG1hdGVyaWFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTaGFkZXIoKTogdHlwZW9mIFNoYWRlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNoYWRlclR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICAvLyBUT0RPOiB0aGlzIHR5cGUgb2Ygc2VyaWFsaXphdGlvbiB3YXMgaW1wbGVtZW50ZWQgZm9yIGltcGxpY2l0IE1hdGVyaWFsIGNyZWF0ZS4gQ2hlY2sgaWYgb2Jzb2xldGUgd2hlbiBvbmx5IG9uZSBtYXRlcmlhbCBjbGFzcyBleGlzdHMgYW5kL29yIG1hdGVyaWFscyBhcmUgc3RvcmVkIHNlcGFyYXRlbHlcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgc2hhZGVyOiB0aGlzLnNoYWRlclR5cGUubmFtZSxcclxuICAgICAgICBjb2F0OiBTZXJpYWxpemVyLnNlcmlhbGl6ZSh0aGlzLiNjb2F0KSxcclxuICAgICAgICBhbHBoYUNsaXA6IHRoaXMuYWxwaGFDbGlwXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5uYW1lID0gX3NlcmlhbGl6YXRpb24ubmFtZTtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzLCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5zaGFkZXJUeXBlID0gKDxHZW5lcmFsPkZ1ZGdlQ29yZSlbX3NlcmlhbGl6YXRpb24uc2hhZGVyXTtcclxuICAgICAgbGV0IGNvYXQ6IENvYXQgPSA8Q29hdD5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmNvYXQpO1xyXG4gICAgICB0aGlzLmNvYXQgPSBjb2F0O1xyXG4gICAgICBpZiAoX3NlcmlhbGl6YXRpb24uYWxwaGFDbGlwICE9IHVuZGVmaW5lZClcclxuICAgICAgICB0aGlzLmFscGhhQ2xpcCA9IF9zZXJpYWxpemF0aW9uLmFscGhhQ2xpcDtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgbXV0YXRvci5jb2F0ID0gdGhpcy5jb2F0LmdldE11dGF0b3IoKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgLy8gZGVsZXRlIF9tdXRhdG9yLmlkUmVzb3VyY2U7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQSB7QGxpbmsgTWF0ZXJpYWx9IGxvYWRlZCBmcm9tIGEgZ2xURi1GaWxlLlxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyNFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNYXRlcmlhbEdMVEYgZXh0ZW5kcyBtaXhpblNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwoTWF0ZXJpYWwpIHtcclxuICAgIHB1YmxpYyBhc3luYyBsb2FkKF91cmw6IFJlcXVlc3RJbmZvID0gdGhpcy51cmwsIF9uYW1lOiBzdHJpbmcgPSB0aGlzLm5hbWUpOiBQcm9taXNlPE1hdGVyaWFsR0xURj4ge1xyXG4gICAgICB0aGlzLnVybCA9IF91cmw7XHJcbiAgICAgIHRoaXMubmFtZSA9IF9uYW1lO1xyXG4gICAgICByZXR1cm4gR0xURkxvYWRlci5sb2FkUmVzb3VyY2UodGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQWJzdHJhY3QgY2xhc3Mgc3VwcG9ydGluZyB2YXJpb3VzIGFyaXRobWV0aWNhbCBoZWxwZXIgZnVuY3Rpb25zXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhbGMge1xyXG4gICAgLyoqIGZhY3RvciBtdWx0aXBsaWVkIHdpdGggYW5nbGUgaW4gZGVncmVlcyB5aWVsZHMgdGhlIGFuZ2xlIGluIHJhZGlhbiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBkZWcycmFkOiBudW1iZXIgPSBNYXRoLlBJIC8gMTgwO1xyXG4gICAgLyoqIGZhY3RvciBtdWx0aXBsaWVkIHdpdGggYW5nbGUgaW4gcmFkaWFuIHlpZWxkcyB0aGUgYW5nbGUgaW4gZGVncmVlcyAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSByYWQyZGVnOiBudW1iZXIgPSAxIC8gQ2FsYy5kZWcycmFkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBvbmUgb2YgdGhlIHZhbHVlcyBwYXNzZWQgaW4sIGVpdGhlciBfdmFsdWUgaWYgd2l0aGluIF9taW4gYW5kIF9tYXggb3IgdGhlIGJvdW5kYXJ5IGJlaW5nIGV4Y2VlZGVkIGJ5IF92YWx1ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYW1wPFQ+KF92YWx1ZTogVCwgX21pbjogVCwgX21heDogVCwgX2lzU21hbGxlcjogKF92YWx1ZTE6IFQsIF92YWx1ZTI6IFQpID0+IGJvb2xlYW4gPSAoX3ZhbHVlMTogVCwgX3ZhbHVlMjogVCkgPT4geyByZXR1cm4gX3ZhbHVlMSA8IF92YWx1ZTI7IH0pOiBUIHtcclxuICAgICAgaWYgKF9pc1NtYWxsZXIoX3ZhbHVlLCBfbWluKSkgcmV0dXJuIF9taW47XHJcbiAgICAgIGlmIChfaXNTbWFsbGVyKF9tYXgsIF92YWx1ZSkpIHJldHVybiBfbWF4O1xyXG4gICAgICByZXR1cm4gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmFsdWVzIChfYSwgX2IpIGZvciB0aGUgZ2l2ZW4gaW50ZXJwb2xhdGlvbiBmYWN0b3IgKF9mKS4gZiBpcyBjbGFtcGVkIGJldHdlZW4gMCBhbmQgMS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBsZXJwKF9hOiBudW1iZXIsIF9iOiBudW1iZXIsIF9mOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gX2EgKyAoX2IgLSBfYSkgKiBDYWxjLmNsYW1wKF9mLCAwLCAxKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgaW50ZXJmYWNlIEJvcmRlciB7XHJcbiAgICBsZWZ0OiBudW1iZXI7XHJcbiAgICB0b3A6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbiAgICBib3R0b206IG51bWJlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZyYW1pbmcgZGVzY3JpYmVzIGhvdyB0byBtYXAgYSByZWN0YW5nbGUgaW50byBhIGdpdmVuIGZyYW1lXHJcbiAgICogYW5kIGhvdyBwb2ludHMgaW4gdGhlIGZyYW1lIGNvcnJlc3BvbmQgdG8gcG9pbnRzIGluIHRoZSByZXN1bHRpbmcgcmVjdGFuZ2xlIGFuZCB2aWNlIHZlcnNhXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTkgIFxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9ocy1mdXJ0d2FuZ2VuL0ZVREdFL3dpa2kvRnJhbWluZ1xyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGcmFtaW5nIGV4dGVuZHMgTXV0YWJsZSB7XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGEgcG9pbnQgaW4gdGhlIGdpdmVuIGZyYW1lIGFjY29yZGluZyB0byB0aGlzIGZyYW1pbmdcclxuICAgICAqIEBwYXJhbSBfcG9pbnRJbkZyYW1lIFRoZSBwb2ludCBpbiB0aGUgZnJhbWUgZ2l2ZW5cclxuICAgICAqIEBwYXJhbSBfcmVjdEZyYW1lIFRoZSBmcmFtZSB0aGUgcG9pbnQgaXMgcmVsYXRpdmUgdG9cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IGdldFBvaW50KF9wb2ludEluRnJhbWU6IFZlY3RvcjIsIF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFZlY3RvcjI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGEgcG9pbnQgaW4gYSBnaXZlbiByZWN0YW5nbGUgYmFjayB0byBhIGNhbGN1bGF0ZWQgZnJhbWUgb2Ygb3JpZ2luXHJcbiAgICAgKiBAcGFyYW0gX3BvaW50IFRoZSBwb2ludCBpbiB0aGUgcmVjdGFuZ2xlXHJcbiAgICAgKiBAcGFyYW0gX3JlY3QgVGhlIHJlY3RhbmdsZSB0aGUgcG9pbnQgaXMgcmVsYXRpdmUgdG9cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IGdldFBvaW50SW52ZXJzZShfcG9pbnQ6IFZlY3RvcjIsIF9yZWN0OiBSZWN0YW5nbGUpOiBWZWN0b3IyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYSByZWN0YW5nbGUgYXMgdGhlIGZyYW1lIGFuZCBjcmVhdGVzIGEgbmV3IHJlY3RhbmdsZSBhY2NvcmRpbmcgdG8gdGhlIGZyYW1pbmdcclxuICAgICAqIEBwYXJhbSBfcmVjdEZyYW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRSZWN0KF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSByZXN1bHRpbmcgcmVjdGFuZ2xlIGhhcyBhIGZpeGVkIHdpZHRoIGFuZCBoZWlnaHQgYW5kIGRpc3BsYXkgc2hvdWxkIHNjYWxlIHRvIGZpdCB0aGUgZnJhbWVcclxuICAgKiBQb2ludHMgYXJlIHNjYWxlZCBpbiB0aGUgc2FtZSByYXRpb1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBGcmFtaW5nRml4ZWQgZXh0ZW5kcyBGcmFtaW5nIHtcclxuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyID0gMzAwO1xyXG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyID0gMTUwO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihfd2lkdGg6IG51bWJlciA9IDMwMCwgX2hlaWdodDogbnVtYmVyID0gMTUwKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuc2V0U2l6ZShfd2lkdGgsIF9oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGlzIGZyYW1pbmcgdG8gdGhlIGdpdmVuIHdpZHRoIGFuZCBoZWlnaHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFNpemUoX3dpZHRoOiBudW1iZXIsIF9oZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLndpZHRoID0gX3dpZHRoO1xyXG4gICAgICB0aGlzLmhlaWdodCA9IF9oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvaW50KF9wb2ludEluRnJhbWU6IFZlY3RvcjIsIF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgdGhpcy53aWR0aCAqIChfcG9pbnRJbkZyYW1lLnggLSBfcmVjdEZyYW1lLngpIC8gX3JlY3RGcmFtZS53aWR0aCxcclxuICAgICAgICB0aGlzLmhlaWdodCAqIChfcG9pbnRJbkZyYW1lLnkgLSBfcmVjdEZyYW1lLnkpIC8gX3JlY3RGcmFtZS5oZWlnaHRcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9pbnRJbnZlcnNlKF9wb2ludDogVmVjdG9yMiwgX3JlY3Q6IFJlY3RhbmdsZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgX3BvaW50LnggKiBfcmVjdC53aWR0aCAvIHRoaXMud2lkdGggKyBfcmVjdC54LFxyXG4gICAgICAgIF9wb2ludC55ICogX3JlY3QuaGVpZ2h0IC8gdGhpcy5oZWlnaHQgKyBfcmVjdC55XHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFJlY3QoX3JlY3RGcmFtZTogUmVjdGFuZ2xlKTogUmVjdGFuZ2xlIHtcclxuICAgICAgcmV0dXJuIFJlY3RhbmdsZS5HRVQoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBXaWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSByZXN1bHRpbmcgcmVjdGFuZ2xlIGFyZSBmcmFjdGlvbnMgb2YgdGhvc2Ugb2YgdGhlIGZyYW1lLCBzY2FsZWQgYnkgbm9ybWVkIHZhbHVlcyBub3JtV2lkdGggYW5kIG5vcm1IZWlnaHQuXHJcbiAgICogRGlzcGxheSBzaG91bGQgc2NhbGUgdG8gZml0IHRoZSBmcmFtZSBhbmQgcG9pbnRzIGFyZSBzY2FsZWQgaW4gdGhlIHNhbWUgcmF0aW9cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRnJhbWluZ1NjYWxlZCBleHRlbmRzIEZyYW1pbmcge1xyXG4gICAgcHVibGljIG5vcm1XaWR0aDogbnVtYmVyID0gMS4wO1xyXG4gICAgcHVibGljIG5vcm1IZWlnaHQ6IG51bWJlciA9IDEuMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhpcyBmcmFtaW5nIHRvIHRoZSBnaXZlbiBub3JtZWQgd2lkdGggYW5kIGhlaWdodFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0U2NhbGUoX25vcm1XaWR0aDogbnVtYmVyLCBfbm9ybUhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubm9ybVdpZHRoID0gX25vcm1XaWR0aDtcclxuICAgICAgdGhpcy5ub3JtSGVpZ2h0ID0gX25vcm1IZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvaW50KF9wb2ludEluRnJhbWU6IFZlY3RvcjIsIF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgdGhpcy5ub3JtV2lkdGggKiAoX3BvaW50SW5GcmFtZS54IC0gX3JlY3RGcmFtZS54KSxcclxuICAgICAgICB0aGlzLm5vcm1IZWlnaHQgKiAoX3BvaW50SW5GcmFtZS55IC0gX3JlY3RGcmFtZS55KVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQb2ludEludmVyc2UoX3BvaW50OiBWZWN0b3IyLCBfcmVjdDogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICBfcG9pbnQueCAvIHRoaXMubm9ybVdpZHRoICsgX3JlY3QueCxcclxuICAgICAgICBfcG9pbnQueSAvIHRoaXMubm9ybUhlaWdodCArIF9yZWN0LnlcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVjdChfcmVjdEZyYW1lOiBSZWN0YW5nbGUpOiBSZWN0YW5nbGUge1xyXG4gICAgICByZXR1cm4gUmVjdGFuZ2xlLkdFVCgwLCAwLCB0aGlzLm5vcm1XaWR0aCAqIF9yZWN0RnJhbWUud2lkdGgsIHRoaXMubm9ybUhlaWdodCAqIF9yZWN0RnJhbWUuaGVpZ2h0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSByZXN1bHRpbmcgcmVjdGFuZ2xlIGZpdHMgaW50byBhIG1hcmdpbiBnaXZlbiBhcyBmcmFjdGlvbnMgb2YgdGhlIHNpemUgb2YgdGhlIGZyYW1lIGdpdmVuIGJ5IG5vcm1BbmNob3JcclxuICAgKiBwbHVzIGFuIGFic29sdXRlIHBhZGRpbmcgZ2l2ZW4gYnkgcGl4ZWxCb3JkZXIuIERpc3BsYXkgc2hvdWxkIGZpdCBpbnRvIHRoaXMuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEZyYW1pbmdDb21wbGV4IGV4dGVuZHMgRnJhbWluZyB7XHJcbiAgICBwdWJsaWMgbWFyZ2luOiBCb3JkZXIgPSB7IGxlZnQ6IDAsIHRvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCB9O1xyXG4gICAgcHVibGljIHBhZGRpbmc6IEJvcmRlciA9IHsgbGVmdDogMCwgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwIH07XHJcblxyXG4gICAgcHVibGljIGdldFBvaW50KF9wb2ludEluRnJhbWU6IFZlY3RvcjIsIF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgX3BvaW50SW5GcmFtZS54IC0gdGhpcy5wYWRkaW5nLmxlZnQgLSB0aGlzLm1hcmdpbi5sZWZ0ICogX3JlY3RGcmFtZS53aWR0aCxcclxuICAgICAgICBfcG9pbnRJbkZyYW1lLnkgLSB0aGlzLnBhZGRpbmcudG9wIC0gdGhpcy5tYXJnaW4udG9wICogX3JlY3RGcmFtZS5oZWlnaHRcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRQb2ludEludmVyc2UoX3BvaW50OiBWZWN0b3IyLCBfcmVjdDogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICBfcG9pbnQueCArIHRoaXMucGFkZGluZy5sZWZ0ICsgdGhpcy5tYXJnaW4ubGVmdCAqIF9yZWN0LndpZHRoLFxyXG4gICAgICAgIF9wb2ludC55ICsgdGhpcy5wYWRkaW5nLnRvcCArIHRoaXMubWFyZ2luLnRvcCAqIF9yZWN0LmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRSZWN0KF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIGlmICghX3JlY3RGcmFtZSlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIGxldCBtaW5YOiBudW1iZXIgPSBfcmVjdEZyYW1lLnggKyB0aGlzLm1hcmdpbi5sZWZ0ICogX3JlY3RGcmFtZS53aWR0aCArIHRoaXMucGFkZGluZy5sZWZ0O1xyXG4gICAgICBsZXQgbWluWTogbnVtYmVyID0gX3JlY3RGcmFtZS55ICsgdGhpcy5tYXJnaW4udG9wICogX3JlY3RGcmFtZS5oZWlnaHQgKyB0aGlzLnBhZGRpbmcudG9wO1xyXG4gICAgICBsZXQgbWF4WDogbnVtYmVyID0gX3JlY3RGcmFtZS54ICsgKDEgLSB0aGlzLm1hcmdpbi5yaWdodCkgKiBfcmVjdEZyYW1lLndpZHRoIC0gdGhpcy5wYWRkaW5nLnJpZ2h0O1xyXG4gICAgICBsZXQgbWF4WTogbnVtYmVyID0gX3JlY3RGcmFtZS55ICsgKDEgLSB0aGlzLm1hcmdpbi5ib3R0b20pICogX3JlY3RGcmFtZS5oZWlnaHQgLSB0aGlzLnBhZGRpbmcuYm90dG9tO1xyXG5cclxuICAgICAgcmV0dXJuIFJlY3RhbmdsZS5HRVQobWluWCwgbWluWSwgbWF4WCAtIG1pblgsIG1heFkgLSBtaW5ZKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgcmV0dXJuIHsgbWFyZ2luOiB0aGlzLm1hcmdpbiwgcGFkZGluZzogdGhpcy5wYWRkaW5nIH07XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogUmVwcmVzZW50YXRpb24gb2YgYSB2ZWN0b3IyIGFzIHBvbGFyIGNvb3JkaW5hdGVzIFxyXG4gICAqIGBgYHRleHRcclxuICAgKiAg4oaVLSBhbmdsZSAoQW5nbGUgdG8gdGhlIHgtYXhpcylcclxuICAgKiAgLeKGkiBNYWduaXR1ZGUgKERpc3RhbmNlIGZyb20gdGhlIGNlbnRlcikgIFxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBHZW8yIGltcGxlbWVudHMgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyBtYWduaXR1ZGU6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgYW5nbGU6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9hbmdsZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSkge1xyXG4gICAgICB0aGlzLnNldChfYW5nbGUsIF9tYWduaXR1ZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgaW5zdGFuY2UgYXQgb25jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0KF9hbmdsZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSk6IHZvaWQge1xyXG4gICAgICB0aGlzLm1hZ25pdHVkZSA9IF9tYWduaXR1ZGU7XHJcbiAgICAgIHRoaXMuYW5nbGUgPSBfYW5nbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcHJldHR5IHN0cmluZyByZXByZXNlbnRhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGBhbmdsZTogJHt0aGlzLmFuZ2xlLnRvUHJlY2lzaW9uKDUpfSwgIG1hZ25pdHVkZTogJHt0aGlzLm1hZ25pdHVkZS50b1ByZWNpc2lvbig1KX1gO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yMyBhcyBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIGFzIHNlZW4gb24gYSBnbG9iZVxyXG4gICAqIGBgYHRleHRcclxuICAgKiDihpB84oaSIExvbmdpdHVkZSAoQW5nbGUgdG8gdGhlIHotYXhpcykgXHJcbiAgICogIOKGlS0gTGF0aXR1ZGUgKEFuZ2xlIHRvIHRoZSBlcXVhdG9yKVxyXG4gICAqICAt4oaSIE1hZ25pdHVkZSAoRGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyKSAgXHJcbiAgICogYGBgXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEdlbzMgaW1wbGVtZW50cyBSZWN5Y2FibGUge1xyXG4gICAgcHVibGljIG1hZ25pdHVkZTogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBsYXRpdHVkZTogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBsb25naXR1ZGU6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9sb25naXR1ZGU6IG51bWJlciA9IDAsIF9sYXRpdHVkZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSkge1xyXG4gICAgICB0aGlzLnNldChfbG9uZ2l0dWRlLCBfbGF0aXR1ZGUsIF9tYWduaXR1ZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgaW5zdGFuY2UgYXQgb25jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0KF9sb25naXR1ZGU6IG51bWJlciA9IDAsIF9sYXRpdHVkZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSk6IHZvaWQge1xyXG4gICAgICB0aGlzLm1hZ25pdHVkZSA9IF9tYWduaXR1ZGU7XHJcbiAgICAgIHRoaXMubGF0aXR1ZGUgPSBfbGF0aXR1ZGU7XHJcbiAgICAgIHRoaXMubG9uZ2l0dWRlID0gX2xvbmdpdHVkZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwcmV0dHkgc3RyaW5nIHJlcHJlc2VudGF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYGxvbmdpdHVkZTogJHt0aGlzLmxvbmdpdHVkZS50b1ByZWNpc2lvbig1KX0sIGxhdGl0dWRlOiAke3RoaXMubGF0aXR1ZGUudG9QcmVjaXNpb24oNSl9LCBtYWduaXR1ZGU6ICR7dGhpcy5tYWduaXR1ZGUudG9QcmVjaXNpb24oNSl9YDtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvLyBGcm9tIGh0dHA6Ly9iYWFnb2UuY29tL2VuL1JhbmRvbU11c2luZ3MvamF2YXNjcmlwdC9cclxuICAvLyBKb2hhbm5lcyBCYWFnw7hlIDxiYWFnb2VAYmFhZ29lLmNvbT4sIDIwMTBcclxuICBleHBvcnQgZnVuY3Rpb24gTWFzaCgpOiBGdW5jdGlvbiB7XHJcbiAgICBsZXQgbjogbnVtYmVyID0gMHhlZmM4MjQ5ZDtcclxuXHJcbiAgICBsZXQgbWFzaDogRnVuY3Rpb24gPSBmdW5jdGlvbiAoX2RhdGE6IHN0cmluZyB8IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIF9kYXRhID0gX2RhdGEudG9TdHJpbmcoKTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IF9kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbiArPSBfZGF0YS5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGxldCBoOiBudW1iZXIgPSAwLjAyNTE5NjAzMjgyNDE2OTM4ICogbjtcclxuICAgICAgICBuID0gaCA+Pj4gMDtcclxuICAgICAgICBoIC09IG47XHJcbiAgICAgICAgaCAqPSBuO1xyXG4gICAgICAgIG4gPSBoID4+PiAwO1xyXG4gICAgICAgIGggLT0gbjtcclxuICAgICAgICBuICs9IGggKiAweDEwMDAwMDAwMDsgLy8gMl4zMlxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAobiA+Pj4gMCkgKiAyLjMyODMwNjQzNjUzODY5NjNlLTEwOyAvLyAyXi0zMlxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtYXNoLnZlcnNpb24gPSAnTWFzaCAwLjknO1xyXG4gICAgcmV0dXJuIG1hc2g7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gRnJvbSBodHRwOi8vYmFhZ29lLmNvbS9lbi9SYW5kb21NdXNpbmdzL2phdmFzY3JpcHQvXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIExGSUI0KCk6IEZ1bmN0aW9uIHtcclxuICAgIC8vIEdlb3JnZSBNYXJzYWdsaWEncyBMRklCNCxcclxuICAgIC8vaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3NjaS5jcnlwdC9tc2cvZWI0ZGRkZTc4MmIxNzA1MVxyXG4gICAgbGV0IGFyZ3M6IG51bWJlcltdID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuICAgIGxldCBrMDogbnVtYmVyID0gMCxcclxuICAgICAgazE6IG51bWJlciA9IDU4LFxyXG4gICAgICBrMjogbnVtYmVyID0gMTE5LFxyXG4gICAgICBrMzogbnVtYmVyID0gMTc4O1xyXG5cclxuICAgIGxldCBzOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgIGxldCBtYXNoOiBGdW5jdGlvbiA9IE1hc2goKTtcclxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBhcmdzID0gWytuZXcgRGF0ZSgpXTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCAyNTY7IGorKykge1xyXG4gICAgICBzW2pdID0gbWFzaChcIiBcIik7XHJcbiAgICAgIHNbal0gLT0gbWFzaChcIiBcIikgKiA0Ljc2ODM3MTU4MjAzMTI1ZS03OyAvLyAyXi0yMVxyXG4gICAgICBpZiAoc1tqXSA8IDApIHtcclxuICAgICAgICBzW2pdICs9IDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCAyNTY7IGorKykge1xyXG4gICAgICAgIHNbal0gLT0gbWFzaChhcmdzW2ldKTtcclxuICAgICAgICBzW2pdIC09IG1hc2goYXJnc1tpXSkgKiA0Ljc2ODM3MTU4MjAzMTI1ZS03OyAvLyAyXi0yMVxyXG4gICAgICAgIGlmIChzW2pdIDwgMCkge1xyXG4gICAgICAgICAgc1tqXSArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbWFzaCA9IG51bGw7XHJcblxyXG4gICAgbGV0IHJhbmRvbTogRnVuY3Rpb24gPSBmdW5jdGlvbiAoKTogbnVtYmVyIHtcclxuICAgICAgbGV0IHg6IG51bWJlcjtcclxuXHJcbiAgICAgIGswID0gKGswICsgMSkgJiAyNTU7XHJcbiAgICAgIGsxID0gKGsxICsgMSkgJiAyNTU7XHJcbiAgICAgIGsyID0gKGsyICsgMSkgJiAyNTU7XHJcbiAgICAgIGszID0gKGszICsgMSkgJiAyNTU7XHJcblxyXG4gICAgICB4ID0gc1trMF0gLSBzW2sxXTtcclxuICAgICAgaWYgKHggPCAwKSB7XHJcbiAgICAgICAgeCArPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIHggLT0gc1trMl07XHJcbiAgICAgIGlmICh4IDwgMCkge1xyXG4gICAgICAgIHggKz0gMTtcclxuICAgICAgfVxyXG4gICAgICB4IC09IHNbazNdO1xyXG4gICAgICBpZiAoeCA8IDApIHtcclxuICAgICAgICB4ICs9IDE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBzW2swXSA9IHg7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJhbmRvbS51aW50MzIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgIHJldHVybiByYW5kb20oKSAqIDB4MTAwMDAwMDAwID4+PiAwOyAvLyAyXjMyXHJcbiAgICAvLyB9O1xyXG4gICAgLy8gcmFuZG9tLmZyYWN0NTMgPSByYW5kb207XHJcbiAgICAvLyByYW5kb20udmVyc2lvbiA9IFwiTEZJQjQgMC45XCI7XHJcbiAgICAvLyByYW5kb20uYXJncyA9IGFyZ3M7XHJcblxyXG4gICAgcmV0dXJuIHJhbmRvbTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVwcmVzZW50cyB0aGUgbWF0cml4IGFzIHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGluZyB7QGxpbmsgVmVjdG9yMn0sIGJlaW5nIGNhbGN1bGF0ZWQgZnJvbSB0aGUgbWF0cml4XHJcbiAgICovXHJcbiAgaW50ZXJmYWNlIFZlY3RvclJlcHJlc2VudGF0aW9uIHtcclxuICAgIHRyYW5zbGF0aW9uOiBWZWN0b3IyO1xyXG4gICAgcm90YXRpb246IG51bWJlcjtcclxuICAgIHNjYWxpbmc6IFZlY3RvcjI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaW1wbGUgY2xhc3MgZm9yIDN4MyBtYXRyaXggb3BlcmF0aW9uc1xyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWF0cml4M3gzIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSwgUmVjeWNhYmxlIHtcclxuICAgIHByaXZhdGUgZGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg5KTsgLy8gVGhlIGRhdGEgb2YgdGhlIG1hdHJpeC5cclxuICAgIHByaXZhdGUgbXV0YXRvcjogTXV0YXRvciA9IG51bGw7IC8vIHByZXBhcmVkIGZvciBvcHRpbWl6YXRpb24sIGtlZXAgbXV0YXRvciB0byByZWR1Y2UgcmVkdW5kYW50IGNhbGN1bGF0aW9uIGFuZCBmb3IgY29tcGFyaXNvbi4gU2V0IHRvIG51bGwgd2hlbiBkYXRhIGNoYW5nZXMhXHJcbiAgICBwcml2YXRlIHZlY3RvcnM6IFZlY3RvclJlcHJlc2VudGF0aW9uOyAvLyB2ZWN0b3IgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBtYXRyaXhcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMucmVjeWNsZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL1RPRE86IGZpZ3VyZSBvdXQgd2hhdCB0aGlzIGlzIHVzZWQgZm9yXHJcbiAgICAvKiogVE9ETzogZGVzY3JpYmUhICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFBST0pFQ1RJT04oX3dpZHRoOiBudW1iZXIsIF9oZWlnaHQ6IG51bWJlcik6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IG5ldyBNYXRyaXgzeDM7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChbXHJcbiAgICAgICAgMiAvIF93aWR0aCwgMCwgMCxcclxuICAgICAgICAwLCAtMiAvIF9oZWlnaHQsIDAsXHJcbiAgICAgICAgLTEsIDEsIDFcclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiBtdHhSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSBhIG5ldyBpZGVudGl0eSBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgSURFTlRJVFkoKTogTWF0cml4M3gzIHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXgzeDMgPSBSZWN5Y2xlci5nZXQoTWF0cml4M3gzKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCB0cmFuc2xhdGVzIGNvb3JkaW5hdGVzIGFsb25nIHRoZSB4LSBhbmQgeS1heGlzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4ge0BsaW5rIFZlY3RvcjJ9LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFRSQU5TTEFUSU9OKF90cmFuc2xhdGU6IFZlY3RvcjIpOiBNYXRyaXgzeDMge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IFJlY3ljbGVyLnJldXNlKE1hdHJpeDN4Myk7XHJcbiAgICAgIG10eFJlc3VsdC5zZXQoW1xyXG4gICAgICAgIDEsIDAsIDAsXHJcbiAgICAgICAgMCwgMSwgMCxcclxuICAgICAgICBfdHJhbnNsYXRlLngsIF90cmFuc2xhdGUueSwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGNvb3JkaW5hdGVzIG9uIHRoZSB6LWF4aXMgd2hlbiBtdWx0aXBsaWVkIGJ5LlxyXG4gICAgICogQHBhcmFtIF9hbmdsZUluRGVncmVlcyBUaGUgdmFsdWUgb2YgdGhlIHJvdGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPVEFUSU9OKF9hbmdsZUluRGVncmVlczogbnVtYmVyKTogTWF0cml4M3gzIHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXgzeDMgPSBSZWN5Y2xlci5yZXVzZShNYXRyaXgzeDMpO1xyXG4gICAgICBsZXQgYW5nbGVJblJhZGlhbnM6IG51bWJlciA9IF9hbmdsZUluRGVncmVlcyAqIENhbGMuZGVnMnJhZDtcclxuICAgICAgbGV0IHNpbjogbnVtYmVyID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICBsZXQgY29zOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgIG10eFJlc3VsdC5zZXQoW1xyXG4gICAgICAgIGNvcywgc2luLCAwLFxyXG4gICAgICAgIC1zaW4sIGNvcywgMCxcclxuICAgICAgICAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHNjYWxlcyBjb29yZGluYXRlcyBhbG9uZyB0aGUgeC0gYW5kIHktYXhpcyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHtAbGluayBWZWN0b3IyfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFNDQUxJTkcoX3NjYWxhcjogVmVjdG9yMik6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4M3gzID0gUmVjeWNsZXIucmV1c2UoTWF0cml4M3gzKTtcclxuICAgICAgbXR4UmVzdWx0LnNldChbXHJcbiAgICAgICAgX3NjYWxhci54LCAwLCAwLFxyXG4gICAgICAgIDAsIF9zY2FsYXIueSwgMCxcclxuICAgICAgICAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyB0aGUgcHJvZHVjdCBvZiB0d28gcGFzc2VkIG1hdHJpY2VzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFBST0RVQ1QoX210eExlZnQ6IE1hdHJpeDN4MywgX210eFJpZ2h0OiBNYXRyaXgzeDMpOiBNYXRyaXgzeDMge1xyXG4gICAgICBsZXQgYTAwOiBudW1iZXIgPSBfbXR4TGVmdC5kYXRhWzAgKiAzICsgMF07XHJcbiAgICAgIGxldCBhMDE6IG51bWJlciA9IF9tdHhMZWZ0LmRhdGFbMCAqIDMgKyAxXTtcclxuICAgICAgbGV0IGEwMjogbnVtYmVyID0gX210eExlZnQuZGF0YVswICogMyArIDJdO1xyXG4gICAgICBsZXQgYTEwOiBudW1iZXIgPSBfbXR4TGVmdC5kYXRhWzEgKiAzICsgMF07XHJcbiAgICAgIGxldCBhMTE6IG51bWJlciA9IF9tdHhMZWZ0LmRhdGFbMSAqIDMgKyAxXTtcclxuICAgICAgbGV0IGExMjogbnVtYmVyID0gX210eExlZnQuZGF0YVsxICogMyArIDJdO1xyXG4gICAgICBsZXQgYTIwOiBudW1iZXIgPSBfbXR4TGVmdC5kYXRhWzIgKiAzICsgMF07XHJcbiAgICAgIGxldCBhMjE6IG51bWJlciA9IF9tdHhMZWZ0LmRhdGFbMiAqIDMgKyAxXTtcclxuICAgICAgbGV0IGEyMjogbnVtYmVyID0gX210eExlZnQuZGF0YVsyICogMyArIDJdO1xyXG4gICAgICBsZXQgYjAwOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVswICogMyArIDBdO1xyXG4gICAgICBsZXQgYjAxOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVswICogMyArIDFdO1xyXG4gICAgICBsZXQgYjAyOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVswICogMyArIDJdO1xyXG4gICAgICBsZXQgYjEwOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVsxICogMyArIDBdO1xyXG4gICAgICBsZXQgYjExOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVsxICogMyArIDFdO1xyXG4gICAgICBsZXQgYjEyOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVsxICogMyArIDJdO1xyXG4gICAgICBsZXQgYjIwOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVsyICogMyArIDBdO1xyXG4gICAgICBsZXQgYjIxOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVsyICogMyArIDFdO1xyXG4gICAgICBsZXQgYjIyOiBudW1iZXIgPSBfbXR4UmlnaHQuZGF0YVsyICogMyArIDJdO1xyXG4gICAgICBsZXQgbXR4UmVzdWx0OiBNYXRyaXgzeDMgPSBSZWN5Y2xlci5yZXVzZShNYXRyaXgzeDMpO1xyXG4gICAgICBtdHhSZXN1bHQuc2V0KFtcclxuICAgICAgICBiMDAgKiBhMDAgKyBiMDEgKiBhMTAgKyBiMDIgKiBhMjAsXHJcbiAgICAgICAgYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxLFxyXG4gICAgICAgIGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMixcclxuICAgICAgICBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjAsXHJcbiAgICAgICAgYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxLFxyXG4gICAgICAgIGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMixcclxuICAgICAgICBiMjAgKiBhMDAgKyBiMjEgKiBhMTAgKyBiMjIgKiBhMjAsXHJcbiAgICAgICAgYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxLFxyXG4gICAgICAgIGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMlxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBpbnZlcnNlIG9mIGEgcGFzc2VkIG1hdHJpeC5cclxuICAgICAqIEBwYXJhbSBfbXR4IFRoZSBtYXRyaXggdG8gY29tcHV0ZSB0aGUgaW52ZXJzZSBvZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBJTlZFUlNFKF9tdHg6IE1hdHJpeDN4Myk6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGxldCBtOiBGbG9hdDMyQXJyYXkgPSBfbXR4LmRhdGE7XHJcbiAgICAgIGxldCBtMDA6IG51bWJlciA9IG1bMCAqIDMgKyAwXTtcclxuICAgICAgbGV0IG0wMTogbnVtYmVyID0gbVswICogMyArIDFdO1xyXG4gICAgICBsZXQgbTAyOiBudW1iZXIgPSBtWzAgKiAzICsgMl07XHJcbiAgICAgIGxldCBtMTA6IG51bWJlciA9IG1bMSAqIDMgKyAwXTtcclxuICAgICAgbGV0IG0xMTogbnVtYmVyID0gbVsxICogMyArIDFdO1xyXG4gICAgICBsZXQgbTEyOiBudW1iZXIgPSBtWzEgKiAzICsgMl07XHJcbiAgICAgIGxldCBtMjA6IG51bWJlciA9IG1bMiAqIDMgKyAwXTtcclxuICAgICAgbGV0IG0yMTogbnVtYmVyID0gbVsyICogMyArIDFdO1xyXG4gICAgICBsZXQgbTIyOiBudW1iZXIgPSBtWzIgKiAzICsgMl07XHJcblxyXG4gICAgICBsZXQgZDogbnVtYmVyID0gMSAvXHJcbiAgICAgICAgKG0wMCAqIChtMTEgKiBtMjIgLSBtMjEgKiBtMTIpIC1cclxuICAgICAgICAgIG0wMSAqIChtMTAgKiBtMjIgLSBtMTIgKiBtMjApICtcclxuICAgICAgICAgIG0wMiAqIChtMTAgKiBtMjEgLSBtMTEgKiBtMjApKTtcclxuXHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4M3gzID0gUmVjeWNsZXIucmV1c2UoTWF0cml4M3gzKTtcclxuICAgICAgbXR4UmVzdWx0LnNldChbXHJcbiAgICAgICAgZCAqIChtMTEgKiBtMjIgLSBtMjEgKiBtMTIpLCAvLyBbMF1cclxuICAgICAgICBkICogKG0wMiAqIG0yMSAtIG0wMSAqIG0yMiksIC8vIFsxXVxyXG4gICAgICAgIGQgKiAobTAxICogbTEyIC0gbTAyICogbTExKSwgLy8gWzJdXHJcbiAgICAgICAgZCAqIChtMTIgKiBtMjAgLSBtMTAgKiBtMjIpLCAvLyBbM11cclxuICAgICAgICBkICogKG0wMCAqIG0yMiAtIG0wMiAqIG0yMCksIC8vIFs0XVxyXG4gICAgICAgIGQgKiAobTEwICogbTAyIC0gbTAwICogbTEyKSwgLy8gWzVdXHJcbiAgICAgICAgZCAqIChtMTAgKiBtMjEgLSBtMjAgKiBtMTEpLCAvLyBbNl1cclxuICAgICAgICBkICogKG0yMCAqIG0wMSAtIG0wMCAqIG0yMSksIC8vIFs3XVxyXG4gICAgICAgIGQgKiAobTAwICogbTExIC0gbTEwICogbTAxKSAvLyBbOF1cclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiBtdHhSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IHJldHVybiBhIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdHJhbnNsYXRpb24ge0BsaW5rIFZlY3RvcjJ9LiAgXHJcbiAgICAgKiAqKkNhdXRpb24hKiogVXNlIGltbWVkaWF0ZWx5LCBzaW5jZSB0aGUgdmVjdG9yIGlzIGdvaW5nIHRvIGJlIHJldXNlZCBieSBSZWN5Y2xlci4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4IGlnbm9yaW5nIGl0cyByb3RhdGlvbiBhbmQgc2NhbGluZ1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHRyYW5zbGF0aW9uKCk6IFZlY3RvcjIge1xyXG4gICAgICBpZiAoIXRoaXMudmVjdG9ycy50cmFuc2xhdGlvbilcclxuICAgICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24gPSBuZXcgVmVjdG9yMih0aGlzLmRhdGFbNl0sIHRoaXMuZGF0YVs3XSk7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb247IC8vIC5jbG9uZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgdHJhbnNsYXRpb24oX3RyYW5zbGF0aW9uOiBWZWN0b3IyKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoX3RyYW5zbGF0aW9uLmdldCgpLCA2KTtcclxuICAgICAgLy8gbm8gZnVsbCBjYWNoZSByZXNldCByZXF1aXJlZFxyXG4gICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24gPSBfdHJhbnNsYXRpb247XHJcbiAgICAgIHRoaXMubXV0YXRvciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IGEgY29weSBvZiB0aGUgY2FsY3VsYXRlZCByb3RhdGlvbiB7QGxpbmsgVmVjdG9yMn0gICBcclxuICAgICAqIC0gc2V0OiBlZmZlY3QgdGhlIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJvdGF0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgIGlmICghdGhpcy52ZWN0b3JzLnJvdGF0aW9uKVxyXG4gICAgICAgIHRoaXMudmVjdG9ycy5yb3RhdGlvbiA9IHRoaXMuZ2V0RXVsZXJBbmdsZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcy52ZWN0b3JzLnJvdGF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCByb3RhdGlvbihfcm90YXRpb246IG51bWJlcikge1xyXG4gICAgICB0aGlzLm11dGF0ZSh7IFwicm90YXRpb25cIjogX3JvdGF0aW9uIH0pO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiAtIGdldDogcmV0dXJuIGEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzY2FsZSB7QGxpbmsgVmVjdG9yM30uICBcclxuICAgICAqICoqQ2F1dGlvbiEqKiBEbyBub3QgbWFuaXB1bGF0ZSByZXN1bHQsIGluc3RlYWQgY3JlYXRlIGEgY2xvbmUhICAgIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc2NhbGluZygpOiBWZWN0b3IyIHtcclxuICAgICAgaWYgKCF0aGlzLnZlY3RvcnMuc2NhbGluZylcclxuICAgICAgICB0aGlzLnZlY3RvcnMuc2NhbGluZyA9IG5ldyBWZWN0b3IyKFxyXG4gICAgICAgICAgTWF0aC5oeXBvdCh0aGlzLmRhdGFbMF0sIHRoaXMuZGF0YVsxXSkgKiAodGhpcy5kYXRhWzBdIDwgMCA/IC0xIDogMSksXHJcbiAgICAgICAgICBNYXRoLmh5cG90KHRoaXMuZGF0YVszXSwgdGhpcy5kYXRhWzRdKSAqICh0aGlzLmRhdGFbNF0gPCAwID8gLTEgOiAxKVxyXG4gICAgICAgICk7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlY3RvcnMuc2NhbGluZzsgLy8gLmNsb25lO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzY2FsaW5nKF9zY2FsaW5nOiBWZWN0b3IyKSB7XHJcbiAgICAgIHRoaXMubXV0YXRlKHsgXCJzY2FsaW5nXCI6IF9zY2FsaW5nIH0pO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBjbG9uZSBvZiB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBNYXRyaXgzeDMge1xyXG4gICAgICByZXR1cm4gUmVjeWNsZXIucmV1c2UoTWF0cml4M3gzKS5jb3B5KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBtYXRyaXggdG8gdGhlIGlkZW50aXR5LW1hdHJpeCBhbmQgY2xlYXJzIGNhY2hlLiBVc2VkIGJ5IHRoZSByZWN5Y2xlciB0byByZXNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KFtcclxuICAgICAgICAxLCAwLCAwLFxyXG4gICAgICAgIDAsIDEsIDAsXHJcbiAgICAgICAgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgbWF0cml4IHRvIHRoZSBpZGVudGl0eS1tYXRyaXggYW5kIGNsZWFycyBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnJlY3ljbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNsYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHRyYW5zbGF0aW9uIGJ5IHRoZSBnaXZlbiB7QGxpbmsgVmVjdG9yMn0gdG8gdGhpcyBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFuc2xhdGUoX2J5OiBWZWN0b3IyKTogTWF0cml4M3gzIHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXgzeDMgPSBNYXRyaXgzeDMuUFJPRFVDVCh0aGlzLCBNYXRyaXgzeDMuVFJBTlNMQVRJT04oX2J5KSk7XHJcbiAgICAgIC8vIFRPRE86IHBvc3NpYmxlIG9wdGltaXphdGlvbiwgdHJhbnNsYXRpb24gbWF5IGFsdGVyIG11dGF0b3IgaW5zdGVhZCBvZiBkZWxldGluZyBpdC5cclxuICAgICAgdGhpcy5zZXQobXR4UmVzdWx0LmRhdGEpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgeC1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlWChfeDogbnVtYmVyKTogTWF0cml4M3gzIHtcclxuICAgICAgdGhpcy5kYXRhWzZdICs9IF94O1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24gPSBudWxsO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgeS1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlWShfeTogbnVtYmVyKTogTWF0cml4M3gzIHtcclxuICAgICAgdGhpcy5kYXRhWzddICs9IF95O1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24gPSBudWxsO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBSb3RhdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgcm90YXRpb24gYXJvdW5kIHRoZSB6LUF4aXMgdG8gdGhpcyBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJvdGF0ZShfYW5nbGVJbkRlZ3JlZXM6IG51bWJlcik6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4M3gzID0gTWF0cml4M3gzLlBST0RVQ1QodGhpcywgTWF0cml4M3gzLlJPVEFUSU9OKF9hbmdsZUluRGVncmVlcykpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQuZGF0YSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFNjYWxpbmdcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHNjYWxpbmcgYnkgdGhlIGdpdmVuIHtAbGluayBWZWN0b3IyfSB0byB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlKF9ieTogVmVjdG9yMik6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4M3gzID0gTWF0cml4M3gzLlBST0RVQ1QodGhpcywgTWF0cml4M3gzLlNDQUxJTkcoX2J5KSk7XHJcbiAgICAgIHRoaXMuc2V0KG10eFJlc3VsdC5kYXRhKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4UmVzdWx0KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgc2NhbGluZyBhbG9uZyB0aGUgeC1BeGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGVYKF9ieTogbnVtYmVyKTogTWF0cml4M3gzIHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgdmVjdG9yLnNldChfYnksIDEpO1xyXG4gICAgICB0aGlzLnNjYWxlKHZlY3Rvcik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHZlY3Rvcik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHNjYWxpbmcgYWxvbmcgdGhlIHktQXhpcyB0byB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlWShfYnk6IG51bWJlcik6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGxldCB2ZWN0b3I6IFZlY3RvcjIgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMik7XHJcbiAgICAgIHZlY3Rvci5zZXQoMSwgX2J5KTtcclxuICAgICAgdGhpcy5zY2FsZSh2ZWN0b3IpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh2ZWN0b3IpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2Zvcm1hdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdWx0aXBseSB0aGlzIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIG11bHRpcGx5KF9tdHhSaWdodDogTWF0cml4M3gzKTogTWF0cml4M3gzIHtcclxuICAgICAgbGV0IG10eFJlc3VsdDogTWF0cml4M3gzID0gTWF0cml4M3gzLlBST0RVQ1QodGhpcywgX210eFJpZ2h0KTtcclxuICAgICAgdGhpcy5zZXQobXR4UmVzdWx0LmRhdGEpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSBldWxlci1hbmdsZXMgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHJvdGF0aW9uIG9mIHRoaXMgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFdWxlckFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICAgIGxldCBzY2FsaW5nOiBWZWN0b3IyID0gdGhpcy5zY2FsaW5nO1xyXG5cclxuICAgICAgbGV0IHMwOiBudW1iZXIgPSB0aGlzLmRhdGFbMF0gLyBzY2FsaW5nLng7XHJcbiAgICAgIGxldCBzMTogbnVtYmVyID0gdGhpcy5kYXRhWzFdIC8gc2NhbGluZy54O1xyXG4gICAgICBsZXQgczM6IG51bWJlciA9IHRoaXMuZGF0YVszXSAvIHNjYWxpbmcueTtcclxuICAgICAgbGV0IHM0OiBudW1iZXIgPSB0aGlzLmRhdGFbNF0gLyBzY2FsaW5nLnk7XHJcblxyXG4gICAgICBsZXQgeFNrZXc6IG51bWJlciA9IE1hdGguYXRhbjIoLXMzLCBzNCk7XHJcbiAgICAgIGxldCB5U2tldzogbnVtYmVyID0gTWF0aC5hdGFuMihzMCwgczEpO1xyXG5cclxuICAgICAgbGV0IHN5OiBudW1iZXIgPSBNYXRoLmh5cG90KHMwLCBzMSk7IC8vIHByb2JhYmx5IDIuIHBhcmFtIHNob3VsZCBiZSB0aGlzLmRhdGFbNF0gLyBzY2FsaW5nLnlcclxuICAgICAgbGV0IHJvdGF0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgICBpZiAoIShzeSA+IDFlLTYpKVxyXG4gICAgICAgIHJvdGF0aW9uID0geVNrZXc7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByb3RhdGlvbiA9IHhTa2V3O1xyXG5cclxuICAgICAgcm90YXRpb24gKj0gQ2FsYy5yYWQyZGVnO1xyXG5cclxuICAgICAgcmV0dXJuIHJvdGF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZWxlbWVudHMgb2YgdGhpcyBtYXRyaXggdG8gdGhlIGdpdmVuIGFycmF5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0KF9hcnJheTogQXJyYXlMaWtlPG51bWJlcj4pOiBNYXRyaXgzeDMge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF9hcnJheSk7XHJcbiAgICAgIHRoaXMucmVzZXRDYWNoZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvcGllcyB0aGUgZWxlbWVudHMgb2YgdGhlIGdpdmVuIG1hdHJpeCBpbnRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29weShfb3JpZ2luYWw6IE1hdHJpeDN4Myk6IE1hdHJpeDN4MyB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoX29yaWdpbmFsLmRhdGEpO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTsgLy8gVE9ETzogZm9yIG5vdyByZXNldCB0aGUgY2FjaGUsIGFzIGkgaGF2ZSBubyBpZGVhIGhvdyB0aGUgY2FjaGluZyB3b3JrcyBmb3IgbWF0cml4M3gzLlxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYMaSLk1hdHJpeDN4Myh0cmFuc2xhdGlvbjogJHt0aGlzLnRyYW5zbGF0aW9uLnRvU3RyaW5nKCl9LCByb3RhdGlvbjogJHt0aGlzLnJvdGF0aW9uLnRvU3RyaW5nKCl9LCBzY2FsaW5nOiAke3RoaXMuc2NhbGluZy50b1N0cmluZygpfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyBvZiB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIC8vIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICB0cmFuc2xhdGlvbjogdGhpcy50cmFuc2xhdGlvbi5zZXJpYWxpemUoKSxcclxuICAgICAgICByb3RhdGlvbjogdGhpcy5yb3RhdGlvbixcclxuICAgICAgICBzY2FsaW5nOiB0aGlzLnNjYWxpbmcuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHtcclxuICAgICAgICB0cmFuc2xhdGlvbjogYXdhaXQgdGhpcy50cmFuc2xhdGlvbi5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi50cmFuc2xhdGlvbiksXHJcbiAgICAgICAgcm90YXRpb246IF9zZXJpYWxpemF0aW9uLnJvdGF0aW9uLFxyXG4gICAgICAgIHNjYWxpbmc6IGF3YWl0IHRoaXMuc2NhbGluZy5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5zY2FsaW5nKVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLm11dGF0ZShtdXRhdG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGlmICh0aGlzLm11dGF0b3IpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRvcjtcclxuXHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIHRyYW5zbGF0aW9uOiB0aGlzLnRyYW5zbGF0aW9uLmdldE11dGF0b3IoKSxcclxuICAgICAgICByb3RhdGlvbjogdGhpcy5yb3RhdGlvbixcclxuICAgICAgICBzY2FsaW5nOiB0aGlzLnNjYWxpbmcuZ2V0TXV0YXRvcigpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBjYWNoZSBtdXRhdG9yXHJcbiAgICAgIHRoaXMubXV0YXRvciA9IG11dGF0b3I7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IG9sZFRyYW5zbGF0aW9uOiBWZWN0b3IyID0gdGhpcy50cmFuc2xhdGlvbjtcclxuICAgICAgbGV0IG9sZFJvdGF0aW9uOiBudW1iZXIgPSB0aGlzLnJvdGF0aW9uO1xyXG4gICAgICBsZXQgb2xkU2NhbGluZzogVmVjdG9yMiA9IHRoaXMuc2NhbGluZztcclxuICAgICAgbGV0IG5ld1RyYW5zbGF0aW9uOiBWZWN0b3IyID0gPFZlY3RvcjI+X211dGF0b3JbXCJ0cmFuc2xhdGlvblwiXTtcclxuICAgICAgbGV0IG5ld1JvdGF0aW9uOiBudW1iZXIgPSA8bnVtYmVyPl9tdXRhdG9yW1wicm90YXRpb25cIl07XHJcbiAgICAgIGxldCBuZXdTY2FsaW5nOiBWZWN0b3IyID0gPFZlY3RvcjI+X211dGF0b3JbXCJzY2FsaW5nXCJdO1xyXG4gICAgICBsZXQgdmVjdG9yczogVmVjdG9yUmVwcmVzZW50YXRpb24gPSB7IHRyYW5zbGF0aW9uOiBvbGRUcmFuc2xhdGlvbiwgcm90YXRpb246IG9sZFJvdGF0aW9uLCBzY2FsaW5nOiBvbGRTY2FsaW5nIH07XHJcbiAgICAgIGlmIChuZXdUcmFuc2xhdGlvbikge1xyXG4gICAgICAgIHZlY3RvcnMudHJhbnNsYXRpb24gPSBuZXcgVmVjdG9yMihcclxuICAgICAgICAgIG5ld1RyYW5zbGF0aW9uLnggIT0gdW5kZWZpbmVkID8gbmV3VHJhbnNsYXRpb24ueCA6IG9sZFRyYW5zbGF0aW9uLngsXHJcbiAgICAgICAgICBuZXdUcmFuc2xhdGlvbi55ICE9IHVuZGVmaW5lZCA/IG5ld1RyYW5zbGF0aW9uLnkgOiBvbGRUcmFuc2xhdGlvbi55XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmVjdG9ycy5yb3RhdGlvbiA9IChuZXdSb3RhdGlvbiA9PSB1bmRlZmluZWQpID8gb2xkUm90YXRpb24gOiBuZXdSb3RhdGlvbjtcclxuXHJcbiAgICAgIGlmIChuZXdTY2FsaW5nKSB7XHJcbiAgICAgICAgdmVjdG9ycy5zY2FsaW5nID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgICBuZXdTY2FsaW5nLnggIT0gdW5kZWZpbmVkID8gbmV3U2NhbGluZy54IDogb2xkU2NhbGluZy54LFxyXG4gICAgICAgICAgbmV3U2NhbGluZy55ICE9IHVuZGVmaW5lZCA/IG5ld1NjYWxpbmcueSA6IG9sZFNjYWxpbmcueVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRPRE86IHBvc3NpYmxlIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB3aGVuIG9ubHkgb25lIG9yIHR3byBjb21wb25lbnRzIGNoYW5nZSwgdGhlbiB1c2Ugb2xkIG1hdHJpeCBpbnN0ZWFkIG9mIElERU5USVRZIGFuZCB0cmFuc2Zvcm0gYnkgZGlmZmVyZW5jZXMvcXVvdGllbnRzXHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IE1hdHJpeDN4My5JREVOVElUWSgpO1xyXG4gICAgICBpZiAodmVjdG9ycy50cmFuc2xhdGlvbilcclxuICAgICAgICBtdHhSZXN1bHQudHJhbnNsYXRlKHZlY3RvcnMudHJhbnNsYXRpb24pO1xyXG4gICAgICBpZiAodmVjdG9ycy5yb3RhdGlvbikge1xyXG4gICAgICAgIG10eFJlc3VsdC5yb3RhdGUodmVjdG9ycy5yb3RhdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHZlY3RvcnMuc2NhbGluZylcclxuICAgICAgICBtdHhSZXN1bHQuc2NhbGUodmVjdG9ycy5zY2FsaW5nKTtcclxuICAgICAgdGhpcy5zZXQobXR4UmVzdWx0LmRhdGEpO1xyXG5cclxuICAgICAgdGhpcy52ZWN0b3JzID0gdmVjdG9ycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSB7fTtcclxuICAgICAgaWYgKF9tdXRhdG9yLnRyYW5zbGF0aW9uKSB0eXBlcy50cmFuc2xhdGlvbiA9IFwiVmVjdG9yMlwiO1xyXG4gICAgICBpZiAoX211dGF0b3Iucm90YXRpb24gIT0gdW5kZWZpbmVkKSB0eXBlcy5yb3RhdGlvbiA9IFwibnVtYmVyXCI7XHJcbiAgICAgIGlmIChfbXV0YXRvci5zY2FsaW5nKSB0eXBlcy5zY2FsaW5nID0gXCJWZWN0b3IyXCI7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7LyoqICovIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0Q2FjaGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMudmVjdG9ycyA9IHsgdHJhbnNsYXRpb246IG51bGwsIHJvdGF0aW9uOiBudWxsLCBzY2FsaW5nOiBudWxsIH07XHJcbiAgICAgIHRoaXMubXV0YXRvciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcmVzIGEgNHg0IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBhbmQgcHJvdmlkZXMgb3BlcmF0aW9ucyBmb3IgaXQuXHJcbiAgICogYGBgdGV4dFxyXG4gICAqIFsgMCwgMSwgMiwgMyBdIOKGkCByb3cgdmVjdG9yIHhcclxuICAgKiBbIDQsIDUsIDYsIDcgXSDihpAgcm93IHZlY3RvciB5XHJcbiAgICogWyA4LCA5LDEwLDExIF0g4oaQIHJvdyB2ZWN0b3IgelxyXG4gICAqIFsxMiwxMywxNCwxNSBdIOKGkCB0cmFuc2xhdGlvblxyXG4gICAqICAgICAgICAgICAg4oaRICBob21vZ2VuZW91cyBjb2x1bW5cclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBKYXNjaGEgS2FyYWfDtmwsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5IHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1hdHJpeDR4NCBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUsIFJlY3ljYWJsZSB7XHJcbiAgICBwcml2YXRlIGRhdGE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpOyAvLyBUaGUgZGF0YSBvZiB0aGUgbWF0cml4LlxyXG4gICAgcHJpdmF0ZSBtdXRhdG9yOiBNdXRhdG9yID0gbnVsbDsgLy8gcHJlcGFyZWQgZm9yIG9wdGltaXphdGlvbiwga2VlcCBtdXRhdG9yIHRvIHJlZHVjZSByZWR1bmRhbnQgY2FsY3VsYXRpb24gYW5kIGZvciBjb21wYXJpc29uLiBTZXQgdG8gbnVsbCB3aGVuIGRhdGEgY2hhbmdlcyFcclxuXHJcbiAgICByZWFkb25seSAjdHJhbnNsYXRpb246IFZlY3RvcjMgPSBWZWN0b3IzLlpFUk8oKTtcclxuICAgIHJlYWRvbmx5ICNzY2FsaW5nOiBWZWN0b3IzID0gVmVjdG9yMy5aRVJPKCk7XHJcbiAgICByZWFkb25seSAjcm90YXRpb246IFZlY3RvcjMgPSBWZWN0b3IzLk9ORSgpO1xyXG4gICAgcmVhZG9ubHkgI3F1YXRlcm5pb246IFF1YXRlcm5pb24gPSBRdWF0ZXJuaW9uLklERU5USVRZKCk7XHJcblxyXG4gICAgI3RyYW5zbGF0aW9uRGlydHk6IGJvb2xlYW47XHJcbiAgICAjc2NhbGluZ0RpcnR5OiBib29sZWFuO1xyXG4gICAgI3JvdGF0aW9uRGlydHk6IGJvb2xlYW47XHJcbiAgICAjcXVhdGVybmlvbkRpcnR5OiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5yZWN5Y2xlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFNUQVRJQ1NcclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgYSBuZXcgaWRlbnRpdHkgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgSURFTlRJVFkoKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvc2VzIGEgbmV3IG1hdHJpeCBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGluZy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBDT01QT1NJVElPTihfdHJhbnNsYXRpb24/OiBWZWN0b3IzLCBfcm90YXRpb24/OiBWZWN0b3IzIHwgUXVhdGVybmlvbiwgX3NjYWxpbmc/OiBWZWN0b3IzKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHJlc3VsdDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcbiAgICAgIHJlc3VsdC5tdXRhdGUoeyBcInRyYW5zbGF0aW9uXCI6IF90cmFuc2xhdGlvbiwgXCJyb3RhdGlvblwiOiBfcm90YXRpb24sIFwic2NhbGluZ1wiOiBfc2NhbGluZyB9KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBwcm9kdWN0IG9mIHR3byBwYXNzZWQgbWF0cmljZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUFJPRFVDVChfbXR4TGVmdDogTWF0cml4NHg0LCBfbXR4UmlnaHQ6IE1hdHJpeDR4NCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBhOiBGbG9hdDMyQXJyYXkgPSBfbXR4TGVmdC5kYXRhO1xyXG4gICAgICBsZXQgYjogRmxvYXQzMkFycmF5ID0gX210eFJpZ2h0LmRhdGE7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gUmVjeWNsZXIucmV1c2UoTWF0cml4NHg0KTtcclxuICAgICAgbGV0IGEwMDogbnVtYmVyID0gYVswICogNCArIDBdO1xyXG4gICAgICBsZXQgYTAxOiBudW1iZXIgPSBhWzAgKiA0ICsgMV07XHJcbiAgICAgIGxldCBhMDI6IG51bWJlciA9IGFbMCAqIDQgKyAyXTtcclxuICAgICAgbGV0IGEwMzogbnVtYmVyID0gYVswICogNCArIDNdO1xyXG4gICAgICBsZXQgYTEwOiBudW1iZXIgPSBhWzEgKiA0ICsgMF07XHJcbiAgICAgIGxldCBhMTE6IG51bWJlciA9IGFbMSAqIDQgKyAxXTtcclxuICAgICAgbGV0IGExMjogbnVtYmVyID0gYVsxICogNCArIDJdO1xyXG4gICAgICBsZXQgYTEzOiBudW1iZXIgPSBhWzEgKiA0ICsgM107XHJcbiAgICAgIGxldCBhMjA6IG51bWJlciA9IGFbMiAqIDQgKyAwXTtcclxuICAgICAgbGV0IGEyMTogbnVtYmVyID0gYVsyICogNCArIDFdO1xyXG4gICAgICBsZXQgYTIyOiBudW1iZXIgPSBhWzIgKiA0ICsgMl07XHJcbiAgICAgIGxldCBhMjM6IG51bWJlciA9IGFbMiAqIDQgKyAzXTtcclxuICAgICAgbGV0IGEzMDogbnVtYmVyID0gYVszICogNCArIDBdO1xyXG4gICAgICBsZXQgYTMxOiBudW1iZXIgPSBhWzMgKiA0ICsgMV07XHJcbiAgICAgIGxldCBhMzI6IG51bWJlciA9IGFbMyAqIDQgKyAyXTtcclxuICAgICAgbGV0IGEzMzogbnVtYmVyID0gYVszICogNCArIDNdO1xyXG4gICAgICBsZXQgYjAwOiBudW1iZXIgPSBiWzAgKiA0ICsgMF07XHJcbiAgICAgIGxldCBiMDE6IG51bWJlciA9IGJbMCAqIDQgKyAxXTtcclxuICAgICAgbGV0IGIwMjogbnVtYmVyID0gYlswICogNCArIDJdO1xyXG4gICAgICBsZXQgYjAzOiBudW1iZXIgPSBiWzAgKiA0ICsgM107XHJcbiAgICAgIGxldCBiMTA6IG51bWJlciA9IGJbMSAqIDQgKyAwXTtcclxuICAgICAgbGV0IGIxMTogbnVtYmVyID0gYlsxICogNCArIDFdO1xyXG4gICAgICBsZXQgYjEyOiBudW1iZXIgPSBiWzEgKiA0ICsgMl07XHJcbiAgICAgIGxldCBiMTM6IG51bWJlciA9IGJbMSAqIDQgKyAzXTtcclxuICAgICAgbGV0IGIyMDogbnVtYmVyID0gYlsyICogNCArIDBdO1xyXG4gICAgICBsZXQgYjIxOiBudW1iZXIgPSBiWzIgKiA0ICsgMV07XHJcbiAgICAgIGxldCBiMjI6IG51bWJlciA9IGJbMiAqIDQgKyAyXTtcclxuICAgICAgbGV0IGIyMzogbnVtYmVyID0gYlsyICogNCArIDNdO1xyXG4gICAgICBsZXQgYjMwOiBudW1iZXIgPSBiWzMgKiA0ICsgMF07XHJcbiAgICAgIGxldCBiMzE6IG51bWJlciA9IGJbMyAqIDQgKyAxXTtcclxuICAgICAgbGV0IGIzMjogbnVtYmVyID0gYlszICogNCArIDJdO1xyXG4gICAgICBsZXQgYjMzOiBudW1iZXIgPSBiWzMgKiA0ICsgM107XHJcbiAgICAgIG10eFJlc3VsdC5zZXQoW1xyXG4gICAgICAgIGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMCArIGIwMyAqIGEzMCxcclxuICAgICAgICBiMDAgKiBhMDEgKyBiMDEgKiBhMTEgKyBiMDIgKiBhMjEgKyBiMDMgKiBhMzEsXHJcbiAgICAgICAgYjAwICogYTAyICsgYjAxICogYTEyICsgYjAyICogYTIyICsgYjAzICogYTMyLFxyXG4gICAgICAgIGIwMCAqIGEwMyArIGIwMSAqIGExMyArIGIwMiAqIGEyMyArIGIwMyAqIGEzMyxcclxuICAgICAgICBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjAgKyBiMTMgKiBhMzAsXHJcbiAgICAgICAgYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxICsgYjEzICogYTMxLFxyXG4gICAgICAgIGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMiArIGIxMyAqIGEzMixcclxuICAgICAgICBiMTAgKiBhMDMgKyBiMTEgKiBhMTMgKyBiMTIgKiBhMjMgKyBiMTMgKiBhMzMsXHJcbiAgICAgICAgYjIwICogYTAwICsgYjIxICogYTEwICsgYjIyICogYTIwICsgYjIzICogYTMwLFxyXG4gICAgICAgIGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMSArIGIyMyAqIGEzMSxcclxuICAgICAgICBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjIgKyBiMjMgKiBhMzIsXHJcbiAgICAgICAgYjIwICogYTAzICsgYjIxICogYTEzICsgYjIyICogYTIzICsgYjIzICogYTMzLFxyXG4gICAgICAgIGIzMCAqIGEwMCArIGIzMSAqIGExMCArIGIzMiAqIGEyMCArIGIzMyAqIGEzMCxcclxuICAgICAgICBiMzAgKiBhMDEgKyBiMzEgKiBhMTEgKyBiMzIgKiBhMjEgKyBiMzMgKiBhMzEsXHJcbiAgICAgICAgYjMwICogYTAyICsgYjMxICogYTEyICsgYjMyICogYTIyICsgYjMzICogYTMyLFxyXG4gICAgICAgIGIzMCAqIGEwMyArIGIzMSAqIGExMyArIGIzMiAqIGEyMyArIGIzMyAqIGEzM1xyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSB0cmFuc3Bvc2Ugb2YgYSBwYXNzZWQgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFRSQU5TUE9TRShfbXR4OiBNYXRyaXg0eDQpOiBNYXRyaXg0eDQge1xyXG4gICAgICByZXR1cm4gX210eC5jbG9uZS50cmFuc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBpbnZlcnNlIG9mIGEgcGFzc2VkIG1hdHJpeC5cclxuICAgICAqIEBwYXJhbSBfbXR4IFRoZSBtYXRyaXggdG8gY29tcHV0ZSB0aGUgaW52ZXJzZSBvZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBJTlZFUlNFKF9tdHg6IE1hdHJpeDR4NCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIHJldHVybiBfbXR4LmNsb25lLmludmVydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgYSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gdHJhbnNsYXRpb24sIGl0cyB6LWF4aXMgcG9pbnRpbmcgZGlyZWN0bHkgYXQgdGhlIGdpdmVuIHRhcmdldCxcclxuICAgICAqIGFuZCBhIG1pbmltYWwgYW5nbGUgYmV0d2VlbiBpdHMgeS1heGlzIGFuZCB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9LCByZXNwZXRpdmVseSBjYWxjdWxhdGluZyB5YXcgYW5kIHBpdGNoLlxyXG4gICAgICogVGhlIHBpdGNoIG1heSBiZSByZXN0cmljdGVkIHRvIHRoZSB1cC12ZWN0b3IgdG8gb25seSBjYWxjdWxhdGUgeWF3LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIExPT0tfQVQoX3RyYW5zbGF0aW9uOiBWZWN0b3IzLCBfdGFyZ2V0OiBWZWN0b3IzLCBfdXA6IFZlY3RvcjMgPSBWZWN0b3IzLlkoKSwgX3Jlc3RyaWN0OiBib29sZWFuID0gZmFsc2UpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgekF4aXM6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX3RhcmdldCwgX3RyYW5zbGF0aW9uKTtcclxuICAgICAgekF4aXMubm9ybWFsaXplKCk7XHJcbiAgICAgIGxldCB2Y3RDcm9zczogVmVjdG9yMyA9IFZlY3RvcjMuQ1JPU1MoX3VwLCB6QXhpcyk7XHJcbiAgICAgIGlmICh2Y3RDcm9zcy5tYWduaXR1ZGVTcXVhcmVkID09IDApIC8vIGV4cGVyaW1lbnRhbCB3b3JrYXJvdW5kOiBpZiB6IGFuZCB1cCBpcyBwYXJhbGxlbCwgdGhlcmUgaXMgbm8gdXAgdG8gcmVtYWluLi4uXHJcbiAgICAgICAgdmN0Q3Jvc3MueCA9IDAuMDAxOyAvLyBzbyB0aWx0IGEgbGl0dGxlXHJcbiAgICAgIGxldCB4QXhpczogVmVjdG9yMyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTih2Y3RDcm9zcyk7XHJcbiAgICAgIGxldCB5QXhpczogVmVjdG9yMyA9IF9yZXN0cmljdCA/IF91cCA6IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHpBeGlzLCB4QXhpcykpO1xyXG4gICAgICB6QXhpcyA9IF9yZXN0cmljdCA/IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHhBeGlzLCBfdXApKSA6IHpBeGlzO1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLnJldXNlKE1hdHJpeDR4NCk7XHJcbiAgICAgIG10eFJlc3VsdC5zZXQoW1xyXG4gICAgICAgIHhBeGlzLngsIHhBeGlzLnksIHhBeGlzLnosIDAsXHJcbiAgICAgICAgeUF4aXMueCwgeUF4aXMueSwgeUF4aXMueiwgMCxcclxuICAgICAgICB6QXhpcy54LCB6QXhpcy55LCB6QXhpcy56LCAwLFxyXG4gICAgICAgIF90cmFuc2xhdGlvbi54LFxyXG4gICAgICAgIF90cmFuc2xhdGlvbi55LFxyXG4gICAgICAgIF90cmFuc2xhdGlvbi56LFxyXG4gICAgICAgIDFcclxuICAgICAgXSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlTXVsdGlwbGUoekF4aXMsIHhBeGlzLCB5QXhpcywgdmN0Q3Jvc3MpO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgYSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gdHJhbnNsYXRpb24sIGl0cyB6LWF4aXMgcG9pbnRpbmcgZGlyZWN0bHkgaW4gdGhlIGdpdmVuIGRpcmVjdGlvbixcclxuICAgICAqIGFuZCBhIG1pbmltYWwgYW5nbGUgYmV0d2VlbiBpdHMgeS1heGlzIGFuZCB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9LiBJZGVhbGx5IHVwIHNob3VsZCBiZSBwZXJwZW5kaWN1bGFyIHRvIHRoZSBnaXZlbiBkaXJlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgTE9PS19JTihfdHJhbnNsYXRpb246IFZlY3RvcjMsIF9kaXJlY3Rpb246IFZlY3RvcjMsIF91cDogVmVjdG9yMyA9IFZlY3RvcjMuWSgpKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHpBeGlzOiBWZWN0b3IzID0gVmVjdG9yMy5OT1JNQUxJWkFUSU9OKF9kaXJlY3Rpb24pO1xyXG4gICAgICBsZXQgeEF4aXM6IFZlY3RvcjMgPSBWZWN0b3IzLk5PUk1BTElaQVRJT04oVmVjdG9yMy5DUk9TUyhfdXAsIHpBeGlzKSk7XHJcbiAgICAgIGxldCB5QXhpczogVmVjdG9yMyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHpBeGlzLCB4QXhpcykpO1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLnJldXNlKE1hdHJpeDR4NCk7XHJcbiAgICAgIG10eFJlc3VsdC5zZXQoW1xyXG4gICAgICAgIHhBeGlzLngsIHhBeGlzLnksIHhBeGlzLnosIDAsXHJcbiAgICAgICAgeUF4aXMueCwgeUF4aXMueSwgeUF4aXMueiwgMCxcclxuICAgICAgICB6QXhpcy54LCB6QXhpcy55LCB6QXhpcy56LCAwLFxyXG4gICAgICAgIF90cmFuc2xhdGlvbi54LCBfdHJhbnNsYXRpb24ueSwgX3RyYW5zbGF0aW9uLnosIDFcclxuICAgICAgXSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlTXVsdGlwbGUoekF4aXMsIHhBeGlzLCB5QXhpcyk7XHJcbiAgICAgIHJldHVybiBtdHhSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyBhIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiB0cmFuc2xhdGlvbiwgaXRzIHktYXhpcyBtYXRjaGluZyB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9XHJcbiAgICAgKiBhbmQgaXRzIHotYXhpcyBmYWNpbmcgdG93YXJkcyB0aGUgZ2l2ZW4gdGFyZ2V0IGF0IGEgbWluaW1hbCBhbmdsZSwgcmVzcGV0aXZlbHkgY2FsY3VsYXRpbmcgeWF3IG9ubHkuXHJcbiAgICAgKi9cclxuICAgIC8vIHB1YmxpYyBzdGF0aWMgU0hPV19UTyhfdHJhbnNsYXRpb246IFZlY3RvcjMsIF90YXJnZXQ6IFZlY3RvcjMsIF91cDogVmVjdG9yMyA9IFZlY3RvcjMuWSgpKTogTWF0cml4NHg0IHtcclxuICAgIC8vICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgIC8vICAgbGV0IHpBeGlzOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKF90YXJnZXQsIF90cmFuc2xhdGlvbik7XHJcbiAgICAvLyAgIHpBeGlzLm5vcm1hbGl6ZSgpO1xyXG4gICAgLy8gICBsZXQgeEF4aXM6IFZlY3RvcjMgPSBWZWN0b3IzLk5PUk1BTElaQVRJT04oVmVjdG9yMy5DUk9TUyhfdXAsIHpBeGlzKSk7XHJcbiAgICAvLyAgIC8vIGxldCB5QXhpczogVmVjdG9yMyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHpBeGlzLCB4QXhpcykpO1xyXG4gICAgLy8gICB6QXhpcyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHhBeGlzLCBfdXApKTtcclxuICAgIC8vICAgbXR4UmVzdWx0LmRhdGEuc2V0KFxyXG4gICAgLy8gICAgIFtcclxuICAgIC8vICAgICAgIHhBeGlzLngsIHhBeGlzLnksIHhBeGlzLnosIDAsXHJcbiAgICAvLyAgICAgICBfdXAueCwgX3VwLnksIF91cC56LCAwLFxyXG4gICAgLy8gICAgICAgekF4aXMueCwgekF4aXMueSwgekF4aXMueiwgMCxcclxuICAgIC8vICAgICAgIF90cmFuc2xhdGlvbi54LFxyXG4gICAgLy8gICAgICAgX3RyYW5zbGF0aW9uLnksXHJcbiAgICAvLyAgICAgICBfdHJhbnNsYXRpb24ueixcclxuICAgIC8vICAgICAgIDFcclxuICAgIC8vICAgICBdKTtcclxuICAgIC8vICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCB0cmFuc2xhdGVzIGNvb3JkaW5hdGVzIGFsb25nIHRoZSB4LSwgeS0gYW5kIHotYXhpcyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHtAbGluayBWZWN0b3IzfS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBUUkFOU0xBVElPTihfdHJhbnNsYXRlOiBWZWN0b3IzKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5yZXVzZShNYXRyaXg0eDQpO1xyXG4gICAgICBtdHhSZXN1bHQuc2V0KFtcclxuICAgICAgICAxLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIDEsIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgMSwgMCxcclxuICAgICAgICBfdHJhbnNsYXRlLngsIF90cmFuc2xhdGUueSwgX3RyYW5zbGF0ZS56LCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHJvdGF0ZXMgY29vcmRpbmF0ZXMgb24gdGhlIHgtYXhpcyB3aGVuIG11bHRpcGxpZWQgYnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUk9UQVRJT05fWChfYW5nbGVJbkRlZ3JlZXM6IG51bWJlcik6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gUmVjeWNsZXIucmV1c2UoTWF0cml4NHg0KTtcclxuICAgICAgbGV0IGFuZ2xlSW5SYWRpYW5zOiBudW1iZXIgPSBfYW5nbGVJbkRlZ3JlZXMgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICAgIGxldCBzaW46IG51bWJlciA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgbGV0IGNvczogbnVtYmVyID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICBtdHhSZXN1bHQuc2V0KFtcclxuICAgICAgICAxLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIGNvcywgc2luLCAwLFxyXG4gICAgICAgIDAsIC1zaW4sIGNvcywgMCxcclxuICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHJvdGF0ZXMgY29vcmRpbmF0ZXMgb24gdGhlIHktYXhpcyB3aGVuIG11bHRpcGxpZWQgYnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUk9UQVRJT05fWShfYW5nbGVJbkRlZ3JlZXM6IG51bWJlcik6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLnJldXNlKE1hdHJpeDR4NCk7XHJcbiAgICAgIGxldCBhbmdsZUluUmFkaWFuczogbnVtYmVyID0gX2FuZ2xlSW5EZWdyZWVzICogQ2FsYy5kZWcycmFkO1xyXG4gICAgICBsZXQgc2luOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgIGxldCBjb3M6IG51bWJlciA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgbXR4UmVzdWx0LnNldChbXHJcbiAgICAgICAgY29zLCAwLCAtc2luLCAwLFxyXG4gICAgICAgIDAsIDEsIDAsIDAsXHJcbiAgICAgICAgc2luLCAwLCBjb3MsIDAsXHJcbiAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGNvb3JkaW5hdGVzIG9uIHRoZSB6LWF4aXMgd2hlbiBtdWx0aXBsaWVkIGJ5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPVEFUSU9OX1ooX2FuZ2xlSW5EZWdyZWVzOiBudW1iZXIpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLnJldXNlKE1hdHJpeDR4NCk7XHJcbiAgICAgIGxldCBhbmdsZUluUmFkaWFuczogbnVtYmVyID0gX2FuZ2xlSW5EZWdyZWVzICogQ2FsYy5kZWcycmFkO1xyXG4gICAgICBsZXQgc2luOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgIGxldCBjb3M6IG51bWJlciA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgbXR4UmVzdWx0LnNldChbXHJcbiAgICAgICAgY29zLCBzaW4sIDAsIDAsXHJcbiAgICAgICAgLXNpbiwgY29zLCAwLCAwLFxyXG4gICAgICAgIDAsIDAsIDEsIDAsXHJcbiAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGNvb3JkaW5hdGVzIHdoZW4gbXVsdGlwbGllZCBieSwgdXNpbmcgdGhlIHJvdGF0aW9uIGV1bGVyIGFuZ2xlcyBvciB1bml0IHF1YXRlcm5pb24gZ2l2ZW4uXHJcbiAgICAgKiBSb3RhdGlvbiBvY2N1cnMgYXJvdW5kIHRoZSBheGlzIGluIHRoZSBvcmRlciBaLVktWCAuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUk9UQVRJT04oX3JvdGF0aW9uOiBWZWN0b3IzIHwgUXVhdGVybmlvbik6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gUmVjeWNsZXIuZ2V0KE1hdHJpeDR4NCk7XHJcbiAgICAgIE1hdHJpeDR4NC5zZXRSb3RhdGlvbihtdHhSZXN1bHQuZGF0YSwgX3JvdGF0aW9uKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCBzY2FsZXMgY29vcmRpbmF0ZXMgYWxvbmcgdGhlIHgtLCB5LSBhbmQgei1heGlzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4ge0BsaW5rIFZlY3RvcjN9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgU0NBTElORyhfc2NhbGFyOiBWZWN0b3IzKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5yZXVzZShNYXRyaXg0eDQpO1xyXG4gICAgICBtdHhSZXN1bHQuc2V0KFtcclxuICAgICAgICBfc2NhbGFyLngsIDAsIDAsIDAsXHJcbiAgICAgICAgMCwgX3NjYWxhci55LCAwLCAwLFxyXG4gICAgICAgIDAsIDAsIF9zY2FsYXIueiwgMCxcclxuICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBtYXRyaXggcmVsYXRpdmUgdG8gdGhlIGdpdmVuIGJhc2UuXHJcbiAgICAgKiBJZiBrbm93biwgcGFzcyB0aGUgaW52ZXJzZSBvZiB0aGUgYmFzZSB0byBhdm9pZCB1bm5lY2Nlc2FyeSBjYWxjdWxhdGlvbiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBSRUxBVElWRShfbXR4OiBNYXRyaXg0eDQsIF9tdHhCYXNlOiBNYXRyaXg0eDQsIF9tdHhJbnZlcnNlPzogTWF0cml4NHg0KTogTWF0cml4NHg0IHtcclxuICAgICAgaWYgKF9tdHhJbnZlcnNlKVxyXG4gICAgICAgIHJldHVybiBNYXRyaXg0eDQuUFJPRFVDVChfbXR4SW52ZXJzZSwgX210eCk7XHJcblxyXG4gICAgICBsZXQgbXR4SW52ZXJzZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LklOVkVSU0UoX210eEJhc2UpO1xyXG4gICAgICBsZXQgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUFJPRFVDVChtdHhJbnZlcnNlLCBfbXR4KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4SW52ZXJzZSk7XHJcbiAgICAgIHJldHVybiBtdHhSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gUFJPSkVDVElPTlNcclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgYSBtYXRyaXggdGhhdCBhcHBsaWVzIHBlcnNwZWN0aXZlIHRvIGFuIG9iamVjdCwgaWYgaXRzIHRyYW5zZm9ybSBpcyBtdWx0aXBsaWVkIGJ5IGl0LlxyXG4gICAgICogQHBhcmFtIF9hc3BlY3QgVGhlIGFzcGVjdCByYXRpbyBiZXR3ZWVuIHdpZHRoIGFuZCBoZWlnaHQgb2YgcHJvamVjdGlvbnNwYWNlLihEZWZhdWx0ID0gY2FudmFzLmNsaWVudFdpZHRoIC8gY2FudmFzLkNsaWVudEhlaWdodClcclxuICAgICAqIEBwYXJhbSBfZmllbGRPZlZpZXdJbkRlZ3JlZXMgVGhlIGZpZWxkIG9mIHZpZXcgaW4gRGVncmVlcy4gKERlZmF1bHQgPSA0NSlcclxuICAgICAqIEBwYXJhbSBfbmVhciBUaGUgbmVhciBjbGlwc3BhY2UgYm9yZGVyIG9uIHRoZSB6LWF4aXMuXHJcbiAgICAgKiBAcGFyYW0gX2ZhciBUaGUgZmFyIGNsaXBzcGFjZSBib3JkZXIgb24gdGhlIHotYXhpcy5cclxuICAgICAqIEBwYXJhbSBfZGlyZWN0aW9uIFRoZSBwbGFuZSBvbiB3aGljaCB0aGUgZmllbGRPZlZpZXctQW5nbGUgaXMgZ2l2ZW4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUFJPSkVDVElPTl9DRU5UUkFMKF9hc3BlY3Q6IG51bWJlciwgX2ZpZWxkT2ZWaWV3SW5EZWdyZWVzOiBudW1iZXIsIF9uZWFyOiBudW1iZXIsIF9mYXI6IG51bWJlciwgX2RpcmVjdGlvbjogRklFTERfT0ZfVklFVyk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIC8vVE9ETzogY2FtZXJhIGxvb2tzIGRvd24gbmVnYXRpdmUgei1kaXJlY3Rpb24sIHNob3VsZCBiZSBwb3NpdGl2ZVxyXG4gICAgICBsZXQgZmllbGRPZlZpZXdJblJhZGlhbnM6IG51bWJlciA9IF9maWVsZE9mVmlld0luRGVncmVlcyAqIENhbGMuZGVnMnJhZDtcclxuICAgICAgbGV0IGY6IG51bWJlciA9IE1hdGgudGFuKDAuNSAqIChNYXRoLlBJIC0gZmllbGRPZlZpZXdJblJhZGlhbnMpKTtcclxuICAgICAgbGV0IHJhbmdlSW52OiBudW1iZXIgPSAxLjAgLyAoX25lYXIgLSBfZmFyKTtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5yZXVzZShNYXRyaXg0eDQpO1xyXG4gICAgICBtdHhSZXN1bHQuc2V0KFtcclxuICAgICAgICBmLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIGYsIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgKF9uZWFyICsgX2ZhcikgKiByYW5nZUludiwgLTEsXHJcbiAgICAgICAgMCwgMCwgX25lYXIgKiBfZmFyICogcmFuZ2VJbnYgKiAyLCAwXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgaWYgKF9kaXJlY3Rpb24gPT0gRklFTERfT0ZfVklFVy5ESUFHT05BTCkge1xyXG4gICAgICAgIF9hc3BlY3QgPSBNYXRoLnNxcnQoX2FzcGVjdCk7XHJcbiAgICAgICAgbXR4UmVzdWx0LmRhdGFbMF0gPSBmIC8gX2FzcGVjdDtcclxuICAgICAgICBtdHhSZXN1bHQuZGF0YVs1XSA9IGYgKiBfYXNwZWN0O1xyXG4gICAgICB9IGVsc2UgaWYgKF9kaXJlY3Rpb24gPT0gRklFTERfT0ZfVklFVy5WRVJUSUNBTClcclxuICAgICAgICBtdHhSZXN1bHQuZGF0YVswXSA9IGYgLyBfYXNwZWN0O1xyXG4gICAgICBlbHNlIC8vRk9WX0RJUkVDVElPTi5IT1JJWk9OVEFMXHJcbiAgICAgICAgbXR4UmVzdWx0LmRhdGFbNV0gPSBmICogX2FzcGVjdDtcclxuXHJcbiAgICAgIC8vIEhBQ0s6IG1hdHJpeCBzaG91bGQgbG9vayBpbiBwb3NpdGl2ZSB6LWRpcmVjdGlvbiwgcHJlZmVyYWJseSB0aGUgbWF0cml4IHNob3VsZCBiZSBjYWxjdWxhdGVkIGxpa2UgdGhhdCByaWdodCBhd2F5XHJcbiAgICAgIG10eFJlc3VsdC5yb3RhdGVZKDE4MCk7XHJcblxyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgYSBtYXRyaXggdGhhdCBhcHBsaWVzIG9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uIHRvIGFuIG9iamVjdCwgaWYgaXRzIHRyYW5zZm9ybSBpcyBtdWx0aXBsaWVkIGJ5IGl0LlxyXG4gICAgICogQHBhcmFtIF9sZWZ0IFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyBsZWZ0IGJvcmRlci5cclxuICAgICAqIEBwYXJhbSBfcmlnaHQgVGhlIHBvc2l0aW9udmFsdWUgb2YgdGhlIHByb2plY3Rpb25zcGFjZSdzIHJpZ2h0IGJvcmRlci5cclxuICAgICAqIEBwYXJhbSBfYm90dG9tIFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyBib3R0b20gYm9yZGVyLlxyXG4gICAgICogQHBhcmFtIF90b3AgVGhlIHBvc2l0aW9udmFsdWUgb2YgdGhlIHByb2plY3Rpb25zcGFjZSdzIHRvcCBib3JkZXIuXHJcbiAgICAgKiBAcGFyYW0gX25lYXIgVGhlIHBvc2l0aW9udmFsdWUgb2YgdGhlIHByb2plY3Rpb25zcGFjZSdzIG5lYXIgYm9yZGVyLlxyXG4gICAgICogQHBhcmFtIF9mYXIgVGhlIHBvc2l0aW9udmFsdWUgb2YgdGhlIHByb2plY3Rpb25zcGFjZSdzIGZhciBib3JkZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBQUk9KRUNUSU9OX09SVEhPR1JBUEhJQyhfbGVmdDogbnVtYmVyLCBfcmlnaHQ6IG51bWJlciwgX2JvdHRvbTogbnVtYmVyLCBfdG9wOiBudW1iZXIsIF9uZWFyOiBudW1iZXIgPSAtNDAwLCBfZmFyOiBudW1iZXIgPSA0MDApOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLnJldXNlKE1hdHJpeDR4NCk7XHJcbiAgICAgIG10eFJlc3VsdC5zZXQoW1xyXG4gICAgICAgIDIgLyAoX3JpZ2h0IC0gX2xlZnQpLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIC0yIC8gKF90b3AgLSBfYm90dG9tKSwgMCwgMCxcclxuICAgICAgICAwLCAwLCAyIC8gKF9mYXIgLSBfbmVhciksIDAsXHJcbiAgICAgICAgKF9sZWZ0ICsgX3JpZ2h0KSAvIChfbGVmdCAtIF9yaWdodCksXHJcbiAgICAgICAgKF9ib3R0b20gKyBfdG9wKSAvIChfYm90dG9tIC0gX3RvcCksXHJcbiAgICAgICAgKF9uZWFyICsgX2ZhcikgLyAoX25lYXIgLSBfZmFyKSxcclxuICAgICAgICAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSByb3RhdGlvbiBwYXJ0IG9mIHRoZSBnaXZlbiBtYXRyaXhlcyBkYXRhIGFycmF5IHRvIHRoZSBnaXZlbiByb3RhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0Um90YXRpb24oX206IEZsb2F0MzJBcnJheSwgX3JvdGF0aW9uOiBWZWN0b3IzIHwgUXVhdGVybmlvbik6IHZvaWQge1xyXG4gICAgICBpZiAoX3JvdGF0aW9uIGluc3RhbmNlb2YgVmVjdG9yMykge1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlc1JhZDogVmVjdG9yMyA9IFZlY3RvcjMuU0NBTEUoX3JvdGF0aW9uLCBDYWxjLmRlZzJyYWQpO1xyXG4gICAgICAgIGNvbnN0IHNpblg6IG51bWJlciA9IE1hdGguc2luKGFuZ2xlc1JhZC54KTtcclxuICAgICAgICBjb25zdCBjb3NYOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZXNSYWQueCk7XHJcbiAgICAgICAgY29uc3Qgc2luWTogbnVtYmVyID0gTWF0aC5zaW4oYW5nbGVzUmFkLnkpO1xyXG4gICAgICAgIGNvbnN0IGNvc1k6IG51bWJlciA9IE1hdGguY29zKGFuZ2xlc1JhZC55KTtcclxuICAgICAgICBjb25zdCBzaW5aOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZXNSYWQueik7XHJcbiAgICAgICAgY29uc3QgY29zWjogbnVtYmVyID0gTWF0aC5jb3MoYW5nbGVzUmFkLnopO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKGFuZ2xlc1JhZCk7XHJcblxyXG4gICAgICAgIF9tWzBdID0gY29zWiAqIGNvc1k7IC8qKi8gICAgICAgICAgICAgICAgIF9tWzFdID0gc2luWiAqIGNvc1k7IC8qKi8gICAgICAgICAgICAgICAgIF9tWzJdID0gLXNpblk7XHJcbiAgICAgICAgX21bNF0gPSBjb3NaICogc2luWSAqIHNpblggLSBzaW5aICogY29zWDsgX21bNV0gPSBzaW5aICogc2luWSAqIHNpblggKyBjb3NaICogY29zWDsgX21bNl0gPSBjb3NZICogc2luWDtcclxuICAgICAgICBfbVs4XSA9IGNvc1ogKiBzaW5ZICogY29zWCArIHNpblogKiBzaW5YOyBfbVs5XSA9IHNpblogKiBzaW5ZICogY29zWCAtIGNvc1ogKiBzaW5YOyBfbVsxMF0gPSBjb3NZICogY29zWDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCByb3RhdGlvbk5vcm1hbGl6ZWQ6IFF1YXRlcm5pb24gPSBRdWF0ZXJuaW9uLk5PUk1BTElaQVRJT04oX3JvdGF0aW9uKTtcclxuICAgICAgICBjb25zdCB4OiBudW1iZXIgPSByb3RhdGlvbk5vcm1hbGl6ZWQueCwgeTogbnVtYmVyID0gcm90YXRpb25Ob3JtYWxpemVkLnksIHo6IG51bWJlciA9IHJvdGF0aW9uTm9ybWFsaXplZC56LCB3OiBudW1iZXIgPSByb3RhdGlvbk5vcm1hbGl6ZWQudztcclxuICAgICAgICBjb25zdCB4eDogbnVtYmVyID0geCAqIHgsIHh5OiBudW1iZXIgPSB4ICogeSwgeHo6IG51bWJlciA9IHggKiB6LCB4dzogbnVtYmVyID0geCAqIHc7XHJcbiAgICAgICAgY29uc3QgeXk6IG51bWJlciA9IHkgKiB5LCB5ejogbnVtYmVyID0geSAqIHosIHl3OiBudW1iZXIgPSB5ICogdztcclxuICAgICAgICBjb25zdCB6ejogbnVtYmVyID0geiAqIHosIHp3OiBudW1iZXIgPSB6ICogdztcclxuICAgICAgICBjb25zdCB3dzogbnVtYmVyID0gdyAqIHc7XHJcblxyXG4gICAgICAgIF9tWzBdID0gd3cgKyB4eCAtIHl5IC0geno7IF9tWzFdID0gMiAqICh4eSArIHp3KTsvKiovIF9tWzJdID0gMiAqICh4eiAtIHl3KTtcclxuICAgICAgICBfbVs0XSA9IDIgKiAoeHkgLSB6dyk7LyoqLyBfbVs1XSA9IHd3IC0geHggKyB5eSAtIHp6OyBfbVs2XSA9IDIgKiAoeXogKyB4dyk7XHJcbiAgICAgICAgX21bOF0gPSAyICogKHh6ICsgeXcpOy8qKi8gX21bOV0gPSAyICogKHl6IC0geHcpOy8qKi8gX21bMTBdID0gd3cgLSB4eCAtIHl5ICsgeno7XHJcblxyXG4gICAgICAgIC8vIF9tWzBdID0gMSAtIDIgKiAoeXkgKyB6eik7IF9tWzFdID0gMiAqICh4eSArIHp3KTsvKiovIF9tWzJdID0gMiAqICh4eiAtIHl3KTtcclxuICAgICAgICAvLyBfbVs0XSA9IDIgKiAoeHkgLSB6dyk7LyoqLyBfbVs1XSA9IDEgLSAyICogKHh4ICsgenopOyBfbVs2XSA9IDIgKiAoeXogKyB4dyk7XHJcbiAgICAgICAgLy8gX21bOF0gPSAyICogKHh6ICsgeXcpOy8qKi8gX21bOV0gPSAyICogKHl6IC0geHcpOy8qKi8gX21bMTBdID0gMSAtIDIgKiAoeHggKyB5eSk7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUocm90YXRpb25Ob3JtYWxpemVkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uICBBY2Nlc3NvcnNcclxuICAgIC8qKiBcclxuICAgICAqIC0gZ2V0OiByZXR1cm4gYSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRyYW5zbGF0aW9uIHtAbGluayBWZWN0b3IzfS4gIFxyXG4gICAgICogKipDYXV0aW9uISoqIFVzZSBpbW1lZGlhdGVseSBhbmQgcmVhZG9ubHksIHNpbmNlIHRoZSB2ZWN0b3IgaXMgZ29pbmcgdG8gYmUgcmV1c2VkIGludGVybmFsbHkuIENyZWF0ZSBhIGNsb25lIHRvIGtlZXAgbG9uZ2VyIGFuZCBtYW5pcHVsYXRlLiBcclxuICAgICAqIC0gc2V0OiBlZmZlY3QgdGhlIG1hdHJpeCBpZ25vcmluZyBpdHMgcm90YXRpb24gYW5kIHNjYWxpbmdcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCB0cmFuc2xhdGlvbigpOiBWZWN0b3IzIHtcclxuICAgICAgaWYgKHRoaXMuI3RyYW5zbGF0aW9uRGlydHkpIHtcclxuICAgICAgICB0aGlzLiN0cmFuc2xhdGlvbi5zZXQodGhpcy5kYXRhWzEyXSwgdGhpcy5kYXRhWzEzXSwgdGhpcy5kYXRhWzE0XSk7XHJcbiAgICAgICAgdGhpcy4jdHJhbnNsYXRpb25EaXJ0eSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiN0cmFuc2xhdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgdHJhbnNsYXRpb24oX3RyYW5zbGF0aW9uOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMubXV0YXRlKHsgXCJ0cmFuc2xhdGlvblwiOiBfdHJhbnNsYXRpb24gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IHJldHVybiBhIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGUgcm90YXRpb24ge0BsaW5rIFZlY3RvcjN9LiAgXHJcbiAgICAgKiAqKkNhdXRpb24hKiogVXNlIGltbWVkaWF0ZWx5IGFuZCByZWFkb25seSwgc2luY2UgdGhlIHZlY3RvciBpcyBnb2luZyB0byBiZSByZXVzZWQgaW50ZXJuYWxseS4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcm90YXRpb24oKTogVmVjdG9yMyB7XHJcbiAgICAgIGlmICh0aGlzLiNyb3RhdGlvbkRpcnR5KSB7XHJcbiAgICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLnNjYWxpbmc7XHJcblxyXG4gICAgICAgIGxldCBzMDogbnVtYmVyID0gdGhpcy5kYXRhWzBdIC8gc2NhbGluZy54O1xyXG4gICAgICAgIGxldCBzMTogbnVtYmVyID0gdGhpcy5kYXRhWzFdIC8gc2NhbGluZy54O1xyXG4gICAgICAgIGxldCBzMjogbnVtYmVyID0gdGhpcy5kYXRhWzJdIC8gc2NhbGluZy54O1xyXG4gICAgICAgIGxldCBzNjogbnVtYmVyID0gdGhpcy5kYXRhWzZdIC8gc2NhbGluZy55O1xyXG4gICAgICAgIGxldCBzMTA6IG51bWJlciA9IHRoaXMuZGF0YVsxMF0gLyBzY2FsaW5nLno7XHJcblxyXG4gICAgICAgIGxldCBzeTogbnVtYmVyID0gTWF0aC5oeXBvdChzMCwgczEpOyAvLyBwcm9iYWJseSAyLiBwYXJhbSBzaG91bGQgYmUgdGhpcy5kYXRhWzRdIC8gc2NhbGluZy55XHJcblxyXG4gICAgICAgIGxldCBzaW5ndWxhcjogYm9vbGVhbiA9IHN5IDwgMWUtNjsgLy8gSWZcclxuXHJcbiAgICAgICAgbGV0IHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHoxOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIHoyOiBudW1iZXI7XHJcblxyXG4gICAgICAgIGlmICghc2luZ3VsYXIpIHtcclxuICAgICAgICAgIHgxID0gTWF0aC5hdGFuMihzNiwgczEwKTtcclxuICAgICAgICAgIHkxID0gTWF0aC5hdGFuMigtczIsIHN5KTtcclxuICAgICAgICAgIHoxID0gTWF0aC5hdGFuMihzMSwgczApO1xyXG5cclxuICAgICAgICAgIHgyID0gTWF0aC5hdGFuMigtczYsIC1zMTApO1xyXG4gICAgICAgICAgeTIgPSBNYXRoLmF0YW4yKC1zMiwgLXN5KTtcclxuICAgICAgICAgIHoyID0gTWF0aC5hdGFuMigtczEsIC1zMCk7XHJcblxyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKHgyKSArIE1hdGguYWJzKHkyKSArIE1hdGguYWJzKHoyKSA8IE1hdGguYWJzKHgxKSArIE1hdGguYWJzKHkxKSArIE1hdGguYWJzKHoxKSkge1xyXG4gICAgICAgICAgICB4MSA9IHgyO1xyXG4gICAgICAgICAgICB5MSA9IHkyO1xyXG4gICAgICAgICAgICB6MSA9IHoyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB4MSA9IE1hdGguYXRhbjIoLXRoaXMuZGF0YVs5XSAvIHNjYWxpbmcueiwgdGhpcy5kYXRhWzVdIC8gc2NhbGluZy55KTtcclxuICAgICAgICAgIHkxID0gTWF0aC5hdGFuMigtdGhpcy5kYXRhWzJdIC8gc2NhbGluZy54LCBzeSk7XHJcbiAgICAgICAgICB6MSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNyb3RhdGlvbi5zZXQoeDEsIHkxLCB6MSk7XHJcbiAgICAgICAgdGhpcy4jcm90YXRpb24uc2NhbGUoQ2FsYy5yYWQyZGVnKTtcclxuICAgICAgICB0aGlzLiNyb3RhdGlvbkRpcnR5ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLiNyb3RhdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgcm90YXRpb24oX3JvdGF0aW9uOiBRdWF0ZXJuaW9uIHwgVmVjdG9yMykge1xyXG4gICAgICB0aGlzLm11dGF0ZSh7IFwicm90YXRpb25cIjogX3JvdGF0aW9uIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIC0gZ2V0OiByZXR1cm4gYSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gb2YgdGhlIHNjYWxpbmcge0BsaW5rIFZlY3RvcjN9LiAgXHJcbiAgICAgKiAqKkNhdXRpb24hKiogVXNlIGltbWVkaWF0ZWx5IGFuZCByZWFkb25seSwgc2luY2UgdGhlIHZlY3RvciBpcyBnb2luZyB0byBiZSByZXVzZWQgaW50ZXJuYWxseS4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc2NhbGluZygpOiBWZWN0b3IzIHtcclxuICAgICAgaWYgKHRoaXMuI3NjYWxpbmdEaXJ0eSkge1xyXG4gICAgICAgIHRoaXMuI3NjYWxpbmcuc2V0KFxyXG4gICAgICAgICAgTWF0aC5oeXBvdCh0aGlzLmRhdGFbMF0sIHRoaXMuZGF0YVsxXSwgdGhpcy5kYXRhWzJdKSwgLy8qICh0aGlzLmRhdGFbMF0gPCAwID8gLTEgOiAxKSxcclxuICAgICAgICAgIE1hdGguaHlwb3QodGhpcy5kYXRhWzRdLCB0aGlzLmRhdGFbNV0sIHRoaXMuZGF0YVs2XSksIC8vKiAodGhpcy5kYXRhWzVdIDwgMCA/IC0xIDogMSksXHJcbiAgICAgICAgICBNYXRoLmh5cG90KHRoaXMuZGF0YVs4XSwgdGhpcy5kYXRhWzldLCB0aGlzLmRhdGFbMTBdKSAvLyAqICh0aGlzLmRhdGFbMTBdIDwgMCA/IC0xIDogMSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuI3NjYWxpbmdEaXJ0eSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiNzY2FsaW5nO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzY2FsaW5nKF9zY2FsaW5nOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMubXV0YXRlKHsgXCJzY2FsaW5nXCI6IF9zY2FsaW5nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIC0gZ2V0OiByZXR1cm4gYSB1bml0IHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbiBvZiB0aGlzIG1hdHJpeC5cclxuICAgICAqICoqQ2F1dGlvbiEqKiBVc2UgaW1tZWRpYXRlbHkgYW5kIHJlYWRvbmx5LCBzaW5jZSB0aGUgcXVhdGVybmlvbiBpcyBnb2luZyB0byBiZSByZXVzZWQgaW50ZXJuYWxseS4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcXVhdGVybmlvbigpOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgaWYgKHRoaXMuI3F1YXRlcm5pb25EaXJ0eSkge1xyXG4gICAgICAgIHRoaXMuI3F1YXRlcm5pb24uZXVsZXJBbmdsZXMgPSB0aGlzLnJvdGF0aW9uO1xyXG4gICAgICAgIHRoaXMuI3F1YXRlcm5pb25EaXJ0eSA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jcXVhdGVybmlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgcXVhdGVybmlvbihfcXVhdGVybmlvbjogUXVhdGVybmlvbikge1xyXG4gICAgICB0aGlzLm11dGF0ZSh7IFwicm90YXRpb25cIjogX3F1YXRlcm5pb24gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIGNhcmRpbmFsIHgtYXhpcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodCgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHJpZ2h0OiBWZWN0b3IzID0gdGhpcy5nZXRYKCk7XHJcbiAgICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gcmlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIGNhcmRpbmFsIHktYXhpcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCB1cCgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHVwOiBWZWN0b3IzID0gdGhpcy5nZXRZKCk7XHJcbiAgICAgIHVwLm5vcm1hbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gdXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIGNhcmRpbmFsIHotYXhpcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBmb3J3YXJkKCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgZm9yd2FyZDogVmVjdG9yMyA9IHRoaXMuZ2V0WigpO1xyXG4gICAgICBmb3J3YXJkLm5vcm1hbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gZm9yd2FyZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBjbG9uZSBvZiB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBNYXRyaXg0eDQge1xyXG4gICAgICByZXR1cm4gUmVjeWNsZXIucmV1c2UoTWF0cml4NHg0KS5jb3B5KHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIG1hdHJpeCB0byB0aGUgaWRlbnRpdHktbWF0cml4IGFuZCBjbGVhcnMgY2FjaGUuIFVzZWQgYnkgdGhlIHJlY3ljbGVyIHRvIHJlc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXQoW1xyXG4gICAgICAgIDEsIDAsIDAsIDAsXHJcbiAgICAgICAgMCwgMSwgMCwgMCxcclxuICAgICAgICAwLCAwLCAxLCAwLFxyXG4gICAgICAgIDAsIDAsIDAsIDFcclxuICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIG1hdHJpeCB0byB0aGUgaWRlbnRpdHktbWF0cml4IGFuZCBjbGVhcnMgY2FjaGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5yZWN5Y2xlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc3Bvc2UgdGhpcyBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zcG9zZSgpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gdGhpcy5kYXRhO1xyXG4gICAgICB0aGlzLnNldChbXHJcbiAgICAgICAgbVswXSwgbVs0XSwgbVs4XSwgbVsxMl0sXHJcbiAgICAgICAgbVsxXSwgbVs1XSwgbVs5XSwgbVsxM10sXHJcbiAgICAgICAgbVsyXSwgbVs2XSwgbVsxMF0sIG1bMTRdLFxyXG4gICAgICAgIG1bM10sIG1bN10sIG1bMTFdLCBtWzE1XVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZlcnQgdGhpcyBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGludmVydCgpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gdGhpcy5kYXRhO1xyXG4gICAgICBsZXQgbTAwOiBudW1iZXIgPSBtWzAgKiA0ICsgMF07XHJcbiAgICAgIGxldCBtMDE6IG51bWJlciA9IG1bMCAqIDQgKyAxXTtcclxuICAgICAgbGV0IG0wMjogbnVtYmVyID0gbVswICogNCArIDJdO1xyXG4gICAgICBsZXQgbTAzOiBudW1iZXIgPSBtWzAgKiA0ICsgM107XHJcbiAgICAgIGxldCBtMTA6IG51bWJlciA9IG1bMSAqIDQgKyAwXTtcclxuICAgICAgbGV0IG0xMTogbnVtYmVyID0gbVsxICogNCArIDFdO1xyXG4gICAgICBsZXQgbTEyOiBudW1iZXIgPSBtWzEgKiA0ICsgMl07XHJcbiAgICAgIGxldCBtMTM6IG51bWJlciA9IG1bMSAqIDQgKyAzXTtcclxuICAgICAgbGV0IG0yMDogbnVtYmVyID0gbVsyICogNCArIDBdO1xyXG4gICAgICBsZXQgbTIxOiBudW1iZXIgPSBtWzIgKiA0ICsgMV07XHJcbiAgICAgIGxldCBtMjI6IG51bWJlciA9IG1bMiAqIDQgKyAyXTtcclxuICAgICAgbGV0IG0yMzogbnVtYmVyID0gbVsyICogNCArIDNdO1xyXG4gICAgICBsZXQgbTMwOiBudW1iZXIgPSBtWzMgKiA0ICsgMF07XHJcbiAgICAgIGxldCBtMzE6IG51bWJlciA9IG1bMyAqIDQgKyAxXTtcclxuICAgICAgbGV0IG0zMjogbnVtYmVyID0gbVszICogNCArIDJdO1xyXG4gICAgICBsZXQgbTMzOiBudW1iZXIgPSBtWzMgKiA0ICsgM107XHJcbiAgICAgIGxldCB0bXAwOiBudW1iZXIgPSBtMjIgKiBtMzM7XHJcbiAgICAgIGxldCB0bXAxOiBudW1iZXIgPSBtMzIgKiBtMjM7XHJcbiAgICAgIGxldCB0bXAyOiBudW1iZXIgPSBtMTIgKiBtMzM7XHJcbiAgICAgIGxldCB0bXAzOiBudW1iZXIgPSBtMzIgKiBtMTM7XHJcbiAgICAgIGxldCB0bXA0OiBudW1iZXIgPSBtMTIgKiBtMjM7XHJcbiAgICAgIGxldCB0bXA1OiBudW1iZXIgPSBtMjIgKiBtMTM7XHJcbiAgICAgIGxldCB0bXA2OiBudW1iZXIgPSBtMDIgKiBtMzM7XHJcbiAgICAgIGxldCB0bXA3OiBudW1iZXIgPSBtMzIgKiBtMDM7XHJcbiAgICAgIGxldCB0bXA4OiBudW1iZXIgPSBtMDIgKiBtMjM7XHJcbiAgICAgIGxldCB0bXA5OiBudW1iZXIgPSBtMjIgKiBtMDM7XHJcbiAgICAgIGxldCB0bXAxMDogbnVtYmVyID0gbTAyICogbTEzO1xyXG4gICAgICBsZXQgdG1wMTE6IG51bWJlciA9IG0xMiAqIG0wMztcclxuICAgICAgbGV0IHRtcDEyOiBudW1iZXIgPSBtMjAgKiBtMzE7XHJcbiAgICAgIGxldCB0bXAxMzogbnVtYmVyID0gbTMwICogbTIxO1xyXG4gICAgICBsZXQgdG1wMTQ6IG51bWJlciA9IG0xMCAqIG0zMTtcclxuICAgICAgbGV0IHRtcDE1OiBudW1iZXIgPSBtMzAgKiBtMTE7XHJcbiAgICAgIGxldCB0bXAxNjogbnVtYmVyID0gbTEwICogbTIxO1xyXG4gICAgICBsZXQgdG1wMTc6IG51bWJlciA9IG0yMCAqIG0xMTtcclxuICAgICAgbGV0IHRtcDE4OiBudW1iZXIgPSBtMDAgKiBtMzE7XHJcbiAgICAgIGxldCB0bXAxOTogbnVtYmVyID0gbTMwICogbTAxO1xyXG4gICAgICBsZXQgdG1wMjA6IG51bWJlciA9IG0wMCAqIG0yMTtcclxuICAgICAgbGV0IHRtcDIxOiBudW1iZXIgPSBtMjAgKiBtMDE7XHJcbiAgICAgIGxldCB0bXAyMjogbnVtYmVyID0gbTAwICogbTExO1xyXG4gICAgICBsZXQgdG1wMjM6IG51bWJlciA9IG0xMCAqIG0wMTtcclxuXHJcbiAgICAgIGxldCB0MDogbnVtYmVyID0gKHRtcDAgKiBtMTEgKyB0bXAzICogbTIxICsgdG1wNCAqIG0zMSkgLVxyXG4gICAgICAgICh0bXAxICogbTExICsgdG1wMiAqIG0yMSArIHRtcDUgKiBtMzEpO1xyXG5cclxuICAgICAgbGV0IHQxOiBudW1iZXIgPSAodG1wMSAqIG0wMSArIHRtcDYgKiBtMjEgKyB0bXA5ICogbTMxKSAtXHJcbiAgICAgICAgKHRtcDAgKiBtMDEgKyB0bXA3ICogbTIxICsgdG1wOCAqIG0zMSk7XHJcbiAgICAgIGxldCB0MjogbnVtYmVyID0gKHRtcDIgKiBtMDEgKyB0bXA3ICogbTExICsgdG1wMTAgKiBtMzEpIC1cclxuICAgICAgICAodG1wMyAqIG0wMSArIHRtcDYgKiBtMTEgKyB0bXAxMSAqIG0zMSk7XHJcbiAgICAgIGxldCB0MzogbnVtYmVyID0gKHRtcDUgKiBtMDEgKyB0bXA4ICogbTExICsgdG1wMTEgKiBtMjEpIC1cclxuICAgICAgICAodG1wNCAqIG0wMSArIHRtcDkgKiBtMTEgKyB0bXAxMCAqIG0yMSk7XHJcblxyXG4gICAgICBsZXQgZDogbnVtYmVyID0gMS4wIC8gKG0wMCAqIHQwICsgbTEwICogdDEgKyBtMjAgKiB0MiArIG0zMCAqIHQzKTtcclxuXHJcbiAgICAgIHRoaXMuc2V0KFtcclxuICAgICAgICBkICogdDAsIC8vIFswXVxyXG4gICAgICAgIGQgKiB0MSwgLy8gWzFdXHJcbiAgICAgICAgZCAqIHQyLCAvLyBbMl1cclxuICAgICAgICBkICogdDMsIC8vIFszXVxyXG4gICAgICAgIGQgKiAoKHRtcDEgKiBtMTAgKyB0bXAyICogbTIwICsgdG1wNSAqIG0zMCkgLSAodG1wMCAqIG0xMCArIHRtcDMgKiBtMjAgKyB0bXA0ICogbTMwKSksICAgICAgICAvLyBbNF1cclxuICAgICAgICBkICogKCh0bXAwICogbTAwICsgdG1wNyAqIG0yMCArIHRtcDggKiBtMzApIC0gKHRtcDEgKiBtMDAgKyB0bXA2ICogbTIwICsgdG1wOSAqIG0zMCkpLCAgICAgICAgLy8gWzVdXHJcbiAgICAgICAgZCAqICgodG1wMyAqIG0wMCArIHRtcDYgKiBtMTAgKyB0bXAxMSAqIG0zMCkgLSAodG1wMiAqIG0wMCArIHRtcDcgKiBtMTAgKyB0bXAxMCAqIG0zMCkpLCAgICAgIC8vIFs2XVxyXG4gICAgICAgIGQgKiAoKHRtcDQgKiBtMDAgKyB0bXA5ICogbTEwICsgdG1wMTAgKiBtMjApIC0gKHRtcDUgKiBtMDAgKyB0bXA4ICogbTEwICsgdG1wMTEgKiBtMjApKSwgICAgICAvLyBbN11cclxuICAgICAgICBkICogKCh0bXAxMiAqIG0xMyArIHRtcDE1ICogbTIzICsgdG1wMTYgKiBtMzMpIC0gKHRtcDEzICogbTEzICsgdG1wMTQgKiBtMjMgKyB0bXAxNyAqIG0zMykpLCAgLy8gWzhdXHJcbiAgICAgICAgZCAqICgodG1wMTMgKiBtMDMgKyB0bXAxOCAqIG0yMyArIHRtcDIxICogbTMzKSAtICh0bXAxMiAqIG0wMyArIHRtcDE5ICogbTIzICsgdG1wMjAgKiBtMzMpKSwgIC8vIFs5XVxyXG4gICAgICAgIGQgKiAoKHRtcDE0ICogbTAzICsgdG1wMTkgKiBtMTMgKyB0bXAyMiAqIG0zMykgLSAodG1wMTUgKiBtMDMgKyB0bXAxOCAqIG0xMyArIHRtcDIzICogbTMzKSksICAvLyBbMTBdXHJcbiAgICAgICAgZCAqICgodG1wMTcgKiBtMDMgKyB0bXAyMCAqIG0xMyArIHRtcDIzICogbTIzKSAtICh0bXAxNiAqIG0wMyArIHRtcDIxICogbTEzICsgdG1wMjIgKiBtMjMpKSwgIC8vIFsxMV1cclxuICAgICAgICBkICogKCh0bXAxNCAqIG0yMiArIHRtcDE3ICogbTMyICsgdG1wMTMgKiBtMTIpIC0gKHRtcDE2ICogbTMyICsgdG1wMTIgKiBtMTIgKyB0bXAxNSAqIG0yMikpLCAgLy8gWzEyXVxyXG4gICAgICAgIGQgKiAoKHRtcDIwICogbTMyICsgdG1wMTIgKiBtMDIgKyB0bXAxOSAqIG0yMikgLSAodG1wMTggKiBtMjIgKyB0bXAyMSAqIG0zMiArIHRtcDEzICogbTAyKSksICAvLyBbMTNdXHJcbiAgICAgICAgZCAqICgodG1wMTggKiBtMTIgKyB0bXAyMyAqIG0zMiArIHRtcDE1ICogbTAyKSAtICh0bXAyMiAqIG0zMiArIHRtcDE0ICogbTAyICsgdG1wMTkgKiBtMTIpKSwgIC8vIFsxNF1cclxuICAgICAgICBkICogKCh0bXAyMiAqIG0yMiArIHRtcDE2ICogbTAyICsgdG1wMjEgKiBtMTIpIC0gKHRtcDIwICogbTEyICsgdG1wMjMgKiBtMjIgKyB0bXAxNyAqIG0wMikpICAvLyBbMTVdXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNsYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHRyYW5zbGF0aW9uIGJ5IHRoZSBnaXZlbiB7QGxpbmsgVmVjdG9yM30gdG8gdGhpcyBtYXRyaXguXHJcbiAgICAgKiBJZiBfbG9jYWwgaXMgdHJ1ZSwgdGhlIHRyYW5zbGF0aW9uIG9jY3VycyBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcm90YXRpb24gYW5kIHNjYWxpbmcgb2YgdGhpcyBtYXRyaXgsXHJcbiAgICAgKiBvdGhlcndpc2UsIGl0IG9jY3VycyBhY2NvcmRpbmcgdG8gdGhlIHBhcmVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZShfYnk6IFZlY3RvcjMsIF9sb2NhbDogYm9vbGVhbiA9IHRydWUpOiBNYXRyaXg0eDQge1xyXG4gICAgICBpZiAoX2xvY2FsKSB7XHJcbiAgICAgICAgbGV0IG10eFRyYW5zbGF0aW9uOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuVFJBTlNMQVRJT04oX2J5KTtcclxuICAgICAgICB0aGlzLm11bHRpcGx5KG10eFRyYW5zbGF0aW9uKTtcclxuICAgICAgICBSZWN5Y2xlci5zdG9yZShtdHhUcmFuc2xhdGlvbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEyXSArPSBfYnkueDtcclxuICAgICAgICB0aGlzLmRhdGFbMTNdICs9IF9ieS55O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNF0gKz0gX2J5Lno7XHJcbiAgICAgICAgdGhpcy5tdXRhdG9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLiN0cmFuc2xhdGlvbkRpcnR5ID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gY29uc3QgbWF0cml4OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04odGhpcywgTWF0cml4NHg0LlRSQU5TTEFUSU9OKF9ieSkpO1xyXG4gICAgICAvLyAvLyBUT0RPOiBwb3NzaWJsZSBvcHRpbWl6YXRpb24sIHRyYW5zbGF0aW9uIG1heSBhbHRlciBtdXRhdG9yIGluc3RlYWQgb2YgZGVsZXRpbmcgaXQuXHJcbiAgICAgIC8vIHRoaXMuc2V0KG1hdHJpeCk7XHJcbiAgICAgIC8vIFJlY3ljbGVyLnN0b3JlKG1hdHJpeCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHRyYW5zbGF0aW9uIGFsb25nIHRoZSB4LWF4aXMgdG8gdGhpcyBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFuc2xhdGVYKF94OiBudW1iZXIsIF9sb2NhbDogYm9vbGVhbiA9IHRydWUpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgdHJhbnNsYXRpb246IFZlY3RvcjMgPSBWZWN0b3IzLlgoX3gpO1xyXG4gICAgICB0aGlzLnRyYW5zbGF0ZSh0cmFuc2xhdGlvbiwgX2xvY2FsKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodHJhbnNsYXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgeS1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlWShfeTogbnVtYmVyLCBfbG9jYWw6IGJvb2xlYW4gPSB0cnVlKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHRyYW5zbGF0aW9uOiBWZWN0b3IzID0gVmVjdG9yMy5ZKF95KTtcclxuICAgICAgdGhpcy50cmFuc2xhdGUodHJhbnNsYXRpb24sIF9sb2NhbCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHRyYW5zbGF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgdHJhbnNsYXRpb24gYWxvbmcgdGhlIHotYXhpcyB0byB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZVooX3o6IG51bWJlciwgX2xvY2FsOiBib29sZWFuID0gdHJ1ZSk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCB0cmFuc2xhdGlvbjogVmVjdG9yMyA9IFZlY3RvcjMuWihfeik7XHJcbiAgICAgIHRoaXMudHJhbnNsYXRlKHRyYW5zbGF0aW9uLCBfbG9jYWwpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh0cmFuc2xhdGlvbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFJvdGF0aW9uXHJcbiAgICAvKipcclxuICAgICAqIFJvdGF0ZXMgdGhpcyBtYXRyaXggYnkgZ2l2ZW4ge0BsaW5rIFZlY3RvcjN9IGluIHRoZSBvcmRlciBaLCBZLCBYLiBSaWdodCBoYW5kIHJvdGF0aW9uIGlzIHVzZWQsIHRodW1iIHBvaW50cyBpbiBheGlzIGRpcmVjdGlvbiwgZmluZ2VycyBjdXJsaW5nIGluZGljYXRlIHJvdGF0aW9uXHJcbiAgICAgKiBUaGUgcm90YXRpb24gaXMgYXBwZW5kZWQgdG8gYWxyZWFkeSBhcHBsaWVkIHRyYW5zZm9ybXMsIHRodXMgbXVsdGlwbGllZCBmcm9tIHRoZSByaWdodC4gU2V0IF9mcm9tTGVmdCB0byB0cnVlIHRvIHN3aXRjaCBhbmQgcHV0IGl0IGluIGZyb250LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcm90YXRlKF9ieTogVmVjdG9yMywgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgbXR4Um90YXRpb246IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5ST1RBVElPTihfYnkpO1xyXG4gICAgICB0aGlzLm11bHRpcGx5KG10eFJvdGF0aW9uLCBfZnJvbUxlZnQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSb3RhdGlvbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHJvdGF0aW9uIGFyb3VuZCB0aGUgeC1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcm90YXRlWChfYW5nbGVJbkRlZ3JlZXM6IG51bWJlciwgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgbXR4Um90YXRpb246IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5ST1RBVElPTl9YKF9hbmdsZUluRGVncmVlcyk7XHJcbiAgICAgIHRoaXMubXVsdGlwbHkobXR4Um90YXRpb24sIF9mcm9tTGVmdCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJvdGF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgcm90YXRpb24gYXJvdW5kIHRoZSB5LWF4aXMgdG8gdGhpcyBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByb3RhdGVZKF9hbmdsZUluRGVncmVlczogbnVtYmVyLCBfZnJvbUxlZnQ6IGJvb2xlYW4gPSBmYWxzZSk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtdHhSb3RhdGlvbjogTWF0cml4NHg0ID0gTWF0cml4NHg0LlJPVEFUSU9OX1koX2FuZ2xlSW5EZWdyZWVzKTtcclxuICAgICAgdGhpcy5tdWx0aXBseShtdHhSb3RhdGlvbiwgX2Zyb21MZWZ0KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4Um90YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSByb3RhdGlvbiBhcm91bmQgdGhlIHotYXhpcyB0byB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJvdGF0ZVooX2FuZ2xlSW5EZWdyZWVzOiBudW1iZXIsIF9mcm9tTGVmdDogYm9vbGVhbiA9IGZhbHNlKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IG10eFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT05fWihfYW5nbGVJbkRlZ3JlZXMpO1xyXG4gICAgICB0aGlzLm11bHRpcGx5KG10eFJvdGF0aW9uLCBfZnJvbUxlZnQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSb3RhdGlvbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRqdXN0cyB0aGUgcm90YXRpb24gb2YgdGhpcyBtYXRyaXggdG8gcG9pbnQgdGhlIHotYXhpcyBkaXJlY3RseSBhdCB0aGUgZ2l2ZW4gdGFyZ2V0IGFuZCB0aWx0cyBpdCB0byBhY2NvcmQgd2l0aCB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9LFxyXG4gICAgICogcmVzcGVjdGl2ZWx5IGNhbGN1bGF0aW5nIHlhdyBhbmQgcGl0Y2guIElmIG5vIHVwLXtAbGluayBWZWN0b3IzfSBpcyBnaXZlbiwgdGhlIHByZXZpb3VzIHVwLXtAbGluayBWZWN0b3IzfSBpcyB1c2VkLiBcclxuICAgICAqIFRoZSBwaXRjaCBtYXkgYmUgcmVzdHJpY3RlZCB0byB0aGUgdXAtdmVjdG9yIHRvIG9ubHkgY2FsY3VsYXRlIHlhdy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGxvb2tBdChfdGFyZ2V0OiBWZWN0b3IzLCBfdXA/OiBWZWN0b3IzLCBfcmVzdHJpY3Q6IGJvb2xlYW4gPSBmYWxzZSk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIF91cCA9IF91cCA/IFZlY3RvcjMuTk9STUFMSVpBVElPTihfdXApIDogVmVjdG9yMy5OT1JNQUxJWkFUSU9OKHRoaXMudXApO1xyXG5cclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuTE9PS19BVCh0aGlzLnRyYW5zbGF0aW9uLCBfdGFyZ2V0LCBfdXAsIF9yZXN0cmljdCk7XHJcbiAgICAgIG10eFJlc3VsdC5zY2FsZSh0aGlzLnNjYWxpbmcpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQuZGF0YSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRqdXN0cyB0aGUgcm90YXRpb24gb2YgdGhpcyBtYXRyaXggdG8gYWxpZ24gdGhlIHotYXhpcyB3aXRoIHRoZSBnaXZlbiBkaXJlY3Rpb24gYW5kIHRpbHRzIGl0IHRvIGFjY29yZCB3aXRoIHRoZSBnaXZlbiB1cC17QGxpbmsgVmVjdG9yM30uXHJcbiAgICAgKiBVcCBzaG91bGQgYmUgcGVycGVuZGljdWxhciB0byB0aGUgZ2l2ZW4gZGlyZWN0aW9uLiBJZiBubyB1cC12ZWN0b3IgaXMgcHJvdmlkZWQsICgwLCAxLCAwKSBpcyB1c2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbG9va0luKF9kaXJlY3Rpb246IFZlY3RvcjMsIF91cDogVmVjdG9yMyA9IFZlY3RvcjMuWSgpKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuTE9PS19JTih0aGlzLnRyYW5zbGF0aW9uLCBfZGlyZWN0aW9uLCBfdXApO1xyXG4gICAgICBtdHhSZXN1bHQuc2NhbGUodGhpcy5zY2FsaW5nKTtcclxuICAgICAgdGhpcy5zZXQobXR4UmVzdWx0LmRhdGEpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhbWUgYXMge0BsaW5rIE1hdHJpeDR4NC5sb29rQXR9LCBidXQgb3B0aW1pemVkIGFuZCBuZWVkcyB0ZXN0aW5nXHJcbiAgICAgKi9cclxuICAgIC8vIFRPRE86IHRlc3RpbmcgbG9va2F0IHRoYXQgcmVhbGx5IGp1c3Qgcm90YXRlcyB0aGUgbWF0cml4IHJhdGhlciB0aGFuIGNyZWF0aW5nIGEgbmV3IG9uZVxyXG4gICAgLy8gcHVibGljIGxvb2tBdFJvdGF0ZShfdGFyZ2V0OiBWZWN0b3IzLCBfdXA/OiBWZWN0b3IzLCBfcHJlc2VydmVTY2FsaW5nOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgLy8gICBpZiAoIV91cClcclxuICAgIC8vICAgICBfdXAgPSB0aGlzLmdldFkoKTtcclxuXHJcbiAgICAvLyAgIGxldCBzY2FsaW5nOiBWZWN0b3IzID0gdGhpcy5zY2FsaW5nO1xyXG4gICAgLy8gICBsZXQgZGlmZmVyZW5jZTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRShfdGFyZ2V0LCB0aGlzLnRyYW5zbGF0aW9uKTtcclxuICAgIC8vICAgZGlmZmVyZW5jZS5ub3JtYWxpemUoKTtcclxuICAgIC8vICAgbGV0IGNvczogbnVtYmVyID0gVmVjdG9yMy5ET1QoVmVjdG9yMy5OT1JNQUxJWkFUSU9OKHRoaXMuZ2V0WigpKSwgZGlmZmVyZW5jZSk7XHJcbiAgICAvLyAgIGxldCBzaW46IG51bWJlciA9IFZlY3RvcjMuRE9UKFZlY3RvcjMuTk9STUFMSVpBVElPTih0aGlzLmdldFgoKSksIGRpZmZlcmVuY2UpO1xyXG4gICAgLy8gICAvLyBjb25zb2xlLmxvZyhzaW4sIGNvcyk7XHJcbiAgICAvLyAgIGxldCBtdHhSb3RhdGlvbjogTWF0cml4NHg0ID0gUmVjeWNsZXIuZ2V0KE1hdHJpeDR4NCk7XHJcbiAgICAvLyAgIG10eFJvdGF0aW9uLmRhdGEuc2V0KFtcclxuICAgIC8vICAgICBjb3MsIDAsIC1zaW4sIDAsXHJcbiAgICAvLyAgICAgMCwgMSwgMCwgMCxcclxuICAgIC8vICAgICBzaW4sIDAsIGNvcywgMCxcclxuICAgIC8vICAgICAwLCAwLCAwLCAxXHJcbiAgICAvLyAgIF0pO1xyXG4gICAgLy8gICB0aGlzLm11bHRpcGx5KG10eFJvdGF0aW9uLCBmYWxzZSk7XHJcblxyXG4gICAgLy8gICBjb3MgPSBWZWN0b3IzLkRPVChWZWN0b3IzLk5PUk1BTElaQVRJT04odGhpcy5nZXRaKCkpLCBkaWZmZXJlbmNlKTtcclxuICAgIC8vICAgc2luID0gLVZlY3RvcjMuRE9UKFZlY3RvcjMuTk9STUFMSVpBVElPTih0aGlzLmdldFkoKSksIGRpZmZlcmVuY2UpO1xyXG4gICAgLy8gICAvLyBjb25zb2xlLmxvZyhzaW4sIGNvcyk7XHJcbiAgICAvLyAgIG10eFJvdGF0aW9uLmRhdGEuc2V0KFtcclxuICAgIC8vICAgICAxLCAwLCAwLCAwLFxyXG4gICAgLy8gICAgIDAsIGNvcywgc2luLCAwLFxyXG4gICAgLy8gICAgIDAsIC1zaW4sIGNvcywgMCxcclxuICAgIC8vICAgICAwLCAwLCAwLCAxXHJcbiAgICAvLyAgIF0pO1xyXG4gICAgLy8gICB0aGlzLm11bHRpcGx5KG10eFJvdGF0aW9uLCBmYWxzZSk7XHJcbiAgICAvLyAgIHRoaXMuc2NhbGluZyA9IHNjYWxpbmc7XHJcbiAgICAvLyAgIFJlY3ljbGVyLnN0b3JlKG10eFJvdGF0aW9uKTtcclxuICAgIC8vIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBTY2FsaW5nXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBzY2FsaW5nIGJ5IHRoZSBnaXZlbiB7QGxpbmsgVmVjdG9yM30gdG8gdGhpcyBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzY2FsZShfYnk6IFZlY3RvcjMpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhTY2FsaW5nOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuU0NBTElORyhfYnkpO1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5QUk9EVUNUKHRoaXMsIG10eFNjYWxpbmcpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQuZGF0YSk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlTXVsdGlwbGUobXR4U2NhbGluZywgbXR4UmVzdWx0KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgc2NhbGluZyBhbG9uZyB0aGUgeC1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGVYKF9ieTogbnVtYmVyKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9ieSwgMSwgMSk7XHJcbiAgICAgIHRoaXMuc2NhbGUodmVjdG9yKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodmVjdG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgc2NhbGluZyBhbG9uZyB0aGUgeS1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGVZKF9ieTogbnVtYmVyKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KDEsIF9ieSwgMSk7XHJcbiAgICAgIHRoaXMuc2NhbGUodmVjdG9yKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodmVjdG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgc2NhbGluZyBhbG9uZyB0aGUgei1heGlzIHRvIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGVaKF9ieTogbnVtYmVyKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KDEsIDEsIF9ieSk7XHJcbiAgICAgIHRoaXMuc2NhbGUodmVjdG9yKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodmVjdG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmb3JtYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogTXVsdGlwbHkgdGhpcyBtYXRyaXggYnkgdGhlIGdpdmVuIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG11bHRpcGx5KF9tYXRyaXg6IE1hdHJpeDR4NCwgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IF9mcm9tTGVmdCA/IE1hdHJpeDR4NC5QUk9EVUNUKF9tYXRyaXgsIHRoaXMpIDogTWF0cml4NHg0LlBST0RVQ1QodGhpcywgX21hdHJpeCk7XHJcbiAgICAgIHRoaXMuc2V0KG10eFJlc3VsdC5kYXRhKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4UmVzdWx0KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIC8vIHB1YmxpYyBnZXRFdWxlckFuZ2xlc05ldygpOiBWZWN0b3IzIHtcclxuICAgIC8vICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLnNjYWxpbmc7XHJcblxyXG4gICAgLy8gICBsZXQgdGhldGFYOiBudW1iZXIsIHRoZXRhWTogbnVtYmVyLCB0aGV0YVo6IG51bWJlcjtcclxuICAgIC8vICAgbGV0IHIwMjogbnVtYmVyID0gdGhpcy5kYXRhWzJdIC8gc2NhbGluZy56O1xyXG4gICAgLy8gICBsZXQgcjExOiBudW1iZXIgPSB0aGlzLmRhdGFbNV0gLyBzY2FsaW5nLnk7XHJcblxyXG4gICAgLy8gICBpZiAocjAyIDwgMSkge1xyXG4gICAgLy8gICAgIGlmIChyMDIgPiAtMSkge1xyXG4gICAgLy8gICAgICAgdGhldGFZID0gTWF0aC5hc2luKC1yMDIpO1xyXG4gICAgLy8gICAgICAgdGhldGFaID0gTWF0aC5hdGFuMih0aGlzLmRhdGFbMV0gLyBzY2FsaW5nLnksIHRoaXMuZGF0YVswXSAvIHNjYWxpbmcueCk7XHJcbiAgICAvLyAgICAgICB0aGV0YVggPSBNYXRoLmF0YW4yKHRoaXMuZGF0YVs5XSAvIHNjYWxpbmcueiwgdGhpcy5kYXRhWzEwXSAvIHNjYWxpbmcueik7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGVsc2Uge1xyXG4gICAgLy8gICAgICAgdGhldGFZID0gTWF0aC5QSSAvIDI7XHJcbiAgICAvLyAgICAgICB0aGV0YVogPSAtTWF0aC5hdGFuMih0aGlzLmRhdGFbNl0gLyBzY2FsaW5nLnksIHIxMSk7XHJcbiAgICAvLyAgICAgICB0aGV0YVggPSAwO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBlbHNlIHtcclxuICAgIC8vICAgICB0aGV0YVkgPSAtTWF0aC5QSSAvIDI7XHJcbiAgICAvLyAgICAgdGhldGFaID0gTWF0aC5hdGFuMigtdGhpcy5kYXRhWzZdIC8gc2NhbGluZy55LCByMTEpO1xyXG4gICAgLy8gICAgIHRoZXRhWCA9IDA7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhpcy4jZXVsZXJBbmdsZXMuc2V0KC10aGV0YVgsIHRoZXRhWSwgdGhldGFaKTtcclxuICAgIC8vICAgdGhpcy4jZXVsZXJBbmdsZXMuc2NhbGUoTWF0aGVtYXRpYy5yYWQyZGVnKTtcclxuXHJcbiAgICAvLyAgIHJldHVybiB0aGlzLiNldWxlckFuZ2xlcztcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGVsZW1lbnRzIG9mIHRoaXMgbWF0cml4IHRvIHRoZSBnaXZlbiBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfYXJyYXk6IEFycmF5TGlrZTxudW1iZXI+KTogTWF0cml4NHg0IHtcclxuICAgICAgdGhpcy5kYXRhLnNldChfYXJyYXkpO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb3BpZXMgdGhlIHN0YXRlIG9mIHRoZSBnaXZlbiBtYXRyaXggaW50byB0aGlzIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvcHkoX29yaWdpbmFsOiBNYXRyaXg0eDQpOiBNYXRyaXg0eDQge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF9vcmlnaW5hbC5kYXRhKTtcclxuICAgICAgdGhpcy4jdHJhbnNsYXRpb25EaXJ0eSA9IF9vcmlnaW5hbC4jdHJhbnNsYXRpb25EaXJ0eTtcclxuICAgICAgdGhpcy4jcm90YXRpb25EaXJ0eSA9IF9vcmlnaW5hbC4jcm90YXRpb25EaXJ0eTtcclxuICAgICAgdGhpcy4jc2NhbGluZ0RpcnR5ID0gX29yaWdpbmFsLiNzY2FsaW5nRGlydHk7XHJcbiAgICAgIHRoaXMuI3F1YXRlcm5pb25EaXJ0eSA9IF9vcmlnaW5hbC4jcXVhdGVybmlvbkRpcnR5O1xyXG4gICAgICBpZiAoIXRoaXMuI3RyYW5zbGF0aW9uRGlydHkpXHJcbiAgICAgICAgdGhpcy4jdHJhbnNsYXRpb24uY29weShfb3JpZ2luYWwuI3RyYW5zbGF0aW9uKTtcclxuICAgICAgaWYgKCF0aGlzLiNyb3RhdGlvbkRpcnR5KVxyXG4gICAgICAgIHRoaXMuI3JvdGF0aW9uLmNvcHkoX29yaWdpbmFsLiNyb3RhdGlvbik7XHJcbiAgICAgIGlmICghdGhpcy4jc2NhbGluZ0RpcnR5KVxyXG4gICAgICAgIHRoaXMuI3NjYWxpbmcuY29weShfb3JpZ2luYWwuI3NjYWxpbmcpO1xyXG4gICAgICBpZiAoIXRoaXMuI3F1YXRlcm5pb25EaXJ0eSlcclxuICAgICAgICB0aGlzLiNxdWF0ZXJuaW9uLmNvcHkoX29yaWdpbmFsLiNxdWF0ZXJuaW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgZm9ybWF0dGVkIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGDGki5NYXRyaXg0eDQodHJhbnNsYXRpb246ICR7dGhpcy50cmFuc2xhdGlvbi50b1N0cmluZygpfSwgcm90YXRpb246ICR7dGhpcy5yb3RhdGlvbi50b1N0cmluZygpfSwgc2NhbGluZzogJHt0aGlzLnNjYWxpbmcudG9TdHJpbmcoKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgb2YgdGhpcyBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgLy8gVE9ETzogb3B0aW1pemF0aW9uLCBpdCBzaG91bGRuJ3QgYWx3YXlzIHJldHVybiBhIGNvcHksIHNpbmNlIHRoaXMgYmxvYXRzIG1lbW9yeVxyXG4gICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGNhcmRpbmFsIHgtYXhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0WCgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgcmVzdWx0LnNldCh0aGlzLmRhdGFbMF0sIHRoaXMuZGF0YVsxXSwgdGhpcy5kYXRhWzJdKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGNhcmRpbmFsIHktYXhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0WSgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgcmVzdWx0LnNldCh0aGlzLmRhdGFbNF0sIHRoaXMuZGF0YVs1XSwgdGhpcy5kYXRhWzZdKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGNhcmRpbmFsIHotYXhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0WigpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgcmVzdWx0LnNldCh0aGlzLmRhdGFbOF0sIHRoaXMuZGF0YVs5XSwgdGhpcy5kYXRhWzEwXSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTd2FwcyB0aGUgdHdvIGNhcmRpbmFsIGF4aXMgYW5kIHJldmVyc2VzIHRoZSB0aGlyZCwgZWZmZWN0aXZlbHkgcm90YXRpbmcgdGhlIHRyYW5zZm9ybSAxODAgZGVncmVlcyBhcm91bmQgb25lIGFuZCA5MCBkZWdyZWVzIGFyb3VuZCBhIHNlY29uZCBheGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzd2FwWFkoKTogdm9pZCB7XHJcbiAgICAgIGxldCB0ZW1wOiBudW1iZXJbXSA9IFt0aGlzLmRhdGFbMF0sIHRoaXMuZGF0YVsxXSwgdGhpcy5kYXRhWzJdXTsgLy8gc3RvcmUgeC1heGlzXHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW3RoaXMuZGF0YVs0XSwgdGhpcy5kYXRhWzVdLCB0aGlzLmRhdGFbNl1dLCAwKTsgLy8gb3ZlcndyaXRlIHgtYXhpcyB3aXRoIHktYXhpc1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KHRlbXAsIDQpOyAvLyBvdmVyd3JpdGUgWSB3aXRoIHRlbXBcclxuICAgICAgdGhpcy5kYXRhLnNldChbLXRoaXMuZGF0YVs4XSwgLXRoaXMuZGF0YVs5XSwgLXRoaXMuZGF0YVsxMF1dLCA4KTsgLy8gcmV2ZXJzZSB6LWF4aXNcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN3YXBzIHRoZSB0d28gY2FyZGluYWwgYXhpcyBhbmQgcmV2ZXJzZXMgdGhlIHRoaXJkLCBlZmZlY3RpdmVseSByb3RhdGluZyB0aGUgdHJhbnNmb3JtIDE4MCBkZWdyZWVzIGFyb3VuZCBvbmUgYW5kIDkwIGRlZ3JlZXMgYXJvdW5kIGEgc2Vjb25kIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN3YXBYWigpOiB2b2lkIHtcclxuICAgICAgbGV0IHRlbXA6IG51bWJlcltdID0gW3RoaXMuZGF0YVswXSwgdGhpcy5kYXRhWzFdLCB0aGlzLmRhdGFbMl1dOyAvLyBzdG9yZSB4LWF4aXNcclxuICAgICAgdGhpcy5kYXRhLnNldChbdGhpcy5kYXRhWzhdLCB0aGlzLmRhdGFbOV0sIHRoaXMuZGF0YVsxMF1dLCAwKTsgLy8gb3ZlcndyaXRlIHgtYXhpcyB3aXRoIHotYXhpc1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KHRlbXAsIDgpOyAvLyBvdmVyd3JpdGUgWiB3aXRoIHRlbXBcclxuICAgICAgdGhpcy5kYXRhLnNldChbLXRoaXMuZGF0YVs0XSwgLXRoaXMuZGF0YVs1XSwgLXRoaXMuZGF0YVs2XV0sIDQpOyAvLyByZXZlcnNlIHktYXhpc1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3dhcHMgdGhlIHR3byBjYXJkaW5hbCBheGlzIGFuZCByZXZlcnNlcyB0aGUgdGhpcmQsIGVmZmVjdGl2ZWx5IHJvdGF0aW5nIHRoZSB0cmFuc2Zvcm0gMTgwIGRlZ3JlZXMgYXJvdW5kIG9uZSBhbmQgOTAgZGVncmVlcyBhcm91bmQgYSBzZWNvbmQgYXhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3dhcFlaKCk6IHZvaWQge1xyXG4gICAgICBsZXQgdGVtcDogbnVtYmVyW10gPSBbdGhpcy5kYXRhWzRdLCB0aGlzLmRhdGFbNV0sIHRoaXMuZGF0YVs2XV07IC8vIHN0b3JlIHktYXhpc1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KFt0aGlzLmRhdGFbOF0sIHRoaXMuZGF0YVs5XSwgdGhpcy5kYXRhWzEwXV0sIDQpOyAvLyBvdmVyd3JpdGUgeS1heGlzIHdpdGggei1heGlzXHJcbiAgICAgIHRoaXMuZGF0YS5zZXQodGVtcCwgOCk7IC8vIG92ZXJ3cml0ZSBaIHdpdGggdGVtcFxyXG4gICAgICB0aGlzLmRhdGEuc2V0KFstdGhpcy5kYXRhWzBdLCAtdGhpcy5kYXRhWzFdLCAtdGhpcy5kYXRhWzJdXSwgMCk7IC8vIHJldmVyc2UgeC1heGlzXHJcbiAgICAgIHRoaXMucmVzZXRDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdHJhbmxhdGlvbiBmcm9tIHRoaXMgbWF0cml4IHRvIHRoZSB0YXJnZXQgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRUcmFuc2xhdGlvblRvKF9tdHhUYXJnZXQ6IE1hdHJpeDR4NCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgZGlmZmVyZW5jZTogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgZGlmZmVyZW5jZS5zZXQoX210eFRhcmdldC5kYXRhWzEyXSAtIHRoaXMuZGF0YVsxMl0sIF9tdHhUYXJnZXQuZGF0YVsxM10gLSB0aGlzLmRhdGFbMTNdLCBfbXR4VGFyZ2V0LmRhdGFbMTRdIC0gdGhpcy5kYXRhWzE0XSk7XHJcbiAgICAgIHJldHVybiBkaWZmZXJlbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIC8vIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICB0cmFuc2xhdGlvbjogdGhpcy50cmFuc2xhdGlvbi5zZXJpYWxpemUoKSxcclxuICAgICAgICByb3RhdGlvbjogdGhpcy5yb3RhdGlvbi5zZXJpYWxpemUoKSxcclxuICAgICAgICBzY2FsaW5nOiB0aGlzLnNjYWxpbmcuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHtcclxuICAgICAgICB0cmFuc2xhdGlvbjogYXdhaXQgdGhpcy50cmFuc2xhdGlvbi5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi50cmFuc2xhdGlvbiksXHJcbiAgICAgICAgcm90YXRpb246IGF3YWl0IHRoaXMucm90YXRpb24uZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ucm90YXRpb24pLFxyXG4gICAgICAgIHNjYWxpbmc6IGF3YWl0IHRoaXMuc2NhbGluZy5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5zY2FsaW5nKVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLm11dGF0ZShtdXRhdG9yKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGlmICh0aGlzLm11dGF0b3IpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRvcjtcclxuXHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIHRyYW5zbGF0aW9uOiB0aGlzLnRyYW5zbGF0aW9uLmdldE11dGF0b3IoKSxcclxuICAgICAgICByb3RhdGlvbjogdGhpcy5yb3RhdGlvbi5nZXRNdXRhdG9yKCksXHJcbiAgICAgICAgc2NhbGluZzogdGhpcy5zY2FsaW5nLmdldE11dGF0b3IoKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gY2FjaGUgbXV0YXRvclxyXG4gICAgICB0aGlzLm11dGF0b3IgPSBtdXRhdG9yO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGNvbnN0IG06IEZsb2F0MzJBcnJheSA9IHRoaXMuZGF0YTtcclxuXHJcbiAgICAgIGlmIChfbXV0YXRvci50cmFuc2xhdGlvbikge1xyXG4gICAgICAgIGxldCB0cmFuc2xhdGlvbjogVmVjdG9yMyA9IHRoaXMudHJhbnNsYXRpb247XHJcbiAgICAgICAgdHJhbnNsYXRpb24ubXV0YXRlKF9tdXRhdG9yLnRyYW5zbGF0aW9uKTtcclxuICAgICAgICBtWzEyXSA9IHRyYW5zbGF0aW9uLng7IG1bMTNdID0gdHJhbnNsYXRpb24ueTsgbVsxNF0gPSB0cmFuc2xhdGlvbi56O1xyXG4gICAgICAgIHRoaXMuI3RyYW5zbGF0aW9uRGlydHkgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKF9tdXRhdG9yLnJvdGF0aW9uIHx8IF9tdXRhdG9yLnNjYWxpbmcpIHtcclxuICAgICAgICAvLyBUT0RPOiBtYWtlIGZ1bGwgdmVjdG9yIGFuZCBxdWF0ZXJuaW9uIG11dGF0b3JzIG1hbmRhdG9yeT9cclxuXHJcbiAgICAgICAgbGV0IHJvdGF0aW9uOiBWZWN0b3IzIHwgUXVhdGVybmlvbiA9IF9tdXRhdG9yLnJvdGF0aW9uPy53ICE9IHVuZGVmaW5lZCA/XHJcbiAgICAgICAgICB0aGlzLiNxdWF0ZXJuaW9uIDogLy8gdXNpbmcgdGhpcy4jcXVhdGVybmlvbiBhc3N1bWVzIHdlIGdldCBhIGZ1bGwgcXVhdGVybmlvbiBtdXRhdG9yIHdpdGggeCwgeSwgeiBhbmQgdyBzZXQgc28gd2UgbmV2ZXIgbmVlZCB0byByZWNhbGN1bGF0ZSB0aGUgcXVhdGVybmlvbiBoZXJlLiBUaGlzIG1pZ2h0IGNhdXNlIHRyb3VibGUgaWYgd2UgZXZlciB3YW50IHRvIG11dGF0ZSBvbmx5IGEgcGFydCBvZiBhIHF1YXRlcm5pb24uLi5cclxuICAgICAgICAgIGlzRnVsbFZlY3Rvck11dGF0b3IoX211dGF0b3Iucm90YXRpb24pID8gdGhpcy4jcm90YXRpb24gOiB0aGlzLnJvdGF0aW9uOyAvLyBoYWNrIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlY2FsY3VsYXRpb24gb2Ygcm90YXRpb24gYW5kIHNjYWxpbmcuIFRoaXMgcmVjYWxjdWxhdGlvbiBpcyB1bm5lY2Vzc2FyeSB3aGVuIHdlIGdldCBhIGZ1bGwgbXV0YXRvciBpLmUuIHdpdGggeCwgeSBhbmQgeiBzZXRcclxuXHJcbiAgICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSBpc0Z1bGxWZWN0b3JNdXRhdG9yKF9tdXRhdG9yLnNjYWxpbmcpID8gdGhpcy4jc2NhbGluZyA6IHRoaXMuc2NhbGluZztcclxuXHJcbiAgICAgICAgaWYgKF9tdXRhdG9yLnJvdGF0aW9uKVxyXG4gICAgICAgICAgcm90YXRpb24ubXV0YXRlKF9tdXRhdG9yLnJvdGF0aW9uKTtcclxuXHJcbiAgICAgICAgaWYgKF9tdXRhdG9yLnNjYWxpbmcpXHJcbiAgICAgICAgICBzY2FsaW5nLm11dGF0ZShfbXV0YXRvci5zY2FsaW5nKTtcclxuXHJcbiAgICAgICAgTWF0cml4NHg0LnNldFJvdGF0aW9uKG0sIHJvdGF0aW9uKTtcclxuICAgICAgICBjb25zdCBpc0V1bGVyUm90YXRpb246IGJvb2xlYW4gPSByb3RhdGlvbiBpbnN0YW5jZW9mIFZlY3RvcjM7XHJcbiAgICAgICAgdGhpcy4jcm90YXRpb25EaXJ0eSA9ICFpc0V1bGVyUm90YXRpb247XHJcbiAgICAgICAgdGhpcy4jcXVhdGVybmlvbkRpcnR5ID0gaXNFdWxlclJvdGF0aW9uO1xyXG5cclxuICAgICAgICBjb25zdCBzeDogbnVtYmVyID0gc2NhbGluZy54LCBzeTogbnVtYmVyID0gc2NhbGluZy55LCBzejogbnVtYmVyID0gc2NhbGluZy56O1xyXG4gICAgICAgIG1bMF0gKj0gc3g7IG1bMV0gKj0gc3g7IG1bMl0gKj0gc3g7XHJcbiAgICAgICAgbVs0XSAqPSBzeTsgbVs1XSAqPSBzeTsgbVs2XSAqPSBzeTtcclxuICAgICAgICBtWzhdICo9IHN6OyBtWzldICo9IHN6OyBtWzEwXSAqPSBzejtcclxuICAgICAgICB0aGlzLiNzY2FsaW5nRGlydHkgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5tdXRhdG9yID0gbnVsbDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGlzRnVsbFZlY3Rvck11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gX211dGF0b3IgJiYgX211dGF0b3IueCAhPSB1bmRlZmluZWQgJiYgX211dGF0b3IueSAhPSB1bmRlZmluZWQgJiYgX211dGF0b3IueiAhPSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSB7fTtcclxuICAgICAgaWYgKF9tdXRhdG9yLnRyYW5zbGF0aW9uKSB0eXBlcy50cmFuc2xhdGlvbiA9IFwiVmVjdG9yM1wiO1xyXG4gICAgICBpZiAoX211dGF0b3Iucm90YXRpb24pIHR5cGVzLnJvdGF0aW9uID0gXCJWZWN0b3IzXCI7XHJcbiAgICAgIGlmIChfbXV0YXRvci5zY2FsaW5nKSB0eXBlcy5zY2FsaW5nID0gXCJWZWN0b3IzXCI7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7LyoqICovIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0Q2FjaGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3RyYW5zbGF0aW9uRGlydHkgPSB0cnVlO1xyXG4gICAgICB0aGlzLiNyb3RhdGlvbkRpcnR5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy4jcXVhdGVybmlvbkRpcnR5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy4jc2NhbGluZ0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5tdXRhdG9yID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEJhc2VjbGFzcyBmb3IgTm9pc2UyLCBOb2lzZTMgYW5kIE5vaXNlNFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICogVGhpcyBpcyBhbiBhZGFwdGlvbiBvZiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9mYXN0LXNpbXBsZXgtbm9pc2VcclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgTm9pc2Uge1xyXG4gICAgcHJvdGVjdGVkIHBlcm06IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheSg1MTIpO1xyXG4gICAgcHJvdGVjdGVkIHBlcm1Nb2QxMjogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KDUxMik7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbSB2YWx1ZSBiZXR3ZWVuIC0xIGFuZCAxIGJhc2VkIG9uIHRoZSBnaXZlbiBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2FtcGxlOiAoLi4uX2FyZ3M6IG51bWJlcltdKSA9PiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9yYW5kb206IEZ1bmN0aW9uID0gTWF0aC5yYW5kb20pIHtcclxuICAgICAgY29uc3QgcDogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KDI1Nik7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAyNTY7IGkrKylcclxuICAgICAgICBwW2ldID0gaTtcclxuXHJcbiAgICAgIGxldCBuOiBudW1iZXI7XHJcbiAgICAgIGxldCBxOiBudW1iZXI7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDI1NTsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgIG4gPSBNYXRoLmZsb29yKChpICsgMSkgKiBfcmFuZG9tKCkpO1xyXG4gICAgICAgIHEgPSBwW2ldO1xyXG4gICAgICAgIHBbaV0gPSBwW25dO1xyXG4gICAgICAgIHBbbl0gPSBxO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgNTEyOyBpKyspIHtcclxuICAgICAgICB0aGlzLnBlcm1baV0gPSBwW2kgJiAyNTVdO1xyXG4gICAgICAgIHRoaXMucGVybU1vZDEyW2ldID0gdGhpcy5wZXJtW2ldICUgMTI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4vTm9pc2UudHNcIi8+XHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhbiBhZGFwdGlvbiBvZiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9mYXN0LXNpbXBsZXgtbm9pc2VcclxuICAgKiBkb25lIGJ5IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICpcclxuICAgKiBCYXNlZCBvbiBleGFtcGxlIGNvZGUgYnkgU3RlZmFuIEd1c3RhdnNvbiAoc3RlZ3VAaXRuLmxpdS5zZSkuXHJcbiAgICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXHJcbiAgICogQmV0dGVyIHJhbmsgb3JkZXJpbmcgbWV0aG9kIGJ5IFN0ZWZhbiBHdXN0YXZzb24gaW4gMjAxMi5cclxuICAgKlxyXG4gICAqIFRoaXMgY29kZSB3YXMgcGxhY2VkIGluIHRoZSBwdWJsaWMgZG9tYWluIGJ5IGl0cyBvcmlnaW5hbCBhdXRob3IsXHJcbiAgICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxyXG4gICAqIGF0dHJpYnV0aW9uIGlzIGFwcHJlY2lhdGVkLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBOb2lzZTIgZXh0ZW5kcyBOb2lzZSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBvZmZzZXQ6IG51bWJlciA9ICgzLjAgLSBNYXRoLnNxcnQoMy4wKSkgLyA2LjA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBncmFkaWVudDogbnVtYmVyW11bXSA9IFtbMSwgMV0sIFstMSwgMV0sIFsxLCAtMV0sIFstMSwgLTFdLCBbMSwgMF0sIFstMSwgMF0sIFsxLCAwXSwgWy0xLCAwXSwgWzAsIDFdLCBbMCwgLTFdLCBbMCwgMV0sIFswLCAtMV1dO1xyXG4gICAgI3NhbXBsZTogKF94OiBudW1iZXIsIF95OiBudW1iZXIpID0+IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9yYW5kb206IEZ1bmN0aW9uID0gTWF0aC5yYW5kb20pIHtcclxuICAgICAgc3VwZXIoX3JhbmRvbSk7XHJcblxyXG4gICAgICB0aGlzLiNzYW1wbGUgPSAoX3g6IG51bWJlciwgX3k6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIC8vIFNrZXcgdGhlIGlucHV0IHNwYWNlIHRvIGRldGVybWluZSB3aGljaCBzaW1wbGV4IGNlbGwgd2UncmUgaW5cclxuICAgICAgICBjb25zdCBzOiBudW1iZXIgPSAoX3ggKyBfeSkgKiAwLjUgKiAoTWF0aC5zcXJ0KDMuMCkgLSAxLjApOyAvLyBIYWlyeSBmYWN0b3IgZm9yIDJEXHJcbiAgICAgICAgY29uc3QgaTogbnVtYmVyID0gTWF0aC5mbG9vcihfeCArIHMpO1xyXG4gICAgICAgIGNvbnN0IGo6IG51bWJlciA9IE1hdGguZmxvb3IoX3kgKyBzKTtcclxuICAgICAgICBjb25zdCB0OiBudW1iZXIgPSAoaSArIGopICogTm9pc2UyLm9mZnNldDtcclxuICAgICAgICBjb25zdCBYMDogbnVtYmVyID0gaSAtIHQ7IC8vIFVuc2tldyB0aGUgY2VsbCBvcmlnaW4gYmFjayB0byAoeCx5KSBzcGFjZVxyXG4gICAgICAgIGNvbnN0IFkwOiBudW1iZXIgPSBqIC0gdDtcclxuICAgICAgICBjb25zdCB4MDogbnVtYmVyID0gX3ggLSBYMDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW5cclxuICAgICAgICBjb25zdCB5MDogbnVtYmVyID0gX3kgLSBZMDtcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggd2UgYXJlIGluLlxyXG4gICAgICAgIGNvbnN0IGkxOiBudW1iZXIgPSB4MCA+IHkwID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgajE6IG51bWJlciA9IHgwID4geTAgPyAwIDogMTtcclxuXHJcbiAgICAgICAgLy8gT2Zmc2V0Om51bWJlcnMgZm9yIGNvcm5lcnNcclxuICAgICAgICBjb25zdCB4MTogbnVtYmVyID0geDAgLSBpMSArIE5vaXNlMi5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeTE6IG51bWJlciA9IHkwIC0gajEgKyBOb2lzZTIub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHgyOiBudW1iZXIgPSB4MCAtIDEuMCArIDIuMCAqIE5vaXNlMi5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeTI6IG51bWJlciA9IHkwIC0gMS4wICsgMi4wICogTm9pc2UyLm9mZnNldDtcclxuXHJcbiAgICAgICAgLy8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSB0aHJlZSBzaW1wbGV4IGNvcm5lcnNcclxuICAgICAgICBjb25zdCBpaTogbnVtYmVyID0gaSAmIDI1NTtcclxuICAgICAgICBjb25zdCBqajogbnVtYmVyID0gaiAmIDI1NTtcclxuICAgICAgICBjb25zdCBnMDogbnVtYmVyW10gPSBOb2lzZTIuZ3JhZGllbnRbdGhpcy5wZXJtTW9kMTJbaWkgKyB0aGlzLnBlcm1bampdXV07XHJcbiAgICAgICAgY29uc3QgZzE6IG51bWJlcltdID0gTm9pc2UyLmdyYWRpZW50W3RoaXMucGVybU1vZDEyW2lpICsgaTEgKyB0aGlzLnBlcm1bamogKyBqMV1dXTtcclxuICAgICAgICBjb25zdCBnMjogbnVtYmVyW10gPSBOb2lzZTIuZ3JhZGllbnRbdGhpcy5wZXJtTW9kMTJbaWkgKyAxICsgdGhpcy5wZXJtW2pqICsgMV1dXTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgdGhyZWUgY29ybmVyc1xyXG4gICAgICAgIGNvbnN0IHQwOiBudW1iZXIgPSAwLjUgLSB4MCAqIHgwIC0geTAgKiB5MDtcclxuICAgICAgICBjb25zdCBuMDogbnVtYmVyID0gdDAgPCAwID8gMC4wIDogTWF0aC5wb3codDAsIDQpICogKGcwWzBdICogeDAgKyBnMFsxXSAqIHkwKTtcclxuXHJcbiAgICAgICAgY29uc3QgdDE6IG51bWJlciA9IDAuNSAtIHgxICogeDEgLSB5MSAqIHkxO1xyXG4gICAgICAgIGNvbnN0IG4xOiBudW1iZXIgPSB0MSA8IDAgPyAwLjAgOiBNYXRoLnBvdyh0MSwgNCkgKiAoZzFbMF0gKiB4MSArIGcxWzFdICogeTEpO1xyXG5cclxuICAgICAgICBjb25zdCB0MjogbnVtYmVyID0gMC41IC0geDIgKiB4MiAtIHkyICogeTI7XHJcbiAgICAgICAgY29uc3QgbjI6IG51bWJlciA9IHQyIDwgMCA/IDAuMCA6IE1hdGgucG93KHQyLCA0KSAqIChnMlswXSAqIHgyICsgZzJbMV0gKiB5Mik7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cclxuICAgICAgICAvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsIDFdXHJcbiAgICAgICAgcmV0dXJuIDcwLjE0ODA1NzcwNjUzOTUyICogKG4wICsgbjEgKyBuMik7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNhbXBsZSA9IChfeDogbnVtYmVyLCBfeTogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NhbXBsZShfeCwgX3kpO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGFuIGFkYXB0aW9uIG9mIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2Zhc3Qtc2ltcGxleC1ub2lzZVxyXG4gICAqIGRvbmUgYnkgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKlxyXG4gICAqIEJhc2VkIG9uIGV4YW1wbGUgY29kZSBieSBTdGVmYW4gR3VzdGF2c29uIChzdGVndUBpdG4ubGl1LnNlKS5cclxuICAgKiBPcHRpbWlzYXRpb25zIGJ5IFBldGVyIEVhc3RtYW4gKHBlYXN0bWFuQGRyaXp6bGUuc3RhbmZvcmQuZWR1KS5cclxuICAgKiBCZXR0ZXIgcmFuayBvcmRlcmluZyBtZXRob2QgYnkgU3RlZmFuIEd1c3RhdnNvbiBpbiAyMDEyLlxyXG4gICAqXHJcbiAgICogVGhpcyBjb2RlIHdhcyBwbGFjZWQgaW4gdGhlIHB1YmxpYyBkb21haW4gYnkgaXRzIG9yaWdpbmFsIGF1dGhvcixcclxuICAgKiBTdGVmYW4gR3VzdGF2c29uLiBZb3UgbWF5IHVzZSBpdCBhcyB5b3Ugc2VlIGZpdCwgYnV0XHJcbiAgICogYXR0cmlidXRpb24gaXMgYXBwcmVjaWF0ZWQuXHJcbiAgICovXHJcbiAgLy8gVE9ETzogVGVzdFxyXG4gIGV4cG9ydCBjbGFzcyBOb2lzZTMgZXh0ZW5kcyBOb2lzZSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBvZmZzZXQ6IG51bWJlciA9IDEuMCAvIDYuMDtcclxuICAgIHByaXZhdGUgc3RhdGljIGdyYWRpZW50OiBudW1iZXJbXVtdID0gW1sxLCAxLCAwXSwgWy0xLCAxLCAwXSwgWzEsIC0xLCAwXSwgWy0xLCAtMSwgMF0sIFsxLCAwLCAxXSwgWy0xLCAwLCAxXSwgWzEsIDAsIC0xXSwgWy0xLCAwLCAtMV0sIFswLCAxLCAxXSwgWzAsIC0xLCAtMV0sIFswLCAxLCAtMV0sIFswLCAtMSwgLTFdXHJcbiAgICBdO1xyXG4gICAgI3NhbXBsZTogKF94OiBudW1iZXIsIF95OiBudW1iZXIsIF96OiBudW1iZXIpID0+IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9yYW5kb206IEZ1bmN0aW9uID0gTWF0aC5yYW5kb20pIHtcclxuICAgICAgc3VwZXIoX3JhbmRvbSk7XHJcblxyXG4gICAgICB0aGlzLiNzYW1wbGUgPSAoX3g6IG51bWJlciwgX3k6IG51bWJlciwgX3o6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIC8vIFNrZXcgdGhlIGlucHV0IHNwYWNlIHRvIGRldGVybWluZSB3aGljaCBzaW1wbGV4IGNlbGwgd2UncmUgaW5cclxuICAgICAgICBjb25zdCBzOiBudW1iZXIgPSAoX3ggKyBfeSArIF96KSAvIDMuMDsgLy8gVmVyeSBuaWNlIGFuZCBzaW1wbGUgc2tldyBmYWN0b3IgZm9yIDNEXHJcbiAgICAgICAgY29uc3QgaTogbnVtYmVyID0gTWF0aC5mbG9vcihfeCArIHMpO1xyXG4gICAgICAgIGNvbnN0IGo6IG51bWJlciA9IE1hdGguZmxvb3IoX3kgKyBzKTtcclxuICAgICAgICBjb25zdCBrOiBudW1iZXIgPSBNYXRoLmZsb29yKF96ICsgcyk7XHJcbiAgICAgICAgY29uc3QgdDogbnVtYmVyID0gKGkgKyBqICsgaykgKiBOb2lzZTMub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IFgwOiBudW1iZXIgPSBpIC0gdDsgLy8gVW5za2V3IHRoZSBjZWxsIG9yaWdpbiBiYWNrIHRvICh4LHkseikgc3BhY2VcclxuICAgICAgICBjb25zdCBZMDogbnVtYmVyID0gaiAtIHQ7XHJcbiAgICAgICAgY29uc3QgWjA6IG51bWJlciA9IGsgLSB0O1xyXG4gICAgICAgIGNvbnN0IHgwOiBudW1iZXIgPSBfeCAtIFgwOyAvLyBUaGUgeCx5LHogZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luXHJcbiAgICAgICAgY29uc3QgeTA6IG51bWJlciA9IF95IC0gWTA7XHJcbiAgICAgICAgY29uc3QgejA6IG51bWJlciA9IF96IC0gWjA7XHJcblxyXG4gICAgICAgIC8vIERldGVyaW5lIHdoaWNoIHNpbXBsZXggd2UgYXJlIGluXHJcbiAgICAgICAgbGV0IGkxOiBudW1iZXIsIGoxOiBudW1iZXIsIGsxOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGosaykgY29vcmRzXHJcbiAgICAgICAgICA7XHJcbiAgICAgICAgbGV0IGkyOiBudW1iZXIsIGoyOiBudW1iZXIsIGsyOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3IgdGhpcmQgY29ybmVyIG9mIHNpbXBsZXggaW4gKGksaixrKSBjb29yZHNcclxuICAgICAgICAgIDtcclxuICAgICAgICBpZiAoeDAgPj0geTApIHtcclxuICAgICAgICAgIGlmICh5MCA+PSB6MCkge1xyXG4gICAgICAgICAgICBpMSA9IGkyID0gajIgPSAxO1xyXG4gICAgICAgICAgICBqMSA9IGsxID0gazIgPSAwO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh4MCA+PSB6MCkge1xyXG4gICAgICAgICAgICBpMSA9IGkyID0gazIgPSAxO1xyXG4gICAgICAgICAgICBqMSA9IGsxID0gajIgPSAwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgazEgPSBpMiA9IGsyID0gMTtcclxuICAgICAgICAgICAgaTEgPSBqMSA9IGoyID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHkwIDwgejApIHtcclxuICAgICAgICAgICAgazEgPSBqMiA9IGsyID0gMTtcclxuICAgICAgICAgICAgaTEgPSBqMSA9IGkyID0gMDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoeDAgPCB6MCkge1xyXG4gICAgICAgICAgICBqMSA9IGoyID0gazIgPSAxO1xyXG4gICAgICAgICAgICBpMSA9IGsxID0gaTIgPSAwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgajEgPSBpMiA9IGoyID0gMTtcclxuICAgICAgICAgICAgaTEgPSBrMSA9IGsyID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHgxOiBudW1iZXIgPSB4MCAtIGkxICsgTm9pc2UzLm9mZnNldDsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBpbiAoeCx5LHopIGNvb3Jkc1xyXG4gICAgICAgIGNvbnN0IHkxOiBudW1iZXIgPSB5MCAtIGoxICsgTm9pc2UzLm9mZnNldDtcclxuICAgICAgICBjb25zdCB6MTogbnVtYmVyID0gejAgLSBrMSArIE5vaXNlMy5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeDI6IG51bWJlciA9IHgwIC0gaTIgKyAyLjAgKiBOb2lzZTMub2Zmc2V0OyAvLyBPZmZzZXRzIGZvciB0aGlyZCBjb3JuZXIgaW4gKHgseSx6KSBjb29yZHNcclxuICAgICAgICBjb25zdCB5MjogbnVtYmVyID0geTAgLSBqMiArIDIuMCAqIE5vaXNlMy5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgejI6IG51bWJlciA9IHowIC0gazIgKyAyLjAgKiBOb2lzZTMub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHgzOiBudW1iZXIgPSB4MCAtIDEuMCArIDMuMCAqIE5vaXNlMy5vZmZzZXQ7IC8vIE9mZnNldHMgZm9yIGxhc3QgY29ybmVyIGluICh4LHkseikgY29vcmRzXHJcbiAgICAgICAgY29uc3QgeTM6IG51bWJlciA9IHkwIC0gMS4wICsgMy4wICogTm9pc2UzLm9mZnNldDtcclxuICAgICAgICBjb25zdCB6MzogbnVtYmVyID0gejAgLSAxLjAgKyAzLjAgKiBOb2lzZTMub2Zmc2V0O1xyXG5cclxuICAgICAgICAvLyBXb3JrIDpudW1iZXJ1dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIGZvdXIgc2ltcGxleCBjb3JuZXJzXHJcbiAgICAgICAgY29uc3QgaWk6IG51bWJlciA9IGkgJiAyNTU7XHJcbiAgICAgICAgY29uc3Qgamo6IG51bWJlciA9IGogJiAyNTU7XHJcbiAgICAgICAgY29uc3Qga2s6IG51bWJlciA9IGsgJiAyNTU7XHJcbiAgICAgICAgY29uc3QgZzA6IG51bWJlcltdID0gTm9pc2UzLmdyYWRpZW50W3RoaXMucGVybU1vZDEyW2lpICsgdGhpcy5wZXJtW2pqICsgdGhpcy5wZXJtW2trXV1dXTtcclxuICAgICAgICBjb25zdCBnMTogbnVtYmVyW10gPSBOb2lzZTMuZ3JhZGllbnRbdGhpcy5wZXJtTW9kMTJbaWkgKyBpMSArIHRoaXMucGVybVtqaiArIGoxICsgdGhpcy5wZXJtW2trICsgazFdXV1dO1xyXG4gICAgICAgIGNvbnN0IGcyOiBudW1iZXJbXSA9IE5vaXNlMy5ncmFkaWVudFt0aGlzLnBlcm1Nb2QxMltpaSArIGkyICsgdGhpcy5wZXJtW2pqICsgajIgKyB0aGlzLnBlcm1ba2sgKyBrMl1dXV07XHJcbiAgICAgICAgY29uc3QgZzM6IG51bWJlcltdID0gTm9pc2UzLmdyYWRpZW50W3RoaXMucGVybU1vZDEyW2lpICsgMSArIHRoaXMucGVybVtqaiArIDEgKyB0aGlzLnBlcm1ba2sgKyAxXV1dXTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3U6bnVtYmVyYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgZm91ciBjb3JuZXJzXHJcbiAgICAgICAgY29uc3QgdDA6IG51bWJlciA9IDAuNSAtIHgwICogeDAgLSB5MCAqIHkwIC0gejAgKiB6MDtcclxuICAgICAgICBjb25zdCBuMDogbnVtYmVyID0gdDAgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MCwgNCkgKiAoZzBbMF0gKiB4MCArIGcwWzFdICogeTAgKyBnMFsyXSAqIHowKTtcclxuICAgICAgICBjb25zdCB0MTogbnVtYmVyID0gMC41IC0geDEgKiB4MSAtIHkxICogeTEgLSB6MSAqIHoxO1xyXG4gICAgICAgIGNvbnN0IG4xOiBudW1iZXIgPSB0MSA8IDBcclxuICAgICAgICAgID8gMC4wXHJcbiAgICAgICAgICA6IE1hdGgucG93KHQxLCA0KSAqIChnMVswXSAqIHgxICsgZzFbMV0gKiB5MSArIGcxWzJdICogejEpO1xyXG4gICAgICAgIGNvbnN0IHQyOiBudW1iZXIgPSAwLjUgLSB4MiAqIHgyIC0geTIgKiB5MiAtIHoyICogejI7XHJcbiAgICAgICAgY29uc3QgbjI6IG51bWJlciA9IHQyIDwgMFxyXG4gICAgICAgICAgPyAwLjBcclxuICAgICAgICAgIDogTWF0aC5wb3codDIsIDQpICogKGcyWzBdICogeDIgKyBnMlsxXSAqIHkyICsgZzJbMl0gKiB6Mik7XHJcbiAgICAgICAgY29uc3QgdDM6IG51bWJlciA9IDAuNSAtIHgzICogeDMgLSB5MyAqIHkzIC0gejMgKiB6MztcclxuICAgICAgICBjb25zdCBuMzogbnVtYmVyID0gdDMgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MywgNCkgKiAoZzNbMF0gKiB4MyArIGczWzFdICogeTMgKyBnM1syXSAqIHozKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGNvbnRyaWJ1dGlvbnMgZnJvbSBlYWNoIGNvcm5lciB0byBnZXQgdGhlIGZpbmFsIG5vaXNlIHZhbHVlLlxyXG4gICAgICAgIC8vIFRoZSByZXN1bHQgaXMgc2NhbGVkIHRvIHN0YXkganVzdCBpbnNpZGUgWy0xLDFdXHJcbiAgICAgICAgcmV0dXJuIDk0LjY4NDkzMTUwNjgxOTcyICogKG4wICsgbjEgKyBuMiArIG4zKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2FtcGxlID0gKF94OiBudW1iZXIsIF95OiBudW1iZXIsIF96OiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc2FtcGxlKF94LCBfeSwgX3opO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvLyBUT0RPOiBUZXN0XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhbiBhZGFwdGlvbiBvZiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9mYXN0LXNpbXBsZXgtbm9pc2VcclxuICAgKiBkb25lIGJ5IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICpcclxuICAgKiBCYXNlZCBvbiBleGFtcGxlIGNvZGUgYnkgU3RlZmFuIEd1c3RhdnNvbiAoc3RlZ3VAaXRuLmxpdS5zZSkuXHJcbiAgICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXHJcbiAgICogQmV0dGVyIHJhbmsgb3JkZXJpbmcgbWV0aG9kIGJ5IFN0ZWZhbiBHdXN0YXZzb24gaW4gMjAxMi5cclxuICAgKlxyXG4gICAqIFRoaXMgY29kZSB3YXMgcGxhY2VkIGluIHRoZSBwdWJsaWMgZG9tYWluIGJ5IGl0cyBvcmlnaW5hbCBhdXRob3IsXHJcbiAgICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxyXG4gICAqIGF0dHJpYnV0aW9uIGlzIGFwcHJlY2lhdGVkLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBOb2lzZTQgZXh0ZW5kcyBOb2lzZSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBvZmZzZXQ6IG51bWJlciA9ICg1LjAgLSBNYXRoLnNxcnQoNS4wKSkgLyAyMC4wO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ3JhZGllbnQ6IG51bWJlcltdW10gPSBbWzAsIDEsIDEsIDFdLCBbMCwgMSwgMSwgLTFdLCBbMCwgMSwgLTEsIDFdLCBbMCwgMSwgLTEsIC0xXSwgWzAsIC0xLCAxLCAxXSwgWzAsIC0xLCAxLCAtMV0sIFswLCAtMSwgLTEsIDFdLCBbMCwgLTEsIC0xLCAtMV0sIFsxLCAwLCAxLCAxXSwgWzEsIDAsIDEsIC0xXSwgWzEsIDAsIC0xLCAxXSwgWzEsIDAsIC0xLCAtMV0sIFstMSwgMCwgMSwgMV0sIFstMSwgMCwgMSwgLTFdLCBbLTEsIDAsIC0xLCAxXSwgWy0xLCAwLCAtMSwgLTFdLCBbMSwgMSwgMCwgMV0sIFsxLCAxLCAwLCAtMV0sIFsxLCAtMSwgMCwgMV0sIFsxLCAtMSwgMCwgLTFdLCBbLTEsIDEsIDAsIDFdLCBbLTEsIDEsIDAsIC0xXSwgWy0xLCAtMSwgMCwgMV0sIFstMSwgLTEsIDAsIC0xXSwgWzEsIDEsIDEsIDBdLCBbMSwgMSwgLTEsIDBdLCBbMSwgLTEsIDEsIDBdLCBbMSwgLTEsIC0xLCAwXSwgWy0xLCAxLCAxLCAwXSwgWy0xLCAxLCAtMSwgMF0sIFstMSwgLTEsIDEsIDBdLCBbLTEsIC0xLCAtMSwgMF1dO1xyXG4gICAgI3NhbXBsZTogKF94OiBudW1iZXIsIF95OiBudW1iZXIsIF96OiBudW1iZXIsIF93OiBudW1iZXIpID0+IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9yYW5kb206IEZ1bmN0aW9uID0gTWF0aC5yYW5kb20pIHtcclxuICAgICAgc3VwZXIoX3JhbmRvbSk7XHJcblxyXG4gICAgICB0aGlzLiNzYW1wbGUgPSAoX3g6IG51bWJlciwgX3k6IG51bWJlciwgX3o6IG51bWJlciwgX3c6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgICAgLy8gU2tldyB0aGUgKHgseSx6LHcpIHNwYWNlIHRvIGRldGVybWluZSB3aGljaCBjZWxsIG9mIDI0IHNpbXBsaWNlcyB3ZSdyZSBpblxyXG4gICAgICAgIGNvbnN0IHM6IG51bWJlciA9IChfeCArIF95ICsgX3ogKyBfdykgKiAoTWF0aC5zcXJ0KDUuMCkgLSAxLjApIC8gNC4wOyAvLyBGYWN0b3IgZm9yIDREIHNrZXdpbmdcclxuICAgICAgICBjb25zdCBpOiBudW1iZXIgPSBNYXRoLmZsb29yKF94ICsgcyk7XHJcbiAgICAgICAgY29uc3QgajogbnVtYmVyID0gTWF0aC5mbG9vcihfeSArIHMpO1xyXG4gICAgICAgIGNvbnN0IGs6IG51bWJlciA9IE1hdGguZmxvb3IoX3ogKyBzKTtcclxuICAgICAgICBjb25zdCBsOiBudW1iZXIgPSBNYXRoLmZsb29yKF93ICsgcyk7XHJcbiAgICAgICAgY29uc3QgdDogbnVtYmVyID0gKGkgKyBqICsgayArIGwpICogTm9pc2U0Lm9mZnNldDsgLy8gRmFjdG9yIGZvciA0RCB1bnNrZXdpbmdcclxuICAgICAgICBjb25zdCBYMDogbnVtYmVyID0gaSAtIHQ7IC8vIFVuc2tldyB0aGUgY2VsbCBvcmlnaW4gYmFjayB0byAoeCx5LHosdykgc3BhY2VcclxuICAgICAgICBjb25zdCBZMDogbnVtYmVyID0gaiAtIHQ7XHJcbiAgICAgICAgY29uc3QgWjA6IG51bWJlciA9IGsgLSB0O1xyXG4gICAgICAgIGNvbnN0IFcwOiBudW1iZXIgPSBsIC0gdDtcclxuICAgICAgICBjb25zdCB4MDogbnVtYmVyID0gX3ggLSBYMDsgLy8gVGhlIHgseSx6LHcgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luXHJcbiAgICAgICAgY29uc3QgeTA6IG51bWJlciA9IF95IC0gWTA7XHJcbiAgICAgICAgY29uc3QgejA6IG51bWJlciA9IF96IC0gWjA7XHJcbiAgICAgICAgY29uc3QgdzA6IG51bWJlciA9IF93IC0gVzA7XHJcblxyXG4gICAgICAgIC8vIFRvIGZpbmQgb3V0IHdoaWNoIG9mIHRoZSAyNCBwb3NzaWJsZSBzaW1wbGljZXMgd2UncmUgaW4sIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIHRoZVxyXG4gICAgICAgIC8vIG1hZ25pdHVkZSBvcmRlcmluZyBvZiB4MCwgeTAsIHowIGFuZCB3MC4gU2l4IHBhaXItd2lzZSBjb21wYXJpc29ucyBhcmUgcGVyZm9ybWVkIGJldHdlZW5cclxuICAgICAgICAvLyBlYWNoIHBvc3NpYmxlIHBhaXIgb2YgdGhlIGZvdXIgY29vcmRpbmF0ZXMsIGFuZCB0aGUgcmVzdWx0cyBhcmUgdXNlZCB0byByYW5rIHRoZSBudW1iZXJzLlxyXG4gICAgICAgIGxldCByYW5reDogbnVtYmVyID0gMDtcclxuICAgICAgICBsZXQgcmFua3k6IG51bWJlciA9IDA7XHJcbiAgICAgICAgbGV0IHJhbmt6OiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGxldCByYW5rdzogbnVtYmVyID0gMDtcclxuICAgICAgICBpZiAoeDAgPiB5MCkgcmFua3grKztcclxuICAgICAgICBlbHNlIHJhbmt5Kys7XHJcbiAgICAgICAgaWYgKHgwID4gejApIHJhbmt4Kys7XHJcbiAgICAgICAgZWxzZSByYW5reisrO1xyXG4gICAgICAgIGlmICh4MCA+IHcwKSByYW5reCsrO1xyXG4gICAgICAgIGVsc2UgcmFua3crKztcclxuICAgICAgICBpZiAoeTAgPiB6MCkgcmFua3krKztcclxuICAgICAgICBlbHNlIHJhbmt6Kys7XHJcbiAgICAgICAgaWYgKHkwID4gdzApIHJhbmt5Kys7XHJcbiAgICAgICAgZWxzZSByYW5rdysrO1xyXG4gICAgICAgIGlmICh6MCA+IHcwKSByYW5reisrO1xyXG4gICAgICAgIGVsc2UgcmFua3crKztcclxuXHJcbiAgICAgICAgLy8gc2ltcGxleFtjXSBpcyBhIDQtdmVjdG9yIHdpdGggdGhlIG51bWJlcnMgMCwgMSwgMiBhbmQgMyBpbiBzb21lIG9yZGVyLlxyXG4gICAgICAgIC8vIE1hbnkgdmFsdWVzIG9mIGMgd2lsbCBuZXZlciBvY2N1ciwgc2luY2UgZS5nLiB4Pnk+ej53IG1ha2VzIHg8eiwgeTx3IGFuZCB4PHdcclxuICAgICAgICAvLyBpbXBvc3NpYmxlLiBPbmx5IHRoZSAyNCBpbmRpY2VzIHdoaWNoIGhhdmUgbm9uLXplcm8gZW50cmllcyBtYWtlIGFueSBzZW5zZS5cclxuICAgICAgICAvLyBXZSB1c2UgYSB0aHJlc2hvbGRpbmcgdG8gc2V0IHRoZSBjb29yZGluYXRlcyBpbiB0dXJuIGZyb20gdGhlIGxhcmdlc3QgbWFnbml0dWRlLlxyXG4gICAgICAgIC8vIFJhbmsgMyBkZW5vdGVzIHRoZSBsYXJnZXN0IGNvb3JkaW5hdGUuXHJcbiAgICAgICAgY29uc3QgaTE6IG51bWJlciA9IHJhbmt4ID49IDMgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBqMTogbnVtYmVyID0gcmFua3kgPj0gMyA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGsxOiBudW1iZXIgPSByYW5reiA+PSAzID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgbDE6IG51bWJlciA9IHJhbmt3ID49IDMgPyAxIDogMDtcclxuICAgICAgICAvLyBSYW5rIDogMiBkZW5vdGVzIHRoZSBzZWNvbmQgbGFyZ2VzdCBjb29yZGluYXRlLlxyXG4gICAgICAgIGNvbnN0IGkyOiBudW1iZXIgPSByYW5reCA+PSAyID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgajI6IG51bWJlciA9IHJhbmt5ID49IDIgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBrMjogbnVtYmVyID0gcmFua3ogPj0gMiA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGwyOiBudW1iZXIgPSByYW5rdyA+PSAyID8gMSA6IDA7XHJcbiAgICAgICAgLy8gUmFuayA6IDEgZGVub3RlcyB0aGUgc2Vjb25kIHNtYWxsZXN0IGNvb3JkaW5hdGUuXHJcbiAgICAgICAgY29uc3QgaTM6IG51bWJlciA9IHJhbmt4ID49IDEgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBqMzogbnVtYmVyID0gcmFua3kgPj0gMSA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGszOiBudW1iZXIgPSByYW5reiA+PSAxID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgbDM6IG51bWJlciA9IHJhbmt3ID49IDEgPyAxIDogMDtcclxuXHJcbiAgICAgICAgLy8gVGhlIGZpZnRoIGNvcm5lciBoYXMgYWxsIGNvb3JkaW5hdGUgb2Zmc2V0cyA9IDEsIHNvIG5vIG5lZWQgdG8gY29tcHV0ZSB0aGF0LlxyXG4gICAgICAgIGNvbnN0IHgxOiBudW1iZXIgPSB4MCAtIGkxICsgTm9pc2U0Lm9mZnNldDsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBpbiAoeCx5LHosdykgY29vcmRzXHJcbiAgICAgICAgY29uc3QgeTE6IG51bWJlciA9IHkwIC0gajEgKyBOb2lzZTQub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHoxOiBudW1iZXIgPSB6MCAtIGsxICsgTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB3MTogbnVtYmVyID0gdzAgLSBsMSArIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeDI6IG51bWJlciA9IHgwIC0gaTIgKyAyLjAgKiBOb2lzZTQub2Zmc2V0OyAvLyBPZmZzZXRzIGZvciB0aGlyZCBjb3JuZXIgaW4gKHgseSx6LHcpIGNvb3Jkc1xyXG4gICAgICAgIGNvbnN0IHkyOiBudW1iZXIgPSB5MCAtIGoyICsgMi4wICogTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB6MjogbnVtYmVyID0gejAgLSBrMiArIDIuMCAqIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgdzI6IG51bWJlciA9IHcwIC0gbDIgKyAyLjAgKiBOb2lzZTQub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHgzOiBudW1iZXIgPSB4MCAtIGkzICsgMy4wICogTm9pc2U0Lm9mZnNldDsgLy8gT2Zmc2V0cyBmb3IgZm91cnRoIGNvcm5lciBpbiAoeCx5LHosdykgY29vcmRzXHJcbiAgICAgICAgY29uc3QgeTM6IG51bWJlciA9IHkwIC0gajMgKyAzLjAgKiBOb2lzZTQub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHozOiBudW1iZXIgPSB6MCAtIGszICsgMy4wICogTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB3MzogbnVtYmVyID0gdzAgLSBsMyArIDMuMCAqIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeDQ6IG51bWJlciA9IHgwIC0gMS4wICsgNC4wICogTm9pc2U0Lm9mZnNldDsgLy8gT2Zmc2V0cyBmb3IgbGFzdCBjb3JuZXIgaW4gKHgseSx6LHcpIGNvb3Jkc1xyXG4gICAgICAgIGNvbnN0IHk0OiBudW1iZXIgPSB5MCAtIDEuMCArIDQuMCAqIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgejQ6IG51bWJlciA9IHowIC0gMS4wICsgNC4wICogTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB3NDogbnVtYmVyID0gdzAgLSAxLjAgKyA0LjAgKiBOb2lzZTQub2Zmc2V0O1xyXG5cclxuICAgICAgICAvLyBXb3JrIG91dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIGZpdmUgc2ltcGxleCBjb3JuZXJzXHJcbiAgICAgICAgY29uc3QgaWk6IG51bWJlciA9IGkgJiAyNTU7XHJcbiAgICAgICAgY29uc3Qgamo6IG51bWJlciA9IGogJiAyNTU7XHJcbiAgICAgICAgY29uc3Qga2s6IG51bWJlciA9IGsgJiAyNTU7XHJcbiAgICAgICAgY29uc3QgbGw6IG51bWJlciA9IGwgJiAyNTU7XHJcbiAgICAgICAgY29uc3QgZzA6IG51bWJlcltdID0gTm9pc2U0LmdyYWRpZW50W1xyXG4gICAgICAgICAgdGhpcy5wZXJtW2lpICsgdGhpcy5wZXJtW2pqICsgdGhpcy5wZXJtW2trICsgdGhpcy5wZXJtW2xsXV1dXSAlXHJcbiAgICAgICAgICAzMlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgZzE6IG51bWJlcltdID0gTm9pc2U0LmdyYWRpZW50W1xyXG4gICAgICAgICAgdGhpcy5wZXJtW1xyXG4gICAgICAgICAgICBpaSArIGkxICsgdGhpcy5wZXJtW2pqICsgajEgKyB0aGlzLnBlcm1ba2sgKyBrMSArIHRoaXMucGVybVtsbCArIGwxXV1dXHJcbiAgICAgICAgICBdICUgMzJcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGcyOiBudW1iZXJbXSA9IE5vaXNlNC5ncmFkaWVudFtcclxuICAgICAgICAgIHRoaXMucGVybVtcclxuICAgICAgICAgICAgaWkgKyBpMiArIHRoaXMucGVybVtqaiArIGoyICsgdGhpcy5wZXJtW2trICsgazIgKyB0aGlzLnBlcm1bbGwgKyBsMl1dXVxyXG4gICAgICAgICAgXSAlIDMyXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBnMzogbnVtYmVyW10gPSBOb2lzZTQuZ3JhZGllbnRbXHJcbiAgICAgICAgICB0aGlzLnBlcm1bXHJcbiAgICAgICAgICAgIGlpICsgaTMgKyB0aGlzLnBlcm1bamogKyBqMyArIHRoaXMucGVybVtrayArIGszICsgdGhpcy5wZXJtW2xsICsgbDNdXV1cclxuICAgICAgICAgIF0gJSAzMlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgZzQ6IG51bWJlcltdID0gTm9pc2U0LmdyYWRpZW50W1xyXG4gICAgICAgICAgdGhpcy5wZXJtW1xyXG4gICAgICAgICAgICBpaSArIDEgKyB0aGlzLnBlcm1bamogKyAxICsgdGhpcy5wZXJtW2trICsgMSArIHRoaXMucGVybVtsbCArIDFdXV1cclxuICAgICAgICAgIF0gJSAzMlxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgY29udHJpYnV0aW9uIGZyb20gdGhlIGZpdmUgY29ybmVyc1xyXG4gICAgICAgIGNvbnN0IHQwOiBudW1iZXIgPSAwLjUgLSB4MCAqIHgwIC0geTAgKiB5MCAtIHowICogejAgLSB3MCAqIHcwO1xyXG4gICAgICAgIGNvbnN0IG4wOiBudW1iZXIgPSB0MCA8IDBcclxuICAgICAgICAgID8gMC4wXHJcbiAgICAgICAgICA6IE1hdGgucG93KHQwLCA0KSAqIChnMFswXSAqIHgwICsgZzBbMV0gKiB5MCArIGcwWzJdICogejAgKyBnMFszXSAqIHcwKTtcclxuICAgICAgICBjb25zdCB0MTogbnVtYmVyID0gMC41IC0geDEgKiB4MSAtIHkxICogeTEgLSB6MSAqIHoxIC0gdzEgKiB3MTtcclxuICAgICAgICBjb25zdCBuMTogbnVtYmVyID0gdDEgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MSwgNCkgKiAoZzFbMF0gKiB4MSArIGcxWzFdICogeTEgKyBnMVsyXSAqIHoxICsgZzFbM10gKiB3MSk7XHJcbiAgICAgICAgY29uc3QgdDI6IG51bWJlciA9IDAuNSAtIHgyICogeDIgLSB5MiAqIHkyIC0gejIgKiB6MiAtIHcyICogdzI7XHJcbiAgICAgICAgY29uc3QgbjI6IG51bWJlciA9IHQyIDwgMFxyXG4gICAgICAgICAgPyAwLjBcclxuICAgICAgICAgIDogTWF0aC5wb3codDIsIDQpICogKGcyWzBdICogeDIgKyBnMlsxXSAqIHkyICsgZzJbMl0gKiB6MiArIGcyWzNdICogdzIpO1xyXG4gICAgICAgIGNvbnN0IHQzOiBudW1iZXIgPSAwLjUgLSB4MyAqIHgzIC0geTMgKiB5MyAtIHozICogejMgLSB3MyAqIHczO1xyXG4gICAgICAgIGNvbnN0IG4zOiBudW1iZXIgPSB0MyA8IDBcclxuICAgICAgICAgID8gMC4wXHJcbiAgICAgICAgICA6IE1hdGgucG93KHQzLCA0KSAqIChnM1swXSAqIHgzICsgZzNbMV0gKiB5MyArIGczWzJdICogejMgKyBnM1szXSAqIHczKTtcclxuICAgICAgICBjb25zdCB0NDogbnVtYmVyID0gMC41IC0geDQgKiB4NCAtIHk0ICogeTQgLSB6NCAqIHo0IC0gdzQgKiB3NDtcclxuICAgICAgICBjb25zdCBuNDogbnVtYmVyID0gdDQgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0NCwgNCkgKiAoZzRbMF0gKiB4NCArIGc0WzFdICogeTQgKyBnNFsyXSAqIHo0ICsgZzRbM10gKiB3NCk7XHJcblxyXG4gICAgICAgIC8vIFN1bSB1cCBhbmQgc2NhbGUgdGhlIHJlc3VsdCB0byBjb3ZlciB0aGUgcmFuZ2UgWy0xLDFdXHJcbiAgICAgICAgcmV0dXJuIDcyLjM3ODU1NzY1MTUzNjY1ICogKG4wICsgbjEgKyBuMiArIG4zICsgbjQpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzYW1wbGUgPSAoX3g6IG51bWJlciwgX3k6IG51bWJlciwgX3o6IG51bWJlciwgX3c6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzYW1wbGUoX3gsIF95LCBfeiwgX3cpO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICogU3RvcmluZyBhbmQgbWFuaXB1bGF0aW5nIHJvdGF0aW9ucyBpbiB0aGUgZm9ybSBvZiBxdWF0ZXJuaW9ucy5cclxuICAgICogQ29uc3RydWN0ZWQgb3V0IG9mIHRoZSA0IGNvbXBvbmVudHM6ICh4LCB5LCB6LCB3KS4gTWF0aGVtYXRpY2FsIG5vdGF0aW9uOiB3ICsgeGkgKyB5aiArIHprLlxyXG4gICAgKiBBIFF1YXRlcm5pb24gY2FuIGJlIGRlc2NyaWJlZCB3aXRoIGFuIGF4aXMgYW5kIGFuZ2xlOiAoeCwgeSwgeikgPSBzaW4oYW5nbGUvMikqYXhpczsgdyA9IGNvcyhhbmdsZS8yKS5cclxuICAgICogcm9sbDogeCwgcGl0Y2g6IHksIHlhdzogei4gTm90ZSB0aGF0IG9wZXJhdGlvbnMgYXJlIGFkYXB0ZWQgdG8gd29yayB3aXRoIHZlY3RvcnMgd2hlcmUgeSBpcyB1cCBhbmQgeiBpcyBmb3J3YXJkLlxyXG4gICAgKiBAYXV0aG9ycyBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyMyB8IE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4gICAgKi9cclxuICBleHBvcnQgY2xhc3MgUXVhdGVybmlvbiBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUsIFJlY3ljYWJsZSB7XHJcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICAgcHVibGljIHk6IG51bWJlcjtcclxuICAgIHB1YmxpYyB6OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdzogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBtdXRhdG9yOiBNdXRhdG9yID0gbnVsbDsgLy8gcHJlcGFyZWQgZm9yIG9wdGltaXphdGlvbiwga2VlcCBtdXRhdG9yIHRvIHJlZHVjZSByZWR1bmRhbnQgY2FsY3VsYXRpb24gYW5kIGZvciBjb21wYXJpc29uLiBTZXQgdG8gbnVsbCB3aGVuIGRhdGEgY2hhbmdlcyFcclxuXHJcbiAgICByZWFkb25seSAjZXVsZXJBbmdsZXM6IFZlY3RvcjMgPSBWZWN0b3IzLlpFUk8oKTsgLy8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBxdWF0ZXJuaW9uIGluIGRlZ3JlZXMuXHJcbiAgICAjZXVsZXJBbmdsZXNEaXJ0eTogYm9vbGVhbjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3g6IG51bWJlciA9IDAsIF95OiBudW1iZXIgPSAwLCBfejogbnVtYmVyID0gMCwgX3c6IG51bWJlciA9IDEpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zZXQoX3gsIF95LCBfeiwgX3cpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBTVEFUSUNTXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIGEgbmV3IGlkZW50aXR5IHF1YXRlcm5pb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBJREVOVElUWSgpOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgY29uc3QgcmVzdWx0OiBRdWF0ZXJuaW9uID0gUmVjeWNsZXIuZ2V0KFF1YXRlcm5pb24pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHF1YXRlcm5pb24gd2hpY2ggaXMgYSBjb3B5IG9mIHRoZSBnaXZlbiBxdWF0ZXJuaW9uIHNjYWxlZCB0byBsZW5ndGggMS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBOT1JNQUxJWkFUSU9OKF9xOiBRdWF0ZXJuaW9uKTogUXVhdGVybmlvbiB7XHJcbiAgICAgIHJldHVybiBfcS5jbG9uZS5ub3JtYWxpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBxdWF0ZXJuaW9uIHRoYXQgcm90YXRlcyBjb29yZGluYXRlcyB3aGVuIG11bHRpcGxpZWQgYnksIHVzaW5nIHRoZSBhbmdsZXMgZ2l2ZW4uXHJcbiAgICAgKiBSb3RhdGlvbiBvY2N1cnMgYXJvdW5kIHRoZSBheGlzIGluIHRoZSBvcmRlciBaLVktWC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBST1RBVElPTihfZXVsZXJBbmdsZXM6IFZlY3RvcjMpOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgY29uc3QgcmVzdWx0OiBRdWF0ZXJuaW9uID0gUmVjeWNsZXIuZ2V0KFF1YXRlcm5pb24pO1xyXG4gICAgICByZXN1bHQuZXVsZXJBbmdsZXMgPSBfZXVsZXJBbmdsZXM7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcXVhdGVybmlvbiB0aGF0IHJvdGF0ZXMgY29vcmRpbmF0ZXMgd2hlbiBtdWx0aXBsaWVkIGJ5LCB1c2luZyB0aGUgYXhpcyBhbmQgYW5nbGUgZ2l2ZW4uXHJcbiAgICAgKiDimqDvuI8gVU5URVNURUQhXHJcbiAgICAgKi9cclxuICAgIC8vIHB1YmxpYyBzdGF0aWMgUk9UQVRJT04oX2F4aXM6IFZlY3RvcjMsIF9hbmdsZTogbnVtYmVyKTogUXVhdGVybmlvbiB7XHJcbiAgICAvLyAgIGNvbnN0IHJlc3VsdDogUXVhdGVybmlvbiA9IFJlY3ljbGVyLmdldChRdWF0ZXJuaW9uKTtcclxuXHJcbiAgICAvLyAgIC8vIE5vcm1hbGl6ZSB0aGUgYXhpc1xyXG4gICAgLy8gICBjb25zdCBheGlzOiBWZWN0b3IzID0gX2F4aXMuY2xvbmU7XHJcbiAgICAvLyAgIGF4aXMubm9ybWFsaXplKCk7XHJcblxyXG4gICAgLy8gICAvLyBDYWxjdWxhdGUgdGhlIHF1YXRlcm5pb24gY29tcG9uZW50c1xyXG4gICAgLy8gICBjb25zdCBoYWxmQW5nbGU6IG51bWJlciA9IF9hbmdsZSAvIDI7XHJcbiAgICAvLyAgIGNvbnN0IHM6IG51bWJlciA9IE1hdGguc2luKGhhbGZBbmdsZSk7XHJcbiAgICAvLyAgIHJlc3VsdC54ID0gYXhpcy54ICogcztcclxuICAgIC8vICAgcmVzdWx0LnkgPSBheGlzLnkgKiBzO1xyXG4gICAgLy8gICByZXN1bHQueiA9IGF4aXMueiAqIHM7XHJcbiAgICAvLyAgIHJlc3VsdC53ID0gTWF0aC5jb3MoaGFsZkFuZ2xlKTtcclxuXHJcbiAgICAvLyAgIFJlY3ljbGVyLnN0b3JlKGF4aXMpO1xyXG5cclxuICAgIC8vICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBwcm9kdWN0IG9mIHR3byBwYXNzZWQgcXVhdGVybmlvbnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUFJPRFVDVChfcUxlZnQ6IFF1YXRlcm5pb24sIF9xUmlnaHQ6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgcmV0dXJuIF9xTGVmdC5jbG9uZS5tdWx0aXBseShfcVJpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBpbnZlcnNlIG9mIGEgcGFzc2VkIHF1YXRlcm5pb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgSU5WRVJTRShfcTogUXVhdGVybmlvbik6IFF1YXRlcm5pb24ge1xyXG4gICAgICByZXR1cm4gX3EuY2xvbmUuaW52ZXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyB0aGUgY29uanVnYXRlIG9mIGEgcGFzc2VkIHF1YXRlcm5pb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OSlVHQVRJT04oX3E6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgcmV0dXJuIF9xLmNsb25lLmNvbmp1Z2F0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHF1YXRlcm5pb25zLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIERPVChfcTE6IFF1YXRlcm5pb24sIF9xMjogUXVhdGVybmlvbik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBfcTEueCAqIF9xMi54ICsgX3ExLnkgKiBfcTIueSArIF9xMS56ICogX3EyLnogKyBfcTEudyAqIF9xMi53O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbm9ybWFsaXplZCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0ZXJuaW9ucyBiYXNlZCBvbiB0aGUgZ2l2ZW4gX2ZhY3Rvci4gV2hlbiBfZmFjdG9yIGlzIDAgdGhlIHJlc3VsdCBpcyBfZnJvbSwgd2hlbiBfZmFjdG9yIGlzIDEgdGhlIHJlc3VsdCBpcyBfdG8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgTEVSUChfZnJvbTogUXVhdGVybmlvbiwgX3RvOiBRdWF0ZXJuaW9uLCBfZmFjdG9yOiBudW1iZXIpOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgbGV0IHJlc3VsdDogUXVhdGVybmlvbiA9IFJlY3ljbGVyLmdldChRdWF0ZXJuaW9uKTtcclxuICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICAoX2Zyb20ueCAqICgxIC0gX2ZhY3RvcikgKyBfdG8ueCAqIF9mYWN0b3IpLFxyXG4gICAgICAgIChfZnJvbS55ICogKDEgLSBfZmFjdG9yKSArIF90by55ICogX2ZhY3RvciksXHJcbiAgICAgICAgKF9mcm9tLnogKiAoMSAtIF9mYWN0b3IpICsgX3RvLnogKiBfZmFjdG9yKSxcclxuICAgICAgICAoX2Zyb20udyAqICgxIC0gX2ZhY3RvcikgKyBfdG8udyAqIF9mYWN0b3IpXHJcbiAgICAgICk7XHJcbiAgICAgIHJlc3VsdC5ub3JtYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0ZXJuaW9ucyBiYXNlZCBvbiB0aGUgZ2l2ZW4gX2ZhY3Rvci4gV2hlbiBfZmFjdG9yIGlzIDAgdGhlIHJlc3VsdCBpcyBfZnJvbSwgd2hlbiBfZmFjdG9yIGlzIDEgdGhlIHJlc3VsdCBpcyBfdG8uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFNMRVJQKF9mcm9tOiBRdWF0ZXJuaW9uLCBfdG86IFF1YXRlcm5pb24sIF9mYWN0b3I6IG51bWJlcik6IFF1YXRlcm5pb24ge1xyXG4gICAgICAvLyBGcm9tOiBodHRwczovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9yZWFsTm9ybWVkQWxnZWJyYS9xdWF0ZXJuaW9ucy9zbGVycC9cclxuICAgICAgbGV0IGNvc0hhbGZUaGV0YTogbnVtYmVyID0gX2Zyb20udyAqIF90by53ICsgX2Zyb20ueCAqIF90by54ICsgX2Zyb20ueSAqIF90by55ICsgX2Zyb20ueiAqIF90by56O1xyXG4gICAgICBpZiAoTWF0aC5hYnMoY29zSGFsZlRoZXRhKSA+PSAxKVxyXG4gICAgICAgIHJldHVybiBfZnJvbTtcclxuICAgICAgbGV0IGhhbGZUaGV0YTogbnVtYmVyID0gTWF0aC5hY29zKGNvc0hhbGZUaGV0YSk7XHJcbiAgICAgIGxldCBzaW5IYWxmVGhldGE6IG51bWJlciA9IE1hdGguc3FydCgxIC0gY29zSGFsZlRoZXRhICogY29zSGFsZlRoZXRhKTtcclxuICAgICAgaWYgKE1hdGguYWJzKHNpbkhhbGZUaGV0YSkgPCAwLjAwMSkge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IFF1YXRlcm5pb24gPSBSZWN5Y2xlci5nZXQoUXVhdGVybmlvbik7XHJcbiAgICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICAgIChfZnJvbS54ICogMC41ICsgX3RvLnggKiAwLjUpLFxyXG4gICAgICAgICAgKF9mcm9tLnkgKiAwLjUgKyBfdG8ueSAqIDAuNSksXHJcbiAgICAgICAgICAoX2Zyb20ueiAqIDAuNSArIF90by56ICogMC41KSxcclxuICAgICAgICAgIChfZnJvbS53ICogMC41ICsgX3RvLncgKiAwLjUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICAgIGxldCByYXRpb0E6IG51bWJlciA9IE1hdGguc2luKCgxIC0gX2ZhY3RvcikgKiBoYWxmVGhldGEpIC8gc2luSGFsZlRoZXRhO1xyXG4gICAgICBsZXQgcmF0aW9COiBudW1iZXIgPSBNYXRoLnNpbihfZmFjdG9yICogaGFsZlRoZXRhKSAvIHNpbkhhbGZUaGV0YTtcclxuICAgICAgbGV0IHJlc3VsdDogUXVhdGVybmlvbiA9IFJlY3ljbGVyLmdldChRdWF0ZXJuaW9uKTtcclxuICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICAoX2Zyb20ueCAqIHJhdGlvQSArIF90by54ICogcmF0aW9CKSxcclxuICAgICAgICAoX2Zyb20ueSAqIHJhdGlvQSArIF90by55ICogcmF0aW9CKSxcclxuICAgICAgICAoX2Zyb20ueiAqIHJhdGlvQSArIF90by56ICogcmF0aW9CKSxcclxuICAgICAgICAoX2Zyb20udyAqIHJhdGlvQSArIF90by53ICogcmF0aW9CKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBjbG9uZSBvZiB0aGlzIHF1YXRlcm5pb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgY2xvbmUoKTogUXVhdGVybmlvbiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFF1YXRlcm5pb24gPSBSZWN5Y2xlci5yZXVzZShRdWF0ZXJuaW9uKTtcclxuICAgICAgcmVzdWx0LmNvcHkodGhpcyk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAtIGdldDogcmV0dXJuIHRoZSBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcm90YXRpb24gaW4gZGVncmVlcy4gXHJcbiAgICAgKiAqKkNhdXRpb24hKiogVXNlIGltbWVkaWF0ZWx5IGFuZCByZWFkb25seSwgc2luY2UgdGhlIHZlY3RvciBpcyBnb2luZyB0byBiZSByZXVzZWQgaW50ZXJuYWxseS4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IHNldCB0aGUgZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJvdGF0aW9uIGluIGRlZ3JlZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgZXVsZXJBbmdsZXMoKTogVmVjdG9yMyB7XHJcbiAgICAgIGlmICh0aGlzLiNldWxlckFuZ2xlc0RpcnR5KSB7XHJcbiAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXNEaXJ0eSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy54ID09IDAgJiYgdGhpcy55ID09IDAgJiYgdGhpcy56ID09IDAgJiYgdGhpcy53ID09IDEpIHtcclxuICAgICAgICAgIHRoaXMuI2V1bGVyQW5nbGVzLnNldCgwLCAwLCAwKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzLiNldWxlckFuZ2xlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJvbGwgKHgtYXhpcyByb3RhdGlvbilcclxuICAgICAgICBsZXQgc2lucmNvc3A6IG51bWJlciA9IDIgKiAodGhpcy53ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy56KTtcclxuICAgICAgICBsZXQgY29zcmNvc3A6IG51bWJlciA9IDEgLSAyICogKHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMueCA9IE1hdGguYXRhbjIoc2lucmNvc3AsIGNvc3Jjb3NwKTtcclxuXHJcbiAgICAgICAgLy8gcGl0Y2ggKHktYXhpcyByb3RhdGlvbilcclxuICAgICAgICBsZXQgc2lucDogbnVtYmVyID0gMiAqICh0aGlzLncgKiB0aGlzLnkgLSB0aGlzLnogKiB0aGlzLngpO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhzaW5wKSA+PSAxKVxyXG4gICAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMueSA9IHNpbnAgPCAwID8gLU1hdGguYWJzKE1hdGguUEkgLyAyKSA6IE1hdGguYWJzKE1hdGguUEkgLyAyKTsgLy8gdXNlIDkwIGRlZ3JlZXMgaWYgb3V0IG9mIHJhbmdlXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMueSA9IE1hdGguYXNpbihzaW5wKTtcclxuXHJcbiAgICAgICAgLy8geWF3ICh6LWF4aXMgcm90YXRpb24pXHJcbiAgICAgICAgbGV0IHNpbnljb3NwOiBudW1iZXIgPSAyICogKHRoaXMudyAqIHRoaXMueiArIHRoaXMueCAqIHRoaXMueSk7XHJcbiAgICAgICAgbGV0IGNvc3ljb3NwOiBudW1iZXIgPSAxIC0gMiAqICh0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnopO1xyXG4gICAgICAgIHRoaXMuI2V1bGVyQW5nbGVzLnogPSBNYXRoLmF0YW4yKHNpbnljb3NwLCBjb3N5Y29zcCk7XHJcblxyXG4gICAgICAgIHRoaXMuI2V1bGVyQW5nbGVzLnNjYWxlKENhbGMucmFkMmRlZyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLiNldWxlckFuZ2xlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGV1bGVyQW5nbGVzKF9ldWxlckFuZ2xlczogVmVjdG9yMykge1xyXG4gICAgICBjb25zdCBoYWxmQW5nbGVzSW5SYWRpYW5zOiBWZWN0b3IzID0gVmVjdG9yMy5TQ0FMRShfZXVsZXJBbmdsZXMsIENhbGMuZGVnMnJhZCAvIDIpO1xyXG4gICAgICBjb25zdCBjb3NYOiBudW1iZXIgPSBNYXRoLmNvcyhoYWxmQW5nbGVzSW5SYWRpYW5zLngpO1xyXG4gICAgICBjb25zdCBjb3NZOiBudW1iZXIgPSBNYXRoLmNvcyhoYWxmQW5nbGVzSW5SYWRpYW5zLnkpO1xyXG4gICAgICBjb25zdCBjb3NaOiBudW1iZXIgPSBNYXRoLmNvcyhoYWxmQW5nbGVzSW5SYWRpYW5zLnopO1xyXG4gICAgICBjb25zdCBzaW5YOiBudW1iZXIgPSBNYXRoLnNpbihoYWxmQW5nbGVzSW5SYWRpYW5zLngpO1xyXG4gICAgICBjb25zdCBzaW5ZOiBudW1iZXIgPSBNYXRoLnNpbihoYWxmQW5nbGVzSW5SYWRpYW5zLnkpO1xyXG4gICAgICBjb25zdCBzaW5aOiBudW1iZXIgPSBNYXRoLnNpbihoYWxmQW5nbGVzSW5SYWRpYW5zLnopO1xyXG5cclxuICAgICAgdGhpcy5zZXQoXHJcbiAgICAgICAgc2luWCAqIGNvc1kgKiBjb3NaIC0gY29zWCAqIHNpblkgKiBzaW5aLFxyXG4gICAgICAgIGNvc1ggKiBzaW5ZICogY29zWiArIHNpblggKiBjb3NZICogc2luWixcclxuICAgICAgICBjb3NYICogY29zWSAqIHNpblogLSBzaW5YICogc2luWSAqIGNvc1osXHJcbiAgICAgICAgY29zWCAqIGNvc1kgKiBjb3NaICsgc2luWCAqIHNpblkgKiBzaW5aXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLiNldWxlckFuZ2xlcy5jb3B5KF9ldWxlckFuZ2xlcyk7XHJcbiAgICAgIHRoaXMuI2V1bGVyQW5nbGVzRGlydHkgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgdGhpcyBxdWF0ZXJuaW9uIHRvIGEgbGVuZ3RoIG9mIDEgKGEgdW5pdCBxdWF0ZXJuaW9uKSBtYWtpbmcgaXQgYSB2YWxpZCByb3RhdGlvbiByZXByZXNlbnRhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbm9ybWFsaXplKCk6IFF1YXRlcm5pb24ge1xyXG4gICAgICBsZXQgbGVuZ3RoOiBudW1iZXIgPSBNYXRoLnNxcnQodGhpcy54ICoqIDIgKyB0aGlzLnkgKiogMiArIHRoaXMueiAqKiAyICsgdGhpcy53ICoqIDIpO1xyXG4gICAgICB0aGlzLnggLz0gbGVuZ3RoO1xyXG4gICAgICB0aGlzLnkgLz0gbGVuZ3RoO1xyXG4gICAgICB0aGlzLnogLz0gbGVuZ3RoO1xyXG4gICAgICB0aGlzLncgLz0gbGVuZ3RoO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOZWdhdGUgdGhpcyBxdWF0ZXJuaW9uIGFuZCByZXR1cm5zIGl0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBuZWdhdGUoKTogUXVhdGVybmlvbiB7XHJcbiAgICAgIHRoaXMueCAqPSAtMTtcclxuICAgICAgdGhpcy55ICo9IC0xO1xyXG4gICAgICB0aGlzLnogKj0gLTE7XHJcbiAgICAgIHRoaXMudyAqPSAtMTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBxdWF0ZXJuaW9uIHRvIHRoZSBpZGVudGl0eS1xdWF0ZXJuaW9uIGFuZCBjbGVhcnMgY2FjaGUuIFVzZWQgYnkgdGhlIHJlY3ljbGVyIHRvIHJlc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXQoMCwgMCwgMCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZlcnQgdGhpcyBxdWF0ZXJuaW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW52ZXJ0KCk6IFF1YXRlcm5pb24ge1xyXG4gICAgICAvLyBxdWF0ZXJuaW9uIGlzIGFzc3VtZWQgdG8gaGF2ZSB1bml0IGxlbmd0aFxyXG4gICAgICByZXR1cm4gdGhpcy5jb25qdWdhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmp1Z2F0ZXMgdGhpcyBxdWF0ZXJuaW9uIGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uanVnYXRlKCk6IFF1YXRlcm5pb24ge1xyXG4gICAgICB0aGlzLnggKj0gLTE7XHJcbiAgICAgIHRoaXMueSAqPSAtMTtcclxuICAgICAgdGhpcy56ICo9IC0xO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdWx0aXBseSB0aGlzIHF1YXRlcm5pb24gd2l0aCB0aGUgZ2l2ZW4gcXVhdGVybmlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbXVsdGlwbHkoX290aGVyOiBRdWF0ZXJuaW9uLCBfZnJvbUxlZnQ6IGJvb2xlYW4gPSBmYWxzZSk6IFF1YXRlcm5pb24ge1xyXG4gICAgICBjb25zdCBhOiBRdWF0ZXJuaW9uID0gX2Zyb21MZWZ0ID8gX290aGVyIDogdGhpcztcclxuICAgICAgY29uc3QgYjogUXVhdGVybmlvbiA9IF9mcm9tTGVmdCA/IHRoaXMgOiBfb3RoZXI7XHJcbiAgICAgIC8vIGZyb206IGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvcmVhbE5vcm1lZEFsZ2VicmEvcXVhdGVybmlvbnMvY29kZS9pbmRleC5odG1cclxuICAgICAgY29uc3QgYXg6IG51bWJlciA9IGEueDtcclxuICAgICAgY29uc3QgYXk6IG51bWJlciA9IGEueTtcclxuICAgICAgY29uc3QgYXo6IG51bWJlciA9IGEuejtcclxuICAgICAgY29uc3QgYXc6IG51bWJlciA9IGEudztcclxuICAgICAgY29uc3QgYng6IG51bWJlciA9IGIueDtcclxuICAgICAgY29uc3QgYnk6IG51bWJlciA9IGIueTtcclxuICAgICAgY29uc3QgYno6IG51bWJlciA9IGIuejtcclxuICAgICAgY29uc3QgYnc6IG51bWJlciA9IGIudztcclxuXHJcbiAgICAgIHRoaXMuc2V0KFxyXG4gICAgICAgIGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieSArIGF3ICogYngsXHJcbiAgICAgICAgLWF4ICogYnogKyBheSAqIGJ3ICsgYXogKiBieCArIGF3ICogYnksXHJcbiAgICAgICAgYXggKiBieSAtIGF5ICogYnggKyBheiAqIGJ3ICsgYXcgKiBieixcclxuICAgICAgICAtYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6ICsgYXcgKiBid1xyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjb21wb25lbnRzIG9mIHRoaXMgcXVhdGVybmlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfeDogbnVtYmVyLCBfeTogbnVtYmVyLCBfejogbnVtYmVyLCBfdzogbnVtYmVyKTogUXVhdGVybmlvbiB7XHJcbiAgICAgIHRoaXMueCA9IF94OyB0aGlzLnkgPSBfeTsgdGhpcy56ID0gX3o7IHRoaXMudyA9IF93O1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb3BpZXMgdGhlIHN0YXRlIG9mIHRoZSBnaXZlbiBxdWF0ZXJuaW9uIGludG8gdGhpcyBxdWF0ZXJuaW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29weShfb3JpZ2luYWw6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgdGhpcy54ID0gX29yaWdpbmFsLng7IHRoaXMueSA9IF9vcmlnaW5hbC55OyB0aGlzLnogPSBfb3JpZ2luYWwuejsgdGhpcy53ID0gX29yaWdpbmFsLnc7XHJcbiAgICAgIHRoaXMuI2V1bGVyQW5nbGVzRGlydHkgPSBfb3JpZ2luYWwuI2V1bGVyQW5nbGVzRGlydHk7XHJcbiAgICAgIGlmICghdGhpcy4jZXVsZXJBbmdsZXNEaXJ0eSlcclxuICAgICAgICB0aGlzLiNldWxlckFuZ2xlcy5jb3B5KF9vcmlnaW5hbC4jZXVsZXJBbmdsZXMpO1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcXVhdGVybmlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGDGki5RdWF0ZXJuaW9uKHg6ICR7dGhpcy54fSwgeTogJHt0aGlzLnl9LCB6OiAke3RoaXMuen0sIHc6ICR7dGhpcy53fSlgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGN1cnJlbnRseSBxdWF0ZXJuaW9ucyBhcmUgbmV2ZXIgc2VyaWFsaXplZCwgc28gdGhpcyBpcyBub3QgbmVlZGVkLiBCdXQgbWF5YmUgaXQgd2lsbCBiZSBpbiB0aGUgZnV0dXJlLlxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgWyR7dGhpcy54fSwgJHt0aGlzLnl9LCAke3RoaXMuen0sICR7dGhpcy53fV1gOyB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFF1YXRlcm5pb24+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX3NlcmlhbGl6YXRpb24pID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBbdGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53XSA9IEpTT04ucGFyc2UoPHN0cmluZz48dW5rbm93bj5fc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIH0gZWxzZVxyXG4gICAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGlmICghdGhpcy5tdXRhdG9yKVxyXG4gICAgICAgIHRoaXMubXV0YXRvciA9IHsgeDogdGhpcy54LCB5OiB0aGlzLnksIHo6IHRoaXMueiwgdzogdGhpcy53IH07XHJcbiAgICAgIHJldHVybiB0aGlzLm11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICB0aGlzLnggPSBfbXV0YXRvci54ID8/IHRoaXMueDtcclxuICAgICAgdGhpcy55ID0gX211dGF0b3IueSA/PyB0aGlzLnk7XHJcbiAgICAgIHRoaXMueiA9IF9tdXRhdG9yLnogPz8gdGhpcy56O1xyXG4gICAgICB0aGlzLncgPSBfbXV0YXRvci53ID8/IHRoaXMudztcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHsvKiogKi8gfVxyXG5cclxuICAgIHByaXZhdGUgcmVzZXRDYWNoZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jZXVsZXJBbmdsZXNEaXJ0eSA9IHRydWU7XHJcbiAgICAgIHRoaXMubXV0YXRvciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQ2xhc3MgZm9yIGNyZWF0aW5nIHJhbmRvbSB2YWx1ZXMsIHN1cHBvcnRpbmcgSmF2YXNjcmlwdCdzIE1hdGgucmFuZG9tIGFuZCBhIGRldGVybWluaXN0aWcgcHNldWRvLXJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIChQUk5HKSBcclxuICAgKiB0aGF0IGNhbiBiZSBmZWQgd2l0aCBhIHNlZWQgYW5kIHRoZW4gcmV0dXJucyBhIHJlcHJvZHVjYWJsZSBzZXQgb2YgcmFuZG9tIG51bWJlcnMgKGlmIHRoZSBwcmVjaXNpb24gb2YgSmF2YXNjcmlwdCBhbGxvd3MpIFxyXG4gICAqIFxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUmFuZG9tIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdDogUmFuZG9tID0gbmV3IFJhbmRvbSgpO1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZTogRnVuY3Rpb24gPSBNYXRoLnJhbmRvbTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgUmFuZG9tfS4gXHJcbiAgICAgKiBJZiBhIHNlZWQgaXMgZ2l2ZW4sIExGSUI0IGlzIHVzZWQgYXMgZ2VuZXJhdG9yLCByZXByb2R1Y2luZyBhIHNlcmllcyBvZiBudW1iZXJzIGZyb20gdGhhdCBzZWVkLlxyXG4gICAgICogSWYgYSBmdW5jdGlvbiBwcm9kdWNpbmcgdmFsdWVzIGJldHdlZW4gMCBhbmQgMSBpcyBnaXZlbiwgaXQgd2lsbCBiZSB1c2VkIGFzIGdlbmVyYXRvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9zZWVkT3JGdW5jdGlvbj86IG51bWJlciB8IEZ1bmN0aW9uKSB7XHJcbiAgICAgIGlmIChfc2VlZE9yRnVuY3Rpb24gaW5zdGFuY2VvZiBGdW5jdGlvbilcclxuICAgICAgICB0aGlzLmdlbmVyYXRlID0gX3NlZWRPckZ1bmN0aW9uO1xyXG4gICAgICBlbHNlIGlmIChfc2VlZE9yRnVuY3Rpb24gPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGUgPSBNYXRoLnJhbmRvbTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGUgPSBuZXcgTEZJQjQoX3NlZWRPckZ1bmN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBub3JtZWQgcmFuZG9tIG51bWJlciwgdGh1cyBpbiB0aGUgcmFuZ2Ugb2YgWzAsIDFbXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXROb3JtKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgZ2l2ZW4gW19taW4sIF9tYXhbXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRSYW5nZShfbWluOiBudW1iZXIsIF9tYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBfbWluICsgdGhpcy5nZW5lcmF0ZSgpICogKF9tYXggLSBfbWluKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb20gaW50ZWdlciBudW1iZXIgaW4gdGhlIHJhbmdlIG9mIGdpdmVuIGZsb29yZWQgW19taW4sIF9tYXhbXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRSYW5nZUZsb29yZWQoX21pbjogbnVtYmVyLCBfbWF4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmdldFJhbmdlKF9taW4sIF9tYXgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBvciBmYWxzZSByYW5kb21seVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Qm9vbGVhbigpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGUoKSA8IDAuNTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgLTEgb3IgMSByYW5kb21seVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2lnbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRCb29sZWFuKCkgPyAxIDogLTE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tbHkgc2VsZWN0ZWQgaW5kZXggaW50byB0aGUgZ2l2ZW4gYXJyYXlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEluZGV4PFQ+KF9hcnJheTogQXJyYXk8VD4pOiBudW1iZXIge1xyXG4gICAgICBpZiAoX2FycmF5Lmxlbmd0aCA+IDApXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmFuZ2VGbG9vcmVkKDAsIF9hcnJheS5sZW5ndGgpO1xyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tbHkgc2VsZWN0ZWQgZWxlbWVudCBvZiB0aGUgZ2l2ZW4gYXJyYXlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEVsZW1lbnQ8VD4oX2FycmF5OiBBcnJheTxUPik6IFQge1xyXG4gICAgICBpZiAoX2FycmF5Lmxlbmd0aCA+IDApXHJcbiAgICAgICAgcmV0dXJuIF9hcnJheVt0aGlzLmdldEluZGV4KF9hcnJheSldO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYSByYW5kb21seSBzZWxlY3RlZCBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5IGFuZCByZXR1cm5zIGl0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzcGxpY2U8VD4oX2FycmF5OiBBcnJheTxUPik6IFQge1xyXG4gICAgICByZXR1cm4gX2FycmF5LnNwbGljZSh0aGlzLmdldEluZGV4KF9hcnJheSksIDEpWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbWx5IHNlbGVjdGVkIGtleSBmcm9tIHRoZSBnaXZlbiBNYXAtaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEtleTxULCBVPihfbWFwOiBNYXA8VCwgVT4pOiBUIHtcclxuICAgICAgbGV0IGtleXM6IEdlbmVyYWwgPSBBcnJheS5mcm9tKF9tYXAua2V5cygpKTtcclxuICAgICAgcmV0dXJuIGtleXNbdGhpcy5nZXRJbmRleChrZXlzKV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tbHkgc2VsZWN0ZWQgcHJvcGVydHkgbmFtZSBmcm9tIHRoZSBnaXZlbiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFByb3BlcnR5TmFtZTxUPihfb2JqZWN0OiBUKToga2V5b2YgVCB7XHJcbiAgICAgIGxldCBrZXlzOiBzdHJpbmdbXSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKF9vYmplY3QpO1xyXG4gICAgICByZXR1cm4gPGtleW9mIFQ+a2V5c1t0aGlzLmdldEluZGV4KGtleXMpXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb21seSBzZWxlY3RlZCBzeW1ib2wgZnJvbSB0aGUgZ2l2ZW4gb2JqZWN0LCBpZiBzeW1ib2xzIGFyZSB1c2VkIGFzIGtleXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFByb3BlcnR5U3ltYm9sPFQ+KF9vYmplY3Q6IFQpOiBzeW1ib2wge1xyXG4gICAgICBsZXQga2V5czogc3ltYm9sW10gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKF9vYmplY3QpO1xyXG4gICAgICByZXR1cm4ga2V5c1t0aGlzLmdldEluZGV4KGtleXMpXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb20gdGhyZWUtZGltZW5zaW9uYWwgdmVjdG9yIGluIHRoZSBsaW1pdHMgb2YgdGhlIGJveCBkZWZpbmVkIGJ5IHRoZSB2ZWN0b3JzIGdpdmVuIGFzIFtfY29ybmVyMCwgX2Nvcm5lcjFbXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRWZWN0b3IzKF9jb3JuZXIwOiBWZWN0b3IzLCBfY29ybmVyMTogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy5nZXRSYW5nZShfY29ybmVyMC54LCBfY29ybmVyMS54KSwgdGhpcy5nZXRSYW5nZShfY29ybmVyMC55LCBfY29ybmVyMS55KSwgdGhpcy5nZXRSYW5nZShfY29ybmVyMC56LCBfY29ybmVyMS56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tIHR3by1kaW1lbnNpb25hbCB2ZWN0b3IgaW4gdGhlIGxpbWl0cyBvZiB0aGUgcmVjdGFuZ2xlIGRlZmluZWQgYnkgdGhlIHZlY3RvcnMgZ2l2ZW4gYXMgW19jb3JuZXIwLCBfY29ybmVyMVtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFZlY3RvcjIoX2Nvcm5lcjA6IFZlY3RvcjIsIF9jb3JuZXIxOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLmdldFJhbmdlKF9jb3JuZXIwLngsIF9jb3JuZXIxLngpLCB0aGlzLmdldFJhbmdlKF9jb3JuZXIwLnksIF9jb3JuZXIxLnkpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YW5kYXJkIHtAbGluayBSYW5kb219LWluc3RhbmNlIHVzaW5nIE1hdGgucmFuZG9tKCkuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNvbnN0IHJhbmRvbTogUmFuZG9tID0gbmV3IFJhbmRvbSgpO1xyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogU3RvcmVzIGFuZCBtYW5pcHVsYXRlcyBhIHRocmVlZGltZW5zaW9uYWwgdmVjdG9yIGNvbXByaXNlZCBvZiB0aGUgY29tcG9uZW50cyB4LCB5IGFuZCB6XHJcbiAgICogYGBgdGV4dFxyXG4gICAqICAgICAgICAgICAgK3lcclxuICAgKiAgICAgICAgICAgICB8X18gK3hcclxuICAgKiAgICAgICAgICAgIC9cclxuICAgKiAgICAgICAgICAreiAgIFxyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTktMjAyMiB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBWZWN0b3IzIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSwgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeTogbnVtYmVyO1xyXG4gICAgcHVibGljIHo6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3g6IG51bWJlciA9IDAsIF95OiBudW1iZXIgPSAwLCBfejogbnVtYmVyID0gMCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnNldChfeCwgX3ksIF96KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gU3RhdGljXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gbGVuZ3RoIHBvaW50aW5nIGluIHgtZGlyZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgWChfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IzIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMyk7XHJcbiAgICAgIHZlY3Rvci5zZXQoX3NjYWxlLCAwLCAwKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gbGVuZ3RoIHBvaW50aW5nIGluIHktZGlyZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgWShfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IzIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMyk7XHJcbiAgICAgIHZlY3Rvci5zZXQoMCwgX3NjYWxlLCAwKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gbGVuZ3RoIHBvaW50aW5nIGluIHotZGlyZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgWihfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IzIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMyk7XHJcbiAgICAgIHZlY3Rvci5zZXQoMCwgMCwgX3NjYWxlKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgdmFsdWUgMCBvbiBlYWNoIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBaRVJPKCk6IFZlY3RvcjMge1xyXG4gICAgICBjb25zdCB2ZWN0b3I6IFZlY3RvcjMgPSBSZWN5Y2xlci5yZXVzZShWZWN0b3IzKTtcclxuICAgICAgdmVjdG9yLnNldCgwLCAwLCAwKTsgLy8gc2hvdWxkIGJlIHNldCB0byAwIGJ5IHJlY3ljbGVyIGFscmVhZHk/XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgdmVjdG9yIG9mIHRoZSBnaXZlbiBzaXplIG9uIGVhY2ggb2YgdGhlIHRocmVlIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBPTkUoX3NjYWxlOiBudW1iZXIgPSAxKTogVmVjdG9yMyB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9zY2FsZSwgX3NjYWxlLCBfc2NhbGUpO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIHZlY3RvciB0aHJvdWdoIHRyYW5zZm9ybWF0aW9uIG9mIHRoZSBnaXZlbiB2ZWN0b3IgYnkgdGhlIGdpdmVuIG1hdHJpeCBvciByb3RhdGlvbiBxdWF0ZXJuaW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFRSQU5TRk9STUFUSU9OKF92ZWN0b3I6IFZlY3RvcjMsIF90cmFuc2Zvcm06IE1hdHJpeDR4NCB8IFF1YXRlcm5pb24sIF9pbmNsdWRlVHJhbnNsYXRpb246IGJvb2xlYW4gPSB0cnVlKTogVmVjdG9yMyB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG5cclxuICAgICAgaWYgKF90cmFuc2Zvcm0gaW5zdGFuY2VvZiBNYXRyaXg0eDQpIHtcclxuICAgICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gX3RyYW5zZm9ybS5nZXQoKTtcclxuXHJcbiAgICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICAgIG1bMF0gKiBfdmVjdG9yLnggKyBtWzRdICogX3ZlY3Rvci55ICsgbVs4XSAqIF92ZWN0b3IueixcclxuICAgICAgICAgIG1bMV0gKiBfdmVjdG9yLnggKyBtWzVdICogX3ZlY3Rvci55ICsgbVs5XSAqIF92ZWN0b3IueixcclxuICAgICAgICAgIG1bMl0gKiBfdmVjdG9yLnggKyBtWzZdICogX3ZlY3Rvci55ICsgbVsxMF0gKiBfdmVjdG9yLnpcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoX2luY2x1ZGVUcmFuc2xhdGlvbilcclxuICAgICAgICAgIHJlc3VsdC5hZGQoX3RyYW5zZm9ybS50cmFuc2xhdGlvbik7XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZyb206IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL3JlYWxOb3JtZWRBbGdlYnJhL3F1YXRlcm5pb25zL3RyYW5zZm9ybXMvaW5kZXguaHRtXHJcbiAgICAgICAgLy8gcmVzdWx0ID0gcSAqIHF1YXRlcm5pb24odmVjdG9yLngsIHZlY3Rvci55LCB2ZWN0b3IueiwgMCkgKiBjb25qKHEpXHJcblxyXG4gICAgICAgIC8vIHEgKiBxdWF0ZXJuaW9uKHZlY3Rvci54LCB2ZWN0b3IueSwgdmVjdG9yLnosIDApIC4uLlxyXG4gICAgICAgIGNvbnN0IHF4OiBudW1iZXIgPSBfdHJhbnNmb3JtLncgKiBfdmVjdG9yLnggKyBfdHJhbnNmb3JtLnkgKiBfdmVjdG9yLnogLSBfdHJhbnNmb3JtLnogKiBfdmVjdG9yLnk7XHJcbiAgICAgICAgY29uc3QgcXk6IG51bWJlciA9IF90cmFuc2Zvcm0udyAqIF92ZWN0b3IueSArIF90cmFuc2Zvcm0ueiAqIF92ZWN0b3IueCAtIF90cmFuc2Zvcm0ueCAqIF92ZWN0b3IuejtcclxuICAgICAgICBjb25zdCBxejogbnVtYmVyID0gX3RyYW5zZm9ybS53ICogX3ZlY3Rvci56ICsgX3RyYW5zZm9ybS54ICogX3ZlY3Rvci55IC0gX3RyYW5zZm9ybS55ICogX3ZlY3Rvci54O1xyXG4gICAgICAgIGNvbnN0IHF3OiBudW1iZXIgPSAtX3RyYW5zZm9ybS54ICogX3ZlY3Rvci54IC0gX3RyYW5zZm9ybS55ICogX3ZlY3Rvci55IC0gX3RyYW5zZm9ybS56ICogX3ZlY3Rvci56O1xyXG5cclxuICAgICAgICAvLyAuLi4gKiBjb25qKHEpXHJcbiAgICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICAgIHF4ICogX3RyYW5zZm9ybS53ICsgcXcgKiAtIF90cmFuc2Zvcm0ueCArIHF5ICogLSBfdHJhbnNmb3JtLnogLSBxeiAqIC0gX3RyYW5zZm9ybS55LFxyXG4gICAgICAgICAgcXkgKiBfdHJhbnNmb3JtLncgKyBxdyAqIC0gX3RyYW5zZm9ybS55ICsgcXogKiAtIF90cmFuc2Zvcm0ueCAtIHF4ICogLSBfdHJhbnNmb3JtLnosXHJcbiAgICAgICAgICBxeiAqIF90cmFuc2Zvcm0udyArIHF3ICogLSBfdHJhbnNmb3JtLnogKyBxeCAqIC0gX3RyYW5zZm9ybS55IC0gcXkgKiAtIF90cmFuc2Zvcm0ueFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgdmVjdG9yIHdoaWNoIGlzIGEgY29weSBvZiB0aGUgZ2l2ZW4gdmVjdG9yIHNjYWxlZCB0byB0aGUgZ2l2ZW4gbGVuZ3RoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgTk9STUFMSVpBVElPTihfdmVjdG9yOiBWZWN0b3IzLCBfbGVuZ3RoOiBudW1iZXIgPSAxKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCBtYWduaXR1ZGVTcXVhcmVkOiBudW1iZXIgPSBfdmVjdG9yLm1hZ25pdHVkZVNxdWFyZWQ7XHJcbiAgICAgIGlmIChtYWduaXR1ZGVTcXVhcmVkID09IDApXHJcbiAgICAgICAgdGhyb3cgKG5ldyBSYW5nZUVycm9yKFwiSW1wb3NzaWJsZSBub3JtYWxpemF0aW9uXCIpKTtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IF92ZWN0b3IuY2xvbmU7XHJcbiAgICAgIHZlY3Rvci5zY2FsZShfbGVuZ3RoIC8gTWF0aC5zcXJ0KG1hZ25pdHVkZVNxdWFyZWQpKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdGluZyB2ZWN0b3IgYXR0YWluZWQgYnkgYWRkaXRpb24gb2YgYWxsIGdpdmVuIHZlY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgU1VNKC4uLl92ZWN0b3JzOiBWZWN0b3IzW10pOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICBmb3IgKGxldCB2ZWN0b3Igb2YgX3ZlY3RvcnMpXHJcbiAgICAgICAgcmVzdWx0LnNldChyZXN1bHQueCArIHZlY3Rvci54LCByZXN1bHQueSArIHZlY3Rvci55LCByZXN1bHQueiArIHZlY3Rvci56KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgc3VidHJhY3Rpb24gb2YgdHdvIHZlY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgRElGRkVSRU5DRShfbWludWVuZDogVmVjdG9yMywgX3N1YnRyYWhlbmQ6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9taW51ZW5kLnggLSBfc3VidHJhaGVuZC54LCBfbWludWVuZC55IC0gX3N1YnRyYWhlbmQueSwgX21pbnVlbmQueiAtIF9zdWJ0cmFoZW5kLnopO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG5ldyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiB2ZWN0b3Igc2NhbGVkIGJ5IHRoZSBnaXZlbiBzY2FsaW5nIGZhY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFNDQUxFKF92ZWN0b3I6IFZlY3RvcjMsIF9zY2FsaW5nOiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHNjYWxlZDogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICBzY2FsZWQuc2V0KF92ZWN0b3IueCAqIF9zY2FsaW5nLCBfdmVjdG9yLnkgKiBfc2NhbGluZywgX3ZlY3Rvci56ICogX3NjYWxpbmcpO1xyXG4gICAgICByZXR1cm4gc2NhbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgdGhlIGNyb3NzcHJvZHVjdCBvZiAyIHZlY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQ1JPU1MoX2E6IFZlY3RvcjMsIF9iOiBWZWN0b3IzKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCB2ZWN0b3I6IFZlY3RvcjMgPSBSZWN5Y2xlci5yZXVzZShWZWN0b3IzKTtcclxuICAgICAgdmVjdG9yLnNldChcclxuICAgICAgICBfYS55ICogX2IueiAtIF9hLnogKiBfYi55LFxyXG4gICAgICAgIF9hLnogKiBfYi54IC0gX2EueCAqIF9iLnosXHJcbiAgICAgICAgX2EueCAqIF9iLnkgLSBfYS55ICogX2IueFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgZG90cHJvZHVjdCBvZiAyIHZlY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgRE9UKF9hOiBWZWN0b3IzLCBfYjogVmVjdG9yMyk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBfYS54ICogX2IueCArIF9hLnkgKiBfYi55ICsgX2EueiAqIF9iLno7O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyBhbmQgcmV0dXJucyB0aGUgcmVmbGVjdGlvbiBvZiB0aGUgaW5jb21pbmcgdmVjdG9yIGF0IHRoZSBnaXZlbiBub3JtYWwgdmVjdG9yLiBUaGUgbGVuZ3RoIG9mIG5vcm1hbCBzaG91bGQgYmUgMS5cclxuICAgICAqICAgICBfX19fX19fX19fX19fX19fX19cclxuICAgICAqICAgICAgICAgICAvfFxcXHJcbiAgICAgKiBpbmNvbWluZyAvIHwgXFwgcmVmbGVjdGlvblxyXG4gICAgICogICAgICAgICAvICB8ICBcXCAgIFxyXG4gICAgICogICAgICAgICAgbm9ybWFsXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBSRUZMRUNUSU9OKF9pbmNvbWluZzogVmVjdG9yMywgX25vcm1hbDogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgZG90OiBudW1iZXIgPSAtVmVjdG9yMy5ET1QoX2luY29taW5nLCBfbm9ybWFsKTtcclxuICAgICAgbGV0IHJlZmxlY3Rpb246IFZlY3RvcjMgPSBWZWN0b3IzLlNVTShfaW5jb21pbmcsIFZlY3RvcjMuU0NBTEUoX25vcm1hbCwgMiAqIGRvdCkpO1xyXG4gICAgICByZXR1cm4gcmVmbGVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpdmlkZXMgdGhlIGRpdmlkZW5kIGJ5IHRoZSBkaXZpc29yIGNvbXBvbmVudCBieSBjb21wb25lbnQgYW5kIHJldHVybnMgdGhlIHJlc3VsdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFJBVElPKF9kaXZpZGVuZDogVmVjdG9yMywgX2Rpdmlzb3I6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLnJldXNlKFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9kaXZpZGVuZC54IC8gX2Rpdmlzb3IueCwgX2RpdmlkZW5kLnkgLyBfZGl2aXNvci55LCBfZGl2aWRlbmQueiAvIF9kaXZpc29yLnopO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNhcnRlc2lhbiB2ZWN0b3IgZnJvbSBnZW9ncmFwaGljIGNvb3JkaW5hdGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgR0VPKF9sb25naXR1ZGU6IG51bWJlciA9IDAsIF9sYXRpdHVkZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIucmV1c2UoVmVjdG9yMyk7XHJcbiAgICAgIGxldCBnZW86IEdlbzMgPSBSZWN5Y2xlci5yZXVzZShHZW8zKTtcclxuICAgICAgZ2VvLnNldChfbG9uZ2l0dWRlLCBfbGF0aXR1ZGUsIF9tYWduaXR1ZGUpO1xyXG4gICAgICB2ZWN0b3IuZ2VvID0gZ2VvO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShnZW8pO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBhbmdsZSBpbiBkZWdyZWVzIGJldHdlZW4gdGhlIHR3byBnaXZlbiB2ZWN0b3JzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQU5HTEUoX2Zyb206IFZlY3RvcjMsIF90bzogVmVjdG9yMyk6IG51bWJlciB7XHJcbiAgICAgIGxldCBhbmdsZTogbnVtYmVyID0gTWF0aC5hY29zKFZlY3RvcjMuRE9UKF9mcm9tLCBfdG8pIC8gKF9mcm9tLm1hZ25pdHVkZSAqIF90by5tYWduaXR1ZGUpKTtcclxuICAgICAgcmV0dXJuIGFuZ2xlICogQ2FsYy5yYWQyZGVnO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIEFjY2Vzc29yc1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1hZ25pdHVkZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTWF0aC5oeXBvdCh0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgbWFnbml0dWRlIG9mIHRoZSB2ZWN0b3Igd2l0aG91dCBjYWxjdWxhdGluZyBhIHNxdWFyZSByb290LiBGYXN0ZXIgZm9yIHNpbXBsZSBwcm94aW1pdHkgZXZhbHVhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtYWduaXR1ZGVTcXVhcmVkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBWZWN0b3IzLkRPVCh0aGlzLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIC0gZ2V0OiByZXR1cm5zIGEgZ2VvZ3JhcGhpYyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHZlY3RvciAgXHJcbiAgICAgKiAtIHNldDogYWRqdXN0IHRoZSBjYXJ0ZXNpYW4gdmFsdWVzIG9mIHRoaXMgdmVjdG9yIHRvIHJlcHJlc2VudCB0aGUgZ2l2ZW4gYXMgZ2VvZ3JhcGhpYyBjb29yZGluYXRlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IGdlbyhfZ2VvOiBHZW8zKSB7XHJcbiAgICAgIHRoaXMuc2V0KDAsIDAsIF9nZW8ubWFnbml0dWRlKTtcclxuICAgICAgdGhpcy50cmFuc2Zvcm0oTWF0cml4NHg0LlJPVEFUSU9OX1goLV9nZW8ubGF0aXR1ZGUpKTtcclxuICAgICAgdGhpcy50cmFuc2Zvcm0oTWF0cml4NHg0LlJPVEFUSU9OX1koX2dlby5sb25naXR1ZGUpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgZ2VvKCk6IEdlbzMge1xyXG4gICAgICBsZXQgZ2VvOiBHZW8zID0gUmVjeWNsZXIuZ2V0KEdlbzMpO1xyXG4gICAgICBnZW8ubWFnbml0dWRlID0gdGhpcy5tYWduaXR1ZGU7XHJcblxyXG4gICAgICBpZiAoZ2VvLm1hZ25pdHVkZSA9PT0gMClcclxuICAgICAgICByZXR1cm4gZ2VvO1xyXG5cclxuICAgICAgZ2VvLmxvbmdpdHVkZSA9IDE4MCAqIE1hdGguYXRhbjIodGhpcy54IC8gZ2VvLm1hZ25pdHVkZSwgdGhpcy56IC8gZ2VvLm1hZ25pdHVkZSkgLyBNYXRoLlBJO1xyXG4gICAgICBnZW8ubGF0aXR1ZGUgPSAxODAgKiBNYXRoLmFzaW4odGhpcy55IC8gZ2VvLm1hZ25pdHVkZSkgLyBNYXRoLlBJO1xyXG4gICAgICByZXR1cm4gZ2VvO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGNsb25lIG9mIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNsb25lKCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gUmVjeWNsZXIucmV1c2UoVmVjdG9yMykuY29weSh0aGlzKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29waWVzIHRoZSBjb21wb25lbnRzIG9mIHRoZSBnaXZlbiB2ZWN0b3IgaW50byB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvcHkoX29yaWdpbmFsOiBWZWN0b3IzKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNldChfb3JpZ2luYWwueCwgX29yaWdpbmFsLnksIF9vcmlnaW5hbC56KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXQoMCwgMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvb3JkaW5hdGVzIG9mIHRoaXMgYW5kIHRoZSBnaXZlbiB2ZWN0b3IgYXJlIHRvIGJlIGNvbnNpZGVyZWQgaWRlbnRpY2FsIHdpdGhpbiB0aGUgZ2l2ZW4gdG9sZXJhbmNlXHJcbiAgICAgKiBUT0RPOiBleGFtaW5lLCBpZiB0b2xlcmFuY2UgYXMgY3JpdGVyaXVtIGZvciB0aGUgZGlmZmVyZW5jZSBpcyBhcHByb3ByaWF0ZSB3aXRoIHZlcnkgbGFyZ2UgY29vcmRpbmF0ZSB2YWx1ZXMgb3IgaWYgX3RvbGVyYW5jZSBzaG91bGQgYmUgbXVsdGlwbGllZCBieSBjb29yZGluYXRlIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBlcXVhbHMoX2NvbXBhcmU6IFZlY3RvcjMsIF90b2xlcmFuY2U6IG51bWJlciA9IE51bWJlci5FUFNJTE9OKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSBfY29tcGFyZS54KSA+IF90b2xlcmFuY2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYgKE1hdGguYWJzKHRoaXMueSAtIF9jb21wYXJlLnkpID4gX3RvbGVyYW5jZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAoTWF0aC5hYnModGhpcy56IC0gX2NvbXBhcmUueikgPiBfdG9sZXJhbmNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwb3NpdGlvbiBkZXNjcmliZWQgYnkgdGhpcyBpcyB3aXRoaW4gYSBjdWJlIHdpdGggdGhlIG9wcG9zaXRlIGNvcm5lcnMgMSBhbmQgMlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNJbnNpZGVDdWJlKF9jb3JuZXIxOiBWZWN0b3IzLCBfY29ybmVyMjogVmVjdG9yMyk6IGJvb2xlYW4ge1xyXG4gICAgICBsZXQgZGlhZ29uYWw6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX2Nvcm5lcjIsIF9jb3JuZXIxKTtcclxuICAgICAgbGV0IHJlbGF0aXZlOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKHRoaXMsIF9jb3JuZXIxKTtcclxuICAgICAgbGV0IHJhdGlvOiBWZWN0b3IzID0gVmVjdG9yMy5SQVRJTyhyZWxhdGl2ZSwgZGlhZ29uYWwpO1xyXG4gICAgICBpZiAocmF0aW8ueCA+IDEgfHwgcmF0aW8ueCA8IDApXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAocmF0aW8ueSA+IDEgfHwgcmF0aW8ueSA8IDApXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAocmF0aW8ueiA+IDEgfHwgcmF0aW8ueiA8IDApXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcG9zaXRpb24gZGVzY3JpYmVkIGJ5IHRoaXMgaXMgd2l0aGluIGEgc3BoZXJlIHdpdGggdGhlIGdpdmVuIGNlbnRlciBhbmQgcmFkaXVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0luc2lkZVNwaGVyZShfY2VudGVyOiBWZWN0b3IzLCBfcmFkaXVzOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgbGV0IGRpZmZlcmVuY2U6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UodGhpcywgX2NlbnRlcik7XHJcbiAgICAgIHJldHVybiBkaWZmZXJlbmNlLm1hZ25pdHVkZVNxdWFyZWQgPCAoX3JhZGl1cyAqIF9yYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gdmVjdG9yIHRvIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkKF9hZGRlbmQ6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgdGhpcy54ICs9IF9hZGRlbmQueDtcclxuICAgICAgdGhpcy55ICs9IF9hZGRlbmQueTtcclxuICAgICAgdGhpcy56ICs9IF9hZGRlbmQuejtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJ0cmFjdHMgdGhlIGdpdmVuIHZlY3RvciBmcm9tIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3VidHJhY3QoX3N1YnRyYWhlbmQ6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgdGhpcy54IC09IF9zdWJ0cmFoZW5kLng7XHJcbiAgICAgIHRoaXMueSAtPSBfc3VidHJhaGVuZC55O1xyXG4gICAgICB0aGlzLnogLT0gX3N1YnRyYWhlbmQuejtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTY2FsZXMgdGhpcyB2ZWN0b3IgYnkgdGhlIGdpdmVuIHNjYWxhci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlKF9zY2FsYXI6IG51bWJlcik6IFZlY3RvcjMge1xyXG4gICAgICB0aGlzLnggKj0gX3NjYWxhcjtcclxuICAgICAgdGhpcy55ICo9IF9zY2FsYXI7XHJcbiAgICAgIHRoaXMueiAqPSBfc2NhbGFyO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgdGhpcyB0byB0aGUgZ2l2ZW4gbGVuZ3RoLCAxIGJ5IGRlZmF1bHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vcm1hbGl6ZShfbGVuZ3RoOiBudW1iZXIgPSAxKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvcHkoVmVjdG9yMy5OT1JNQUxJWkFUSU9OKHRoaXMsIF9sZW5ndGgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5lZ2F0ZXMgdGhpcyB2ZWN0b3IgYnkgZmxpcHBpbmcgdGhlIHNpZ25zIG9mIGl0cyBjb21wb25lbnRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBuZWdhdGUoKTogVmVjdG9yMyB7XHJcbiAgICAgIHRoaXMueCA9IC10aGlzLng7XHJcbiAgICAgIHRoaXMueSA9IC10aGlzLnk7XHJcbiAgICAgIHRoaXMueiA9IC10aGlzLno7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3RvciBhbmQgcmV0dXJucyBpdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfeDogbnVtYmVyID0gMCwgX3k6IG51bWJlciA9IDAsIF96OiBudW1iZXIgPSAwKTogVmVjdG9yMyB7XHJcbiAgICAgIHRoaXMueCA9IF94O1xyXG4gICAgICB0aGlzLnkgPSBfeTtcclxuICAgICAgdGhpcy56ID0gX3o7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbdGhpcy54LCB0aGlzLnksIHRoaXMuel0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNmb3JtcyB0aGlzIHZlY3RvciBieSB0aGUgZ2l2ZW4gbWF0cml4IG9yIHJvdGF0aW9uIHF1YXRlcm5pb24uIFxyXG4gICAgICogSW5jbHVkaW5nIG9yIGV4bHVkaW5nIHRoZSB0cmFuc2xhdGlvbiBpZiBhIG1hdHJpeCBpcyBwYXNzZWQuXHJcbiAgICAgKiBJbmNsdWRpbmcgaXMgdGhlIGRlZmF1bHQsIGV4Y2x1ZGluZyB3aWxsIG9ubHkgcm90YXRlIGFuZCBzY2FsZSB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zZm9ybShfdHJhbnNmb3JtOiBNYXRyaXg0eDQgfCBRdWF0ZXJuaW9uLCBfaW5jbHVkZVRyYW5zbGF0aW9uOiBib29sZWFuID0gdHJ1ZSk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdHJhbnNmb3JtZWQ6IFZlY3RvcjMgPSBWZWN0b3IzLlRSQU5TRk9STUFUSU9OKHRoaXMsIF90cmFuc2Zvcm0sIF9pbmNsdWRlVHJhbnNsYXRpb24pO1xyXG4gICAgICB0aGlzLmNvcHkodHJhbnNmb3JtZWQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh0cmFuc2Zvcm1lZCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJvcHMgdGhlIHotY29tcG9uZW50IGFuZCByZXR1cm5zIGEgVmVjdG9yMiBjb25zaXN0aW5nIG9mIHRoZSB4LSBhbmQgeS1jb21wb25lbnRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1ZlY3RvcjIoKTogVmVjdG9yMiB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZsZWN0cyB0aGlzIHZlY3RvciBhdCBhIGdpdmVuIG5vcm1hbC4gU2VlIHtAbGluayBWZWN0b3IzLlJFRkxFQ1RJT059XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWZsZWN0KF9ub3JtYWw6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgY29uc3QgcmVmbGVjdGVkOiBWZWN0b3IzID0gVmVjdG9yMy5SRUZMRUNUSU9OKHRoaXMsIF9ub3JtYWwpO1xyXG4gICAgICB0aGlzLnNldChyZWZsZWN0ZWQueCwgcmVmbGVjdGVkLnksIHJlZmxlY3RlZC56KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVmbGVjdGVkKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaHVmZmxlcyB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2h1ZmZsZSgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IGE6IG51bWJlcltdID0gW3RoaXMueCwgdGhpcy55LCB0aGlzLnpdO1xyXG4gICAgICB0aGlzLnNldChSYW5kb20uZGVmYXVsdC5zcGxpY2UoYSksIFJhbmRvbS5kZWZhdWx0LnNwbGljZShhKSwgYVswXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV3dHdlZW4gdGhpcyB2ZWN0b3IgYW5kIHRoZSBnaXZlbiB2ZWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERpc3RhbmNlKF90bzogVmVjdG9yMyk6IG51bWJlciB7XHJcbiAgICAgIGxldCBkaWZmZXJlbmNlOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKHRoaXMsIF90byk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGRpZmZlcmVuY2UpO1xyXG4gICAgICByZXR1cm4gZGlmZmVyZW5jZS5tYWduaXR1ZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgZWFjaCBkaW1lbnNpb24sIG1vdmVzIHRoZSBjb21wb25lbnQgdG8gdGhlIG1pbmltdW0gb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWluKF9jb21wYXJlOiBWZWN0b3IzKTogVmVjdG9yMyB7XHJcbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgX2NvbXBhcmUueCk7XHJcbiAgICAgIHRoaXMueSA9IE1hdGgubWluKHRoaXMueSwgX2NvbXBhcmUueSk7XHJcbiAgICAgIHRoaXMueiA9IE1hdGgubWluKHRoaXMueiwgX2NvbXBhcmUueik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9yIGVhY2ggZGltZW5zaW9uLCBtb3ZlcyB0aGUgY29tcG9uZW50IHRvIHRoZSBtYXhpbXVtIG9mIHRoaXMgYW5kIHRoZSBnaXZlbiB2ZWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIG1heChfY29tcGFyZTogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICB0aGlzLnggPSBNYXRoLm1heCh0aGlzLngsIF9jb21wYXJlLngpO1xyXG4gICAgICB0aGlzLnkgPSBNYXRoLm1heCh0aGlzLnksIF9jb21wYXJlLnkpO1xyXG4gICAgICB0aGlzLnogPSBNYXRoLm1heCh0aGlzLnosIF9jb21wYXJlLnopO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBgKCR7dGhpcy54LnRvUHJlY2lzaW9uKDUpfSwgJHt0aGlzLnkudG9QcmVjaXNpb24oNSl9LCAke3RoaXMuei50b1ByZWNpc2lvbig1KX0pYDtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZXMgdGhlIHN0YW5kYXJkIGFycmF5Lm1hcCBmdW5jdGlvbmFsaXR5IHRvIHBlcmZvcm0gdGhlIGdpdmVuIGZ1bmN0aW9uIG9uIGFsbCBjb21wb25lbnRzIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKiBhbmQgcmV0dXJuIGEgbmV3IHZlY3RvciB3aXRoIHRoZSByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXAoX2Z1bmN0aW9uOiAodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlciwgYXJyYXk6IEFycmF5TGlrZTxudW1iZXI+KSA9PiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IGNvcHk6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIGNvcHkuc2V0KC4uLlt0aGlzLngsIHRoaXMueSwgdGhpcy56XS5tYXAoX2Z1bmN0aW9uKSk7XHJcbiAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgLy8gc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgeyBcInJcIjogJHt0aGlzLnJ9LCBcImdcIjogJHt0aGlzLmd9LCBcImJcIjogJHt0aGlzLmJ9LCBcImFcIjogJHt0aGlzLmF9fWA7IH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udG9KU09OID0gKCkgPT4geyByZXR1cm4gYFske3RoaXMueH0sICR7dGhpcy55fSwgJHt0aGlzLnp9XWA7IH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8VmVjdG9yMz4ge1xyXG4gICAgICBpZiAodHlwZW9mIChfc2VyaWFsaXphdGlvbikgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XSA9IEpTT04ucGFyc2UoPHN0cmluZz48dW5rbm93bj5fc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIH0gZWxzZVxyXG4gICAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBpZiAoX211dGF0b3IueCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHRoaXMueCA9IF9tdXRhdG9yLng7XHJcbiAgICAgIGlmIChfbXV0YXRvci55ICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgdGhpcy55ID0gX211dGF0b3IueTtcclxuICAgICAgaWYgKF9tdXRhdG9yLnogIT09IHVuZGVmaW5lZClcclxuICAgICAgICB0aGlzLnogPSBfbXV0YXRvci56O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHsgeDogdGhpcy54LCB5OiB0aGlzLnksIHo6IHRoaXMueiB9O1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7LyoqICovIH1cclxuICAgIC8vI2VuZHJlZ2lvbiBUcmFuc2ZlclxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFN0b3JlcyBhbmQgbWFuaXB1bGF0ZXMgYSBmb3VyZGltZW5zaW9uYWwgdmVjdG9yIGNvbXByaXNlZCBvZiB0aGUgY29tcG9uZW50cyB4LCB5LCB6IGFuZCB3LlxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBWZWN0b3I0IGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSwgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeTogbnVtYmVyO1xyXG4gICAgcHVibGljIHo6IG51bWJlcjtcclxuICAgIHB1YmxpYyB3OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF94OiBudW1iZXIgPSAwLCBfeTogbnVtYmVyID0gMCwgX3o6IG51bWJlciA9IDAsIF93OiBudW1iZXIgPSAwKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuc2V0KF94LCBfeSwgX3osIF93KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhlIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGguaHlwb3QodGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzcXVhcmVkIG1hZ25pdHVkZSAobGVuZ3RoKSBvZiB0aGUgdmVjdG9yLiBGYXN0ZXIgZm9yIHNpbXBsZSBwcm94aW1pdHkgZXZhbHVhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtYWduaXR1ZGVTcXVhcmVkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBjbG9uZSBvZiB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBWZWN0b3I0IHtcclxuICAgICAgcmV0dXJuIFJlY3ljbGVyLnJldXNlKFZlY3RvcjQpLmNvcHkodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb3BpZXMgdGhlIGNvbXBvbmVudHMgb2YgdGhlIGdpdmVuIHZlY3RvciBpbnRvIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29weShfb3JpZ2luYWw6IFZlY3RvcjQpOiBWZWN0b3I0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2V0KF9vcmlnaW5hbC54LCBfb3JpZ2luYWwueSwgX29yaWdpbmFsLnosIF9vcmlnaW5hbC53KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGNvbXBvbmVudHMgb2YgdGhpcyB2ZWN0b3IgYW5kIHJldHVybnMgaXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX3g6IG51bWJlciwgX3k6IG51bWJlciwgX3o6IG51bWJlciwgX3c6IG51bWJlcik6IFZlY3RvcjQge1xyXG4gICAgICB0aGlzLnggPSBfeDsgdGhpcy55ID0gX3k7IHRoaXMueiA9IF96OyB0aGlzLncgPSBfdztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBjb21wb25lbnRzIG9mIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcclxuICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLnddO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gdmVjdG9yIHRvIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkKF9hZGRlbmQ6IFZlY3RvcjQpOiBWZWN0b3I0IHtcclxuICAgICAgdGhpcy54ICs9IF9hZGRlbmQueDsgdGhpcy55ICs9IF9hZGRlbmQueTsgdGhpcy56ICs9IF9hZGRlbmQuejsgdGhpcy53ICs9IF9hZGRlbmQudztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJ0cmFjdHMgdGhlIGdpdmVuIHZlY3RvciBmcm9tIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3VidHJhY3QoX3N1YnRyYWhlbmQ6IFZlY3RvcjQpOiBWZWN0b3I0IHtcclxuICAgICAgdGhpcy54IC09IF9zdWJ0cmFoZW5kLng7IHRoaXMueSAtPSBfc3VidHJhaGVuZC55OyB0aGlzLnogLT0gX3N1YnRyYWhlbmQuejsgdGhpcy53IC09IF9zdWJ0cmFoZW5kLnc7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2NhbGVzIHRoaXMgdmVjdG9yIGJ5IHRoZSBnaXZlbiBzY2FsYXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzY2FsZShfc2NhbGFyOiBudW1iZXIpOiBWZWN0b3I0IHtcclxuICAgICAgdGhpcy54ICo9IF9zY2FsYXI7IHRoaXMueSAqPSBfc2NhbGFyOyB0aGlzLnogKj0gX3NjYWxhcjsgdGhpcy53ICo9IF9zY2FsYXI7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm9ybWFsaXplcyB0aGlzIHZlY3RvciB0byB0aGUgZ2l2ZW4gbGVuZ3RoLCAxIGJ5IGRlZmF1bHQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBub3JtYWxpemUoX2xlbmd0aDogbnVtYmVyID0gMSk6IFZlY3RvcjQge1xyXG4gICAgICBsZXQgbWFnbml0dWRlU3F1YXJlZDogbnVtYmVyID0gdGhpcy5tYWduaXR1ZGVTcXVhcmVkO1xyXG4gICAgICBpZiAobWFnbml0dWRlU3F1YXJlZCA9PSAwKVxyXG4gICAgICAgIHRocm93IChuZXcgUmFuZ2VFcnJvcihcIkltcG9zc2libGUgbm9ybWFsaXphdGlvblwiKSk7XHJcbiAgICAgIHRoaXMuc2NhbGUoX2xlbmd0aCAvIE1hdGguc3FydChtYWduaXR1ZGVTcXVhcmVkKSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdGhpcyBpbnN0YW5jZSBhbmQgYW5vdGhlciB2ZWN0b3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkb3QoX290aGVyOiBWZWN0b3I0KTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMueCAqIF9vdGhlci54ICsgdGhpcy55ICogX290aGVyLnkgKyB0aGlzLnogKiBfb3RoZXIueiArIHRoaXMudyAqIF9vdGhlci53O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWN5Y2xlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNldCgwLCAwLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICByZXR1cm4geyB0b0pTT046ICgpID0+IGBbJHt0aGlzLnh9LCAke3RoaXMueX0sICR7dGhpcy56fSwgJHt0aGlzLnd9XWAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFZlY3RvcjQ+IHtcclxuICAgICAgW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud10gPSBKU09OLnBhcnNlKDxzdHJpbmc+PHVua25vd24+X3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgeyAvKiogKi8gfTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgYSBmYWNlIG9mIGEge0BsaW5rIE1lc2h9IGJ5IHJlZmVyZW5jaW5nIHRocmVlIHtAbGluayBWZXJ0aWNlc30gd2l0aCB0aGVpciBpbmRpemVzXHJcbiAgICogYW5kIGNhbGN1bGF0ZXMgZmFjZSBub3JtYWxzLlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEZhY2Uge1xyXG4gICAgcHVibGljIGluZGljZXM6IG51bWJlcltdID0gW107XHJcbiAgICBwdWJsaWMgYW5nbGVzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgcHVibGljIG5vcm1hbFVuc2NhbGVkOiBWZWN0b3IzO1xyXG4gICAgcHVibGljIG5vcm1hbDogVmVjdG9yMztcclxuICAgIHByaXZhdGUgdmVydGljZXM6IFZlcnRpY2VzO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfdmVydGljZXM6IFZlcnRpY2VzLCBfaW5kZXgwOiBudW1iZXIsIF9pbmRleDE6IG51bWJlciwgX2luZGV4MjogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuaW5kaWNlcyA9IFtfaW5kZXgwLCBfaW5kZXgxLCBfaW5kZXgyXTtcclxuICAgICAgdGhpcy52ZXJ0aWNlcyA9IF92ZXJ0aWNlcztcclxuICAgICAgdGhpcy5jYWxjdWxhdGVOb3JtYWxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgdmVydGV4IHJlZmVyZW5jZWQgYnkgdGhlIGdpdmVuIGluZGV4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbihfaW5kZXg6IG51bWJlcik6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gdGhpcy52ZXJ0aWNlcy5wb3NpdGlvbih0aGlzLmluZGljZXNbX2luZGV4XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtdXN0IGJlIGNvcGxhbmFyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0luc2lkZShfcG9pbnQ6IFZlY3RvcjMpOiBib29sZWFuIHtcclxuICAgICAgbGV0IGRpZmZzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaW5kZXggb2YgdGhpcy5pbmRpY2VzKSB7XHJcbiAgICAgICAgbGV0IGRpZmY6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UodGhpcy52ZXJ0aWNlcy5wb3NpdGlvbihpbmRleCksIF9wb2ludCk7XHJcbiAgICAgICAgZGlmZnMucHVzaChkaWZmKTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgbjA6IFZlY3RvcjMgPSBWZWN0b3IzLkNST1NTKGRpZmZzWzFdLCBkaWZmc1swXSk7XHJcbiAgICAgIGxldCBuMTogVmVjdG9yMyA9IFZlY3RvcjMuQ1JPU1MoZGlmZnNbMl0sIGRpZmZzWzFdKTtcclxuICAgICAgbGV0IG4yOiBWZWN0b3IzID0gVmVjdG9yMy5DUk9TUyhkaWZmc1swXSwgZGlmZnNbMl0pO1xyXG5cclxuICAgICAgbGV0IGRvdDE6IG51bWJlciA9IFZlY3RvcjMuRE9UKG4wLCBuMSk7XHJcbiAgICAgIGxldCBkb3QyOiBudW1iZXIgPSBWZWN0b3IzLkRPVChuMCwgbjIpO1xyXG5cclxuICAgICAgcmV0dXJuICEoZG90MSA8IDAgfHwgZG90MiA8IDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlTm9ybWFscygpOiB2b2lkIHtcclxuICAgICAgbGV0IHRyaWdvbjogVmVjdG9yM1tdID0gdGhpcy5pbmRpY2VzLm1hcCgoX2luZGV4OiBudW1iZXIpID0+IHRoaXMudmVydGljZXMucG9zaXRpb24oX2luZGV4KSk7XHJcbiAgICAgIGxldCB2MTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRSh0cmlnb25bMV0sIHRyaWdvblswXSk7XHJcbiAgICAgIGxldCB2MjogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRSh0cmlnb25bMl0sIHRyaWdvblswXSk7XHJcbiAgICAgIHRoaXMubm9ybWFsVW5zY2FsZWQgPSBWZWN0b3IzLkNST1NTKHYxLCB2Mik7XHJcbiAgICAgIHRoaXMubm9ybWFsID0gVmVjdG9yMy5OT1JNQUxJWkFUSU9OKHRoaXMubm9ybWFsVW5zY2FsZWQpO1xyXG4gICAgICB0aGlzLmFuZ2xlcy5wdXNoKFxyXG4gICAgICAgIFZlY3RvcjMuQU5HTEUodjEsIHYyKSxcclxuICAgICAgICBWZWN0b3IzLkFOR0xFKFZlY3RvcjMuRElGRkVSRU5DRSh0cmlnb25bMl0sIHRyaWdvblsxXSksIFZlY3RvcjMuRElGRkVSRU5DRSh0cmlnb25bMF0sIHRyaWdvblsxXSkpLFxyXG4gICAgICAgIFZlY3RvcjMuQU5HTEUoVmVjdG9yMy5ESUZGRVJFTkNFKHRyaWdvblswXSwgdHJpZ29uWzJdKSwgVmVjdG9yMy5ESUZGRVJFTkNFKHRyaWdvblsxXSwgdHJpZ29uWzJdKSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgbWVzaGVzLiBcclxuICAgKiBNZXNoZXMgcHJvdmlkZSBpbmRleGVkIHZlcnRpY2VzLCB0aGUgb3JkZXIgb2YgaW5kaWNlcyB0byBjcmVhdGUgdHJpZ29ucyBhbmQgbm9ybWFscywgYW5kIHRleHR1cmUgY29vcmRpbmF0ZXNcclxuICAgKiBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOS8yMlxyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3Rvck1lc2guZGVjb3JhdGVcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWVzaCBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGVSZXNvdXJjZSB7XHJcbiAgICAvKiogcmVmZXJzIGJhY2sgdG8gdGhpcyBjbGFzcyBmcm9tIGFueSBzdWJjbGFzcyBlLmcuIGluIG9yZGVyIHRvIGZpbmQgY29tcGF0aWJsZSBvdGhlciByZXNvdXJjZXMqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBiYXNlQ2xhc3M6IHR5cGVvZiBNZXNoID0gTWVzaDtcclxuICAgIC8qKiBsaXN0IG9mIGFsbCB0aGUgc3ViY2xhc3NlcyBkZXJpdmVkIGZyb20gdGhpcyBjbGFzcywgaWYgdGhleSByZWdpc3RlcmVkIHByb3Blcmx5Ki9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgc3ViY2xhc3NlczogdHlwZW9mIE1lc2hbXSA9IFtdO1xyXG5cclxuICAgIC8vIFRPRE86IHJlbmFtZSB2ZXJ0aWNlcyB0byB2ZXJ0aWNlc1Ntb290aCBvciBqdXN0IGNsb3VkLCBhbmQgY2xvdWQgdG8gdmVydGljZXNcclxuXHJcbiAgICBwdWJsaWMgaWRSZXNvdXJjZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyA9IFwiTWVzaFwiO1xyXG4gICAgLy8gYmFzZSBzdHJ1Y3R1cmUgZm9yIG1lc2hlcyBpbiBGVURHRVxyXG4gICAgcHVibGljIHZlcnRpY2VzOiBWZXJ0aWNlcyA9IG5ldyBWZXJ0aWNlcygpO1xyXG4gICAgcHVibGljIGZhY2VzOiBGYWNlW10gPSBbXTtcclxuXHJcbiAgICAvLyBwdWJsaWMgcmVuZGVyQnVmZmVyczogUmVuZGVyQnVmZmVyczsgLyogZGVmaW5lZCBieSBSZW5kZXJJbmplY3RvciovXHJcblxyXG4gICAgLyoqIGJvdW5kaW5nIGJveCBBQUJCICovXHJcbiAgICBwcm90ZWN0ZWQgxpJib3g6IEJveDtcclxuICAgIC8vIFRPRE86IGV4cGxvcmUgbWF0aGVtYXRpY3MgZm9yIGVhc3kgdHJhbnNmb3JtYXRpb25zIG9mIHJhZGl1cyBcclxuICAgIC8qKiBib3VuZGluZyByYWRpdXMgKi9cclxuICAgIHByb3RlY3RlZCDGknJhZGl1czogbnVtYmVyO1xyXG5cclxuICAgICNyZW5kZXJNZXNoOiBSZW5kZXJNZXNoO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoXCIpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlZ2lzdGVyU3ViY2xhc3MoX3N1YkNsYXNzOiB0eXBlb2YgTWVzaCk6IG51bWJlciB7IHJldHVybiBNZXNoLnN1YmNsYXNzZXMucHVzaChfc3ViQ2xhc3MpIC0gMTsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcmVuZGVyTWVzaCgpOiBSZW5kZXJNZXNoIHtcclxuICAgICAgaWYgKHRoaXMuI3JlbmRlck1lc2ggPT0gbnVsbClcclxuICAgICAgICB0aGlzLiNyZW5kZXJNZXNoID0gbmV3IFJlbmRlck1lc2godGhpcyk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jcmVuZGVyTWVzaDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGJvdW5kaW5nQm94KCk6IEJveCB7XHJcbiAgICAgIGlmICh0aGlzLsaSYm94ID09IG51bGwpXHJcbiAgICAgICAgdGhpcy7GkmJveCA9IHRoaXMuY3JlYXRlQm91bmRpbmdCb3goKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLsaSYm94O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCByYWRpdXMoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMuxpJyYWRpdXMgPT0gbnVsbClcclxuICAgICAgICB0aGlzLsaScmFkaXVzID0gdGhpcy5jcmVhdGVSYWRpdXMoKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLsaScmFkaXVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yTWVzaH0uXHJcbiAgICAgKiBVc2VkIGJ5IHRoZSByZW5kZXIgc3lzdGVtLlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1c2VSZW5kZXJCdWZmZXJzKF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSwgX210eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQsIF9tdHhNZXNoVG9WaWV3OiBNYXRyaXg0eDQsIF9pZD86IG51bWJlcik6IFJlbmRlckJ1ZmZlcnMgeyByZXR1cm4gbnVsbDsgLyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcbiAgICAvKipcclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3Rvck1lc2h9LlxyXG4gICAgICogVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UmVuZGVyQnVmZmVycygpOiBSZW5kZXJCdWZmZXJzIHsgcmV0dXJuIG51bGw7IC8qIGluamVjdGVkIGJ5IFJlbmRlckluamVjdG9yKi8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmplY3RlZCBieSB7QGxpbmsgUmVuZGVySW5qZWN0b3JNZXNofS5cclxuICAgICAqIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVJlbmRlckJ1ZmZlcnMoX3JlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBSZW5kZXJJbmplY3RvciovIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgYm91bmRzIG9mIHRoaXMgbWVzaCBhc3dlbGwgYXMgdGhlIGJ1ZmZlcnMgb2YgdGhlIGFzc29jaWF0ZWQge0BsaW5rIFJlbmRlck1lc2h9LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuxpJib3ggPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMuxpJyYWRpdXMgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICB0aGlzLmRlbGV0ZVJlbmRlckJ1ZmZlcnModGhpcy5yZW5kZXJNZXNoLmJ1ZmZlcnMpO1xyXG4gICAgICB0aGlzLnJlbmRlck1lc2guY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIC8vIFNlcmlhbGl6ZS9EZXNlcmlhbGl6ZSBmb3IgYWxsIG1lc2hlcyB0aGF0IGNhbGN1bGF0ZSB3aXRob3V0IHBhcmFtZXRlcnNcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIGlkUmVzb3VyY2U6IHRoaXMuaWRSZXNvdXJjZSxcclxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgdHlwZTogdGhpcy50eXBlIC8vIHN0b3JlIGZvciBlZGl0b3Igdmlld1xyXG4gICAgICB9OyAvLyBubyBkYXRhIG5lZWRlZCAuLi5cclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMsIF9zZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfc2VyaWFsaXphdGlvbi5uYW1lO1xyXG4gICAgICAvLyB0eXBlIGlzIGFuIGFjY2Vzc29yIGFuZCBtdXN0IG5vdCBiZSBkZXNlcmlhbGl6ZWRcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgLy8gVE9ETzogc28gbXVjaCB0byBkZWxldGUuLi4gcmF0aGVyIGp1c3QgZ2F0aGVyIHdoYXQgdG8gbXV0YXRlXHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci7GkmJveDtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLsaScmFkaXVzO1xyXG5cclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnJlbmRlckJ1ZmZlcnM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZVJhZGl1cygpOiBudW1iZXIge1xyXG4gICAgICAvL1RPRE86IHJhZGl1cyBhbmQgYm91bmRpbmcgYm94IGNvdWxkIGJlIGNyZWF0ZWQgb24gY29uc3RydWN0aW9uIG9mIHZlcnRleC1hcnJheVxyXG4gICAgICBsZXQgcmFkaXVzOiBudW1iZXIgPSAwO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHJhZGl1cyA9IE1hdGgubWF4KHJhZGl1cywgdGhpcy52ZXJ0aWNlcy5wb3NpdGlvbihpKS5tYWduaXR1ZGVTcXVhcmVkKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KHJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUJvdW5kaW5nQm94KCk6IEJveCB7XHJcbiAgICAgIGxldCBib3g6IEJveCA9IFJlY3ljbGVyLmdldChCb3gpO1xyXG4gICAgICBib3guc2V0KCk7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHBvaW50OiBWZWN0b3IzID0gdGhpcy52ZXJ0aWNlcy5wb3NpdGlvbihpKTtcclxuICAgICAgICBib3guZXhwYW5kKHBvaW50KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYm94O1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGEgc2ltcGxlIGN1YmUgd2l0aCBlZGdlcyBvZiBsZW5ndGggMSwgZWFjaCBmYWNlIGNvbnNpc3Rpbmcgb2YgdHdvIHRyaWdvbnNcclxuICAgKiBgYGB0ZXh0XHJcbiAgICogICAgICAgKDEyKSA0X19fXzcgICgxMSlcclxuICAgKiAgICAgICAoOCkgMC9fXzMvfCAoMTApXHJcbiAgICogICAgICAgKDE1KSB8fDVffHw2ICgxNClcclxuICAgKiAgICAgICAoOSkgMXwvXzJ8LyAoMTMpXHJcbiAgICogYGBgXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaEN1YmUgZXh0ZW5kcyBNZXNoIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaEN1YmUpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoQ3ViZVwiKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuXHJcbiAgICAgIC8vIG5vIHNoYXJlZCB2ZXJ0aWNlcywgY29ybmVycyBuZWVkIHRocmVlIG5vcm1hbHMgZm9yIFBob25nIGFuZCBHb3VyYXVkXHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgVmVydGljZXMoXHJcbiAgICAgICAgLy8gZnJvbnQgdmVydGljZXNcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKC0wLjUsIDAuNSwgMC41KSwgbmV3IFZlY3RvcjIoMCwgMCkpLCAvLyAwXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAtMC41LCAwLjUpLCBuZXcgVmVjdG9yMigwLCAxKSksIC8vIDFcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuNSwgLTAuNSwgMC41KSwgbmV3IFZlY3RvcjIoMSwgMSkpLCAvLyAyXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygwLjUsIDAuNSwgMC41KSwgbmV3IFZlY3RvcjIoMSwgMCkpIC8vM1xyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gZ2VuZXJhdGUgdmVydGljZXMgb24gc2lkZXNcclxuICAgICAgZm9yIChsZXQgYW5nbGU6IG51bWJlciA9IDkwOyBhbmdsZSA8IDM2MDsgYW5nbGUgKz0gOTApIHtcclxuICAgICAgICBsZXQgdHJhbnNmb3JtOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT04oVmVjdG9yMy5ZKGFuZ2xlKSk7XHJcbiAgICAgICAgbGV0IHNpZGU6IFZlcnRleFtdID0gdGhpcy52ZXJ0aWNlcy5zbGljZSgwLCA0KS5tYXAoKF92OiBWZXJ0ZXgpID0+XHJcbiAgICAgICAgICBuZXcgVmVydGV4KFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3YucG9zaXRpb24sIHRyYW5zZm9ybSksIF92LnV2KSk7XHJcbiAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKC4uLnNpZGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGdlbmVyYXRlIHZlcnRpY2VzIGZvciB0b3AgYW5kIGJvdHRvbVxyXG4gICAgICBmb3IgKGxldCBhbmdsZTogbnVtYmVyID0gOTA7IGFuZ2xlIDwgMzYwOyBhbmdsZSArPSAxODApIHtcclxuICAgICAgICBsZXQgdHJhbnNmb3JtOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT04oVmVjdG9yMy5YKGFuZ2xlKSk7XHJcbiAgICAgICAgbGV0IHNpZGU6IFZlcnRleFtdID0gdGhpcy52ZXJ0aWNlcy5zbGljZSgwLCA0KS5tYXAoKF92OiBWZXJ0ZXgpID0+XHJcbiAgICAgICAgICBuZXcgVmVydGV4KFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3YucG9zaXRpb24sIHRyYW5zZm9ybSksIF92LnV2KSk7XHJcbiAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKC4uLnNpZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmZhY2VzID0gW107XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAyNDsgaSArPSA0KVxyXG4gICAgICAgIC8vIGdlbmVyYXRlIGZhY2VzXHJcbiAgICAgICAgdGhpcy5mYWNlcy5wdXNoKC4uLm5ldyBRdWFkKHRoaXMudmVydGljZXMsIGkgKyAwLCBpICsgMSwgaSArIDIsIGkgKyAzKS5mYWNlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSBmbGF0IHBvbHlnb24uIEFsbCB0cmlnb25zIHNoYXJlIHZlcnRleCAwLCBzbyBjYXJlZnVsIGRlc2lnbiBpcyByZXF1aXJlZCB0byBjcmVhdGUgY29uY2F2ZSBwb2x5Z29ucy4gXHJcbiAgICogVmVydGV4IDAgaXMgYWxzbyBhc3NvY2lhdGVkIHdpdGggdGhlIGZhY2Ugbm9ybWFsLlxyXG4gICAqIGBgYHRleHRcclxuICAgKiAgICAgICAgICAgICAwIFxyXG4gICAqICAgICAgICAgICAx4pWxfOKVsiAgNCAuLi5cclxuICAgKiAgICAgICAgICAgIOKVsnxf4pWy4pWxIFxyXG4gICAqICAgICAgICAgICAgMiAgIDNcclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hQb2x5Z29uIGV4dGVuZHMgTWVzaCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gTWVzaC5yZWdpc3RlclN1YmNsYXNzKE1lc2hQb2x5Z29uKTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgc2hhcGVEZWZhdWx0OiBWZWN0b3IyW10gPSBbIC8vIHRyaWdvbiBpcyB0aGUgbWluaW1hbCBzaGFwZVxyXG4gICAgICBuZXcgVmVjdG9yMigtMSwgLTEpLFxyXG4gICAgICBuZXcgVmVjdG9yMigxLCAtMSksXHJcbiAgICAgIG5ldyBWZWN0b3IyKDAsIDEpXHJcbiAgICBdO1xyXG4gICAgcHJvdGVjdGVkIHNoYXBlOiBNdXRhYmxlQXJyYXk8VmVjdG9yMj4gPSBuZXcgTXV0YWJsZUFycmF5PFZlY3RvcjI+KFZlY3RvcjIpO1xyXG4gICAgcHJvdGVjdGVkIGZpdFRleHR1cmU6IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBcIk1lc2hQb2x5Z29uXCIsIF9zaGFwZTogVmVjdG9yMltdID0gTWVzaFBvbHlnb24uc2hhcGVEZWZhdWx0LCBfZml0VGV4dHVyZTogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgc3VwZXIoX25hbWUpO1xyXG4gICAgICB0aGlzLmNyZWF0ZShfc2hhcGUsIF9maXRUZXh0dXJlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IG1pblZlcnRpY2VzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiAzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoaXMgbWVzaCBmcm9tIHRoZSBnaXZlbiB2ZXJ0aWNlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNyZWF0ZShfc2hhcGU6IFZlY3RvcjJbXSA9IFtdLCBfZml0VGV4dHVyZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zaGFwZSA9IDxNdXRhYmxlQXJyYXk8VmVjdG9yMj4+TXV0YWJsZUFycmF5LmZyb20oX3NoYXBlLm1hcChfdmVydGV4ID0+IF92ZXJ0ZXguY2xvbmUpKTtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICB0aGlzLmZpdFRleHR1cmUgPSBfZml0VGV4dHVyZTtcclxuXHJcbiAgICAgIGlmIChfc2hhcGUubGVuZ3RoIDwgdGhpcy5taW5WZXJ0aWNlcykge1xyXG4gICAgICAgIERlYnVnLndhcm4oYEF0IGxlYXN0ICR7dGhpcy5taW5WZXJ0aWNlc30gdmVydGljZXMgbmVlZGVkIHRvIGNvbnN0cnVjdCBNZXNoUG9seWdvbiwgZGVmYXVsdCB0cmlnb24gdXNlZGApO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlKE1lc2hQb2x5Z29uLnNoYXBlRGVmYXVsdCwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgc2hhcGU6IFZlY3RvcjJbXSA9IF9zaGFwZTtcclxuXHJcbiAgICAgIGxldCBtaW46IFZlY3RvcjIgPSBWZWN0b3IyLlpFUk8oKTtcclxuICAgICAgbGV0IG1heDogVmVjdG9yMiA9IFZlY3RvcjIuWkVSTygpO1xyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKCk7XHJcbiAgICAgIGZvciAobGV0IHZlcnRleCBvZiBzaGFwZSkge1xyXG4gICAgICAgIHRoaXMudmVydGljZXMucHVzaChuZXcgVmVydGV4KHZlcnRleC50b1ZlY3RvcjMoKSkpO1xyXG5cclxuICAgICAgICBtaW4ueCA9IE1hdGgubWluKG1pbi54LCB2ZXJ0ZXgueCk7XHJcbiAgICAgICAgbWF4LnggPSBNYXRoLm1heChtYXgueCwgdmVydGV4LngpO1xyXG4gICAgICAgIG1pbi55ID0gTWF0aC5taW4obWluLnksIHZlcnRleC55KTtcclxuICAgICAgICBtYXgueSA9IE1hdGgubWF4KG1heC55LCB2ZXJ0ZXgueSk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHNpemU6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihtYXgueCAtIG1pbi54LCBtYXgueSAtIG1pbi55KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmZpdFRleHR1cmUpIHtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgc2hhcGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCB0ZXh0dXJlVVY6IFZlY3RvcjIgPSBWZWN0b3IyLkRJRkZFUkVOQ0Uoc2hhcGVbaV0sIG1pbik7XHJcbiAgICAgICAgICB0aGlzLnZlcnRpY2VzW2ldLnV2ID0gbmV3IFZlY3RvcjIodGV4dHVyZVVWLnggLyBzaXplLngsIDEgLSB0ZXh0dXJlVVYueSAvIHNpemUueSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9zaGFwZS5mb3JFYWNoKChfdmVydGV4LCBfaSkgPT4gdGhpcy52ZXJ0aWNlc1tfaV0udXYgPSBuZXcgVmVjdG9yMihfdmVydGV4LngsIC1fdmVydGV4LnkpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5mYWNlcyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAyOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICB0aGlzLmZhY2VzLnB1c2gobmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgaSAtIDEsIGksIDApKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2hhcGUgPSBTZXJpYWxpemVyLnNlcmlhbGl6ZUFycmF5KFZlY3RvcjIsIHRoaXMuc2hhcGUpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmZpdFRleHR1cmUgPSB0aGlzLmZpdFRleHR1cmU7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICBsZXQgdmVjdG9yczogVmVjdG9yMltdID0gPFZlY3RvcjJbXT5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplQXJyYXkoX3NlcmlhbGl6YXRpb24uc2hhcGUpO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh2ZWN0b3JzLCBfc2VyaWFsaXphdGlvbi5maXRUZXh0dXJlKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgICAgdGhpcy5jcmVhdGUodGhpcy5zaGFwZSwgdGhpcy5maXRUZXh0dXJlKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5NVVRBVEUpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIk1lc2hQb2x5Z29uLnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBHZW5lcmF0ZXMgYW4gZXh0cnVzaW9uIG9mIGEgcG9seWdvbiBieSBhIHNlcmllcyBvZiB0cmFuc2Zvcm1hdGlvbnNcclxuICAgKiBgYGB0ZXh0ICBcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICBfX19fXHJcbiAgICogUG9seWdvbiAgICAgICAgIF9fX1/ilbHilbIgICDilbIgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlcclxuICAgKiBUcmFuc2Zvcm0gMCAg4oaSIOKVsSDilbJfX+KVsl/ilbJfX1/ilbIg4oaQIFRyYW5zZm9ybSAyICAgICAgICAgIHogX1/ilIJcclxuICAgKiAoYmFzZSkgICAgICAgICDilbJf4pWxX1/ilbEg4pWxICAg4pWxICAgKGxpZCkgICAgICAgICAgICAgICAgICAgICDilbIgICAgICAgXHJcbiAgICogICAgIFRyYW5zZm9ybSAxICDihpIgIOKVsuKVsV9fX+KVsSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4XHJcbiAgICogYGBgXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjEtMjAyMlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNZXNoRXh0cnVzaW9uIGV4dGVuZHMgTWVzaFBvbHlnb24ge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IE1lc2gucmVnaXN0ZXJTdWJjbGFzcyhNZXNoRXh0cnVzaW9uKTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgbXR4RGVmYXVsdHM6IE1hdHJpeDR4NFtdID0gWyAvLyBvZmZzZXQgb2YgKzAuNXogYW5kIC0wLjV6IGFzIGRlZmF1bHRcclxuICAgICAgTWF0cml4NHg0LlRSQU5TTEFUSU9OKFZlY3RvcjMuWigwLjUpKSxcclxuICAgICAgTWF0cml4NHg0LlRSQU5TTEFUSU9OKFZlY3RvcjMuWigtMC41KSlcclxuICAgIF07XHJcbiAgICBwcml2YXRlIG10eFRyYW5zZm9ybXM6IE11dGFibGVBcnJheTxNYXRyaXg0eDQ+ID0gbmV3IE11dGFibGVBcnJheShNYXRyaXg0eDQpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoRXh0cnVzaW9uXCIsIF92ZXJ0aWNlczogVmVjdG9yMltdID0gTWVzaFBvbHlnb24uc2hhcGVEZWZhdWx0LCBfbXR4VHJhbnNmb3JtczogTWF0cml4NHg0W10gPSBNZXNoRXh0cnVzaW9uLm10eERlZmF1bHRzLCBfZml0VGV4dHVyZTogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgc3VwZXIoX25hbWUsIF92ZXJ0aWNlcywgX2ZpdFRleHR1cmUpO1xyXG4gICAgICB0aGlzLmV4dHJ1ZGUoX210eFRyYW5zZm9ybXMpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIk11dGF0b3JcIiwgdGhpcy5nZXRNdXRhdG9yKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50cmFuc2Zvcm1zID0gU2VyaWFsaXplci5zZXJpYWxpemVBcnJheShNYXRyaXg0eDQsIHRoaXMubXR4VHJhbnNmb3Jtcyk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgbGV0IG10eFRyYW5zZm9ybXM6IE1hdHJpeDR4NFtdO1xyXG4gICAgICBpZiAoX3NlcmlhbGl6YXRpb24udHJhbnNmb3JtcylcclxuICAgICAgICBtdHhUcmFuc2Zvcm1zID0gPE1hdHJpeDR4NFtdPmF3YWl0IFNlcmlhbGl6ZXIuZGVzZXJpYWxpemVBcnJheShfc2VyaWFsaXphdGlvbi50cmFuc2Zvcm1zKTtcclxuICAgICAgdGhpcy5leHRydWRlKG10eFRyYW5zZm9ybXMpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgICB0aGlzLmV4dHJ1ZGUodGhpcy5tdHhUcmFuc2Zvcm1zKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5NVVRBVEUpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgZXh0cnVkZShfbXR4VHJhbnNmb3JtczogTWF0cml4NHg0W10gPSBNZXNoRXh0cnVzaW9uLm10eERlZmF1bHRzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubXR4VHJhbnNmb3JtcyA9IDxNdXRhYmxlQXJyYXk8TWF0cml4NHg0Pj5NdXRhYmxlQXJyYXkuZnJvbSg8TXV0YWJsZUFycmF5PE1hdHJpeDR4ND4+X210eFRyYW5zZm9ybXMpO1xyXG4gICAgICBsZXQgblRyYW5zZm9ybXM6IG51bWJlciA9IF9tdHhUcmFuc2Zvcm1zLmxlbmd0aDtcclxuICAgICAgbGV0IG5WZXJ0aWNlc1NoYXBlOiBudW1iZXIgPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBuZXcgdmVydGV4IGNsb3VkLCBjdXJyZW50IGNsb3VkIGhvbGRzIE1lc2hQb2x5Z29uXHJcbiAgICAgIGxldCB2ZXJ0aWNlczogVmVydGljZXMgPSBuZXcgVmVydGljZXMoKTtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBiYXNlIGJ5IHRyYW5zZm9ybWF0aW9uIG9mIHBvbHlnb24gd2l0aCBmaXJzdCB0cmFuc2Zvcm1cclxuICAgICAgbGV0IGJhc2U6IFZlcnRleFtdID0gdGhpcy52ZXJ0aWNlcy5tYXAoKF92OiBWZXJ0ZXgpID0+IG5ldyBWZXJ0ZXgoVmVjdG9yMy5UUkFOU0ZPUk1BVElPTihfdi5wb3NpdGlvbiwgX210eFRyYW5zZm9ybXNbMF0sIHRydWUpLCBfdi51dikpO1xyXG4gICAgICB2ZXJ0aWNlcy5wdXNoKC4uLmJhc2UpO1xyXG4gICAgICAvLyBjcmVhdGUgbGlkIGJ5IHRyYW5zZm9ybWF0aW9uIG9mIHBvbHlnb24gd2l0aCBsYXN0IHRyYW5zZm9ybVxyXG4gICAgICBsZXQgbGlkOiBWZXJ0ZXhbXSA9IHRoaXMudmVydGljZXMubWFwKChfdjogVmVydGV4KSA9PiBuZXcgVmVydGV4KFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3YucG9zaXRpb24sIF9tdHhUcmFuc2Zvcm1zW25UcmFuc2Zvcm1zIC0gMV0sIHRydWUpLCBfdi51dikpO1xyXG4gICAgICB2ZXJ0aWNlcy5wdXNoKC4uLmxpZCk7XHJcblxyXG4gICAgICAvLyByZWNyZWF0ZSBiYXNlIGZhY2VzIHRvIHJlY2FsY3VsYXRlIG5vcm1hbHNcclxuICAgICAgdGhpcy5mYWNlcyA9IHRoaXMuZmFjZXMubWFwKChfZmFjZTogRmFjZSkgPT4gbmV3IEZhY2UodmVydGljZXMsIF9mYWNlLmluZGljZXNbMF0sIF9mYWNlLmluZGljZXNbMV0sIF9mYWNlLmluZGljZXNbMl0pKTtcclxuICAgICAgLy8gY3JlYXRlIHRoZSBsaWQgZmFjZXMgdXNpbmcgdGhlIGluZGljZXMgb2YgdGhlIGJhc2UgZmFjZXMsIGJ1dCB3aXRoIGFuIGluZGV4IG9mZnNldCBhbmQgcmV2ZXJzZSBvcmRlciBvZiBpbmRpY2VzXHJcbiAgICAgIHRoaXMuZmFjZXMucHVzaCguLi50aGlzLmZhY2VzLm1hcChfZmFjZSA9PlxyXG4gICAgICAgIG5ldyBGYWNlKHZlcnRpY2VzLCBfZmFjZS5pbmRpY2VzWzJdICsgblZlcnRpY2VzU2hhcGUsIF9mYWNlLmluZGljZXNbMV0gKyBuVmVydGljZXNTaGFwZSwgX2ZhY2UuaW5kaWNlc1swXSArIG5WZXJ0aWNlc1NoYXBlKVxyXG4gICAgICApKTtcclxuXHJcbiAgICAgIGZvciAobGV0IHQ6IG51bWJlciA9IDA7IHQgPCBuVHJhbnNmb3JtczsgdCsrKSB7XHJcbiAgICAgICAgbGV0IG10eFRyYW5zZm9ybTogTWF0cml4NHg0ID0gX210eFRyYW5zZm9ybXNbdF07XHJcbiAgICAgICAgbGV0IHJlZmVyVG9DbG9zZTogbnVtYmVyID0gdmVydGljZXMubGVuZ3RoO1xyXG4gICAgICAgIGxldCB3cmFwOiBWZXJ0ZXhbXSA9IHRoaXMudmVydGljZXMubWFwKChfdjogVmVydGV4LCBfaTogbnVtYmVyKSA9PlxyXG4gICAgICAgICAgbmV3IFZlcnRleChWZWN0b3IzLlRSQU5TRk9STUFUSU9OKF92LnBvc2l0aW9uLCBtdHhUcmFuc2Zvcm0sIHRydWUpLCBuZXcgVmVjdG9yMihfaSAvIG5WZXJ0aWNlc1NoYXBlLCB0IC8gblRyYW5zZm9ybXMpKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaCguLi53cmFwKTtcclxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZXJ0ZXgocmVmZXJUb0Nsb3NlLCBuZXcgVmVjdG9yMigxLCB0IC8gblRyYW5zZm9ybXMpKSk7XHJcbiAgICAgICAgLy8gaWYgKGkgPiAwICYmIGkgPCBuVHJhbnNmb3JtcyAtIDEpXHJcbiAgICAgICAgLy8gICB2ZXJ0aWNlcy5wdXNoKC4uLndyYXAubWFwKChfdmVjdG9yOiBWZWN0b3IzKSA9PiBfdmVjdG9yLmNsb25lKSk7IDwtIG5vIHNsaWNpbmcgZm9yIGZsYXQgc2hhZGluZyB5ZXQuLi5cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gY3JlYXRlIGluZGl6ZXMgZm9yIHdyYXBwZXJcclxuICAgICAgZm9yIChsZXQgdDogbnVtYmVyID0gMDsgdCA8IG5UcmFuc2Zvcm1zIC0gMTsgdCsrKVxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBuVmVydGljZXNTaGFwZTsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9XHJcbiAgICAgICAgICAgICsgMiAqIG5WZXJ0aWNlc1NoYXBlIC8vIGJhc2UgJiBsaWQgYXJlIG9mZnNldHMgXHJcbiAgICAgICAgICAgICsgdCAqIChuVmVydGljZXNTaGFwZSArIDEpIC8vIG9mZnNldCBmb3IgZWFjaCB0cmFuc2Zvcm1hdGlvblxyXG4gICAgICAgICAgICArIGk7XHJcbiAgICAgICAgICBsZXQgcXVhZDogUXVhZCA9IG5ldyBRdWFkKHZlcnRpY2VzLCBpbmRleCwgaW5kZXggKyBuVmVydGljZXNTaGFwZSArIDEsIGluZGV4ICsgblZlcnRpY2VzU2hhcGUgKyAyLCBpbmRleCArIDEsIFFVQURTUExJVC5BVF8wKTtcclxuICAgICAgICAgIHRoaXMuZmFjZXMucHVzaCguLi5xdWFkLmZhY2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gcHJpdmF0ZSBjYWxjdWxhdGVQb2x5Z29uTGVuZ3RocygpOiBudW1iZXJbXSB7XHJcbiAgICAvLyAgIGxldCByZXN1bHQ6IG51bWJlcltdID0gW107XHJcbiAgICAvLyAgIGxldCBmaXJzdDogVmVjdG9yMztcclxuICAgIC8vICAgbGV0IHByZXY6IFZlY3RvcjM7XHJcbiAgICAvLyAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAvLyAgICAgbGV0IGN1cnJlbnQ6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMyh0aGlzLnZlcnRpY2VzW2ldLCB0aGlzLnZlcnRpY2VzW2kgKyAxXSwgdGhpcy52ZXJ0aWNlc1tpICsgMl0pO1xyXG4gICAgLy8gICAgIGlmIChwcmV2KVxyXG4gICAgLy8gICAgICAgcmVzdWx0LnB1c2goVmVjdG9yMy5ESUZGRVJFTkNFKGN1cnJlbnQsIHByZXYpLm1hZ25pdHVkZSk7XHJcbiAgICAvLyAgICAgZWxzZVxyXG4gICAgLy8gICAgICAgZmlyc3QgPSBjdXJyZW50O1xyXG4gICAgLy8gICAgIHByZXYgPSBjdXJyZW50O1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIHJlc3VsdC5wdXNoKFZlY3RvcjMuRElGRkVSRU5DRShmaXJzdCwgcHJldikubWFnbml0dWRlKTtcclxuICAgIC8vICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIC8vIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQSBtZXNoIGxvYWRlZCBmcm9tIGFuIEZCWC1GaWxlLlxyXG4gICAqIEBhdXRob3JzIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hGQlggZXh0ZW5kcyBtaXhpblNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwoTWVzaCkge1xyXG4gICAgLy8gcHVibGljIHVybDogUmVxdWVzdEluZm87XHJcbiAgICBwdWJsaWMgaU1lc2g6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhc3luYyBsb2FkKF91cmw6IFJlcXVlc3RJbmZvID0gdGhpcy51cmwsIF9pTWVzaDogbnVtYmVyID0gdGhpcy5pTWVzaCk6IFByb21pc2U8TWVzaEZCWD4ge1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMudXJsID0gX3VybDtcclxuICAgICAgdGhpcy5pTWVzaCA9IF9pTWVzaDtcclxuICAgICAgY29uc3QgbG9hZGVyOiBGQlhMb2FkZXIgPSBhd2FpdCBGQlhMb2FkZXIuTE9BRCh0aGlzLnVybC50b1N0cmluZygpKTtcclxuICAgICAgY29uc3QgZ2VvbWV0cnlGQlg6IEZCWC5HZW9tZXRyeSA9IChcclxuICAgICAgICBsb2FkZXIuZmJ4Lm9iamVjdHMuZ2VvbWV0cmllc1tfaU1lc2hdIHx8XHJcbiAgICAgICAgbG9hZGVyLmZieC5vYmplY3RzLmdlb21ldHJpZXMuZmluZChfb2JqZWN0ID0+IF9vYmplY3QubmFtZSA9PSB0aGlzLm5hbWUpIHx8XHJcbiAgICAgICAgbG9hZGVyLmZieC5vYmplY3RzLm1vZGVscy5maW5kKF9vYmplY3QgPT4gX29iamVjdC5uYW1lID09IHRoaXMubmFtZSAmJiBfb2JqZWN0LnN1YnR5cGUgPT0gXCJNZXNoXCIpLmNoaWxkcmVuWzBdXHJcbiAgICAgICkubG9hZCgpO1xyXG4gICAgICBpZiAoZ2VvbWV0cnlGQlgpXHJcbiAgICAgICAgdGhpcy5uYW1lID0gZ2VvbWV0cnlGQlgubmFtZS5sZW5ndGggPiAwID8gZ2VvbWV0cnlGQlgubmFtZSA6IGdlb21ldHJ5RkJYLnBhcmVudHNbMF0ubmFtZTtcclxuXHJcbiAgICAgIGxldCBwb3NpdGlvbnM6IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgICBsZXQgdmVydGV4QnVmZmVyOiBGbG9hdDMyQXJyYXkgPSBnZW9tZXRyeUZCWC5WZXJ0aWNlcztcclxuICAgICAgZm9yIChsZXQgaVZlcnRleDogbnVtYmVyID0gMDsgaVZlcnRleCA8IHZlcnRleEJ1ZmZlci5sZW5ndGg7IGlWZXJ0ZXggKz0gMykge1xyXG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKG5ldyBWZWN0b3IzKHZlcnRleEJ1ZmZlcltpVmVydGV4ICsgMF0sIHZlcnRleEJ1ZmZlcltpVmVydGV4ICsgMV0sIHZlcnRleEJ1ZmZlcltpVmVydGV4ICsgMl0pKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHV2czogVmVjdG9yMltdID0gW107XHJcbiAgICAgIGlmIChnZW9tZXRyeUZCWC5MYXllckVsZW1lbnRVVikge1xyXG4gICAgICAgIGxldCB1dkJ1ZmZlcjogRmxvYXQzMkFycmF5ID0gZ2VvbWV0cnlGQlguTGF5ZXJFbGVtZW50VVYuVVY7XHJcbiAgICAgICAgZm9yIChsZXQgaXV2OiBudW1iZXIgPSAwOyBpdXYgPCB1dkJ1ZmZlci5sZW5ndGg7IGl1diArPSAyKSB7XHJcbiAgICAgICAgICB1dnMucHVzaChuZXcgVmVjdG9yMih1dkJ1ZmZlcltpdXZdLCAxIC0gdXZCdWZmZXJbaXV2ICsgMV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBub3JtYWxzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgaWYgKGdlb21ldHJ5RkJYLkxheWVyRWxlbWVudE5vcm1hbCkge1xyXG4gICAgICAgIGxldCBub3JtYWxCdWZmZXI6IEZsb2F0MzJBcnJheSA9IGdlb21ldHJ5RkJYLkxheWVyRWxlbWVudE5vcm1hbC5Ob3JtYWxzO1xyXG4gICAgICAgIGZvciAobGV0IGlOb3JtYWw6IG51bWJlciA9IDA7IGlOb3JtYWwgPCBub3JtYWxCdWZmZXIubGVuZ3RoOyBpTm9ybWFsICs9IDMpIHtcclxuICAgICAgICAgIG5vcm1hbHMucHVzaChuZXcgVmVjdG9yMyhub3JtYWxCdWZmZXJbaU5vcm1hbF0sIG5vcm1hbEJ1ZmZlcltpTm9ybWFsICsgMV0sIG5vcm1hbEJ1ZmZlcltpTm9ybWFsICsgMl0pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBtYXBWZXJ0ZXhUb0luZGV4OiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gICAgICBsZXQgbmV3VmVydGV4SW5kaWNlczogbnVtYmVyW11bXSA9IFtdO1xyXG4gICAgICBsZXQgaVBvbHlnb246IG51bWJlciA9IDA7XHJcbiAgICAgIGxldCBpc0VuZE9mUG9seWdvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICBsZXQgcG9seWdvbjogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICAgIGdlb21ldHJ5RkJYLlBvbHlnb25WZXJ0ZXhJbmRleC5mb3JFYWNoKChfaVZlcnRleCwgX2lQb2x5Z29uVmVydGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKF9pVmVydGV4IDwgMCkge1xyXG4gICAgICAgICAgX2lWZXJ0ZXggPSBfaVZlcnRleCBeIC0gMTtcclxuICAgICAgICAgIGlzRW5kT2ZQb2x5Z29uID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMyA9IHBvc2l0aW9uc1tfaVZlcnRleF07XHJcbiAgICAgICAgbGV0IHV2OiBWZWN0b3IyID0gdXZzW3RoaXMuZ2V0RGF0YUluZGV4KGdlb21ldHJ5RkJYLkxheWVyRWxlbWVudFVWLCBfaVZlcnRleCwgaVBvbHlnb24sIF9pUG9seWdvblZlcnRleCldO1xyXG5cclxuICAgICAgICBsZXQgdmVydGV4S2V5OiBzdHJpbmcgPSBwb3NpdGlvbi50b1N0cmluZygpICsgdXYudG9TdHJpbmcoKTtcclxuICAgICAgICBpZiAoIW1hcFZlcnRleFRvSW5kZXguaGFzKHZlcnRleEtleSkpIHtcclxuICAgICAgICAgIGxldCBub3JtYWw6IFZlY3RvcjMgPSBub3JtYWxzW3RoaXMuZ2V0RGF0YUluZGV4KGdlb21ldHJ5RkJYLkxheWVyRWxlbWVudE5vcm1hbCwgX2lWZXJ0ZXgsIGlQb2x5Z29uLCBfaVBvbHlnb25WZXJ0ZXgpXTtcclxuXHJcbiAgICAgICAgICB0aGlzLnZlcnRpY2VzLnB1c2gobmV3IFZlcnRleChwb3NpdGlvbiwgdXYsIG5vcm1hbCkpO1xyXG4gICAgICAgICAgbWFwVmVydGV4VG9JbmRleC5zZXQodmVydGV4S2V5LCB0aGlzLnZlcnRpY2VzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgaWYgKCFuZXdWZXJ0ZXhJbmRpY2VzW19pVmVydGV4XSlcclxuICAgICAgICAgICAgbmV3VmVydGV4SW5kaWNlc1tfaVZlcnRleF0gPSBbXTtcclxuICAgICAgICAgIG5ld1ZlcnRleEluZGljZXNbX2lWZXJ0ZXhdLnB1c2godGhpcy52ZXJ0aWNlcy5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcG9seWdvbi5wdXNoKG1hcFZlcnRleFRvSW5kZXguZ2V0KHZlcnRleEtleSkpO1xyXG5cclxuICAgICAgICBpZiAoaXNFbmRPZlBvbHlnb24pIHtcclxuICAgICAgICAgIGlmIChwb2x5Z29uLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFjZXMucHVzaChuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCBwb2x5Z29uWzBdLCBwb2x5Z29uWzFdLCBwb2x5Z29uWzJdKSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBvbHlnb24ubGVuZ3RoID09IDQpIHtcclxuICAgICAgICAgICAgbGV0IHF1YWQ6IFF1YWQgPSBuZXcgUXVhZCh0aGlzLnZlcnRpY2VzLCBwb2x5Z29uWzBdLCBwb2x5Z29uWzFdLCBwb2x5Z29uWzJdLCBwb2x5Z29uWzNdKTtcclxuICAgICAgICAgICAgdGhpcy5mYWNlcy5wdXNoKC4uLnF1YWQuZmFjZXMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMjsgaSA8IHBvbHlnb24ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgdGhpcy5mYWNlcy5wdXNoKG5ldyBGYWNlKHRoaXMudmVydGljZXMsIHBvbHlnb25bMF0sIHBvbHlnb25baSAtIDFdLCBwb2x5Z29uW2kgLSAwXSkpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYCR7TWVzaExvYWRlckZCWC5uYW1lfTogUG9seWdvbnMgd2l0aCBtb3JlIHRoYW4gNCB2ZXJ0aWNlcyBhcmUgbm90IHN1cHBvcnRlZC5gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBvbHlnb24gPSBbXTtcclxuICAgICAgICAgIGlzRW5kT2ZQb2x5Z29uID0gZmFsc2U7XHJcbiAgICAgICAgICBpUG9seWdvbisrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoZ2VvbWV0cnlGQlguY2hpbGRyZW4/LlswXS50eXBlID09IFwiRGVmb3JtZXJcIikge1xyXG4gICAgICAgIGNvbnN0IGZieERlZm9ybWVyOiBGQlguRGVmb3JtZXIgPSBnZW9tZXRyeUZCWC5jaGlsZHJlblswXTtcclxuICAgICAgICBjb25zdCBza2VsZXRvbjogQ29tcG9uZW50U2tlbGV0b24gPSBhd2FpdCBsb2FkZXIuZ2V0U2tlbGV0b24oZmJ4RGVmb3JtZXIuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0pOyAvLyBEZWZvcm1lci5TdWJEZWZvcm1lci5MaW1iTm9kZVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm9uZXMoZmJ4RGVmb3JtZXIsIHNrZWxldG9uLCB0aGlzLnZlcnRpY2VzLCBuZXdWZXJ0ZXhJbmRpY2VzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBjb25zdCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaU1lc2ggPSB0aGlzLmlNZXNoO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLmlNZXNoID0gX3NlcmlhbGl6YXRpb24uaU1lc2g7XHJcbiAgICAgIHJldHVybiBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREYXRhSW5kZXgoX2xheWVyRWxlbWVudDogRkJYLkxheWVyRWxlbWVudFVWIHwgRkJYLkxheWVyRWxlbWVudE5vcm1hbCwgX2lWZXJ0ZXg6IG51bWJlciwgX2lQb2x5Z29uOiBudW1iZXIsIF9pUG9seWdvblZlcnRleDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgbGV0IGluZGV4OiBudW1iZXIgPVxyXG4gICAgICAgIF9sYXllckVsZW1lbnQuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSA9PSBcIkJ5VmVydGV4XCIgP1xyXG4gICAgICAgICAgX2lWZXJ0ZXggOlxyXG4gICAgICAgICAgX2xheWVyRWxlbWVudC5NYXBwaW5nSW5mb3JtYXRpb25UeXBlID09IFwiQnlQb2x5Z29uXCIgP1xyXG4gICAgICAgICAgICBfaVBvbHlnb24gOlxyXG4gICAgICAgICAgICBfaVBvbHlnb25WZXJ0ZXg7XHJcblxyXG4gICAgICBpZiAoX2xheWVyRWxlbWVudC5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUgPT09ICdJbmRleFRvRGlyZWN0Jykge1xyXG4gICAgICAgIGxldCBpbmRpY2VzOiBVaW50MTZBcnJheSA9IChfbGF5ZXJFbGVtZW50IGFzIEZCWC5MYXllckVsZW1lbnRVVikuVVZJbmRleCB8fCAoX2xheWVyRWxlbWVudCBhcyBGQlguTGF5ZXJFbGVtZW50Tm9ybWFsKS5Ob3JtYWxzSW5kZXg7XHJcbiAgICAgICAgaW5kZXggPSBpbmRpY2VzW2luZGV4XTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQm9uZXMoX2RlZm9ybWVyRkJYOiBGQlguRGVmb3JtZXIsIF9za2VsZXRvbjogQ29tcG9uZW50U2tlbGV0b24sIF92ZXJ0aWNlczogVmVydGljZXMsIF9uZXdWZXJ0ZXhJbmRpY2VzPzogbnVtYmVyW11bXSk6IHZvaWQge1xyXG4gICAgICBmb3IgKGNvbnN0IGZieFN1YkRlZm9ybWVyIG9mIF9kZWZvcm1lckZCWC5jaGlsZHJlbiBhcyBGQlguU3ViRGVmb3JtZXJbXSkge1xyXG4gICAgICAgIGZieFN1YkRlZm9ybWVyLmxvYWQoKTtcclxuICAgICAgICBpZiAoZmJ4U3ViRGVmb3JtZXIuSW5kZXhlcylcclxuICAgICAgICAgIGZvciAobGV0IGlCb25lSW5mbHVlbmNlOiBudW1iZXIgPSAwOyBpQm9uZUluZmx1ZW5jZSA8IGZieFN1YkRlZm9ybWVyLkluZGV4ZXMubGVuZ3RoOyBpQm9uZUluZmx1ZW5jZSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlWZXJ0ZXg6IG51bWJlciA9IGZieFN1YkRlZm9ybWVyLkluZGV4ZXNbaUJvbmVJbmZsdWVuY2VdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlWZXJ0ZXhOZXcgb2YgX25ld1ZlcnRleEluZGljZXMgPyBfbmV3VmVydGV4SW5kaWNlc1tpVmVydGV4XSA6IFtpVmVydGV4XSkge1xyXG4gICAgICAgICAgICAgIChfdmVydGljZXNbaVZlcnRleE5ld10uYm9uZXMgfHwgKF92ZXJ0aWNlc1tpVmVydGV4TmV3XS5ib25lcyA9IFtdKSkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBpbmRleDogX3NrZWxldG9uLmluZGV4T2YoZmJ4U3ViRGVmb3JtZXIuY2hpbGRyZW5bMF0ubmFtZSksXHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IGZieFN1YkRlZm9ybWVyLldlaWdodHNbaUJvbmVJbmZsdWVuY2VdIHx8IDFcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqIEFsbG93cyB0byBjcmVhdGUgY3VzdG9tIG1lc2hlcyBmcm9tIGdpdmVuIERhdGEgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaEZyb21EYXRhIGV4dGVuZHMgTWVzaCB7XHJcbiAgICBwcm90ZWN0ZWQgdmVydGljZXNUb1NldDogRmxvYXQzMkFycmF5O1xyXG4gICAgcHJvdGVjdGVkIHRleHR1cmVVVnNUb1NldDogRmxvYXQzMkFycmF5O1xyXG4gICAgcHJvdGVjdGVkIGluZGljZXNUb1NldDogVWludDE2QXJyYXk7XHJcbiAgICBwcm90ZWN0ZWQgZmFjZU5vcm1hbHNUb1NldDogRmxvYXQzMkFycmF5O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfdmVydGljZXM6IEZsb2F0MzJBcnJheSwgX3RleHR1cmVVVnM6IEZsb2F0MzJBcnJheSwgX2luZGljZXM6IFVpbnQxNkFycmF5LCBfZmFjZU5vcm1hbHM6IEZsb2F0MzJBcnJheSkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnZlcnRpY2VzVG9TZXQgPSBfdmVydGljZXM7XHJcbiAgICAgIHRoaXMudGV4dHVyZVVWc1RvU2V0ID0gX3RleHR1cmVVVnM7XHJcbiAgICAgIHRoaXMuaW5kaWNlc1RvU2V0ID0gX2luZGljZXM7XHJcbiAgICAgIHRoaXMuZmFjZU5vcm1hbHNUb1NldCA9IF9mYWNlTm9ybWFscztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlVmVydGljZXMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMudmVydGljZXNUb1NldDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlVGV4dHVyZVVWcygpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gdGhpcy50ZXh0dXJlVVZzVG9TZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUluZGljZXMoKTogVWludDE2QXJyYXkge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbmRpY2VzVG9TZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUZsYXROb3JtYWxzKCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZhY2VOb3JtYWxzVG9TZXQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBBIHtAbGluayBNZXNofSBsb2FkZWQgZnJvbSBhIGdsVEYtRmlsZS5cclxuICAgKiBAYXV0aG9ycyBKb25hcyBQbG90emt5LCBIRlUsIDIwMjRcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaEdMVEYgZXh0ZW5kcyBtaXhpblNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWwoTWVzaCkge1xyXG4gICAgcHVibGljIGlQcmltaXRpdmU6IG51bWJlcjsgLy8gbW9zdCBsaWtlbHkgd2lsbCBub3Qgc3RheSBjb25zaXN0ZW50IHdpdGggdGhlIGdsVEYgZmlsZS4uLlxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkKF91cmw6IFJlcXVlc3RJbmZvID0gdGhpcy51cmwsIF9uYW1lOiBzdHJpbmcgPSB0aGlzLm5hbWUsIF9pUHJpbWl0aXZlOiBudW1iZXIgPSB0aGlzLmlQcmltaXRpdmUpOiBQcm9taXNlPE1lc2hHTFRGPiB7XHJcbiAgICAgIHRoaXMudXJsID0gX3VybDtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuaVByaW1pdGl2ZSA9IF9pUHJpbWl0aXZlO1xyXG4gICAgICByZXR1cm4gR0xURkxvYWRlci5sb2FkUmVzb3VyY2UodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgY29uc3Qgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlQcmltaXRpdmUgPSB0aGlzLmlQcmltaXRpdmU7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuaVByaW1pdGl2ZSA9IF9zZXJpYWxpemF0aW9uLmlQcmltaXRpdmU7XHJcbiAgICAgIHJldHVybiBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQSBtZXNoIGxvYWRlZCBmcm9tIGFuIE9CSi1maWxlLlxyXG4gICAqIFNpbXBsZSBXYXZlZnJvbnQgT0JKIGltcG9ydC4gVGFrZXMgYSB3YXZlZnJvbnQgb2JqIHN0cmluZy4gVG8gTG9hZCBmcm9tIGEgZmlsZSB1cmwsIHVzZSB0aGVcclxuICAgKiBzdGF0aWMgTE9BRCBNZXRob2QuIEN1cnJlbnRseSBvbmx5IHdvcmtzIHdpdGggdHJpYW5ndWxhdGVkIE1lc2hlc1xyXG4gICAqIChhY3RpdmF0ZSAnR2VvbWVudHJ5IOKGkiBUcmlhbmd1bGF0ZSBGYWNlcycgaW4gQmxlbmRlcnMgb2JqIGV4cG9ydGVyKVxyXG4gICAqIEB0b2RvIExvYWQgTWF0ZXJpYWxzLCBTdXBwb3J0IFF1YWRzXHJcbiAgICogQGF1dGhvcnMgU2ltb24gU3RvcmwtU2NodWxrZSAyMDIxIHwgTHVpcyBLZWNrLCBIRlUsIDIwMjEgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyIHwgTWF0dGhpYXMgUm9taW5nLCBIRlUsIDIwMjMgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaE9CSiBleHRlbmRzIG1peGluU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbChNZXNoKSB7XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWQoX3VybDogUmVxdWVzdEluZm8gPSB0aGlzLnVybCk6IFByb21pc2U8TWVzaE9CSj4ge1xyXG4gICAgICBjb25zdCB1cmw6IHN0cmluZyA9IG5ldyBVUkwoX3VybC50b1N0cmluZygpLCBQcm9qZWN0LmJhc2VVUkwpLnRvU3RyaW5nKCk7XHJcbiAgICAgIGNvbnN0IGRhdGE6IHN0cmluZyA9IGF3YWl0IChhd2FpdCBmZXRjaCh1cmwpKS50ZXh0KCk7XHJcbiAgICAgIHRoaXMubmFtZSA9IHVybC5zcGxpdChcIi9cIikucG9wKCk7XHJcbiAgICAgIHRoaXMudXJsID0gX3VybDtcclxuXHJcbiAgICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IGRhdGEuc3BsaXQoXCJcXG5cIik7XHJcblxyXG4gICAgICBjb25zdCBpbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICBjb25zdCBwb3NpdGlvbnM6IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgICBjb25zdCB1dnM6IFZlY3RvcjJbXSA9IFtdO1xyXG4gICAgICBjb25zdCBub3JtYWxzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgY29uc3Qgbm9ybXM6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgICBjb25zdCB2ZXJ0aWNlczogVmVydGljZXMgPSBuZXcgVmVydGljZXMoKTtcclxuICAgICAgY29uc3QgZmFjZXM6IEZhY2VbXSA9IFtdO1xyXG4gICAgICBjb25zdCBtYXBQb3NpdGlvblVWTm9ybWFsVG9JbmRleDogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG4gICAgICBjb25zdCBtYXBQb3NpdGlvbk5vcm1hbFRvSW5kZXg6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuXHJcbiAgICAgIC8vIFRPRE86IHRoaW5rIGFib3V0IGNyZWF0aW5nIHRoZSBuZWVkZWQgYnVmZmVycyBmb3IgcmVuZGVybWVzaCBoZXJlIGFscmVhZHkuLi5cclxuICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IGxpbmUudHJpbSgpLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICBzd2l0Y2ggKHBhcnRzLnNoaWZ0KCkpIHtcclxuICAgICAgICAgIGNhc2UgXCJ2XCI6IC8vVmVydGV4IC0gZXhhbXBsZTogdiAwLjcwIC0wLjQ1IC0wLjUyICAgICAgICAgXHJcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKG5ldyBWZWN0b3IzKC4uLnBhcnRzLm1hcChfdmFsdWUgPT4gK192YWx1ZSkpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwidm5cIjogLy9Ob3JtYWwgLSBleGFtcGxlOiB2biAwLjAwIDAuMDAgMS4wMFxyXG4gICAgICAgICAgICBub3JtYWxzLnB1c2gobmV3IFZlY3RvcjMoLi4ucGFydHMubWFwKF92YWx1ZSA9PiArX3ZhbHVlKSkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJ2dFwiOiAvL1RleGNvb3JkIC0gZXhhbXBsZTogdnQgMC41NDU0NTQgMC40NzIzODJcclxuICAgICAgICAgICAgdXZzLnB1c2gobmV3IFZlY3RvcjIoLi4ucGFydHMubWFwKChfdmFsdWUsIF9pbmRleCkgPT4gK192YWx1ZSAqIChfaW5kZXggPT0gMSA/IC0xIDogMSkpKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcImZcIjogLypGYWNlIEluZGljZXMgLSBleGFtcGxlOiBmIDEvMS8xIDIvMi8xIDMvMy8xIC0tPiB2ZXJ0ZXgxL3RleGNvb3JkMS9ub3JtYWwxIHZlcnRleDIvdGV4Y29vcmQyL25vcm1hbDIgdmVydGV4My90ZXhjb29yZDMvbm9ybWFsMyovXHJcbiAgICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgICAgICAgICAgICBsZXQga2V5OiBzdHJpbmcgPSBwYXJ0c1tpXTtcclxuICAgICAgICAgICAgICBsZXQgaW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZCA9IG1hcFBvc2l0aW9uVVZOb3JtYWxUb0luZGV4W2tleV07XHJcbiAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdmVydGljZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGV4SW5mbzogc3RyaW5nW10gPSBwYXJ0c1tpXS5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb246IFZlY3RvcjMgPSBwb3NpdGlvbnNbK3ZlcnRleEluZm9bMF0gLSAxXTsgLy8gb2JqIHVzZXMgMS1iYXNlZCBpbmRpY2VzXHJcbiAgICAgICAgICAgICAgICBsZXQgdXY6IFZlY3RvcjIgPSB1dnNbK3ZlcnRleEluZm9bMV0gLSAxXSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgbm9ybWFsOiBWZWN0b3IzID0gbm9ybWFsc1srdmVydGV4SW5mb1syXSAtIDFdID8/IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsKVxyXG4gICAgICAgICAgICAgICAgICBub3Jtcy5wdXNoKG5vcm1hbC54LCBub3JtYWwueSwgbm9ybWFsLnopO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBrZXlQb3NOb3JtOiBzdHJpbmcgPSBgJHt2ZXJ0ZXhJbmZvWzBdfS8ke3ZlcnRleEluZm9bMl19YDtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlcnRleChtYXBQb3NpdGlvbk5vcm1hbFRvSW5kZXhba2V5UG9zTm9ybV0gPz8gcG9zaXRpb24sIHV2LCBub3JtYWwpKTtcclxuICAgICAgICAgICAgICAgIG1hcFBvc2l0aW9uVVZOb3JtYWxUb0luZGV4W2tleV0gPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIGlmIChtYXBQb3NpdGlvbk5vcm1hbFRvSW5kZXhba2V5UG9zTm9ybV0gPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICBtYXBQb3NpdGlvbk5vcm1hbFRvSW5kZXhba2V5UG9zTm9ybV0gPSBpbmRleDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGZhY2VzLnB1c2gobmV3IEZhY2UodmVydGljZXMsIGluZGljZXNbaW5kaWNlcy5sZW5ndGggLSAyXSwgaW5kaWNlc1tpbmRpY2VzLmxlbmd0aCAtIDFdLCBpbmRpY2VzW2luZGljZXMubGVuZ3RoIC0gM10pKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHtcclxuICAgICAgICAgICAgICBEZWJ1Zy5mdWRnZShcIkZhY2UgZXhjbHVkZWRcIiwgKDxFcnJvcj5fZSkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcclxuICAgICAgdGhpcy5mYWNlcyA9IGZhY2VzO1xyXG4gICAgICBpZiAobm9ybXMubGVuZ3RoID4gMCkgLy8gVE9ETzogcmVuZGVybWVzaCBzaG91bGQgYmUgYWJsZSB0byBoYW5kbGUgdW5kZWZpbmVkIG5vcm1hbHMgY29ycmVjdGx5LCBpLmUuIGNhbGN1bGF0ZSB0aGVtIG9ubHkgaWYgdGhleSBhcmUgbm90IHByZXNlbnQgaW4gdGhlIHZlcnRpY2VzXHJcbiAgICAgICAgdGhpcy5yZW5kZXJNZXNoLm5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KG5vcm1zKTtcclxuICAgICAgLy8gX21lc2gucmVuZGVyTWVzaC5pbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KGluZGljZXMpOyAvLyBkb2Vucyd0IHNlZW0gdG8gYWZmZWN0IHNjZW5lIGxvYWRpbmcgdGltZS4uLlxyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSBzaW1wbGUgcHlyYW1pZCB3aXRoIGVkZ2VzIGF0IHRoZSBiYXNlIG9mIGxlbmd0aCAxIGFuZCBhIGhlaWdodCBvZiAxLiBUaGUgc2lkZXMgY29uc2lzdGluZyBvZiBvbmUsIHRoZSBiYXNlIG9mIHR3byB0cmlnb25zXHJcbiAgICogYGBgdGV4dFxyXG4gICAqICAgICAgICAgICAgICAgNFxyXG4gICAqICAgICAgICAgICAgICAvXFxgLlxyXG4gICAqICAgICAgICAgICAgMy9fX1xcX1xcIDJcclxuICAgKiAgICAgICAgICAgMC9fX19fXFwvMVxyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hQeXJhbWlkIGV4dGVuZHMgTWVzaCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gTWVzaC5yZWdpc3RlclN1YmNsYXNzKE1lc2hQeXJhbWlkKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFB5cmFtaWRcIikge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIC8vIHRoaXMuY3JlYXRlKCk7XHJcblxyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKFxyXG4gICAgICAgIC8vIGdyb3VuZCB2ZXJ0aWNlc1xyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoLTAuNSwgMC4wLCAwLjUpLCBuZXcgVmVjdG9yMigwLCAxKSksXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygwLjUsIDAuMCwgMC41KSwgbmV3IFZlY3RvcjIoMSwgMSkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoMC41LCAwLjAsIC0wLjUpLCBuZXcgVmVjdG9yMigxLCAwKSksXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAwLjAsIC0wLjUpLCBuZXcgVmVjdG9yMigwLCAwKSksXHJcbiAgICAgICAgLy8gdGlwICh2ZXJ0ZXggIzQpXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygwLjAsIDEuMCwgMC4wKSwgbmV3IFZlY3RvcjIoMC41LCAwLjUpKSxcclxuICAgICAgICAvLyBmbG9vciBhZ2FpbiBmb3IgZG93bnNpZGUgdGV4dHVyZVxyXG4gICAgICAgIG5ldyBWZXJ0ZXgoMCwgbmV3IFZlY3RvcjIoMCwgMCkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgoMSwgbmV3IFZlY3RvcjIoMSwgMCkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgoMiwgbmV3IFZlY3RvcjIoMSwgMSkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgoMywgbmV3IFZlY3RvcjIoMCwgMSkpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuZmFjZXMgPSBbXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgNCwgMCwgMSksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgNCwgMSwgMiksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgNCwgMiwgMyksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgNCwgMywgMCksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgNSArIDAsIDUgKyAyLCA1ICsgMSksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgNSArIDAsIDUgKyAzLCA1ICsgMilcclxuICAgICAgXTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSBhIHNpbXBsZSBxdWFkIHdpdGggZWRnZXMgb2YgbGVuZ3RoIDEsIHRoZSBmYWNlIGNvbnNpc3Rpbmcgb2YgdHdvIHRyaWdvbnNcclxuICAgKiBgYGB0ZXh0XHJcbiAgICogICAgICAgIDAgX18gM1xyXG4gICAqICAgICAgICAgfF9cXHxcclxuICAgKiAgICAgICAgMSAgICAyICAgICAgICAgICAgIFxyXG4gICAqIGBgYCBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOS0yMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hRdWFkIGV4dGVuZHMgTWVzaFBvbHlnb24ge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IE1lc2gucmVnaXN0ZXJTdWJjbGFzcyhNZXNoUXVhZCk7XHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHNoYXBlOiBWZWN0b3IyW10gPSBbXHJcbiAgICAgIG5ldyBWZWN0b3IyKC0wLjUsIDAuNSksIG5ldyBWZWN0b3IyKC0wLjUsIC0wLjUpLCBuZXcgVmVjdG9yMigwLjUsIC0wLjUpLCBuZXcgVmVjdG9yMigwLjUsIDAuNSlcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBcIk1lc2hRdWFkXCIpIHtcclxuICAgICAgc3VwZXIoX25hbWUsIE1lc2hRdWFkLnNoYXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAvLyBmbGF0IGVxdWFscyBzbW9vdGhcclxuICAgIC8vIHB1YmxpYyBnZXQgdmVydGljZXNGbGF0KCk6IEZsb2F0MzJBcnJheSB7IHJldHVybiB0aGlzLnZlcnRpY2VzOyB9XHJcbiAgICAvLyBwdWJsaWMgZ2V0IGluZGljZXNGbGF0KCk6IFVpbnQxNkFycmF5IHsgcmV0dXJuIHRoaXMuaW5kaWNlczsgfVxyXG4gICAgLy8gcHVibGljIGdldCBub3JtYWxzRmxhdCgpOiBGbG9hdDMyQXJyYXkgeyByZXR1cm4gdGhpcy5ub3JtYWxzVmVydGV4OyB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZ2VyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgdGhpcy5jcmVhdGUoTWVzaFF1YWQuc2hhcGUsIHRydWUpOyAvLyB0aGlzIHNlZW1zIHRvIGJlIGRpc3BhdGNoZWQgZG91YmxlZCB3aGlsZSBkZXNlcmlhbGl6aW5nIHRoZSByZXNvdXJjZXNcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNoYXBlO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuZml0VGV4dHVyZTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqIFxyXG4gICAqIFRoaXMgZnVuY3Rpb24gdHlwZSB0YWtlcyB4IGFuZCB6IGFzIFBhcmFtZXRlcnMgYW5kIHJldHVybnMgYSBudW1iZXIgYmV0d2VlbiAtMSBhbmQgMSB0byBiZSB1c2VkIGFzIGEgaGVpZ2h0bWFwLiBcclxuICAgKiB4ICogeiAqIDIgcmVwcmVzZW50IHRoZSBhbW91dCBvZiBmYWNlcyB3aGljaCBhcmUgY3JlYXRlZC4gQXMgYSByZXN1bHQgeW91IGdldCAxIHZlcnRleCBtb3JlIGluIGVhY2ggZGlyZWN0aW9uICh4IGFuZCB6IGF4aXMpXHJcbiAgICogVGhlIHktY29tcG9uZW50IG9mIHRoZSByZXN1bHRpbmcgbWVzaCBtYXkgYmUgbW92ZWQgdG8gdmFsdWVzIGJldHdlZW4gMCBhbmQgYSBtYXhpbXVtIGhlaWdodC5cclxuICAgKiBAYXV0aG9ycyBTaW1vbiBTdG9ybC1TY2h1bGtlLCBIRlUsIDIwMjAgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IHR5cGUgSGVpZ2h0TWFwRnVuY3Rpb24gPSAoeDogbnVtYmVyLCB6OiBudW1iZXIpID0+IG51bWJlcjtcclxuXHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHZlcnRpY2FsIHByb2plY3Rpb24gb2YgYSBnaXZlbiBwb3NpdGlvbiBvbnRvIHRoZSB0ZXJyYWluXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRlcnJhaW5JbmZvIHtcclxuICAgIC8qKiB0aGUgcG9zaXRpb24gb2YgdGhlIHBvaW50IHZlcnRpY2FsbHkgcHJvamVjdGVkIG9uIHRoZSB0ZXJyYWluIGluIHdvcmxkIGNvb3JkaW5hdGVzICovXHJcbiAgICBwdWJsaWMgcG9zaXRpb246IFZlY3RvcjM7XHJcbiAgICAvKiogdGhlIG5vcm1hbCBvZiB0aGUgZmFjZSBvZiB0aGUgdGVycmFpbiB1bmRlciB0aGUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMgKi9cclxuICAgIHB1YmxpYyBub3JtYWw6IFZlY3RvcjM7XHJcbiAgICAvKiogdmVydGljYWwgZGlzdGFuY2Ugb2YgdGhlIHBvaW50IHRvIHRoZSB0ZXJyYWluLCBuZWdhdGl2ZSBpZiBiZWxvdyAqL1xyXG4gICAgcHVibGljIGRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICAvKiogdGhlIHBvc2l0aW9uIGluIGZhY2UgY29vcmRpbmF0ZXMgKi9cclxuICAgIHB1YmxpYyBwb3NpdGlvbkZhY2U6IFZlY3RvcjM7XHJcbiAgICAvKiogdGhlIGluZGV4IG9mIHRoZSBmYWNlIHRoZSBwb3NpdGlvbiBpcyBpbnNpZGUgKi9cclxuICAgIHB1YmxpYyBpbmRleDogbnVtYmVyO1xyXG4gICAgLyoqIHRoZSBncmlkIGNvb3JkaW5hdGVzIG9mIHRoZSBxdWFkIHRoZSBmYWNlIGJlbG9uZ3MgdG8gKi9cclxuICAgIHB1YmxpYyBncmlkOiBWZWN0b3IyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSB0ZXJyYWluIHNwcmVhZHMgb3V0IGluIHRoZSB4LXotcGxhbmUsIHkgaXMgdGhlIGhlaWdodCBkZXJpdmVkIGZyb20gdGhlIGhlaWdodG1hcCBmdW5jdGlvbi4gXHJcbiAgICogVGhlIHRlcnJhaW4gaXMgYWx3YXlzIDEgaW4gc2l6ZSBpbiBhbGwgZGltZW5zaW9ucywgZml0dGluZyBpbnRvIHRoZSB1bml0LWN1YmUuIFxyXG4gICAqIFJlc29sdXRpb24gZGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIHF1YWRzIGluIHggYW5kIHogZGltZW5zaW9uLCBzY2FsZSB0aGUgZmFjdG9yIGFwcGxpZWQgdG8gdGhlIHgsei1jb29yZGluYXRlcyBwYXNzZWQgdG8gdGhlIGhlaWdodG1hcCBmdW5jdGlvbi5cclxuICAgKiBTdGFuZGFyZCBmdW5jdGlvbiBpcyB0aGUgc2ltcGxleCBub2lzZSBpbXBsZW1lbnRlZCB3aXRoIEZVREdFLCBidXQgYW5vdGhlciBmdW5jdGlvbiBjYW4gYmUgZ2l2ZW4uXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjEtMjAyMiB8IFNpbW9uIFN0b3JsLVNjaHVsa2UsIEhGVSwgMjAyMCB8IE1vcml0eiBCZWF1Z3JhbmQsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNZXNoVGVycmFpbiBleHRlbmRzIE1lc2gge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IE1lc2gucmVnaXN0ZXJTdWJjbGFzcyhNZXNoVGVycmFpbik7XHJcbiAgICBwcm90ZWN0ZWQgcmVzb2x1dGlvbjogVmVjdG9yMjtcclxuICAgIHByb3RlY3RlZCBzY2FsZTogVmVjdG9yMjtcclxuICAgIHByb3RlY3RlZCBzZWVkOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgaGVpZ2h0TWFwRnVuY3Rpb246IEhlaWdodE1hcEZ1bmN0aW9uID0gbnVsbDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFRlcnJhaW5cIiwgX3Jlc29sdXRpb246IFZlY3RvcjIgPSBWZWN0b3IyLk9ORSgyKSwgX3NjYWxlSW5wdXQ6IFZlY3RvcjIgPSBWZWN0b3IyLk9ORSgpLCBfZnVuY3Rpb25PclNlZWQ6IEhlaWdodE1hcEZ1bmN0aW9uIHwgbnVtYmVyID0gMCkge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9yZXNvbHV0aW9uLCBfc2NhbGVJbnB1dCwgX2Z1bmN0aW9uT3JTZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGlzIG1lc2ggZnJvbSB0aGUgZ2l2ZW4gcGFyYW1ldGVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY3JlYXRlKF9yZXNvbHV0aW9uOiBWZWN0b3IyID0gVmVjdG9yMi5PTkUoMiksIF9zY2FsZUlucHV0OiBWZWN0b3IyID0gVmVjdG9yMi5PTkUoKSwgX2Z1bmN0aW9uT3JTZWVkOiBIZWlnaHRNYXBGdW5jdGlvbiB8IG51bWJlciA9IDApOiB2b2lkIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICB0aGlzLnNlZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMucmVzb2x1dGlvbiA9IG5ldyBWZWN0b3IyKE1hdGgucm91bmQoX3Jlc29sdXRpb24ueCksIE1hdGgucm91bmQoX3Jlc29sdXRpb24ueSkpO1xyXG4gICAgICB0aGlzLnNjYWxlID0gX3NjYWxlSW5wdXQuY2xvbmU7XHJcblxyXG4gICAgICBpZiAoX2Z1bmN0aW9uT3JTZWVkIGluc3RhbmNlb2YgRnVuY3Rpb24pXHJcbiAgICAgICAgdGhpcy5oZWlnaHRNYXBGdW5jdGlvbiA9IF9mdW5jdGlvbk9yU2VlZDtcclxuICAgICAgZWxzZSBpZiAodHlwZW9mIChfZnVuY3Rpb25PclNlZWQpID09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICB0aGlzLnNlZWQgPSBfZnVuY3Rpb25PclNlZWQ7XHJcbiAgICAgICAgbGV0IHBybmc6IFJhbmRvbSA9IG5ldyBSYW5kb20odGhpcy5zZWVkKTtcclxuICAgICAgICB0aGlzLmhlaWdodE1hcEZ1bmN0aW9uID0gbmV3IE5vaXNlMigoKSA9PiBwcm5nLmdldE5vcm0oKSkuc2FtcGxlOyAvLyBUT0RPIGNhbGwgUFJOR1xyXG4gICAgICB9IGVsc2VcclxuICAgICAgICB0aGlzLmhlaWdodE1hcEZ1bmN0aW9uID0gbmV3IE5vaXNlMigpLnNhbXBsZTtcclxuXHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgVmVydGljZXMoKTtcclxuICAgICAgLy9JdGVyYXRlIG92ZXIgZWFjaCBjZWxsIHRvIGdlbmVyYXRlIGdyaWQgb2YgdmVydGljZXNcclxuICAgICAgZm9yIChsZXQgejogbnVtYmVyID0gMDsgeiA8PSB0aGlzLnJlc29sdXRpb24ueTsgeisrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeDogbnVtYmVyID0gMDsgeCA8PSB0aGlzLnJlc29sdXRpb24ueDsgeCsrKSB7XHJcbiAgICAgICAgICBsZXQgeE5vcm06IG51bWJlciA9IHggLyB0aGlzLnJlc29sdXRpb24ueDtcclxuICAgICAgICAgIGxldCB6Tm9ybTogbnVtYmVyID0geiAvIHRoaXMucmVzb2x1dGlvbi55O1xyXG4gICAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBWZXJ0ZXgoXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKHhOb3JtIC0gMC41LCB0aGlzLmhlaWdodE1hcEZ1bmN0aW9uKHhOb3JtICogdGhpcy5zY2FsZS54LCB6Tm9ybSAqIHRoaXMuc2NhbGUueSksIHpOb3JtIC0gMC41KSxcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjIoeE5vcm0sIHpOb3JtKVxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcXVhZHM6IFF1YWRbXSA9IFtdO1xyXG4gICAgICBsZXQgc3BsaXQ6IFFVQURTUExJVCA9IFFVQURTUExJVC5BVF8wO1xyXG4gICAgICBmb3IgKGxldCB6OiBudW1iZXIgPSAwOyB6IDwgdGhpcy5yZXNvbHV0aW9uLnk7IHorKykge1xyXG4gICAgICAgIGZvciAobGV0IHg6IG51bWJlciA9IDA7IHggPCB0aGlzLnJlc29sdXRpb24ueDsgeCsrKSB7XHJcbiAgICAgICAgICBxdWFkcy5wdXNoKG5ldyBRdWFkKFxyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzLFxyXG4gICAgICAgICAgICAoeCArIDApICsgKHogKyAwKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICAoeCArIDApICsgKHogKyAxKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICAoeCArIDEpICsgKHogKyAxKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICAoeCArIDEpICsgKHogKyAwKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICBzcGxpdFxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgICBzcGxpdCA9IChzcGxpdCA9PSBRVUFEU1BMSVQuQVRfMCkgPyBRVUFEU1BMSVQuQVRfMSA6IFFVQURTUExJVC5BVF8wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uLnggJSAyID09IDApIC8vIHJldmVyc2UgbGFzdCBzcGxpdCBjaGFuZ2UgaWYgeC1yZXNvbHV0aW9uIGlzIGV2ZW5cclxuICAgICAgICAgIHNwbGl0ID0gKHNwbGl0ID09IFFVQURTUExJVC5BVF8wKSA/IFFVQURTUExJVC5BVF8xIDogUVVBRFNQTElULkFUXzA7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5mYWNlcyA9IHF1YWRzLmZsYXRNYXAoKF9xdWFkOiBRdWFkKSA9PiBfcXVhZC5mYWNlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSB2ZXJ0aWNhbCBwcm9qZWN0aW9uIG9mIHRoZSBnaXZlbiBwb3NpdGlvbiBvbnRvIHRoZSB0ZXJyYWluLlxyXG4gICAgICogUGFzcyB0aGUgb3ZlcmFsbCB3b3JsZCB0cmFuc2Zvcm1hdGlvbiBvZiB0aGUgdGVycmFpbiBpZiB0aGUgcG9zaXRpb24gaXMgZ2l2ZW4gaW4gd29ybGQgY29vcmRpbmF0ZXMuXHJcbiAgICAgKiBJZiBhdCBoYW5kLCBwYXNzIHRoZSBpbnZlcnNlIHRvbyB0byBhdm9pZCB1bm5lY2Vzc2FyeSBjYWxjdWxhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRlcnJhaW5JbmZvKF9wb3NpdGlvbjogVmVjdG9yMywgX210eFdvcmxkOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKSwgX210eEludmVyc2U/OiBNYXRyaXg0eDQpOiBUZXJyYWluSW5mbyB7XHJcbiAgICAgIGlmICghX210eEludmVyc2UpXHJcbiAgICAgICAgX210eEludmVyc2UgPSBNYXRyaXg0eDQuSU5WRVJTRShfbXR4V29ybGQpO1xyXG5cclxuICAgICAgbGV0IHRlcnJhaW5JbmZvOiBUZXJyYWluSW5mbyA9IG5ldyBUZXJyYWluSW5mbztcclxuXHJcbiAgICAgIGxldCBwb3NMb2NhbDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3Bvc2l0aW9uLCBfbXR4SW52ZXJzZSwgdHJ1ZSk7XHJcblxyXG5cclxuICAgICAgbGV0IHo6IG51bWJlciA9IE1hdGguZmxvb3IoKHBvc0xvY2FsLnogKyAwLjUpICogdGhpcy5yZXNvbHV0aW9uLnkpO1xyXG4gICAgICBsZXQgeDogbnVtYmVyID0gTWF0aC5mbG9vcigocG9zTG9jYWwueCArIDAuNSkgKiB0aGlzLnJlc29sdXRpb24ueCk7XHJcbiAgICAgIGlmICh6IDwgMCB8fCB6ID4gdGhpcy5yZXNvbHV0aW9uLnkgLSAxIHx8IHggPCAwIHx8IHggPiB0aGlzLnJlc29sdXRpb24ueCAtIDEpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICBsZXQgaW5kZXg6IG51bWJlciA9ICh6ICogdGhpcy5yZXNvbHV0aW9uLnggKyB4KSAqIDI7XHJcbiAgICAgIGxldCBmYWNlOiBGYWNlID0gdGhpcy5mYWNlc1tpbmRleF07XHJcblxyXG4gICAgICBsZXQgcmF5OiBSYXkgPSBuZXcgUmF5KFZlY3RvcjMuWSgpLCBwb3NMb2NhbCk7XHJcbiAgICAgIGxldCBwb2ludDogVmVjdG9yMyA9IHJheS5pbnRlcnNlY3RGYWNlUGxhbmUoZmFjZSk7XHJcbiAgICAgIGlmICghZmFjZS5pc0luc2lkZShwb2ludCkpIHtcclxuICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIGZhY2UgPSB0aGlzLmZhY2VzW2luZGV4XTtcclxuICAgICAgICBwb2ludCA9IHJheS5pbnRlcnNlY3RGYWNlUGxhbmUoZmFjZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRlcnJhaW5JbmZvLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgIHRlcnJhaW5JbmZvLnBvc2l0aW9uRmFjZSA9IHBvaW50O1xyXG4gICAgICB0ZXJyYWluSW5mby5wb3NpdGlvbiA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04ocG9pbnQsIF9tdHhXb3JsZCwgdHJ1ZSk7XHJcbiAgICAgIHRlcnJhaW5JbmZvLm5vcm1hbCA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oZmFjZS5ub3JtYWwsIE1hdHJpeDR4NC5UUkFOU1BPU0UoX210eEludmVyc2UpLCBmYWxzZSk7XHJcbiAgICAgIHRlcnJhaW5JbmZvLmRpc3RhbmNlID0gX3Bvc2l0aW9uLnkgLSB0ZXJyYWluSW5mby5wb3NpdGlvbi55O1xyXG4gICAgICB0ZXJyYWluSW5mby5ncmlkID0gdGhpcy5nZXRHcmlkRnJvbUZhY2VJbmRleChpbmRleCk7XHJcbiAgICAgIHJldHVybiB0ZXJyYWluSW5mbztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGdyaWQgY29vcmRpbmF0ZXMgb2YgdGhlIHF1YWQgdGhlIGdpdmVuIGZhY2UgYmVsb25ncyB0by5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEdyaWRGcm9tRmFjZUluZGV4KF9pbmRleDogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMik7XHJcbiAgICAgIGxldCBpUXVhZDogbnVtYmVyID0gTWF0aC5mbG9vcihfaW5kZXggLyAyKTtcclxuICAgICAgcmVzdWx0LnNldChpUXVhZCAlIHRoaXMucmVzb2x1dGlvbi55LCBNYXRoLmZsb29yKGlRdWFkIC8gdGhpcy5yZXNvbHV0aW9uLngpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGluZGljZXMgb2YgdGhlIHR3byBmYWNlcyBmb3JtaW5nIHRoZSBxdWFkIHRoZSBnaXZlbiBncmlkIHBvc2l0aW9uIGJlbG9uZ3MgdG8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRGYWNlSW5kaWNlc0Zyb21HcmlkKF9ncmlkOiBWZWN0b3IyKTogbnVtYmVyW10ge1xyXG4gICAgICBsZXQgaVF1YWQ6IG51bWJlciA9IF9ncmlkLnkgKiAyICogdGhpcy5yZXNvbHV0aW9uLnggKyBfZ3JpZC54ICogMjtcclxuICAgICAgcmV0dXJuIFtpUXVhZCwgaVF1YWQgKyAxXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2VlZCA9IHRoaXMuc2VlZDtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zY2FsZSA9IHRoaXMuc2NhbGUuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucmVzb2x1dGlvbiA9IHRoaXMucmVzb2x1dGlvbi5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGF3YWl0IHRoaXMucmVzb2x1dGlvbi5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5yZXNvbHV0aW9uKTtcclxuICAgICAgYXdhaXQgdGhpcy5zY2FsZS5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5zY2FsZSk7XHJcbiAgICAgIHRoaXMuc2VlZCA9IF9zZXJpYWxpemF0aW9uLnNlZWQ7XHJcbiAgICAgIHRoaXMuY3JlYXRlKHRoaXMucmVzb2x1dGlvbiwgdGhpcy5zY2FsZSwgdGhpcy5zZWVkKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgICAgdGhpcy5jcmVhdGUodGhpcy5yZXNvbHV0aW9uLCB0aGlzLnNjYWxlLCB0aGlzLnNlZWQpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiTWVzaFRlcnJhaW4udHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlcyBhIHBsYW5hciBHcmlkIGFuZCBhcHBsaWVzIGEgSGVpZ2h0bWFwLUZ1bmN0aW9uIHRvIGl0LlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxIHwgTW9yaXR6IEJlYXVncmFuZCwgSEZVLCAyMDIwXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hSZWxpZWYgZXh0ZW5kcyBNZXNoVGVycmFpbiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gTWVzaC5yZWdpc3RlclN1YmNsYXNzKE1lc2hSZWxpZWYpO1xyXG4gICAgcHJpdmF0ZSB0ZXh0dXJlOiBUZXh0dXJlSW1hZ2UgPSBudWxsO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoUmVsaWVmXCIsIF90ZXh0dXJlOiBUZXh0dXJlSW1hZ2UgPSBudWxsKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lLCBWZWN0b3IyLk9ORSgyKSwgdW5kZWZpbmVkLCAoX3g6IG51bWJlciwgX3o6IG51bWJlcikgPT4gMCk7XHJcbiAgICAgIHRoaXMuc2V0VGV4dHVyZShfdGV4dHVyZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlSGVpZ2h0TWFwRnVuY3Rpb24oX3RleHR1cmU6IFRleHR1cmVJbWFnZSk6IEhlaWdodE1hcEZ1bmN0aW9uIHtcclxuICAgICAgbGV0IGFycmF5OiBVaW50OENsYW1wZWRBcnJheSA9IE1lc2hSZWxpZWYudGV4dHVyZVRvQ2xhbXBlZEFycmF5KF90ZXh0dXJlKTtcclxuICAgICAgbGV0IGhlaWdodE1hcEZ1bmN0aW9uOiBIZWlnaHRNYXBGdW5jdGlvbiA9IChfeDogbnVtYmVyLCBfejogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgbGV0IHBpeGVsOiBudW1iZXIgPSBNYXRoLnJvdW5kKF96ICogX3RleHR1cmUuaW1hZ2Uud2lkdGggKyBfeCk7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5W3BpeGVsICogNF0gLyAyNTU7XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBoZWlnaHRNYXBGdW5jdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0ZXh0dXJlVG9DbGFtcGVkQXJyYXkoX3RleHR1cmU6IFRleHR1cmVJbWFnZSk6IFVpbnQ4Q2xhbXBlZEFycmF5IHtcclxuICAgICAgbGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICBjYW52YXMud2lkdGggPSBfdGV4dHVyZS5pbWFnZS53aWR0aDtcclxuICAgICAgY2FudmFzLmhlaWdodCA9IF90ZXh0dXJlLmltYWdlLmhlaWdodDtcclxuXHJcbiAgICAgIGxldCBjcmM6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgIGNyYy5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgY3JjLmRyYXdJbWFnZShfdGV4dHVyZS5pbWFnZSwgMCwgMCk7XHJcblxyXG4gICAgICByZXR1cm4gY3JjLmdldEltYWdlRGF0YSgwLCAwLCBfdGV4dHVyZS5pbWFnZS53aWR0aCwgX3RleHR1cmUuaW1hZ2UuaGVpZ2h0KS5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dHVyZSB0byBiZSB1c2VkIGFzIGhlaWdodG1hcFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VGV4dHVyZShfdGV4dHVyZTogVGV4dHVyZUltYWdlID0gbnVsbCk6IHZvaWQge1xyXG4gICAgICBpZiAoIV90ZXh0dXJlKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgdGhpcy50ZXh0dXJlID0gX3RleHR1cmU7XHJcbiAgICAgIGxldCByZXNvbHV0aW9uOiBWZWN0b3IyID0gX3RleHR1cmUgPyBuZXcgVmVjdG9yMihfdGV4dHVyZS5pbWFnZS53aWR0aCAtIDEsIF90ZXh0dXJlLmltYWdlLmhlaWdodCAtIDEpIDogdW5kZWZpbmVkO1xyXG4gICAgICBzdXBlci5jcmVhdGUocmVzb2x1dGlvbiwgcmVzb2x1dGlvbiwgTWVzaFJlbGllZi5jcmVhdGVIZWlnaHRNYXBGdW5jdGlvbihfdGV4dHVyZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgZGVsZXRlIHNlcmlhbGl6YXRpb24uc2VlZDtcclxuICAgICAgZGVsZXRlIHNlcmlhbGl6YXRpb24uc2NhbGU7XHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLnJlc29sdXRpb247XHJcblxyXG4gICAgICBpZiAodGhpcy50ZXh0dXJlKVxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24uaWRUZXh0dXJlID0gdGhpcy50ZXh0dXJlLmlkUmVzb3VyY2U7XHJcblxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLmlkVGV4dHVyZSkge1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IDxUZXh0dXJlSW1hZ2U+YXdhaXQgUHJvamVjdC5nZXRSZXNvdXJjZShfc2VyaWFsaXphdGlvbi5pZFRleHR1cmUpO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSh0aGlzLnRleHR1cmUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IudGV4dHVyZSkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5zZXRUZXh0dXJlKF9tdXRhdG9yLnRleHR1cmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3Iuc2VlZDtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNjYWxlO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IucmVzb2x1dGlvbjtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIi8vIC88cmVmZXJlbmNlIHBhdGg9XCJNZXNoUG9seWdvbi50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIGEgcm90YXRpb24gb2YgYSBwb2x5Z29uIGFyb3VuZCB0aGUgeS1heGlzXHJcbiAgICogYGBgdGV4dCAgICAgICBcclxuICAgKiAgICAgICAgICAgICAgICAgICAgIHlcclxuICAgKiAgICAgICAgICAgICAgICAgIF8gIOKGkSAwXzFcclxuICAgKiAgICAgICAgICAgICAgICAg4pSCICAg4pSC4oaSeCDilIIyICAgICAgICAgXHJcbiAgICogICAgICAgICAgICAgICAgICDilbIgIOKUgiAg4pWxMyAgICAgICAgIFxyXG4gICAqICAgICAgICAgICAgICAgICAg4pWxICDilIIgIOKVsiAgIFxyXG4gICAqICAgICAgICAgICAgICAgICDilbFfX1/ilIJfX1/ilbI0IFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgIDVcclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hSb3RhdGlvbiBleHRlbmRzIE1lc2gge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IE1lc2gucmVnaXN0ZXJTdWJjbGFzcyhNZXNoUm90YXRpb24pO1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyB2ZXJ0aWNlc0RlZmF1bHQ6IFZlY3RvcjJbXSA9IFsgLy8gbGluZSBpcyB0aGUgbWluaW1hbCBzaGFwZVxyXG4gICAgICBuZXcgVmVjdG9yMigwLjUsIDAuNSksXHJcbiAgICAgIG5ldyBWZWN0b3IyKDAuNSwgLTAuNSlcclxuICAgIF07XHJcbiAgICBwcm90ZWN0ZWQgc2hhcGU6IE11dGFibGVBcnJheTxWZWN0b3IyPiA9IG5ldyBNdXRhYmxlQXJyYXk8VmVjdG9yMj4oVmVjdG9yMik7XHJcbiAgICBwcm90ZWN0ZWQgbG9uZ2l0dWRlczogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoUm90YXRpb25cIiwgX3NoYXBlOiBWZWN0b3IyW10gPSBNZXNoUm90YXRpb24udmVydGljZXNEZWZhdWx0LCBfbG9uZ2l0dWRlczogbnVtYmVyID0gMykge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMucm90YXRlKF9zaGFwZSwgX2xvbmdpdHVkZXMpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIk11dGF0b3JcIiwgdGhpcy5nZXRNdXRhdG9yKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgbWluVmVydGljZXMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIDI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNoYXBlID0gU2VyaWFsaXplci5zZXJpYWxpemVBcnJheShWZWN0b3IyLCB0aGlzLnNoYXBlKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5sb25naXR1ZGVzID0gdGhpcy5sb25naXR1ZGVzO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGxldCBzaGFwZTogVmVjdG9yMltdID0gPFZlY3RvcjJbXT5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplQXJyYXkoX3NlcmlhbGl6YXRpb24uc2hhcGUpO1xyXG4gICAgICB0aGlzLmxvbmdpdHVkZXMgPSBfc2VyaWFsaXphdGlvbi5sb25naXR1ZGVzO1xyXG4gICAgICB0aGlzLnJvdGF0ZShzaGFwZSwgdGhpcy5sb25naXR1ZGVzKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgICAgdGhpcy5yb3RhdGUodGhpcy5zaGFwZSwgdGhpcy5sb25naXR1ZGVzKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5NVVRBVEUpKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCByb3RhdGUoX3NoYXBlOiBWZWN0b3IyW10sIF9sb25naXR1ZGVzOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICB0aGlzLnNoYXBlID0gPE11dGFibGVBcnJheTxWZWN0b3IyPj5NdXRhYmxlQXJyYXkuZnJvbShfc2hhcGUubWFwKF92ZXJ0ZXggPT4gX3ZlcnRleC5jbG9uZSkpO1xyXG4gICAgICB0aGlzLmxvbmdpdHVkZXMgPSBNYXRoLnJvdW5kKF9sb25naXR1ZGVzKTtcclxuICAgICAgbGV0IGFuZ2xlOiBudW1iZXIgPSAzNjAgLyB0aGlzLmxvbmdpdHVkZXM7XHJcbiAgICAgIGxldCBtdHhSb3RhdGU6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5ST1RBVElPTl9ZKGFuZ2xlKTtcclxuICAgICAgLy8gY29weSBvcmlnaW5hbCBwb2x5Z29uIGFzIFZlY3RvcjMgYXJyYXlcclxuICAgICAgbGV0IHBvbHlnb246IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgICBsZXQgZGlzdGFuY2VzOiBudW1iZXJbXSA9IFswXTtcclxuICAgICAgbGV0IHRvdGFsOiBudW1iZXIgPSAwO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5zaGFwZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHBvbHlnb24ucHVzaCh0aGlzLnNoYXBlW2ldLnRvVmVjdG9yMygpKTtcclxuICAgICAgICBpZiAoaSA+IDApIHtcclxuICAgICAgICAgIGxldCBkaXN0YW5jZTogbnVtYmVyID0gVmVjdG9yMi5ESUZGRVJFTkNFKHRoaXMuc2hhcGVbaV0sIHRoaXMuc2hhcGVbaSAtIDFdKS5tYWduaXR1ZGU7XHJcbiAgICAgICAgICB0b3RhbCArPSBkaXN0YW5jZTtcclxuICAgICAgICAgIGRpc3RhbmNlcy5wdXNoKHRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZGlzdGFuY2VzLmZvckVhY2goKF9lbnRyeSwgX2luZGV4KSA9PiB7IGRpc3RhbmNlc1tfaW5kZXhdID0gX2VudHJ5IC8gdG90YWw7IH0pO1xyXG5cclxuICAgICAgbGV0IG5WZXJ0aWNlc1BvbHlnb246IG51bWJlciA9IHBvbHlnb24ubGVuZ3RoO1xyXG5cclxuICAgICAgbGV0IGNsb3VkOiBWZXJ0aWNlcyA9IG5ldyBWZXJ0aWNlcygpO1xyXG4gICAgICBmb3IgKGxldCBsb25naXR1ZGU6IG51bWJlciA9IDA7IGxvbmdpdHVkZSA8PSB0aGlzLmxvbmdpdHVkZXM7IGxvbmdpdHVkZSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IG5WZXJ0aWNlc1BvbHlnb247IGkrKykge1xyXG4gICAgICAgICAgbGV0IHV2OiBWZWN0b3IyID0gbmV3IFZlY3RvcjIobG9uZ2l0dWRlIC8gdGhpcy5sb25naXR1ZGVzLCBkaXN0YW5jZXNbaV0pO1xyXG4gICAgICAgICAgLy8gVE9ETzogbGFzdCBzZWN0b3Igc2hvdWxkIG9ubHkgYmUgcmVmZXJlbmNlcyB0byB0aGUgZmlyc3QgbWVyaWRpYW5cclxuICAgICAgICAgIGlmIChsb25naXR1ZGUgPT0gdGhpcy5sb25naXR1ZGVzKVxyXG4gICAgICAgICAgICBjbG91ZC5wdXNoKG5ldyBWZXJ0ZXgoaSwgdXYpKTtcclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobG9uZ2l0dWRlID4gMCAmJiB0aGlzLnNoYXBlW2ldLnggPT0gMCkgLy8gdXNlIGEgc2luZ2xlIHZlcnRleCB3aGVuIGl0J3Mgb24gdGhlIHJvdGF0aW9uIGF4aXNcclxuICAgICAgICAgICAgICBjbG91ZC5wdXNoKG5ldyBWZXJ0ZXgoaSwgdXYpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgIGNsb3VkLnB1c2gobmV3IFZlcnRleChwb2x5Z29uW2ldLmNsb25lLCB1dikpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwb2x5Z29uLmZvckVhY2goKF92ZWN0b3I6IFZlY3RvcjMpID0+IF92ZWN0b3IudHJhbnNmb3JtKG10eFJvdGF0ZSkpO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLy8gY29weSBpbmRpY2VzIHRvIG5ldyBpbmRleCBhcnJheVxyXG4gICAgICBsZXQgZmFjZXM6IEZhY2VbXSA9IFtdO1xyXG5cclxuICAgICAgZm9yIChsZXQgbG9uZ2l0dWRlOiBudW1iZXIgPSAwOyBsb25naXR1ZGUgPCB0aGlzLmxvbmdpdHVkZXM7IGxvbmdpdHVkZSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgbGF0aXR1ZGU6IG51bWJlciA9IDA7IGxhdGl0dWRlIDwgblZlcnRpY2VzUG9seWdvbiAtIDE7IGxhdGl0dWRlKyspIHtcclxuICAgICAgICAgIGxldCBzdGFydDogbnVtYmVyID0gbG9uZ2l0dWRlICogblZlcnRpY2VzUG9seWdvbiArIGxhdGl0dWRlO1xyXG4gICAgICAgICAgbGV0IHF1YWQ6IFF1YWQgPSBuZXcgUXVhZChjbG91ZCwgc3RhcnQgKyAxLCBzdGFydCArIDEgKyBuVmVydGljZXNQb2x5Z29uLCBzdGFydCArIG5WZXJ0aWNlc1BvbHlnb24sIHN0YXJ0KTtcclxuICAgICAgICAgIGZhY2VzLnB1c2goLi4ucXVhZC5mYWNlcyk7XHJcbiAgICAgICAgICAvLyBUT0RPOiBjYXRjaCBpbnZhbGlkIGZhY2VzIHJpZ2h0IGhlcmUuLi5cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBjbG91ZDtcclxuICAgICAgdGhpcy5mYWNlcyA9IGZhY2VzO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGEgVVYgU3BoZXJlIHdpdGggYSBnaXZlbiBudW1iZXIgb2Ygc2VjdG9ycyBhbmQgc3RhY2tzIChjbGFtcGVkIGF0IDEyOCoxMjgpXHJcbiAgICogSW1wbGVtZW50YXRpb24gYmFzZWQgb24gaHR0cDovL3d3dy5zb25naG8uY2Evb3BlbmdsL2dsX3NwaGVyZS5odG1sXHJcbiAgICogQGF1dGhvcnMgU2ltb24gU3RvcmwtU2NodWxrZSwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaFNwaGVyZSBleHRlbmRzIE1lc2hSb3RhdGlvbiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gTWVzaC5yZWdpc3RlclN1YmNsYXNzKE1lc2hTcGhlcmUpO1xyXG4gICAgcHJpdmF0ZSBsYXRpdHVkZXM6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFNwaGVyZVwiLCBfbG9uZ2l0dWRlczogbnVtYmVyID0gOCwgX2xhdGl0dWRlczogbnVtYmVyID0gOCkge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9sb25naXR1ZGVzLCBfbGF0aXR1ZGVzKTsgLy8gVE9ETzogd2hlbiBkZXNlcmlhbGl6ZWQgdGhpcyBjYXVzZXMgdGhpcyBjYXVzZXMgdGhlIG1lc2ggdG8gYmUgY3JlYXRlZCB0d2ljZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoaXMgc3BoZXJlIHdpdGggYSBnaXZlbiBudW1iZXIgb2YgbG9uZ2l0dWRlcyBhbmQgbGF0aXR1ZGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjcmVhdGUoX2xvbmdpdHVkZXM6IG51bWJlciA9IDMsIF9sYXRpdHVkZXM6IG51bWJlciA9IDIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAvL0NsYW1wIHJlc29sdXRpb24gdG8gcHJldmVudCBwZXJmb3JtYW5jZSBpc3N1ZXNcclxuICAgICAgdGhpcy5sb25naXR1ZGVzID0gTWF0aC5taW4oTWF0aC5yb3VuZChfbG9uZ2l0dWRlcyksIDEyOCk7XHJcbiAgICAgIHRoaXMubGF0aXR1ZGVzID0gTWF0aC5taW4oTWF0aC5yb3VuZChfbGF0aXR1ZGVzKSwgMTI4KTtcclxuXHJcbiAgICAgIGlmIChfbG9uZ2l0dWRlcyA8IDMgfHwgX2xhdGl0dWRlcyA8IDIpIHtcclxuICAgICAgICBEZWJ1Zy53YXJuKFwiVVYgU3BoZXJlIG11c3QgaGF2ZSBhdCBsZWFzdCAzIGxvbmdpdHVkZXMgYW5kIDIgbGF0aXR1ZGVzIHRvIGZvcm0gYSAzLWRpbWVuc2lvbmFsIHNoYXBlLlwiKTtcclxuICAgICAgICB0aGlzLmxvbmdpdHVkZXMgPSBNYXRoLm1heCgzLCBfbG9uZ2l0dWRlcyk7XHJcbiAgICAgICAgdGhpcy5sYXRpdHVkZXMgPSBNYXRoLm1heCgyLCBfbGF0aXR1ZGVzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHNoYXBlOiBWZWN0b3IyW10gPSBbXTtcclxuICAgICAgbGV0IHN0ZXA6IG51bWJlciA9IE1hdGguUEkgLyB0aGlzLmxhdGl0dWRlcztcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8PSB0aGlzLmxhdGl0dWRlczsgKytpKSB7XHJcbiAgICAgICAgbGV0IGFuZ2xlOiBudW1iZXIgPSBNYXRoLlBJIC8gMiAtIGkgKiBzdGVwO1xyXG4gICAgICAgIGxldCB4OiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgbGV0IHk6IG51bWJlciA9IE1hdGguc2luKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgc2hhcGUucHVzaChuZXcgVmVjdG9yMih4IC8gMiwgeSAvIDIpKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBwbGFjZSBmaXJzdCBhbmQgbGFzdCB2ZXJ0ZXggZXhhY3RseSBvbiByb3RhdGlvbiBheGlzXHJcbiAgICAgIHNoYXBlWzBdLnggPSAwO1xyXG4gICAgICBzaGFwZVtzaGFwZS5sZW5ndGggLSAxXS54ID0gMDtcclxuXHJcbiAgICAgIHN1cGVyLnJvdGF0ZShzaGFwZSwgX2xvbmdpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLnNoYXBlO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmxhdGl0dWRlcyA9IHRoaXMubGF0aXR1ZGVzO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9zZXJpYWxpemF0aW9uLmxvbmdpdHVkZXMsIF9zZXJpYWxpemF0aW9uLmxhdGl0dWRlcyk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IsIF9zZWxlY3Rpb246IHN0cmluZ1tdID0gbnVsbCwgX2Rpc3BhdGNoTXV0YXRlOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBzdXBlci5tdXRhdGUoX211dGF0b3IsIF9zZWxlY3Rpb24sIF9kaXNwYXRjaE11dGF0ZSk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKHRoaXMubG9uZ2l0dWRlcywgdGhpcy5sYXRpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3Iuc2hhcGU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSB0d28gcXVhZHMgcGxhY2VkIGJhY2sgdG8gYmFjaywgdGhlIG9uZSBmYWNpbmcgaW4gbmVnYXRpdmUgWi1kaXJlY3Rpb24gaXMgdGV4dHVyZWQgcmV2ZXJzZWRcclxuICAgKiBgYGB0ZXh0XHJcbiAgICogICAgICAgIDAgX18gM1xyXG4gICAqICAgICAgICAgfF9ffFxyXG4gICAqICAgICAgICAxICAgIDIgICAgICAgICAgICAgXHJcbiAgICogYGBgIFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIwXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hTcHJpdGUgZXh0ZW5kcyBNZXNoIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFNwcml0ZSk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBcIk1lc2hTcHJpdGVcIikge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgVmVydGljZXMoXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAwLjUsIDApLCBuZXcgVmVjdG9yMigwLCAwKSksXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAtMC41LCAwKSwgbmV3IFZlY3RvcjIoMCwgMSkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoMC41LCAtMC41LCAwKSwgbmV3IFZlY3RvcjIoMSwgMSkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoMC41LCAwLjUsIDApLCBuZXcgVmVjdG9yMigxLCAwKSlcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5mYWNlcyA9IFtcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCAxLCAyLCAwKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCAyLCAzLCAwKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCAwLCAzLCAxKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCAzLCAyLCAxKVxyXG4gICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZsYXQgaXMgc3RhbmRhcmQgaGVyZSAvLyBUT0RPOiBpcyB0aGlzIHN0aWxsIG5lZWRlZD9cclxuICAgIHB1YmxpYyBnZXQgdmVydGljZXNGbGF0KCk6IEZsb2F0MzJBcnJheSB7IHJldHVybiB0aGlzLnJlbmRlck1lc2gudmVydGljZXM7IH1cclxuICAgIHB1YmxpYyBnZXQgaW5kaWNlc0ZsYXQoKTogVWludDE2QXJyYXkgeyByZXR1cm4gdGhpcy5yZW5kZXJNZXNoLmluZGljZXM7IH1cclxuXHJcbiAgICAvLyBpbnN0ZWFkLCBzbW9vdGggc2hhZGluZyB3b3VsZCBuZWVkIGV4dHJhIGF0dGVudGlvbiBidXQgaXMgbm90IHJlbGV2YW50Li4uXHJcblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGEgVG9ydXMgd2l0aCBhIGdpdmVuIHRoaWNrbmVzcyBhbmQgdGhlIG51bWJlciBvZiBtYWpvci0gYW5kIG1pbm9yIHNlZ21lbnRzXHJcbiAgICogQGF1dGhvcnMgU2ltb24gU3RvcmwtU2NodWxrZSwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaFRvcnVzIGV4dGVuZHMgTWVzaFJvdGF0aW9uIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFRvcnVzKTtcclxuICAgIHByaXZhdGUgc2l6ZTogbnVtYmVyID0gMC4yNTtcclxuICAgIHByaXZhdGUgbGF0aXR1ZGVzOiBudW1iZXIgPSAxMjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFRvcnVzXCIsIF9zaXplOiBudW1iZXIgPSAwLjI1LCBfbG9uZ2l0dWRlczogbnVtYmVyID0gOCwgX2xhdGl0dWRlczogbnVtYmVyID0gNikge1xyXG4gICAgICBzdXBlcihfbmFtZSwgTWVzaFRvcnVzLmdldFNoYXBlKF9zaXplLCBNYXRoLm1heCgzLCBfbGF0aXR1ZGVzKSksIF9sb25naXR1ZGVzKTtcclxuICAgICAgdGhpcy5zaXplID0gX3NpemU7XHJcbiAgICAgIHRoaXMubG9uZ2l0dWRlcyA9IF9sb25naXR1ZGVzO1xyXG4gICAgICB0aGlzLmxhdGl0dWRlcyA9IE1hdGgubWF4KDMsIF9sYXRpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFNoYXBlKF9zaXplOiBudW1iZXIsIF9sYXRpdHVkZXM6IG51bWJlcik6IFZlY3RvcjJbXSB7XHJcbiAgICAgIGxldCBzaGFwZTogVmVjdG9yMltdID0gW107XHJcbiAgICAgIGxldCByYWRpdXM6IG51bWJlciA9IF9zaXplIC8gMjtcclxuICAgICAgbGV0IGNlbnRlcjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAuMjUgKyByYWRpdXMsIDApO1xyXG4gICAgICBmb3IgKGxldCBsYXRpdHVkZTogbnVtYmVyID0gMDsgbGF0aXR1ZGUgPD0gX2xhdGl0dWRlczsgbGF0aXR1ZGUrKykge1xyXG4gICAgICAgIGxldCBhbmdsZTogbnVtYmVyID0gMiAqIE1hdGguUEkgKiBsYXRpdHVkZSAvIF9sYXRpdHVkZXM7XHJcbiAgICAgICAgc2hhcGUucHVzaChWZWN0b3IyLlNVTShjZW50ZXIsIG5ldyBWZWN0b3IyKHJhZGl1cyAqIC1NYXRoLmNvcyhhbmdsZSksIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSkpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2hhcGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhpcyB0b3J1cyBmcm9tIHRoZSBnaXZlbiBwYXJhbWV0ZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjcmVhdGUoX3NpemU6IG51bWJlciA9IDAuMjUsIF9sb25naXR1ZGVzOiBudW1iZXIgPSA4LCBfbGF0aXR1ZGVzOiBudW1iZXIgPSA2KTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2l6ZSA9IF9zaXplO1xyXG4gICAgICB0aGlzLmxhdGl0dWRlcyA9IE1hdGgubWF4KDMsIF9sYXRpdHVkZXMpO1xyXG4gICAgICBzdXBlci5yb3RhdGUoTWVzaFRvcnVzLmdldFNoYXBlKF9zaXplLCBfbGF0aXR1ZGVzKSwgX2xvbmdpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ubGF0aXR1ZGVzID0gdGhpcy5sYXRpdHVkZXM7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2l6ZSA9IHRoaXMuc2l6ZTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICB0aGlzLmNyZWF0ZShfc2VyaWFsaXphdGlvbi5zaXplLCBfc2VyaWFsaXphdGlvbi5sb25naXR1ZGVzLCBfc2VyaWFsaXphdGlvbi5sYXRpdHVkZXMpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnNpemUsIHRoaXMubG9uZ2l0dWRlcywgdGhpcy5sYXRpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3Iuc2hhcGU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgZW51bSBRVUFEU1BMSVQge1xyXG4gICAgUExBTkFSLCBBVF8wLCBBVF8xXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHN1cmZhY2UgY3JlYXRlZCB3aXRoIGZvdXIgdmVydGljZXMgd2hpY2ggaW1tZWRpYXRlbHkgY3JlYXRlcyBub25lLCBvbmUgb3IgdHdvIHtAbGluayBGYWNlfXMgZGVwZW5kaW5nIG9uIHZlcnRpY2VzIGF0IGlkZW50aWNhbCBwb3NpdGlvbnMuXHJcbiAgICogYGBgdGV4dFxyXG4gICAqIFFVQURTUExJVDogIFBMQU5BUiAgICAgICAgICAgICAgICAgIEFUXzAgICAgICAgICAgICAgICAgICAgICBBVF8xXHJcbiAgICogICAgICAgICAgICAgMCBfIDMgICAgICAgICAgICAgICAgICAgMCBfIDMgICAgICAgICAgICAgICAgICAgIDAgXyAzICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAqICAgICAgICAgICAgICB8XFx8ICAgICAgICAgICAgICAgICAgICAgfFxcfCAgICAgICAgICAgICAgICAgICAgICB8L3wgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICogICAgICAgICAgICAgMSDigL4gMiAgICAgICAgICAgICAgICAgICAxIOKAviAyICAgICAgICAgICAgICAgICAgICAxIOKAviAyICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICogIHNoYXJlZCBsYXN0IHZlcnRleCAyICAgICAgbGFzdCB2ZXJ0aWNlcyAyICsgMyAgICAgIGxhc3QgdmVydGljZXMgMyArIDAgXHJcbiAgICogICAgICBcclxuICAgKiBgYGAgXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUXVhZCB7XHJcbiAgICBwdWJsaWMgZmFjZXM6IEZhY2VbXTtcclxuICAgICNzcGxpdDogUVVBRFNQTElUO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfdmVydGljZXM6IFZlcnRpY2VzLCBfaW5kZXgwOiBudW1iZXIsIF9pbmRleDE6IG51bWJlciwgX2luZGV4MjogbnVtYmVyLCBfaW5kZXgzOiBudW1iZXIsIF9zcGxpdDogUVVBRFNQTElUID0gUVVBRFNQTElULlBMQU5BUikge1xyXG4gICAgICB0aGlzLmZhY2VzID0gW107XHJcbiAgICAgIHRoaXMuI3NwbGl0ID0gX3NwbGl0O1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChfc3BsaXQgIT0gUVVBRFNQTElULkFUXzEpXHJcbiAgICAgICAgICB0aGlzLmZhY2VzLnB1c2gobmV3IEZhY2UoX3ZlcnRpY2VzLCBfaW5kZXgwLCBfaW5kZXgxLCBfaW5kZXgyKSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgdGhpcy5mYWNlcy5wdXNoKG5ldyBGYWNlKF92ZXJ0aWNlcywgX2luZGV4MSwgX2luZGV4MiwgX2luZGV4MykpO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikge1xyXG4gICAgICAgIERlYnVnLmZ1ZGdlKFwiRmFjZSBleGNsdWRlZFwiLCAoPEVycm9yPl9lKS5tZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChfc3BsaXQgPT0gUVVBRFNQTElULlBMQU5BUilcclxuICAgICAgICAgIHRoaXMuZmFjZXMucHVzaChuZXcgRmFjZShfdmVydGljZXMsIF9pbmRleDMsIF9pbmRleDAsIF9pbmRleDIpKTtcclxuICAgICAgICBlbHNlIGlmIChfc3BsaXQgPT0gUVVBRFNQTElULkFUXzApXHJcbiAgICAgICAgICB0aGlzLmZhY2VzLnB1c2gobmV3IEZhY2UoX3ZlcnRpY2VzLCBfaW5kZXgwLCBfaW5kZXgyLCBfaW5kZXgzKSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgdGhpcy5mYWNlcy5wdXNoKG5ldyBGYWNlKF92ZXJ0aWNlcywgX2luZGV4MSwgX2luZGV4MywgX2luZGV4MCkpO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikge1xyXG4gICAgICAgIERlYnVnLmZ1ZGdlKFwiRmFjZSBleGNsdWRlZFwiLCAoPEVycm9yPl9lKS5tZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc3BsaXQoKTogUVVBRFNQTElUIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwbGl0O1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEJvbmUge1xyXG4gICAgaW5kZXg6IG51bWJlcjtcclxuICAgIHdlaWdodDogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogdGhlIHJlZmVyIHRvICBkZXNjcmlwdGlvbiBpcyBubyBsb25nZXIgY29ycmVjdCBhcyByZWZlciB0byBhbHNvIHdvcmtzIGZvciBib25lIGluZGljZXNcclxuICAvKipcclxuICAgKiBSZXByZXNlbnRzIGEgdmVydGV4IG9mIGEgbWVzaCB3aXRoIGV4dGVuZGVkIGluZm9ybWF0aW9uIHN1Y2ggYXMgdGhlIHV2IGNvb3JkaW5hdGVzIGFuZCB0aGUgdmVydGV4IG5vcm1hbC5cclxuICAgKiBJdCBtYXkgcmVmZXIgdG8gYW5vdGhlciB2ZXJ0ZXggdmlhIGFuIGluZGV4IGludG8gc29tZSBhcnJheSwgaW4gd2hpY2ggY2FzZSB0aGUgcG9zaXRpb24gYW5kIHRoZSBub3JtYWwgYXJlIHN0b3JlZCB0aGVyZS5cclxuICAgKiBUaGlzIHdheSwgdmVydGV4IHBvc2l0aW9uIGFuZCBub3JtYWwgaXMgYSAxOjEgYXNzb2NpYXRpb24sIHZlcnRleCB0byB0ZXh0dXJlIGNvb3JkaW5hdGVzIGEgMTpuIGFzc29jaWF0aW9uLlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFZlcnRleCB7XHJcbiAgICBwdWJsaWMgcG9zaXRpb246IFZlY3RvcjM7XHJcbiAgICBwdWJsaWMgdXY6IFZlY3RvcjIgfCBudWxsO1xyXG4gICAgcHVibGljIG5vcm1hbDogVmVjdG9yMztcclxuICAgIHB1YmxpYyBjb2xvcjogQ29sb3I7XHJcbiAgICBwdWJsaWMgdGFuZ2VudDogVmVjdG9yNCB8IG51bGw7XHJcbiAgICBwdWJsaWMgcmVmZXJUbzogbnVtYmVyO1xyXG4gICAgcHVibGljIGJvbmVzOiBCb25lW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXByZXNlbnRzIGEgdmVydGV4IG9mIGEgbWVzaCB3aXRoIGV4dGVuZGVkIGluZm9ybWF0aW9uIHN1Y2ggYXMgdGhlIHV2IGNvb3JkaW5hdGVzIHRoZSB2ZXJ0ZXggbm9ybWFsIGFuZCBpdHMgdGFuZ2VudHMuXHJcbiAgICAgKiBJdCBtYXkgcmVmZXIgdG8gYW5vdGhlciB2ZXJ0ZXggdmlhIGFuIGluZGV4IGludG8gc29tZSBhcnJheSwgaW4gd2hpY2ggY2FzZSB0aGUgcG9zaXRpb24gYW5kIHRoZSBub3JtYWwgYXJlIHN0b3JlZCB0aGVyZS5cclxuICAgICAqIFRoaXMgd2F5LCB2ZXJ0ZXggcG9zaXRpb24gYW5kIG5vcm1hbCBpcyBhIDE6MSBhc3NvY2lhdGlvbiwgdmVydGV4IHRvIHRleHR1cmUgY29vcmRpbmF0ZXMgYSAxOm4gYXNzb2NpYXRpb24uXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9wb3NpdGlvbk9ySW5kZXg6IFZlY3RvcjMgfCBudW1iZXIsIF91djogVmVjdG9yMiA9IG51bGwsIF9ub3JtYWw6IFZlY3RvcjMgPSBWZWN0b3IzLlpFUk8oKSwgX3RhbmdlbnQ6IFZlY3RvcjQgPSBudWxsLCBfY29sb3I6IENvbG9yID0gbmV3IENvbG9yKDEsIDEsIDEsIDEpLCBfYm9uZXM6IEJvbmVbXSA9IG51bGwpIHtcclxuICAgICAgaWYgKF9wb3NpdGlvbk9ySW5kZXggaW5zdGFuY2VvZiBWZWN0b3IzKVxyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBfcG9zaXRpb25PckluZGV4O1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5yZWZlclRvID0gX3Bvc2l0aW9uT3JJbmRleDtcclxuXHJcbiAgICAgIHRoaXMudXYgPSBfdXY7XHJcbiAgICAgIHRoaXMubm9ybWFsID0gX25vcm1hbDtcclxuICAgICAgdGhpcy50YW5nZW50ID0gX3RhbmdlbnQ7XHJcbiAgICAgIHRoaXMuY29sb3IgPSBfY29sb3I7XHJcbiAgICAgIHRoaXMuYm9uZXMgPSBfYm9uZXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQXJyYXkgd2l0aCBleHRlbmRlZCBmdW5jdGlvbmFsaXR5IHRvIHNlcnZlIGFzIGEge0BsaW5rIFZlcnRleH0tY2xvdWQuIFxyXG4gICAqIEFjY2Vzc29ycyB5aWVsZCBwb3NpdGlvbiBvciBub3JtYWwgYWxzbyBmb3IgdmVydGljZXMgcmVmZXJlbmNpbmcgb3RoZXIgdmVydGljZXNcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBWZXJ0aWNlcyBleHRlbmRzIEFycmF5PFZlcnRleD4ge1xyXG4gICAgLy8gVE9ETzogdGhpcyBjbGFzcyBtYXkgYmVjb21lIG1vcmUgcG93ZXJmdWwgYnkgaGlkaW5nIHRoZSBhcnJheSBhbmQgYWRkIG1vcmUgc2VydmljZSBtZXRob2RzIGxpa2UgY2FsY3VsYXRpbmcgYm91bmRpbmcgYm94LCByYWRpdXMgZXRjLlxyXG4gICAgLy8gc2VlIGlmIGEgcHJveHkgb2YgdGhlIGFycmF5IGludGVyZmFjaW5nIFtdIHdvdWxkIGRvIGEgZ29vZCBqb2IgLT4gdGVzdGVkOiBwcm94eSBpcyBhYm91dCAyMCB0aW1lcyBzbG93ZXIhXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzdWJzZXQgb2YgdmVydGljZXMgdGhhdCBkbyBub3QgcmVmZXIgdG8gb3RoZXIgdmVydGljZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBvcmlnaW5hbHMoKTogQXJyYXk8VmVydGV4PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihfdmVydGV4ID0+IF92ZXJ0ZXgucmVmZXJUbyA9PSB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmV0dXJucyB0aGUgcG9zaXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSB2ZXJ0ZXggYWRkcmVzc2VkLCByZXNvbHZpbmcgcmVmZXJlbmNlcyBiZXR3ZWVuIHZlcnRpY2VzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zaXRpb24oX2luZGV4OiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlcnRleDogVmVydGV4ID0gdGhpc1tfaW5kZXhdO1xyXG4gICAgICByZXR1cm4gKHZlcnRleC5yZWZlclRvID09IHVuZGVmaW5lZCkgPyB2ZXJ0ZXgucG9zaXRpb24gOiB0aGlzW3ZlcnRleC5yZWZlclRvXS5wb3NpdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgdGhlIG5vcm1hbCBhc3NvY2lhdGVkIHdpdGggdGhlIHZlcnRleCBhZGRyZXNzZWQsIHJlc29sdmluZyByZWZlcmVuY2VzIGJldHdlZW4gdmVydGljZXMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBub3JtYWwoX2luZGV4OiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlcnRleDogVmVydGV4ID0gdGhpc1tfaW5kZXhdO1xyXG4gICAgICByZXR1cm4gKHZlcnRleC5yZWZlclRvID09IHVuZGVmaW5lZCkgPyB2ZXJ0ZXgubm9ybWFsIDogdGhpc1t2ZXJ0ZXgucmVmZXJUb10ubm9ybWFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmV0dXJucyB0aGUgdGFuZ2VudCBhc3NvY2lhdGVkIHdpdGggdGhlIHZlcnRleCBhZGRyZXNzZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRhbmdlbnQoX2luZGV4OiBudW1iZXIpOiBWZWN0b3I0IHtcclxuICAgICAgcmV0dXJuIHRoaXNbX2luZGV4XS50YW5nZW50OyAvLyB0YW5nZW50cyBjYW4gbm90IGJlIHNoYXJlZCBhcyB0aGV5IGFyZSBkZXBlbmRlbnQgb24gdGhlIHV2LWNvb3JkaW5hdGVzXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZXR1cm5zIHRoZSB1di1jb29yZGluYXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIHZlcnRleCBhZGRyZXNzZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHV2KF9pbmRleDogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICAgIHJldHVybiB0aGlzW19pbmRleF0udXY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZXR1cm5zIHRoZSBjb2xvciBhc3NvY2lhdGVkIHdpdGggdGhlIHZlcnRleCBhZGRyZXNzZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbG9yKF9pbmRleDogbnVtYmVyKTogQ29sb3Ige1xyXG4gICAgICByZXR1cm4gdGhpc1tfaW5kZXhdLmNvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmV0dXJucyB0aGUgYm9uZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSB2ZXJ0ZXggYWRkcmVzc2VkLCByZXNvbHZpbmcgcmVmZXJlbmNlcyBiZXR3ZWVuIHZlcnRpY2VzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYm9uZXMoX2luZGV4OiBudW1iZXIpOiBCb25lW10ge1xyXG4gICAgICBsZXQgdmVydGV4OiBWZXJ0ZXggPSB0aGlzW19pbmRleF07XHJcbiAgICAgIHJldHVybiAodmVydGV4LnJlZmVyVG8gPT0gdW5kZWZpbmVkKSA/IHZlcnRleC5ib25lcyA6IHRoaXNbdmVydGV4LnJlZmVyVG9dLmJvbmVzO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgbmFtZXNhcGNlIGZvciBoYW5kbGluZyB0aGUgcGFydGljbGUgZGF0YVxyXG4gICAqL1xyXG4gIGV4cG9ydCBuYW1lc3BhY2UgUGFydGljbGVEYXRhIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkYXRhIHN0cnVjdHVyZSBmb3IgYSBwYXJ0aWNsZSBzeXN0ZW0uIERlc2NyaWJlcyB0aGUgcGFydGljbGUgYmVoYXZpb3IgYW5kIGFwcGVhcmFuY2UuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3lzdGVtIHtcclxuICAgICAgdmFyaWFibGVOYW1lcz86IHN0cmluZ1tdO1xyXG4gICAgICB2YXJpYWJsZXM/OiBFeHByZXNzaW9uW107IC8veyBbbmFtZTogc3RyaW5nXTogRXhwcmVzc2lvbiB9O1xyXG4gICAgICBjb2xvcj86IEV4cHJlc3Npb25bXTtcclxuICAgICAgbXR4TG9jYWw/OiBUcmFuc2Zvcm1hdGlvbltdO1xyXG4gICAgICBtdHhXb3JsZD86IFRyYW5zZm9ybWF0aW9uW107XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgUmVjdXJzaXZlID0gU3lzdGVtIHwgRXhwcmVzc2lvbltdIHwgVHJhbnNmb3JtYXRpb25bXSB8IFRyYW5zZm9ybWF0aW9uIHwgRXhwcmVzc2lvbjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBFeHByZXNzaW9uID0gRnVuY3Rpb24gfCBWYXJpYWJsZSB8IENvbnN0YW50IHwgQ29kZTtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uIHtcclxuICAgICAgZnVuY3Rpb246IEZVTkNUSU9OO1xyXG4gICAgICBwYXJhbWV0ZXJzOiBFeHByZXNzaW9uW107XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBWYXJpYWJsZSB7XHJcbiAgICAgIHZhbHVlOiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb25zdGFudCB7XHJcbiAgICAgIHZhbHVlOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb2RlIHtcclxuICAgICAgY29kZTogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVHJhbnNmb3JtYXRpb24ge1xyXG4gICAgICB0cmFuc2Zvcm1hdGlvbjogXCJ0cmFuc2xhdGVcIiB8IFwicm90YXRlXCIgfCBcInNjYWxlXCI7XHJcbiAgICAgIHBhcmFtZXRlcnM6IEV4cHJlc3Npb25bXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZGF0YSBpcyBhIHtAbGluayBFeHByZXNzaW9ufVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaXNFeHByZXNzaW9uKF9kYXRhOiBSZWN1cnNpdmUpOiBfZGF0YSBpcyBFeHByZXNzaW9uIHtcclxuICAgICAgcmV0dXJuIGlzRnVuY3Rpb24oX2RhdGEpIHx8IGlzVmFyaWFibGUoX2RhdGEpIHx8IGlzQ29uc3RhbnQoX2RhdGEpIHx8IGlzQ29kZShfZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGRhdGEgaXMgYSB7QGxpbmsgRnVuY3Rpb259XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKF9kYXRhOiBSZWN1cnNpdmUpOiBfZGF0YSBpcyBGdW5jdGlvbiB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgX2RhdGEgPT0gXCJvYmplY3RcIiAmJiBcImZ1bmN0aW9uXCIgaW4gX2RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGRhdGEgaXMgYSB7QGxpbmsgVmFyaWFibGV9XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc1ZhcmlhYmxlKF9kYXRhOiBSZWN1cnNpdmUpOiBfZGF0YSBpcyBWYXJpYWJsZSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgX2RhdGEgPT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gX2RhdGEgJiYgdHlwZW9mIF9kYXRhLnZhbHVlID09IFwic3RyaW5nXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGRhdGEgaXMgYSB7QGxpbmsgQ29uc3RhbnR9XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0NvbnN0YW50KF9kYXRhOiBSZWN1cnNpdmUpOiBfZGF0YSBpcyBDb25zdGFudCB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgX2RhdGEgPT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gX2RhdGEgJiYgdHlwZW9mIF9kYXRhLnZhbHVlID09IFwibnVtYmVyXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGRhdGEgaXMgYSB7QGxpbmsgQ29kZX1cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzQ29kZShfZGF0YTogUmVjdXJzaXZlKTogX2RhdGEgaXMgQ29kZSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgX2RhdGEgPT0gXCJvYmplY3RcIiAmJiBcImNvZGVcIiBpbiBfZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZGF0YSBpcyBhIHtAbGluayBUcmFuc2Zvcm1hdGlvbn1cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzVHJhbnNmb3JtYXRpb24oX2RhdGE6IFJlY3Vyc2l2ZSk6IF9kYXRhIGlzIFRyYW5zZm9ybWF0aW9uIHtcclxuICAgICAgcmV0dXJuIHR5cGVvZiBfZGF0YSA9PSBcIm9iamVjdFwiICYmIFwidHJhbnNmb3JtYXRpb25cIiBpbiBfZGF0YTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhvbGRzIGluZm9ybWF0aW9uIG9uIGhvdyB0byBtdXRhdGUgdGhlIHBhcnRpY2xlcyBvZiBhIHBhcnRpY2xlIHN5c3RlbS5cclxuICAgKiBBIGZ1bGwgcGFydGljbGUgc3lzdGVtIGlzIGNvbXBvc2VkIGJ5IGF0dGFjaGluZyBhIHtAbGluayBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbX0sIHtAbGluayBDb21wb25lbnRNZXNofSBhbmQge0BsaW5rIENvbXBvbmVudE1hdGVyaWFsfSB0byB0aGUgc2FtZSB7QGxpbmsgTm9kZX0uIFxyXG4gICAqIEFkZGl0aW9uYWxseSBhIHtAbGluayBDb21wb25lbnRGYWNlQ2FtZXJhfSBjYW4gYmUgYXR0YWNoZWQgdG8gbWFrZSB0aGUgcGFydGljbGVzIGZhY2UgdGhlIGNhbWVyYS5cclxuICAgKiBAYXV0aG9ycyBKb25hcyBQbG90emt5LCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGFydGljbGVTeXN0ZW0gZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlUmVzb3VyY2Uge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBpZFJlc291cmNlOiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgI2RhdGE6IFBhcnRpY2xlRGF0YS5TeXN0ZW07XHJcbiAgICAvKiogTWFwIG9mIHNoYWRlciB1bml2ZXJzYWwgZGVyaXZhdGVzIHRvIGNvcnJlc3BvbmRpbmcgY29tcHV0ZWQge0BsaW5rIFNoYWRlclBhcnRpY2xlU3lzdGVtfS4gXHJcbiAgICAgKiBUaGlzIHdheSBlYWNoIHBhcnRpY2xlIHN5c3RlbSByZXNvdXJjZSBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIG11bHRpcGxlIHNoYWRlciB1bml2ZXJzYWwgZGVyaXZhdGVzICovXHJcbiAgICAjc2hhZGVyVG9TaGFkZXJQYXJ0aWNsZVN5c3RlbTogTWFwPFNoYWRlckludGVyZmFjZSwgU2hhZGVyUGFydGljbGVTeXN0ZW0+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gUGFydGljbGVTeXN0ZW0ubmFtZSwgX2RhdGE6IFBhcnRpY2xlRGF0YS5TeXN0ZW0gPSB7fSkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5kYXRhID0gX2RhdGE7XHJcblxyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZGF0YSgpOiBQYXJ0aWNsZURhdGEuU3lzdGVtIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBkYXRhKF9kYXRhOiBQYXJ0aWNsZURhdGEuU3lzdGVtKSB7XHJcbiAgICAgIHRoaXMuI2RhdGEgPSBfZGF0YTtcclxuICAgICAgdGhpcy4jc2hhZGVyVG9TaGFkZXJQYXJ0aWNsZVN5c3RlbS5mb3JFYWNoKF9zaGFkZXIgPT4gX3NoYWRlci5kZWxldGVQcm9ncmFtKCkpO1xyXG4gICAgICB0aGlzLiNzaGFkZXJUb1NoYWRlclBhcnRpY2xlU3lzdGVtLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgY29ycmVzcG9uZGluZyB7QGxpbmsgU2hhZGVyUGFydGljbGVTeXN0ZW19IGZvciB0aGUgZ2l2ZW4gc2hhZGVyIHVuaXZlcnNhbCBkZXJpdmF0ZS5cclxuICAgICAqIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0gdG8gcmVuZGVyIHRoZSBwYXJ0aWNsZSBzeXN0ZW0uXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyB7QGxpbmsgU2hhZGVyUGFydGljbGVTeXN0ZW19XHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFNoYWRlckZyb20oX3NvdXJjZTogU2hhZGVySW50ZXJmYWNlKTogU2hhZGVyUGFydGljbGVTeXN0ZW0ge1xyXG4gICAgICBpZiAoIXRoaXMuI3NoYWRlclRvU2hhZGVyUGFydGljbGVTeXN0ZW0uaGFzKF9zb3VyY2UpKSB7XHJcbiAgICAgICAgbGV0IHBhcnRpY2xlU2hhZGVyOiBTaGFkZXJQYXJ0aWNsZVN5c3RlbSA9IG5ldyBTaGFkZXJQYXJ0aWNsZVN5c3RlbSgpO1xyXG4gICAgICAgIHBhcnRpY2xlU2hhZGVyLmRhdGEgPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgcGFydGljbGVTaGFkZXIuZGVmaW5lID0gWy4uLnBhcnRpY2xlU2hhZGVyLmRlZmluZSwgLi4uX3NvdXJjZS5kZWZpbmVdO1xyXG4gICAgICAgIHBhcnRpY2xlU2hhZGVyLnZlcnRleFNoYWRlclNvdXJjZSA9IF9zb3VyY2UuZ2V0VmVydGV4U2hhZGVyU291cmNlKCk7XHJcbiAgICAgICAgcGFydGljbGVTaGFkZXIuZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBfc291cmNlLmdldEZyYWdtZW50U2hhZGVyU291cmNlKCk7XHJcbiAgICAgICAgdGhpcy4jc2hhZGVyVG9TaGFkZXJQYXJ0aWNsZVN5c3RlbS5zZXQoX3NvdXJjZSwgcGFydGljbGVTaGFkZXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jc2hhZGVyVG9TaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZXQoX3NvdXJjZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIGRhdGE6IHRoaXMuZGF0YVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMsIF9zZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfc2VyaWFsaXphdGlvbi5uYW1lO1xyXG4gICAgICB0aGlzLmRhdGEgPSBfc2VyaWFsaXphdGlvbi5kYXRhO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2UoKTogTXV0YXRvckZvclVzZXJJbnRlcmZhY2Uge1xyXG4gICAgICByZXR1cm4gPE11dGF0b3JGb3JVc2VySW50ZXJmYWNlPnN1cGVyLmdldE11dGF0b3IoKTsgLy8gcmVtb3ZlIGRhdGEgZnJvbSBtdXRhdG9yXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgbXV0YXRvci5kYXRhID0gdGhpcy5kYXRhO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuY2FjaGVkTXV0YXRvcnM7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5zaGFkZXJNYXA7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQSBXZWJHTCBzaGFkZXJwcm9ncmFtIGZvciBhIHBhcnRpY2xlIHN5c3RlbS4gTWFuYWdlZCBieSBhIHtAbGluayBQYXJ0aWNsZVN5c3RlbX0uIEl0IHVzZXMge0BsaW5rIFBhcnRpY2xlU3lzdGVtLmRhdGF9IHRvIGdlbmVyYXRlIGFuZCBpbmplY3QgY29kZSBpbnRvIGEgc2hhZGVyIHVuaXZlcnNhbCBkZXJpdmF0ZSAoR0xTTCkgdGh1cyBjcmVhdGluZyBhIHNoYWRlciBwYXJ0aWNsZSBzeXN0ZW0gZnJvbSBhIHN1cHBsaWVkIHtAbGluayBTaGFkZXJ9cyB2ZXJ0ZXggYW5kIGZyYWdtZW50IHNoYWRlciBzb3VyY2UgY29kZS5cclxuICAgKiBAYXV0aG9yIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyMlxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmRlY29yYXRlXHJcbiAgZXhwb3J0IGNsYXNzIFNoYWRlclBhcnRpY2xlU3lzdGVtIGltcGxlbWVudHMgU2hhZGVySW50ZXJmYWNlIHtcclxuICAgIHB1YmxpYyBkYXRhOiBQYXJ0aWNsZURhdGEuU3lzdGVtO1xyXG4gICAgcHVibGljIGRlZmluZTogc3RyaW5nW10gPSBbXCJQQVJUSUNMRVwiXTtcclxuICAgIHB1YmxpYyB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IHN0cmluZztcclxuICAgIHB1YmxpYyBmcmFnbWVudFNoYWRlclNvdXJjZTogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcbiAgICBwdWJsaWMgYXR0cmlidXRlczogeyBbbmFtZTogc3RyaW5nXTogbnVtYmVyIH07XHJcbiAgICBwdWJsaWMgdW5pZm9ybXM6IHsgW25hbWU6IHN0cmluZ106IFdlYkdMVW5pZm9ybUxvY2F0aW9uIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmplY3RlZCBieSB7QGxpbmsgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbX0uIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcgeyByZXR1cm4gXCJcIjsgLyogaW5qZWN0ZWQgYnkgZGVjb3JhdG9yICovIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtfS4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHsgcmV0dXJuIFwiXCI7IC8qIGluamVjdGVkIGJ5IGRlY29yYXRvciAqLyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmplY3RlZCBieSB7QGxpbmsgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbX0uIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVByb2dyYW0oKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgZGVjb3JhdG9yICovIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtfS4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXNlUHJvZ3JhbSgpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBkZWNvcmF0b3IgKi8gfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW19LiBVc2VkIGJ5IHRoZSByZW5kZXIgc3lzdGVtLlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjcmVhdGVQcm9ncmFtKCk6IHZvaWQgey8qIGluamVjdGVkIGJ5IGRlY29yYXRvciAqLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRW5hYmxlcyB0aGlzIG5vZGUgdG8gYWNjZXNzIHRoZSB3YXlwb2ludCBncmlkIGVzdGFibGlzaGVkIHRocm91Z2gge0BsaW5rIENvbXBvbmVudFdheXBvaW50fXMgYW5kIHRoZWlyIHtAbGluayBDb25uZWN0aW9ufXMsXHJcbiAgICogZmluZCBhIHBhdGggdGhyb3VnaCB0aGVtIGFuZCBldmVuIHdhbGsgZG93biB0aGUgcGF0aC5cclxuICAgKiBAYXV0aG9yIEx1a2FzIFNjaGV1ZXJsZSwgSEZVLCAyMDI0XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudFdhbGtlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50V2Fsa2VyKTtcclxuICAgIC8qKiBUaGUgc3BlZWQgdGhlIHdhbGtlciBzaG91bGQgbW92ZSB3aXRoLiBDb3JyZXNwb25kcyB0byB1bml0cy9zLiAqL1xyXG4gICAgcHVibGljIHNwZWVkOiBudW1iZXIgPSAxO1xyXG4gICAgLyoqIElmIHRydWUsIG1vdmUgdGhlIG5vZGUgdGhpcyBjb21wb25lbnQgaXMgYXR0YWNoZWQgdG8gdGhyb3VnaCBmb3JjZXMgaW5zdGVhZCBvZiBkaXJlY3RseSB0aHJvdWdoIHRoZSB0cmFuc2Zvcm0uIFJlcXVpcmVzIGEgW1tDb21wb25lbnRSaWdpZGJvZHldXSBpZiB0cnVlLiAqL1xyXG4gICAgLy8gcHVibGljIG1vdmVUaHJvdWdoUGh5c2ljczogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBrZWVwcyB0aGUgZGF0YSBuZWVkZWQgZm9yIHRoZSBjdXJyZW50IHdhbGsgKi9cclxuICAgICN3YWxrRGF0YTogV2Fsa0RhdGEgPSB7IHBhdGg6IFtdLCB0b3RhbFByb2dyZXNzOiAtMSB9O1xyXG4gICAgLyoqIGtlZXBzIHRoZSBwcm9taXNlIHRvIHJlc29sdmUgd2hlbiB0aGUgd2Fsa2VyIGhhcyByZWFjaGVkIHRoZSBnb2FsICovXHJcbiAgICAjcHJvbWlzZVJlc29sdmVyT25XYWxrRmluaXNoZWQ6ICgpID0+IHZvaWQ7XHJcbiAgICAvKiogc3RhdHVzIG9mIHdoZXRoZXIgaXQgc2hvdWxkIHJvdGF0ZSB0aGUgd2Fsa2VyIHRvIHRoZSB3YWxraW5nIGRpcmVjdGlvbiAqL1xyXG4gICAgI3JvdGF0ZUluV2Fsa0RpcmVjdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICBpZiAoUHJvamVjdC5tb2RlID09IE1PREUuRURJVE9SKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsIHRoaXMuI2hhbmRsZUF0dGFjaC5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9SRU1PVkUsIHRoaXMuI2hhbmRsZURldGFjaC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIHNwZWVkOiB0aGlzLnNwZWVkXHJcbiAgICAgICAgLy8gbW92ZVRocm91Z2hQaHlzaWNzOiB0aGlzLm1vdmVUaHJvdWdoUGh5c2ljcyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuc3BlZWQgPSBfc2VyaWFsaXphdGlvbi5zcGVlZDtcclxuICAgICAgLy8gdGhpcy5tb3ZlVGhyb3VnaFBoeXNpY3MgPSBfc2VyaWFsaXphdGlvbi5tb3ZlVGhyb3VnaFBoeXNpY3M7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZWxlcG9ydHMgKG1vdmVzIGluc3RhbnRseSkgdG8gdGhlIF90YXJnZXQgV2F5cG9pbnQuXHJcbiAgICAgKiBAcGFyYW0gX3RhcmdldFxyXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgaW1tZWRpYXRlbHkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBtb3ZlVG8oX3RhcmdldDogV2F5cG9pbnQpOiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgLyoqXHJcbiAgICAgKiBNb3ZlcyB0aGUgd2Fsa2VyIGZyb20gdGhlIF9zdGFydCB0byB0aGUgX2VuZCBXYXlwb2ludC5cclxuICAgICAqIFRlbGVwb3J0cyAobW92ZXMgaW5zdGFudGx5KSB0byB0aGUgX3N0YXJ0IHBvaW50LCB0aGVuIG1vdmVzIHRocm91Z2ggdGhlIHdheXBvaW50IGNvbm5lY3Rpb25zIHRvIHRoZSBfZW5kIHBvaW50LlxyXG4gICAgICogQHBhcmFtIF9zdGFydCBcclxuICAgICAqIEBwYXJhbSBfZW5kXHJcbiAgICAgKiBAcGFyYW0gX3JvdGF0ZSBSb3RhdGVzIHRoZSB3YWxrZXIgdG8gbG9vayBpbiB0aGUgZGlyZWN0aW9uIG9mIHRoZSB3YXlwb2ludFxyXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgX2VuZCBwb2ludCBpcyByZWFjaGVkLiBSZWplY3RzIGlmIF9lbmQgY2FuJ3QgYmUgcmVhY2hlZCAobm8gcGF0aCBmb3VuZCkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBtb3ZlVG8oX3N0YXJ0OiBXYXlwb2ludCwgX2VuZDogV2F5cG9pbnQsIF9yb3RhdGU/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPjtcclxuICAgIHB1YmxpYyBhc3luYyBtb3ZlVG8oX3N0YXJ0OiBXYXlwb2ludCwgX2VuZD86IFdheXBvaW50LCBfcm90YXRlOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKCFfc3RhcnQpIHJldHVybjtcclxuICAgICAgbGV0IHRyYW5zbGF0ZTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRShfc3RhcnQubXR4V29ybGQudHJhbnNsYXRpb24sIHRoaXMubm9kZS5tdHhXb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICAgIHRoaXMubm9kZS5tdHhMb2NhbC50cmFuc2xhdGUodHJhbnNsYXRlKTtcclxuICAgICAgaWYgKCFfZW5kIHx8IF9zdGFydCA9PT0gX2VuZCkge1xyXG4gICAgICAgIHRoaXMuI3dhbGtEYXRhID0geyBwYXRoOiBbXSwgdG90YWxQcm9ncmVzczogLTEgfTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy4jcm90YXRlSW5XYWxrRGlyZWN0aW9uID0gX3JvdGF0ZTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcclxuICAgICAgICBsZXQgcGF0aDogUGF0aGluZ05vZGVbXSB8IG51bGwgPSB0aGlzLmdldFBhdGgoX3N0YXJ0LCBfZW5kKTtcclxuICAgICAgICBpZiAoIXBhdGggfHwgcGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIF9yZWplY3QoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy4jd2Fsa0RhdGEgPSB7IHBhdGgsIHRvdGFsUHJvZ3Jlc3M6IDAgfTtcclxuICAgICAgICB0aGlzLiNwcm9taXNlUmVzb2x2ZXJPbldhbGtGaW5pc2hlZCA9IF9yZXNvbHZlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy4jcm90YXRlSW5XYWxrRGlyZWN0aW9uICYmIHRoaXMuI3dhbGtEYXRhLnBhdGgubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgIHRoaXMucm90YXRlVG93YXJkcyh0aGlzLiN3YWxrRGF0YS5wYXRoWzBdLndheXBvaW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUYWtlcyBjYXJlIG9mIHRoZSBtb3ZpbmcgYWxnb3JpdGhtIGJ5IGNhbGN1bGF0aW5nIHRoZSBuZXh0IHN0ZXAgYW5kIG1vdmluZyBhbG9uZyB0aGlzIHN0ZXAgKi9cclxuICAgIHByb3RlY3RlZCBtb3ZpbmcoKTogdm9pZCB7XHJcbiAgICAgIC8vIGFyZSB3ZSBjdXJyZW50bHkgbW92aW5nP1xyXG4gICAgICBpZiAodGhpcy4jd2Fsa0RhdGEudG90YWxQcm9ncmVzcyA8IDAgfHwgdGhpcy4jd2Fsa0RhdGEucGF0aC5sZW5ndGggPT0gMCkgcmV0dXJuO1xyXG4gICAgICAvLyBkbyB3ZSBoYXZlIGEgY3VycmVudCBwYXRoIHdlIGNhbiBmb2xsb3dcclxuICAgICAgbGV0IGN1cnJlbnRQYXRoOiBQYXRoaW5nTm9kZSA9IHRoaXMuI3dhbGtEYXRhLnBhdGhbdGhpcy4jd2Fsa0RhdGEudG90YWxQcm9ncmVzc107XHJcbiAgICAgIGlmICghY3VycmVudFBhdGgpIHJldHVybjtcclxuXHJcbiAgICAgIC8vIGhvdyBiaWcgb2YgYSBzdGVwIGFyZSB3ZSB0YWtpbmcgdGhpcyBmcmFtZT9cclxuICAgICAgbGV0IGRlbHRhOiBudW1iZXIgPSB0aGlzLnNwZWVkICogY3VycmVudFBhdGgucHJldmlvdXNDb25uZWN0aW9uLnNwZWVkTW9kaWZpZXIgKiBMb29wLnRpbWVGcmFtZUdhbWUgLyAxMDAwO1xyXG4gICAgICAvLyBob3cgZmFyIGF3YXkgYXJlIHdlIGZyb20gdGhlIG5leHQgd2F5cG9pbnQ/XHJcbiAgICAgIGxldCBzdGVwOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKFxyXG4gICAgICAgIGN1cnJlbnRQYXRoLndheXBvaW50Lm10eFdvcmxkLnRyYW5zbGF0aW9uLFxyXG4gICAgICAgIHRoaXMubm9kZS5tdHhXb3JsZC50cmFuc2xhdGlvblxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gbGV0IHN0ZXBSb3RhdGlvbjogTWF0cml4NHg0ID0gTWF0cml4NHg0LkNPTlNUUlVDVElPTihzdGVwKTtcclxuICAgICAgLy8gc3RlcFJvdGF0aW9uLnJvdGF0ZSh0aGlzLm5vZGUubXR4V29ybGQucm90YXRpb24pO1xyXG4gICAgICAvLyBzdGVwID0gc3RlcFJvdGF0aW9uLnRyYW5zbGF0aW9uO1xyXG5cclxuICAgICAgbGV0IHNjYWxlOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKFxyXG4gICAgICAgIGN1cnJlbnRQYXRoLndheXBvaW50Lm10eFdvcmxkLnNjYWxpbmcsXHJcbiAgICAgICAgdGhpcy5ub2RlLm10eFdvcmxkLnNjYWxpbmdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChkZWx0YSAqIGRlbHRhIDwgc3RlcC5tYWduaXR1ZGVTcXVhcmVkKSB7IC8vIHdvbid0IHJlYWNoIG5leHQgd2F5cG9pbnQgeWV0LiBVc2luZyBzcXVhcmVzIGJlY2F1c2UgdGhhdCdzIGZhc3RlciB0byBjb21wdXRlIHRoYW4gc3FydFxyXG4gICAgICAgIHN0ZXAubm9ybWFsaXplKGRlbHRhKTtcclxuICAgICAgICB0aGlzLm5vZGUubXR4TG9jYWwudHJhbnNsYXRlKHN0ZXAsIGZhbHNlKTtcclxuICAgICAgICBpZiAoc2NhbGUubWFnbml0dWRlU3F1YXJlZCA+IDApIHtcclxuICAgICAgICAgIHNjYWxlLm5vcm1hbGl6ZShkZWx0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5tdHhMb2NhbC5zY2FsaW5nID0gVmVjdG9yMy5TVU0oc2NhbGUsIHRoaXMubm9kZS5tdHhMb2NhbC5zY2FsaW5nKTtcclxuICAgICAgICAvLyB0aGlzLm5vZGUubXR4TG9jYWwuc2NhbGUoVmVjdG9yMy5TVU0oc2NhbGUsIHRoaXMubm9kZS5tdHhMb2NhbC5zY2FsaW5nKSk7XHJcbiAgICAgICAgLy8gVE9ETyBpbXBsZW1lbnQgbW92ZW1lbnQgdGhyb3VnaCBwaHlzaWNzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHJlYWNoZWQgbmV4dCBwb2ludFxyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5ULldBWVBPSU5UX1JFQUNIRUQsIHsgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiBjdXJyZW50UGF0aC53YXlwb2ludCB9KSk7XHJcbiAgICAgICg8Q29tcG9uZW50V2F5cG9pbnQ+Y3VycmVudFBhdGgud2F5cG9pbnQpLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5ULldBWVBPSU5UX1JFQUNIRUQsIHsgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB0aGlzIH0pKTtcclxuICAgICAgXHJcbiAgICAgIGxldCB0cmFuc2xhdGU6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoY3VycmVudFBhdGgud2F5cG9pbnQubXR4V29ybGQudHJhbnNsYXRpb24sIHRoaXMubm9kZS5tdHhXb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICAgIHRoaXMubm9kZS5tdHhMb2NhbC50cmFuc2xhdGUodHJhbnNsYXRlLCBmYWxzZSk7XHJcbiAgICAgIHRoaXMubm9kZS5tdHhMb2NhbC5zY2FsaW5nID0gY3VycmVudFBhdGgud2F5cG9pbnQubXR4V29ybGQuc2NhbGluZztcclxuICAgICAgdGhpcy4jd2Fsa0RhdGEudG90YWxQcm9ncmVzcysrO1xyXG5cclxuICAgICAgLy8gcmVhY2hlZCBmaW5hbCBwb2ludCwgZmluaXNoZWQgd2Fsa2luZ1xyXG4gICAgICBpZiAodGhpcy4jd2Fsa0RhdGEudG90YWxQcm9ncmVzcyA+PSB0aGlzLiN3YWxrRGF0YS5wYXRoLmxlbmd0aCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNwcm9taXNlUmVzb2x2ZXJPbldhbGtGaW5pc2hlZCkgdGhpcy4jcHJvbWlzZVJlc29sdmVyT25XYWxrRmluaXNoZWQoKTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5ULlBBVEhJTkdfQ09OQ0xVREVELCB7IGJ1YmJsZXM6IHRydWUsIGRldGFpbDogY3VycmVudFBhdGgud2F5cG9pbnQgfSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gc2hvdWxkIHdlIHJvdGF0ZSB3YWxrZXI/XHJcbiAgICAgIGlmICh0aGlzLiNyb3RhdGVJbldhbGtEaXJlY3Rpb24pIHtcclxuICAgICAgICB0aGlzLnJvdGF0ZVRvd2FyZHModGhpcy4jd2Fsa0RhdGEucGF0aFt0aGlzLiN3YWxrRGF0YS50b3RhbFByb2dyZXNzXS53YXlwb2ludCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogZmluZCB0aGUgcGF0aCBiZXR3ZWVuIHR3byBnaXZlbiB3YXlwb2ludHMgKi9cclxuICAgIHByb3RlY3RlZCBnZXRQYXRoKF9zdGFydDogV2F5cG9pbnQsIF9lbmQ6IFdheXBvaW50KTogUGF0aGluZ05vZGVbXSB7XHJcbiAgICAgIC8vIFRPRE86IHVzZSBhIG1vcmUgZWZmaWNpZW50IGFsZ29yaXRobSBsaWtlIEEqIGluc3RlYWQgb2YgRGlqa3N0cmFcclxuICAgICAgLy8gc2V0dXAgdGhlIGdyYXBoIG9mIHBhdGhzIGJhc2VkIG9uIHRoZSBzdGFydCBub2RlXHJcbiAgICAgIGxldCB1bnZpc2l0ZWROb2RlczogUGF0aGluZ05vZGVbXSA9IFtdO1xyXG4gICAgICBsZXQgcHJvY2Vzc2VkV2F5cG9pbnRzOiBXYXlwb2ludFtdID0gW19zdGFydF07XHJcbiAgICAgIGxldCB3YXlwb2ludHNUb1NlYXJjaFRocm91Z2g6IFdheXBvaW50W10gPSBbX3N0YXJ0XTtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIGxldCB3YXlwb2ludDogV2F5cG9pbnQgPSB3YXlwb2ludHNUb1NlYXJjaFRocm91Z2gucG9wKCk7XHJcbiAgICAgICAgZm9yIChsZXQgY29ubmVjdGlvbiBvZiB3YXlwb2ludC5jb25uZWN0aW9ucykge1xyXG4gICAgICAgICAgaWYgKCFwcm9jZXNzZWRXYXlwb2ludHMuaW5jbHVkZXMoY29ubmVjdGlvbi5lbmQpICYmIGNvbm5lY3Rpb24uc3RhcnQuaXNBY3RpdmUgJiYgY29ubmVjdGlvbi5lbmQuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgd2F5cG9pbnRzVG9TZWFyY2hUaHJvdWdoLnB1c2goY29ubmVjdGlvbi5lbmQpO1xyXG4gICAgICAgICAgICBwcm9jZXNzZWRXYXlwb2ludHMucHVzaChjb25uZWN0aW9uLmVuZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVudmlzaXRlZE5vZGVzLnB1c2goeyB3YXlwb2ludCwgZGlzdGFuY2U6IHdheXBvaW50ID09PSBfc3RhcnQgPyAwIDogSW5maW5pdHksIHByZXZpb3VzOiBudWxsLCBwcmV2aW91c0Nvbm5lY3Rpb246IG51bGwgfSk7XHJcbiAgICAgIH0gd2hpbGUgKHdheXBvaW50c1RvU2VhcmNoVGhyb3VnaC5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgIC8vIGRvIHRoZSBkaWprc3RyYVxyXG4gICAgICB3aGlsZSAodW52aXNpdGVkTm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHVudmlzaXRlZE5vZGVzLnNvcnQoKF9hOiBQYXRoaW5nTm9kZSwgX2I6IFBhdGhpbmdOb2RlKSA9PiBfYS5kaXN0YW5jZSAtIF9iLmRpc3RhbmNlKTtcclxuICAgICAgICBsZXQgY3VycmVudE5vZGU6IFBhdGhpbmdOb2RlID0gdW52aXNpdGVkTm9kZXMuc2hpZnQoKTtcclxuICAgICAgICBpZiAoY3VycmVudE5vZGUud2F5cG9pbnQgPT09IF9lbmQpIHJldHVybiB0aGlzLnBhdGhpbmdOb2RlVG9QYXRoKGN1cnJlbnROb2RlKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgY29uIG9mIGN1cnJlbnROb2RlLndheXBvaW50LmNvbm5lY3Rpb25zKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuaXNDb25uZWN0aW9uVXNhYmxlKGNvbikpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgbGV0IGVuZE5vZGU6IFBhdGhpbmdOb2RlID0gdW52aXNpdGVkTm9kZXMuZmluZChfbiA9PiBfbi53YXlwb2ludCA9PT0gY29uLmVuZCk7XHJcbiAgICAgICAgICBpZiAoIWVuZE5vZGUpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgbGV0IG5ld0Rpc3RhbmNlOiBudW1iZXIgPSBjdXJyZW50Tm9kZS5kaXN0YW5jZSArIHRoaXMuY2FsY3VsYXRlQ29ubmVjdGlvbkNvc3QoY29uKTtcclxuICAgICAgICAgIGlmIChuZXdEaXN0YW5jZSA+PSBlbmROb2RlLmRpc3RhbmNlKSBjb250aW51ZTtcclxuICAgICAgICAgIGVuZE5vZGUuZGlzdGFuY2UgPSBuZXdEaXN0YW5jZTtcclxuICAgICAgICAgIGVuZE5vZGUucHJldmlvdXMgPSBjdXJyZW50Tm9kZTtcclxuICAgICAgICAgIGVuZE5vZGUucHJldmlvdXNDb25uZWN0aW9uID0gY29uO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3Mgd2hldGhlciBhIGNvbm5lY3Rpb24gaXMgdXNhYmxlIGJ5IHRoaXMgc3BlY2lmaWMgd2Fsa2VyLlxyXG4gICAgICogKipBbHdheXMgcmV0dXJucyB0cnVlLCB1bmxlc3Mgb3ZlcndyaXR0ZW4gaW4gYSBjdXN0b20gV2Fsa2VyIHN1YmNsYXNzLioqXHJcbiAgICAgKiBDYW4gYmUgdXNlZCB0byBpbmZsdWVuY2UgdGhlIHBhdGhmaW5kaW5nIGFsZ29yaXRobSBmb3IgY3VzdG9tIHdheXBvaW50IC8gY29ubmVjdGlvbiBzeXN0ZW1zLlxyXG4gICAgICogQHBhcmFtIF9jb25uZWN0aW9uIEEgY29ubmVjdGlvbiB0byBjaGVja1xyXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY29ubmVjdGlvbiBpcyB1c2FibGUgYnkgdGhpcyB3YWxrZXIsIGZhbHNlIGlmIG5vdFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaXNDb25uZWN0aW9uVXNhYmxlKF9jb25uZWN0aW9uOiBDb25uZWN0aW9uKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgbmV3IGRpc3RhbmNlIGJhc2VkIG9uIGEgY29ubmVjdGlvbi5cclxuICAgICAqICoqQWx3YXlzIHJldHVybnMgdGhlIHBsYWluIGNvbm5lY3Rpb25zIGNvc3QgdW5sZXNzIG92ZXJ3cml0dGVuIGluIGEgY3VzdG9tIHdhbGtlciBzdWJjbGFzcy4qKlxyXG4gICAgICogQ2FuIGJlIHVzZWQgdG8gaW5mbHVlbmNlIHRoZSBwYXRoZmluZGluZyBhbGdvcml0aG0gZm9yIGN1c3RvbSB3YXlwb2ludCAvIGNvbm5lY3Rpb24gc3lzdGVtcy5cclxuICAgICAqIEBwYXJhbSBfY29ubmVjdGlvbiBBIGNvbm5lY3Rpb24gdG8gY2hlY2tcclxuICAgICAqIEByZXR1cm5zIHRoZSBhbW91bnQgb2YgY29zdCBhIGNvbm5lY3Rpb24gZW5jdXJzIHRvIHRoZSBjdXJyZW50IHdhbGtlciBvciAwIGlmIGNvc3QgaXMgbmVnYXRpdmUuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBjYWxjdWxhdGVDb25uZWN0aW9uQ29zdChfY29ubmVjdGlvbjogQ29ubmVjdGlvbik6IG51bWJlciB7XHJcbiAgICAgIGlmIChfY29ubmVjdGlvbi5jb3N0ID49IDApXHJcbiAgICAgICAgcmV0dXJuIF9jb25uZWN0aW9uLmNvc3Q7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGF0aGluZ05vZGVUb1BhdGgoX25vZGU6IFBhdGhpbmdOb2RlKTogUGF0aGluZ05vZGVbXSB7XHJcbiAgICAgIGxldCBwYXRoOiBQYXRoaW5nTm9kZVtdID0gW107XHJcbiAgICAgIGlmICghX25vZGUpIHJldHVybiBwYXRoO1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgcGF0aC5wdXNoKF9ub2RlKTtcclxuICAgICAgICBfbm9kZSA9IF9ub2RlLnByZXZpb3VzO1xyXG4gICAgICB9IHdoaWxlIChfbm9kZT8ucHJldmlvdXMpO1xyXG4gICAgICByZXR1cm4gcGF0aC5yZXZlcnNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByb3RhdGVUb3dhcmRzKF93YXlwb2ludDogV2F5cG9pbnQpOiB2b2lkIHtcclxuICAgICAgbGV0IG10eExvb2s6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5MT09LX0FUKHRoaXMubm9kZS5tdHhXb3JsZC50cmFuc2xhdGlvbiwgX3dheXBvaW50Lm10eFdvcmxkLnRyYW5zbGF0aW9uKTtcclxuICAgICAgdGhpcy5ub2RlLm10eExvY2FsLnJvdGF0aW9uID0gbXR4TG9vay5yb3RhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAjaGFuZGxlQXR0YWNoKCk6IHZvaWQge1xyXG4gICAgICBMb29wLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTE9PUF9GUkFNRSwgdGhpcy5tb3ZpbmcuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2hhbmRsZURldGFjaCgpOiB2b2lkIHtcclxuICAgICAgTG9vcC5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkxPT1BfRlJBTUUsIHRoaXMubW92aW5nLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGludGVybmFsIGludGVyZmFjZSB0byBtYW5hZ2UgcGF0aGluZyBkYXRhIGluc2lkZSB0aGUgV2Fsa2VyXHJcbiAgICovXHJcbiAgaW50ZXJmYWNlIFBhdGhpbmdOb2RlIHtcclxuICAgIHdheXBvaW50OiBXYXlwb2ludDtcclxuICAgIGRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICBwcmV2aW91czogUGF0aGluZ05vZGU7XHJcbiAgICBwcmV2aW91c0Nvbm5lY3Rpb246IENvbm5lY3Rpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbiBpbnRlcm5hbCBpbnRlcmZhY2UgdG8gbWFuYWdlIHRoZSBkYXRhIG9mIHRoZSBjdXJyZW50bHkgd2Fsa2VkIHBhdGhcclxuICAgKi9cclxuICBpbnRlcmZhY2UgV2Fsa0RhdGEge1xyXG4gICAgcGF0aDogUGF0aGluZ05vZGVbXTtcclxuICAgIHRvdGFsUHJvZ3Jlc3M6IG51bWJlcjtcclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogVW5pZmllcyBXYXlwb2ludHMgb2YgdGhlIHBhdGhpbmcgYWxnb3JpdGhtc1xyXG4gICAqIEBhdXRob3IgTHVrYXMgU2NoZXVlcmxlLCBIRlUsIDIwMjRcclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIFdheXBvaW50IHtcclxuICAgIGNvbm5lY3Rpb25zOiBDb25uZWN0aW9uW107XHJcbiAgICBtdHhMb2NhbDogTWF0cml4NHg0O1xyXG4gICAgbXR4V29ybGQ6IE1hdHJpeDR4NDtcclxuICAgIGlzQWN0aXZlOiBib29sZWFuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhIHBvc2l0aW9uIHRoYXQgYSB7QGxpbmsgQ29tcG9uZW50V2Fsa2VyfSBjYW4gdXNlIGFzIGEgdGFyZ2V0IHBvaW50LlxyXG4gICAqIEltcGxlbWVudHMge0BsaW5rIFdheXBvaW50fS5cclxuICAgKiBSZWdpc3RlcnMgaXRzZWxmIHRvIGEgc3RhdGljIGxpc3Qgb2YgYWxsIGF2YWlsYWJsZSB3YXlwb2ludHNcclxuICAgKiBAYXV0aG9yIEx1a2FzIFNjaGV1ZXJsZSwgSEZVLCAyMDI0XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudFdheXBvaW50IGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgV2F5cG9pbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKHRoaXMpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5ICN3YXlwb2ludHM6IENvbXBvbmVudFdheXBvaW50W10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgbXR4TG9jYWw6IE1hdHJpeDR4NDtcclxuXHJcbiAgICAjY29ubmVjdGlvbnM6IENvbm5lY3Rpb25bXTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX210eEluaXQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpLCBfY29ubmVjdGlvbnM6IENvbm5lY3Rpb25bXSA9IFtdKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuI2Nvbm5lY3Rpb25zID0gX2Nvbm5lY3Rpb25zO1xyXG4gICAgICB0aGlzLm10eExvY2FsID0gX210eEluaXQ7XHJcbiAgICAgIHRoaXMuc2luZ2xldG9uID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoUHJvamVjdC5tb2RlID09IE1PREUuRURJVE9SKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfQURELCB0aGlzLiNoYW5kbGVBdHRhY2guYmluZCh0aGlzKSk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfUkVNT1ZFLCB0aGlzLiNoYW5kbGVEZXRhY2guYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFsbCB0aGUgd2F5cG9pbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2FkZWQgaW4gdGhlIHNjZW5lLiAqKkRvIG5vdCBlZGl0LCB0cmVhdCBhcyByZWFkb25seSEqKiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgd2F5cG9pbnRzKCk6IENvbXBvbmVudFdheXBvaW50W10ge1xyXG4gICAgICByZXR1cm4gQ29tcG9uZW50V2F5cG9pbnQuI3dheXBvaW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgc2hvcnRoYW5kIHRvIGNyZWF0ZSBhIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28ge0BsaW5rIENvbXBvbmVudFdheXBvaW50fXNcclxuICAgICAqIEBwYXJhbSBfc3RhcnQgVGhlIHtAbGluayBDb21wb25lbnRXYXlwb2ludH0gZnJvbSB3aGljaCB0byBzdGFydCB0aGUgY29ubmVjdGlvbi5cclxuICAgICAqIEBwYXJhbSBfZW5kIFRoZSB7QGxpbmsgQ29tcG9uZW50V2F5cG9pbnR9IHRvIHdoaWNoIHRoZSBjb25uZWN0aW9uIGxlYWRzLlxyXG4gICAgICogQHBhcmFtIF9jb3N0IFRoZSBjb3N0IG9mIHRoZSBjb25uZWN0aW9uLiBUaGUgaGlnaGVyIHRoZSB2YWx1ZSwgdGhlIGxlc3MgbGlrZWx5IGl0IGlzIHRvIGJlIHRha2VuLiBDYW5ub3QgYmUgbmVnYXRpdmUuXHJcbiAgICAgKiBAcGFyYW0gX3NwZWVkTW9kaWZpZXIgSG93IGZhc3QgdGhlIGNvbm5lY3Rpb24gY2FuIGJlIHdhbGtlZCBvbi4gRGVmYXVsdHMgdG8gMVxyXG4gICAgICogQHBhcmFtIF9ib3RoV2F5cyBJZiB0cnVlLCBjcmVhdGVzIGEgY29ubmVjdGlvbiBpbiBib3RoIGRpcmVjdGlvbnMuIERlZmF1bHQ6IGZhbHNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkQ29ubmVjdGlvbihfc3RhcnQ6IENvbXBvbmVudFdheXBvaW50LCBfZW5kOiBDb21wb25lbnRXYXlwb2ludCwgX2Nvc3Q6IG51bWJlciwgX3NwZWVkTW9kaWZpZXI6IG51bWJlciA9IDEsIF9ib3RoV2F5czogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICAgIF9zdGFydC5hZGRDb25uZWN0aW9uKHsgY29zdDogX2Nvc3QsIGVuZDogX2VuZCwgc3RhcnQ6IF9zdGFydCwgc3BlZWRNb2RpZmllcjogX3NwZWVkTW9kaWZpZXIgfSk7XHJcbiAgICAgIGlmIChfYm90aFdheXMpXHJcbiAgICAgICAgX2VuZC5hZGRDb25uZWN0aW9uKHsgY29zdDogX2Nvc3QsIGVuZDogX3N0YXJ0LCBzdGFydDogX2VuZCwgc3BlZWRNb2RpZmllcjogX3NwZWVkTW9kaWZpZXIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY29ubmVjdGlvbnMoKTogQ29ubmVjdGlvbltdIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2Nvbm5lY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUaGUgY3VycmVudCB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgV2F5cG9pbnQuIFJldHVybnMgYSBuZXcgTWF0cml4IHdpdGhvdXQgY29ubmVjdGlvbiB0byB0aGUgV2F5cG9pbnQgKi9cclxuICAgIHB1YmxpYyBnZXQgbXR4V29ybGQoKTogTWF0cml4NHg0IHtcclxuICAgICAgcmV0dXJuIE1hdHJpeDR4NC5QUk9EVUNUKHRoaXMubXR4TG9jYWwsIHRoaXMubm9kZS5tdHhXb3JsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFkZHMgYSBuZXcge0BsaW5rIENvbm5lY3Rpb259IHRvIHRoaXMgd2F5cG9pbnQgKi9cclxuICAgIHB1YmxpYyBhZGRDb25uZWN0aW9uKF9jb25uZWN0aW9uOiBDb25uZWN0aW9uKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI2Nvbm5lY3Rpb25zLnB1c2goX2Nvbm5lY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBSZW1vdmVzIGEge0BsaW5rIENvbm5lY3Rpb259IGZyb20gdGhpcyB3YXlwb2ludCAqL1xyXG4gICAgcHVibGljIHJlbW92ZUNvbm5lY3Rpb24oX2Nvbm5lY3Rpb246IENvbm5lY3Rpb24pOiB2b2lkIHtcclxuICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSB0aGlzLiNjb25uZWN0aW9ucy5pbmRleE9mKF9jb25uZWN0aW9uKTtcclxuICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuO1xyXG4gICAgICB0aGlzLiNjb25uZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKCksXHJcbiAgICAgICAgbWF0cml4OiB0aGlzLm10eExvY2FsLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIGNvbm5lY3Rpb25zOiB0aGlzLiNjb25uZWN0aW9ucy5tYXAoX2NvbiA9PiB7XHJcbiAgICAgICAgICBsZXQgY29ubmVjdGlvbjogU2VyaWFsaXplZENvbm5lY3Rpb24gPSB7IGNvc3Q6IF9jb24uY29zdCwgZW5kOiBfY29uLmVuZCwgc3BlZWRNb2RpZmllcjogX2Nvbi5zcGVlZE1vZGlmaWVyIH07XHJcbiAgICAgICAgICBpZiAoY29ubmVjdGlvbi5lbmQgaW5zdGFuY2VvZiBDb21wb25lbnRXYXlwb2ludCkge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLmVuZCA9IE5vZGUuUEFUSF9GUk9NX1RPKHRoaXMsIGNvbm5lY3Rpb24uZW5kKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMubXR4TG9jYWwuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ubWF0cml4KTtcclxuICAgICAgY29uc3QgaG5kTm9kZURlc2VyaWFsaXplZDogRXZlbnRMaXN0ZW5lclVuaWZpZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy4jY29ubmVjdGlvbnMgPSBfc2VyaWFsaXphdGlvbi5jb25uZWN0aW9ucy5tYXAoKF9jb246IFNlcmlhbGl6ZWRDb25uZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY29ubmVjdGlvbjogQ29ubmVjdGlvbiA9IHsgY29zdDogX2Nvbi5jb3N0LCBlbmQ6IHRoaXMuc2VyaWFsaXplZFdheXBvaW50VG9XYXlwb2ludChfY29uLmVuZCksIHNwZWVkTW9kaWZpZXI6IF9jb24uc3BlZWRNb2RpZmllciwgc3RhcnQ6IHRoaXMgfTtcclxuICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCwgaG5kTm9kZURlc2VyaWFsaXplZCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCwgaG5kTm9kZURlc2VyaWFsaXplZCk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdHaXptb3MoKTogdm9pZCB7XHJcbiAgICAgIGxldCBzY2FsZVZlY3RvcjogVmVjdG9yMyA9IFZlY3RvcjMuU0NBTEUoVmVjdG9yMy5PTkUoKSwgMC4xKTtcclxuICAgICAgbGV0IG10eDogTWF0cml4NHg0ID0gdGhpcy5tdHhXb3JsZDtcclxuICAgICAgR2l6bW9zLmRyYXdTcGhlcmUoTWF0cml4NHg0LkNPTVBPU0lUSU9OKG10eC50cmFuc2xhdGlvbiwgVmVjdG9yMy5aRVJPKCksIHNjYWxlVmVjdG9yKSwgQ29sb3IuQ1NTKFwib3JhbmdlXCIpKTtcclxuICAgICAgLy8gcmV0dXJuO1xyXG4gICAgICBsZXQgbGluZXM6IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBjb25uZWN0aW9uIG9mIHRoaXMuY29ubmVjdGlvbnMpIHtcclxuICAgICAgICAvLyBpZiB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBhcmUgb24gdGhlIHNhbWUgcG9pbnQsIGRvbid0IGRyYXcgbGluZS5cclxuICAgICAgICBsZXQgdG1wTXR4OiBNYXRyaXg0eDQgPSBjb25uZWN0aW9uLmVuZC5tdHhXb3JsZC5jbG9uZTtcclxuICAgICAgICBsZXQgZGlyZWN0aW9uVmVjdG9yOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKG10eC50cmFuc2xhdGlvbiwgdG1wTXR4LnRyYW5zbGF0aW9uKTtcclxuICAgICAgICBpZiAoZGlyZWN0aW9uVmVjdG9yLm1hZ25pdHVkZVNxdWFyZWQgPT09IDApIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAvLyBpZiBvbmUgb2YgdGhlIHdheXBvaW50cyBpcyBpbmFjdGl2ZSwgZG9uJ3QgZHJhdyBnaXptb3NcclxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZW5kLmlzQWN0aXZlIHx8ICFjb25uZWN0aW9uLnN0YXJ0LmlzQWN0aXZlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgLy8gYWN0dWFsIGxpbmVcclxuICAgICAgICBsaW5lcy5wdXNoKG10eC50cmFuc2xhdGlvbik7XHJcbiAgICAgICAgbGluZXMucHVzaCh0bXBNdHgudHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICAvLyBhcnJvdyBoZWFkc1xyXG4gICAgICAgIGxldCBkaXJlY3Rpb25NdHg6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5MT09LX0lOKHRtcE10eC50cmFuc2xhdGlvbiwgZGlyZWN0aW9uVmVjdG9yKTtcclxuICAgICAgICBkaXJlY3Rpb25NdHguc2NhbGUoc2NhbGVWZWN0b3IpO1xyXG4gICAgICAgIEdpem1vcy5kcmF3V2lyZUNvbmUoZGlyZWN0aW9uTXR4LCBDb2xvci5DU1MoXCJvcmFuZ2VcIikpO1xyXG4gICAgICB9XHJcbiAgICAgIEdpem1vcy5kcmF3TGluZXMobGluZXMsIE1hdHJpeDR4NC5JREVOVElUWSgpLCBDb2xvci5DU1MoXCJvcmFuZ2VcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBBbiBpbnRlcm5hbCBmdW5jdGlvbiB0byBoZWxwIHRoZSBkZXNlcmlhbGl6YXp0aW9uIHByb2Nlc3MuICovXHJcbiAgICBwcml2YXRlIHNlcmlhbGl6ZWRXYXlwb2ludFRvV2F5cG9pbnQoX3BvaW50OiBzdHJpbmcgfCBXYXlwb2ludCk6IFdheXBvaW50IHtcclxuICAgICAgaWYgKHR5cGVvZiBfcG9pbnQgIT09IFwic3RyaW5nXCIpIHJldHVybiBfcG9pbnQ7XHJcbiAgICAgIHJldHVybiBOb2RlLkZJTkQodGhpcywgX3BvaW50KSBhcyBDb21wb25lbnRXYXlwb2ludDtcclxuICAgIH1cclxuXHJcbiAgICAjaGFuZGxlQXR0YWNoKCk6IHZvaWQge1xyXG4gICAgICBDb21wb25lbnRXYXlwb2ludC4jd2F5cG9pbnRzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgI2hhbmRsZURldGFjaCgpOiB2b2lkIHtcclxuICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSBDb21wb25lbnRXYXlwb2ludC4jd2F5cG9pbnRzLmluZGV4T2YodGhpcyk7XHJcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgQ29tcG9uZW50V2F5cG9pbnQuI3dheXBvaW50cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogRGVmaW5lcyBhIENvbm5lY3Rpb24gaW4gdGhlIHdheSBpdCdzIHNlcmlhbGl6ZWQgaW4gcmVzb3VyY2VzIEBpbnRlcm5hbCAqL1xyXG4gIGludGVyZmFjZSBTZXJpYWxpemVkQ29ubmVjdGlvbiB7XHJcbiAgICBlbmQ6IFdheXBvaW50IHwgc3RyaW5nO1xyXG4gICAgY29zdDogbnVtYmVyO1xyXG4gICAgc3BlZWRNb2RpZmllcjogbnVtYmVyO1xyXG4gIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBIGRpcmVjdGVkIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28gd2F5cG9pbnRzXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAyNFxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvbiB7XHJcbiAgICAvKiogVGhlIHN0YXJ0IC8gb3JpZ2luIHdheXBvaW50IG9mIHRoaXMgY29ubmVjdGlvbi4gKi9cclxuICAgIHN0YXJ0OiBXYXlwb2ludDtcclxuICAgIC8qKiBUaGUgZW5kIC8gdGFyZ2V0IHdheXBvaW50IG9mIHRoaXMgY29ubmVjdGlvbi4gKi9cclxuICAgIGVuZDogV2F5cG9pbnQ7XHJcbiAgICAvKiogVGhlIGNvc3Qgb2YgdGhlIGNvbm5lY3Rpb24sIHRoZSBoaWdoZXIgdGhlIGxlc3MgbGlrZWx5IHRvIGJlIHRha2VuLiBDYW5ub3QgYmUgbmVnYXRpdmUuICovXHJcbiAgICBjb3N0OiBudW1iZXI7XHJcbiAgICAvKiogTW9kaWZpZXMgdGhlIHNwZWVkIHRoYXQgYSB3YWxrZXIgY2FuIHdhbGsgcGFzdCB0aGlzIGNvbm5lY3Rpb24gYnkgbXVsdGlwbHlpbmcgdGhlIHNwZWVkIHdpdGggdGhpcyB2YWx1ZS4gTmVlZHMgdG8gYmUgPjAgKi9cclxuICAgIHNwZWVkTW9kaWZpZXI6IG51bWJlcjtcclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBhdXRvbWF0aWMgYWRqdXN0bWVudCBvZiB0aGUgY29sbGlkZXJcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBCT0RZX0lOSVQge1xyXG4gICAgLyoqIENvbGxpZGVyIHVzZXMgdGhlIHBpdm90IG9mIHRoZSBtZXNoIGZvciBpbml0aWxpYWxpemF0aW9uICovXHJcbiAgICBUT19NRVNILFxyXG4gICAgLyoqIENvbGxpZGVyIHVzZXMgdGhlIHRyYW5zZm9ybSBvZiB0aGUgbm9kZSBmb3IgaW5pdGlsaWFsaXphdGlvbiAqL1xyXG4gICAgVE9fTk9ERSxcclxuICAgIC8qKiBDb2xsaWRlciB1c2VzIGl0cyBvd24gcGl2b3QgZm9yIGluaXRpbGlhbGl6YXRpb24gKi9cclxuICAgIFRPX1BJVk9UXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBY3RzIGFzIHRoZSBwaHlzaWNhbCByZXByZXNlbnRhdGlvbiBvZiB0aGUge0BsaW5rIE5vZGV9IGl0J3MgYXR0YWNoZWQgdG8uXHJcbiAgICogSXQncyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBGVURHRSByZW5kZXJlZCB3b3JsZCBhbmQgdGhlIFBoeXNpY3Mgd29ybGQuXHJcbiAgICogRm9yIHRoZSBwaHlzaWNzIHRvIGNvcnJlY3RseSBnZXQgdGhlIHRyYW5zZm9ybWF0aW9ucyByb3RhdGlvbnMgbmVlZCB0byBiZSBhcHBsaWVkIHdpdGggZnJvbSBsZWZ0ID0gdHJ1ZS5cclxuICAgKiBPciByb3RhdGlvbnMgbmVlZCB0byBoYXBwZW4gYmVmb3JlIHNjYWxpbmcuXHJcbiAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUsIDIwMjAgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRSaWdpZGJvZHkgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFJpZ2lkYm9keSk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBtYXBCb2R5VHlwZTogeyBbdHlwZTogbnVtYmVyXTogbnVtYmVyIH0gPSAodHlwZW9mIE9JTU8gPT0gXCJ1bmRlZmluZWRcIikgP1xyXG4gICAgICB7XHJcbiAgICAgICAgW0JPRFlfVFlQRS5EWU5BTUlDXTogQk9EWV9UWVBFLkRZTkFNSUMsIFtCT0RZX1RZUEUuU1RBVElDXTogQk9EWV9UWVBFLlNUQVRJQywgW0JPRFlfVFlQRS5LSU5FTUFUSUNdOiBCT0RZX1RZUEUuS0lORU1BVElDXHJcbiAgICAgIH0gOiB7XHJcbiAgICAgICAgW0JPRFlfVFlQRS5EWU5BTUlDXTogT0lNTy5SaWdpZEJvZHlUeXBlLkRZTkFNSUMsIFtCT0RZX1RZUEUuU1RBVElDXTogT0lNTy5SaWdpZEJvZHlUeXBlLlNUQVRJQywgW0JPRFlfVFlQRS5LSU5FTUFUSUNdOiBPSU1PLlJpZ2lkQm9keVR5cGUuS0lORU1BVElDXHJcbiAgICAgIH07XHJcblxyXG4gICAgLyoqIFRyYW5zZm9ybWF0aW9uIG9mIHRoZSBjb2xsaWRlciByZWxhdGl2ZSB0byB0aGUgbm9kZSdzIHRyYW5zZm9ybS4gT25jZSBzZXQgbW9zdGx5IHJlbWFpbnMgY29uc3RhbnQuIFxyXG4gICAgICogSWYgYWx0ZXJlZCwge0BsaW5rIGlzSW5pdGlhbGl6ZWR9IG11c3QgYmUgcmVzZXQgdG8gZmFsc2UgdG8gcmVjcmVhdGUgdGhlIGNvbGxpZGVyIGluIHRoZSBuZXh0IHtAbGluayBSZW5kZXIucHJlcGFyZX1cclxuICAgICAqL1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBWZXJ0aWNlcyB0aGF0IGJ1aWxkIGEgY29udmV4IG1lc2ggKGZvcm0gdGhhdCBpcyBpbiBpdHNlbGYgY2xvc2VkKS4gTmVlZHMgdG8gc2V0IGluIHRoZSBjb25zdHJ1Y3Rpb24gb2YgdGhlIHJiIGlmIG5vbmUgb2YgdGhlIHN0YW5kYXJkIGNvbGxpZGVycyBpcyB1c2VkLiBcclxuICAgICAqIFVudGVzdGVkIGFuZCBub3QgeWV0IGZ1bGx5IHN1cHBvcnRlZCBieSBzZXJpYWxpemF0aW9uIGFuZCBtdXRhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnZleE1lc2g6IEZsb2F0MzJBcnJheSA9IG51bGw7XHJcblxyXG4gICAgLyoqIENvbGxpc2lvbnMgd2l0aCByaWdpZGJvZGllcyBoYXBwZW5pbmcgdG8gdGhpcyBib2R5LCBjYW4gYmUgdXNlZCB0byBidWlsZCBhIGN1c3RvbSBvbkNvbGxpc2lvblN0YXkgZnVuY3Rpb25hbGl0eS4gKi9cclxuICAgIHB1YmxpYyBjb2xsaXNpb25zOiBDb21wb25lbnRSaWdpZGJvZHlbXSA9IG5ldyBBcnJheSgpO1xyXG4gICAgLyoqIFRyaWdnZXJzIHRoYXQgYXJlIGN1cnJlbnRseSB0cmlnZ2VyaW5nIHRoaXMgYm9keSAqL1xyXG4gICAgcHVibGljIHRyaWdnZXJpbmdzOiBDb21wb25lbnRSaWdpZGJvZHlbXSA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFRoZSBncm91cHMgdGhpcyBvYmplY3QgY29sbGlkZXMgd2l0aC4gR3JvdXBzIG11c3QgYmUgd3JpdGVuIGluIGZvcm0gb2ZcclxuICAgICAqICBlLmcuIGNvbGxpc2lvbk1hc2sgPSB7QGxpbmsgQ09MTElTSU9OX0dST1VQLkRFRkFVTFR9IHwge0BsaW5rIENPTExJU0lPTl9HUk9VUH0uLi4uIGFuZCBzbyBvbiB0byBjb2xsaWRlIHdpdGggbXVsdGlwbGUgZ3JvdXBzLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbGxpc2lvbk1hc2s6IG51bWJlcjtcclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBBdXRvbWF0aWMgYWRqdXN0bWVudCBvZiB0aGUgcGl2b3Qgd2hlbiB7QGxpbmsgUmVuZGVyLnByZXBhcmV9IGlzIGNhbGxlZCBhY2NvcmRpbmcgdG8ge0BsaW5rIEJPRFlfSU5JVH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemF0aW9uOiBCT0RZX0lOSVQgPSBCT0RZX0lOSVQuVE9fUElWT1Q7XHJcbiAgICAvKiogTWFya3MgaWYgY29sbGlkZXIgd2FzIGluaXRpYWxpemVkLiBSZXNldCB0byBmYWxzZSB0byBpbml0aWFsaXplIGFnYWluIGUuZy4gYWZ0ZXIgbWFuaXB1bGF0aW9uIG9mIG10eFBpdm90ICovXHJcbiAgICBwdWJsaWMgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBJRCB0byByZWZlcmVuY2UgdGhpcyBzcGVjaWZpYyBDb21wb25lbnRSaWdpZGJvZHkgKi9cclxuICAgICNpZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvL1ByaXZhdGUgaW5mb3JtYXRpb25zIC0gTW9zdGx5IE9pbW9QaHlzaWNzIHZhcmlhYmxlcyB0aGF0IHNob3VsZCBub3QgYmUgZXhwb3NlZCB0byB0aGUgRlVER0UgVXNlciBhbmQgbWFuaXB1bGF0ZWQgYnkgdGhlbVxyXG4gICAgI2NvbGxpZGVyOiBPSU1PLlNoYXBlO1xyXG4gICAgI2NvbGxpZGVySW5mbzogT0lNTy5TaGFwZUNvbmZpZztcclxuICAgICNjb2xsaXNpb25Hcm91cDogQ09MTElTSU9OX0dST1VQID0gQ09MTElTSU9OX0dST1VQLkRFRkFVTFQ7XHJcbiAgICAjdHlwZUNvbGxpZGVyOiBDT0xMSURFUl9UWVBFID0gQ09MTElERVJfVFlQRS5DVUJFO1xyXG5cclxuICAgICNyaWdpZGJvZHk6IE9JTU8uUmlnaWRCb2R5O1xyXG4gICAgI3JpZ2lkYm9keUluZm86IE9JTU8uUmlnaWRCb2R5Q29uZmlnID0gbmV3IE9JTU8uUmlnaWRCb2R5Q29uZmlnKCk7XHJcbiAgICAjdHlwZUJvZHk6IEJPRFlfVFlQRSA9IEJPRFlfVFlQRS5EWU5BTUlDO1xyXG5cclxuICAgICNtYXNzRGF0YTogT0lNTy5NYXNzRGF0YSA9IG5ldyBPSU1PLk1hc3NEYXRhKCk7XHJcbiAgICAjcmVzdGl0dXRpb246IG51bWJlcjtcclxuICAgICNmcmljdGlvbjogbnVtYmVyO1xyXG4gICAgI2RhbXBpbmdMaW5lYXI6IG51bWJlciA9IDAuMTtcclxuICAgICNkYW1waW5nQW5ndWxhcjogbnVtYmVyID0gMC4xO1xyXG4gICAgI2VmZmVjdFJvdGF0aW9uOiBWZWN0b3IzID0gVmVjdG9yMy5PTkUoKTtcclxuICAgICNlZmZlY3RHcmF2aXR5OiBudW1iZXIgPSAxO1xyXG4gICAgI2lzVHJpZ2dlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgI210eFBpdm90VW5zY2FsZWQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgI210eFBpdm90SW52ZXJzZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcblxyXG4gICAgI2NhbGxiYWNrczogT0lNTy5Db250YWN0Q2FsbGJhY2s7IC8vQ2FsbGJhY2sgTWV0aG9kcyB3aGVuIHdpdGhpbiB0aGUgb2ltb1N5c3RlbSBhIGV2ZW50IGlzIGhhcHBlbmluZ1xyXG5cclxuICAgIC8vICNwaHlzaWNzOiBQaHlzaWNzOyAvL1RPRE86IGtlZXAgYSBwb2ludGVyIHRvIHRoZSBwaHlzaWNzIGluc3RhbmNlIHVzZWQgYnkgdGhpcyBjb21wb25lbnRcclxuXHJcbiAgICAvKiogQ3JlYXRpbmcgYSBuZXcgcmlnaWRib2R5IHdpdGggYSB3ZWlnaHQgaW4ga2csIGEgcGh5c2ljcyB0eXBlIChkZWZhdWx0ID0gZHluYW1pYyksIGEgY29sbGlkZXIgdHlwZSB3aGF0IHBoeXNpY2FsIGZvcm0gaGFzIHRoZSBjb2xsaWRlciwgdG8gd2hhdCBncm91cCBkb2VzIGl0IGJlbG9uZywgaXMgdGhlcmUgYSB0cmFuc2Zvcm0gTWF0cml4IHRoYXQgc2hvdWxkIGJlIHVzZWQsIGFuZCBpcyB0aGUgY29sbGlkZXIgZGVmaW5lZCBhcyBhIGdyb3VwIG9mIHBvaW50cyB0aGF0IHJlcHJlc2VudCBhIGNvbnZleCBtZXNoLiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9tYXNzOiBudW1iZXIgPSAxLCBfdHlwZTogQk9EWV9UWVBFID0gQk9EWV9UWVBFLkRZTkFNSUMsIF9jb2xsaWRlclR5cGU6IENPTExJREVSX1RZUEUgPSBDT0xMSURFUl9UWVBFLkNVQkUsIF9ncm91cDogQ09MTElTSU9OX0dST1VQID0gUGh5c2ljcy5zZXR0aW5ncy5kZWZhdWx0Q29sbGlzaW9uR3JvdXAsIF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IG51bGwsIF9jb252ZXhNZXNoOiBGbG9hdDMyQXJyYXkgPSBudWxsKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9tYXNzLCBfdHlwZSwgX2NvbGxpZGVyVHlwZSwgX2dyb3VwLCBfbXR4VHJhbnNmb3JtLCBfY29udmV4TWVzaCk7XHJcblxyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX0FERCwgdGhpcy5obmRFdmVudCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfUkVNT1ZFLCB0aGlzLmhuZEV2ZW50KTtcclxuICAgICAgLy8gdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk5PREVfREVTRVJJQUxJWkVELCB0aGlzLmhuZEV2ZW50KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBBY2Nlc3NvcnNcclxuICAgIHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBVc2VkIGZvciBjYWxjdWxhdGlvbiBvZiB0aGUgZ2VvbWV0cmljYWwgcmVsYXRpb25zaGlwIG9mIG5vZGUgYW5kIGNvbGxpZGVyIGJ5IHtAbGluayBSZW5kZXJ9Ki9cclxuICAgIHB1YmxpYyBnZXQgbXR4UGl2b3RJbnZlcnNlKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtdHhQaXZvdEludmVyc2U7XHJcbiAgICB9XHJcbiAgICAvKiogVXNlZCBmb3IgY2FsY3VsYXRpb24gb2YgdGhlIGdlb21ldHJpY2FsIHJlbGF0aW9uc2hpcCBvZiBub2RlIGFuZCBjb2xsaWRlciBieSB7QGxpbmsgUmVuZGVyfSovXHJcbiAgICBwdWJsaWMgZ2V0IG10eFBpdm90VW5zY2FsZWQoKTogTWF0cml4NHg0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI210eFBpdm90VW5zY2FsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJldHJpZXZlIHRoZSBib2R5IHR5cGUuIFNlZSB7QGxpbmsgQk9EWV9UWVBFfSAqL1xyXG4gICAgcHVibGljIGdldCB0eXBlQm9keSgpOiBCT0RZX1RZUEUge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdHlwZUJvZHk7XHJcbiAgICB9XHJcbiAgICAvKiogU2V0IHRoZSBib2R5IHR5cGUuIFNlZSB7QGxpbmsgQk9EWV9UWVBFfSAqL1xyXG4gICAgcHVibGljIHNldCB0eXBlQm9keShfdmFsdWU6IEJPRFlfVFlQRSkge1xyXG4gICAgICB0aGlzLiN0eXBlQm9keSA9IF92YWx1ZTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldFR5cGUoQ29tcG9uZW50UmlnaWRib2R5Lm1hcEJvZHlUeXBlW3RoaXMuI3R5cGVCb2R5XSk7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRNYXNzRGF0YSh0aGlzLiNtYXNzRGF0YSk7IC8vaGF2ZSB0byByZXNldCBtYXNzIGFmdGVyIGNoYW5naW5nIHRoZSB0eXBlLCBzaW5jZSBPaW1vIGlzIGhhbmRsaW5nIG1hc3MgaW50ZXJuYWxseSB3cm9uZyB3aGVuIHN3aXRjaGluZyB0eXBlc1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUaGUgc2hhcGUgdGhhdCByZXByZXNlbnRzIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHdvcmxkLiBEZWZhdWx0IGlzIGEgQ3ViZS4gKi9cclxuICAgIHB1YmxpYyBnZXQgdHlwZUNvbGxpZGVyKCk6IENPTExJREVSX1RZUEUge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdHlwZUNvbGxpZGVyO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCB0eXBlQ29sbGlkZXIoX3ZhbHVlOiBDT0xMSURFUl9UWVBFKSB7XHJcbiAgICAgIGlmIChfdmFsdWUgIT0gdGhpcy4jdHlwZUNvbGxpZGVyICYmIHRoaXMuI3JpZ2lkYm9keSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy4jdHlwZUNvbGxpZGVyID0gX3ZhbHVlO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBjb2xsaXNpb24gZ3JvdXAgdGhpcyB7QGxpbmsgTm9kZX0gYmVsb25ncyB0byBpdCdzIHRoZSBkZWZhdWx0IGdyb3VwIG5vcm1hbGx5IHdoaWNoIG1lYW5zIGl0IHBoeXNpY2FsbHkgY29sbGlkZXMgd2l0aCBldmVyeSBncm91cCBiZXNpZGVzIHRyaWdnZXIuICovXHJcbiAgICBwdWJsaWMgZ2V0IGNvbGxpc2lvbkdyb3VwKCk6IENPTExJU0lPTl9HUk9VUCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjb2xsaXNpb25Hcm91cDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgY29sbGlzaW9uR3JvdXAoX3ZhbHVlOiBDT0xMSVNJT05fR1JPVVApIHtcclxuICAgICAgdGhpcy4jY29sbGlzaW9uR3JvdXAgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLiNyaWdpZGJvZHkgIT0gbnVsbClcclxuICAgICAgICB0aGlzLiNyaWdpZGJvZHkuZ2V0U2hhcGVMaXN0KCkuc2V0Q29sbGlzaW9uR3JvdXAodGhpcy4jY29sbGlzaW9uR3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBNYXJraW5nIHRoZSBCb2R5IGFzIGEgdHJpZ2dlciB0aGVyZWZvcmUgbm90IGluZmx1ZW5jaW5nIHRoZSBjb2xsaXNpb24gc3lzdGVtIGJ1dCBvbmx5IHNlbmRpbmcgdHJpZ2dlckV2ZW50cyAqL1xyXG4gICAgcHVibGljIGdldCBpc1RyaWdnZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNpc1RyaWdnZXI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGlzVHJpZ2dlcihfdmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgdGhpcy4jaXNUcmlnZ2VyID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5nZXRPaW1vUmlnaWRib2R5KCkgIT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuZ2V0T2ltb1JpZ2lkYm9keSgpLl9pc1RyaWdnZXIgPSB0aGlzLiNpc1RyaWdnZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHBoeXNpY2FsIHdlaWdodCBvZiB0aGUge0BsaW5rIE5vZGV9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWFzcygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcmlnaWRib2R5LmdldE1hc3MoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0dGluZyB0aGUgcGh5c2ljYWwgd2VpZ2h0IG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4ga2dcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtYXNzKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21hc3NEYXRhLm1hc3MgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLm5vZGUgIT0gbnVsbClcclxuICAgICAgICBpZiAodGhpcy4jcmlnaWRib2R5ICE9IG51bGwpXHJcbiAgICAgICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0TWFzc0RhdGEodGhpcy4jbWFzc0RhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBEcmFnIG9mIGxpbmVhciBtb3ZlbWVudC4gQSBCb2R5IGRvZXMgc2xvdyBkb3duIGV2ZW4gb24gYSBzdXJmYWNlIHdpdGhvdXQgZnJpY3Rpb24uICovXHJcbiAgICBwdWJsaWMgZ2V0IGRhbXBUcmFuc2xhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcmlnaWRib2R5LmdldExpbmVhckRhbXBpbmcoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZGFtcFRyYW5zbGF0aW9uKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2RhbXBpbmdMaW5lYXIgPSBfdmFsdWU7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRMaW5lYXJEYW1waW5nKF92YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIERyYWcgb2Ygcm90YXRpb24uICovXHJcbiAgICBwdWJsaWMgZ2V0IGRhbXBSb3RhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcmlnaWRib2R5LmdldEFuZ3VsYXJEYW1waW5nKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRhbXBSb3RhdGlvbihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNkYW1waW5nQW5ndWxhciA9IF92YWx1ZTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldEFuZ3VsYXJEYW1waW5nKF92YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBmYWN0b3IgdGhpcyByaWdpZGJvZHkgcmVhY3RzIHJvdGF0aW9ucyB0aGF0IGhhcHBlbiBpbiB0aGUgcGh5c2ljYWwgd29ybGQuIDAgdG8gbG9jayByb3RhdGlvbiB0aGlzIGF4aXMuICovXHJcbiAgICBwdWJsaWMgZ2V0IGVmZmVjdFJvdGF0aW9uKCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZWZmZWN0Um90YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGVmZmVjdFJvdGF0aW9uKF9lZmZlY3Q6IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy4jZWZmZWN0Um90YXRpb24gPSBfZWZmZWN0O1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0Um90YXRpb25GYWN0b3IobmV3IE9JTU8uVmVjMyh0aGlzLiNlZmZlY3RSb3RhdGlvbi54LCB0aGlzLiNlZmZlY3RSb3RhdGlvbi55LCB0aGlzLiNlZmZlY3RSb3RhdGlvbi56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBmYWN0b3IgdGhpcyByaWdpZGJvZHkgcmVhY3RzIHRvIHdvcmxkIGdyYXZpdHkuIERlZmF1bHQgPSAxIGUuZy4gMSo5LjgxIG0vcy4gKi9cclxuICAgIHB1YmxpYyBnZXQgZWZmZWN0R3Jhdml0eSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZWZmZWN0R3Jhdml0eTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZWZmZWN0R3Jhdml0eShfZWZmZWN0OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jZWZmZWN0R3Jhdml0eSA9IF9lZmZlY3Q7XHJcbiAgICAgIGlmICh0aGlzLiNyaWdpZGJvZHkgIT0gbnVsbCkgdGhpcy4jcmlnaWRib2R5LnNldEdyYXZpdHlTY2FsZSh0aGlzLiNlZmZlY3RHcmF2aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZnJpY3Rpb24gb2YgdGhlIHJpZ2lkYm9keSwgd2hpY2ggaXMgdGhlIGZhY3RvciBvZiBzbGlkaW5nIHJlc2lzdGFuY2Ugb2YgdGhpcyByaWdpZGJvZHkgb24gc3VyZmFjZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBmcmljdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZnJpY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGZyaWN0aW9uIG9mIHRoZSByaWdpZGJvZHksIHdoaWNoIGlzIHRoZSBmYWN0b3Igb2YgIHNsaWRpbmcgcmVzaXN0YW5jZSBvZiB0aGlzIHJpZ2lkYm9keSBvbiBzdXJmYWNlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IGZyaWN0aW9uKF9mcmljdGlvbjogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2ZyaWN0aW9uID0gX2ZyaWN0aW9uO1xyXG4gICAgICBpZiAodGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpICE9IG51bGwpXHJcbiAgICAgICAgdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLnNldEZyaWN0aW9uKHRoaXMuI2ZyaWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgcmVzdGl0dXRpb24gb2YgdGhlIHJpZ2lkYm9keSwgd2hpY2ggaXMgdGhlIGZhY3RvciBvZiBib3VuY2luZXNzIG9mIHRoaXMgcmlnaWRib2R5IG9uIHN1cmZhY2VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmVzdGl0dXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3Jlc3RpdHV0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSByZXN0aXR1dGlvbiBvZiB0aGUgcmlnaWRib2R5LCB3aGljaCBpcyB0aGUgZmFjdG9yIG9mIGJvdW5jaW5lc3Mgb2YgdGhpcyByaWdpZGJvZHkgb24gc3VyZmFjZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCByZXN0aXR1dGlvbihfcmVzdGl0dXRpb246IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyZXN0aXR1dGlvbiA9IF9yZXN0aXR1dGlvbjtcclxuICAgICAgaWYgKHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKSAhPSBudWxsKVxyXG4gICAgICAgIHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKS5zZXRSZXN0aXR1dGlvbih0aGlzLiNyZXN0aXR1dGlvbik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2Zvcm1hdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByaWdpZGJvZHkgaW4gdGhlIGZvcm0gdGhlIHBoeXNpY3MgZW5naW5lIGlzIHVzaW5nIGl0LCBzaG91bGQgbm90IGJlIHVzZWQgdW5sZXNzIGEgZnVuY3Rpb25hbGl0eVxyXG4gICAgICogaXMgbm90IHByb3ZpZGVkIHRocm91Z2ggdGhlIEZVREdFIEludGVncmF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0T2ltb1JpZ2lkYm9keSgpOiBPSU1PLlJpZ2lkQm9keSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNyaWdpZGJvZHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJvdGF0aW5nIHRoZSByaWdpZGJvZHkgdGhlcmVmb3JlIGNoYW5naW5nIGl0J3Mgcm90YXRpb24gb3ZlciB0aW1lIGRpcmVjdGx5IGluIHBoeXNpY3MuIFRoaXMgd2F5IHBoeXNpY3MgaXMgY2hhbmdpbmcgaW5zdGVhZCBvZiB0cmFuc2Zvcm0uIFxyXG4gICAgICogIEJ1dCB5b3UgYXJlIGFibGUgdG8gaW5jcmVtZW50YWwgY2hhbmdpbmcgaXQgaW5zdGVhZCBvZiBhIGRpcmVjdCByb3RhdGlvbi4gIEFsdGhvdWdoIGl0J3MgYWx3YXlzIHByZWZlcmVkIHRvIHVzZSBmb3JjZXMgaW4gcGh5c2ljcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJvdGF0ZUJvZHkoX3JvdGF0aW9uQ2hhbmdlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5yb3RhdGVYeXoobmV3IE9JTU8uVmVjMyhfcm90YXRpb25DaGFuZ2UueCAqIENhbGMuZGVnMnJhZCwgX3JvdGF0aW9uQ2hhbmdlLnkgKiBDYWxjLmRlZzJyYWQsIF9yb3RhdGlvbkNoYW5nZS56ICogQ2FsYy5kZWcycmFkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRyYW5zbGF0aW5nIHRoZSByaWdpZGJvZHkgdGhlcmVmb3JlIGNoYW5naW5nIGl0J3MgcGxhY2Ugb3ZlciB0aW1lIGRpcmVjdGx5IGluIHBoeXNpY3MuIFRoaXMgd2F5IHBoeXNpY3MgaXMgY2hhbmdpbmcgaW5zdGVhZCBvZiB0cmFuc2Zvcm0uIFxyXG4gICAgICogIEJ1dCB5b3UgYXJlIGFibGUgdG8gaW5jcmVtZW50YWxseSBjaGFuZ2luZyBpdCBpbnN0ZWFkIG9mIGEgZGlyZWN0IHBvc2l0aW9uLiBBbHRob3VnaCBpdCdzIGFsd2F5cyBwcmVmZXJlZCB0byB1c2UgZm9yY2VzIGluIHBoeXNpY3MuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlQm9keShfdHJhbnNsYXRpb25DaGFuZ2U6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnRyYW5zbGF0ZShuZXcgT0lNTy5WZWMzKF90cmFuc2xhdGlvbkNoYW5nZS54LCBfdHJhbnNsYXRpb25DaGFuZ2UueSwgX3RyYW5zbGF0aW9uQ2hhbmdlLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBQT1NJVElPTiBvZiB0aGUge0BsaW5rIE5vZGV9IGluIHRoZSBwaHlzaWNhbCBzcGFjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24oKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCB0bXBQb3M6IE9JTU8uVmVjMyA9IHRoaXMuI3JpZ2lkYm9keS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModG1wUG9zLngsIHRtcFBvcy55LCB0bXBQb3Mueik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IFBPU0lUSU9OIG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHNwYWNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRQb3NpdGlvbihfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldFBvc2l0aW9uKG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBjdXJyZW50IFJPVEFUSU9OIG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHNwYWNlLiBOb3RlIHRoaXMgcmFuZ2UgZnJvbSAtcGkgdG8gcGksIHNvIC05MCB0byA5MC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJvdGF0aW9uKCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgb3JpZW50YXRpb246IE9JTU8uUXVhdCA9IHRoaXMuI3JpZ2lkYm9keS5nZXRPcmllbnRhdGlvbigpO1xyXG4gICAgICBsZXQgdG1wUXVhdDogUXVhdGVybmlvbiA9IFJlY3ljbGVyLmdldChRdWF0ZXJuaW9uKTtcclxuICAgICAgdG1wUXVhdC5zZXQob3JpZW50YXRpb24ueCwgb3JpZW50YXRpb24ueSwgb3JpZW50YXRpb24ueiwgb3JpZW50YXRpb24udyk7XHJcbiAgICAgIGxldCBldWxlckFuZ2xlczogVmVjdG9yMyA9IHRtcFF1YXQuZXVsZXJBbmdsZXMuY2xvbmU7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHRtcFF1YXQpO1xyXG4gICAgICByZXR1cm4gZXVsZXJBbmdsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IFJPVEFUSU9OIG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHNwYWNlLCBpbiBkZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRSb3RhdGlvbihfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgbGV0IHF1YXQ6IE9JTU8uUXVhdCA9IG5ldyBPSU1PLlF1YXQoKTtcclxuICAgICAgbGV0IG10eFJvdDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcbiAgICAgIG10eFJvdC5yb3RhdGUobmV3IFZlY3RvcjMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueikpO1xyXG4gICAgICBsZXQgYXJyYXk6IEZsb2F0MzJBcnJheSA9IG10eFJvdC5nZXQoKTtcclxuICAgICAgbGV0IHJvdDogT0lNTy5NYXQzID0gbmV3IE9JTU8uTWF0MyhhcnJheVswXSwgYXJyYXlbNF0sIGFycmF5WzhdLCBhcnJheVsxXSwgYXJyYXlbNV0sIGFycmF5WzldLCBhcnJheVsyXSwgYXJyYXlbNl0sIGFycmF5WzEwXSk7XHJcbiAgICAgIHF1YXQuZnJvbU1hdDMocm90KTtcclxuICAgICAgLy8gcXVhdC5ub3JtYWxpemUoKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldE9yaWVudGF0aW9uKHF1YXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBHZXQgdGhlIGN1cnJlbnQgU0NBTElORyBpbiB0aGUgcGh5c2ljYWwgc3BhY2UuICovXHJcbiAgICBwdWJsaWMgZ2V0U2NhbGluZygpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLm5vZGUubXR4V29ybGQuc2NhbGluZy5jbG9uZTtcclxuICAgICAgc2NhbGluZy54ICo9IHRoaXMubXR4UGl2b3Quc2NhbGluZy54O1xyXG4gICAgICBzY2FsaW5nLnkgKj0gdGhpcy5tdHhQaXZvdC5zY2FsaW5nLnk7XHJcbiAgICAgIHNjYWxpbmcueiAqPSB0aGlzLm10eFBpdm90LnNjYWxpbmcuejtcclxuICAgICAgcmV0dXJuIHNjYWxpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNjYWxpbmcgcmVxdWlyZXMgdGhlIGNvbGxpZGVyIHRvIGJlIGNvbXBsZXRlbHkgcmVjcmVhdGVkIGFuZXcgKi9cclxuICAgIHB1YmxpYyBzZXRTY2FsaW5nKF92YWx1ZTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICAvLyBsZXQgc2NhbGluZzogVmVjdG9yMyA9IF92YWx1ZS5jbG9uZTsgICBcclxuICAgICAgdGhpcy5jcmVhdGVDb2xsaWRlcihuZXcgT0lNTy5WZWMzKF92YWx1ZS54IC8gMiwgX3ZhbHVlLnkgLyAyLCBfdmFsdWUueiAvIDIpLCB0aGlzLiN0eXBlQ29sbGlkZXIpOyAvL3JlY3JlYXRlIHRoZSBjb2xsaWRlclxyXG4gICAgICB0aGlzLiNjb2xsaWRlciA9IG5ldyBPSU1PLlNoYXBlKHRoaXMuI2NvbGxpZGVySW5mbyk7XHJcbiAgICAgIGxldCBvbGRDb2xsaWRlcjogT0lNTy5TaGFwZSA9IHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFkZFNoYXBlKHRoaXMuI2NvbGxpZGVyKTsgLy9hZGQgbmV3IGNvbGxpZGVyLCBiZWZvcmUgcmVtb3ZpbmcgdGhlIG9sZCwgc28gdGhlIHJiIGlzIG5ldmVyIGFjdGl2ZSB3aXRoIDAgY29sbGlkZXJzXHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5yZW1vdmVTaGFwZShvbGRDb2xsaWRlcik7IC8vcmVtb3ZlIHRoZSBvbGQgY29sbGlkZXJcclxuICAgICAgdGhpcy4jY29sbGlkZXIudXNlckRhdGEgPSB0aGlzOyAvL3Jlc2V0IHRoZSBleHRyYSBpbmZvcm1hdGlvbiBzbyB0aGF0IHRoaXMgY29sbGlkZXIga25vd3MgdG8gd2hpY2ggRlVER0UgQ29tcG9uZW50IGl0J3MgY29ubmVjdGVkXHJcbiAgICAgIHRoaXMuI2NvbGxpZGVyLnNldENvbGxpc2lvbkdyb3VwKHRoaXMuY29sbGlzaW9uR3JvdXApO1xyXG4gICAgICB0aGlzLiNjb2xsaWRlci5zZXRDb2xsaXNpb25NYXNrKHRoaXMuY29sbGlzaW9uTWFzayk7XHJcblxyXG4gICAgICB0aGlzLiNjb2xsaWRlci5zZXRSZXN0aXR1dGlvbih0aGlzLiNyZXN0aXR1dGlvbik7XHJcbiAgICAgIHRoaXMuI2NvbGxpZGVyLnNldEZyaWN0aW9uKHRoaXMuI2ZyaWN0aW9uKTtcclxuICAgICAgdGhpcy4jY29sbGlkZXIuc2V0Q29udGFjdENhbGxiYWNrKHRoaXMuI2NhbGxiYWNrcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcmlnaWRib2R5IGFjY29yZGluZyB0byBpdHMgaW5pdGlhbGl6YXRpb24gc2V0dGluZyB0byBtYXRjaCB0aGUgbWVzaCwgdGhlIG5vZGUgb3IgaXRzIG93biBwaXZvdCBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5ub2RlKSAvLyBkZWxheSBpbml0aWFsaXphdGlvbiB1bnRpbCB0aGlzIHJpZ2lkYm9keSBpcyBhdHRhY2hlZCB0byBhIG5vZGVcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIHN3aXRjaCAoTnVtYmVyKHRoaXMuaW5pdGlhbGl6YXRpb24pKSB7XHJcbiAgICAgICAgY2FzZSBCT0RZX0lOSVQuVE9fTk9ERTpcclxuICAgICAgICAgIHRoaXMubXR4UGl2b3QgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQk9EWV9JTklULlRPX01FU0g6XHJcbiAgICAgICAgICBsZXQgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgICAgICBpZiAoY21wTWVzaClcclxuICAgICAgICAgICAgdGhpcy5tdHhQaXZvdCA9IGNtcE1lc2gubXR4UGl2b3QuY2xvbmU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJPRFlfSU5JVC5UT19QSVZPVDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBtdHhXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LlBST0RVQ1QodGhpcy5ub2RlLm10eFdvcmxkLCB0aGlzLm10eFBpdm90KTtcclxuXHJcbiAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMyA9IG10eFdvcmxkLnRyYW5zbGF0aW9uOyAvL0FkZGluZyB0aGUgb2Zmc2V0cyBmcm9tIHRoZSBwaXZvdFxyXG4gICAgICBsZXQgcm90YXRpb246IFZlY3RvcjMgPSBtdHhXb3JsZC5yb3RhdGlvbjtcclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSBtdHhXb3JsZC5zY2FsaW5nO1xyXG4gICAgICAvL3NjYWxpbmcgcmVxdWlyZXMgY29sbGlkZXIgdG8gYmUgcmVjcmVhdGVkXHJcbiAgICAgIHRoaXMuc2V0U2NhbGluZyhzY2FsaW5nKTtcclxuXHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRNYXNzRGF0YSh0aGlzLiNtYXNzRGF0YSk7XHJcbiAgICAgIHRoaXMuc2V0UG9zaXRpb24ocG9zaXRpb24pOyAvL3NldCB0aGUgYWN0dWFsIG5ldyByb3RhdGlvbi9wb3NpdGlvbiBmb3IgdGhpcyBSYiBhZ2FpbiBzaW5jZSBpdCdzIG5vdyB1cGRhdGVkXHJcbiAgICAgIHRoaXMuc2V0Um90YXRpb24ocm90YXRpb24pO1xyXG5cclxuICAgICAgbGV0IHNjYWxpbmdJbnZlcnNlOiBWZWN0b3IzID0gdGhpcy5ub2RlLm10eFdvcmxkLnNjYWxpbmcubWFwKF9pID0+IDEgLyBfaSk7XHJcbiAgICAgIHRoaXMuI210eFBpdm90VW5zY2FsZWQgPSBNYXRyaXg0eDQuQ09NUE9TSVRJT04odGhpcy5tdHhQaXZvdC50cmFuc2xhdGlvbiwgdGhpcy5tdHhQaXZvdC5yb3RhdGlvbiwgc2NhbGluZ0ludmVyc2UpO1xyXG4gICAgICB0aGlzLiNtdHhQaXZvdEludmVyc2UgPSBNYXRyaXg0eDQuSU5WRVJTRSh0aGlzLiNtdHhQaXZvdFVuc2NhbGVkKTtcclxuXHJcbiAgICAgIHRoaXMuYWRkUmlnaWRib2R5VG9Xb3JsZCgpO1xyXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFZlbG9jaXR5IGFuZCBGb3JjZXNcclxuICAgIC8qKlxyXG4gICAgKiBHZXQgdGhlIGN1cnJlbnQgVkVMT0NJVFkgb2YgdGhlIHtAbGluayBOb2RlfVxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXRWZWxvY2l0eSgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlbG9jaXR5OiBPSU1PLlZlYzMgPSB0aGlzLiNyaWdpZGJvZHkuZ2V0TGluZWFyVmVsb2NpdHkoKTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHZlbG9jaXR5LngsIHZlbG9jaXR5LnksIHZlbG9jaXR5LnopO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgVkVMT0NJVFkgb2YgdGhlIHtAbGluayBOb2RlfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VmVsb2NpdHkoX3ZhbHVlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIGxldCB2ZWxvY2l0eTogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldExpbmVhclZlbG9jaXR5KHZlbG9jaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBBTkdVTEFSIC0gVkVMT0NJVFkgb2YgdGhlIHtAbGluayBOb2RlfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QW5ndWxhclZlbG9jaXR5KCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVsb2NpdHk6IE9JTU8uVmVjMyA9IHRoaXMuI3JpZ2lkYm9keS5nZXRBbmd1bGFyVmVsb2NpdHkoKTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHZlbG9jaXR5LngsIHZlbG9jaXR5LnksIHZlbG9jaXR5LnopO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgQU5HVUxBUiAtIFZFTE9DSVRZIG9mIHRoZSB7QGxpbmsgTm9kZX1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEFuZ3VsYXJWZWxvY2l0eShfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgbGV0IHZlbG9jaXR5OiBPSU1PLlZlYzMgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0QW5ndWxhclZlbG9jaXR5KHZlbG9jaXR5KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFwcGxpZXMgYSBjb250aW5vdXMgRk9SQ0UgYXQgdGhlIGNlbnRlciBvZiB0aGUgUklHSURCT0RZIGluIHRoZSB0aHJlZSBkaW1lbnNpb25zLiBDb25zaWRlcmluZyB0aGUgcmlnaWRib2R5J3MgTUFTUy5cclxuICAgICogVGhlIGZvcmNlIGlzIG1lYXN1cmVkIGluIG5ld3RvbiwgMWtnIG5lZWRzIGFib3V0IDEwIE5ld3RvbiB0byBmaWdodCBhZ2FpbnN0IGdyYXZpdHkuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5Rm9yY2UoX2ZvcmNlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hcHBseUZvcmNlVG9DZW50ZXIobmV3IE9JTU8uVmVjMyhfZm9yY2UueCwgX2ZvcmNlLnksIF9mb3JjZS56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFwcGxpZXMgYSBjb250aW5vdXMgRk9SQ0UgYXQgYSBzcGVjaWZpYyBwb2ludCBpbiB0aGUgd29ybGQgdG8gdGhlIFJJR0lEQk9EWSBpbiB0aGUgdGhyZWUgZGltZW5zaW9ucy4gQ29uc2lkZXJpbmcgdGhlIHJpZ2lkYm9keSdzIE1BU1NcclxuICAgICovXHJcbiAgICBwdWJsaWMgYXBwbHlGb3JjZUF0UG9pbnQoX2ZvcmNlOiBWZWN0b3IzLCBfd29ybGRQb2ludDogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuYXBwbHlGb3JjZShuZXcgT0lNTy5WZWMzKF9mb3JjZS54LCBfZm9yY2UueSwgX2ZvcmNlLnopLCBuZXcgT0lNTy5WZWMzKF93b3JsZFBvaW50LngsIF93b3JsZFBvaW50LnksIF93b3JsZFBvaW50LnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQXBwbGllcyBhIGNvbnRpbm91cyBST1RBVElPTkFMIEZPUkNFIChUb3JxdWUpIHRvIHRoZSBSSUdJREJPRFkgaW4gdGhlIHRocmVlIGRpbWVuc2lvbnMuIENvbnNpZGVyaW5nIHRoZSByaWdpZGJvZHkncyBNQVNTXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5VG9ycXVlKF9yb3RhdGlvbmFsRm9yY2U6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFwcGx5VG9ycXVlKG5ldyBPSU1PLlZlYzMoX3JvdGF0aW9uYWxGb3JjZS54LCBfcm90YXRpb25hbEZvcmNlLnksIF9yb3RhdGlvbmFsRm9yY2UueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBcHBsaWVzIGEgaW5zdGFudCBGT1JDRSBhdCBhIHBvaW50L3JpZ2lkYm9keWNlbnRlciB0byB0aGUgUklHSURCT0RZIGluIHRoZSB0aHJlZSBkaW1lbnNpb25zLiBDb25zaWRlcmluZyB0aGUgcmlnaWRib2QncyBNQVNTXHJcbiAgICAqIEluZmx1ZW5jaW5nIHRoZSBhbmd1bGFyIHNwZWVkIGFuZCB0aGUgbGluZWFyIHNwZWVkLiBcclxuICAgICovXHJcbiAgICBwdWJsaWMgYXBwbHlJbXB1bHNlQXRQb2ludChfaW1wdWxzZTogVmVjdG9yMywgX3dvcmxkUG9pbnQ6IFZlY3RvcjMgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIF93b3JsZFBvaW50ID0gX3dvcmxkUG9pbnQgIT0gbnVsbCA/IF93b3JsZFBvaW50IDogdGhpcy5nZXRQb3NpdGlvbigpO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuYXBwbHlJbXB1bHNlKG5ldyBPSU1PLlZlYzMoX2ltcHVsc2UueCwgX2ltcHVsc2UueSwgX2ltcHVsc2UueiksIG5ldyBPSU1PLlZlYzMoX3dvcmxkUG9pbnQueCwgX3dvcmxkUG9pbnQueSwgX3dvcmxkUG9pbnQueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBcHBsaWVzIGEgaW5zdGFudCBGT1JDRSB0byB0aGUgUklHSURCT0RZIGluIHRoZSB0aHJlZSBkaW1lbnNpb25zLiBDb25zaWRlcmluZyB0aGUgcmlnaWRib2R5J3MgTUFTU1xyXG4gICAgKiBPbmx5IGluZmx1ZW5jaW5nIGl0J3Mgc3BlZWQgbm90IHJvdGF0aW9uLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBhcHBseUxpbmVhckltcHVsc2UoX2ltcHVsc2U6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFwcGx5TGluZWFySW1wdWxzZShuZXcgT0lNTy5WZWMzKF9pbXB1bHNlLngsIF9pbXB1bHNlLnksIF9pbXB1bHNlLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYSBpbnN0YW50IFJPVEFUSU9OQUwtRk9SQ0UgdG8gdGhlIFJJR0lEQk9EWSBpbiB0aGUgdGhyZWUgZGltZW5zaW9ucy4gQ29uc2lkZXJpbmcgdGhlIHJpZ2lkYm9keSdzIE1BU1NcclxuICAgICAqIE9ubHkgaW5mbHVlbmNpbmcgaXQncyByb3RhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5QW5ndWxhckltcHVsc2UoX3JvdGF0aW9uYWxJbXB1bHNlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hcHBseUFuZ3VsYXJJbXB1bHNlKG5ldyBPSU1PLlZlYzMoX3JvdGF0aW9uYWxJbXB1bHNlLngsIF9yb3RhdGlvbmFsSW1wdWxzZS55LCBfcm90YXRpb25hbEltcHVsc2UueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdpbmcgdGhlIFZFTE9DSVRZIG9mIHRoZSBSSUdJREJPRFkuIE9ubHkgaW5mbHVlbmNpbmcgdGhlIGxpbmVhciBzcGVlZCBub3QgYW5ndWxhclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkVmVsb2NpdHkoX3ZhbHVlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hZGRMaW5lYXJWZWxvY2l0eShuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5naW5nIHRoZSBWRUxPQ0lUWSBvZiB0aGUgUklHSURCT0RZLiBPbmx5IGluZmx1ZW5jaW5nIHRoZSBhbmd1bGFyIHNwZWVkIG5vdCB0aGUgbGluZWFyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRBbmd1bGFyVmVsb2NpdHkoX3ZhbHVlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hZGRBbmd1bGFyVmVsb2NpdHkobmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZS0gLyBBY3RpdmF0ZSB0aGUgcmlnaWRib2RpZXMgYXV0by1zbGVlcGluZyBmdW5jdGlvbi5cclxuICAgICAqIElmIGFjdGl2YXRlZCB0aGUgcmlnaWRib2R5IHdpbGwgYXV0b21hdGljYWxseSBzbGVlcCB3aGVuIG5lZWRlZCwgaW5jcmVhc2luZyBwZXJmb3JtYW5jZS5cclxuICAgICAqIElmIGRlYWN0aXZhdGVkIHRoZSByaWdpZGJvZHkgZ2V0cyBzdG9wcGVkIGZyb20gc2xlZXBpbmcgd2hlbiBtb3ZlbWVudCBpcyB0b28gbWluaW1hbC4gRGVjcmVhc2luZyBwZXJmb3JtYW5jZSwgZm9yIHJhcmVseSBtb3JlIHByZWNpc2UgcGh5c2ljcyByZXN1bHRzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWN0aXZhdGVBdXRvU2xlZXAoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRBdXRvU2xlZXAoX29uKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBDb2xsaXNpb25cclxuICAgIC8vIC8qKlxyXG4gICAgLy8gICogQ2hlY2tpbmcgZm9yIENvbGxpc2lvbiB3aXRoIG90aGVyIENvbGxpZGVycyBhbmQgZGlzcGF0Y2hlcyBhIGN1c3RvbSBldmVudCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb2xsaWRlci5cclxuICAgIC8vICAqIEF1dG9tYXRpY2FsbHkgY2FsbGVkIGluIHRoZSBSZW5kZXJNYW5hZ2VyLCBubyBpbnRlcmFjdGlvbiBuZWVkZWQuXHJcbiAgICAvLyAgKi9cclxuICAgIC8vIHB1YmxpYyBjaGVja0NvbGxpc2lvbkV2ZW50cygpOiB2b2lkIHtcclxuICAgIC8vICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIC8vIGNoZWNrIGNvbGxpc2lvbnMgb25seSBpZiBpbml0aWFsaXphdGlvbiBjb21wbGV0ZWRcclxuICAgIC8vICAgICByZXR1cm47XHJcblxyXG4gICAgLy8gICBsZXQgY29udGFjdExpbms6IE9JTU8uQ29udGFjdExpbmsgPSB0aGlzLiNyaWdpZGJvZHkuZ2V0Q29udGFjdExpbmtMaXN0KCk7IC8vIGFsbCBwaHlzaWNhbCBjb250YWN0cyBiZXR3ZWVuIGNvbGxpZGluZyBib2RpZXMgb24gdGhpcyByYlxyXG4gICAgLy8gICB3aGlsZSAoY29udGFjdExpbmsgIT0gbnVsbCkge1xyXG4gICAgLy8gICAgIGxldCBvdGhlcjogQ29tcG9uZW50UmlnaWRib2R5ID0gY29udGFjdExpbmsuZ2V0T3RoZXIoKS51c2VyRGF0YTsgLy8gZ2V0IHRoZSBvdGhlciBjb21wb25lbnQgcmlnaWRib2R5IGludm9sdmVkIGluIHRoZSBjb2xsaXNpb25cclxuICAgIC8vICAgICBpZiAoIW90aGVyLmlzSW5pdGlhbGl6ZWQpIHtcclxuICAgIC8vICAgICAgIGNvbnRhY3RMaW5rID0gY29udGFjdExpbmsuZ2V0TmV4dCgpO1xyXG4gICAgLy8gICAgICAgY29udGludWU7XHJcbiAgICAvLyAgICAgfVxyXG5cclxuICAgIC8vICAgICBsZXQgY29udGFjdDogT0lNTy5Db250YWN0ID0gY29udGFjdExpbmsuZ2V0Q29udGFjdCgpO1xyXG4gICAgLy8gICAgIGxldCB3YXNUb3VjaGluZzogYm9vbGVhbiA9IHRoaXMuY29sbGlzaW9ucy5pbmNsdWRlcyhvdGhlcik7XHJcbiAgICAvLyAgICAgbGV0IGlzVG91Y2hpbmc6IGJvb2xlYW4gPSBjb250YWN0LmlzVG91Y2hpbmcoKTtcclxuXHJcbiAgICAvLyAgICAgaWYgKCF3YXNUb3VjaGluZyAmJiBpc1RvdWNoaW5nKSB7IC8vIEVOVEVSXHJcbiAgICAvLyAgICAgICBsZXQgbWFuaWZvbGQ6IE9JTU8uTWFuaWZvbGQgPSBjb250YWN0LmdldE1hbmlmb2xkKCk7XHJcbiAgICAvLyAgICAgICBsZXQgcG9pbnRzOiBPSU1PLk1hbmlmb2xkUG9pbnRbXSA9IG1hbmlmb2xkLmdldFBvaW50cygpOyAvLyBBbGwgcG9pbnRzIGluIHRoZSBjb2xsaXNpb24gd2hlcmUgdGhlIHR3byBib2RpZXMgYXJlIHRvdWNoaW5nLCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZnVsbCBpbXBhY3RcclxuICAgIC8vICAgICAgIGxldCBub3JtYWxJbXB1bHNlOiBudW1iZXIgPSAwO1xyXG4gICAgLy8gICAgICAgbGV0IGJpbm9ybWFsSW1wdWxzZTogbnVtYmVyID0gMDtcclxuICAgIC8vICAgICAgIGxldCB0YW5nZW50SW1wdWxzZTogbnVtYmVyID0gMDtcclxuICAgIC8vICAgICAgIGZvciAobGV0IG1hbmlmb2xkUG9pbnQgb2YgcG9pbnRzKSB7IC8vIFRoZSBpbXBhY3Qgb2YgdGhlIGNvbGxpc2lvbiBpbnZvbHZpbmcgYWxsIHRvdWNoaW5nIHBvaW50c1xyXG4gICAgLy8gICAgICAgICBub3JtYWxJbXB1bHNlICs9IG1hbmlmb2xkUG9pbnQuZ2V0Tm9ybWFsSW1wdWxzZSgpO1xyXG4gICAgLy8gICAgICAgICBiaW5vcm1hbEltcHVsc2UgKz0gbWFuaWZvbGRQb2ludC5nZXRCaW5vcm1hbEltcHVsc2UoKTtcclxuICAgIC8vICAgICAgICAgdGFuZ2VudEltcHVsc2UgKz0gbWFuaWZvbGRQb2ludC5nZXRUYW5nZW50SW1wdWxzZSgpO1xyXG4gICAgLy8gICAgICAgfVxyXG4gICAgLy8gICAgICAgbGV0IG5vcm1hbDogT0lNTy5WZWMzID0gbWFuaWZvbGQuZ2V0Tm9ybWFsKCk7XHJcbiAgICAvLyAgICAgICBsZXQgY29sbGlzaW9uTm9ybWFsOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMobm9ybWFsLngsIG5vcm1hbC55LCBub3JtYWwueik7XHJcbiAgICAvLyAgICAgICBsZXQgY29sbGlzaW9uQ2VudGVyUG9pbnQ6IFZlY3RvcjMgPSB0aGlzLmNvbGxpc2lvbkNlbnRlclBvaW50KHBvaW50cywgbWFuaWZvbGQuZ2V0TnVtUG9pbnRzKCkpO1xyXG4gICAgLy8gICAgICAgdGhpcy5jb2xsaXNpb25zLnB1c2gob3RoZXIpO1xyXG4gICAgLy8gICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudFBoeXNpY3MoRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIG90aGVyLCBub3JtYWxJbXB1bHNlLCB0YW5nZW50SW1wdWxzZSwgYmlub3JtYWxJbXB1bHNlLCBjb2xsaXNpb25DZW50ZXJQb2ludCwgY29sbGlzaW9uTm9ybWFsKSk7IC8vIFNlbmRpbmcgdGhlIGdpdmVuIGV2ZW50XHJcbiAgICAvLyAgICAgfSBlbHNlIGlmICh3YXNUb3VjaGluZyAmJiAhaXNUb3VjaGluZykgeyAvLyBFWElUXHJcbiAgICAvLyAgICAgICB0aGlzLmNvbGxpc2lvbnMuc3BsaWNlKHRoaXMuY29sbGlzaW9ucy5pbmRleE9mKG90aGVyKSwgMSk7XHJcbiAgICAvLyAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50UGh5c2ljcyhFVkVOVF9QSFlTSUNTLkNPTExJU0lPTl9FWElULCBvdGhlciwgMCwgMCwgMCkpO1xyXG4gICAgLy8gICAgIH1cclxuXHJcbiAgICAvLyAgICAgY29udGFjdExpbmsgPSBjb250YWN0TGluay5nZXROZXh0KCk7IC8vIFN0YXJ0IHRoZSBzYW1lIHJvdXRpbmUgd2l0aCB0aGUgbmV4dCBjb2xsaXNpb24gaW4gdGhlIGxpc3RcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgYSByYXkgdGhyb3VnaCB0aGlzIHNwZWNpZmljIGJvZHkgaWdub3JpbmcgdGhlIHJlc3Qgb2YgdGhlIHdvcmxkIGFuZCBjaGVja3MgaWYgdGhpcyBib2R5IHdhcyBoaXQgYnkgdGhlIHJheSxcclxuICAgICAqIHJldHVybmluZyBpbmZvIGFib3V0IHRoZSBoaXQuIFByb3ZpZGVzIHRoZSBzYW1lIGZ1bmN0aW9uYWxpdHkgYW5kIGluZm9ybWF0aW9uIGEgcmVndWxhciByYXljYXN0IGRvZXMgYnV0IHRoZSByYXkgaXMgb25seSB0ZXN0aW5nIGFnYWluc3QgdGhpcyBzcGVjaWZpYyBib2R5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmF5Y2FzdFRoaXNCb2R5KF9vcmlnaW46IFZlY3RvcjMsIF9kaXJlY3Rpb246IFZlY3RvcjMsIF9sZW5ndGg6IG51bWJlciwgX2RlYnVnRHJhdzogYm9vbGVhbiA9IGZhbHNlKTogUmF5SGl0SW5mbyB7XHJcbiAgICAgIGxldCBoaXRJbmZvOiBSYXlIaXRJbmZvID0gbmV3IFJheUhpdEluZm8oKTtcclxuICAgICAgbGV0IGdlb21ldHJ5OiBPSU1PLkdlb21ldHJ5ID0gdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLmdldEdlb21ldHJ5KCk7XHJcbiAgICAgIGxldCB0cmFuc2Zvcm06IE9JTU8uVHJhbnNmb3JtID0gdGhpcy4jcmlnaWRib2R5LmdldFRyYW5zZm9ybSgpO1xyXG4gICAgICBsZXQgc2NhbGVkRGlyZWN0aW9uOiBWZWN0b3IzID0gX2RpcmVjdGlvbi5jbG9uZTtcclxuICAgICAgc2NhbGVkRGlyZWN0aW9uLnNjYWxlKF9sZW5ndGgpO1xyXG4gICAgICBsZXQgZW5kcG9pbnQ6IFZlY3RvcjMgPSBWZWN0b3IzLlNVTShzY2FsZWREaXJlY3Rpb24sIF9vcmlnaW4uY2xvbmUpO1xyXG4gICAgICBsZXQgb2ltb1JheTogT0lNTy5SYXlDYXN0SGl0ID0gbmV3IE9JTU8uUmF5Q2FzdEhpdCgpO1xyXG4gICAgICBsZXQgaGl0OiBib29sZWFuID0gZ2VvbWV0cnkucmF5Q2FzdChuZXcgT0lNTy5WZWMzKF9vcmlnaW4ueCwgX29yaWdpbi55LCBfb3JpZ2luLnopLCBuZXcgT0lNTy5WZWMzKGVuZHBvaW50LngsIGVuZHBvaW50LnksIGVuZHBvaW50LnopLCB0cmFuc2Zvcm0sIG9pbW9SYXkpOyAvL3RoZSBhY3R1YWwgT2ltb1BoeXNpY3MgUmF5Y2FzdFxyXG4gICAgICBpZiAoaGl0KSB7ICAvL0lmIGhpdCByZXR1cm4gYSBidW5jaCBvZiBpbmZvcm1hdGlvbnMgYWJvdXQgdGhlIGhpdFxyXG4gICAgICAgIGhpdEluZm8uaGl0ID0gdHJ1ZTtcclxuICAgICAgICBoaXRJbmZvLmhpdFBvaW50ID0gbmV3IFZlY3RvcjMob2ltb1JheS5wb3NpdGlvbi54LCBvaW1vUmF5LnBvc2l0aW9uLnksIG9pbW9SYXkucG9zaXRpb24ueik7XHJcbiAgICAgICAgaGl0SW5mby5oaXROb3JtYWwgPSBuZXcgVmVjdG9yMyhvaW1vUmF5Lm5vcm1hbC54LCBvaW1vUmF5Lm5vcm1hbC55LCBvaW1vUmF5Lm5vcm1hbC56KTtcclxuICAgICAgICBsZXQgZHg6IG51bWJlciA9IF9vcmlnaW4ueCAtIGhpdEluZm8uaGl0UG9pbnQueDsgIC8vY2FsY3VsYXRlIGhpdCBkaXN0YW5jZVxyXG4gICAgICAgIGxldCBkeTogbnVtYmVyID0gX29yaWdpbi55IC0gaGl0SW5mby5oaXRQb2ludC55O1xyXG4gICAgICAgIGxldCBkejogbnVtYmVyID0gX29yaWdpbi56IC0gaGl0SW5mby5oaXRQb2ludC56O1xyXG4gICAgICAgIGhpdEluZm8uaGl0RGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6KTtcclxuICAgICAgICBoaXRJbmZvLnJpZ2lkYm9keUNvbXBvbmVudCA9IHRoaXM7XHJcbiAgICAgICAgaGl0SW5mby5yYXlPcmlnaW4gPSBfb3JpZ2luO1xyXG4gICAgICAgIGhpdEluZm8ucmF5RW5kID0gZW5kcG9pbnQ7XHJcbiAgICAgIH0gZWxzZSB7IC8vT25seSB0ZWxsIHRoZSBvcmlnaW4sIGFuZCB0aGUgaGl0IHBvaW50IGlzIHRoZSBlbmQgb2YgdGhlIHJheS5cclxuICAgICAgICBoaXRJbmZvLnJheU9yaWdpbiA9IF9vcmlnaW47XHJcbiAgICAgICAgaGl0SW5mby5oaXRQb2ludCA9IG5ldyBWZWN0b3IzKGVuZHBvaW50LngsIGVuZHBvaW50LnksIGVuZHBvaW50LnopO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChfZGVidWdEcmF3KSB7XHJcbiAgICAgICAgUGh5c2ljcy5kZWJ1Z0RyYXcuZGVidWdSYXkoaGl0SW5mby5yYXlPcmlnaW4sIGhpdEluZm8uaGl0UG9pbnQsIG5ldyBDb2xvcigwLCAxLCAwLCAxKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGhpdEluZm87XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgLy8jcmVnaW9uIFNhdmluZy9Mb2FkaW5nIC0gU29tZSBwcm9wZXJ0aWVzIG1pZ2h0IGJlIG1pc3NpbmcsIGUuZy4gY29udmV4TWVzaCAoRmxvYXQzMkFycmF5KVxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuXHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLm10eFBpdm90O1xyXG4gICAgICBkZWxldGUgc2VyaWFsaXphdGlvbi5hY3RpdmU7XHJcblxyXG4gICAgICBzZXJpYWxpemF0aW9uLnR5cGVCb2R5ID0gQk9EWV9UWVBFW3RoaXMuI3R5cGVCb2R5XTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50eXBlQ29sbGlkZXIgPSBDT0xMSURFUl9UWVBFW3RoaXMuI3R5cGVDb2xsaWRlcl07XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaW5pdGlhbGl6YXRpb24gPSBCT0RZX0lOSVRbdGhpcy5pbml0aWFsaXphdGlvbl07XHJcblxyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkID0gdGhpcy4jaWQ7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucGl2b3QgPSB0aGlzLm10eFBpdm90LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgdGhpcy5tdHhQaXZvdC5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5waXZvdCk7XHJcbiAgICAgIHRoaXMuI2lkID0gX3NlcmlhbGl6YXRpb24uaWQ7XHJcbiAgICAgIHRoaXMubWFzcyA9IGlmTnVtYmVyKF9zZXJpYWxpemF0aW9uLm1hc3MsIHRoaXMubWFzcyk7XHJcbiAgICAgIHRoaXMuZGFtcFRyYW5zbGF0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24uZGFtcFRyYW5zbGF0aW9uLCB0aGlzLmRhbXBUcmFuc2xhdGlvbik7XHJcbiAgICAgIHRoaXMuZGFtcFJvdGF0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24uZGFtcFJvdGF0aW9uLCB0aGlzLmRhbXBSb3RhdGlvbik7XHJcbiAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAgPSBpZk51bWJlcihfc2VyaWFsaXphdGlvbi5jb2xsaXNpb25Hcm91cCwgdGhpcy5jb2xsaXNpb25Hcm91cCk7XHJcbiAgICAgIHRoaXMuZWZmZWN0Um90YXRpb24gPSBfc2VyaWFsaXphdGlvbi5lZmZlY3RSb3RhdGlvbiB8fCB0aGlzLmVmZmVjdFJvdGF0aW9uO1xyXG4gICAgICB0aGlzLmVmZmVjdEdyYXZpdHkgPSBpZk51bWJlcihfc2VyaWFsaXphdGlvbi5lZmZlY3RHcmF2aXR5LCB0aGlzLmVmZmVjdEdyYXZpdHkpO1xyXG4gICAgICB0aGlzLmZyaWN0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24uZnJpY3Rpb24sIHRoaXMuZnJpY3Rpb24pO1xyXG4gICAgICB0aGlzLnJlc3RpdHV0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24ucmVzdGl0dXRpb24sIHRoaXMucmVzdGl0dXRpb24pO1xyXG4gICAgICB0aGlzLmlzVHJpZ2dlciA9IF9zZXJpYWxpemF0aW9uLmlzVHJpZ2dlciB8fCB0aGlzLmlzVHJpZ2dlcjtcclxuICAgICAgdGhpcy5pbml0aWFsaXphdGlvbiA9IF9zZXJpYWxpemF0aW9uLmluaXRpYWxpemF0aW9uO1xyXG5cclxuICAgICAgdGhpcy5pbml0aWFsaXphdGlvbiA9IDxudW1iZXI+PHVua25vd24+Qk9EWV9JTklUW19zZXJpYWxpemF0aW9uLmluaXRpYWxpemF0aW9uXTtcclxuICAgICAgdGhpcy50eXBlQm9keSA9IDxudW1iZXI+PHVua25vd24+Qk9EWV9UWVBFW19zZXJpYWxpemF0aW9uLnR5cGVCb2R5XTtcclxuICAgICAgdGhpcy50eXBlQ29sbGlkZXIgPSA8bnVtYmVyPjx1bmtub3duPkNPTExJREVSX1RZUEVbX3NlcmlhbGl6YXRpb24udHlwZUNvbGxpZGVyXTtcclxuICAgICAgLy8gdGhpcy5jcmVhdGUodGhpcy5tYXNzLCB0aGlzLiN0eXBlQm9keSwgdGhpcy4jdHlwZUNvbGxpZGVyLCB0aGlzLmNvbGxpc2lvbkdyb3VwLCBudWxsLCB0aGlzLmNvbnZleE1lc2gpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ2hhbmdlIHByb3BlcnRpZXMgYnkgYW4gYXNzb2NpYXRpdmUgYXJyYXkgKi9cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IsIF9zZWxlY3Rpb246IHN0cmluZ1tdID0gbnVsbCwgX2Rpc3BhdGNoTXV0YXRlOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBpZiAoX211dGF0b3IudHlwZUJvZHkgIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIF9tdXRhdG9yLnR5cGVCb2R5ID0gcGFyc2VJbnQoX211dGF0b3IudHlwZUJvZHkpO1xyXG4gICAgICBpZiAoX211dGF0b3IudHlwZUNvbGxpZGVyICE9IHVuZGVmaW5lZClcclxuICAgICAgICBfbXV0YXRvci50eXBlQ29sbGlkZXIgPSBwYXJzZUludChfbXV0YXRvci50eXBlQ29sbGlkZXIpO1xyXG4gICAgICBpZiAoX211dGF0b3IuaW5pdGlhbGl6YXRpb24gIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIF9tdXRhdG9yLmluaXRpYWxpemF0aW9uID0gcGFyc2VJbnQoX211dGF0b3IuaW5pdGlhbGl6YXRpb24pO1xyXG4gICAgICBhd2FpdCBzdXBlci5tdXRhdGUoX211dGF0b3IsIF9zZWxlY3Rpb24sIF9kaXNwYXRjaE11dGF0ZSk7XHJcbiAgICAgIGlmIChfbXV0YXRvci5pbml0aWFsaXphdGlvbiAhPSB1bmRlZmluZWQgJiYgdGhpcy5pc0FjdGl2ZSlcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgICAgLy8gVE9ETzogc2VlIGlmIHRoaXMgYWx0ZXJuYXRpdmUgc2hvdWxkIGJlLCBhdCBsZWFzdCBwYXJ0aWFsbHksIGRvbmUgd2l0aCBtdXRhdGVTZWxlY3Rpb25cclxuICAgICAgLy8gbGV0IGNhbGxJZkV4aXN0OiBGdW5jdGlvbiA9IChfa2V5OiBzdHJpbmcsIF9zZXR0ZXI6IEZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgIC8vICAgaWYgKF9tdXRhdG9yW19rZXldKVxyXG4gICAgICAvLyAgICAgX3NldHRlcihfbXV0YXRvcltfa2V5XSk7XHJcbiAgICAgIC8vIH07XHJcblxyXG4gICAgICAvLyBjYWxsSWZFeGlzdChcImZyaWN0aW9uXCIsIChfdmFsdWU6IG51bWJlcikgPT4gdGhpcy5mcmljdGlvbiA9IF92YWx1ZSk7XHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwicmVzdGl0dXRpb25cIiwgKF92YWx1ZTogbnVtYmVyKSA9PiB0aGlzLnJlc3RpdHV0aW9uID0gX3ZhbHVlKTtcclxuICAgICAgLy8gY2FsbElmRXhpc3QoXCJtYXNzXCIsIChfdmFsdWU6IG51bWJlcikgPT4gdGhpcy5tYXNzID0gX3ZhbHVlKTtcclxuICAgICAgLy8gY2FsbElmRXhpc3QoXCJkYW1wVHJhbnNsYXRpb25cIiwgKF92YWx1ZTogbnVtYmVyKSA9PiB0aGlzLmRhbXBUcmFuc2xhdGlvbiA9IF92YWx1ZSk7XHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwiZGFtcFJvdGF0aW9uXCIsIChfdmFsdWU6IG51bWJlcikgPT4gdGhpcy5kYW1wUm90YXRpb24gPSBfdmFsdWUpO1xyXG4gICAgICAvLyBjYWxsSWZFeGlzdChcImVmZmVjdEdyYXZpdHlcIiwgKF92YWx1ZTogbnVtYmVyKSA9PiB0aGlzLmVmZmVjdEdyYXZpdHkgPSBfdmFsdWUpO1xyXG4gICAgICAvLyBjYWxsSWZFeGlzdChcImNvbGxpc2lvbkdyb3VwXCIsIChfdmFsdWU6IENPTExJU0lPTl9HUk9VUCkgPT4gdGhpcy5jb2xsaXNpb25Hcm91cCA9IF92YWx1ZSk7XHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwidHlwZUJvZHlcIiwgKF92YWx1ZTogc3RyaW5nKSA9PiB0aGlzLnR5cGVCb2R5ID0gcGFyc2VJbnQoX3ZhbHVlKSk7XHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwidHlwZUNvbGxpZGVyXCIsIChfdmFsdWU6IHN0cmluZykgPT4gdGhpcy50eXBlQ29sbGlkZXIgPSBwYXJzZUludChfdmFsdWUpKTtcclxuXHJcbiAgICAgIC8vIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuTVVUQVRFKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuXHJcbiAgICAgIG11dGF0b3IuZnJpY3Rpb24gPSB0aGlzLmZyaWN0aW9uO1xyXG4gICAgICBtdXRhdG9yLnJlc3RpdHV0aW9uID0gdGhpcy5yZXN0aXR1dGlvbjtcclxuICAgICAgbXV0YXRvci5tYXNzID0gdGhpcy5tYXNzO1xyXG4gICAgICBtdXRhdG9yLmRhbXBUcmFuc2xhdGlvbiA9IHRoaXMuZGFtcFRyYW5zbGF0aW9uO1xyXG4gICAgICBtdXRhdG9yLmRhbXBSb3RhdGlvbiA9IHRoaXMuZGFtcFJvdGF0aW9uO1xyXG4gICAgICBtdXRhdG9yLmVmZmVjdEdyYXZpdHkgPSB0aGlzLmVmZmVjdEdyYXZpdHk7XHJcbiAgICAgIG11dGF0b3IudHlwZUJvZHkgPSB0aGlzLiN0eXBlQm9keTtcclxuICAgICAgbXV0YXRvci50eXBlQ29sbGlkZXIgPSB0aGlzLiN0eXBlQ29sbGlkZXI7XHJcbiAgICAgIG11dGF0b3IuaXNUcmlnZ2VyID0gdGhpcy4jaXNUcmlnZ2VyO1xyXG5cclxuICAgICAgLy8gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKG11dGF0b3IpO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSBzdXBlci5nZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3IpO1xyXG4gICAgICBpZiAodHlwZXMudHlwZUJvZHkpXHJcbiAgICAgICAgdHlwZXMudHlwZUJvZHkgPSBCT0RZX1RZUEU7XHJcbiAgICAgIGlmICh0eXBlcy50eXBlQ29sbGlkZXIpXHJcbiAgICAgICAgdHlwZXMudHlwZUNvbGxpZGVyID0gQ09MTElERVJfVFlQRTtcclxuICAgICAgaWYgKHR5cGVzLmluaXRpYWxpemF0aW9uKVxyXG4gICAgICAgIHR5cGVzLmluaXRpYWxpemF0aW9uID0gQk9EWV9JTklUO1xyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5jb252ZXhNZXNoOyAvL0NvbnZleCBNZXNoIGNhbid0IGJlIHNob3duIGluIHRoZSBlZGl0b3IgYmVjYXVzZSBmbG9hdDMyQXJyYXkgaXMgbm90IGEgdmlhYmxlIG11dGF0b3JcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmNvbGxpc2lvbk1hc2s7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5pc0luaXRpYWxpemVkO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8gQWN0aXZhdGUgdGhlIGZ1bmN0aW9ucyBvZiB0aGlzIGNvbXBvbmVudCBhcyByZXNwb25zZSB0byBldmVudHNcclxuICAgIHByaXZhdGUgaG5kRXZlbnQgPSAoX2V2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICBzd2l0Y2ggKF9ldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBFVkVOVC5DT01QT05FTlRfQUREOlxyXG4gICAgICAgICAgLy8gdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BQ1RJVkFURSwgdGhpcy5hZGRSaWdpZGJvZHlUb1dvcmxkKTtcclxuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfREVBQ1RJVkFURSwgdGhpcy5yZW1vdmVSaWdpZGJvZHlGcm9tV29ybGQpO1xyXG4gICAgICAgICAgLy8gdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTk9ERV9BQ1RJVkFURSwgdGhpcy5hZGRSaWdpZGJvZHlUb1dvcmxkLCB0cnVlKTsgLy8gdXNlIGNhcHR1cmUgdG8gcmVhY3QgdG8gYnJvYWRjYXN0IVxyXG4gICAgICAgICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTk9ERV9ERUFDVElWQVRFLCB0aGlzLnJlbW92ZVJpZ2lkYm9keUZyb21Xb3JsZCwgdHJ1ZSk7XHJcbiAgICAgICAgICBpZiAoIXRoaXMubm9kZS5jbXBUcmFuc2Zvcm0pXHJcbiAgICAgICAgICAgIERlYnVnLndhcm4oXCJDb21wb25lbnRSaWdpZGJvZHkgYXR0YWNoZWQgdG8gbm9kZSBtaXNzaW5nIENvbXBvbmVudFRyYW5zZm9ybVwiLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFVkVOVC5DT01QT05FTlRfUkVNT1ZFOlxyXG4gICAgICAgICAgLy8gdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsIHRoaXMuYWRkUmlnaWRib2R5VG9Xb3JsZCk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX1JFTU9WRSwgdGhpcy5yZW1vdmVSaWdpZGJvZHlGcm9tV29ybGQpO1xyXG4gICAgICAgICAgLy8gdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuTk9ERV9BQ1RJVkFURSwgdGhpcy5hZGRSaWdpZGJvZHlUb1dvcmxkLCB0cnVlKTsgLy8gdXNlIGNhcHR1cmUgdG8gcmVhY3QgdG8gYnJvYWRjYXN0IVxyXG4gICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuTk9ERV9ERUFDVElWQVRFLCB0aGlzLnJlbW92ZVJpZ2lkYm9keUZyb21Xb3JsZCwgdHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZVJpZ2lkYm9keUZyb21Xb3JsZCgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRDpcclxuICAgICAgICAgIGlmICghdGhpcy5ub2RlLmNtcFRyYW5zZm9ybSlcclxuICAgICAgICAgICAgRGVidWcuZXJyb3IoXCJDb21wb25lbnRSaWdpZGJvZHkgYXR0YWNoZWQgdG8gbm9kZSBtaXNzaW5nIENvbXBvbmVudFRyYW5zZm9ybVwiLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8jcmVnaW9uIENyZWF0aW9uXHJcbiAgICBwcml2YXRlIGNyZWF0ZShfbWFzczogbnVtYmVyID0gMSwgX3R5cGU6IEJPRFlfVFlQRSA9IEJPRFlfVFlQRS5EWU5BTUlDLCBfY29sbGlkZXJUeXBlOiBDT0xMSURFUl9UWVBFID0gQ09MTElERVJfVFlQRS5DVUJFLCBfZ3JvdXA6IENPTExJU0lPTl9HUk9VUCA9IFBoeXNpY3Muc2V0dGluZ3MuZGVmYXVsdENvbGxpc2lvbkdyb3VwLCBfbXR4VHJhbnNmb3JtOiBNYXRyaXg0eDQgPSBudWxsLCBfY29udmV4TWVzaDogRmxvYXQzMkFycmF5ID0gbnVsbCk6IHZvaWQge1xyXG4gICAgICAvL1NldHRpbmcgdXAgYWxsIGluY29taW5nIHZhbHVlcyB0byBiZSBpbnRlcm5hbCB2YWx1ZXNcclxuICAgICAgdGhpcy5jb252ZXhNZXNoID0gX2NvbnZleE1lc2g7XHJcbiAgICAgIHRoaXMuI3R5cGVCb2R5ID0gX3R5cGU7XHJcbiAgICAgIHRoaXMuI2NvbGxpc2lvbkdyb3VwID0gX2dyb3VwO1xyXG4gICAgICB0aGlzLiN0eXBlQ29sbGlkZXIgPSBfY29sbGlkZXJUeXBlO1xyXG4gICAgICB0aGlzLm1hc3MgPSBfbWFzcztcclxuICAgICAgdGhpcy4jcmVzdGl0dXRpb24gPSBQaHlzaWNzLnNldHRpbmdzLmRlZmF1bHRSZXN0aXR1dGlvbjtcclxuICAgICAgdGhpcy4jZnJpY3Rpb24gPSBQaHlzaWNzLnNldHRpbmdzLmRlZmF1bHRGcmljdGlvbjtcclxuICAgICAgdGhpcy5jb2xsaXNpb25NYXNrID0gUGh5c2ljcy5zZXR0aW5ncy5kZWZhdWx0Q29sbGlzaW9uTWFzaztcclxuICAgICAgLy9DcmVhdGUgdGhlIGFjdHVhbCByaWdpZGJvZHkgaW4gdGhlIE9pbW9QaHlzaWNzIFNwYWNlXHJcbiAgICAgIHRoaXMuY3JlYXRlUmlnaWRib2R5KF9tYXNzLCBfdHlwZSwgdGhpcy4jdHlwZUNvbGxpZGVyLCBfbXR4VHJhbnNmb3JtLCB0aGlzLiNjb2xsaXNpb25Hcm91cCk7XHJcbiAgICAgIHRoaXMuI2lkID0gUGh5c2ljcy5kaXN0cmlidXRlQm9keUlEKCk7XHJcblxyXG4gICAgICAvLyBFdmVudCBDYWxsYmFja3MgZGlyZWN0bHkgZnJvbSBPSU1PIFBoeXNpY3NcclxuICAgICAgdGhpcy4jY2FsbGJhY2tzID0gbmV3IE9JTU8uQ29udGFjdENhbGxiYWNrKCk7IC8vZmVobVxyXG4gICAgICB0aGlzLiNjYWxsYmFja3MuYmVnaW5UcmlnZ2VyQ29udGFjdCA9IHRoaXMudHJpZ2dlckVudGVyO1xyXG4gICAgICB0aGlzLiNjYWxsYmFja3MuZW5kVHJpZ2dlckNvbnRhY3QgPSB0aGlzLnRyaWdnZXJFeGl0O1xyXG4gICAgICB0aGlzLiNjYWxsYmFja3MucG9zdFNvbHZlID0gdGhpcy5jb2xsaXNpb25FbnRlcjsgLy8gdXNlIHBvc3RTb2x2ZSBmb3IgY29sbGlzaW9uRW50ZXIgdG8gZ2V0IHRoZSBpbXB1bHNlXHJcbiAgICAgIHRoaXMuI2NhbGxiYWNrcy5lbmRDb250YWN0ID0gdGhpcy5jb2xsaXNpb25FeGl0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDcmVhdGVzIHRoZSBhY3R1YWwgT2ltb1BoeXNpY3MgUmlnaWRib2R5IG91dCBvZiBpbmZvcm1hdGlvbnMgdGhlIEZVREdFIENvbXBvbmVudCBoYXMuICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZVJpZ2lkYm9keShfbWFzczogbnVtYmVyLCBfdHlwZTogQk9EWV9UWVBFLCBfY29sbGlkZXJUeXBlOiBDT0xMSURFUl9UWVBFLCBfbXR4VHJhbnNmb3JtOiBNYXRyaXg0eDQsIF9jb2xsaXNpb25Hcm91cDogQ09MTElTSU9OX0dST1VQID0gQ09MTElTSU9OX0dST1VQLkRFRkFVTFQpOiB2b2lkIHtcclxuICAgICAgbGV0IG9pbW9UeXBlOiBudW1iZXI7IC8vTmVlZCB0aGUgY29udmVyc2lvbiBmcm9tIHNpbXBsZSBlbnVtIHRvIG51bWJlciBiZWNhdXNlIGlmIGVudW0gaXMgZGVmaW5lZCBhcyBPaW1vLlJpZ2lkeUJvZHlUeXBlIHlvdSBoYXZlIHRvIGluY2x1ZGUgT2ltbyB0byB1c2UgRlVER0UgYXQgYWxsXHJcbiAgICAgIHN3aXRjaCAoX3R5cGUpIHtcclxuICAgICAgICBjYXNlIEJPRFlfVFlQRS5EWU5BTUlDOlxyXG4gICAgICAgICAgb2ltb1R5cGUgPSBPSU1PLlJpZ2lkQm9keVR5cGUuRFlOQU1JQztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQk9EWV9UWVBFLlNUQVRJQzpcclxuICAgICAgICAgIG9pbW9UeXBlID0gT0lNTy5SaWdpZEJvZHlUeXBlLlNUQVRJQztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQk9EWV9UWVBFLktJTkVNQVRJQzpcclxuICAgICAgICAgIG9pbW9UeXBlID0gT0lNTy5SaWdpZEJvZHlUeXBlLktJTkVNQVRJQztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBvaW1vVHlwZSA9IE9JTU8uUmlnaWRCb2R5VHlwZS5EWU5BTUlDO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlbW92ZSBhbGwgcHJldmlvdXMgc2hhcGVzIGZyb20gd29ybGQuIE5lY2Vzc2FyeT9cclxuICAgICAgLy8gd2hpbGUgKHRoaXMuI3JpZ2lkYm9keSAmJiB0aGlzLiNyaWdpZGJvZHkuZ2V0U2hhcGVMaXN0KCkgIT0gbnVsbClcclxuICAgICAgLy8gICB0aGlzLiNyaWdpZGJvZHkucmVtb3ZlU2hhcGUodGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpKTtcclxuXHJcbiAgICAgIGxldCB0bXBUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IF9tdHhUcmFuc2Zvcm0gPT0gbnVsbCA/IHN1cGVyLm5vZGUgIT0gbnVsbCA/IHN1cGVyLm5vZGUubXR4V29ybGQgOiBNYXRyaXg0eDQuSURFTlRJVFkoKSA6IF9tdHhUcmFuc2Zvcm07IC8vR2V0IHRyYW5zZm9ybSBpbmZvcm1hdGlvbnMgZnJvbSB0aGUgd29ybGQsIHNpbmNlIHBoeXNpY3MgZG9lcyBub3QgY2FyZSBhYm91dCBoaWVyYXJjaHlcclxuICAgICAgLy9Db252ZXJ0IGluZm9ybWF0aW9ucyBmcm9tIEZVREdFIHRvIE9pbW9QaHlzaWNzIGFuZCBjcmVhdGluZyBhIGNvbGxpZGVyIHdpdGggaXQsIHdoaWxlIGFsc28gYWRkaW5nIGEgcGl2b3QgdG8gZGVyaXZhdGUgZnJvbSB0aGUgdHJhbnNmb3JtIGluZm9ybWF0aW9ucyBpZiBuZWVkZWRcclxuICAgICAgbGV0IHNjYWxlOiBPSU1PLlZlYzMgPSBuZXcgT0lNTy5WZWMzKCh0bXBUcmFuc2Zvcm0uc2NhbGluZy54ICogdGhpcy5tdHhQaXZvdC5zY2FsaW5nLngpIC8gMiwgKHRtcFRyYW5zZm9ybS5zY2FsaW5nLnkgKiB0aGlzLm10eFBpdm90LnNjYWxpbmcueSkgLyAyLCAodG1wVHJhbnNmb3JtLnNjYWxpbmcueiAqIHRoaXMubXR4UGl2b3Quc2NhbGluZy56KSAvIDIpO1xyXG4gICAgICBsZXQgcG9zaXRpb246IE9JTU8uVmVjMyA9IG5ldyBPSU1PLlZlYzModG1wVHJhbnNmb3JtLnRyYW5zbGF0aW9uLnggKyB0aGlzLm10eFBpdm90LnRyYW5zbGF0aW9uLngsIHRtcFRyYW5zZm9ybS50cmFuc2xhdGlvbi55ICsgdGhpcy5tdHhQaXZvdC50cmFuc2xhdGlvbi55LCB0bXBUcmFuc2Zvcm0udHJhbnNsYXRpb24ueiArIHRoaXMubXR4UGl2b3QudHJhbnNsYXRpb24ueik7XHJcbiAgICAgIGxldCByb3RhdGlvbjogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyh0bXBUcmFuc2Zvcm0ucm90YXRpb24ueCArIHRoaXMubXR4UGl2b3Qucm90YXRpb24ueCwgdG1wVHJhbnNmb3JtLnJvdGF0aW9uLnkgKyB0aGlzLm10eFBpdm90LnJvdGF0aW9uLnksIHRtcFRyYW5zZm9ybS5yb3RhdGlvbi56ICsgdGhpcy5tdHhQaXZvdC5yb3RhdGlvbi56KTtcclxuICAgICAgdGhpcy5jcmVhdGVDb2xsaWRlcihzY2FsZSwgX2NvbGxpZGVyVHlwZSk7XHJcbiAgICAgIC8vU2V0dGluZyBpbmZvcm1hdGlvbnMgYWJvdXQgbWFzcywgcG9zaXRpb24vcm90YXRpb24gYW5kIHBoeXNpY2FsIHJlYWN0aW9uIHR5cGVcclxuICAgICAgdGhpcy4jbWFzc0RhdGEubWFzcyA9IF9tYXNzOyAvL190eXBlICE9IFBIWVNJQ1NfVFlQRS5TVEFUSUMgPyBfbWFzcyA6IDA7IC8vSWYgYSBvYmplY3QgaXMgc3RhdGljIGl0IGFjdHMgYXMgaWYgaXQgaGFzIG5vIG1hc3NcclxuICAgICAgdGhpcy4jcmlnaWRib2R5SW5mby50eXBlID0gb2ltb1R5cGU7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keUluZm8ucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5SW5mby5yb3RhdGlvbi5mcm9tRXVsZXJYeXoobmV3IE9JTU8uVmVjMyhyb3RhdGlvbi54LCByb3RhdGlvbi55LCByb3RhdGlvbi56KSk7IC8vQ29udmVydCBldWxlckFuZ2xlcyBpbiBkZWdyZWUgdG8gdGhlIGludGVybmFsbHkgdXNlZCBxdWF0ZXJuaW9uc1xyXG4gICAgICAvL0NyZWF0aW5nIHRoZSBhY3R1YWwgcmlnaWRib2R5IGFuZCBpdCdzIGNvbGxpZGVyXHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keSA9IG5ldyBPSU1PLlJpZ2lkQm9keSh0aGlzLiNyaWdpZGJvZHlJbmZvKTtcclxuICAgICAgdGhpcy4jY29sbGlkZXIgPSBuZXcgT0lNTy5TaGFwZSh0aGlzLiNjb2xsaWRlckluZm8pO1xyXG4gICAgICAvL0ZpbGxpbmcgdGhlIGFkZGl0aW9uYWwgc2V0dGluZ3MgYW5kIGluZm9ybWF0aW9ucyB0aGUgcmlnaWRib2R5IG5lZWRzLiBXaG8gaXMgY29sbGlkaW5nLCBob3cgaXMgdGhlIGNvbGxpc2lvbiBoYW5kbGVkIChkYW1waW5nLCBpbmZsdWVuY2UgZmFjdG9ycylcclxuICAgICAgdGhpcy4jY29sbGlkZXIudXNlckRhdGEgPSB0aGlzO1xyXG4gICAgICB0aGlzLiNjb2xsaWRlci5zZXRDb2xsaXNpb25Hcm91cChfY29sbGlzaW9uR3JvdXApO1xyXG4gICAgICB0aGlzLiNjb2xsaWRlci5zZXRDb2xsaXNpb25NYXNrKHRoaXMuY29sbGlzaW9uTWFzayk7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hZGRTaGFwZSh0aGlzLiNjb2xsaWRlcik7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRNYXNzRGF0YSh0aGlzLiNtYXNzRGF0YSk7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKS5zZXRSZXN0aXR1dGlvbih0aGlzLiNyZXN0aXR1dGlvbik7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKS5zZXRGcmljdGlvbih0aGlzLiNmcmljdGlvbik7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKS5zZXRDb250YWN0Q2FsbGJhY2sodGhpcy4jY2FsbGJhY2tzKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldExpbmVhckRhbXBpbmcodGhpcy4jZGFtcGluZ0xpbmVhcik7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRBbmd1bGFyRGFtcGluZyh0aGlzLiNkYW1waW5nQW5ndWxhcik7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRHcmF2aXR5U2NhbGUodGhpcy4jZWZmZWN0R3Jhdml0eSk7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRSb3RhdGlvbkZhY3RvcihuZXcgT0lNTy5WZWMzKHRoaXMuI2VmZmVjdFJvdGF0aW9uLngsIHRoaXMuI2VmZmVjdFJvdGF0aW9uLnksIHRoaXMuI2VmZmVjdFJvdGF0aW9uLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ3JlYXRlcyBhIGNvbGxpZGVyIGEgc2hhcGUgdGhhdCByZXByZXNlbnRzIHRoZSBvYmplY3QgaW4gdGhlIHBoeXNpY2FsIHdvcmxkLiAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlQ29sbGlkZXIoX3NjYWxlOiBPSU1PLlZlYzMsIF9jb2xsaWRlclR5cGU6IENPTExJREVSX1RZUEUpOiB2b2lkIHtcclxuICAgICAgbGV0IHNoYXBlQ29uZjogT0lNTy5TaGFwZUNvbmZpZyA9IG5ldyBPSU1PLlNoYXBlQ29uZmlnKCk7IC8vQ29sbGlkZXIgd2l0aCBnZW9tZXRyeSBhbmQgaW5mb3MgbGlrZSBmcmljdGlvbi9yZXN0aXR1dGlvbiBhbmQgbW9yZVxyXG4gICAgICBsZXQgZ2VvbWV0cnk6IE9JTU8uR2VvbWV0cnk7XHJcbiAgICAgIGlmICh0aGlzLnR5cGVDb2xsaWRlciAhPSBfY29sbGlkZXJUeXBlKSAvL0lmIHRoZSBjb2xsaWRlciB0eXBlIHdhcyBjaGFuZ2VkIHNldCB0aGUgaW50ZXJuYWwgb25lIG5ldywgZWxzZSBkb24ndCBzbyB0aGVyZSBpcyBub3QgaW5maW5pdGUgc2V0IGNhbGxzXHJcbiAgICAgICAgdGhpcy50eXBlQ29sbGlkZXIgPSBfY29sbGlkZXJUeXBlO1xyXG4gICAgICBzd2l0Y2ggKF9jb2xsaWRlclR5cGUpIHsgIC8vQ3JlYXRlIGEgZGlmZmVyZW50IE9pbW9QaHlzaWNzIGdlb21ldHJ5IGJhc2VkIG9uIHRoZSBnaXZlbiB0eXBlLiBUaGF0IGlzIG9ubHkgdGhlIG1hdGhlbWF0aWNhbCBzaGFwZSBvZiB0aGUgY29sbGlkZXJcclxuICAgICAgICBjYXNlIENPTExJREVSX1RZUEUuQ1VCRTpcclxuICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IE9JTU8uQm94R2VvbWV0cnkoX3NjYWxlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ09MTElERVJfVFlQRS5TUEhFUkU6XHJcbiAgICAgICAgICBnZW9tZXRyeSA9IG5ldyBPSU1PLlNwaGVyZUdlb21ldHJ5KF9zY2FsZS54KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ09MTElERVJfVFlQRS5DQVBTVUxFOlxyXG4gICAgICAgICAgZ2VvbWV0cnkgPSBuZXcgT0lNTy5DYXBzdWxlR2VvbWV0cnkoX3NjYWxlLngsIF9zY2FsZS55KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ09MTElERVJfVFlQRS5DWUxJTkRFUjpcclxuICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IE9JTU8uQ3lsaW5kZXJHZW9tZXRyeShfc2NhbGUueCwgX3NjYWxlLnkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDT0xMSURFUl9UWVBFLkNPTkU6XHJcbiAgICAgICAgICBnZW9tZXRyeSA9IG5ldyBPSU1PLkNvbmVHZW9tZXRyeShfc2NhbGUueCwgX3NjYWxlLnkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDT0xMSURFUl9UWVBFLlBZUkFNSUQ6XHJcbiAgICAgICAgICBnZW9tZXRyeSA9IHRoaXMuY3JlYXRlQ29udmV4R2VvbWV0cnlDb2xsaWRlcih0aGlzLmNyZWF0ZVB5cmFtaWRWZXJ0aWNlcygpLCBfc2NhbGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDT0xMSURFUl9UWVBFLkNPTlZFWDpcclxuICAgICAgICAgIGdlb21ldHJ5ID0gdGhpcy5jcmVhdGVDb252ZXhHZW9tZXRyeUNvbGxpZGVyKHRoaXMuY29udmV4TWVzaCwgX3NjYWxlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHNoYXBlQ29uZi5nZW9tZXRyeSA9IGdlb21ldHJ5O1xyXG4gICAgICB0aGlzLiNjb2xsaWRlckluZm8gPSBzaGFwZUNvbmY7IC8vdGhlIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gYWRkIGFuIGFjdHVhbCBjb2xsaWRlciB0byB0aGUgcmlnaWRib2R5IGluIGNyZWF0ZVJpZ2lkYm9keVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDcmVhdGluZyBhIHNoYXBlIHRoYXQgcmVwcmVzZW50cyBhIGluIGl0c2VsZiBjbG9zZWQgZm9ybSwgb3V0IG9mIHRoZSBnaXZlbiB2ZXJ0aWNlcy4gKi9cclxuICAgIHByaXZhdGUgY3JlYXRlQ29udmV4R2VvbWV0cnlDb2xsaWRlcihfdmVydGljZXM6IEZsb2F0MzJBcnJheSwgX3NjYWxlOiBPSU1PLlZlYzMpOiBPSU1PLkNvbnZleEh1bGxHZW9tZXRyeSB7XHJcbiAgICAgIGxldCB2ZXJ0aWNlc0FzVmVjMzogT0lNTy5WZWMzW10gPSBuZXcgQXJyYXkoKTsgLy9Db252ZXJ0IEZVREdFIFZlY3RvcjMgdG8gT2ltb1ZlYzNcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IF92ZXJ0aWNlcy5sZW5ndGg7IGkgKz0gMykgeyAvLzMgVmFsdWVzIGZvciBvbmUgcG9pbnRcclxuICAgICAgICB2ZXJ0aWNlc0FzVmVjMy5wdXNoKG5ldyBPSU1PLlZlYzMoX3ZlcnRpY2VzW2ldICogX3NjYWxlLngsIF92ZXJ0aWNlc1tpICsgMV0gKiBfc2NhbGUueSwgX3ZlcnRpY2VzW2kgKyAyXSAqIF9zY2FsZS56KSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBPSU1PLkNvbnZleEh1bGxHZW9tZXRyeSh2ZXJ0aWNlc0FzVmVjMyk7IC8vVGVsbCBPaW1vUGh5c2ljcyB0byBjcmVhdGUgYSBodWxsIHRoYXQgaW52b2x2ZXMgYWxsIHBvaW50cyBidXQgY2xvc2UgaXQgb2YuIEEgY29udmV4IHNoYXBlIGNhbiBub3QgaGF2ZSBhIGhvbGUgaW4gaXQuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHZlcnRpY2VzIHRoYXQgY29uc3RydWN0IGEgcHlyYW1pZC4gVGhlIHZlcnRpY2VzIG9mIHRoZSBpbXBsZW1lbnRlZCBweXJhbWlkIG1lc2ggY2FuIGJlIHVzZWQgdG9vLiBCdXQgdGhleSBhcmUgaGFsZmVkIGFuZCBkb3VibGUgc2lkZWQsIHNvIGl0J3MgbW9yZSBwZXJmb3JtYW50IHRvIHVzZSB0aGlzLiAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVQeXJhbWlkVmVydGljZXMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgbGV0IHZlcnRpY2VzOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFtcclxuICAgICAgICAvKjAqLy0xLCAwLCAxLCAvKjEqLyAxLCAwLCAxLCAgLyoyKi8gMSwgMCwgLTEsIC8qMyovIC0xLCAwLCAtMSxcclxuICAgICAgICAvKjQqLyAwLCAyLCAwXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gdmVydGljZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFkZGluZyB0aGlzIENvbXBvbmVudFJpZ2lkYm9keSB0byB0aGUgUGh5c2lzY3Mud29ybGQgZ2l2aW5nIHRoZSBvaW1vUGh5c2ljcyBzeXN0ZW0gdGhlIGluZm9ybWF0aW9uIG5lZWRlZCAqL1xyXG4gICAgcHJpdmF0ZSBhZGRSaWdpZGJvZHlUb1dvcmxkID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuI3JpZ2lkYm9keS5fd29ybGQpXHJcbiAgICAgICAgUGh5c2ljcy5hZGRSaWdpZGJvZHkodGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBSZW1vdmluZyB0aGlzIENvbXBvbmVudFJpZ2lkYm9keSBmcm9tIHRoZSBQaHlzaXNjcy53b3JsZCB0YWtpbmcgdGhlIGluZm9ybWF0aW9ucyBmcm9tIHRoZSBvaW1vUGh5c2ljcyBzeXN0ZW0gKi9cclxuICAgIHByaXZhdGUgcmVtb3ZlUmlnaWRib2R5RnJvbVdvcmxkID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICBQaHlzaWNzLnJlbW92ZVJpZ2lkYm9keSh0aGlzKTtcclxuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gcHJpdmF0ZSBFVkVOVCBmdW5jdGlvbnNcclxuICAgIC8vQ2FsY3VsYXRpbmcgdGhlIGNlbnRlciBvZiBhIGNvbGxpc2lvbiBhcyBhIHNpbmd1bGFyIHBvaW50IC0gaW4gY2FzZSB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHBvaW50IC0gYnkgZ2V0dGluZyB0aGUgZ2VvbWV0cmljYWwgY2VudGVyIG9mIGFsbCBjb2xsaWRpbmcgcG9pbnRzXHJcbiAgICBwcml2YXRlIGNvbGxpc2lvbkNlbnRlclBvaW50KF9jb2xQb2ludHM6IE9JTU8uTWFuaWZvbGRQb2ludFtdLCBfbnVtUG9pbnRzOiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHRvdGFsUG9pbnRzOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdG90YWxYOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdG90YWxZOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdG90YWxaOiBudW1iZXIgPSAwO1xyXG4gICAgICBfY29sUG9pbnRzLmZvckVhY2goKF92YWx1ZTogT0lNTy5NYW5pZm9sZFBvaW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKHRvdGFsUG9pbnRzIDwgX251bVBvaW50cykge1xyXG4gICAgICAgICAgdG90YWxQb2ludHMrKztcclxuICAgICAgICAgIHRvdGFsWCArPSBfdmFsdWUuZ2V0UG9zaXRpb24yKCkueDtcclxuICAgICAgICAgIHRvdGFsWSArPSBfdmFsdWUuZ2V0UG9zaXRpb24yKCkueTtcclxuICAgICAgICAgIHRvdGFsWiArPSBfdmFsdWUuZ2V0UG9zaXRpb24yKCkuejtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModG90YWxYIC8gX251bVBvaW50cywgdG90YWxZIC8gX251bVBvaW50cywgdG90YWxaIC8gX251bVBvaW50cyk7O1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBjb2xsaXNpb25FbnRlcihfY29udGFjdDogT0lNTy5Db250YWN0KTogdm9pZCB7XHJcbiAgICAgIGxldCBib2R5QTogQ29tcG9uZW50UmlnaWRib2R5ID0gX2NvbnRhY3QuZ2V0U2hhcGUxKCk/LnVzZXJEYXRhO1xyXG4gICAgICBsZXQgYm9keUI6IENvbXBvbmVudFJpZ2lkYm9keSA9IF9jb250YWN0LmdldFNoYXBlMigpPy51c2VyRGF0YTtcclxuXHJcbiAgICAgIGlmICghYm9keUEgfHwgIWJvZHlCIHx8IGJvZHlBLmNvbGxpc2lvbnMuaW5jbHVkZXMoYm9keUIpKSAvLyBhbHJlYWR5IGVudGVyZWRcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBib2R5QS5jb2xsaXNpb25zLnB1c2goYm9keUIpO1xyXG4gICAgICBib2R5Qi5jb2xsaXNpb25zLnB1c2goYm9keUEpO1xyXG5cclxuICAgICAgLy8gVE9ETzogbWF5YmUgcmF0aGVyIGV4cG9zZSB0aGUgbWFuaWZvbGQgdG8gdGhlIGV2ZW50IG9yIHNvbWV0aGluZ1xyXG4gICAgICBsZXQgbWFuaWZvbGQ6IE9JTU8uTWFuaWZvbGQgPSBfY29udGFjdC5nZXRNYW5pZm9sZCgpO1xyXG4gICAgICBsZXQgcG9pbnRzOiBPSU1PLk1hbmlmb2xkUG9pbnRbXSA9IG1hbmlmb2xkLmdldFBvaW50cygpOyAvLyBBbGwgcG9pbnRzIGluIHRoZSBjb2xsaXNpb24gd2hlcmUgdGhlIHR3byBib2RpZXMgYXJlIHRvdWNoaW5nLCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZnVsbCBpbXBhY3RcclxuICAgICAgbGV0IG5vcm1hbEltcHVsc2U6IG51bWJlciA9IDA7XHJcbiAgICAgIGxldCB0YW5nZW50SW1wdWxzZTogbnVtYmVyID0gMDtcclxuICAgICAgbGV0IGJpbm9ybWFsSW1wdWxzZTogbnVtYmVyID0gMDtcclxuICAgICAgZm9yIChsZXQgbWFuaWZvbGRQb2ludCBvZiBwb2ludHMpIHsgLy8gVGhlIGltcGFjdCBvZiB0aGUgY29sbGlzaW9uIGludm9sdmluZyBhbGwgdG91Y2hpbmcgcG9pbnRzXHJcbiAgICAgICAgbm9ybWFsSW1wdWxzZSArPSBtYW5pZm9sZFBvaW50LmdldE5vcm1hbEltcHVsc2UoKTtcclxuICAgICAgICB0YW5nZW50SW1wdWxzZSArPSBtYW5pZm9sZFBvaW50LmdldFRhbmdlbnRJbXB1bHNlKCk7XHJcbiAgICAgICAgYmlub3JtYWxJbXB1bHNlICs9IG1hbmlmb2xkUG9pbnQuZ2V0Qmlub3JtYWxJbXB1bHNlKCk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IG5vcm1hbDogT0lNTy5WZWMzID0gbWFuaWZvbGQuZ2V0Tm9ybWFsKCk7XHJcbiAgICAgIGxldCBjb2xsaXNpb25Ob3JtYWw6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMyhub3JtYWwueCwgbm9ybWFsLnksIG5vcm1hbC56KTtcclxuICAgICAgbGV0IGNvbGxpc2lvbkNlbnRlclBvaW50OiBWZWN0b3IzID0gYm9keUEuY29sbGlzaW9uQ2VudGVyUG9pbnQocG9pbnRzLCBtYW5pZm9sZC5nZXROdW1Qb2ludHMoKSk7XHJcbiAgICAgIGJvZHlBLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50UGh5c2ljcyhFVkVOVF9QSFlTSUNTLkNPTExJU0lPTl9FTlRFUiwgYm9keUIsIG5vcm1hbEltcHVsc2UsIHRhbmdlbnRJbXB1bHNlLCBiaW5vcm1hbEltcHVsc2UsIGNvbGxpc2lvbkNlbnRlclBvaW50LCBjb2xsaXNpb25Ob3JtYWwpKTtcclxuICAgICAgYm9keUIuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnRQaHlzaWNzKEVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VOVEVSLCBib2R5QSwgbm9ybWFsSW1wdWxzZSwgdGFuZ2VudEltcHVsc2UsIGJpbm9ybWFsSW1wdWxzZSwgY29sbGlzaW9uQ2VudGVyUG9pbnQsIGNvbGxpc2lvbk5vcm1hbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uRXhpdChfY29udGFjdDogT0lNTy5Db250YWN0KTogdm9pZCB7XHJcbiAgICAgIGxldCBib2R5QTogQ29tcG9uZW50UmlnaWRib2R5ID0gX2NvbnRhY3QuZ2V0U2hhcGUxKCk/LnVzZXJEYXRhO1xyXG4gICAgICBsZXQgYm9keUI6IENvbXBvbmVudFJpZ2lkYm9keSA9IF9jb250YWN0LmdldFNoYXBlMigpPy51c2VyRGF0YTtcclxuXHJcbiAgICAgIGlmICghYm9keUEgfHwgIWJvZHlCIHx8ICFib2R5QS5jb2xsaXNpb25zLmluY2x1ZGVzKGJvZHlCKSkgLy8gYWxyZWFkeSBleGl0ZWRcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBib2R5QS5jb2xsaXNpb25zLnNwbGljZShib2R5QS5jb2xsaXNpb25zLmluZGV4T2YoYm9keUIpLCAxKTtcclxuICAgICAgYm9keUIuY29sbGlzaW9ucy5zcGxpY2UoYm9keUIuY29sbGlzaW9ucy5pbmRleE9mKGJvZHlBKSwgMSk7XHJcblxyXG4gICAgICBib2R5QS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudFBoeXNpY3MoRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRVhJVCwgYm9keUIsIDAsIDAsIDApKTtcclxuICAgICAgYm9keUIuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnRQaHlzaWNzKEVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VYSVQsIGJvZHlBLCAwLCAwLCAwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFRyaWdnZXIgRW50ZXJpbmdFdmVudCBDYWxsYmFjaywgYXV0b21hdGljYWxseSBjYWxsZWQgYnkgT0lNTyBQaHlzaWNzIHdpdGhpbiB0aGVpciBjYWxjdWxhdGlvbnMuXHJcbiAgICAqIFNpbmNlIHRoZSBldmVudCBkb2VzIG5vdCBrbm93IHdoaWNoIGJvZHkgaXMgdGhlIHRyaWdnZXIgaW5pYXRvciwgdGhlIGV2ZW50IGNhbiBiZSBsaXN0ZW5lZCB0b1xyXG4gICAgKiBvbiBlaXRoZXIgdGhlIHRyaWdnZXIgb3IgdGhlIHRyaWdnZXJlZC4gKFRoaXMgaXMgb25seSBwb3NzaWJsZSB3aXRoIHRoZSBGVURHRSBPSU1PIEZvcmshKVxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgdHJpZ2dlckVudGVyKF9jb250YWN0OiBPSU1PLkNvbnRhY3QpOiB2b2lkIHtcclxuICAgICAgbGV0IGJvZHlBOiBDb21wb25lbnRSaWdpZGJvZHkgPSBfY29udGFjdC5nZXRTaGFwZTEoKT8udXNlckRhdGE7XHJcbiAgICAgIGxldCBib2R5QjogQ29tcG9uZW50UmlnaWRib2R5ID0gX2NvbnRhY3QuZ2V0U2hhcGUyKCk/LnVzZXJEYXRhO1xyXG5cclxuICAgICAgaWYgKCFib2R5QSB8fCAhYm9keUIgfHwgYm9keUEudHJpZ2dlcmluZ3MuaW5jbHVkZXMoYm9keUIpKSAvLyBhbHJlYWR5IGVudGVyZWRcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBib2R5QS50cmlnZ2VyaW5ncy5wdXNoKGJvZHlCKTtcclxuICAgICAgYm9keUIudHJpZ2dlcmluZ3MucHVzaChib2R5QSk7XHJcblxyXG4gICAgICBsZXQgbWFuaWZvbGQ6IE9JTU8uTWFuaWZvbGQgPSBfY29udGFjdC5nZXRNYW5pZm9sZCgpO1xyXG4gICAgICBsZXQgcG9pbnRzOiBPSU1PLk1hbmlmb2xkUG9pbnRbXSA9IG1hbmlmb2xkLmdldFBvaW50cygpOyBcclxuICAgICAgbGV0IG5vcm1hbDogT0lNTy5WZWMzID0gbWFuaWZvbGQuZ2V0Tm9ybWFsKCk7XHJcbiAgICAgIGxldCBjb2xsaXNpb25Ob3JtYWw6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMyhub3JtYWwueCwgbm9ybWFsLnksIG5vcm1hbC56KTtcclxuICAgICAgbGV0IGNvbGxpc2lvbkNlbnRlclBvaW50OiBWZWN0b3IzID0gYm9keUEuY29sbGlzaW9uQ2VudGVyUG9pbnQocG9pbnRzLCBtYW5pZm9sZC5nZXROdW1Qb2ludHMoKSk7XHJcblxyXG4gICAgICBib2R5QS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudFBoeXNpY3MoRVZFTlRfUEhZU0lDUy5UUklHR0VSX0VOVEVSLCBib2R5QiwgMCwgMCwgMCwgY29sbGlzaW9uQ2VudGVyUG9pbnQsIGNvbGxpc2lvbk5vcm1hbCkpO1xyXG4gICAgICBib2R5Qi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudFBoeXNpY3MoRVZFTlRfUEhZU0lDUy5UUklHR0VSX0VOVEVSLCBib2R5QSwgMCwgMCwgMCwgY29sbGlzaW9uQ2VudGVyUG9pbnQsIGNvbGxpc2lvbk5vcm1hbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBUcmlnZ2VyIExlYXZpbmdFdmVudCBDYWxsYmFjaywgYXV0b21hdGljYWxseSBjYWxsZWQgYnkgT0lNTyBQaHlzaWNzIHdpdGhpbiB0aGVpciBjYWxjdWxhdGlvbnMuXHJcbiAgICAqIFNpbmNlIHRoZSBldmVudCBkb2VzIG5vdCBrbm93IHdoaWNoIGJvZHkgaXMgdGhlIHRyaWdnZXIgaW5pYXRvciwgdGhlIGV2ZW50IGNhbiBiZSBsaXN0ZW5lZCB0b1xyXG4gICAgKiBvbiBlaXRoZXIgdGhlIHRyaWdnZXIgb3IgdGhlIHRyaWdnZXJlZC4gKFRoaXMgaXMgb25seSBwb3NzaWJsZSB3aXRoIHRoZSBGVURHRSBPSU1PIEZvcmshKVxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgdHJpZ2dlckV4aXQoX2NvbnRhY3Q6IE9JTU8uQ29udGFjdCk6IHZvaWQge1xyXG4gICAgICBsZXQgYm9keUE6IENvbXBvbmVudFJpZ2lkYm9keSA9IF9jb250YWN0LmdldFNoYXBlMSgpPy51c2VyRGF0YTtcclxuICAgICAgbGV0IGJvZHlCOiBDb21wb25lbnRSaWdpZGJvZHkgPSBfY29udGFjdC5nZXRTaGFwZTIoKT8udXNlckRhdGE7XHJcblxyXG4gICAgICBpZiAoIWJvZHlBIHx8ICFib2R5QiB8fCAhYm9keUEudHJpZ2dlcmluZ3MuaW5jbHVkZXMoYm9keUIpKSAvLyBhbHJlYWR5IGV4aXRlZFxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGJvZHlBLnRyaWdnZXJpbmdzLnNwbGljZShib2R5QS5jb2xsaXNpb25zLmluZGV4T2YoYm9keUIpLCAxKTtcclxuICAgICAgYm9keUIudHJpZ2dlcmluZ3Muc3BsaWNlKGJvZHlCLmNvbGxpc2lvbnMuaW5kZXhPZihib2R5QSksIDEpO1xyXG5cclxuICAgICAgYm9keUEuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnRQaHlzaWNzKEVWRU5UX1BIWVNJQ1MuVFJJR0dFUl9FWElULCBib2R5QiwgMCwgMCwgMCkpO1xyXG4gICAgICBib2R5Qi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudFBoeXNpY3MoRVZFTlRfUEhZU0lDUy5UUklHR0VSX0VYSVQsIGJvZHlBLCAwLCAwLCAwKSk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqIEludGVybmFsIGNsYXNzIGZvciBob2xkaW5nIGRhdGEgYWJvdXQgcGh5c2ljcyBkZWJ1ZyB2ZXJ0aWNlcy4qL1xyXG4gIGV4cG9ydCBjbGFzcyBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXIge1xyXG4gICAgcHVibGljIGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG4gICAgcHVibGljIG51bVZlcnRpY2VzOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGF0dHJpYnM6IEFycmF5PFBoeXNpY3NEZWJ1Z1ZlcnRleEF0dHJpYnV0ZT47XHJcbiAgICBwdWJsaWMgaW5kaWNlczogQXJyYXk8bnVtYmVyPjtcclxuICAgIHB1YmxpYyBvZmZzZXRzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHVibGljIHN0cmlkZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGJ1ZmZlcjogV2ViR0xCdWZmZXI7XHJcbiAgICBwdWJsaWMgZGF0YUxlbmd0aDogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBTZXR1cCB0aGUgcmVuZGVyaW5nIGNvbnRleHQgZm9yIHRoaXMgYnVmZmVyIGFuZCBjcmVhdGUgdGhlIGFjdHVhbCBidWZmZXIgZm9yIHRoaXMgY29udGV4dC4gKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfcmVuZGVyaW5nQ29udGV4dDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICB0aGlzLmdsID0gX3JlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5nbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogRmlsbCB0aGUgYm91bmQgYnVmZmVyIHdpdGggZGF0YS4gVXNlZCBhdCBidWZmZXIgaW5pdGlhbGl6YXRpb24gKi9cclxuICAgIHB1YmxpYyBzZXREYXRhKF9hcnJheTogQXJyYXk8bnVtYmVyPik6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5hdHRyaWJzID09IG51bGwpIHRocm93IFwic2V0IGF0dHJpYnV0ZXMgZmlyc3RcIjtcclxuICAgICAgdGhpcy5udW1WZXJ0aWNlcyA9IF9hcnJheS5sZW5ndGggLyAodGhpcy5zdHJpZGUgLyA0KTtcclxuICAgICAgdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmJ1ZmZlcik7XHJcbiAgICAgIHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShfYXJyYXkpLCB0aGlzLmdsLkRZTkFNSUNfRFJBVyk7XHJcbiAgICAgIC8vbm90IG5lY2Vzc2FyeSBhbiBpbiB3ZWJnbDIgYW55bW9yZSB0byByZWJpbmQgdGhlIHNhbWUgbGFzdCBidWZmZXIgKHdoaWNoIGlzIGFjaGlldmVkIGJ5IGdpdmluZyBhIG51bGwgYnVmZmVyKSwgYWZ0ZXIgYnVmZmVyIGlzIGNoYW5nZWQuIFJlbW92ZWQgaXQgb24gYWxsIG90aGVyIG9jY2FzaW9uc1xyXG4gICAgICAvLyB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsIG51bGwpOyBcclxuICAgIH1cclxuXHJcbiAgICAvKiogU2V0IFNoYWRlciBBdHRyaWJ1dGVzIGluZm9ybWF0aW9ucyBieSBnZXR0aW5nIHRoZWlyIHBvc2l0aW9uIGluIHRoZSBzaGFkZXIsIHNldHRpbmcgdGhlIG9mZnNldCwgc3RyaWRlIGFuZCBzaXplLiBGb3IgbGF0ZXIgdXNlIGluIHRoZSBiaW5kaW5nIHByb2Nlc3MgKi9cclxuICAgIHB1YmxpYyBzZXRBdHRyaWJzKF9hdHRyaWJzOiBBcnJheTxQaHlzaWNzRGVidWdWZXJ0ZXhBdHRyaWJ1dGU+KTogdm9pZCB7XHJcbiAgICAgIHRoaXMuYXR0cmlicyA9IF9hdHRyaWJzO1xyXG4gICAgICB0aGlzLm9mZnNldHMgPSBbXTtcclxuICAgICAgdGhpcy5zdHJpZGUgPSAwO1xyXG4gICAgICBsZXQgbjogbnVtYmVyID0gX2F0dHJpYnMubGVuZ3RoO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5vZmZzZXRzLnB1c2godGhpcy5zdHJpZGUpO1xyXG4gICAgICAgIHRoaXMuc3RyaWRlICs9IF9hdHRyaWJzW2ldLmZsb2F0MzJDb3VudCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDsgLy8gMzJiaXQgZmxvYXQgQnl0ZXMgYXJlIGEgY29uc3RhbnQgb2YgNFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGF0dHJpYnV0ZSBpbiB0aGUgc2hhZGVyICovXHJcbiAgICBwdWJsaWMgbG9hZEF0dHJpYkluZGljZXMoX3Byb2dyYW06IFBoeXNpY3NEZWJ1Z1NoYWRlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLmluZGljZXMgPSBfcHJvZ3JhbS5nZXRBdHRyaWJJbmRpY2VzKHRoaXMuYXR0cmlicyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEVuYWJsZSBhIGF0dHJpYnV0ZSBpbiBhIHNoYWRlciBmb3IgdGhpcyBjb250ZXh0LCAqL1xyXG4gICAgcHVibGljIGJpbmRBdHRyaWJzKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5pbmRpY2VzID09IG51bGwpIHRocm93IFwiaW5kaWNlcyBhcmUgbm90IGxvYWRlZFwiO1xyXG4gICAgICBsZXQgbjogbnVtYmVyID0gdGhpcy5hdHRyaWJzLmxlbmd0aDtcclxuICAgICAgdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmJ1ZmZlcik7IC8vbWFraW5nIHRoZSBidWZmZXIgb2YgdGhpcyBjbGFzcyB0aGUgY3VycmVudCBidWZmZXJcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5pbmRpY2VzW2ldKTsgLy9lbmFibGUgdGhlIEF0dHJpYnV0ZVxyXG4gICAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmluZGljZXNbaV0sIHRoaXMuYXR0cmlic1tpXS5mbG9hdDMyQ291bnQsIHRoaXMuZ2wuRkxPQVQsIGZhbHNlLCB0aGlzLnN0cmlkZSwgdGhpcy5vZmZzZXRzW2ldKTsgLy9jcmVhdGVzIGEgcG9pbnRlciBhbmQgc3RydWN0dXJlIGZvciB0aGlzIGF0dHJpYnV0ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogSW50ZXJuYWwgY2xhc3MgZm9yIGhvbGRpbmcgZGF0YSBhYm91dCBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXJzICovXHJcbiAgZXhwb3J0IGNsYXNzIFBoeXNpY3NEZWJ1Z0luZGV4QnVmZmVyIHtcclxuICAgIHB1YmxpYyBnbDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuICAgIHB1YmxpYyBidWZmZXI6IFdlYkdMQnVmZmVyO1xyXG4gICAgcHVibGljIGNvdW50OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFNldHVwIHRoZSByZW5kZXJpbmcgY29udGV4dCBmb3IgdGhpcyBidWZmZXIgYW5kIGNyZWF0ZSB0aGUgYWN0dWFsIGJ1ZmZlciBmb3IgdGhpcyBjb250ZXh0LiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9yZW5kZXJpbmdDb250ZXh0OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgIHRoaXMuZ2wgPSBfcmVuZGVyaW5nQ29udGV4dDtcclxuICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBGaWxsIHRoZSBib3VuZCBidWZmZXIgd2l0aCBkYXRhIGFtb3VudC4gVXNlZCBhdCBidWZmZXIgaW5pdGlhbGl6YXRpb24gKi9cclxuICAgIHB1YmxpYyBzZXREYXRhKF9hcnJheTogQXJyYXk8bnVtYmVyPik6IHZvaWQge1xyXG4gICAgICB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5idWZmZXIpO1xyXG4gICAgICB0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IEludDE2QXJyYXkoX2FycmF5KSwgdGhpcy5nbC5EWU5BTUlDX0RSQVcpO1xyXG4gICAgICB0aGlzLmNvdW50ID0gX2FycmF5Lmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogVGhlIGFjdHVhbCBEcmF3Q2FsbCBmb3IgcGh5c2ljc0RlYnVnRHJhdyBCdWZmZXJzLiBUaGlzIGlzIHdoZXJlIHRoZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBkZWJ1ZyBpcyBhY3R1YWxseSBkcmF3bi4gKi9cclxuICAgIHB1YmxpYyBkcmF3KF9tb2RlOiBudW1iZXIgPSB0aGlzLmdsLlRSSUFOR0xFUywgX2NvdW50OiBudW1iZXIgPSAtMSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5idWZmZXIpO1xyXG4gICAgICB0aGlzLmdsLmRyYXdFbGVtZW50cyhfbW9kZSwgX2NvdW50ID49IDAgPyBfY291bnQgOiB0aGlzLmNvdW50LCB0aGlzLmdsLlVOU0lHTkVEX1NIT1JULCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBJbnRlcm5hbCBjbGFzcyBmb3IgbWFuYWdpbmcgZGF0YSBhYm91dCB3ZWJHTCBBdHRyaWJ1dGVzICovXHJcbiAgZXhwb3J0IGNsYXNzIFBoeXNpY3NEZWJ1Z1ZlcnRleEF0dHJpYnV0ZSB7XHJcbiAgICBwdWJsaWMgZmxvYXQzMkNvdW50OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfZmxvYXQzMkNvdW50OiBudW1iZXIsIF9uYW1lOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuZmxvYXQzMkNvdW50ID0gX2Zsb2F0MzJDb3VudDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBJbnRlcm5hbCBjbGFzcyBmb3IgU2hhZGVycyB1c2VkIG9ubHkgYnkgdGhlIHBoeXNpY3MgZGVidWdEcmF3ICovXHJcbiAgZXhwb3J0IGNsYXNzIFBoeXNpY3NEZWJ1Z1NoYWRlciB7XHJcbiAgICBwdWJsaWMgZ2w6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICBwdWJsaWMgcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xyXG4gICAgcHVibGljIHZlcnRleFNoYWRlcjogV2ViR0xTaGFkZXI7XHJcbiAgICBwdWJsaWMgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyO1xyXG4gICAgcHVibGljIHVuaWZvcm1Mb2NhdGlvbk1hcDogTWFwPHN0cmluZywgV2ViR0xVbmlmb3JtTG9jYXRpb24+O1xyXG5cclxuICAgIC8qKiBJbnRyb2R1Y2UgdGhlIEZVREdFIFJlbmRlcmluZyBDb250ZXh0IHRvIHRoaXMgY2xhc3MsIGNyZWF0aW5nIGEgcHJvZ3JhbSBhbmQgdmVydGV4L2ZyYWdtZW50IHNoYWRlciBpbiB0aGlzIGNvbnRleHQgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfcmVuZGVyaW5nQ29udGV4dDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICB0aGlzLmdsID0gX3JlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICAgIHRoaXMucHJvZ3JhbSA9IHRoaXMuZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgICB0aGlzLnZlcnRleFNoYWRlciA9IHRoaXMuZ2wuY3JlYXRlU2hhZGVyKHRoaXMuZ2wuVkVSVEVYX1NIQURFUik7XHJcbiAgICAgIHRoaXMuZnJhZ21lbnRTaGFkZXIgPSB0aGlzLmdsLmNyZWF0ZVNoYWRlcih0aGlzLmdsLkZSQUdNRU5UX1NIQURFUik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRha2UgZ2xzbCBzaGFkZXJzIGFzIHN0cmluZ3MgYW5kIGNvbXBpbGUgdGhlbSwgYXR0YWNoaW5nIHRoZSBjb21waWxlZCBzaGFkZXJzIHRvIGEgcHJvZ3JhbSB0aGF0cyB1c2VkIGJ5IHRoaXMgcmVuZGVyaW5nIGNvbnRleHQuICovXHJcbiAgICBwdWJsaWMgY29tcGlsZShfdmVydGV4U291cmNlOiBzdHJpbmcsIF9mcmFnbWVudFNvdXJjZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMudW5pZm9ybUxvY2F0aW9uTWFwID0gbmV3IE1hcDxzdHJpbmcsIFdlYkdMVW5pZm9ybUxvY2F0aW9uPigpO1xyXG4gICAgICB0aGlzLmNvbXBpbGVTaGFkZXIodGhpcy52ZXJ0ZXhTaGFkZXIsIF92ZXJ0ZXhTb3VyY2UpO1xyXG4gICAgICB0aGlzLmNvbXBpbGVTaGFkZXIodGhpcy5mcmFnbWVudFNoYWRlciwgX2ZyYWdtZW50U291cmNlKTtcclxuICAgICAgdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5wcm9ncmFtLCB0aGlzLnZlcnRleFNoYWRlcik7XHJcbiAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMucHJvZ3JhbSwgdGhpcy5mcmFnbWVudFNoYWRlcik7XHJcbiAgICAgIHRoaXMuZ2wubGlua1Byb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuICAgICAgaWYgKCF0aGlzLmdsLmdldFByb2dyYW1QYXJhbWV0ZXIodGhpcy5wcm9ncmFtLCB0aGlzLmdsLkxJTktfU1RBVFVTKSkgeyAgLy9tYWtlIHN1cmUgdGhlIGxpbmtpbmcgd29ya2VkLCBzbyB0aGUgcHJvZ3JhbSBpcyB2YWxpZCwgYW5kIHNoYWRlcnMgYXJlIHdvcmtpbmdcclxuICAgICAgICBEZWJ1Zy5sb2codGhpcy5nbC5nZXRQcm9ncmFtSW5mb0xvZyh0aGlzLnByb2dyYW0pKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmdsLnZhbGlkYXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICBpZiAoIXRoaXMuZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLnByb2dyYW0sIHRoaXMuZ2wuVkFMSURBVEVfU1RBVFVTKSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUiB2YWxpZGF0aW5nIHByb2dyYW0hXCIsIHRoaXMuZ2wuZ2V0UHJvZ3JhbUluZm9Mb2codGhpcy5wcm9ncmFtKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCBpbmRleCBvZiBhIGF0dHJpYnV0ZSBpbiBhIHNoYWRlciBpbiB0aGlzIHByb2dyYW0gKi9cclxuICAgIHB1YmxpYyBnZXRBdHRyaWJJbmRleChfbmFtZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBfbmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCB0aGUgbG9jYXRpb24gb2YgYSB1bmlmb3JtIGluIGEgc2hhZGVyIGluIHRoaXMgcHJvZ3JhbSAqL1xyXG4gICAgcHVibGljIGdldFVuaWZvcm1Mb2NhdGlvbihfbmFtZTogc3RyaW5nKTogV2ViR0xVbmlmb3JtTG9jYXRpb24ge1xyXG4gICAgICBpZiAodGhpcy51bmlmb3JtTG9jYXRpb25NYXAuaGFzKF9uYW1lKSkgcmV0dXJuIHRoaXMudW5pZm9ybUxvY2F0aW9uTWFwLmdldChfbmFtZSk7XHJcbiAgICAgIGxldCBsb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIF9uYW1lKTtcclxuICAgICAgdGhpcy51bmlmb3JtTG9jYXRpb25NYXAuc2V0KF9uYW1lLCBsb2NhdGlvbik7XHJcbiAgICAgIHJldHVybiBsb2NhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogR2V0IGFsbCBpbmRpY2VzIGZvciBldmVyeSBhdHRyaWJ1dGUgaW4gdGhlIHNoYWRlcnMgb2YgdGhpcyBwcm9ncmFtICovXHJcbiAgICBwdWJsaWMgZ2V0QXR0cmliSW5kaWNlcyhfYXR0cmliczogQXJyYXk8UGh5c2ljc0RlYnVnVmVydGV4QXR0cmlidXRlPik6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICBsZXQgaW5kaWNlczogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgICBfYXR0cmlicy5mb3JFYWNoKF92YWx1ZSA9PiB7XHJcbiAgICAgICAgaW5kaWNlcy5wdXNoKHRoaXMuZ2V0QXR0cmliSW5kZXgoX3ZhbHVlLm5hbWUpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBpbmRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUZWxsIHRoZSBGVURHRSBSZW5kZXJpbmcgQ29udGV4dCB0byB1c2UgdGhpcyBwcm9ncmFtIHRvIGRyYXcuICovXHJcbiAgICBwdWJsaWMgdXNlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ29tcGlsZSBhIHNoYWRlciBvdXQgb2YgYSBzdHJpbmcgYW5kIHZhbGlkYXRlIGl0LiAqL1xyXG4gICAgcHVibGljIGNvbXBpbGVTaGFkZXIoX3NoYWRlcjogV2ViR0xTaGFkZXIsIF9zb3VyY2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICB0aGlzLmdsLnNoYWRlclNvdXJjZShfc2hhZGVyLCBfc291cmNlKTtcclxuICAgICAgdGhpcy5nbC5jb21waWxlU2hhZGVyKF9zaGFkZXIpO1xyXG4gICAgICBpZiAoIXRoaXMuZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKF9zaGFkZXIsIHRoaXMuZ2wuQ09NUElMRV9TVEFUVVMpKSB7XHJcbiAgICAgICAgRGVidWcubG9nKHRoaXMuZ2wuZ2V0U2hhZGVySW5mb0xvZyhfc2hhZGVyKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBJbnRlcm5hbCBDbGFzcyB1c2VkIHRvIGRyYXcgZGVidWdJbmZvcm1hdGlvbnMgYWJvdXQgdGhlIHBoeXNpY3Mgc2ltdWxhdGlvbiBvbnRvIHRoZSByZW5kZXJDb250ZXh0LiBObyB1c2VyIGludGVyYWN0aW9uIG5lZWRlZC4gXHJcbiAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUgMjAyMCAvL0Jhc2VkIG9uIE9pbW9QaHlzaWNzIEhheGUgRGVidWdEcmF3RGVtbyBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGh5c2ljc0RlYnVnRHJhdyBleHRlbmRzIFJlbmRlcldlYkdMIHtcclxuICAgIHB1YmxpYyBvaW1vRGVidWdEcmF3OiBPSU1PLkRlYnVnRHJhdzsgLy90aGUgb3JpZ2luYWwgcGh5c2ljcyBlbmdpbmUgZGVidWdEcmF3IGNsYXNzIHJlY2VpdmluZyBjYWxscyBmcm9tIHRoZSBvaW1vUGh5c2ljcy5Xb3JsZCwgYW5kIHByb3ZpZGluZyBpbmZvcm1hdGlvbnMgaW4gZm9ybSBvZiBwb2ludHMvbGluZXMvdHJpYW5nbGVzIHdoYXQgdGhlIHBoeXNpY3Mgd29ybGQgbG9va3MgbGlrZVxyXG4gICAgcHVibGljIHN0eWxlOiBPSU1PLkRlYnVnRHJhd1N0eWxlOyAvL2NvbG9ycyBvZiB0aGUgZGVidWcgaW5mb3JtYXRpb25zLCB1bmNoYW5nZWQgaW4gRlVER0UgaW50ZWdyYXRpb24sIGJhc2ljYWxseSBjb2xvcmluZyB0aGluZ3MgbGlrZSBzbGVlcGluZy9hY3RpdmUgcmIncyBkaWZmZXJlbnRseSwgam9pbnRzIHdoaXRlIGFuZCBzdWNoLiBObyBuZWVkIHRvIGhhdmUgdXNlcnMgY2hhbmdlIGFueXRoaW5nLlxyXG4gICAgcHVibGljIGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG5cclxuICAgIHB1YmxpYyBwcm9ncmFtOiBXZWJHTFByb2dyYW07IC8vcHJvZ3JhbSB0aGF0IGlzIHVzZWQgaW4gdGhlIEZVREdFIHJlbmRlcmluZyBjb250ZXh0IGNvbnRhaW5pbmcgc2hhZGVycyBhbmQgdXNlIGluZm9ybWF0aW9ucyBmb3IgdGhlIGNvbnRleHQgdG8ga25vdyBob3cgdG8gZHJhd1xyXG4gICAgcHVibGljIHNoYWRlcjogUGh5c2ljc0RlYnVnU2hhZGVyO1xyXG5cclxuICAgIC8vQnVmZmVycyBmb3IgcG9pbnRzL2xpbmVzL3RyaWFuZ2xlcy4gSW5kZXggQnVmZmVyIGZvciB0aGUgYW1vdW50IG9mIGRyYXdDYWxscyBhbmQgVmVydGV4IEJ1ZmZlciBmb3IgdGhlIGluZm9ybWF0aW9uc1xyXG4gICAgcHVibGljIHBvaW50VkJPOiBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXI7XHJcbiAgICBwdWJsaWMgcG9pbnRJQk86IFBoeXNpY3NEZWJ1Z0luZGV4QnVmZmVyO1xyXG5cclxuICAgIHB1YmxpYyBsaW5lVkJPOiBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXI7XHJcbiAgICBwdWJsaWMgbGluZUlCTzogUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXI7XHJcblxyXG4gICAgcHVibGljIHRyaVZCTzogUGh5c2ljc0RlYnVnVmVydGV4QnVmZmVyO1xyXG4gICAgcHVibGljIHRyaUlCTzogUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXI7XHJcblxyXG4gICAgcHVibGljIHBvaW50RGF0YTogQXJyYXk8bnVtYmVyPjtcclxuICAgIHB1YmxpYyBwb2ludElib0RhdGE6IEFycmF5PG51bWJlcj47XHJcbiAgICBwdWJsaWMgbnVtUG9pbnREYXRhOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGxpbmVEYXRhOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHVibGljIGxpbmVJYm9EYXRhOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHVibGljIG51bUxpbmVEYXRhOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIHRyaURhdGE6IEFycmF5PG51bWJlcj47XHJcbiAgICBwdWJsaWMgdHJpSWJvRGF0YTogQXJyYXk8bnVtYmVyPjtcclxuICAgIHB1YmxpYyBudW1UcmlEYXRhOiBudW1iZXI7XHJcblxyXG4gICAgLyoqIENyZWF0aW5nIHRoZSBkZWJ1ZyBmb3IgcGh5c2ljcyBpbiBGVURHRS4gVGVsbCBpdCB0byBkcmF3IG9ubHkgd2lyZWZyYW1lIG9iamVjdHMsIHNpbmNlIEZVREdFIGlzIGhhbmRsaW5nIHJlbmRlcmluZyBvZiB0aGUgb2JqZWN0cyBiZXNpZGVzIHBoeXNpY3MuIFxyXG4gICAgICogT3ZlcnJpZGUgT2ltb1BoeXNpY3MgRnVuY3Rpb25zIHdpdGggb3duIHJlbmRlcmluZy4gSW5pdGlhbGl6ZSBidWZmZXJzIGFuZCBjb25uZWN0IHRoZW0gd2l0aCB0aGUgY29udGV4dCBmb3IgbGF0ZXIgdXNlLiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgdGhpcy5zdHlsZSA9IG5ldyBPSU1PLkRlYnVnRHJhd1N0eWxlKCk7XHJcbiAgICAgIHRoaXMub2ltb0RlYnVnRHJhdyA9IG5ldyBPSU1PLkRlYnVnRHJhdygpO1xyXG4gICAgICB0aGlzLm9pbW9EZWJ1Z0RyYXcud2lyZWZyYW1lID0gdHJ1ZTsgLy9UcmlhbmdsZSBSZW5kZXJpbmcgaXMgaGFuZGxlZCBieSBGVURHRSBzbywgb25seSB0aGUgcGh5c2ljcyBsaW5lcy9wb2ludHMgbmVlZCB0byBiZSByZW5kZXJlZCwgYWx0aG91Z2ggdHJpYW5nbGUgaXMgc3RpbGwgaW1wbGVtZW50ZWRcclxuXHJcbiAgICAgIHRoaXMuZ2wgPSBSZW5kZXJXZWJHTC5jcmMzO1xyXG4gICAgICB0aGlzLmluaXRpYWxpemVPdmVycmlkZSgpO1xyXG4gICAgICB0aGlzLnNoYWRlciA9IG5ldyBQaHlzaWNzRGVidWdTaGFkZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMuc2hhZGVyLmNvbXBpbGUodGhpcy52ZXJ0ZXhTaGFkZXJTb3VyY2UoKSwgdGhpcy5mcmFnbWVudFNoYWRlclNvdXJjZSgpKTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogUmVjZWl2ZSB0aGUgY3VycmVudCBEZWJ1Z01vZGUgZnJvbSB0aGUgcGh5c2ljcyBzZXR0aW5ncyBhbmQgc2V0IHRoZSBPaW1vUGh5c2ljcy5EZWJ1Z0RyYXcgYm9vbGVhbnMgdG8gc2hvdyBvbmx5IGNlcnRhaW4gaW5mb3JtYXRpb25zLlxyXG4gICAgICogTmVlZGVkIHNpbmNlIHNvbWUgZGVidWcgaW5mb3JtYXRpb25zIGV4Y2x1ZGUgb3RoZXJzLCBhbmQgY2FuJ3QgYmUgZHJhd24gYXQgdGhlIHNhbWUgdGltZSwgYnkgT2ltb1BoeXNpY3MuIEFuZCBmb3IgdXNlcnMgaXQgcHJvdmlkZXMgbW9yZSByZWFkYWJpbGl0eVxyXG4gICAgICogdG8gZGVidWcgb25seSB3aGF0IHRoZXkgbmVlZCBhbmQgaXMgY29tbW9ubHkgZGVidWdnZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXREZWJ1Z01vZGUoX21vZGU6IFBIWVNJQ1NfREVCVUdNT0RFID0gUEhZU0lDU19ERUJVR01PREUuTk9ORSk6IHZvaWQge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcclxuICAgICAgbGV0IGRyYXcgPSB7IGRyYXdBYWJiczogZmFsc2UsIGRyYXdCYXNlczogZmFsc2UsIGRyYXdCdmg6IGZhbHNlLCBkcmF3Q29udGFjdEJhc2VzOiBmYWxzZSwgZHJhd0NvbnRhY3RzOiBmYWxzZSwgZHJhd0pvaW50TGltaXRzOiBmYWxzZSwgZHJhd0pvaW50czogZmFsc2UsIGRyYXdQYWlyczogZmFsc2UsIGRyYXdTaGFwZXM6IGZhbHNlIH07XHJcblxyXG4gICAgICBzd2l0Y2ggKF9tb2RlKSB7XHJcbiAgICAgICAgY2FzZSBQSFlTSUNTX0RFQlVHTU9ERS5DT0xMSURFUlM6IC8vQ29sbGlkZXJzIGFuZCBCYXNlc1xyXG4gICAgICAgICAgZHJhdy5kcmF3QmFzZXMgPSBkcmF3LmRyYXdTaGFwZXMgPSB0cnVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBQSFlTSUNTX0RFQlVHTU9ERS5KT0lOVFNfQU5EX0NPTExJREVSOiAvL0NvbGxpZGVycyBhbmQgam9pbnRzXHJcbiAgICAgICAgICBkcmF3LmRyYXdKb2ludHMgPSBkcmF3LmRyYXdKb2ludExpbWl0cyA9IGRyYXcuZHJhd1NoYXBlcyA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFBIWVNJQ1NfREVCVUdNT0RFLlBIWVNJQ19PQkpFQ1RTX09OTFk6IC8vUGh5c2ljcyBPYmplY3RzIG9ubHksIHNob3dzIHNhbWUgYXMgQ29sbGlkZXIgLyBKb2ludHMgYnV0IGFsc28gaGlkaW5nIGV2ZXJ5IG90aGVyIGZ1ZGdlIG9iamVjdFxyXG4gICAgICAgICAgZHJhdy5kcmF3QmFzZXMgPSBkcmF3LmRyYXdKb2ludExpbWl0cyA9IGRyYXcuZHJhd0pvaW50cyA9IGRyYXcuZHJhd1NoYXBlcyA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFBIWVNJQ1NfREVCVUdNT0RFLkNPTlRBQ1RTOiAvL0NvbnRhY3RzXHJcbiAgICAgICAgICBkcmF3LmRyYXdCYXNlcyA9IGRyYXcuZHJhd0NvbnRhY3RCYXNlcyA9IGRyYXcuZHJhd0NvbnRhY3RzID0gZHJhdy5kcmF3UGFpcnMgPSBkcmF3LmRyYXdTaGFwZXMgPSB0cnVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBQSFlTSUNTX0RFQlVHTU9ERS5CT1VORElOR19CT1hFUzogLy9Cb3VuZGluZyBCb3ggLyBCcm9hZHBoYXNlIEJ2aCAvIEJhc2VzXHJcbiAgICAgICAgICBkcmF3LmRyYXdBYWJicyA9IGRyYXcuZHJhd0Jhc2VzID0gZHJhdy5kcmF3QnZoID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5vaW1vRGVidWdEcmF3LCBkcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ3JlYXRpbmcgdGhlIGVtcHR5IHJlbmRlciBidWZmZXJzLiBEZWZpbmluZyB0aGUgYXR0cmlidXRlcyB1c2VkIGluIHNoYWRlcnMuXHJcbiAgICAgKiBOZWVkcyB0byBjcmVhdGUgZW1wdHkgYnVmZmVycyB0byBhbHJlYWR5IGhhdmUgdGhlbSByZWFkeSB0byBkcmF3IGxhdGVyIG9uLCBsaW5raW5nIGlzIG9ubHkgcG9zc2libGUgd2l0aCBleGlzdGluZyBidWZmZXJzLiAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemVCdWZmZXJzKCk6IHZvaWQge1xyXG4gICAgICBsZXQgYXR0cmliczogQXJyYXk8UGh5c2ljc0RlYnVnVmVydGV4QXR0cmlidXRlPiA9IFtcclxuICAgICAgICBuZXcgUGh5c2ljc0RlYnVnVmVydGV4QXR0cmlidXRlKDMsIFwiYVBvc2l0aW9uXCIpLFxyXG4gICAgICAgIG5ldyBQaHlzaWNzRGVidWdWZXJ0ZXhBdHRyaWJ1dGUoMywgXCJhTm9ybWFsXCIpLFxyXG4gICAgICAgIG5ldyBQaHlzaWNzRGVidWdWZXJ0ZXhBdHRyaWJ1dGUoMywgXCJhQ29sb3JcIilcclxuICAgICAgXTtcclxuXHJcbiAgICAgIHRoaXMucG9pbnRWQk8gPSBuZXcgUGh5c2ljc0RlYnVnVmVydGV4QnVmZmVyKHRoaXMuZ2wpO1xyXG4gICAgICB0aGlzLnBvaW50SUJPID0gbmV3IFBoeXNpY3NEZWJ1Z0luZGV4QnVmZmVyKHRoaXMuZ2wpO1xyXG4gICAgICB0aGlzLnBvaW50VkJPLnNldEF0dHJpYnMoYXR0cmlicyk7XHJcbiAgICAgIHRoaXMucG9pbnRWQk8ubG9hZEF0dHJpYkluZGljZXModGhpcy5zaGFkZXIpO1xyXG4gICAgICB0aGlzLmxpbmVWQk8gPSBuZXcgUGh5c2ljc0RlYnVnVmVydGV4QnVmZmVyKHRoaXMuZ2wpO1xyXG4gICAgICB0aGlzLmxpbmVJQk8gPSBuZXcgUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMubGluZVZCTy5zZXRBdHRyaWJzKGF0dHJpYnMpO1xyXG4gICAgICB0aGlzLmxpbmVWQk8ubG9hZEF0dHJpYkluZGljZXModGhpcy5zaGFkZXIpO1xyXG4gICAgICB0aGlzLnRyaVZCTyA9IG5ldyBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMudHJpSUJPID0gbmV3IFBoeXNpY3NEZWJ1Z0luZGV4QnVmZmVyKHRoaXMuZ2wpO1xyXG4gICAgICB0aGlzLnRyaVZCTy5zZXRBdHRyaWJzKGF0dHJpYnMpO1xyXG4gICAgICB0aGlzLnRyaVZCTy5sb2FkQXR0cmliSW5kaWNlcyh0aGlzLnNoYWRlcik7XHJcblxyXG4gICAgICB0aGlzLmNsZWFyQnVmZmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBCZWZvcmUgT2ltb1BoeXNpY3Mud29ybGQgaXMgZmlsbGluZyB0aGUgZGVidWcuIE1ha2Ugc3VyZSB0aGUgYnVmZmVycyBhcmUgcmVzZXQuIEFsc28gcmVjZWl2aW5nIHRoZSBkZWJ1Z01vZGUgZnJvbSBzZXR0aW5ncyBhbmQgdXBkYXRpbmcgdGhlIGN1cnJlbnQgcHJvamVjdGlvbiBmb3IgdGhlIHZlcnRleFNoYWRlci4gKi9cclxuICAgIHB1YmxpYyBjbGVhckJ1ZmZlcnMoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZ2wubGluZVdpZHRoKDIuMCk7IC8vRG9lcyBub3QgYWZmZWN0IGFueXRoaW5nIGJlY2F1c2UgbGluZVdpZHRoIGlzIGN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBieSBNaWNyb3NvZnQgRWRnZSBhbmQgRlVER0UgaXMgb3B0aW1pemVkIGZvciBDaHJvbWVcclxuXHJcbiAgICAgIHRoaXMucG9pbnREYXRhID0gW107IC8vUmVzZXR0aW5nIHRoZSBkYXRhIHRvIGJlIGZpbGxlZCBhZ2FpblxyXG4gICAgICB0aGlzLmxpbmVEYXRhID0gW107XHJcbiAgICAgIHRoaXMudHJpRGF0YSA9IFtdO1xyXG5cclxuICAgICAgdGhpcy5udW1Qb2ludERhdGEgPSAwOyAvL1Jlc2V0dGluZyB0aGUgYW1vdW50IG9mIGRhdGEgY2FsbHNcclxuICAgICAgdGhpcy5udW1MaW5lRGF0YSA9IDA7XHJcbiAgICAgIHRoaXMubnVtVHJpRGF0YSA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFmdGVyIE9pbW9QaHlzaWNzLndvcmxkIGZpbGxlZCB0aGUgZGVidWcuIFJlbmRlcmluZyBjYWxscy4gU2V0dGluZyB0aGlzIHByb2dyYW0gdG8gYmUgdXNlZCBieSB0aGUgRlVER0UgcmVuZGVyaW5nIGNvbnRleHQuIEFuZCBkcmF3IGVhY2ggdXBkYXRlZCBidWZmZXIgYW5kIHJlc2V0dGluZyB0aGVtLiAqL1xyXG4gICAgcHVibGljIGRyYXdCdWZmZXJzKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNoYWRlci51c2UoKTtcclxuICAgICAgbGV0IHByb2plY3Rpb246IEZsb2F0MzJBcnJheSA9IFBoeXNpY3MubWFpbkNhbS5tdHhXb3JsZFRvVmlldy5nZXQoKTtcclxuICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLmdldFVuaWZvcm1Mb2NhdGlvbihcInVfbXR4TWVzaFRvVmlld1wiKSwgZmFsc2UsIHByb2plY3Rpb24pO1xyXG5cclxuXHJcbiAgICAgIGlmICh0aGlzLm51bVBvaW50RGF0YSA+IDApIHtcclxuICAgICAgICB0aGlzLnBvaW50SWJvRGF0YSA9IFtdOyAgLy9CdWZmZXIgc2l6ZSBtYXRjaGluZyB0byB3aGF0cyBuZWVkZWRcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5udW1Qb2ludERhdGE7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy5wb2ludElib0RhdGEucHVzaChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wb2ludElCTy5zZXREYXRhKHRoaXMucG9pbnRJYm9EYXRhKTsgLy9TZXQgSW5kZXggYnVmZmVyIHRvIGNvcnJlY3Qgc2l6ZVxyXG4gICAgICAgIHRoaXMucG9pbnRWQk8uc2V0RGF0YSh0aGlzLnBvaW50RGF0YSk7IC8vU2V0IFZlcnRleCBCdWZmZXIgdG8gY3VycmVudCBEYXRhXHJcbiAgICAgICAgdGhpcy5wb2ludFZCTy5iaW5kQXR0cmlicygpO1xyXG4gICAgICAgIHRoaXMucG9pbnRJQk8uZHJhdyh0aGlzLmdsLlBPSU5UUywgdGhpcy5udW1Qb2ludERhdGEpOyAvL1RoZSBhY3R1YWwgZHJhdyBjYWxsIGZvciBlYWNoIGluZGV4IGluIGlib1xyXG4gICAgICAgIHRoaXMubnVtUG9pbnREYXRhID0gMDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5udW1MaW5lRGF0YSA+IDApIHtcclxuICAgICAgICB0aGlzLmxpbmVJYm9EYXRhID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubnVtTGluZURhdGE7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy5saW5lSWJvRGF0YS5wdXNoKGkgKiAyKTtcclxuICAgICAgICAgIHRoaXMubGluZUlib0RhdGEucHVzaChpICogMiArIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpbmVJQk8uc2V0RGF0YSh0aGlzLmxpbmVJYm9EYXRhKTtcclxuICAgICAgICB0aGlzLmxpbmVWQk8uc2V0RGF0YSh0aGlzLmxpbmVEYXRhKTtcclxuICAgICAgICB0aGlzLmxpbmVWQk8uYmluZEF0dHJpYnMoKTtcclxuICAgICAgICB0aGlzLmxpbmVJQk8uZHJhdyh0aGlzLmdsLkxJTkVTLCB0aGlzLm51bUxpbmVEYXRhICogMik7XHJcbiAgICAgICAgdGhpcy5udW1MaW5lRGF0YSA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMubnVtVHJpRGF0YSA+IDApIHtcclxuICAgICAgICB0aGlzLnRyaUlib0RhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5udW1UcmlEYXRhOyBpKyspIHtcclxuICAgICAgICAgIHRoaXMudHJpSWJvRGF0YS5wdXNoKGkgKiAzKTtcclxuICAgICAgICAgIHRoaXMudHJpSWJvRGF0YS5wdXNoKGkgKiAzICsgMSk7XHJcbiAgICAgICAgICB0aGlzLnRyaUlib0RhdGEucHVzaChpICogMyArIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyaUlCTy5zZXREYXRhKHRoaXMudHJpSWJvRGF0YSk7XHJcbiAgICAgICAgdGhpcy50cmlWQk8uc2V0RGF0YSh0aGlzLnRyaURhdGEpO1xyXG4gICAgICAgIHRoaXMudHJpVkJPLmJpbmRBdHRyaWJzKCk7XHJcbiAgICAgICAgdGhpcy50cmlJQk8uZHJhdyh0aGlzLmdsLlRSSUFOR0xFUywgdGhpcy5udW1UcmlEYXRhICogMyk7XHJcbiAgICAgICAgdGhpcy5udW1UcmlEYXRhID0gMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBEcmF3aW5nIHRoZSByYXkgaW50byB0aGUgZGVidWdEcmF3IENhbGwuIEJ5IHVzaW5nIHRoZSBvdmVyd3JpdHRlbiBsaW5lIHJlbmRlcmluZyBmdW5jdGlvbnMgYW5kIGRyYXdpbmcgYSBwb2ludCAocG9pbnRTaXplIGRlZmluZWQgaW4gdGhlIHNoYWRlcikgYXQgdGhlIGVuZCBvZiB0aGUgcmF5LiAqL1xyXG4gICAgcHVibGljIGRlYnVnUmF5KF9vcmlnaW46IFZlY3RvcjMsIF9lbmQ6IFZlY3RvcjMsIF9jb2xvcjogQ29sb3IpOiB2b2lkIHtcclxuICAgICAgdGhpcy5vaW1vRGVidWdEcmF3LmxpbmUobmV3IE9JTU8uVmVjMyhfb3JpZ2luLngsIF9vcmlnaW4ueSwgX29yaWdpbi56KSwgbmV3IE9JTU8uVmVjMyhfZW5kLngsIF9lbmQueSwgX2VuZC56KSwgbmV3IE9JTU8uVmVjMyhfY29sb3IuciwgX2NvbG9yLmcsIF9jb2xvci5iKSk7XHJcbiAgICAgIHRoaXMub2ltb0RlYnVnRHJhdy5wb2ludChuZXcgT0lNTy5WZWMzKF9lbmQueCwgX2VuZC55LCBfZW5kLnopLCBuZXcgT0lNTy5WZWMzKF9jb2xvci5yLCBfY29sb3IuZywgX2NvbG9yLmIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogT3ZlcnJpZGluZyB0aGUgZXhpc3RpbmcgZnVuY3Rpb25zIGZyb20gT2ltb1BoeXNpY3MuRGVidWdEcmF3IHdpdGhvdXQgYWN0dWFsbHkgaW5oZXJpdCBmcm9tIHRoZSBjbGFzcywgdG8gYXZvaWQgY29tcGlsZXIgcHJvYmxlbXMuIFxyXG4gICAgICogT3ZlcnJpZGluZyB0aGVtIHRvIHJlY2VpdmUgZGVidWdJbmZvcm1hdGlvbnMgaW4gdGhlIGZvcm1hdCB0aGUgcGh5c2ljIGVuZ2luZSBwcm92aWRlcyB0aGVtIGJ1dCBoYW5kbGluZyB0aGUgcmVuZGVyaW5nIGluIHRoZSBmdWRnZSBjb250ZXh0LiAqL1xyXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplT3ZlcnJpZGUoKTogdm9pZCB7XHJcbiAgICAgIC8vT3ZlcnJpZGUgcG9pbnQvbGluZS90cmlhbmdsZSBmdW5jdGlvbnMgb2YgT2ltb1BoeXNpY3Mgd2hpY2ggYXJlIHVzZWQgdG8gZHJhdyB3aXJlZnJhbWVzIG9mIG9iamVjdHMsIGxpbmVzIG9mIHJheWNhc3RzIG9yIHRyaWFuZ2xlcyB3aGVuIHRoZSBvYmplY3RzIGFyZSByZW5kZXJlZCBieSB0aGUgcGh5c2ljcyBub3QgRlVER0UgKHVudXNlZClcclxuXHJcbiAgICAgIE9JTU8uRGVidWdEcmF3LnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIChfdjogT0lNTy5WZWMzLCBfY29sb3I6IE9JTU8uVmVjMyk6IHZvaWQge1xyXG4gICAgICAgIGxldCBkZWJ1Z1dyYXBwZXI6IFBoeXNpY3NEZWJ1Z0RyYXcgPSBQaHlzaWNzLmRlYnVnRHJhdzsgLy9HZXQgdGhlIGN1c3RvbSBwaHlzaWNzIGRlYnVnIGNsYXNzIHRvIGhhdmUgYWNjZXNzIHRvIHRoZSBkYXRhLlxyXG4gICAgICAgIGlmIChQaHlzaWNzLm1haW5DYW0gIT0gbnVsbCkgeyAvL29ubHkgYWN0IHdoZW4gdGhlcmUgaXMgYSBjYW1lcmEgdGhhdCBpcyByZW5kZXJpbmdcclxuICAgICAgICAgIGxldCBkYXRhOiBBcnJheTxOdW1iZXI+ID0gZGVidWdXcmFwcGVyLnBvaW50RGF0YTsgLy9nZXQgdGhlIGFscmVhZHkgd3JpdHRlbiBidWZmZXIgaW5mb3JtYXRpb25zXHJcbiAgICAgICAgICBkYXRhLnB1c2goX3YueCwgX3YueSwgX3Yueik7IC8vQ29vcmRpbmF0ZXMgb2YgdGhlIHBvaW50XHJcbiAgICAgICAgICBkYXRhLnB1c2goMCwgMCwgMCk7IC8vUG9pbnQgTm9ybWFscyAtIEVtcHR5IHNpbmNlIGl0J3Mgbm90IGEgcG9seWdvblxyXG4gICAgICAgICAgZGF0YS5wdXNoKF9jb2xvci54LCBfY29sb3IueSwgX2NvbG9yLnopOyAvL0NvbG9yIG9mIHRoZSBwb2ludFxyXG4gICAgICAgICAgZGVidWdXcmFwcGVyLm51bVBvaW50RGF0YSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIE9JTU8uRGVidWdEcmF3LnByb3RvdHlwZS5saW5lID0gZnVuY3Rpb24gKF92MTogT0lNTy5WZWMzLCBfdjI6IE9JTU8uVmVjMywgX2NvbG9yOiBPSU1PLlZlYzMpOiB2b2lkIHtcclxuICAgICAgICBsZXQgZGVidWdXcmFwcGVyOiBQaHlzaWNzRGVidWdEcmF3ID0gUGh5c2ljcy5kZWJ1Z0RyYXc7XHJcbiAgICAgICAgaWYgKFBoeXNpY3MubWFpbkNhbSAhPSBudWxsKSB7XHJcbiAgICAgICAgICBsZXQgZGF0YTogQXJyYXk8bnVtYmVyPiA9IGRlYnVnV3JhcHBlci5saW5lRGF0YTtcclxuICAgICAgICAgIGRhdGEucHVzaChfdjEueCwgX3YxLnksIF92MS56KTsgLy9Qb2ludCAxIENvb3JkaW5hdGVzXHJcbiAgICAgICAgICBkYXRhLnB1c2goMCwgMCwgMCk7IC8vUDEgTm9ybWFscyAtIEVtcHR5IHNpbmNlIGl0J3Mgbm90IGEgcG9seWdvblxyXG4gICAgICAgICAgZGF0YS5wdXNoKF9jb2xvci54LCBfY29sb3IueSwgX2NvbG9yLnopOyAvL1AxIENvbG9yXHJcbiAgICAgICAgICBkYXRhLnB1c2goX3YyLngsIF92Mi55LCBfdjIueik7IC8vUG9pbnQgMiBDb29yZGluYXRlc1xyXG4gICAgICAgICAgZGF0YS5wdXNoKDAsIDAsIDApO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9jb2xvci54LCBfY29sb3IueSwgX2NvbG9yLnopO1xyXG4gICAgICAgICAgZGVidWdXcmFwcGVyLm51bUxpbmVEYXRhKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgT0lNTy5EZWJ1Z0RyYXcucHJvdG90eXBlLnRyaWFuZ2xlID0gZnVuY3Rpb24gKF92MTogT0lNTy5WZWMzLCBfdjI6IE9JTU8uVmVjMywgX3YzOiBPSU1PLlZlYzMsIF9uMTogT0lNTy5WZWMzLCBfbjI6IE9JTU8uVmVjMywgX24zOiBPSU1PLlZlYzMsIF9jb2xvcjogT0lNTy5WZWMzKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGRlYnVnV3JhcHBlcjogUGh5c2ljc0RlYnVnRHJhdyA9IFBoeXNpY3MuZGVidWdEcmF3O1xyXG4gICAgICAgIGlmIChQaHlzaWNzLm1haW5DYW0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgbGV0IGRhdGE6IEFycmF5PG51bWJlcj4gPSBkZWJ1Z1dyYXBwZXIudHJpRGF0YTtcclxuICAgICAgICAgIGRhdGEucHVzaChfdjEueCwgX3YxLnksIF92MS56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfbjEueCwgX24xLnksIF9uMS56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfY29sb3IueCwgX2NvbG9yLnksIF9jb2xvci56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfdjIueCwgX3YyLnksIF92Mi56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfbjIueCwgX24yLnksIF9uMi56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfY29sb3IueCwgX2NvbG9yLnksIF9jb2xvci56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfdjMueCwgX3YzLnksIF92My56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfbjMueCwgX24zLnksIF9uMy56KTtcclxuICAgICAgICAgIGRhdGEucHVzaChfY29sb3IueCwgX2NvbG9yLnksIF9jb2xvci56KTtcclxuICAgICAgICAgIGRlYnVnV3JhcHBlci5udW1UcmlEYXRhKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUaGUgc291cmNlIGNvZGUgKHN0cmluZykgb2YgdGhlIGluIHBoeXNpY3NEZWJ1ZyB1c2VkIHZlcnkgc2ltcGxlIHZlcnRleFNoYWRlci5cclxuICAgICAqICBIYW5kbGluZyB0aGUgcHJvamVjdGlvbiAod2hpY2ggaW5jbHVkZXMsIHZpZXcvd29ybGRbaXMgYWx3YXlzIGlkZW50aXR5IGluIHRoaXMgY2FzZV0vcHJvamVjdGlvbiBpbiBGVURHRSkuIEluY3JlYXNpbmcgdGhlIHNpemUgb2Ygc2luZ2xlIHBvaW50cyBkcmF3bi5cclxuICAgICAqICBBbmQgdHJhbnNmZXIgcG9zaXRpb24gY29sb3IgdG8gdGhlIGZyYWdtZW50U2hhZGVyLiAqL1xyXG4gICAgcHJpdmF0ZSB2ZXJ0ZXhTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGBcclxuXHRcdFx0cHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcblx0XHRcdGF0dHJpYnV0ZSB2ZWMzIGFQb3NpdGlvbjtcclxuXHRcdFx0YXR0cmlidXRlIHZlYzMgYUNvbG9yO1xyXG5cdFx0XHRhdHRyaWJ1dGUgdmVjMyBhTm9ybWFsO1xyXG5cdFx0XHR2YXJ5aW5nIHZlYzMgdlBvc2l0aW9uO1xyXG5cdFx0XHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcclxuXHRcdFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcclxuXHRcdFx0dW5pZm9ybSBtYXQ0IHVfbXR4TWVzaFRvVmlldztcclxuXHJcblx0XHRcdHZvaWQgbWFpbigpIHtcclxuXHRcdFx0XHR2UG9zaXRpb24gPSBhUG9zaXRpb247XHJcblx0XHRcdFx0dkNvbG9yID0gYUNvbG9yO1xyXG5cdFx0XHRcdHZOb3JtYWwgPSBhTm9ybWFsO1xyXG5cdFx0XHRcdGdsX1Bvc2l0aW9uID0gdV9tdHhNZXNoVG9WaWV3ICogdmVjNChhUG9zaXRpb24sMS4wKTtcclxuXHRcdFx0XHRnbF9Qb2ludFNpemUgPSA2LjA7XHJcblx0XHRcdH1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUaGUgc291cmNlIGNvZGUgKHN0cmluZykgb2YgdGhlIGluIHBoeXNpY3NEZWJ1ZyB1c2VkIHN1cGVyIHNpbXBsZSBmcmFnbWVudFNoYWRlci4gVW5saXQgLSBvbmx5IGNvbG9yaXppbmcgdGhlIGRyYXduIHBpeGVscywgbm9ybWFscy9wb3NpdGlvbiBhcmUgZ2l2ZW4gdG8gbWFrZSBpdCBleHBhbmRhYmxlICovXHJcbiAgICBwcml2YXRlIGZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBgXHJcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG5cdFx0XHR2YXJ5aW5nIHZlYzMgdlBvc2l0aW9uO1xyXG5cdFx0XHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcclxuXHRcdFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcclxuXHJcblx0XHRcdHZvaWQgbWFpbigpIHtcclxuXHRcdFx0XHRnbF9GcmFnQ29sb3IgPSB2ZWM0KHZDb2xvciwgMS4wKTtcclxuXHRcdFx0fWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCBhIGRlZmluZWQgYXhlIG9mIHRyYW5zbGF0aW9uIGFuZCByb3RhdGlvbi4gVHdvIERlZ3JlZXMgb2YgRnJlZWRvbSBpbiB0aGUgZGVmaW5lZCBheGlzLlxyXG4gICAqIFR3byBSaWdpZEJvZGllcyBuZWVkIHRvIGJlIGRlZmluZWQgdG8gdXNlIGl0LiBBIG1vdG9yIGNhbiBiZSBkZWZpbmVkIGZvciByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24sIGFsb25nIHdpdGggc3ByaW5nIHNldHRpbmdzLlxyXG4gICAqIFxyXG4gICAqIGBgYHRleHRcclxuICAgKiAgICAgICAgICBKb2ludEhvbGRlciAtIGJvZHlBbmNob3JcclxuICAgKiAgICAgICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQXHJcbiAgICogICAgICAgICAgICAgICAgICAgIOKUgiAgIOKUglxyXG4gICAqICAgICAgICAgICA84pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSCICAg4pSC4pSA4pSA4pSA4pSA4pSA4pSAPiB0aWVkIGJvZHksIHNsaWRpbmcgb24gYXhpcyA9IDFzdCBkZWdyZWUgb2YgZnJlZWRvbVxyXG4gICAqICAgICAgICAgICAgICAgICAgICDilIIgICDilIIgICAgICAgIHJvdGF0aW5nIGFyb3VuZCBheGlzID0gMm5kIGRlZ3JlZSBvZiBmcmVlZG9tIFxyXG4gICAqICAgICAgICAgICAgICAgICAgICDilJTilIDilIDilIDilJhcclxuICAgKiBgYGAgIFxyXG4gICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgSm9pbnRDeWxpbmRyaWNhbCBleHRlbmRzIEpvaW50QXhpYWwge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IEpvaW50LnJlZ2lzdGVyU3ViY2xhc3MoSm9pbnRDeWxpbmRyaWNhbCk7XHJcblxyXG4gICAgcHJvdGVjdGVkIGpvaW50OiBPSU1PLkN5bGluZHJpY2FsSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLkN5bGluZHJpY2FsSm9pbnRDb25maWcgPSBuZXcgT0lNTy5DeWxpbmRyaWNhbEpvaW50Q29uZmlnKCk7XHJcbiAgICBwcm90ZWN0ZWQgbW90b3I6IE9JTU8uVHJhbnNsYXRpb25hbExpbWl0TW90b3I7XHJcblxyXG4gICAgI3NwcmluZ0RhbXBpbmdSb3RhdGlvbjogbnVtYmVyID0gMDtcclxuICAgICNzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbjogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjbW90b3JGb3JjZTogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjbWF4Um90b3I6IG51bWJlciA9IDM2MDtcclxuICAgICNtaW5Sb3RvcjogbnVtYmVyID0gMDtcclxuICAgICNyb3RvclRvcnF1ZTogbnVtYmVyID0gMDtcclxuICAgICNyb3RvclNwZWVkOiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNyb3RvcjogT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcjtcclxuICAgICNyb3RvclNwcmluZ0RhbXBlcjogT0lNTy5TcHJpbmdEYW1wZXI7XHJcblxyXG4gICAgLyoqIENyZWF0aW5nIGEgY3lsaW5kcmljYWwgam9pbnQgYmV0d2VlbiB0d28gQ29tcG9uZW50UmlnaWRib2RpZXMgbW92aW5nIG9uIG9uZSBheGlzIGFuZCByb3RhdGluZyBhcm91bmQgYW5vdGhlciBib3VuZCBvbiBhIGxvY2FsIGFuY2hvcnBvaW50LiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9ib2R5QW5jaG9yOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYm9keVRpZWQ6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9heGlzOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMCwgMSwgMCksIF9sb2NhbEFuY2hvcjogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDApKSB7XHJcbiAgICAgIHN1cGVyKF9ib2R5QW5jaG9yLCBfYm9keVRpZWQsIF9heGlzLCBfbG9jYWxBbmNob3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXQvU2V0IHRyYW5zZm9yIG9mIGZ1ZGdlIHByb3BlcnRpZXMgdG8gdGhlIHBoeXNpY3MgZW5naW5lXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0RhbXBpbmcoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgc3VwZXIuc3ByaW5nRGFtcGluZyA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUcmFuc2xhdGlvbmFsU3ByaW5nRGFtcGVyKCkuZGFtcGluZ1JhdGlvID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZyZXF1ZW5jeSBvZiB0aGUgc3ByaW5nIGluIEh6LiBBdCAwIHRoZSBzcHJpbmcgaXMgcmlnaWQsIGVxdWFscyBubyBzcHJpbmcuIFRoZSBzbWFsbGVyIHRoZSB2YWx1ZSB0aGUgbGVzcyByZXN0cmljdGl2ZSBpcyB0aGUgc3ByaW5nLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRnJlcXVlbmN5KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHN1cGVyLnNwcmluZ0ZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUcmFuc2xhdGlvbmFsU3ByaW5nRGFtcGVyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLiBJbmZsdWVuY2luZyBUT1JRVUUgLyBST1RBVElPTlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3ByaW5nRGFtcGluZ1JvdGF0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdEYW1waW5nUm90YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0RhbXBpbmdSb3RhdGlvbihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1waW5nUm90YXRpb24gPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0Um90YXRpb25hbFNwcmluZ0RhbXBlcigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBJbmZsdWVuY2luZyBUT1JRVUUgLyBST1RBVElPTlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3ByaW5nRnJlcXVlbmN5Um90YXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVJvdGF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbiA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRSb3RhdGlvbmFsU3ByaW5nRGFtcGVyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgVXBwZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcy1BbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWF4Um90b3IoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21heFJvdG9yO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtYXhSb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtYXhSb3RvciA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRSb3RhdGlvbmFsTGltaXRNb3RvcigpLnVwcGVyTGltaXQgPSBfdmFsdWUgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgTG93ZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcyBBbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWluUm90b3IoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21pblJvdG9yO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtaW5Sb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtaW5Sb3RvciA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRSb3RhdGlvbmFsTGltaXRNb3RvcigpLmxvd2VyTGltaXQgPSBfdmFsdWUgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgdGFyZ2V0IHJvdGF0aW9uYWwgc3BlZWQgb2YgdGhlIG1vdG9yIGluIG0vcy4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcm90b3JTcGVlZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JTcGVlZDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgcm90b3JTcGVlZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFJvdGF0aW9uYWxMaW1pdE1vdG9yKCkubW90b3JTcGVlZCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBtYXhpbXVtIG1vdG9yIHRvcnF1ZSBpbiBOZXd0b24uIGZvcmNlIDw9IDAgZXF1YWxzIGRpc2FibGVkLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb3RvclRvcnF1ZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JUb3JxdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHJvdG9yVG9ycXVlKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yVG9ycXVlID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFJvdGF0aW9uYWxMaW1pdE1vdG9yKCkubW90b3JUb3JxdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIFVwcGVyIExpbWl0IG9mIG1vdmVtZW50IGFsb25nIHRoZSBheGlzIG9mIHRoaXMgam9pbnQuIFRoZSBsaW1pdGVyIGlzIGRpc2FibGUgaWYgbG93ZXJMaW1pdCA+IHVwcGVyTGltaXQuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IG1heE1vdG9yKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHN1cGVyLm1heE1vdG9yID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKVxyXG4gICAgICAgIHRoaXMuam9pbnQuZ2V0VHJhbnNsYXRpb25hbExpbWl0TW90b3IoKS51cHBlckxpbWl0ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIExvd2VyIExpbWl0IG9mIG1vdmVtZW50IGFsb25nIHRoZSBheGlzIG9mIHRoaXMgam9pbnQuIFRoZSBsaW1pdGVyIGlzIGRpc2FibGUgaWYgbG93ZXJMaW1pdCA+IHVwcGVyTGltaXQuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IG1pbk1vdG9yKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHN1cGVyLm1pbk1vdG9yID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKVxyXG4gICAgICAgIHRoaXMuam9pbnQuZ2V0VHJhbnNsYXRpb25hbExpbWl0TW90b3IoKS5sb3dlckxpbWl0ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgbW90b3JTcGVlZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKVxyXG4gICAgICAgIHRoaXMuam9pbnQuZ2V0VHJhbnNsYXRpb25hbExpbWl0TW90b3IoKS5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIG1heGltdW0gbW90b3IgZm9yY2UgaW4gTmV3dG9uLiBmb3JjZSA8PSAwIGVxdWFscyBkaXNhYmxlZC4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbW90b3JGb3JjZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbW90b3JGb3JjZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbW90b3JGb3JjZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtb3RvckZvcmNlID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yKCkubW90b3JGb3JjZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy4jZ2V0TXV0YXRvcigpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIHRoaXMuZGVsZXRlRnJvbU11dGF0b3IoX211dGF0b3IsIHRoaXMuI2dldE11dGF0b3IoKSk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RKb2ludCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcm90b3JTcHJpbmdEYW1wZXIgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy5zcHJpbmdGcmVxdWVuY3lSb3RhdGlvbiwgdGhpcy5zcHJpbmdEYW1waW5nUm90YXRpb24pO1xyXG5cclxuICAgICAgdGhpcy5tb3RvciA9IG5ldyBPSU1PLlRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yKCkuc2V0TGltaXRzKHN1cGVyLm1pbk1vdG9yLCBzdXBlci5tYXhNb3Rvcik7XHJcbiAgICAgIHRoaXMubW90b3Iuc2V0TW90b3Ioc3VwZXIubW90b3JTcGVlZCwgdGhpcy5tb3RvckZvcmNlKTtcclxuICAgICAgdGhpcy4jcm90b3IgPSBuZXcgT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcigpLnNldExpbWl0cyh0aGlzLm1pblJvdG9yICogQ2FsYy5kZWcycmFkLCB0aGlzLm1heFJvdG9yICogQ2FsYy5kZWcycmFkKTtcclxuICAgICAgdGhpcy4jcm90b3Iuc2V0TW90b3IodGhpcy5yb3RvclNwZWVkLCB0aGlzLnJvdG9yVG9ycXVlKTtcclxuXHJcbiAgICAgIHRoaXMuY29uZmlnID0gbmV3IE9JTU8uQ3lsaW5kcmljYWxKb2ludENvbmZpZygpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCgpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcudHJhbnNsYXRpb25hbFNwcmluZ0RhbXBlciA9IHRoaXMuc3ByaW5nRGFtcGVyO1xyXG4gICAgICB0aGlzLmNvbmZpZy50cmFuc2xhdGlvbmFsTGltaXRNb3RvciA9IHRoaXMubW90b3I7XHJcbiAgICAgIHRoaXMuY29uZmlnLnJvdGF0aW9uYWxMaW1pdE1vdG9yID0gdGhpcy4jcm90b3I7XHJcbiAgICAgIHRoaXMuY29uZmlnLnJvdGF0aW9uYWxTcHJpbmdEYW1wZXIgPSB0aGlzLiNyb3RvclNwcmluZ0RhbXBlcjtcclxuXHJcbiAgICAgIHRoaXMuam9pbnQgPSBuZXcgT0lNTy5DeWxpbmRyaWNhbEpvaW50KHRoaXMuY29uZmlnKTtcclxuICAgICAgdGhpcy5jb25maWd1cmVKb2ludCgpO1xyXG4gICAgfVxyXG5cclxuICAgICNnZXRNdXRhdG9yID0gKCk6IE11dGF0b3IgPT4ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHtcclxuICAgICAgICBtb3RvckZvcmNlOiB0aGlzLm1vdG9yRm9yY2UsXHJcbiAgICAgICAgc3ByaW5nRGFtcGluZ1JvdGF0aW9uOiB0aGlzLnNwcmluZ0RhbXBpbmdSb3RhdGlvbixcclxuICAgICAgICBzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbjogdGhpcy5zcHJpbmdGcmVxdWVuY3lSb3RhdGlvbixcclxuICAgICAgICBtYXhSb3RvcjogdGhpcy5tYXhSb3RvcixcclxuICAgICAgICBtaW5Sb3RvcjogdGhpcy5taW5Sb3RvcixcclxuICAgICAgICByb3RvclRvcnF1ZTogdGhpcy5yb3RvclRvcnF1ZSxcclxuICAgICAgICByb3RvclNwZWVkOiB0aGlzLnJvdG9yU3BlZWRcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9O1xyXG5cclxuICAgICNtdXRhdGUgPSAoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkID0+IHtcclxuICAgICAgdGhpcy5tdXRhdGVCYXNlKF9tdXRhdG9yLCBbXCJtb3RvckZvcmNlXCIsIFwicm90b3JUb3JxdWVcIiwgXCJyb3RvclNwZWVkXCIsIFwibWF4Um90b3JcIiwgXCJtaW5Sb3RvclwiLCBcInNwcmluZ0RhbXBpbmdSb3RhdGlvblwiLCBcInNwcmluZ0ZyZXF1ZW5jeVJvdGF0aW9uXCIsIFwic3ByaW5nRnJlcXVlbmN5XCJdKTtcclxuICAgIH07XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICAgKiBBIHBoeXNpY2FsIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28gYm9kaWVzIHdpdGggYSBkZWZpbmVkIGF4ZSBtb3ZlbWVudC5cclxuICAgICAqIFVzZWQgdG8gY3JlYXRlIGEgc2xpZGluZyBqb2ludCBhbG9uZyBvbmUgYXhpcy4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuXHJcbiAgICAgKiBBIG1vdG9yIGNhbiBiZSBkZWZpbmVkIHRvIG1vdmUgdGhlIGNvbm5lY3RlZCBhbG9uZyB0aGUgZGVmaW5lZCBheGlzLiBHcmVhdCB0byBjb25zdHJ1Y3Qgc3RhbmRhcmQgc3ByaW5ncyBvciBwaHlzaWNhbCBzbGlkZXJzLlxyXG4gICAgICogXHJcbiAgICAgKiBgYGB0ZXh0XHJcbiAgICAgKiAgICAgICAgICBKb2ludEhvbGRlciAtIGJvZHlBbmNob3JcclxuICAgICAqICAgICAgICAgICAgICAgICAgICDilIzilIDilIDilIDilJBcclxuICAgICAqICAgICAgICAgICAgICAgICAgICDilIIgICDilIJcclxuICAgICAqICAgICAgICAgICA84pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSCICAg4pSC4pSA4pSA4pSA4pSA4pSA4pSAPiB0aWVkIGJvZHksIHNsaWRpbmcgb24gb25lIEF4aXMsIDEgRGVncmVlIG9mIEZyZWVkb21cclxuICAgICAqICAgICAgICAgICAgICAgICAgICDilIIgICDilIJcclxuICAgICAqICAgICAgICAgICAgICAgICAgICDilJTilIDilIDilIDilJhcclxuICAgICAqIGBgYFxyXG4gICAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUsIDIwMjAgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEpvaW50UHJpc21hdGljIGV4dGVuZHMgSm9pbnRBeGlhbCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFByaXNtYXRpYyk7XHJcblxyXG4gICAgcHJvdGVjdGVkIGpvaW50OiBPSU1PLlByaXNtYXRpY0pvaW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogT0lNTy5QcmlzbWF0aWNKb2ludENvbmZpZyA9IG5ldyBPSU1PLlByaXNtYXRpY0pvaW50Q29uZmlnKCk7XHJcbiAgICBwcm90ZWN0ZWQgbW90b3I6IE9JTU8uVHJhbnNsYXRpb25hbExpbWl0TW90b3I7XHJcbiAgICAvL0ludGVybmFsbHkgdXNlZCB2YXJpYWJsZXMgLSBKb2ludCBQcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgZXZlbiB3aGVuIG5vIGFjdHVhbCBqb2ludCBpcyBjdXJyZW50bHkgZXhpc3RlbnRcclxuXHJcbiAgICAjbW90b3JGb3JjZTogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKiogQ3JlYXRpbmcgYSBwcmlzbWF0aWMgam9pbnQgYmV0d2VlbiB0d28gQ29tcG9uZW50UmlnaWRib2RpZXMgb25seSBtb3Zpbmcgb24gb25lIGF4aXMgYm91bmQgb24gYSBsb2NhbCBhbmNob3Jwb2ludC4gKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYXhpczogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDEsIDApLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkLCBfYXhpcywgX2xvY2FsQW5jaG9yKTtcclxuXHJcbiAgICAgIHRoaXMubWF4TW90b3IgPSAxMDtcclxuICAgICAgdGhpcy5taW5Nb3RvciA9IC0xMDtcclxuICAgIH1cclxuICAgIC8vI3JlZ2lvbiBHZXQvU2V0IHRyYW5zZm9yIG9mIGZ1ZGdlIHByb3BlcnRpZXMgdG8gdGhlIHBoeXNpY3MgZW5naW5lXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgbWF4aW11bSBtb3RvciBmb3JjZSBpbiBOZXd0b24uIGZvcmNlIDw9IDAgZXF1YWxzIGRpc2FibGVkLiBUaGlzIGlzIHRoZSBmb3JjZSB0aGF0IHRoZSBtb3RvciBpcyB1c2luZyB0byBob2xkIHRoZSBwb3NpdGlvbiwgb3IgcmVhY2ggaXQgaWYgYSBtb3RvclNwZWVkIGlzIGRlZmluZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbW90b3JGb3JjZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbW90b3JGb3JjZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbW90b3JGb3JjZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtb3RvckZvcmNlID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IoKS5tb3RvckZvcmNlID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFNhdmluZy9Mb2FkaW5nXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBtb3RvckZvcmNlOiB0aGlzLm1vdG9yRm9yY2UsXHJcbiAgICAgICAgW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdOiBzdXBlci5zZXJpYWxpemUoKVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm1vdG9yRm9yY2UgPSBfc2VyaWFsaXphdGlvbi5tb3RvckZvcmNlO1xyXG4gICAgICBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IoKTtcclxuICAgICAgbXV0YXRvci5tb3RvckZvcmNlID0gdGhpcy5tb3RvckZvcmNlO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IubW90b3JGb3JjZSkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5tb3RvckZvcmNlID0gX211dGF0b3IubW90b3JGb3JjZTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLm1vdG9yRm9yY2U7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKiBBY3R1YWwgY3JlYXRpb24gb2YgYSBqb2ludCBpbiB0aGUgT2ltb1BoeXNpY3Mgc3lzdGVtICovXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0Sm9pbnQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubW90b3IgPSBuZXcgT0lNTy5UcmFuc2xhdGlvbmFsTGltaXRNb3RvcigpLnNldExpbWl0cyh0aGlzLm1pbk1vdG9yLCB0aGlzLm1heE1vdG9yKTsgLy9DcmVhdGUgbW90b3Igc2V0dGluZ3MsIHRvIGhvbGQgcG9zaXRpb25zLCBzZXQgY29uc3RyYWludCBtaW4vbWF4XHJcbiAgICAgIHRoaXMubW90b3Iuc2V0TW90b3IodGhpcy5tb3RvclNwZWVkLCB0aGlzLm1vdG9yRm9yY2UpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5QcmlzbWF0aWNKb2ludENvbmZpZygpOyAvL0NyZWF0ZSBhIHNwZWNpZmljIGNvbmZpZyBmb3IgdGhpcyBqb2ludCB0eXBlIHRoYXQgaXMgY2FsY3VsYXRpbmcgdGhlIGxvY2FsIGF4aXMgZm9yIGJvdGggYm9kaWVzXHJcbiAgICAgIHN1cGVyLmNvbnN0cnVjdEpvaW50KCk7XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZy5zcHJpbmdEYW1wZXIgPSB0aGlzLnNwcmluZ0RhbXBlcjsgLy9UZWxsaW5nIHRoZSBjb25maWcgdG8gdXNlIHRoZSBtb3Rvci9zcHJpbmcgb2YgdGhlIEZVREdFIENvbXBvbmVudFxyXG4gICAgICB0aGlzLmNvbmZpZy5saW1pdE1vdG9yID0gdGhpcy5tb3RvcjtcclxuXHJcbiAgICAgIHRoaXMuam9pbnQgPSBuZXcgT0lNTy5QcmlzbWF0aWNKb2ludCh0aGlzLmNvbmZpZyk7XHJcbiAgICAgIHRoaXMuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICogQSBwaHlzaWNhbCBjb25uZWN0aW9uIGJldHdlZW4gdHdvIGJvZGllcywgZGVzaWduZWQgdG8gc2ltdWxhdGUgYmVoYXZpb3VyIHdpdGhpbiBhIHJlYWwgYm9keS4gSXQgaGFzIHR3byBheGlzLCBhIHN3aW5nIGFuZCB0d2lzdCBheGlzLCBhbmQgYWxzbyB0aGUgcGVycGVuZGljdWxhciBheGlzLCBcclxuICAgICogc2ltaWxhciB0byBhIFNwaGVyaWNhbCBqb2ludCwgYnV0IG1vcmUgcmVzdHJpY3RpdmUgaW4gaXQncyBhbmdsZXMgYW5kIG9ubHkgdHdvIGRlZ3JlZXMgb2YgZnJlZWRvbS4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuIE1vc3RseSB1c2VkIHRvIGNyZWF0ZSBodW1hbmxpa2Ugam9pbnRzIHRoYXQgYmVoYXZlIGxpa2UgYSBcclxuICAgICogbGlmZWxlc3MgYm9keS5cclxuICAgICogYGBgdGV4dCAgICAgICAgXHJcbiAgICAqICAgICAgICAgICAgICAgICAgXHJcbiAgICAqICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciAtIGl0IGNhbiB0d2lzdCBvbiBvbmUgYXhpcyBhbmQgc3dpbmcgb24gYW5vdGhlclxyXG4gICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgICogICAgICAgICB6ICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQIOKUgiDilIzilIDilIDilIDilJBcclxuICAgICogICAgICAgICDihpEgICAgICAgICAgICDilIIgICDilIIg4oaTIOKUgiAgIOKUgiAgICAgICAgZS5nLiB6ID0gVHdpc3RBeGlzLCBpdCBjYW4gcm90YXRlIGluLWl0c2VsZiBhcm91bmQgdGhpcyBheGlzIFxyXG4gICAgKiAgICAteCDihpDilIDilLzilIDihpIgeCAgICAgICAg4pSCICAg4pSCIHgg4pSCICAg4pSCICAgICAgICBlLmcuIHggPSBTd2luZ0F4aXMsIGl0IGNhbiByb3RhdGUgYW5jaG9yZWQgYXJvdW5kIHRoZSBiYXNlIG9uIHRoaXMgYXhpcyAgIFxyXG4gICAgKiAgICAgICAgIOKGkyAgICAgICAgICAgIOKUgiAgIOKUgiAgIOKUgiAgIOKUgiAgICAgICAgICAgXHJcbiAgICAqICAgICAgICAteiAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUmCAgICAgICAgIGUuZy4geW91IGNhbiB0d2lzdCB0aGUgbGVnIGluLWl0c2VsZiB0byBhIGNlcnRhaW4gZGVncmVlLFxyXG4gICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0IGFsc28gcm90YXRlIGl0IGZvcndhcmQvYmFja3dhcmQvbGVmdC9yaWdodCB0byBhIGNlcnRhaW4gZGVncmVlXHJcbiAgICAqICAgICAgICAgICAgICAgIGJvZHlBbmNob3IgICAgICAgICAgYm9keVRpZWRcclxuICAgICogICAgICAgICAgICAgIChlLmcuIHBlbHZpcykgICAgICAgICAoZS5nLiB1cHBlci1sZWcpXHJcbiAgICAqIFxyXG4gICAgKiBgYGBcclxuICAgICogVHdpc3QgZXF1YWxzIGEgcm90YXRpb24gYXJvdW5kIGEgcG9pbnQgd2l0aG91dCBtb3Zpbmcgb24gYW4gYXhpcy5cclxuICAgICogU3dpbmcgZXF1YWxzIGEgcm90YXRpb24gb24gYSBwb2ludCB3aXRoIGEgbW92aW5nIGxvY2FsIGF4aXMuXHJcbiAgICAgKiBAYXV0aG9yIE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBKb2ludFJhZ2RvbGwgZXh0ZW5kcyBKb2ludCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFJhZ2RvbGwpO1xyXG5cclxuICAgIHByb3RlY3RlZCBqb2ludDogT0lNTy5SYWdkb2xsSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLlJhZ2RvbGxKb2ludENvbmZpZyA9IG5ldyBPSU1PLlJhZ2RvbGxKb2ludENvbmZpZygpO1xyXG5cclxuICAgICNzcHJpbmdEYW1waW5nVHdpc3Q6IG51bWJlciA9IDA7XHJcbiAgICAjc3ByaW5nRnJlcXVlbmN5VHdpc3Q6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI3NwcmluZ0RhbXBpbmdTd2luZzogbnVtYmVyID0gMDtcclxuICAgICNzcHJpbmdGcmVxdWVuY3lTd2luZzogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjbWF4TW90b3JUd2lzdDogbnVtYmVyID0gMzYwO1xyXG4gICAgI21pbk1vdG9yVHdpc3Q6IG51bWJlciA9IDA7XHJcbiAgICAjbW90b3JUb3JxdWVUd2lzdDogbnVtYmVyID0gMDtcclxuICAgICNtb3RvclNwZWVkVHdpc3Q6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21vdG9yVHdpc3Q6IE9JTU8uUm90YXRpb25hbExpbWl0TW90b3I7XHJcbiAgICAjc3ByaW5nRGFtcGVyVHdpc3Q6IE9JTU8uU3ByaW5nRGFtcGVyO1xyXG4gICAgI3NwcmluZ0RhbXBlclN3aW5nOiBPSU1PLlNwcmluZ0RhbXBlcjtcclxuICAgICNheGlzRmlyc3Q6IE9JTU8uVmVjMztcclxuICAgICNheGlzU2Vjb25kOiBPSU1PLlZlYzM7XHJcblxyXG4gICAgI21heEFuZ2xlRmlyc3Q6IG51bWJlciA9IDA7XHJcbiAgICAjbWF4QW5nbGVTZWNvbmQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9ib2R5QW5jaG9yOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYm9keVRpZWQ6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9heGlzRmlyc3Q6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygxLCAwLCAwKSwgX2F4aXNTZWNvbmQ6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAxKSwgX2xvY2FsQW5jaG9yOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMCwgMCwgMCkpIHtcclxuICAgICAgc3VwZXIoX2JvZHlBbmNob3IsIF9ib2R5VGllZCk7XHJcbiAgICAgIHRoaXMuYXhpc0ZpcnN0ID0gX2F4aXNGaXJzdDtcclxuICAgICAgdGhpcy5heGlzU2Vjb25kID0gX2F4aXNTZWNvbmQ7XHJcbiAgICAgIHRoaXMuYW5jaG9yID0gX2xvY2FsQW5jaG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXQvU2V0IHRyYW5zZm9yIG9mIGZ1ZGdlIHByb3BlcnRpZXMgdG8gdGhlIHBoeXNpY3MgZW5naW5lXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBheGlzIGNvbm5lY3RpbmcgdGhlIHRoZSB0d28ge0BsaW5rIE5vZGV9cyBlLmcuIFZlY3RvcjMoMCwxLDApIHRvIGhhdmUgYSB1cHdhcmQgY29ubmVjdGlvbi5cclxuICAgICAqICBXaGVuIGNoYW5nZWQgYWZ0ZXIgaW5pdGlhbGl6YXRpb24gdGhlIGpvaW50IG5lZWRzIHRvIGJlIHJlY29ubmVjdGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGF4aXNGaXJzdCgpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMuI2F4aXNGaXJzdC54LCB0aGlzLiNheGlzRmlyc3QueSwgdGhpcy4jYXhpc0ZpcnN0LnopO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBheGlzRmlyc3QoX3ZhbHVlOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMuI2F4aXNGaXJzdCA9IG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueik7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFRoZSBheGlzIGNvbm5lY3RpbmcgdGhlIHRoZSB0d28ge0BsaW5rIE5vZGV9cyBlLmcuIFZlY3RvcjMoMCwxLDApIHRvIGhhdmUgYSB1cHdhcmQgY29ubmVjdGlvbi5cclxuICAgICogIFdoZW4gY2hhbmdlZCBhZnRlciBpbml0aWFsaXphdGlvbiB0aGUgam9pbnQgbmVlZHMgdG8gYmUgcmVjb25uZWN0ZWQuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldCBheGlzU2Vjb25kKCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy4jYXhpc1NlY29uZC54LCB0aGlzLiNheGlzU2Vjb25kLnksIHRoaXMuI2F4aXNTZWNvbmQueik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGF4aXNTZWNvbmQoX3ZhbHVlOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMuI2F4aXNTZWNvbmQgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gYW5nbGUgb2Ygcm90YXRpb24gYWxvbmcgdGhlIGZpcnN0IGF4aXMuIFZhbHVlIG5lZWRzIHRvIGJlIHBvc2l0aXZlLiBDaGFuZ2VzIGRvIHJlYnVpbGQgdGhlIGpvaW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWF4QW5nbGVGaXJzdEF4aXMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21heEFuZ2xlRmlyc3QgKiBDYWxjLnJhZDJkZWc7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IG1heEFuZ2xlRmlyc3RBeGlzKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21heEFuZ2xlRmlyc3QgPSBfdmFsdWUgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4aW11bSBhbmdsZSBvZiByb3RhdGlvbiBhbG9uZyB0aGUgc2Vjb25kIGF4aXMuIFZhbHVlIG5lZWRzIHRvIGJlIHBvc2l0aXZlLiBDaGFuZ2VzIGRvIHJlYnVpbGQgdGhlIGpvaW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWF4QW5nbGVTZWNvbmRBeGlzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXhBbmdsZVNlY29uZCAqIENhbGMucmFkMmRlZztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbWF4QW5nbGVTZWNvbmRBeGlzKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21heEFuZ2xlU2Vjb25kID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBzcHJpbmdEYW1waW5nVHdpc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0RhbXBpbmdUd2lzdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRGFtcGluZ1R3aXN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBpbmdUd2lzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUd2lzdFNwcmluZ0RhbXBlcigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNwcmluZ0ZyZXF1ZW5jeVR3aXN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lUd2lzdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRnJlcXVlbmN5VHdpc3QoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc3ByaW5nRnJlcXVlbmN5VHdpc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0VHdpc3RTcHJpbmdEYW1wZXIoKS5mcmVxdWVuY3kgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNwcmluZ0RhbXBpbmdTd2luZygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc3ByaW5nRGFtcGluZ1N3aW5nO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzcHJpbmdEYW1waW5nU3dpbmcoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc3ByaW5nRGFtcGluZ1N3aW5nID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFN3aW5nU3ByaW5nRGFtcGVyKCkuZGFtcGluZ1JhdGlvID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZyZXF1ZW5jeSBvZiB0aGUgc3ByaW5nIGluIEh6LiBBdCAwIHRoZSBzcHJpbmcgaXMgcmlnaWQsIGVxdWFscyBubyBzcHJpbmcuIFRoZSBzbWFsbGVyIHRoZSB2YWx1ZSB0aGUgbGVzcyByZXN0cmljdGl2ZSBpcyB0aGUgc3ByaW5nLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3ByaW5nRnJlcXVlbmN5U3dpbmcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVN3aW5nO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBzcHJpbmdGcmVxdWVuY3lTd2luZyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdGcmVxdWVuY3lTd2luZyA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTd2luZ1NwcmluZ0RhbXBlcigpLmZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgVXBwZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcy1BbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWF4TW90b3JUd2lzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWF4TW90b3JUd2lzdCAqIENhbGMucmFkMmRlZztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbWF4TW90b3JUd2lzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBfdmFsdWUgKj0gQ2FsYy5kZWcycmFkO1xyXG4gICAgICB0aGlzLiNtYXhNb3RvclR3aXN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFR3aXN0TGltaXRNb3RvcigpLnVwcGVyTGltaXQgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgTG93ZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcyBBbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWluTW90b3JUd2lzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWluTW90b3JUd2lzdCAqIENhbGMucmFkMmRlZztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbWluTW90b3JUd2lzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBfdmFsdWUgKj0gQ2FsYy5kZWcycmFkO1xyXG4gICAgICB0aGlzLiNtaW5Nb3RvclR3aXN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFR3aXN0TGltaXRNb3RvcigpLmxvd2VyTGltaXQgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIHRhcmdldCByb3RhdGlvbmFsIHNwZWVkIG9mIHRoZSBtb3RvciBpbiBtL3MuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1vdG9yU3BlZWRUd2lzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbW90b3JTcGVlZFR3aXN0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtb3RvclNwZWVkVHdpc3QoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbW90b3JTcGVlZFR3aXN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFR3aXN0TGltaXRNb3RvcigpLm1vdG9yU3BlZWQgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIG1heGltdW0gbW90b3IgdG9ycXVlIGluIE5ld3Rvbi4gZm9yY2UgPD0gMCBlcXVhbHMgZGlzYWJsZWQuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1vdG9yVG9ycXVlVHdpc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21vdG9yVG9ycXVlVHdpc3Q7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IG1vdG9yVG9ycXVlVHdpc3QoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbW90b3JUb3JxdWVUd2lzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUd2lzdExpbWl0TW90b3IoKS5tb3RvclRvcnF1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBJZiB0aGUgdHdvIGNvbm5lY3RlZCBSaWdpZEJvZGllcyBjb2xsaWRlIHdpdGggZWF0aCBvdGhlci4gKERlZmF1bHQgPSBmYWxzZSlcclxuICAgICAqL1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBTYXZpbmcvTG9hZGluZ1xyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLiNnZXRNdXRhdG9yKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uYXhpc0ZpcnN0ID0gdGhpcy5heGlzRmlyc3Quc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uYXhpc1NlY29uZCA9IHRoaXMuYXhpc1NlY29uZC5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCB0aGlzLmF4aXNGaXJzdC5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5heGlzRmlyc3QpO1xyXG4gICAgICBhd2FpdCB0aGlzLmF4aXNTZWNvbmQuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uYXhpc1NlY29uZCk7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmF4aXNGaXJzdCkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5heGlzRmlyc3QgPSBuZXcgVmVjdG9yMyguLi48bnVtYmVyW10+KE9iamVjdC52YWx1ZXMoX211dGF0b3IuYXhpc0ZpcnN0KSkpO1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci5heGlzU2Vjb25kKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLmF4aXNTZWNvbmQgPSBuZXcgVmVjdG9yMyguLi48bnVtYmVyW10+KE9iamVjdC52YWx1ZXMoX211dGF0b3IuYXhpc1NlY29uZCkpKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmF4aXNGaXJzdDtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmF4aXNTZWNvbmQ7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIHRoaXMuZGVsZXRlRnJvbU11dGF0b3IoX211dGF0b3IsIHRoaXMuI2dldE11dGF0b3IoKSk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgbXV0YXRvci5heGlzRmlyc3QgPSB0aGlzLmF4aXNGaXJzdC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIG11dGF0b3IuYXhpc1NlY29uZCA9IHRoaXMuYXhpc1NlY29uZC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1wZXJUd2lzdCA9IG5ldyBPSU1PLlNwcmluZ0RhbXBlcigpLnNldFNwcmluZyh0aGlzLnNwcmluZ0ZyZXF1ZW5jeVR3aXN0LCB0aGlzLnNwcmluZ0RhbXBpbmdUd2lzdCk7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBlclN3aW5nID0gbmV3IE9JTU8uU3ByaW5nRGFtcGVyKCkuc2V0U3ByaW5nKHRoaXMuc3ByaW5nRnJlcXVlbmN5U3dpbmcsIHRoaXMuc3ByaW5nRGFtcGluZ1N3aW5nKTtcclxuXHJcbiAgICAgIHRoaXMuI21vdG9yVHdpc3QgPSBuZXcgT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcigpLnNldExpbWl0cyh0aGlzLm1pbk1vdG9yVHdpc3QsIHRoaXMubWF4TW90b3JUd2lzdCk7XHJcbiAgICAgIHRoaXMuI21vdG9yVHdpc3Quc2V0TW90b3IodGhpcy5tb3RvclNwZWVkVHdpc3QsIHRoaXMubW90b3JUb3JxdWVUd2lzdCk7XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZyA9IG5ldyBPSU1PLlJhZ2RvbGxKb2ludENvbmZpZygpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCh0aGlzLmF4aXNGaXJzdCwgdGhpcy5heGlzU2Vjb25kKTtcclxuICAgICAgdGhpcy5jb25maWcuc3dpbmdTcHJpbmdEYW1wZXIgPSB0aGlzLiNzcHJpbmdEYW1wZXJTd2luZztcclxuICAgICAgdGhpcy5jb25maWcudHdpc3RTcHJpbmdEYW1wZXIgPSB0aGlzLiNzcHJpbmdEYW1wZXJUd2lzdDtcclxuICAgICAgdGhpcy5jb25maWcudHdpc3RMaW1pdE1vdG9yID0gdGhpcy4jbW90b3JUd2lzdDtcclxuICAgICAgdGhpcy5jb25maWcubWF4U3dpbmdBbmdsZTEgPSB0aGlzLiNtYXhBbmdsZUZpcnN0O1xyXG4gICAgICB0aGlzLmNvbmZpZy5tYXhTd2luZ0FuZ2xlMiA9IHRoaXMuI21heEFuZ2xlU2Vjb25kO1xyXG5cclxuICAgICAgdGhpcy5qb2ludCA9IG5ldyBPSU1PLlJhZ2RvbGxKb2ludCh0aGlzLmNvbmZpZyk7XHJcbiAgICAgIHN1cGVyLmNvbmZpZ3VyZUpvaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgI2dldE11dGF0b3IgPSAoKTogTXV0YXRvciA9PiB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIG1heEFuZ2xlRmlyc3Q6IHRoaXMuI21heEFuZ2xlRmlyc3QsXHJcbiAgICAgICAgbWF4QW5nbGVTZWNvbmQ6IHRoaXMuI21heEFuZ2xlU2Vjb25kLFxyXG4gICAgICAgIHNwcmluZ0RhbXBpbmdUd2lzdDogdGhpcy5zcHJpbmdEYW1waW5nVHdpc3QsXHJcbiAgICAgICAgc3ByaW5nRnJlcXVlbmN5VHdpc3Q6IHRoaXMuc3ByaW5nRnJlcXVlbmN5VHdpc3QsXHJcbiAgICAgICAgc3ByaW5nRGFtcGluZ1N3aW5nOiB0aGlzLnNwcmluZ0RhbXBpbmdTd2luZyxcclxuICAgICAgICBzcHJpbmdGcmVxdWVuY3lTd2luZzogdGhpcy5zcHJpbmdGcmVxdWVuY3lTd2luZyxcclxuICAgICAgICBtYXhNb3RvclR3aXN0OiB0aGlzLiNtYXhNb3RvclR3aXN0LFxyXG4gICAgICAgIG1pbk1vdG9yVHdpc3Q6IHRoaXMuI21pbk1vdG9yVHdpc3QsXHJcbiAgICAgICAgbW90b3JTcGVlZFR3aXN0OiB0aGlzLm1vdG9yU3BlZWRUd2lzdCxcclxuICAgICAgICBtb3RvclRvcnF1ZVR3aXN0OiB0aGlzLm1vdG9yVG9ycXVlVHdpc3RcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9O1xyXG5cclxuICAgICNtdXRhdGUgPSAoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IubWF4QW5nbGVGaXJzdCkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy4jbWF4QW5nbGVGaXJzdCA9IF9tdXRhdG9yLm1heEFuZ2xlRmlyc3Q7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLm1heEFuZ2xlU2Vjb25kKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLiNtYXhBbmdsZVNlY29uZCA9IF9tdXRhdG9yLm1heEFuZ2xlU2Vjb25kO1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcclxuICAgICAgICBcInNwcmluZ0RhbXBpbmdUd2lzdFwiLCBcInNwcmluZ0ZyZXF1ZW5jeVR3aXN0XCIsIFwic3ByaW5nRGFtcGluZ1N3aW5nXCIsIFwic3ByaW5nRnJlcXVlbmN5U3dpbmdcIiwgXCJtYXhNb3RvclR3aXN0XCIsIFwibWluTW90b3JUd2lzdFwiLCBcIm1vdG9yU3BlZWRUd2lzdFwiLCBcIm1vdG9yVG9ycXVlVHdpc3RcIlxyXG4gICAgICBdKTtcclxuICAgIH07XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICAgKiBBIHBoeXNpY2FsIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28gYm9kaWVzIHdpdGggYSBkZWZpbmVkIGF4ZSBvZiByb3RhdGlvbi4gQWxzbyBrbm93biBhcyBISU5HRSBqb2ludC5cclxuICAgICAqIFR3byBSaWdpZEJvZGllcyBuZWVkIHRvIGJlIGRlZmluZWQgdG8gdXNlIGl0LiBBIG1vdG9yIGNhbiBiZSBkZWZpbmVkIHRvIHJvdGF0ZSB0aGUgY29ubmVjdGVkIGFsb25nIHRoZSBkZWZpbmVkIGF4aXMuXHJcbiAgICAgKiBcclxuICAgICAqIGBgYHRleHQgICAgICAgIFxyXG4gICAgICogICAgICAgICAgICAgICAgICByb3RhdGlvbiBheGlzLCAxc3QgRGVncmVlIG9mIGZyZWVkb21cclxuICAgICAqICAgICAgICAgICAgICAgICAgICDihpFcclxuICAgICAqICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQ4pSC4pSM4pSA4pSA4pSA4pSA4pSQICAgICBcclxuICAgICAqICAgICAgICAgICAgICAg4pSCICAg4pSC4pSC4pSCICAgIOKUgiAgXHJcbiAgICAgKiAgICAgICAgICAgICAgIOKUgiAgIOKUguKUguKUgiAgICDilIIgXHJcbiAgICAgKiAgICAgICAgICAgICAgIOKUgiAgIOKUguKUguKUgiAgICDilIIgXHJcbiAgICAgKiAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmOKUguKUlOKUgOKUgOKUgOKUgOKUmFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgIOKUgiAgIFxyXG4gICAgICogICAgICBib2R5QW5jaG9yICAgICAgICAgYm9keVRpZWRcclxuICAgICAqICAgKGUuZy4gRG9vcmhpbmdlKSAgICAgICAoZS5nLiBEb29yKVxyXG4gICAgICogYGBgXHJcbiAgICAgKiBAYXV0aG9yIE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICAgKi9cclxuICBleHBvcnQgY2xhc3MgSm9pbnRSZXZvbHV0ZSBleHRlbmRzIEpvaW50QXhpYWwge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IEpvaW50LnJlZ2lzdGVyU3ViY2xhc3MoSm9pbnRSZXZvbHV0ZSk7XHJcblxyXG4gICAgcHJvdGVjdGVkIGpvaW50OiBPSU1PLlJldm9sdXRlSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLlJldm9sdXRlSm9pbnRDb25maWcgPSBuZXcgT0lNTy5SZXZvbHV0ZUpvaW50Q29uZmlnKCk7XHJcblxyXG4gICAgI21vdG9yVG9ycXVlOiBudW1iZXIgPSAwO1xyXG4gICAgI3JvdG9yOiBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYXhpczogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDEsIDApLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkLCBfYXhpcywgX2xvY2FsQW5jaG9yKTtcclxuXHJcbiAgICAgIHRoaXMubWF4TW90b3IgPSAzNjA7XHJcbiAgICAgIHRoaXMubWluTW90b3IgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBVcHBlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzLUFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtYXhNb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5tYXhNb3RvciA9IF92YWx1ZTtcclxuICAgICAgX3ZhbHVlICo9IENhbGMuZGVnMnJhZDtcclxuICAgICAgaWYgKHRoaXMuam9pbnQpXHJcbiAgICAgICAgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yKCkudXBwZXJMaW1pdCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBMb3dlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzIEFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtaW5Nb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5taW5Nb3RvciA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQpXHJcbiAgICAgICAgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yKCkubG93ZXJMaW1pdCA9IF92YWx1ZSAqIENhbGMuZGVnMnJhZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgbWF4aW11bSBtb3RvciBmb3JjZSBpbiBOZXd0b24uIGZvcmNlIDw9IDAgZXF1YWxzIGRpc2FibGVkLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtb3RvclRvcnF1ZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbW90b3JUb3JxdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IG1vdG9yVG9ycXVlKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21vdG9yVG9ycXVlID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IoKS5tb3RvclRvcnF1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBJZiB0aGUgdHdvIGNvbm5lY3RlZCBSaWdpZEJvZGllcyBjb2xsaWRlIHdpdGggZWF0aCBvdGhlci4gKERlZmF1bHQgPSBmYWxzZSlcclxuICAgICAqL1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBTYXZpbmcvTG9hZGluZ1xyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgbW90b3JUb3JxdWU6IHRoaXMubW90b3JUb3JxdWUsXHJcbiAgICAgICAgW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdOiBzdXBlci5zZXJpYWxpemUoKVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm1vdG9yVG9ycXVlID0gX3NlcmlhbGl6YXRpb24ubW90b3JUb3JxdWU7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBtdXRhdG9yLm1vdG9yVG9ycXVlID0gdGhpcy5tb3RvclRvcnF1ZTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLm1vdG9yVG9ycXVlKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLm1vdG9yVG9ycXVlID0gX211dGF0b3IubW90b3JUb3JxdWU7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5tb3RvclRvcnF1ZTtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyb3RvciA9IG5ldyBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yKCkuc2V0TGltaXRzKHN1cGVyLm1pbk1vdG9yICogQ2FsYy5kZWcycmFkLCBzdXBlci5tYXhNb3RvciAqIENhbGMuZGVnMnJhZCk7XHJcbiAgICAgIHRoaXMuI3JvdG9yLnNldE1vdG9yKHRoaXMubW90b3JTcGVlZCwgdGhpcy5tb3RvclRvcnF1ZSk7XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZyA9IG5ldyBPSU1PLlJldm9sdXRlSm9pbnRDb25maWcoKTtcclxuICAgICAgc3VwZXIuY29uc3RydWN0Sm9pbnQoKTtcclxuXHJcbiAgICAgIHRoaXMuY29uZmlnLnNwcmluZ0RhbXBlciA9IHRoaXMuc3ByaW5nRGFtcGVyO1xyXG4gICAgICB0aGlzLmNvbmZpZy5saW1pdE1vdG9yID0gdGhpcy4jcm90b3I7XHJcblxyXG4gICAgICB0aGlzLmpvaW50ID0gbmV3IE9JTU8uUmV2b2x1dGVKb2ludCh0aGlzLmNvbmZpZyk7XHJcbiAgICAgIHRoaXMuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCB0aHJlZSBEZWdyZWVzIG9mIEZyZWVkb20sIGFsc28ga25vd24gYXMgYmFsbCBhbmQgc29ja2V0IGpvaW50LiBUd28gYm9kaWVzIGNvbm5lY3RlZCBhdCB0aGVpciBhbmNob3IgYnV0IGZyZWUgdG8gcm90YXRlLlxyXG4gICAgICogVXNlZCBmb3IgdGhpbmdzIGxpa2UgdGhlIGNvbm5lY3Rpb24gb2YgYm9uZXMgaW4gdGhlIGh1bWFuIHNob3VsZGVyIChpZiBzaW1wbGlmaWVkLCBlbHNlIGJldHRlciB1c2UgSm9pbnRSYWdkb2xsKS4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuIE9ubHkgc3ByaW5nIHNldHRpbmdzIGNhbiBiZSBkZWZpbmVkLlxyXG4gICAgICogMyBEZWdyZWVzIGFyZSBzd2luZyBob3Jpem9udGFsLCBzd2luZyB2ZXJ0aWNhbCBhbmQgdHdpc3QuXHJcbiAgICAgKiBcclxuICAgICAqIGBgYHRleHRcclxuICAgICAqICAgICAgICAgICAgICBKb2ludEhvbGRlclxyXG4gICAgICogICAgICAgICB6ICAgICAgYm9keUFuY2hvciAoZS5nLiBIdW1hbi1TaG91bGRlcikgICAgIFxyXG4gICAgICogICAgICB5ICDihpEgICAgICAgICAgXHJcbiAgICAgKiAgICAgICAgXFx8ICAgICAgICAgIOKUgOKUgOKUgCjil4/ilIDilIDilIBcclxuICAgICAqICAteCA8LS0tfC0tLT4geCAgICAgICAgICAgYm9keVRpZWQgICAgICAgIFxyXG4gICAgICogICAgICAgICB8XFwgICAgICAgICAgICAgICAgKGUuZy4gVXBwZXItQXJtKSBcclxuICAgICAqICAgICAgICAg4oaTIC15ICAgICAgIFxyXG4gICAgICogICAgICAgIC16ICAgICAgICAgIFxyXG4gICAgICogYGBgXHJcbiAgICAgKiBAYXV0aG9yIE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICAgKi9cclxuICBleHBvcnQgY2xhc3MgSm9pbnRTcGhlcmljYWwgZXh0ZW5kcyBKb2ludCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFNwaGVyaWNhbCk7XHJcblxyXG4gICAgcHJvdGVjdGVkIGpvaW50OiBPSU1PLlNwaGVyaWNhbEpvaW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogT0lNTy5TcGhlcmljYWxKb2ludENvbmZpZyA9IG5ldyBPSU1PLlNwaGVyaWNhbEpvaW50Q29uZmlnKCk7XHJcblxyXG4gICAgI3NwcmluZ0RhbXBpbmc6IG51bWJlciA9IDA7XHJcbiAgICAjc3ByaW5nRnJlcXVlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgI3NwcmluZ0RhbXBlcjogT0lNTy5TcHJpbmdEYW1wZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9ib2R5QW5jaG9yOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYm9keVRpZWQ6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9sb2NhbEFuY2hvcjogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDApKSB7XHJcbiAgICAgIHN1cGVyKF9ib2R5QW5jaG9yLCBfYm9keVRpZWQpO1xyXG4gICAgICB0aGlzLmFuY2hvciA9IG5ldyBWZWN0b3IzKF9sb2NhbEFuY2hvci54LCBfbG9jYWxBbmNob3IueSwgX2xvY2FsQW5jaG9yLnopO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXQvU2V0IHRyYW5zZm9yIG9mIGZ1ZGdlIHByb3BlcnRpZXMgdG8gdGhlIHBoeXNpY3MgZW5naW5lXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNwcmluZ0RhbXBpbmcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0RhbXBpbmc7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0RhbXBpbmcoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc3ByaW5nRGFtcGluZyA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTcHJpbmdEYW1wZXIoKS5kYW1waW5nUmF0aW8gPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnJlcXVlbmN5IG9mIHRoZSBzcHJpbmcgaW4gSHouIEF0IDAgdGhlIHNwcmluZyBpcyByaWdpZCwgZXF1YWxzIG5vIHNwcmluZy4gVGhlIHNtYWxsZXIgdGhlIHZhbHVlIHRoZSBsZXNzIHJlc3RyaWN0aXZlIGlzIHRoZSBzcHJpbmcuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldCBzcHJpbmdGcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRnJlcXVlbmN5KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTcHJpbmdEYW1wZXIoKS5mcmVxdWVuY3kgPSBfdmFsdWU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIHNwcmluZ0RhbXBpbmc6IHRoaXMuc3ByaW5nRGFtcGluZyxcclxuICAgICAgICBzcHJpbmdGcmVxdWVuY3k6IHRoaXMuc3ByaW5nRnJlcXVlbmN5LFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5zcHJpbmdEYW1waW5nID0gX3NlcmlhbGl6YXRpb24uc3ByaW5nRGFtcGluZztcclxuICAgICAgdGhpcy5zcHJpbmdGcmVxdWVuY3kgPSBfc2VyaWFsaXphdGlvbi5zcHJpbmdGcmVxdWVuY3k7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBtdXRhdG9yLnNwcmluZ0RhbXBpbmcgPSB0aGlzLnNwcmluZ0RhbXBpbmc7XHJcbiAgICAgIG11dGF0b3Iuc3ByaW5nRnJlcXVlbmN5ID0gdGhpcy5zcHJpbmdGcmVxdWVuY3k7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IsIF9zZWxlY3Rpb246IHN0cmluZ1tdID0gbnVsbCwgX2Rpc3BhdGNoTXV0YXRlOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcInNwcmluZ0RhbXBpbmdcIiwgXCJzcHJpbmdGcmVxdWVuY3lcIl0pO1xyXG4gICAgICBkZWxldGUgX211dGF0b3Iuc3ByaW5nRGFtcGluZztcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNwcmluZ0ZyZXF1ZW5jeTtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yLCBfc2VsZWN0aW9uLCBfZGlzcGF0Y2hNdXRhdGUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1wZXIgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy5zcHJpbmdGcmVxdWVuY3ksIHRoaXMuc3ByaW5nRGFtcGluZyk7XHJcbiAgICAgIHRoaXMuY29uZmlnID0gbmV3IE9JTU8uU3BoZXJpY2FsSm9pbnRDb25maWcoKTtcclxuICAgICAgc3VwZXIuY29uc3RydWN0Sm9pbnQoKTtcclxuICAgICAgdGhpcy5jb25maWcuc3ByaW5nRGFtcGVyID0gdGhpcy4jc3ByaW5nRGFtcGVyO1xyXG5cclxuICAgICAgdGhpcy5qb2ludCA9IG5ldyBPSU1PLlNwaGVyaWNhbEpvaW50KHRoaXMuY29uZmlnKTtcclxuICAgICAgc3VwZXIuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCB0d28gZGVmaW5lZCBheGlzIChub3JtYWxseSBlLmcuICgwLDAsMSkgYW5kIHJvdGF0aW9uKDEsMCwwKSksIHRoZXkgc2hhcmUgdGhlIHNhbWUgYW5jaG9yIGFuZCBoYXZlIGZyZWUgcm90YXRpb24sIGJ1dCB0cmFuc2ZlciB0aGUgdHdpc3QuXHJcbiAgICAgKiBJbiByZWFsaXR5IHVzZWQgaW4gY2FycyB0byB0cmFuc2ZlciB0aGUgbW9yZSBzdGFibGUgc3RhdGlvbmFyeSBmb3JjZSBvbiB0aGUgdmVsb2NpdHkgYXhpcyB0byB0aGUgYnVtcGluZywgZGFtcGVkIG1vdmluZyB3aGVlbC4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuXHJcbiAgICAgKiBUaGUgdHdvIG1vdG9ycyBjYW4gYmUgZGVmaW5lZCBmb3IgdGhlIHR3byByb3RhdGlvbiBheGlzLCBhbG9uZyB3aXRoIHNwcmluZ3MuIFxyXG4gICAgICogYGBgdGV4dCAgICAgICAgXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgYW5jaG9yIC0gdHdpc3QgaXMgdHJhbnNmZXJlZCBiZXR3ZWVuIGJvZGllc1xyXG4gICAgICogICAgICAgICB6ICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAqICAgICAgICAg4oaRICAgICAgICAgICAgLS0tLS0gIHwgIC0tLS0tLS0tLS0tLVxyXG4gICAgICogICAgICAgICB8ICAgICAgICAgICB8ICAgICB8IOKGkyB8ICAgICAgICAgICAgfCBcclxuICAgICAqICAteCA8LS0tfC0tLT4geCAgICAgfCAgICAgfCB4IHwgICAgICAgICAgICB8ICAgICAgICAgICBlLmcuIHdoZWVsIGNhbiBzdGlsbCB0dXJuIHVwL2Rvd24sIFxyXG4gICAgICogICAgICAgICB8ICAgICAgICAgICB8ICAgICB8ICAgfCAgICAgICAgICAgIHwgICAgICAgICAgIGxlZnQgcmlnaHQgYnV0IHRyYW5zZmVyaW5nIGl0J3Mgcm90YXRpb24gb24gdG8gdGhlIHdoZWVsLWF4aXMuXHJcbiAgICAgKiAgICAgICAgIOKGkyAgICAgICAgICAgIC0tLS0tICAgICAtLS0tLS0tLS0tLS1cclxuICAgICAqICAgICAgICAteiAgICBcclxuICAgICAqICAgICAgICAgICAgICAgICBhdHRhY2hlZFJCICAgICAgICAgIGNvbm5lY3RlZFJCXHJcbiAgICAgKiAgICAgICAgICAgICAgICAoZS5nLiB3aGVlbCkgICAgICAgKGUuZy4gd2hlZWwtYXhpcylcclxuICAgICAqIGBgYFxyXG4gICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBKb2ludFVuaXZlcnNhbCBleHRlbmRzIEpvaW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBKb2ludC5yZWdpc3RlclN1YmNsYXNzKEpvaW50VW5pdmVyc2FsKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgam9pbnQ6IE9JTU8uVW5pdmVyc2FsSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLlVuaXZlcnNhbEpvaW50Q29uZmlnID0gbmV3IE9JTU8uVW5pdmVyc2FsSm9pbnRDb25maWcoKTtcclxuXHJcbiAgICAjc3ByaW5nRGFtcGluZ0ZpcnN0OiBudW1iZXIgPSAwO1xyXG4gICAgI3NwcmluZ0ZyZXF1ZW5jeUZpcnN0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNzcHJpbmdEYW1waW5nU2Vjb25kOiBudW1iZXIgPSAwO1xyXG4gICAgI3NwcmluZ0ZyZXF1ZW5jeVNlY29uZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjbWF4Um90b3JGaXJzdDogbnVtYmVyID0gMzYwO1xyXG4gICAgI21pblJvdG9yRmlyc3Q6IG51bWJlciA9IDA7XHJcbiAgICAjcm90b3JUb3JxdWVGaXJzdDogbnVtYmVyID0gMDtcclxuICAgICNyb3RvclNwZWVkRmlyc3Q6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21heFJvdG9yU2Vjb25kOiBudW1iZXIgPSAzNjA7XHJcbiAgICAjbWluUm90b3JTZWNvbmQ6IG51bWJlciA9IDA7XHJcbiAgICAjcm90b3JUb3JxdWVTZWNvbmQ6IG51bWJlciA9IDA7XHJcbiAgICAjcm90b3JTcGVlZFNlY29uZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjbW90b3JGaXJzdDogT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcjtcclxuICAgICNtb3RvclNlY29uZDogT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcjtcclxuICAgICNheGlzU3ByaW5nRGFtcGVyRmlyc3Q6IE9JTU8uU3ByaW5nRGFtcGVyO1xyXG4gICAgI2F4aXNTcHJpbmdEYW1wZXJTZWNvbmQ6IE9JTU8uU3ByaW5nRGFtcGVyO1xyXG4gICAgI2F4aXNGaXJzdDogT0lNTy5WZWMzO1xyXG4gICAgI2F4aXNTZWNvbmQ6IE9JTU8uVmVjMztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2JvZHlBbmNob3I6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9ib2R5VGllZDogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2F4aXNGaXJzdDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDEsIDAsIDApLCBfYXhpc1NlY29uZDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDEpLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkKTtcclxuICAgICAgdGhpcy5heGlzRmlyc3QgPSBfYXhpc0ZpcnN0O1xyXG4gICAgICB0aGlzLmF4aXNTZWNvbmQgPSBfYXhpc1NlY29uZDtcclxuICAgICAgdGhpcy5hbmNob3IgPSBfbG9jYWxBbmNob3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIEdldC9TZXQgdHJhbnNmb3Igb2YgZnVkZ2UgcHJvcGVydGllcyB0byB0aGUgcGh5c2ljcyBlbmdpbmVcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF4aXMgY29ubmVjdGluZyB0aGUgdGhlIHR3byB7QGxpbmsgTm9kZX1zIGUuZy4gVmVjdG9yMygwLDEsMCkgdG8gaGF2ZSBhIHVwd2FyZCBjb25uZWN0aW9uLlxyXG4gICAgICogIFdoZW4gY2hhbmdlZCBhZnRlciBpbml0aWFsaXphdGlvbiB0aGUgam9pbnQgbmVlZHMgdG8gYmUgcmVjb25uZWN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYXhpc0ZpcnN0KCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy4jYXhpc0ZpcnN0LngsIHRoaXMuI2F4aXNGaXJzdC55LCB0aGlzLiNheGlzRmlyc3Queik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGF4aXNGaXJzdChfdmFsdWU6IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy4jYXhpc0ZpcnN0ID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgIHRoaXMuZGlydHlTdGF0dXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgKiBUaGUgYXhpcyBjb25uZWN0aW5nIHRoZSB0aGUgdHdvIHtAbGluayBOb2RlfXMgZS5nLiBWZWN0b3IzKDAsMSwwKSB0byBoYXZlIGEgdXB3YXJkIGNvbm5lY3Rpb24uXHJcbiAgICAqICBXaGVuIGNoYW5nZWQgYWZ0ZXIgaW5pdGlhbGl6YXRpb24gdGhlIGpvaW50IG5lZWRzIHRvIGJlIHJlY29ubmVjdGVkLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYXhpc1NlY29uZCgpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMuI2F4aXNTZWNvbmQueCwgdGhpcy4jYXhpc1NlY29uZC55LCB0aGlzLiNheGlzU2Vjb25kLnopO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBheGlzU2Vjb25kKF92YWx1ZTogVmVjdG9yMykge1xyXG4gICAgICB0aGlzLiNheGlzU2Vjb25kID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgIHRoaXMuZGlydHlTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkYW1waW5nIG9mIHRoZSBzcHJpbmcuIDEgZXF1YWxzIGNvbXBsZXRseSBkYW1wZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3ByaW5nRGFtcGluZ0ZpcnN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdEYW1waW5nRmlyc3Q7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0RhbXBpbmdGaXJzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1waW5nRmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0U3ByaW5nRGFtcGVyMSgpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNwcmluZ0ZyZXF1ZW5jeUZpcnN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lGaXJzdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRnJlcXVlbmN5Rmlyc3QoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc3ByaW5nRnJlcXVlbmN5Rmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0U3ByaW5nRGFtcGVyMSgpLmZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkYW1waW5nIG9mIHRoZSBzcHJpbmcuIDEgZXF1YWxzIGNvbXBsZXRseSBkYW1wZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3ByaW5nRGFtcGluZ1NlY29uZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc3ByaW5nRGFtcGluZ1NlY29uZDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRGFtcGluZ1NlY29uZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1waW5nU2Vjb25kID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFNwcmluZ0RhbXBlcjIoKS5kYW1waW5nUmF0aW8gPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnJlcXVlbmN5IG9mIHRoZSBzcHJpbmcgaW4gSHouIEF0IDAgdGhlIHNwcmluZyBpcyByaWdpZCwgZXF1YWxzIG5vIHNwcmluZy4gVGhlIHNtYWxsZXIgdGhlIHZhbHVlIHRoZSBsZXNzIHJlc3RyaWN0aXZlIGlzIHRoZSBzcHJpbmcuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldCBzcHJpbmdGcmVxdWVuY3lTZWNvbmQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVNlY29uZDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRnJlcXVlbmN5U2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVNlY29uZCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTcHJpbmdEYW1wZXIyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBVcHBlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzLUFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtYXhSb3RvckZpcnN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXhSb3RvckZpcnN0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtYXhSb3RvckZpcnN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21heFJvdG9yRmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjEoKS51cHBlckxpbWl0ID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBMb3dlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzIEFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtaW5Sb3RvckZpcnN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtaW5Sb3RvckZpcnN0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtaW5Sb3RvckZpcnN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21pblJvdG9yRmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjEoKS5sb3dlckxpbWl0ID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSB0YXJnZXQgcm90YXRpb25hbCBzcGVlZCBvZiB0aGUgbW90b3IgaW4gbS9zLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb3RvclNwZWVkRmlyc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3JvdG9yU3BlZWRGaXJzdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgcm90b3JTcGVlZEZpcnN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yU3BlZWRGaXJzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yMSgpLm1vdG9yU3BlZWQgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4aW11bSBtb3RvciB0b3JxdWUgaW4gTmV3dG9uLiBmb3JjZSA8PSAwIGVxdWFscyBkaXNhYmxlZC4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcm90b3JUb3JxdWVGaXJzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JUb3JxdWVGaXJzdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgcm90b3JUb3JxdWVGaXJzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyb3RvclRvcnF1ZUZpcnN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IxKCkubW90b3JUb3JxdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgVXBwZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcy1BbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWF4Um90b3JTZWNvbmQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21heFJvdG9yU2Vjb25kO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBtYXhSb3RvclNlY29uZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtYXhSb3RvclNlY29uZCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yMigpLnVwcGVyTGltaXQgPSBfdmFsdWUgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIExvd2VyIExpbWl0IG9mIG1vdmVtZW50IGFsb25nIHRoZSBheGlzIG9mIHRoaXMgam9pbnQuIFRoZSBsaW1pdGVyIGlzIGRpc2FibGUgaWYgbG93ZXJMaW1pdCA+IHVwcGVyTGltaXQuIEF4aXMgQW5nbGUgbWVhc3VyZWQgaW4gRGVncmVlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1pblJvdG9yU2Vjb25kKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtaW5Sb3RvclNlY29uZDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbWluUm90b3JTZWNvbmQoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbWluUm90b3JTZWNvbmQgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjIoKS5sb3dlckxpbWl0ID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSB0YXJnZXQgcm90YXRpb25hbCBzcGVlZCBvZiB0aGUgbW90b3IgaW4gbS9zLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb3RvclNwZWVkU2Vjb25kKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNyb3RvclNwZWVkU2Vjb25kO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCByb3RvclNwZWVkU2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yU3BlZWRTZWNvbmQgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjIoKS5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBtYXhpbXVtIG1vdG9yIHRvcnF1ZSBpbiBOZXd0b24uIGZvcmNlIDw9IDAgZXF1YWxzIGRpc2FibGVkLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb3RvclRvcnF1ZVNlY29uZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JUb3JxdWVTZWNvbmQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHJvdG9yVG9ycXVlU2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yVG9ycXVlU2Vjb25kID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IyKCkubW90b3JUb3JxdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogSWYgdGhlIHR3byBjb25uZWN0ZWQgUmlnaWRCb2RpZXMgY29sbGlkZSB3aXRoIGVhdGggb3RoZXIuIChEZWZhdWx0ID0gZmFsc2UpXHJcbiAgICAgKi9cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy4jZ2V0TXV0YXRvcigpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmZpcnN0QXhpcyA9IHRoaXMuYXhpc0ZpcnN0LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNlY29uZEF4aXMgPSB0aGlzLmF4aXNTZWNvbmQuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5heGlzRmlyc3QgPSBhd2FpdCBuZXcgVmVjdG9yMygpLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmF4aXNGaXJzdCk7XHJcbiAgICAgIHRoaXMuYXhpc1NlY29uZCA9IGF3YWl0IG5ldyBWZWN0b3IzKCkuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uYXhpc1NlY29uZCk7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvciwgX3NlbGVjdGlvbjogc3RyaW5nW10gPSBudWxsLCBfZGlzcGF0Y2hNdXRhdGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmF4aXNGaXJzdCkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5heGlzRmlyc3QgPSBuZXcgVmVjdG9yMyguLi48bnVtYmVyW10+KE9iamVjdC52YWx1ZXMoX211dGF0b3IuYXhpc0ZpcnN0KSkpO1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci5heGlzU2Vjb25kKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLmF4aXNTZWNvbmQgPSBuZXcgVmVjdG9yMyguLi48bnVtYmVyW10+KE9iamVjdC52YWx1ZXMoX211dGF0b3IuYXhpc1NlY29uZCkpKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmF4aXNGaXJzdDtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmF4aXNTZWNvbmQ7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIHRoaXMuZGVsZXRlRnJvbU11dGF0b3IoX211dGF0b3IsIHRoaXMuI2dldE11dGF0b3IoKSk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgbXV0YXRvci5heGlzRmlyc3QgPSB0aGlzLmF4aXNGaXJzdC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIG11dGF0b3IuYXhpc1NlY29uZCA9IHRoaXMuYXhpc1NlY29uZC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNheGlzU3ByaW5nRGFtcGVyRmlyc3QgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy4jc3ByaW5nRnJlcXVlbmN5Rmlyc3QsIHRoaXMuI3NwcmluZ0RhbXBpbmdGaXJzdCk7XHJcbiAgICAgIHRoaXMuI2F4aXNTcHJpbmdEYW1wZXJTZWNvbmQgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy4jc3ByaW5nRnJlcXVlbmN5U2Vjb25kLCB0aGlzLiNzcHJpbmdEYW1waW5nU2Vjb25kKTtcclxuXHJcbiAgICAgIHRoaXMuI21vdG9yRmlyc3QgPSBuZXcgT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcigpLnNldExpbWl0cyh0aGlzLiNtaW5Sb3RvckZpcnN0ICogQ2FsYy5kZWcycmFkLCB0aGlzLiNtYXhSb3RvckZpcnN0ICogQ2FsYy5kZWcycmFkKTtcclxuICAgICAgdGhpcy4jbW90b3JGaXJzdC5zZXRNb3Rvcih0aGlzLiNyb3RvclNwZWVkRmlyc3QsIHRoaXMuI3JvdG9yVG9ycXVlRmlyc3QpO1xyXG4gICAgICB0aGlzLiNtb3RvclNlY29uZCA9IG5ldyBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yKCkuc2V0TGltaXRzKHRoaXMuI21pblJvdG9yRmlyc3QgKiBDYWxjLmRlZzJyYWQsIHRoaXMuI21heFJvdG9yRmlyc3QgKiBDYWxjLmRlZzJyYWQpO1xyXG4gICAgICB0aGlzLiNtb3RvclNlY29uZC5zZXRNb3Rvcih0aGlzLiNyb3RvclNwZWVkRmlyc3QsIHRoaXMuI3JvdG9yVG9ycXVlRmlyc3QpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5Vbml2ZXJzYWxKb2ludENvbmZpZygpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCh0aGlzLiNheGlzRmlyc3QsIHRoaXMuI2F4aXNTZWNvbmQpO1xyXG4gICAgICB0aGlzLmNvbmZpZy5saW1pdE1vdG9yMSA9IHRoaXMuI21vdG9yRmlyc3Q7XHJcbiAgICAgIHRoaXMuY29uZmlnLmxpbWl0TW90b3IyID0gdGhpcy4jbW90b3JTZWNvbmQ7XHJcbiAgICAgIHRoaXMuY29uZmlnLnNwcmluZ0RhbXBlcjEgPSB0aGlzLiNheGlzU3ByaW5nRGFtcGVyRmlyc3Q7XHJcbiAgICAgIHRoaXMuY29uZmlnLnNwcmluZ0RhbXBlcjIgPSB0aGlzLiNheGlzU3ByaW5nRGFtcGVyU2Vjb25kO1xyXG5cclxuICAgICAgdGhpcy5qb2ludCA9IG5ldyBPSU1PLlVuaXZlcnNhbEpvaW50KHRoaXMuY29uZmlnKTtcclxuICAgICAgc3VwZXIuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAjZ2V0TXV0YXRvciA9ICgpOiBNdXRhdG9yID0+IHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgc3ByaW5nRGFtcGluZ0ZpcnN0OiB0aGlzLiNzcHJpbmdEYW1waW5nRmlyc3QsXHJcbiAgICAgICAgc3ByaW5nRnJlcXVlbmN5Rmlyc3Q6IHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeUZpcnN0LFxyXG4gICAgICAgIHNwcmluZ0RhbXBpbmdTZWNvbmQ6IHRoaXMuI3NwcmluZ0RhbXBpbmdTZWNvbmQsXHJcbiAgICAgICAgc3ByaW5nRnJlcXVlbmN5U2Vjb25kOiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lTZWNvbmQsXHJcbiAgICAgICAgbWF4Um90b3JGaXJzdDogdGhpcy4jbWF4Um90b3JGaXJzdCxcclxuICAgICAgICBtaW5Sb3RvckZpcnN0OiB0aGlzLiNtaW5Sb3RvckZpcnN0LFxyXG4gICAgICAgIHJvdG9yU3BlZWRGaXJzdDogdGhpcy4jcm90b3JTcGVlZEZpcnN0LFxyXG4gICAgICAgIHJvdG9yVG9ycXVlRmlyc3Q6IHRoaXMuI3JvdG9yVG9ycXVlRmlyc3QsXHJcbiAgICAgICAgbWF4Um90b3JTZWNvbmQ6IHRoaXMuI21heFJvdG9yU2Vjb25kLFxyXG4gICAgICAgIG1pblJvdG9yU2Vjb25kOiB0aGlzLiNtaW5Sb3RvclNlY29uZCxcclxuICAgICAgICByb3RvclNwZWVkU2Vjb25kOiB0aGlzLiNyb3RvclNwZWVkU2Vjb25kLFxyXG4gICAgICAgIHJvdG9yVG9ycXVlU2Vjb25kOiB0aGlzLiNyb3RvclRvcnF1ZVNlY29uZFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH07XHJcblxyXG4gICAgI211dGF0ZSA9IChfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcclxuICAgICAgICBcInNwcmluZ0RhbXBpbmdGaXJzdFwiLCBcInNwcmluZ0ZyZXF1ZW5jeUZpcnN0XCIsIFwic3ByaW5nRGFtcGluZ1NlY29uZFwiLCBcInNwcmluZ0ZyZXF1ZW5jeVNlY29uZFwiLFxyXG4gICAgICAgIFwibWF4Um90b3JGaXJzdFwiLCBcIm1pblJvdG9yRmlyc3RcIiwgXCJyb3RvclNwZWVkRmlyc3RcIiwgXCJyb3RvclRvcnF1ZUZpcnN0XCIsXHJcbiAgICAgICAgXCJtYXhSb3RvclNlY29uZFwiLCBcIm1pblJvdG9yU2Vjb25kXCIsIFwicm90b3JTcGVlZFNlY29uZFwiLCBcIi5yb3RvclRvcnF1ZVNlY29uZFwiXVxyXG4gICAgICApO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCBubyBtb3ZlbWVudC4gXHJcbiAgICAgKiBCZXN0IHdheSB0byBzaW11bGF0ZSBjb252ZXggb2JqZWN0cyBsaWtlIGEgY2hhaXIgc2VhdCBjb25uZWN0ZWQgdG8gY2hhaXIgbGVncy5cclxuICAgICAqIFRoZSBhY3R1YWwgYW5jaG9yIHBvaW50IGRvZXMgbm90IG1hdHRlciB0aGF0IG11Y2gsIG9ubHkgaW4gdmVyeSBzcGVjaWZpYyBlZGdlIGNhc2VzLlxyXG4gICAgICogQmVjYXVzZSB3ZWxkaW5nIG1lYW5zIHRoZXkgc2ltcGx5IGRvIG5vdCBkaXNjb25uZWN0LiAodW5sZXNzIHlvdSBhZGQgQnJlYWthYmlsaXR5KVxyXG4gICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBKb2ludFdlbGRpbmcgZXh0ZW5kcyBKb2ludCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFdlbGRpbmcpO1xyXG5cclxuICAgIHByb3RlY3RlZCBqb2ludDogT0lNTy5HZW5lcmljSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLkdlbmVyaWNKb2ludENvbmZpZyA9IG5ldyBPSU1PLkdlbmVyaWNKb2ludENvbmZpZygpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkKTtcclxuXHJcbiAgICAgIHRoaXMuYW5jaG9yID0gbmV3IFZlY3RvcjMoX2xvY2FsQW5jaG9yLngsIF9sb2NhbEFuY2hvci55LCBfbG9jYWxBbmNob3Iueik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgLy8jcmVnaW9uIFNhdmluZy9Mb2FkaW5nXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmNvbmZpZyA9IG5ldyBPSU1PLkdlbmVyaWNKb2ludENvbmZpZygpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludChuZXcgT0lNTy5NYXQzKCksIG5ldyBPSU1PLk1hdDMoKSk7XHJcblxyXG4gICAgICB0aGlzLmpvaW50ID0gbmV3IE9JTU8uR2VuZXJpY0pvaW50KHRoaXMuY29uZmlnKTtcclxuICAgICAgdGhpcy5qb2ludC5zZXRBbGxvd0NvbGxpc2lvbih0aGlzLmludGVybmFsQ29sbGlzaW9uKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vRGlzdHJpYnV0aW9uL09pbW9QaHlzaWNzLmQudHNcIi8+XHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICogTWFuYWdlcyB0aGUgT0lNTyBwaHlzaWNzIGVuZ2luZSBmb3IgRlVER0UuIE11bHRpcGxlIGluc3RhbmNlcyBtYXkgYmUgY3JlYXRlZCwgb25lIGlzIGFjdGl2ZSBhdCBhIHRpbWUuXHJcbiAgICAqIEFsbCBtZXRob2RzIGFyZSBzdGF0aWMgYW5kIHVzZSB0aGUgY3VycmVudGx5IGFjdGl2ZSBpbnN0YW5jZS4gQXQgc3RhcnR1cCwgYSBkZWZhdWx0IGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGJlY29tZSB0aGUgYWN0aXZlIGluc3RhbmNlXHJcbiAgICAqIEF0dGFjaGluZyBhIHtAbGluayBDb21wb25lbnRSaWdpZGJvZHl9IHRvIGEge0BsaW5rIE5vZGV9IHBsYWNlcyBhIHBoeXNpY3MgY29sbGlkZXIgaW4gdGhlIHBoeXNpY3MgaW5zdGFuY2UgYWN0aXZlIGF0IHRoYXQgdGltZS5cclxuICAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUgMjAyMFxyXG4gICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGh5c2ljcyB7XHJcbiAgICAvKiogVGhlIFNFVFRJTkdTIHRoYXQgYXBwbHkgdG8gdGhlIHBoeXNpY2FsIHdvcmxkLiBSYW5naW5nIGZyb20gdGhpbmdzIGxpa2Ugc2xlZXBpbmcsIGNvbGxpc2lvblNoYXBlVGhpY2tuZXNzIGFuZCBvdGhlcnMgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0dGluZ3M6IFBoeXNpY3NTZXR0aW5ncyA9IG5ldyBQaHlzaWNzU2V0dGluZ3MoQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIChDT0xMSVNJT05fR1JPVVAuREVGQVVMVCB8IENPTExJU0lPTl9HUk9VUC5HUk9VUF8xIHwgQ09MTElTSU9OX0dST1VQLkdST1VQXzIgfCBDT0xMSVNJT05fR1JPVVAuR1JPVVBfMyB8IENPTExJU0lPTl9HUk9VUC5HUk9VUF80KSk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyDGkmFjdGl2ZTogUGh5c2ljcyA9IG5ldyBQaHlzaWNzKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBvaW1vV29ybGQ6IE9JTU8uV29ybGQ7XHJcbiAgICBwcml2YXRlIGJvZHlMaXN0OiBDb21wb25lbnRSaWdpZGJvZHlbXSA9IG5ldyBBcnJheSgpO1xyXG4gICAgcHJpdmF0ZSBqb2ludExpc3Q6IEpvaW50W10gPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgICAvKiogVGhlIHJlbmRlcmluZyBvZiBwaHlzaWNhbCBkZWJ1ZyBpbmZvcm1hdGlvbnMuIFVzZWQgaW50ZXJuYWxseSBubyBpbnRlcmFjdGlvbiBuZWVkZWQuKi9cclxuICAgICNkZWJ1Z0RyYXc6IFBoeXNpY3NEZWJ1Z0RyYXc7XHJcbiAgICAvKiogVGhlIGNhbWVyYS92aWV3cG9ydCB0aGUgcGh5c2ljcyBhcmUgZGVidWdnZWQgdG8uIFVzZWQgaW50ZXJuYWxseSBubyBpbnRlcmFjdGlvbiBuZWVkZWQuICovXHJcbiAgICAjbWFpbkNhbTogQ29tcG9uZW50Q2FtZXJhO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgaWYgKHR5cGVvZiBPSU1PID09IFwidW5kZWZpbmVkXCIpIHsvLyBDaGVjayBpZiBPSU1PIE5hbWVzcGFjZSB3YXMgbG9hZGVkLCBlbHNlIGRvIG5vdCB1c2UgYW55IHBoeXNpY3MuIENoZWNrIGlzIG5lZWRlZCB0byBlbnN1cmUgRlVER0UgY2FuIGJlIHVzZWQgd2l0aG91dCBQaHlzaWNzXHJcbiAgICAgICAgRGVidWcuZXJyb3IoXCJPSU1PIHBoeXNpY3MgZW5naW5lIG5vdCBjb25uZWN0ZWQhXCIpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub2ltb1dvcmxkID0gbmV3IE9JTU8uV29ybGQoKTtcclxuICAgICAgdGhpcy4jZGVidWdEcmF3ID0gbmV3IFBoeXNpY3NEZWJ1Z0RyYXcoKTsgIC8vQ3JlYXRlIGEgRlVER0UgUGh5c2ljcyBkZWJ1Z2dpbmcgaGFuZGxpbmcgb2JqZWN0XHJcbiAgICAgIHRoaXMub2ltb1dvcmxkLnNldERlYnVnRHJhdyh0aGlzLiNkZWJ1Z0RyYXcub2ltb0RlYnVnRHJhdyk7IC8vVGVsbCBPaW1vUGh5c2ljcyB3aGVyZSB0byBkZWJ1ZyB0byBhbmQgaG93IGl0IHdpbGwgYmUgaGFuZGxlZFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWZpbmUgdGhlIGN1cnJlbnRseSBhY3RpdmUgUGh5c2ljcyBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldCBhY3RpdmVJbnN0YW5jZShfcGh5c2ljczogUGh5c2ljcykge1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlID0gX3BoeXNpY3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCB0aGUgY3VycmVudGx5IGFjdGl2ZSBQaHlzaWNzIGluc3RhbmNlICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBhY3RpdmVJbnN0YW5jZSgpOiBQaHlzaWNzIHtcclxuICAgICAgcmV0dXJuIFBoeXNpY3MuxpJhY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZGVidWdEcmF3KCk6IFBoeXNpY3NEZWJ1Z0RyYXcge1xyXG4gICAgICByZXR1cm4gUGh5c2ljcy7GkmFjdGl2ZS4jZGVidWdEcmF3O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgbWFpbkNhbSgpOiBDb21wb25lbnRDYW1lcmEge1xyXG4gICAgICByZXR1cm4gUGh5c2ljcy7GkmFjdGl2ZS4jbWFpbkNhbTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ2FzdCBhIFJBWSBpbnRvIHRoZSBwaHlzaWNhbCB3b3JsZCBmcm9tIGEgb3JpZ2luIHBvaW50IGluIGEgY2VydGFpbiBkaXJlY3Rpb24uIFJlY2VpdmluZyBpbmZvcm1hdGlvbnMgYWJvdXQgdGhlIGhpdCBvYmplY3QgYW5kIHRoZVxyXG4gICAgKiBoaXQgcG9pbnQuIERvIG5vdCBzcGVjaWZ5IGEgX2dyb3VwIHRvIHJheWNhc3QgdGhlIHdob2xlIHdvcmxkLCBlbHNlIG9ubHkgYm9kaWVzIHdpdGhpbiB0aGUgc3BlY2lmaWMgZ3JvdXAgY2FuIGJlIGhpdC5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJheWNhc3QoX29yaWdpbjogVmVjdG9yMywgX2RpcmVjdGlvbjogVmVjdG9yMywgX2xlbmd0aDogbnVtYmVyID0gMSwgX2RlYnVnRHJhdzogYm9vbGVhbiA9IGZhbHNlLCBfZ3JvdXA6IENPTExJU0lPTl9HUk9VUCA9IENPTExJU0lPTl9HUk9VUC5ERUZBVUxUKTogUmF5SGl0SW5mbyB7XHJcbiAgICAgIGxldCBoaXRJbmZvOiBSYXlIaXRJbmZvID0gbmV3IFJheUhpdEluZm8oKTtcclxuICAgICAgbGV0IHJheTogT0lNTy5SYXlDYXN0Q2xvc2VzdCA9IG5ldyBPSU1PLlJheUNhc3RDbG9zZXN0KCk7XHJcbiAgICAgIGxldCBiZWdpbjogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyhfb3JpZ2luLngsIF9vcmlnaW4ueSwgX29yaWdpbi56KTtcclxuICAgICAgbGV0IGVuZDogT0lNTy5WZWMzID0gdGhpcy5nZXRSYXlFbmRQb2ludChiZWdpbiwgbmV3IFZlY3RvcjMoX2RpcmVjdGlvbi54LCBfZGlyZWN0aW9uLnksIF9kaXJlY3Rpb24ueiksIF9sZW5ndGgpO1xyXG4gICAgICByYXkuY2xlYXIoKTtcclxuICAgICAgaWYgKF9ncm91cCA9PSBDT0xMSVNJT05fR1JPVVAuREVGQVVMVCkgeyAvL0Nhc2UgMTogUmF5Y2FzdGluZyB0aGUgd2hvbGUgd29ybGQsIG5vcm1hbCBtb2RlXHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQucmF5Q2FzdChiZWdpbiwgZW5kLCByYXkpO1xyXG4gICAgICB9IGVsc2UgeyAvL0Nhc2UyOiBSYXljYXN0aW5nIG9uIGVhY2ggYm9keSBpbiBhIHNwZWNpZmljIGdyb3VwXHJcbiAgICAgICAgbGV0IGFsbEhpdHM6IFJheUhpdEluZm9bXSA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIFBoeXNpY3MuxpJhY3RpdmUuYm9keUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoX3ZhbHVlOiBDb21wb25lbnRSaWdpZGJvZHkpOiB2b2lkIHtcclxuICAgICAgICAgIGlmIChfdmFsdWUuY29sbGlzaW9uR3JvdXAgPT0gX2dyb3VwKSB7XHJcbiAgICAgICAgICAgIGhpdEluZm8gPSBfdmFsdWUucmF5Y2FzdFRoaXNCb2R5KF9vcmlnaW4sIF9kaXJlY3Rpb24sIF9sZW5ndGgpO1xyXG4gICAgICAgICAgICBpZiAoaGl0SW5mby5oaXQgPT0gdHJ1ZSkgeyAvL0V2ZXJ5IGhpdCBpcyBjb3VsZCBwb3RlbnRpYWxseSBiZSB0aGUgY2xvc2VzdFxyXG4gICAgICAgICAgICAgIGFsbEhpdHMucHVzaChoaXRJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFsbEhpdHMuZm9yRWFjaChmdW5jdGlvbiAoX3ZhbHVlOiBSYXlIaXRJbmZvKTogdm9pZCB7IC8vZ2V0IHRoZSBjbG9zZXN0IGhpdEluZm9cclxuICAgICAgICAgIGlmIChfdmFsdWUuaGl0RGlzdGFuY2UgPCBoaXRJbmZvLmhpdERpc3RhbmNlIHx8IGhpdEluZm8uaGl0ID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGhpdEluZm8gPSBfdmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJheS5oaXQpIHsgLy9GaWxsIGluIGluZm9ybWF0aW9ucyBvbiB0aGUgaGl0XHJcbiAgICAgICAgaGl0SW5mby5oaXQgPSB0cnVlO1xyXG4gICAgICAgIGhpdEluZm8uaGl0UG9pbnQgPSBuZXcgVmVjdG9yMyhyYXkucG9zaXRpb24ueCwgcmF5LnBvc2l0aW9uLnksIHJheS5wb3NpdGlvbi56KTtcclxuICAgICAgICBoaXRJbmZvLmhpdE5vcm1hbCA9IG5ldyBWZWN0b3IzKHJheS5ub3JtYWwueCwgcmF5Lm5vcm1hbC55LCByYXkubm9ybWFsLnopO1xyXG4gICAgICAgIGhpdEluZm8uaGl0RGlzdGFuY2UgPSB0aGlzLmdldFJheURpc3RhbmNlKF9vcmlnaW4sIGhpdEluZm8uaGl0UG9pbnQpO1xyXG4gICAgICAgIGhpdEluZm8ucmlnaWRib2R5Q29tcG9uZW50ID0gcmF5LnNoYXBlLnVzZXJEYXRhO1xyXG4gICAgICAgIGhpdEluZm8ucmF5RW5kID0gbmV3IFZlY3RvcjMoZW5kLngsIGVuZC55LCBlbmQueik7XHJcbiAgICAgICAgaGl0SW5mby5yYXlPcmlnaW4gPSBfb3JpZ2luO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhpdEluZm8ucmF5T3JpZ2luID0gX29yaWdpbjtcclxuICAgICAgICBoaXRJbmZvLmhpdFBvaW50ID0gbmV3IFZlY3RvcjMoZW5kLngsIGVuZC55LCBlbmQueik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKF9kZWJ1Z0RyYXcpIHsgLy9IYW5kbGUgZGVidWdnaW5nXHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS4jZGVidWdEcmF3LmRlYnVnUmF5KGhpdEluZm8ucmF5T3JpZ2luLCBoaXRJbmZvLmhpdFBvaW50LCBuZXcgQ29sb3IoMCwgMSwgMCwgMSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBoaXRJbmZvO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICogU2ltdWxhdGVzIHRoZSBwaHlzaWNhbCB3b3JsZC4gX2RlbHRhVGltZSBpcyB0aGUgYW1vdW50IG9mIHRpbWUgYmV0d2VlbiBwaHlzaWNhbCBzdGVwcyBpbiBzZWNvbmRzLiBEZWZhdWx0IGlzIHtAbGluayBMb29wLnRpbWVGcmFtZUdhbWV9IC8gMTAwMCB0byBydW4gaW4gc3luYyB3aXRoIHRoZSB7QGxpbmsgTG9vcH0uXHJcbiAgICAqIFRoZSBtYXhpbXVtIHZhbHVlIGlzIDEvMzAgb2YgYSBzZWNvbmQsIHRvIGhhdmUgbW9yZSBjb25zaXN0ZW50IGZyYW1lIGNhbGN1bGF0aW9ucy5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNpbXVsYXRlKF9kZWx0YVRpbWU6IG51bWJlciA9IExvb3AudGltZUZyYW1lR2FtZSAvIDEwMDApOiB2b2lkIHtcclxuICAgICAgaWYgKFBoeXNpY3MuxpJhY3RpdmUuam9pbnRMaXN0Lmxlbmd0aCA+IDApXHJcbiAgICAgICAgUGh5c2ljcy5jb25uZWN0Sm9pbnRzKCk7IC8vIENvbm5lY3Qgam9pbnRzIGlmIGFueXRoaW5nIGhhcyBoYXBwZW5lZCBiZXR3ZWVuIHRoZSBsYXN0IGNhbGwgdG8gYW55IG9mIHRoZSB0d28gcGFpcmVkIHJpZ2lkYm9kaWVzXHJcbiAgICAgIGlmIChfZGVsdGFUaW1lID09IDApIC8vIE5vIHRpbWUgcGFzc2VkLCBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgcGh5c2ljcyB3b3JsZFxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIF9kZWx0YVRpbWUgPSBfZGVsdGFUaW1lID4gMSAvIDMwID8gMSAvIDMwIDogX2RlbHRhVGltZTsgLy8gSWYgaW5zdGVhZCBvZiBhIGZpeGVkIHJhdGUgdGhlIGdhbWUgZnJhbWVyYXRlIGlzIHVzZWQsIG1ha2Ugc3VyZSBpcnJlZ3VsYXIgdGltaW5ncyBhcmUgZml4ZWQgdG8gMzBmcHNcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQuc3RlcChfZGVsdGFUaW1lKTsgIC8vIFVwZGF0ZSB0aGUgc2ltdWxhdGlvbiBieSB0aGUgZ2l2ZW4gZGVsdGFUaW1lXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudGx5IGFjdGl2ZSBpbnN0YW5jZSB1c2luZyB0aGUge0BsaW5rIENvbXBvbmVudENhbWVyYX0gZ2l2ZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3KF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSwgX21vZGU/OiBQSFlTSUNTX0RFQlVHTU9ERSk6IHZvaWQge1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlLiNkZWJ1Z0RyYXcuc2V0RGVidWdNb2RlKF9tb2RlKTtcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS4jbWFpbkNhbSA9IF9jbXBDYW1lcmE7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLmRlYnVnRHJhdygpOyAvL0ZpbGxpbmcgdGhlIHBoeXNpY3Mgd29ybGQgZGVidWcgaW5mb3JtYXRpb25zIGludG8gdGhlIGRlYnVnIHJlbmRlcmluZyBoYW5kbGVyXHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUuI2RlYnVnRHJhdy5kcmF3QnVmZmVycygpO1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlLiNkZWJ1Z0RyYXcuY2xlYXJCdWZmZXJzKCk7ICAvL1VwZGF0ZXMgaW5mbyBhYm91dCB0aGUgY3VycmVudCBwcm9qZWN0aW9uLCByZXNldHRpbmcgdGhlIHBvaW50cy9saW5lcy90cmlhbmdsZXMgdGhhdCBuZWVkIHRvIGJlIGRyYXduIGZyb20gZGVidWdcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBBZGp1c3RzIHRoZSB0cmFuc2Zvcm1zIG9mIHRoZSB7QGxpbmsgQ29tcG9uZW50UmlnaWRib2R5fXMgaW4gdGhlIGdpdmVuIGJyYW5jaCB0byBtYXRjaCB0aGVpciBub2RlcyBvciBtZXNoZXNcclxuICAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRqdXN0VHJhbnNmb3JtcyhfYnJhbmNoOiBOb2RlLCBfdG9NZXNoOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyLnByZXBhcmUoX2JyYW5jaCwgeyBpZ25vcmVQaHlzaWNzOiB0cnVlIH0pO1xyXG4gICAgICBmb3IgKGxldCBub2RlIG9mIFJlbmRlci5ub2Rlc1BoeXNpY3MpXHJcbiAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50UmlnaWRib2R5KS5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEdldCB0aGUgYXBwbGllZCBncmF2aXRhdGlvbmFsIGZvcmNlIG9mIHRoZSBhY3RpdmUgaW5zdGFuY2UuIERlZmF1bHQgZWFydGggZ3Jhdml0eSA9IDkuODEgbS9zXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRHcmF2aXR5KCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdG1wVmVjOiBPSU1PLlZlYzMgPSBQaHlzaWNzLsaSYWN0aXZlLm9pbW9Xb3JsZC5nZXRHcmF2aXR5KCk7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0bXBWZWMueCwgdG1wVmVjLnksIHRtcFZlYy56KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0IHRoZSBhcHBsaWVkIGdyYXZpdGF0aW9uYWwgZm9yY2Ugb2YgdGhlIGFjdGl2ZSBpbnN0YW5jZS4gRGVmYXVsdCBlYXJ0aCBncmF2aXR5ID0gOS44MSBtL3NcclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldEdyYXZpdHkoX3ZhbHVlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIGxldCB0bXBWZWM6IE9JTU8uVmVjMyA9IG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueik7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLnNldEdyYXZpdHkodG1wVmVjKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQWRkIGEgbmV3IE9JTU8gUmlnaWRib2R5IHRvIHRoZSBhY3RpdmUgaW5zdGFuY2UsIGhhcHBlbnMgYXV0b21hdGljYWxseSB3aGVuIGFkZGluZyBhIEZVREdFIFJpZ2lkYm9keSBDb21wb25lbnQuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhZGRSaWdpZGJvZHkoX2NtcFJCOiBDb21wb25lbnRSaWdpZGJvZHkpOiB2b2lkIHtcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5ib2R5TGlzdC5wdXNoKF9jbXBSQik7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLmFkZFJpZ2lkQm9keShfY21wUkIuZ2V0T2ltb1JpZ2lkYm9keSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogUmVtb3ZlIHRoZSBPSU1PIFJpZ2lkYm9keSB0byB0aGUgYWN0aXZlIGluc3RhbmNlLCBoYXBwZW5zIGF1dG9tYXRpY2FsbHkgd2hlbiByZW1vdmluZyBhIEZVREdFIFJpZ2lkYm9keSBDb21wb25lbnRcclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZVJpZ2lkYm9keShfY21wUkI6IENvbXBvbmVudFJpZ2lkYm9keSk6IHZvaWQge1xyXG4gICAgICAvLyBUT0RPOiB0d28gbGlzdHMgYXJlIGJlaW5nIG1hbmFnZWQsIGluZm8gbWlnaHQgZGV2aWF0ZS4gQ2xlYW51cCFcclxuICAgICAgbGV0IG9pbW9SaWdpZEJvZHk6IE9JTU8uUmlnaWRCb2R5ID0gX2NtcFJCLmdldE9pbW9SaWdpZGJvZHkoKTtcclxuICAgICAgaWYgKG9pbW9SaWdpZEJvZHkuX3dvcmxkKVxyXG4gICAgICAgIG9pbW9SaWdpZEJvZHkuX3dvcmxkLnJlbW92ZVJpZ2lkQm9keShvaW1vUmlnaWRCb2R5KTtcclxuICAgICAgLy8gd2hhdCBpZiB0aGUgcmlnaWRib2R5cyBvaW1vLXdvcmxkIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYWN0aXZlIGluc3RhbmNlP1xyXG4gICAgICBsZXQgaWQ6IG51bWJlciA9IFBoeXNpY3MuxpJhY3RpdmUuYm9keUxpc3QuaW5kZXhPZihfY21wUkIpO1xyXG4gICAgICBpZiAoaWQgPiAtMSlcclxuICAgICAgICBQaHlzaWNzLsaSYWN0aXZlLmJvZHlMaXN0LnNwbGljZShpZCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFkZCBhIG5ldyBPSU1PIEpvaW50L0NvbnN0cmFpbnQgdG8gdGhlIGFjdGl2ZSBpbnN0YW5jZSwgaGFwcGVucyBhdXRvbWF0aWNhbGx5IHdoZW4gYWRkaW5nIGEgRlVER0UgSm9pbnQgQ29tcG9uZW50XHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhZGRKb2ludChfY21wSm9pbnQ6IEpvaW50KTogdm9pZCB7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLmFkZEpvaW50KF9jbXBKb2ludC5nZXRPaW1vSm9pbnQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGluZm9ybSB0aGUgcGh5c2ljcyBzeXN0ZW0gdGhhdCBhIGpvaW50IGhhcyBhIGNoYW5nZSBvZiBjb3JlIHByb3BlcnRpZXMgYW5kIG5lZWRzIHRvIGJlIHJlY3JlYXRlZC5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNoYW5nZUpvaW50U3RhdHVzKF9jbXBKb2ludDogSm9pbnQpOiB2b2lkIHtcclxuICAgICAgaWYgKFBoeXNpY3MuxpJhY3RpdmUuam9pbnRMaXN0LmluZGV4T2YoX2NtcEpvaW50KSA8IDApXHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5qb2ludExpc3QucHVzaChfY21wSm9pbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFJlbW92ZSB0aGUgT0lNTyBKb2ludC9Db25zdHJhaW50IHRvIHRoZSBhY3RpdmUgaW5zdGFuY2UsIGhhcHBlbnMgYXV0b21hdGljYWxseSB3aGVuIHJlbW92aW5nIGEgRlVER0UgSm9pbnQgQ29tcG9uZW50XHJcbiAgICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUpvaW50KF9jbXBKb2ludDogSm9pbnQpOiB2b2lkIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBQaHlzaWNzLsaSYWN0aXZlLm9pbW9Xb3JsZC5yZW1vdmVKb2ludChfY21wSm9pbnQuZ2V0T2ltb0pvaW50KCkpO1xyXG4gICAgICB9IGNhdGNoIChfZXJyb3I6IHVua25vd24pIHtcclxuICAgICAgICBEZWJ1Zy5mdWRnZShfZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJldHVybnMgYWxsIHRoZSBDb21wb25lbnRSaWdpZGJvZGllcyB0aGF0IGFyZSBrbm93biB0byB0aGUgYWN0aXZlIGluc3RhbmNlLiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRCb2R5TGlzdCgpOiBDb21wb25lbnRSaWdpZGJvZHlbXSB7XHJcbiAgICAgIHJldHVybiBQaHlzaWNzLsaSYWN0aXZlLmJvZHlMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBHaXZpbmcgYSBDb21wb25lbnRSaWdpZGJvZHkgYSBzcGVjaWZpYyBpZGVudGlmaWNhdGlvbiBudW1iZXIgc28gaXQgY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIGxvYWRpbmcgcHJvY2Vzcy4gQW5kIHJlbW92ZWQgcmIncyBjYW4gcmVjZWl2ZSBhIG5ldyBpZC4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGlzdHJpYnV0ZUJvZHlJRCgpOiBudW1iZXIge1xyXG4gICAgICBsZXQgZnJlZUlkOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgZnJlZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlLmJvZHlMaXN0LmZvckVhY2goKF92YWx1ZTogQ29tcG9uZW50UmlnaWRib2R5KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKF92YWx1ZS5pZCAhPSBmcmVlSWQpIHtcclxuICAgICAgICAgIGZyZWUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmcmVlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZnJlZSkge1xyXG4gICAgICAgICAgZnJlZUlkKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBmcmVlSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQ29ubmVjdCBhbGwgam9pbnRzIHRoYXQgYXJlIG5vdCBjb25uZWN0ZWQgeWV0LiBVc2VkIGludGVybmFsbHkgbm8gdXNlciBpbnRlcmFjdGlvbiBuZWVkZWQuIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjYWxsZWQgYW5kIG5lZWRlZCB0byBtYWtlIHN1cmUgam9pbnRzIGNvbm5lY3QvZGlzY29ubmVjdFxyXG4gICAgICogaWYgYW55IG9mIHRoZSB0d28gcGFpcmVkIENvbXBvbmVudFJpZ2lkYm9kaWVzIGNoYW5nZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjb25uZWN0Sm9pbnRzKCk6IHZvaWQgeyAvL1RyeSB0byBjb25uZWN0IGRpcnR5IGpvaW50cyB1bnRpbCB0aGV5IGFyZSBjb25uZWN0ZWRcclxuICAgICAgbGV0IGpvaW50c1RvQ29ubmVjdDogSm9pbnRbXSA9IFBoeXNpY3MuxpJhY3RpdmUuam9pbnRMaXN0O1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlLmpvaW50TGlzdCA9IFtdO1xyXG4gICAgICBqb2ludHNUb0Nvbm5lY3QuZm9yRWFjaCgoX2pvaW50OiBKb2ludCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmIChfam9pbnQuaXNDb25uZWN0ZWQoKSA9PSBmYWxzZSlcclxuICAgICAgICAgIGlmIChfam9pbnQuaXNBY3RpdmUpXHJcbiAgICAgICAgICAgIF9qb2ludC5jb25uZWN0KCk7XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIFBoeXNpY3MuxpJhY3RpdmUuam9pbnRMaXN0LnB1c2goX2pvaW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJlbW92ZSBhbGwgb2ltbyBqb2ludHMgYW5kIHJpZ2lkYm9kaWVzLCBzbyB0aGF0IHRoZXkgY2FuIGJlIHJldXNlZCBpbiBhbm90aGVyIHdvcmxkICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICBsZXQgb2ltb1dvcmxkOiBPSU1PLldvcmxkID0gUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQ7XHJcbiAgICAgIGlmIChvaW1vV29ybGQgIT0gbnVsbCkge1xyXG4gICAgICAgIC8vUmVzZXR0aW5nIHRoZSB3b3JsZCBzbyBhIG5ldyB3b3JsZCBjYW4gYmUgY3JlYXRlZCwgZml4IGZvciByZS1vcGVuaW5nIGEgcHJvamVjdCBpbiBlZGl0b3IsIG1ha2luZyBzdXJlIHRoZXJlIGFyZSBubyBvbGQgdGhpbmdzIGNhbGN1bGF0ZWRcclxuICAgICAgICBsZXQgam9pbnRzV29ybGQ6IG51bWJlciA9IG9pbW9Xb3JsZC5nZXROdW1Kb2ludHMoKTtcclxuICAgICAgICBsZXQgYm9kaWVzV29ybGQ6IG51bWJlciA9IG9pbW9Xb3JsZC5nZXROdW1SaWdpZEJvZGllcygpO1xyXG4gICAgICAgIGZvciAobGV0IGJvZHkgb2YgUGh5c2ljcy7GkmFjdGl2ZS5ib2R5TGlzdClcclxuICAgICAgICAgIGJvZHkuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIFBoeXNpY3MuxpJhY3RpdmUuam9pbnRMaXN0ID0gbmV3IEFycmF5KCk7IC8vIFRPRE86IHNlZSBpZiBpdCB3b3VsZCBiZSBzbWFydGVyLCBkbyB1c2UgdGhlc2UgYXJyYXlzLiBEZWZpbml0ZWx5IG1vcmUgaW50dWl0aXZlLi4uXHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGpvaW50c1dvcmxkOyBpKyspIHtcclxuICAgICAgICAgIGxldCBvaW1vSm9pbnQ6IE9JTU8uSm9pbnQgPSBQaHlzaWNzLsaSYWN0aXZlLm9pbW9Xb3JsZC5nZXRKb2ludExpc3QoKTtcclxuICAgICAgICAgIG9pbW9Xb3JsZC5yZW1vdmVKb2ludChvaW1vSm9pbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgYm9kaWVzV29ybGQ7IGkrKykge1xyXG4gICAgICAgICAgbGV0IG9pbW9Cb2R5OiBPSU1PLlJpZ2lkQm9keSA9IG9pbW9Xb3JsZC5nZXRSaWdpZEJvZHlMaXN0KCk7XHJcbiAgICAgICAgICBvaW1vV29ybGQucmVtb3ZlUmlnaWRCb2R5KG9pbW9Cb2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAvKiogUmV0dXJucyB0aGUgQ29tcG9uZW50UmlnaWRib2R5IHdpdGggdGhlIGdpdmVuIGlkLiBVc2VkIGludGVybmFsbHkgdG8gcmVjb25uZWN0IGpvaW50cyBvbiBsb2FkaW5nIGluIHRoZSBlZGl0b3IuICovXHJcbiAgICAvLyBwcml2YXRlIHN0YXRpYyBnZXRCb2R5QnlJRChfaWQ6IG51bWJlcik6IENvbXBvbmVudFJpZ2lkYm9keSB7XHJcbiAgICAvLyAgIGxldCBib2R5OiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsO1xyXG4gICAgLy8gICBQaHlzaWNzLiNhY3RpdmVQaHlzaWNzLmJvZHlMaXN0LmZvckVhY2goKHZhbHVlOiBDb21wb25lbnRSaWdpZGJvZHkpOiB2b2lkID0+IHtcclxuICAgIC8vICAgICBpZiAodmFsdWUuaWQgPT0gX2lkKSB7XHJcbiAgICAvLyAgICAgICBib2R5ID0gdmFsdWU7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICB9KTtcclxuICAgIC8vICAgcmV0dXJuIGJvZHk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLyoqIEludGVybmFsIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSB0aGUgZW5kcG9pbnQgb2YgbWF0aGVtYXRpY2FsIHJheS4gQnkgYWRkaW5nIHRoZSBtdWx0aXBsaWVkIGRpcmVjdGlvbiB0byB0aGUgb3JpZ2luLiBcclxuICAgICAgICogVXNlZCBiZWNhdXNlIE9pbW9QaHlzaWNzIGRlZmluZXMgcmF5IGJ5IHN0YXJ0L2VuZC4gQnV0IEdhbWVFbmdpbmVzIGNvbW1vbmx5IHVzZSBvcmlnaW4vZGlyZWN0aW9uLlxyXG4gICAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFJheUVuZFBvaW50KF9zdGFydDogT0lNTy5WZWMzLCBfZGlyZWN0aW9uOiBWZWN0b3IzLCBfbGVuZ3RoOiBudW1iZXIpOiBPSU1PLlZlYzMge1xyXG4gICAgICBsZXQgb3JpZ2luOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICBvcmlnaW4uc2V0KF9zdGFydC54LCBfc3RhcnQueSwgX3N0YXJ0LnopO1xyXG4gICAgICBsZXQgc2NhbGVkRGlyZWN0aW9uOiBWZWN0b3IzID0gX2RpcmVjdGlvbi5jbG9uZTtcclxuICAgICAgc2NhbGVkRGlyZWN0aW9uLnNjYWxlKF9sZW5ndGgpO1xyXG4gICAgICBsZXQgZW5kcG9pbnQ6IFZlY3RvcjMgPSBWZWN0b3IzLlNVTShzY2FsZWREaXJlY3Rpb24sIG9yaWdpbik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHNjYWxlZERpcmVjdGlvbik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGVuZHBvaW50KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUob3JpZ2luKTtcclxuICAgICAgcmV0dXJuIG5ldyBPSU1PLlZlYzMoZW5kcG9pbnQueCwgZW5kcG9pbnQueSwgZW5kcG9pbnQueik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEludGVybmFsIGZ1bmN0aW9uIHRvIGdldCB0aGUgZGlzdGFuY2UgaW4gd2hpY2ggYSByYXkgaGl0IGJ5IHN1YnRyYWN0aW5nIHBvaW50cyBmcm9tIGVhY2ggb3RoZXIgYW5kIGdldCB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIHNxdWFyZWQgcHJvZHVjdCBvZiBlYWNoIGNvbXBvbmVudC4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFJheURpc3RhbmNlKF9vcmlnaW46IFZlY3RvcjMsIF9oaXRQb2ludDogVmVjdG9yMyk6IG51bWJlciB7XHJcbiAgICAgIGxldCBkeDogbnVtYmVyID0gX29yaWdpbi54IC0gX2hpdFBvaW50Lng7XHJcbiAgICAgIGxldCBkeTogbnVtYmVyID0gX29yaWdpbi55IC0gX2hpdFBvaW50Lnk7XHJcbiAgICAgIGxldCBkejogbnVtYmVyID0gX29yaWdpbi56IC0gX2hpdFBvaW50Lno7XHJcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogUmV0dXJucyB0aGUgYWN0dWFsIHVzZWQgd29ybGQgb2YgdGhlIE9JTU8gcGh5c2ljcyBlbmdpbmUuIE5vIHVzZXIgaW50ZXJhY3Rpb24gbmVlZGVkIC0gT25seSBmb3IgYWR2YW5jZWQgdXNlcnMgdGhhdCBuZWVkIHRvIGFjY2VzcyBpdCBkaXJlY3RseSAqL1xyXG4gICAgcHVibGljIGdldE9pbW9Xb3JsZCgpOiBPSU1PLldvcmxkIHtcclxuICAgICAgcmV0dXJuIFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC8qKiBVcGRhdGVzIGFsbCB7QGxpbmsgUmlnaWRib2RpZXN9IGtub3duIHRvIHRoZSBQaHlzaWNzLndvcmxkIHRvIG1hdGNoIHRoZWlyIGNvbnRhaW5lcnMgb3IgbWVzaGVzIHRyYW5zZm9ybWF0aW9ucyAqL1xyXG4gICAgLy8gcHJpdmF0ZSB1cGRhdGVXb3JsZEZyb21Xb3JsZE1hdHJpeChfdG9NZXNoOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgIC8vICAgZm9yIChsZXQgYm9keSBvZiB0aGlzLmJvZHlMaXN0KVxyXG4gICAgLy8gICAgIGJvZHkudXBkYXRlRnJvbVdvcmxkKF90b01lc2gpO1xyXG4gICAgLy8gfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIERlZmluZXMgYSB0aHJlZWRpbWVuc2lvbmFsIGJveCBieSB0d28gY29ybmVyLXBvaW50cywgb25lIHdpdGggbWluaW1hbCB2YWx1ZXMgYW5kIG9uZSB3aXRoIG1heGltdW0gdmFsdWVzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEJveCBpbXBsZW1lbnRzIFJlY3ljYWJsZSB7XHJcbiAgICBwdWJsaWMgbWluOiBWZWN0b3IzO1xyXG4gICAgcHVibGljIG1heDogVmVjdG9yMztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX21pbjogVmVjdG9yMyA9IFZlY3RvcjMuT05FKEluZmluaXR5KSwgX21heDogVmVjdG9yMyA9IFZlY3RvcjMuT05FKC1JbmZpbml0eSkpIHtcclxuICAgICAgdGhpcy5zZXQoX21pbiwgX21heCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWZpbmUgdGhlIGNvcm5lcnMgb2YgdGhpcyBib3gsIHN0YW5kYXJkIHZhbHVlcyBhcmUgSW5maW5pdHkgZm9yIG1pbiwgYW5kIC1JbmZpbml0eSBmb3IgbWF4LCBcclxuICAgICAqIGNyZWF0aW5nIGFuIGltcG9zc2libGUgaW52ZXJ0ZWQgYm94IHRoYXQgY2FuIG5vdCBjb250YWluIGFueSBwb2ludHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfbWluOiBWZWN0b3IzID0gVmVjdG9yMy5PTkUoSW5maW5pdHkpLCBfbWF4OiBWZWN0b3IzID0gVmVjdG9yMy5PTkUoLUluZmluaXR5KSk6IHZvaWQge1xyXG4gICAgICB0aGlzLm1pbiA9IF9taW47XHJcbiAgICAgIHRoaXMubWF4ID0gX21heDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4cGFuZCB0aGUgYm94IGlmIG5lY2Vzc2FyeSB0byBpbmNsdWRlIHRoZSBnaXZlbiBwb2ludFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZXhwYW5kKF9pbmNsdWRlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubWluLm1pbihfaW5jbHVkZSk7XHJcbiAgICAgIHRoaXMubWF4Lm1heChfaW5jbHVkZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubWluLnNldChJbmZpbml0eSwgSW5maW5pdHksIEluZmluaXR5KTtcclxuICAgICAgdGhpcy5tYXguc2V0KC1JbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHkpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFN0b3JlcyBpbmZvcm1hdGlvbiBwcm92aWRlZCBieSB7QGxpbmsgUmVuZGVyfS1waWNraW5nIGUuZy4gdXNpbmcge0BsaW5rIFBpY2tlcn0gYW5kIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGZ1cnRoZXIgY2FsY3VsYXRpb24gb2YgcG9zaXRpb25zIGFuZCBub3JtYWxzIGV0Yy5cclxuICAgKiBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBQaWNrIHtcclxuICAgIHB1YmxpYyBub2RlOiBOb2RlO1xyXG4gICAgcHVibGljIHpCdWZmZXI6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjb2xvcjogQ29sb3I7XHJcbiAgICBwdWJsaWMgdGV4dHVyZVVWOiBWZWN0b3IyO1xyXG4gICAgcHVibGljIGdpem1vPzogQ29tcG9uZW50O1xyXG4gICAgI210eFZpZXdUb1dvcmxkOiBNYXRyaXg0eDQ7XHJcbiAgICAjcG9zV29ybGQ6IFZlY3RvcjM7XHJcbiAgICAjcG9zTWVzaDogVmVjdG9yMztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25vZGU6IE5vZGUpIHtcclxuICAgICAgdGhpcy5ub2RlID0gX25vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY2Nlc3NvciB0byBjYWxjdWxhdGUgYW5kIHN0b3JlIHdvcmxkIHBvc2l0aW9uIG9mIGludGVyc2VjdGlvbiBvZiB7QGxpbmsgUmF5fSBhbmQge0BsaW5rIE1lc2h9IG9ubHkgd2hlbiB1c2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHBvc1dvcmxkKCk6IFZlY3RvcjMge1xyXG4gICAgICBpZiAodGhpcy4jcG9zV29ybGQpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Bvc1dvcmxkO1xyXG4gICAgICBsZXQgcG9pbnRJbkNsaXBTcGFjZTogVmVjdG9yMyA9IFZlY3RvcjMuWih0aGlzLnpCdWZmZXIpO1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gdGhpcy4jbXR4Vmlld1RvV29ybGQuZ2V0KCk7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjMgPSBWZWN0b3IzLlRSQU5TRk9STUFUSU9OKHBvaW50SW5DbGlwU3BhY2UsIHRoaXMuI210eFZpZXdUb1dvcmxkLCB0cnVlKTtcclxuICAgICAgbGV0IHc6IG51bWJlciA9IG1bM10gKiBwb2ludEluQ2xpcFNwYWNlLnggKyBtWzddICogcG9pbnRJbkNsaXBTcGFjZS55ICsgbVsxMV0gKiBwb2ludEluQ2xpcFNwYWNlLnogKyBtWzE1XTtcclxuICAgICAgcmVzdWx0LnNjYWxlKDEgLyB3KTtcclxuXHJcbiAgICAgIHRoaXMuI3Bvc1dvcmxkID0gcmVzdWx0O1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNjZXNzb3IgdG8gY2FsY3VsYXRlIGFuZCBzdG9yZSBwb3NpdGlvbiBpbiBtZXNoLXNwYWNlIG9mIGludGVyc2VjdGlvbiBvZiB7QGxpbmsgUmF5fSBhbmQge0BsaW5rIE1lc2h9IG9ubHkgd2hlbiB1c2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHBvc01lc2goKTogVmVjdG9yMyB7XHJcbiAgICAgIGlmICh0aGlzLiNwb3NNZXNoKVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNwb3NNZXNoO1xyXG4gICAgICBsZXQgbXR4V29ybGRUb01lc2g6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JTlZFUlNFKHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCkubXR4V29ybGQpO1xyXG4gICAgICBsZXQgcG9zTWVzaDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04odGhpcy5wb3NXb3JsZCwgbXR4V29ybGRUb01lc2gpO1xyXG4gICAgICB0aGlzLiNwb3NNZXNoID0gcG9zTWVzaDtcclxuICAgICAgcmV0dXJuIHBvc01lc2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY2Nlc3NvciB0byBjYWxjdWxhdGUgYW5kIHN0b3JlIHRoZSBmYWNlIG5vcm1hbCBpbiB3b3JsZC1zcGFjZSBhdCB0aGUgcG9pbnQgb2YgaW50ZXJzZWN0aW9uIG9mIHtAbGluayBSYXl9IGFuZCB7QGxpbmsgTWVzaH0gb25seSB3aGVuIHVzZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbm9ybWFsKCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjM7XHJcblxyXG4gICAgICBmb3IgKGxldCBmYWNlIG9mIGNtcE1lc2gubWVzaC5mYWNlcykge1xyXG4gICAgICAgIGlmIChmYWNlLmlzSW5zaWRlKHRoaXMucG9zTWVzaCkpIHtcclxuICAgICAgICAgIHJlc3VsdCA9IGZhY2Uubm9ybWFsLmNsb25lO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXN1bHQudHJhbnNmb3JtKGNtcE1lc2gubXR4V29ybGQsIGZhbHNlKTtcclxuICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHNvbGVseSBieSB0aGUgcmVuZGVyZXIgdG8gZW5hYmxlIGNhbGN1bGF0aW9uIG9mIHRoZSB3b3JsZCBjb29yZGluYXRlcyBvZiB0aGlzIHtAbGluayBQaWNrfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IG10eFZpZXdUb1dvcmxkKF9tdHhWaWV3VG9Xb3JsZDogTWF0cml4NHg0KSB7XHJcbiAgICAgIHRoaXMuI210eFZpZXdUb1dvcmxkID0gX210eFZpZXdUb1dvcmxkO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFByb3ZpZGVzIHN0YXRpYyBtZXRob2RzIGZvciBwaWNraW5nIHVzaW5nIHtAbGluayBSZW5kZXJ9XHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGlja2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYSByYXkgcGx1cyBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHRoZSBuZWFyIGFuZCBmYXIgcGxhbmVzIHRvIGNvbnN0cnVjdCB0aGUgcGlja2VyLWNhbWVyYSxcclxuICAgICAqIHRoZW4gcmVuZGVycyB0aGUgcGljay10ZXh0dXJlIGFuZCByZXR1cm5zIGFuIHVuc29ydGVkIHtAbGluayBQaWNrfS1hcnJheSB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXRzIG9mIHRoZSByYXkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcGlja1JheShfbm9kZXM6IE5vZGVbXSwgX3JheTogUmF5LCBfbWluOiBudW1iZXIsIF9tYXg6IG51bWJlciwgX3BpY2tHaXptb3M6IGJvb2xlYW4gPSBmYWxzZSwgX2dpem1vc0ZpbHRlcj86IE1hcDxzdHJpbmcsIGJvb2xlYW4+KTogUGlja1tdIHtcclxuICAgICAgbGV0IGNtcENhbWVyYVBpY2s6IENvbXBvbmVudENhbWVyYSA9IG5ldyBDb21wb25lbnRDYW1lcmEoKTtcclxuICAgICAgY21wQ2FtZXJhUGljay5tdHhQaXZvdC50cmFuc2xhdGlvbiA9IF9yYXkub3JpZ2luO1xyXG4gICAgICBjbXBDYW1lcmFQaWNrLm10eFBpdm90Lmxvb2tBdChWZWN0b3IzLlNVTShfcmF5Lm9yaWdpbiwgX3JheS5kaXJlY3Rpb24pKTtcclxuICAgICAgY21wQ2FtZXJhUGljay5wcm9qZWN0Q2VudHJhbCgxLCAwLjAwMSwgRklFTERfT0ZfVklFVy5ESUFHT05BTCwgX21pbiwgX21heCk7XHJcblxyXG4gICAgICBsZXQgcGlja3M6IFBpY2tbXSA9IFJlbmRlci5waWNrQnJhbmNoKF9ub2RlcywgY21wQ2FtZXJhUGljaywgX3BpY2tHaXptb3MsIF9naXptb3NGaWx0ZXIpO1xyXG4gICAgICByZXR1cm4gcGlja3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlcyBhIGNhbWVyYSBhbmQgYSBwb2ludCBvbiBpdHMgdmlydHVhbCBub3JtZWQgcHJvamVjdGlvbiBwbGFuZSAoZGlzdGFuY2UgMSkgdG8gY29uc3RydWN0IHRoZSBwaWNrZXItY2FtZXJhLFxyXG4gICAgICogdGhlbiByZW5kZXJzIHRoZSBwaWNrLXRleHR1cmUgYW5kIHJldHVybnMgYW4gdW5zb3J0ZWQge0BsaW5rIFBpY2t9LWFycmF5IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdHMgb2YgdGhlIHJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBwaWNrQ2FtZXJhKF9ub2RlczogTm9kZVtdLCBfY21wQ2FtZXJhOiBDb21wb25lbnRDYW1lcmEsIF9wb3NQcm9qZWN0aW9uOiBWZWN0b3IyLCBfcGlja0dpem1vczogYm9vbGVhbiA9IGZhbHNlLCBfZ2l6bW9zRmlsdGVyPzogTWFwPHN0cmluZywgYm9vbGVhbj4pOiBQaWNrW10ge1xyXG4gICAgICBsZXQgcmF5OiBSYXkgPSBuZXcgUmF5KG5ldyBWZWN0b3IzKC1fcG9zUHJvamVjdGlvbi54LCBfcG9zUHJvamVjdGlvbi55LCAxKSk7XHJcbiAgICAgIGxldCBsZW5ndGg6IG51bWJlciA9IHJheS5kaXJlY3Rpb24ubWFnbml0dWRlO1xyXG5cclxuICAgICAgaWYgKF9jbXBDYW1lcmEubm9kZSkge1xyXG4gICAgICAgIGxldCBtdHhDYW1lcmE6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5QUk9EVUNUKF9jbXBDYW1lcmEubm9kZS5tdHhXb3JsZCwgX2NtcENhbWVyYS5tdHhQaXZvdCk7XHJcbiAgICAgICAgcmF5LnRyYW5zZm9ybShtdHhDYW1lcmEpO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eENhbWVyYSk7XHJcbiAgICAgIH0gZWxzZVxyXG4gICAgICAgIHJheS50cmFuc2Zvcm0oX2NtcENhbWVyYS5tdHhQaXZvdCk7XHJcblxyXG4gICAgICBsZXQgcGlja3M6IFBpY2tbXSA9IFBpY2tlci5waWNrUmF5KF9ub2RlcywgcmF5LCBsZW5ndGggKiBfY21wQ2FtZXJhLmdldE5lYXIoKSwgbGVuZ3RoICogX2NtcENhbWVyYS5nZXRGYXIoKSwgX3BpY2tHaXptb3MsIF9naXptb3NGaWx0ZXIpO1xyXG4gICAgICByZXR1cm4gcGlja3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlcyB0aGUgY2FtZXJhIG9mIHRoZSBnaXZlbiB2aWV3cG9ydCBhbmQgYSBwb2ludCB0aGUgY2xpZW50IHN1cmZhY2UgdG8gY29uc3RydWN0IHRoZSBwaWNrZXItY2FtZXJhLFxyXG4gICAgICogdGhlbiByZW5kZXJzIHRoZSBwaWNrLXRleHR1cmUgYW5kIHJldHVybnMgYW4gdW5zb3J0ZWQge0BsaW5rIFBpY2t9LWFycmF5IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdHMgb2YgdGhlIHJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBwaWNrVmlld3BvcnQoX3ZpZXdwb3J0OiBWaWV3cG9ydCwgX3Bvc0NsaWVudDogVmVjdG9yMik6IFBpY2tbXSB7XHJcbiAgICAgIGxldCBwb3NQcm9qZWN0aW9uOiBWZWN0b3IyID0gX3ZpZXdwb3J0LnBvaW50Q2xpZW50VG9Qcm9qZWN0aW9uKF9wb3NDbGllbnQpO1xyXG4gICAgICBsZXQgbm9kZXM6IE5vZGVbXSA9IEFycmF5LmZyb20oX3ZpZXdwb3J0LmdldEJyYW5jaCgpLmdldEl0ZXJhdG9yKHRydWUpKTtcclxuICAgICAgbGV0IHBpY2tzOiBQaWNrW10gPSBQaWNrZXIucGlja0NhbWVyYShub2RlcywgX3ZpZXdwb3J0LmNhbWVyYSwgcG9zUHJvamVjdGlvbiwgX3ZpZXdwb3J0Lmdpem1vc0VuYWJsZWQsIF92aWV3cG9ydC5naXptb3NGaWx0ZXIpO1xyXG4gICAgICByZXR1cm4gcGlja3M7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lZCBieSBhbiBvcmlnaW4gYW5kIGEgZGlyZWN0aW9uIG9mIHR5cGUge0BsaW5rIFBpY2t9LCByYXlzIGFyZSB1c2VkIHRvIGNhbGN1bGF0ZSBwaWNraW5nIGFuZCBpbnRlcnNlY3Rpb25zXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUmF5IHtcclxuICAgIHB1YmxpYyBvcmlnaW46IFZlY3RvcjM7XHJcbiAgICBwdWJsaWMgZGlyZWN0aW9uOiBWZWN0b3IzO1xyXG4gICAgLyoqIFRPRE86IHN1cHBvcnQgbGVuZ3RoICovXHJcbiAgICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9kaXJlY3Rpb246IFZlY3RvcjMgPSBWZWN0b3IzLlooMSksIF9vcmlnaW46IFZlY3RvcjMgPSBWZWN0b3IzLlpFUk8oKSwgX2xlbmd0aDogbnVtYmVyID0gMSkge1xyXG4gICAgICB0aGlzLm9yaWdpbiA9IF9vcmlnaW47XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gX2RpcmVjdGlvbjtcclxuICAgICAgdGhpcy5sZW5ndGggPSBfbGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcG9pbnQgb2YgaW50ZXJzZWN0aW9uIG9mIHRoaXMgcmF5IHdpdGggYSBwbGFuZSBkZWZpbmVkIGJ5IFxyXG4gICAgICogdGhlIGdpdmVuIHBvaW50IG9mIG9yaWdpbiBhbmQgdGhlIHBsYW5lcyBub3JtYWwuIEFsbCB2YWx1ZXMgYW5kIGNhbGN1bGF0aW9uc1xyXG4gICAgICogbXVzdCBiZSByZWxhdGl2ZSB0byB0aGUgc2FtZSBjb29yZGluYXRlIHN5c3RlbSwgcHJlZmVyYWJseSB0aGUgd29ybGRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGludGVyc2VjdFBsYW5lKF9vcmlnaW46IFZlY3RvcjMsIF9ub3JtYWw6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IGRpZmZlcmVuY2U6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX29yaWdpbiwgdGhpcy5vcmlnaW4pO1xyXG4gICAgICBsZXQgZmFjdG9yOiBudW1iZXIgPSBWZWN0b3IzLkRPVChkaWZmZXJlbmNlLCBfbm9ybWFsKSAvIFZlY3RvcjMuRE9UKHRoaXMuZGlyZWN0aW9uLCBfbm9ybWFsKTtcclxuICAgICAgbGV0IGludGVyc2VjdDogVmVjdG9yMyA9IFZlY3RvcjMuU1VNKHRoaXMub3JpZ2luLCBWZWN0b3IzLlNDQUxFKHRoaXMuZGlyZWN0aW9uLCBmYWN0b3IpKTtcclxuICAgICAgcmV0dXJuIGludGVyc2VjdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHBvaW50IG9mIGludGVyc2VjdGlvbiBvZiB0aGlzIHJheSB3aXRoIGEgcGxhbmUgZGVmaW5lZCBieSB0aGUgZmFjZS4gXHJcbiAgICAgKiBBbGwgdmFsdWVzIGFuZCBjYWxjdWxhdGlvbnMgbXVzdCBiZSByZWxhdGl2ZSB0byB0aGUgc2FtZSBjb29yZGluYXRlIHN5c3RlbSwgcHJlZmVyYWJseSB0aGUgd29ybGRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGludGVyc2VjdEZhY2VQbGFuZShfZmFjZTogRmFjZSk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3RQbGFuZShfZmFjZS5nZXRQb3NpdGlvbigwKSwgX2ZhY2Uubm9ybWFsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNob3J0ZXN0IGRpc3RhbmNlIGZyb20gdGhlIHJheSB0byB0aGUgZ2l2ZW4gdGFyZ2V0IHBvaW50LlxyXG4gICAgICogQWxsIHZhbHVlcyBhbmQgY2FsY3VsYXRpb25zIG11c3QgYmUgcmVsYXRpdmUgdG8gdGhlIHNhbWUgY29vcmRpbmF0ZSBzeXN0ZW0sIHByZWZlcmFibHkgdGhlIHdvcmxkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RGlzdGFuY2UoX3RhcmdldDogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgb3JpZ2luVG9UYXJnZXQ6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX3RhcmdldCwgdGhpcy5vcmlnaW4pO1xyXG4gICAgICBsZXQgcmF5U2VjdGlvbjogVmVjdG9yMyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTih0aGlzLmRpcmVjdGlvbiwgMSk7XHJcbiAgICAgIGxldCBwcm9qZWN0ZWRMZW5ndGg6IG51bWJlciA9IFZlY3RvcjMuRE9UKG9yaWdpblRvVGFyZ2V0LCByYXlTZWN0aW9uKTtcclxuICAgICAgcmF5U2VjdGlvbi5zY2FsZShwcm9qZWN0ZWRMZW5ndGgpO1xyXG4gICAgICByYXlTZWN0aW9uLmFkZCh0aGlzLm9yaWdpbik7XHJcbiAgICAgIGxldCBkaXN0YW5jZTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRShfdGFyZ2V0LCByYXlTZWN0aW9uKTtcclxuICAgICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNmb3JtIHRoZSByYXkgYnkgdGhlIGdpdmVuIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNmb3JtKF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCk6IHZvaWQge1xyXG4gICAgICB0aGlzLm9yaWdpbi50cmFuc2Zvcm0oX210eFRyYW5zZm9ybSk7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uLnRyYW5zZm9ybShfbXR4VHJhbnNmb3JtLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmVhZGFibGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcmF5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYG9yaWdpbjogJHt0aGlzLm9yaWdpbi50b1N0cmluZygpfSwgZGlyZWN0aW9uOiAke3RoaXMuZGlyZWN0aW9uLnRvU3RyaW5nKCl9LCBsZW5ndGg6ICR7dGhpcy5sZW5ndGgudG9QcmVjaXNpb24oNSl9YDtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGdpem1vcyBkcmF3aW5nIGludGVyZmFjZS4ge0BsaW5rIENvbXBvbmVudH1zIGNhbiB1c2UgdGhpcyB0byBkcmF3IHZpc3VhbCBhaWRzIGluc2lkZSB7QGxpbmsgQ29tcG9uZW50LmRyYXdHaXptb3N9IGFuZCB7QGxpbmsgQ29tcG9uZW50LmRyYXdHaXptb3NTZWxlY3RlZH0uXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdpem1vcyB7XHJcbiAgICAvKiogXHJcbiAgICAgKiBUaGUgZGVmYXVsdCBvcGFjaXR5IG9mIG9jY2x1ZGVkIGdpem1vIHBhcnRzLiBVc2UgdGhpcyB0byBjb250cm9sIHRoZSB2aXNpYmlsaXR5IG9mIGdpem1vcyBiZWhpbmQgb2JqZWN0cy5cclxuICAgICAqIFNldCB0byAwIHRvIG1ha2Ugb2NjbHVkZWQgZ2l6bW8gcGFydHMgZGlzYXBwZWFyLiBTZXQgdG8gMSB0byBtYWtlIG9jY2x1ZGVkIGdpem1vIHBhcnRzIGZ1bGx5IHZpc2libGUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGFscGhhT2NjbHVkZWQ6IG51bWJlciA9IDAuMzsgLy8gY3VycmVudGx5IGdpem1vcyBjYW4gYWx3YXlzIGJlIHBpY2tlZCBldmVuIGlmIHRoaXMgaXMgc2V0IHRvIDAuLi5cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBwaWNrSWQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHBvc0ljb25zOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTsgLy8gY2FjaGUgdGhlIHBvc2l0aW9ucyBvZiBpY29ucyB0byBhdm9pZCBkcmF3aW5nIHRoZW0gd2l0aGluIGVhY2ggb3RoZXJcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBhcnJheUJ1ZmZlcjogV2ViR0xCdWZmZXIgPSBSZW5kZXJXZWJHTC5hc3NlcnQoUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpLmNyZWF0ZUJ1ZmZlcigpKTtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IGluZGV4QnVmZmVyOiBXZWJHTEJ1ZmZlciA9IFJlbmRlcldlYkdMLmFzc2VydChSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkuY3JlYXRlQnVmZmVyKCkpO1xyXG5cclxuICAgIHN0YXRpYyAjY2FtZXJhOiBDb21wb25lbnRDYW1lcmE7IC8vIFRPRE86IG1heWJlIHJhdGhlciBwYXNzIHRoZSBjYW1lcmEgaW50byB0aGUgZHJhd0dpem1vcyBtZXRob2RzIG9uIGNvbXBvbmVudHM/XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2FtZXJhIHdoaWNoIGlzIGN1cnJlbnRseSB1c2VkIHRvIGRyYXcgZ2l6bW9zLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBjYW1lcmEoKTogQ29tcG9uZW50Q2FtZXJhIHtcclxuICAgICAgcmV0dXJuIEdpem1vcy4jY2FtZXJhO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBxdWFkKCk6IE1lc2hRdWFkIHtcclxuICAgICAgbGV0IHF1YWQ6IE1lc2hRdWFkID0gbmV3IE1lc2hRdWFkKFwiR2l6bW9RdWFkXCIpO1xyXG4gICAgICBQcm9qZWN0LmRlcmVnaXN0ZXIocXVhZCk7XHJcbiAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoR2l6bW9zLCBcInF1YWRcIiwgeyB2YWx1ZTogcXVhZCB9KTtcclxuICAgICAgcmV0dXJuIEdpem1vcy5xdWFkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBjdWJlKCk6IE1lc2hDdWJlIHtcclxuICAgICAgbGV0IGN1YmU6IE1lc2hDdWJlID0gbmV3IE1lc2hDdWJlKFwiR2l6bW9DdWJlXCIpO1xyXG4gICAgICBQcm9qZWN0LmRlcmVnaXN0ZXIoY3ViZSk7XHJcbiAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoR2l6bW9zLCBcImN1YmVcIiwgeyB2YWx1ZTogY3ViZSB9KTtcclxuICAgICAgcmV0dXJuIEdpem1vcy5jdWJlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBzcGhlcmUoKTogTWVzaFNwaGVyZSB7XHJcbiAgICAgIGxldCBzcGhlcmU6IE1lc2hTcGhlcmUgPSBuZXcgTWVzaFNwaGVyZShcIkdpem1vU3BoZXJlXCIsIDYsIDYpO1xyXG4gICAgICBQcm9qZWN0LmRlcmVnaXN0ZXIoc3BoZXJlKTtcclxuICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShHaXptb3MsIFwic3BoZXJlXCIsIHsgdmFsdWU6IHNwaGVyZSB9KTtcclxuICAgICAgcmV0dXJuIEdpem1vcy5zcGhlcmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogdGhpbmsgYWJvdXQgZHJhd2luZyB0aGVzZSBvbiB0aGUgZmx5IGluc3RlYWQgb2YgY2FjaGluZyB0aGVtLiBUaGVuIHdlIGNvdWxkIGFjY2VwdCBhIHBvc2l0aW9uLCByYWRpdXMgZXRjLiBwYXJhbWV0ZXIgYW5kIGRyYXcgdGhlbSBpbmRlcGVuZGVudCBmcm9tIHRoZSBtdHhXb3JsZFxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0IHdpcmVDaXJjbGUoKTogVmVjdG9yM1tdIHtcclxuICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSAwLjU7XHJcbiAgICAgIGNvbnN0IHNlZ21lbnRzOiBudW1iZXIgPSA0NTtcclxuICAgICAgY29uc3QgY2lyY2xlOiBWZWN0b3IzW10gPSBuZXcgQXJyYXkoc2VnbWVudHMpLmZpbGwobnVsbCkubWFwKCgpID0+IFJlY3ljbGVyLmdldChWZWN0b3IzKSk7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBzZWdtZW50czsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYW5nbGU6IG51bWJlciA9IChpIC8gc2VnbWVudHMpICogMiAqIE1hdGguUEk7XHJcbiAgICAgICAgY29uc3QgeDogbnVtYmVyID0gcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICAgIGNvbnN0IHk6IG51bWJlciA9IHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgICBjaXJjbGVbaV0uc2V0KHgsIHksIDApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBsaW5lczogVmVjdG9yM1tdID0gW107XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBzZWdtZW50czsgaSsrKVxyXG4gICAgICAgIGxpbmVzLnB1c2goY2lyY2xlW2ldLCBjaXJjbGVbKGkgKyAxKSAlIHNlZ21lbnRzXSk7XHJcblxyXG4gICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KEdpem1vcywgXCJ3aXJlQ2lyY2xlXCIsIHsgdmFsdWU6IGxpbmVzIH0pO1xyXG4gICAgICByZXR1cm4gR2l6bW9zLndpcmVDaXJjbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0IHdpcmVTcGhlcmUoKTogVmVjdG9yM1tdIHtcclxuICAgICAgbGV0IGxpbmVzOiBWZWN0b3IzW10gPSBHaXptb3Mud2lyZUNpcmNsZS5jb25jYXQoKTtcclxuICAgICAgbGV0IG10eFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT05fWCg5MCk7XHJcbiAgICAgIGxpbmVzLnB1c2goLi4uR2l6bW9zLndpcmVDaXJjbGUubWFwKChfcG9pbnQ6IFZlY3RvcjMpID0+IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3BvaW50LCBtdHhSb3RhdGlvbikpKTtcclxuICAgICAgbXR4Um90YXRpb24ucm90YXRlWSg5MCk7XHJcbiAgICAgIGxpbmVzLnB1c2goLi4uR2l6bW9zLndpcmVDaXJjbGUubWFwKChfcG9pbnQ6IFZlY3RvcjMpID0+IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3BvaW50LCBtdHhSb3RhdGlvbikpKTtcclxuXHJcbiAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoR2l6bW9zLCBcIndpcmVTcGhlcmVcIiwgeyB2YWx1ZTogbGluZXMgfSk7XHJcbiAgICAgIHJldHVybiBHaXptb3Mud2lyZVNwaGVyZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXQgd2lyZUNvbmUoKTogVmVjdG9yM1tdIHtcclxuICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSAwLjU7XHJcbiAgICAgIGNvbnN0IGhlaWdodDogbnVtYmVyID0gMTtcclxuICAgICAgY29uc3QgYXBleDogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgICBjb25zdCBxdWFkOiBWZWN0b3IzW10gPSBbXHJcbiAgICAgICAgbmV3IFZlY3RvcjMocmFkaXVzLCAwLCBoZWlnaHQpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IzKC1yYWRpdXMsIDAsIGhlaWdodCksXHJcbiAgICAgICAgbmV3IFZlY3RvcjMoMCwgcmFkaXVzLCBoZWlnaHQpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IzKDAsIC1yYWRpdXMsIGhlaWdodClcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGxldCBsaW5lczogVmVjdG9yM1tdID0gR2l6bW9zLndpcmVDaXJjbGUubWFwKChfcG9pbnQ6IFZlY3RvcjMpID0+IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3BvaW50LCBNYXRyaXg0eDQuVFJBTlNMQVRJT04oVmVjdG9yMy5aKDEpKSkpO1xyXG5cclxuICAgICAgbGluZXMucHVzaCguLi5bYXBleCwgcXVhZFswXSwgYXBleCwgcXVhZFsxXSwgYXBleCwgcXVhZFsyXSwgYXBleCwgcXVhZFszXV0pO1xyXG5cclxuICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShHaXptb3MsIFwid2lyZUNvbmVcIiwgeyB2YWx1ZTogbGluZXMgfSk7XHJcbiAgICAgIHJldHVybiBHaXptb3Mud2lyZUNvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0IHdpcmVDdWJlKCk6IFZlY3RvcjNbXSB7XHJcbiAgICAgIGNvbnN0IGhhbGZTaXplOiBudW1iZXIgPSAwLjU7XHJcbiAgICAgIGNvbnN0IGN1YmU6IFZlY3RvcjNbXSA9IFtcclxuICAgICAgICBuZXcgVmVjdG9yMyhoYWxmU2l6ZSwgaGFsZlNpemUsIGhhbGZTaXplKSwgbmV3IFZlY3RvcjMoLWhhbGZTaXplLCBoYWxmU2l6ZSwgaGFsZlNpemUpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IzKC1oYWxmU2l6ZSwgLWhhbGZTaXplLCBoYWxmU2l6ZSksIG5ldyBWZWN0b3IzKGhhbGZTaXplLCAtaGFsZlNpemUsIGhhbGZTaXplKSxcclxuICAgICAgICBuZXcgVmVjdG9yMyhoYWxmU2l6ZSwgaGFsZlNpemUsIC1oYWxmU2l6ZSksIG5ldyBWZWN0b3IzKC1oYWxmU2l6ZSwgaGFsZlNpemUsIC1oYWxmU2l6ZSksXHJcbiAgICAgICAgbmV3IFZlY3RvcjMoLWhhbGZTaXplLCAtaGFsZlNpemUsIC1oYWxmU2l6ZSksIG5ldyBWZWN0b3IzKGhhbGZTaXplLCAtaGFsZlNpemUsIC1oYWxmU2l6ZSlcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGNvbnN0IGxpbmVzOiBWZWN0b3IzW10gPSBbXHJcbiAgICAgICAgY3ViZVswXSwgY3ViZVsxXSwgY3ViZVsxXSwgY3ViZVsyXSwgY3ViZVsyXSwgY3ViZVszXSwgY3ViZVszXSwgY3ViZVswXSxcclxuICAgICAgICBjdWJlWzRdLCBjdWJlWzVdLCBjdWJlWzVdLCBjdWJlWzZdLCBjdWJlWzZdLCBjdWJlWzddLCBjdWJlWzddLCBjdWJlWzRdLFxyXG4gICAgICAgIGN1YmVbMF0sIGN1YmVbNF0sIGN1YmVbMV0sIGN1YmVbNV0sIGN1YmVbMl0sIGN1YmVbNl0sIGN1YmVbM10sIGN1YmVbN11cclxuICAgICAgXTtcclxuXHJcbiAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoR2l6bW9zLCBcIndpcmVDdWJlXCIsIHsgdmFsdWU6IGxpbmVzIH0pO1xyXG4gICAgICByZXR1cm4gR2l6bW9zLndpcmVDdWJlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXJlIHdlIGN1cnJlbnRseSByZW5kZXJpbmcgZm9yIHBpY2tpbmc/XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBwaWNraW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5waWNrSWQgIT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBzY2VuZSdzIGdpem1vcyBmcm9tIHRoZSBwb2ludCBvZiB2aWV3IG9mIHRoZSBnaXZlbiB2aWV3cG9ydHMgY2FtZXJhLlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZHJhdyhfdmlld3BvcnQ6IFZpZXdwb3J0KTogdm9pZCB7XHJcbiAgICAgIEdpem1vcy4jY2FtZXJhID0gX3ZpZXdwb3J0LmNhbWVyYTtcclxuICAgICAgR2l6bW9zLnBvc0ljb25zLmNsZWFyKCk7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGdpem1vIG9mIFJlbmRlci5naXptb3MpXHJcbiAgICAgICAgUmVmbGVjdC5zZXQoZ2l6bW8ubm9kZSwgXCJ6Q2FtZXJhXCIsIF92aWV3cG9ydC5jYW1lcmEucG9pbnRXb3JsZFRvQ2xpcChnaXptby5ub2RlLm10eFdvcmxkLnRyYW5zbGF0aW9uKS56KTtcclxuXHJcbiAgICAgIGNvbnN0IHNvcnRlZDogQ29tcG9uZW50W10gPSBSZW5kZXIuZ2l6bW9zLmdldFNvcnRlZCgoX2EsIF9iKSA9PiBSZWZsZWN0LmdldChfYi5ub2RlLCBcInpDYW1lcmFcIikgLSBSZWZsZWN0LmdldChfYS5ub2RlLCBcInpDYW1lcmFcIikpO1xyXG4gICAgICBmb3IgKGNvbnN0IGdpem1vIG9mIHNvcnRlZCkge1xyXG4gICAgICAgIGdpem1vLmRyYXdHaXptb3M/LigpO1xyXG4gICAgICAgIGlmIChfdmlld3BvcnQuZ2l6bW9zU2VsZWN0ZWQ/LmluY2x1ZGVzKGdpem1vLm5vZGUpKVxyXG4gICAgICAgICAgZ2l6bW8uZHJhd0dpem1vc1NlbGVjdGVkPy4oKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcGljayhfZ2l6bW9zOiBDb21wb25lbnRbXSwgX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhLCBfcGlja2VkOiBQaWNrW10pOiB2b2lkIHtcclxuICAgICAgR2l6bW9zLiNjYW1lcmEgPSBfY21wQ2FtZXJhO1xyXG4gICAgICBHaXptb3MucG9zSWNvbnMuY2xlYXIoKTtcclxuXHJcbiAgICAgIGZvciAobGV0IGdpem1vIG9mIF9naXptb3MpIHtcclxuICAgICAgICBHaXptb3MucGlja0lkID0gX3BpY2tlZC5sZW5ndGg7XHJcbiAgICAgICAgZ2l6bW8uZHJhd0dpem1vcygpO1xyXG4gICAgICAgIGxldCBwaWNrOiBQaWNrID0gbmV3IFBpY2soZ2l6bW8ubm9kZSk7XHJcbiAgICAgICAgcGljay5naXptbyA9IGdpem1vO1xyXG4gICAgICAgIF9waWNrZWQucHVzaChwaWNrKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgR2l6bW9zLnBpY2tJZCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyBhIGNhbWVyYSBmcnVzdHVtIGZvciB0aGUgZ2l2ZW4gcGFyYW1ldGVycy4gVGhlIGZydXN0dW0gaXMgb3JpZW50ZWQgYWxvbmcgdGhlIHotYXhpcywgd2l0aCB0aGUgdGlwIG9mIHRoZSB0cnVuY2F0ZWQgcHlyYW1pZCBhdCB0aGUgb3JpZ2luLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXdXaXJlRnJ1c3R1bShfYXNwZWN0OiBudW1iZXIsIF9mb3Y6IG51bWJlciwgX25lYXI6IG51bWJlciwgX2ZhcjogbnVtYmVyLCBfZGlyZWN0aW9uOiBGSUVMRF9PRl9WSUVXLCBfbXR4V29ybGQ6IE1hdHJpeDR4NCwgX2NvbG9yOiBDb2xvciwgX2FscGhhT2NjbHVkZWQ6IG51bWJlciA9IEdpem1vcy5hbHBoYU9jY2x1ZGVkKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGY6IG51bWJlciA9IE1hdGgudGFuKENhbGMuZGVnMnJhZCAqIF9mb3YgLyAyKTtcclxuXHJcbiAgICAgIGxldCBzY2FsZVg6IG51bWJlciA9IGY7XHJcbiAgICAgIGxldCBzY2FsZVk6IG51bWJlciA9IGY7XHJcblxyXG4gICAgICBzd2l0Y2ggKF9kaXJlY3Rpb24pIHtcclxuICAgICAgICBjYXNlIEZJRUxEX09GX1ZJRVcuSE9SSVpPTlRBTDpcclxuICAgICAgICAgIHNjYWxlWSA9IGYgLyBfYXNwZWN0O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGSUVMRF9PRl9WSUVXLlZFUlRJQ0FMOlxyXG4gICAgICAgICAgc2NhbGVYID0gZiAqIF9hc3BlY3Q7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEZJRUxEX09GX1ZJRVcuRElBR09OQUw6XHJcbiAgICAgICAgICBjb25zdCBkaWFnb25hbEFzcGVjdDogbnVtYmVyID0gTWF0aC5zcXJ0KF9hc3BlY3QpO1xyXG4gICAgICAgICAgc2NhbGVYID0gZiAqIGRpYWdvbmFsQXNwZWN0O1xyXG4gICAgICAgICAgc2NhbGVZID0gZiAvIGRpYWdvbmFsQXNwZWN0O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5lYXJYOiBudW1iZXIgPSBfbmVhciAqIHNjYWxlWDtcclxuICAgICAgY29uc3QgbmVhclk6IG51bWJlciA9IF9uZWFyICogc2NhbGVZO1xyXG4gICAgICBjb25zdCBmYXJYOiBudW1iZXIgPSBfZmFyICogc2NhbGVYO1xyXG4gICAgICBjb25zdCBmYXJZOiBudW1iZXIgPSBfZmFyICogc2NhbGVZO1xyXG5cclxuICAgICAgY29uc3QgZnJ1c3R1bTogVmVjdG9yM1tdID0gbmV3IEFycmF5KDgpLmZpbGwobnVsbCkubWFwKCgpID0+IFJlY3ljbGVyLmdldChWZWN0b3IzKSk7XHJcblxyXG4gICAgICBmcnVzdHVtWzBdLnNldCgtbmVhclgsIG5lYXJZLCBfbmVhcik7XHJcbiAgICAgIGZydXN0dW1bMV0uc2V0KG5lYXJYLCBuZWFyWSwgX25lYXIpO1xyXG4gICAgICBmcnVzdHVtWzJdLnNldChuZWFyWCwgLW5lYXJZLCBfbmVhcik7XHJcbiAgICAgIGZydXN0dW1bM10uc2V0KC1uZWFyWCwgLW5lYXJZLCBfbmVhcik7XHJcblxyXG4gICAgICBmcnVzdHVtWzRdLnNldCgtZmFyWCwgZmFyWSwgX2Zhcik7XHJcbiAgICAgIGZydXN0dW1bNV0uc2V0KGZhclgsIGZhclksIF9mYXIpO1xyXG4gICAgICBmcnVzdHVtWzZdLnNldChmYXJYLCAtZmFyWSwgX2Zhcik7XHJcbiAgICAgIGZydXN0dW1bN10uc2V0KC1mYXJYLCAtZmFyWSwgX2Zhcik7XHJcblxyXG4gICAgICBHaXptb3MuZHJhd0xpbmVzKFtcclxuICAgICAgICBmcnVzdHVtWzBdLCBmcnVzdHVtWzFdLCBmcnVzdHVtWzFdLCBmcnVzdHVtWzJdLCBmcnVzdHVtWzJdLCBmcnVzdHVtWzNdLCBmcnVzdHVtWzNdLCBmcnVzdHVtWzBdLCAvLyBuZWFyIHBsYW5lXHJcbiAgICAgICAgZnJ1c3R1bVs0XSwgZnJ1c3R1bVs1XSwgZnJ1c3R1bVs1XSwgZnJ1c3R1bVs2XSwgZnJ1c3R1bVs2XSwgZnJ1c3R1bVs3XSwgZnJ1c3R1bVs3XSwgZnJ1c3R1bVs0XSwgLy8gZmFyIHBsYW5lXHJcbiAgICAgICAgZnJ1c3R1bVswXSwgZnJ1c3R1bVs0XSwgZnJ1c3R1bVsxXSwgZnJ1c3R1bVs1XSwgZnJ1c3R1bVsyXSwgZnJ1c3R1bVs2XSwgZnJ1c3R1bVszXSwgZnJ1c3R1bVs3XSAgLy8gc2lkZXNcclxuICAgICAgXSwgX210eFdvcmxkLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlTXVsdGlwbGUoLi4uZnJ1c3R1bSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyBhIHdpcmVmcmFtZSBjdWJlLiBUaGUgY3ViZSBoYXMgYSBzaWRlLWxlbmd0aCBvZiAxIGFuZCBpcyBjZW50ZXJlZCBhcm91bmQgdGhlIG9yaWdpbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3V2lyZUN1YmUoX210eFdvcmxkOiBNYXRyaXg0eDQsIF9jb2xvcjogQ29sb3IsIF9hbHBoYU9jY2x1ZGVkOiBudW1iZXIgPSBHaXptb3MuYWxwaGFPY2NsdWRlZCk6IHZvaWQge1xyXG4gICAgICBHaXptb3MuZHJhd0xpbmVzKEdpem1vcy53aXJlQ3ViZSwgX210eFdvcmxkLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyBhIHdpcmVmcmFtZSBzcGhlcmUuIFRoZSBzcGhlcmUgaGFzIGEgZGlhbWV0ZXIgb2YgMSBhbmQgaXMgY2VudGVyZWQgYXJvdW5kIHRoZSBvcmlnaW4uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZHJhd1dpcmVTcGhlcmUoX210eFdvcmxkOiBNYXRyaXg0eDQsIF9jb2xvcjogQ29sb3IsIF9hbHBoYU9jY2x1ZGVkOiBudW1iZXIgPSBHaXptb3MuYWxwaGFPY2NsdWRlZCk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4V29ybGQ6IE1hdHJpeDR4NCA9IF9tdHhXb3JsZC5jbG9uZTtcclxuXHJcbiAgICAgIEdpem1vcy5kcmF3TGluZXMoR2l6bW9zLndpcmVTcGhlcmUsIG10eFdvcmxkLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuICAgICAgbXR4V29ybGQubG9va0F0KEdpem1vcy4jY2FtZXJhLm10eFdvcmxkLnRyYW5zbGF0aW9uKTtcclxuICAgICAgR2l6bW9zLmRyYXdXaXJlQ2lyY2xlKG10eFdvcmxkLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFdvcmxkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIGEgY29uZSB3aXRoIGEgaGVpZ2h0IGFuZCBkaWFtZXRlciBvZiAxLiBUaGUgY29uZSBpcyBvcmllbnRlZCBhbG9uZyB0aGUgei1heGlzIHdpdGggdGhlIHRpcCBhdCB0aGUgb3JpZ2luLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXdXaXJlQ29uZShfbXR4V29ybGQ6IE1hdHJpeDR4NCwgX2NvbG9yOiBDb2xvciwgX2FscGhhT2NjbHVkZWQ6IG51bWJlciA9IEdpem1vcy5hbHBoYU9jY2x1ZGVkKTogdm9pZCB7XHJcbiAgICAgIEdpem1vcy5kcmF3TGluZXMoR2l6bW9zLndpcmVDb25lLCBfbXR4V29ybGQsIF9jb2xvciwgX2FscGhhT2NjbHVkZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgYSBjaXJjbGUgd2l0aCBhIGRpYW1ldGVyIG9mIDEuIFRoZSBjaXJjbGUgbGllcyBpbiB0aGUgeC15IHBsYW5lLCB3aXRoIGl0cyBjZW50ZXIgYXQgdGhlIG9yaWdpbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3V2lyZUNpcmNsZShfbXR4V29ybGQ6IE1hdHJpeDR4NCwgX2NvbG9yOiBDb2xvciwgX2FscGhhT2NjbHVkZWQ6IG51bWJlciA9IEdpem1vcy5hbHBoYU9jY2x1ZGVkKTogdm9pZCB7XHJcbiAgICAgIEdpem1vcy5kcmF3TGluZXMoR2l6bW9zLndpcmVDaXJjbGUsIF9tdHhXb3JsZCwgX2NvbG9yLCBfYWxwaGFPY2NsdWRlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyBsaW5lcyBiZXR3ZWVuIGVhY2ggcGFpciBvZiB0aGUgZ2l2ZW4gdmVydGljZXMuIFxyXG4gICAgICogVmVydGljZXMgYXJlIHBhaXJlZCBzZXF1ZW50aWFsbHksIHNvIGZvciBleGFtcGxlLCBsaW5lcyB3aWxsIGJlIGRyYXduIGJldHdlZW4gdmVydGljZXMgMCBhbmQgMSwgMiBhbmQgMywgNCBhbmQgNSwgZXRjLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXdMaW5lcyhfdmVydGljZXM6IFZlY3RvcjNbXSwgX210eFdvcmxkOiBNYXRyaXg0eDQsIF9jb2xvcjogQ29sb3IsIF9hbHBoYU9jY2x1ZGVkOiBudW1iZXIgPSBHaXptb3MuYWxwaGFPY2NsdWRlZCk6IHZvaWQge1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICBjb25zdCBzaGFkZXI6IHR5cGVvZiBTaGFkZXIgPSBTaGFkZXJHaXptbztcclxuICAgICAgc2hhZGVyLnVzZVByb2dyYW0oKTtcclxuXHJcbiAgICAgIGNvbnN0IGxpbmVEYXRhOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KF92ZXJ0aWNlcy5sZW5ndGggKiAzKTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IF92ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHBvaW50OiBWZWN0b3IzID0gX3ZlcnRpY2VzW2ldO1xyXG4gICAgICAgIGxpbmVEYXRhLnNldChwb2ludC5nZXQoKSwgaSAqIDMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBHaXptb3MuYnVmZmVyUG9zaXRpb25zKHNoYWRlciwgR2l6bW9zLmFycmF5QnVmZmVyKTtcclxuICAgICAgR2l6bW9zLmJ1ZmZlck1hdHJpeChzaGFkZXIsIF9tdHhXb3JsZCk7XHJcbiAgICAgIGNyYzMuYnVmZmVyRGF0YShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFSUkFZX0JVRkZFUiwgbGluZURhdGEsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRFlOQU1JQ19EUkFXKTtcclxuXHJcbiAgICAgIEdpem1vcy5kcmF3R2l6bW9zKHNoYWRlciwgR2l6bW9zLmRyYXdBcnJheXMsIF92ZXJ0aWNlcy5sZW5ndGgsIF9jb2xvciwgX2FscGhhT2NjbHVkZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgYSB3aXJlZnJhbWUgbWVzaC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3V2lyZU1lc2goX21lc2g6IE1lc2gsIF9tdHhXb3JsZDogTWF0cml4NHg0LCBfY29sb3I6IENvbG9yLCBfYWxwaGFPY2NsdWRlZDogbnVtYmVyID0gR2l6bW9zLmFscGhhT2NjbHVkZWQpOiB2b2lkIHtcclxuICAgICAgY29uc3QgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKTtcclxuICAgICAgY29uc3Qgc2hhZGVyOiB0eXBlb2YgU2hhZGVyID0gU2hhZGVyR2l6bW87XHJcbiAgICAgIHNoYWRlci51c2VQcm9ncmFtKCk7XHJcblxyXG4gICAgICBjb25zdCBpbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICBjb25zdCByZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzID0gX21lc2guZ2V0UmVuZGVyQnVmZmVycygpO1xyXG4gICAgICBjb25zdCByZW5kZXJNZXNoOiBSZW5kZXJNZXNoID0gX21lc2gucmVuZGVyTWVzaDsgLy8gVE9ETzogZG9uJ3QgYnJlYWNoIGVuY2Fwc3VsYXRpb24gaGVyZS4uLlxyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgcmVuZGVyTWVzaC5pbmRpY2VzLmxlbmd0aDsgaSArPSAzKSB7IC8vIFRPRE86IHRoaW5rIGFib3V0IGNhY2hpbmcgdGhpcyBpbiB0aGUgbWVzaFxyXG4gICAgICAgIGNvbnN0IGE6IG51bWJlciA9IHJlbmRlck1lc2guaW5kaWNlc1tpXTtcclxuICAgICAgICBjb25zdCBiOiBudW1iZXIgPSByZW5kZXJNZXNoLmluZGljZXNbaSArIDFdO1xyXG4gICAgICAgIGNvbnN0IGM6IG51bWJlciA9IHJlbmRlck1lc2guaW5kaWNlc1tpICsgMl07XHJcblxyXG4gICAgICAgIC8vIEFkZCB0aGUgbGluZSBzZWdtZW50cyBmb3IgdGhlIHRyaWFuZ2xlIHRvIHRoZSBsaW5lIGluZGljZXNcclxuICAgICAgICBpbmRpY2VzLnB1c2goYSwgYiwgYiwgYywgYywgYSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBHaXptb3MuaW5kZXhCdWZmZXIpO1xyXG4gICAgICBjcmMzLmJ1ZmZlckRhdGEoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IFVpbnQxNkFycmF5KGluZGljZXMpLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkRZTkFNSUNfRFJBVyk7XHJcblxyXG4gICAgICBHaXptb3MuYnVmZmVyUG9zaXRpb25zKHNoYWRlciwgcmVuZGVyQnVmZmVycy52ZXJ0aWNlcyk7XHJcbiAgICAgIEdpem1vcy5idWZmZXJNYXRyaXgoc2hhZGVyLCBfbXR4V29ybGQpO1xyXG5cclxuICAgICAgR2l6bW9zLmRyYXdHaXptb3Moc2hhZGVyLCBHaXptb3MuZHJhd0VsZW1lbnRzTGluZXMsIGluZGljZXMubGVuZ3RoLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIGEgc29saWQgY3ViZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3Q3ViZShfbXR4V29ybGQ6IE1hdHJpeDR4NCwgX2NvbG9yOiBDb2xvciwgX2FscGhhT2NjbHVkZWQ6IG51bWJlciA9IEdpem1vcy5hbHBoYU9jY2x1ZGVkKTogdm9pZCB7XHJcbiAgICAgIEdpem1vcy5kcmF3TWVzaChHaXptb3MuY3ViZSwgX210eFdvcmxkLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIGEgc29saWQgc3BoZXJlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXdTcGhlcmUoX210eFdvcmxkOiBNYXRyaXg0eDQsIF9jb2xvcjogQ29sb3IsIF9hbHBoYU9jY2x1ZGVkOiBudW1iZXIgPSBHaXptb3MuYWxwaGFPY2NsdWRlZCk6IHZvaWQge1xyXG4gICAgICBHaXptb3MuZHJhd01lc2goR2l6bW9zLnNwaGVyZSwgX210eFdvcmxkLCBfY29sb3IsIF9hbHBoYU9jY2x1ZGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIGEgc29saWQgbWVzaC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3TWVzaChfbWVzaDogTWVzaCwgX210eFdvcmxkOiBNYXRyaXg0eDQsIF9jb2xvcjogQ29sb3IsIF9hbHBoYU9jY2x1ZGVkOiBudW1iZXIgPSBHaXptb3MuYWxwaGFPY2NsdWRlZCk6IHZvaWQge1xyXG4gICAgICBjb25zdCBzaGFkZXI6IFNoYWRlckludGVyZmFjZSA9IEdpem1vcy5waWNraW5nID8gU2hhZGVyUGljayA6IFNoYWRlckdpem1vO1xyXG4gICAgICBzaGFkZXIudXNlUHJvZ3JhbSgpO1xyXG5cclxuICAgICAgbGV0IHJlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMgPSBfbWVzaC51c2VSZW5kZXJCdWZmZXJzKHNoYWRlciwgX210eFdvcmxkLCBNYXRyaXg0eDQuUFJPRFVDVChHaXptb3MuI2NhbWVyYS5tdHhXb3JsZFRvVmlldywgX210eFdvcmxkKSwgR2l6bW9zLnBpY2tJZCk7XHJcblxyXG4gICAgICBHaXptb3MuZHJhd0dpem1vcyhzaGFkZXIsIEdpem1vcy5kcmF3RWxlbWVudHNUcmlhbmxnZXMsIHJlbmRlckJ1ZmZlcnMubkluZGljZXMsIF9jb2xvciwgX2FscGhhT2NjbHVkZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgYW4gaWNvbiBmcm9tIGEge0BsaW5rIFRleHR1cmV9IG9uIGEge0BsaW5rIE1lc2hRdWFkfS4gVGhlIGljb24gaXMgYWZmZWN0ZWQgYnkgdGhlIGdpdmVuIHRyYW5zZm9ybSBhbmQgY29sb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZHJhd0ljb24oX3RleHR1cmU6IFRleHR1cmUsIF9tdHhXb3JsZDogTWF0cml4NHg0LCBfY29sb3I6IENvbG9yLCBfYWxwaGFPY2NsdWRlZDogbnVtYmVyID0gR2l6bW9zLmFscGhhT2NjbHVkZWQpOiB2b2lkIHtcclxuICAgICAgbGV0IHBvc2l0aW9uOiBzdHJpbmcgPSBfbXR4V29ybGQudHJhbnNsYXRpb24udG9TdHJpbmcoKTtcclxuICAgICAgaWYgKEdpem1vcy5wb3NJY29ucy5oYXMocG9zaXRpb24pKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgR2l6bW9zLnBvc0ljb25zLmFkZChwb3NpdGlvbik7XHJcblxyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgY29uc3Qgc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UgPSBHaXptb3MucGlja2luZyA/IFNoYWRlclBpY2tUZXh0dXJlZCA6IFNoYWRlckdpem1vVGV4dHVyZWQ7XHJcbiAgICAgIHNoYWRlci51c2VQcm9ncmFtKCk7XHJcblxyXG4gICAgICBsZXQgbXR4V29ybGQ6IE1hdHJpeDR4NCA9IF9tdHhXb3JsZC5jbG9uZTtcclxuICAgICAgbGV0IGNvbG9yOiBDb2xvciA9IF9jb2xvci5jbG9uZTtcclxuXHJcbiAgICAgIGxldCBiYWNrOiBWZWN0b3IzID0gR2l6bW9zLiNjYW1lcmEubXR4V29ybGQuZm9yd2FyZC5uZWdhdGUoKTtcclxuICAgICAgbGV0IHVwOiBWZWN0b3IzID0gR2l6bW9zLiNjYW1lcmEubXR4V29ybGQudXA7XHJcbiAgICAgIG10eFdvcmxkLmxvb2tJbihiYWNrLCB1cCk7XHJcblxyXG4gICAgICBsZXQgZGlzdGFuY2U6IG51bWJlciA9IFZlY3RvcjMuRElGRkVSRU5DRShHaXptb3MuI2NhbWVyYS5tdHhXb3JsZC50cmFuc2xhdGlvbiwgbXR4V29ybGQudHJhbnNsYXRpb24pLm1hZ25pdHVkZTtcclxuICAgICAgbGV0IGZhZGVGYXI6IG51bWJlciA9IDQ7XHJcbiAgICAgIGxldCBmYWRlTmVhcjogbnVtYmVyID0gMS41O1xyXG4gICAgICBpZiAoZGlzdGFuY2UgPiAwICYmIGRpc3RhbmNlIDwgZmFkZUZhcikge1xyXG4gICAgICAgIGRpc3RhbmNlID0gKGRpc3RhbmNlIC0gZmFkZU5lYXIpIC8gKGZhZGVGYXIgLSBmYWRlTmVhcik7XHJcbiAgICAgICAgY29sb3IuYSA9IENhbGMubGVycCgwLCBjb2xvci5hLCBkaXN0YW5jZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCByZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzID0gR2l6bW9zLnF1YWQudXNlUmVuZGVyQnVmZmVycyhzaGFkZXIsIG10eFdvcmxkLCBNYXRyaXg0eDQuUFJPRFVDVChHaXptb3MuI2NhbWVyYS5tdHhXb3JsZFRvVmlldywgbXR4V29ybGQpLCBHaXptb3MucGlja0lkKTtcclxuICAgICAgX3RleHR1cmUudXNlUmVuZGVyRGF0YShURVhUVVJFX0xPQ0FUSU9OLkNPTE9SLlVOSVQpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShzaGFkZXIudW5pZm9ybXNbVEVYVFVSRV9MT0NBVElPTi5DT0xPUi5VTklGT1JNXSwgVEVYVFVSRV9MT0NBVElPTi5DT0xPUi5JTkRFWCk7XHJcblxyXG4gICAgICBHaXptb3MuZHJhd0dpem1vcyhzaGFkZXIsIEdpem1vcy5kcmF3RWxlbWVudHNUcmlhbmxnZXMsIHJlbmRlckJ1ZmZlcnMubkluZGljZXMsIGNvbG9yLCBfYWxwaGFPY2NsdWRlZCk7XHJcblxyXG4gICAgICBSZWN5Y2xlci5zdG9yZU11bHRpcGxlKG10eFdvcmxkLCBjb2xvciwgYmFjaywgdXApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGJ1ZmZlclBvc2l0aW9ucyhfc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UsIF9idWZmZXI6IFdlYkdMQnVmZmVyKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcblxyXG4gICAgICBjcmMzLmJpbmRCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIF9idWZmZXIpO1xyXG4gICAgICBsZXQgYXR0cmlidXRlOiBudW1iZXIgPSBfc2hhZGVyLmF0dHJpYnV0ZXNbXCJhX3ZjdFBvc2l0aW9uXCJdO1xyXG4gICAgICBjcmMzLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGF0dHJpYnV0ZSk7XHJcbiAgICAgIGNyYzMudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWJ1dGUsIDMsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBidWZmZXJDb2xvcihfc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UsIF9jb2xvcjogQ29sb3IpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpLnVuaWZvcm00ZnYoX3NoYWRlci51bmlmb3Jtc1tcInVfdmN0Q29sb3JcIl0sIF9jb2xvci5nZXQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYnVmZmVyTWF0cml4KF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSwgX210eFdvcmxkOiBNYXRyaXg0eDQpOiB2b2lkIHtcclxuICAgICAgY29uc3QgbXR4TWVzaFRvVmlldzogTWF0cml4NHg0ID0gTWF0cml4NHg0LlBST0RVQ1QoR2l6bW9zLiNjYW1lcmEubXR4V29ybGRUb1ZpZXcsIF9tdHhXb3JsZCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKS51bmlmb3JtTWF0cml4NGZ2KF9zaGFkZXIudW5pZm9ybXNbXCJ1X210eE1lc2hUb1ZpZXdcIl0sIGZhbHNlLCBtdHhNZXNoVG9WaWV3LmdldCgpKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4TWVzaFRvVmlldyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZHJhd0dpem1vcyhfc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UsIF9kcmF3OiBGdW5jdGlvbiwgX2NvdW50OiBudW1iZXIsIF9jb2xvcjogQ29sb3IsIF9hbHBoYU9jY2x1ZGVkOiBudW1iZXIgPSBHaXptb3MuYWxwaGFPY2NsdWRlZCk6IHZvaWQge1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICBsZXQgY29sb3I6IENvbG9yID0gX2NvbG9yLmNsb25lO1xyXG4gICAgICBHaXptb3MuYnVmZmVyQ29sb3IoX3NoYWRlciwgY29sb3IpO1xyXG5cclxuICAgICAgLy8gc3RlbmNpbCBzdHVmZiBpcyBmb3Igc2VtaS10cmFuc3BhcmVudCBnaXptb3MgdG8gaGF2ZSBjb3JyZWN0IHNlbGYgb2NjbHVzaW9uXHJcbiAgICAgIC8vIGZpcnN0IGRyYXcgdGhlIGdpem1vIG9wYXF1ZSB3aXRoIGRlcHRoIHRlc3QgYW5kIHNldCBkcmF3biBwaXhlbHMgdG8gMSBpbiBzdGVuY2lsIGJ1ZmZlclxyXG4gICAgICBjcmMzLmNsZWFyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1RFTkNJTF9CVUZGRVJfQklUKTtcclxuICAgICAgY3JjMy5zdGVuY2lsRnVuYyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFMV0FZUywgMSwgMHhGRik7XHJcbiAgICAgIGNyYzMuc3RlbmNpbE9wKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuS0VFUCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5LRUVQLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJFUExBQ0UpO1xyXG4gICAgICBjcmMzLmVuYWJsZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlNURU5DSUxfVEVTVCk7XHJcbiAgICAgIF9kcmF3KF9jb3VudCk7XHJcblxyXG4gICAgICAvLyB0aGVuIGRyYXcgdGhlIGdpem1vIGFnYWluIHdpdGggcmVkdWNlZCBhbHBoYSBhbmQgd2l0aG91dCBkZXB0aCB0ZXN0IHdoZXJlIHN0ZW5jaWwgYnVmZmVyIGlzIDBcclxuICAgICAgY29sb3IuYSAqPSBfYWxwaGFPY2NsdWRlZDtcclxuICAgICAgR2l6bW9zLmJ1ZmZlckNvbG9yKF9zaGFkZXIsIGNvbG9yKTtcclxuXHJcbiAgICAgIGNyYzMuc3RlbmNpbEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5FUVVBTCwgMCwgMHhGRik7XHJcbiAgICAgIGNyYzMuc3RlbmNpbE9wKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuS0VFUCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5LRUVQLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LktFRVApO1xyXG4gICAgICBSZW5kZXIuc2V0RGVwdGhUZXN0KGZhbHNlKTtcclxuICAgICAgX2RyYXcoX2NvdW50KTtcclxuICAgICAgUmVuZGVyLnNldERlcHRoVGVzdCh0cnVlKTtcclxuICAgICAgY3JjMy5kaXNhYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1RFTkNJTF9URVNUKTtcclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGNvbG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBkcmF3RWxlbWVudHNUcmlhbmxnZXMoX2NvdW50OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpLmRyYXdFbGVtZW50cyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRSSUFOR0xFUywgX2NvdW50LCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOU0lHTkVEX1NIT1JULCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBkcmF3RWxlbWVudHNMaW5lcyhfY291bnQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkuZHJhd0VsZW1lbnRzKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTElORVMsIF9jb3VudCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZHJhd0FycmF5cyhfY291bnQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkuZHJhd0FycmF5cyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkxJTkVTLCAwLCBfY291bnQpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCB0eXBlIE1hcExpZ2h0VHlwZVRvTGlnaHRMaXN0ID0gTWFwPFR5cGVPZkxpZ2h0LCBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRMaWdodD4+O1xyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFJlbmRlclByZXBhcmVPcHRpb25zIHtcclxuICAgIGlnbm9yZVBoeXNpY3M/OiBib29sZWFuO1xyXG4gICAgZ2l6bW9zRW5hYmxlZD86IGJvb2xlYW47XHJcbiAgICBnaXptb3NGaWx0ZXI/OiBNYXA8c3RyaW5nLCBib29sZWFuPjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBtYWluIGludGVyZmFjZSB0byB0aGUgcmVuZGVyIGVuZ2luZSwgaGVyZSBXZWJHTCAoc2VlIHN1cGVyY2xhc3Mge0BsaW5rIFJlbmRlcldlYkdMfSBhbmQgdGhlIFJlbmRlckluamVjdG9yc1xyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZW5kZXIgZXh0ZW5kcyBSZW5kZXJXZWJHTCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlY3RDbGlwOiBSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKC0xLCAxLCAyLCAtMik7XHJcbiAgICBwdWJsaWMgc3RhdGljIHBpY2tCdWZmZXI6IEludDMyQXJyYXk7ICAgLy8gVE9ETzogcmVzZWFyY2ggaWYgcGlja2luZyBzaG91bGQgYmUgb3B0aW1pemVkIHVzaW5nIHJhZGl1cyBwaWNraW5nIHRvIGZpbHRlclxyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBub2Rlc1BoeXNpY3M6IFJlY3ljYWJsZUFycmF5PE5vZGU+ID0gbmV3IFJlY3ljYWJsZUFycmF5KCk7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGNvbXBvbmVudHNQaWNrOiBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRQaWNrPiA9IG5ldyBSZWN5Y2FibGVBcnJheSgpO1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBsaWdodHM6IE1hcExpZ2h0VHlwZVRvTGlnaHRMaXN0ID0gbmV3IE1hcCgpO1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBnaXptb3M6IFJlY3ljYWJsZUFycmF5PENvbXBvbmVudD4gPSBuZXcgUmVjeWNhYmxlQXJyYXkoKTtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IG5vZGVzU2ltcGxlOiBSZWN5Y2FibGVBcnJheTxOb2RlPiA9IG5ldyBSZWN5Y2FibGVBcnJheSgpO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgbm9kZXNBbHBoYTogUmVjeWNhYmxlQXJyYXk8Tm9kZT4gPSBuZXcgUmVjeWNhYmxlQXJyYXkoKTtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IGNvbXBvbmVudHNTa2VsZXRvbjogUmVjeWNhYmxlQXJyYXk8Q29tcG9uZW50U2tlbGV0b24+ID0gbmV3IFJlY3ljYWJsZUFycmF5KCk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0aW1lc3RhbXBVcGRhdGU6IG51bWJlcjtcclxuXHJcbiAgICAvLyNyZWdpb24gUHJlcGFyZVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN1cnNpdmVseSBpdGVyYXRlcyBvdmVyIHRoZSBicmFuY2ggc3RhcnRpbmcgd2l0aCB0aGUgbm9kZSBnaXZlbiwgcmVjYWxjdWxhdGVzIGFsbCB3b3JsZCB0cmFuc2Zvcm1zLCBcclxuICAgICAqIGNvbGxlY3RzIGFsbCBsaWdodHMgYW5kIGZlZWRzIGFsbCBzaGFkZXJzIHVzZWQgaW4gdGhlIGdyYXBoIHdpdGggdGhlc2UgbGlnaHRzLiBTb3J0cyBub2RlcyBmb3IgZGlmZmVyZW50XHJcbiAgICAgKiByZW5kZXIgcGFzc2VzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHByZXBhcmUoX2JyYW5jaDogTm9kZSwgX29wdGlvbnM6IFJlbmRlclByZXBhcmVPcHRpb25zID0ge30sIF9tdHhXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCksIF9zaGFkZXJzVXNlZDogKFNoYWRlckludGVyZmFjZSlbXSA9IG51bGwpOiB2b2lkIHtcclxuICAgICAgbGV0IGZpcnN0TGV2ZWw6IGJvb2xlYW4gPSAoX3NoYWRlcnNVc2VkID09IG51bGwpO1xyXG4gICAgICBpZiAoZmlyc3RMZXZlbCkge1xyXG4gICAgICAgIF9zaGFkZXJzVXNlZCA9IFtdO1xyXG4gICAgICAgIFJlbmRlci50aW1lc3RhbXBVcGRhdGUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBSZW5kZXIubm9kZXNTaW1wbGUucmVzZXQoKTtcclxuICAgICAgICBSZW5kZXIubm9kZXNBbHBoYS5yZXNldCgpO1xyXG4gICAgICAgIFJlbmRlci5ub2Rlc1BoeXNpY3MucmVzZXQoKTtcclxuICAgICAgICBSZW5kZXIuY29tcG9uZW50c1BpY2sucmVzZXQoKTtcclxuICAgICAgICBSZW5kZXIuY29tcG9uZW50c1NrZWxldG9uLnJlc2V0KCk7XHJcbiAgICAgICAgUmVuZGVyLmxpZ2h0cy5mb3JFYWNoKF9hcnJheSA9PiBfYXJyYXkucmVzZXQoKSk7XHJcbiAgICAgICAgaWYgKF9vcHRpb25zPy5naXptb3NFbmFibGVkKVxyXG4gICAgICAgICAgUmVuZGVyLmdpem1vcy5yZXNldCgpO1xyXG4gICAgICAgIF9icmFuY2guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuUkVOREVSX1BSRVBBUkVfU1RBUlQpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFfYnJhbmNoLmlzQWN0aXZlKVxyXG4gICAgICAgIHJldHVybjsgLy8gZG9uJ3QgYWRkIGJyYW5jaCB0byByZW5kZXIgbGlzdCBpZiBub3QgYWN0aXZlXHJcblxyXG4gICAgICBfYnJhbmNoLm5Ob2Rlc0luQnJhbmNoID0gMTtcclxuICAgICAgX2JyYW5jaC5yYWRpdXMgPSAwO1xyXG5cclxuICAgICAgX2JyYW5jaC5kaXNwYXRjaEV2ZW50VG9UYXJnZXRPbmx5KG5ldyBFdmVudChFVkVOVC5SRU5ERVJfUFJFUEFSRSkpO1xyXG4gICAgICBfYnJhbmNoLnRpbWVzdGFtcFVwZGF0ZSA9IFJlbmRlci50aW1lc3RhbXBVcGRhdGU7XHJcblxyXG4gICAgICBpZiAoX2JyYW5jaC5jbXBUcmFuc2Zvcm0gJiYgX2JyYW5jaC5jbXBUcmFuc2Zvcm0uaXNBY3RpdmUpIHtcclxuICAgICAgICBsZXQgbXR4V29ybGRCcmFuY2g6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5QUk9EVUNUKF9tdHhXb3JsZCwgX2JyYW5jaC5jbXBUcmFuc2Zvcm0ubXR4TG9jYWwpO1xyXG4gICAgICAgIF9icmFuY2gubXR4V29ybGQuY29weShtdHhXb3JsZEJyYW5jaCk7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4V29ybGRCcmFuY2gpO1xyXG4gICAgICB9IGVsc2VcclxuICAgICAgICBfYnJhbmNoLm10eFdvcmxkLmNvcHkoX210eFdvcmxkKTsgLy8gb3ZlcndyaXRlIHJlYWRvbmx5IG10eFdvcmxkIG9mIHRoZSBjdXJyZW50IG5vZGVcclxuXHJcbiAgICAgIGxldCBjbXBSaWdpZGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keSA9IF9icmFuY2guZ2V0Q29tcG9uZW50KENvbXBvbmVudFJpZ2lkYm9keSk7XHJcbiAgICAgIGlmIChjbXBSaWdpZGJvZHkgJiYgY21wUmlnaWRib2R5LmlzQWN0aXZlKSB7IC8vVE9ETzogc3VwcG9ydCBkZS0vYWN0aXZhdGlvbiB0aHJvdWdob3V0XHJcbiAgICAgICAgUmVuZGVyLm5vZGVzUGh5c2ljcy5wdXNoKF9icmFuY2gpOyAvLyBhZGQgdGhpcyBub2RlIHRvIHBoeXNpY3MgbGlzdFxyXG4gICAgICAgIGlmICghX29wdGlvbnM/Lmlnbm9yZVBoeXNpY3MpXHJcbiAgICAgICAgICB0aGlzLnRyYW5zZm9ybUJ5UGh5c2ljcyhfYnJhbmNoLCBjbXBSaWdpZGJvZHkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgY21wUGljazogQ29tcG9uZW50UGljayA9IF9icmFuY2guZ2V0Q29tcG9uZW50KENvbXBvbmVudFBpY2spO1xyXG4gICAgICBpZiAoY21wUGljayAmJiBjbXBQaWNrLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgUmVuZGVyLmNvbXBvbmVudHNQaWNrLnB1c2goY21wUGljayk7IC8vIGFkZCB0aGlzIGNvbXBvbmVudCB0byBwaWNrIGxpc3RcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGNtcExpZ2h0czogQ29tcG9uZW50TGlnaHRbXSA9IF9icmFuY2guZ2V0Q29tcG9uZW50cyhDb21wb25lbnRMaWdodCk7XHJcbiAgICAgIFJlbmRlci5hZGRMaWdodHMoY21wTGlnaHRzKTtcclxuXHJcbiAgICAgIGxldCBjbXBNZXNoOiBDb21wb25lbnRNZXNoID0gX2JyYW5jaC5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgIGxldCBjbXBNYXRlcmlhbDogQ29tcG9uZW50TWF0ZXJpYWwgPSBfYnJhbmNoLmdldENvbXBvbmVudChDb21wb25lbnRNYXRlcmlhbCk7XHJcblxyXG4gICAgICBpZiAoY21wTWVzaCAmJiBjbXBNZXNoLmlzQWN0aXZlICYmIGNtcE1hdGVyaWFsICYmIGNtcE1hdGVyaWFsLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgbGV0IG10eFdvcmxkTWVzaDogTWF0cml4NHg0ID0gTWF0cml4NHg0LlBST0RVQ1QoX2JyYW5jaC5tdHhXb3JsZCwgY21wTWVzaC5tdHhQaXZvdCk7XHJcbiAgICAgICAgY21wTWVzaC5tdHhXb3JsZC5jb3B5KG10eFdvcmxkTWVzaCk7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4V29ybGRNZXNoKTsgLy8gVE9ETzogZXhhbWluZSwgd2h5IHJlY3ljbGluZyB0aGlzIGNhdXNlcyBtZXNoZXMgdG8gYmUgbWlzcGxhY2VkLi4uXHJcbiAgICAgICAgbGV0IHNoYWRlcjogU2hhZGVySW50ZXJmYWNlID0gY21wTWF0ZXJpYWwubWF0ZXJpYWwuZ2V0U2hhZGVyKCk7XHJcbiAgICAgICAgbGV0IGNtcFBhcnRpY2xlU3lzdGVtOiBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbSA9IF9icmFuY2guZ2V0Q29tcG9uZW50KENvbXBvbmVudFBhcnRpY2xlU3lzdGVtKTtcclxuICAgICAgICBpZiAoY21wUGFydGljbGVTeXN0ZW0gJiYgY21wUGFydGljbGVTeXN0ZW0uaXNBY3RpdmUgJiYgY21wUGFydGljbGVTeXN0ZW0ucGFydGljbGVTeXN0ZW0gIT0gbnVsbClcclxuICAgICAgICAgIHNoYWRlciA9IGNtcFBhcnRpY2xlU3lzdGVtLnBhcnRpY2xlU3lzdGVtLmdldFNoYWRlckZyb20oc2hhZGVyKTtcclxuICAgICAgICBpZiAoX3NoYWRlcnNVc2VkLmluZGV4T2Yoc2hhZGVyKSA8IDApXHJcbiAgICAgICAgICBfc2hhZGVyc1VzZWQucHVzaChzaGFkZXIpO1xyXG4gICAgICAgIF9icmFuY2gucmFkaXVzID0gY21wTWVzaC5yYWRpdXM7XHJcbiAgICAgICAgaWYgKGNtcE1hdGVyaWFsLnNvcnRGb3JBbHBoYSB8fCBfYnJhbmNoLmdldENvbXBvbmVudChDb21wb25lbnRUZXh0KSkgLy8gYWx3YXlzIHNvcnQgdGV4dCBmb3IgYWxwaGFcclxuICAgICAgICAgIFJlbmRlci5ub2Rlc0FscGhhLnB1c2goX2JyYW5jaCk7IC8vIGFkZCB0aGlzIG5vZGUgdG8gcmVuZGVyIGxpc3RcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBSZW5kZXIubm9kZXNTaW1wbGUucHVzaChfYnJhbmNoKTsgLy8gYWRkIHRoaXMgbm9kZSB0byByZW5kZXIgbGlzdFxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgY21wU2tlbGV0b25zOiBDb21wb25lbnRTa2VsZXRvbltdID0gX2JyYW5jaC5nZXRDb21wb25lbnRzKENvbXBvbmVudFNrZWxldG9uKTtcclxuICAgICAgZm9yIChsZXQgY21wU2tlbGV0b24gb2YgY21wU2tlbGV0b25zKVxyXG4gICAgICAgIGlmIChjbXBTa2VsZXRvbiAmJiBjbXBTa2VsZXRvbi5pc0FjdGl2ZSlcclxuICAgICAgICAgIFJlbmRlci5jb21wb25lbnRzU2tlbGV0b24ucHVzaChjbXBTa2VsZXRvbik7XHJcblxyXG4gICAgICBpZiAoX29wdGlvbnM/Lmdpem1vc0VuYWJsZWQgJiYgX29wdGlvbnM/Lmdpem1vc0ZpbHRlcikge1xyXG4gICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9icmFuY2guZ2V0QWxsQ29tcG9uZW50cygpKVxyXG4gICAgICAgICAgaWYgKGNvbXBvbmVudC5pc0FjdGl2ZSAmJiBfb3B0aW9ucy5naXptb3NGaWx0ZXIuZ2V0KGNvbXBvbmVudC50eXBlKSlcclxuICAgICAgICAgICAgUmVuZGVyLmdpem1vcy5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAobGV0IGNoaWxkIG9mIF9icmFuY2guZ2V0Q2hpbGRyZW4oKSkge1xyXG4gICAgICAgIFJlbmRlci5wcmVwYXJlKGNoaWxkLCBfb3B0aW9ucywgX2JyYW5jaC5tdHhXb3JsZCwgX3NoYWRlcnNVc2VkKTtcclxuXHJcbiAgICAgICAgX2JyYW5jaC5uTm9kZXNJbkJyYW5jaCArPSBjaGlsZC5uTm9kZXNJbkJyYW5jaDtcclxuICAgICAgICBsZXQgY21wTWVzaENoaWxkOiBDb21wb25lbnRNZXNoID0gY2hpbGQuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1lc2gpO1xyXG4gICAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMyA9IGNtcE1lc2hDaGlsZCA/IGNtcE1lc2hDaGlsZC5tdHhXb3JsZC50cmFuc2xhdGlvbiA6IGNoaWxkLm10eFdvcmxkLnRyYW5zbGF0aW9uO1xyXG4gICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24uY2xvbmU7XHJcbiAgICAgICAgX2JyYW5jaC5yYWRpdXMgPSBNYXRoLm1heChfYnJhbmNoLnJhZGl1cywgcG9zaXRpb24uZ2V0RGlzdGFuY2UoX2JyYW5jaC5tdHhXb3JsZC50cmFuc2xhdGlvbikgKyBjaGlsZC5yYWRpdXMpO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKHBvc2l0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZpcnN0TGV2ZWwpIHtcclxuICAgICAgICBfYnJhbmNoLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULlJFTkRFUl9QUkVQQVJFX0VORCkpO1xyXG4gICAgICAgIGZvciAoY29uc3QgY21wU2tlbGV0b24gb2YgUmVuZGVyLmNvbXBvbmVudHNTa2VsZXRvbikge1xyXG4gICAgICAgICAgY21wU2tlbGV0b24udXBkYXRlKCk7XHJcbiAgICAgICAgICBjbXBTa2VsZXRvbi51cGRhdGVSZW5kZXJCdWZmZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUmVuZGVyLmJ1ZmZlckxpZ2h0cyhSZW5kZXIubGlnaHRzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkTGlnaHRzKF9jbXBMaWdodHM6IENvbXBvbmVudExpZ2h0W10pOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgY21wTGlnaHQgb2YgX2NtcExpZ2h0cykge1xyXG4gICAgICAgIGlmICghY21wTGlnaHQuaXNBY3RpdmUpXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgbGV0IHR5cGU6IFR5cGVPZkxpZ2h0ID0gY21wTGlnaHQubGlnaHQuZ2V0VHlwZSgpO1xyXG4gICAgICAgIGxldCBsaWdodHNPZlR5cGU6IFJlY3ljYWJsZUFycmF5PENvbXBvbmVudExpZ2h0PiA9IFJlbmRlci5saWdodHMuZ2V0KHR5cGUpO1xyXG4gICAgICAgIGlmICghbGlnaHRzT2ZUeXBlKSB7XHJcbiAgICAgICAgICBsaWdodHNPZlR5cGUgPSBuZXcgUmVjeWNhYmxlQXJyYXk8Q29tcG9uZW50TGlnaHQ+KCk7XHJcbiAgICAgICAgICBSZW5kZXIubGlnaHRzLnNldCh0eXBlLCBsaWdodHNPZlR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaWdodHNPZlR5cGUucHVzaChjbXBMaWdodCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBQaWNraW5nXHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgd2l0aCBhIHtAbGluayBQaWNrZXJ9LWNhbWVyYSwgdGhpcyBtZXRob2QgcmVuZGVycyBvbmUgcGl4ZWwgd2l0aCBwaWNraW5nIGluZm9ybWF0aW9uIFxyXG4gICAgICogZm9yIGVhY2ggbm9kZSBpbiB0aGUgbGluZSBvZiBzaWdodCBhbmQgcmV0dXJuIHRoYXQgYXMgYW4gdW5zb3J0ZWQge0BsaW5rIFBpY2t9LWFycmF5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcGlja0JyYW5jaChfbm9kZXM6IE5vZGVbXSwgX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhLCBfcGlja0dpem1vczogYm9vbGVhbiA9IGZhbHNlLCBfZ2l6bW9zRmlsdGVyPzogTWFwPHN0cmluZywgYm9vbGVhbj4pOiBQaWNrW10geyAvLyBUT0RPOiBzZWUgaWYgdGhpcmQgcGFyYW1ldGVyIF93b3JsZD86IE1hdHJpeDR4NCB3b3VsZCBiZSB1c2VmdWxsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUT0RPOiBtYXliZSBtb3ZlIHRoaXMgd2hvbGUgZnVuY3Rpb24gdG8gUmVuZGVyV2ViR0w/IFxyXG4gICAgICAgKiBJdCBzZWVtcyB0byBtb3N0bHkgcmVseSBvbiBSZW5kZXJXZWJHTCBlLmcuOiDGknBpY2tlZCwgY3JlYXRlUGlja1RleHR1cmUoKSwgc2V0QmxlbmRNb2RlKCksIHBpY2soKSwgcGlja0dpem1vcygpLCBnZXRQaWNrcygpLCByZXNldEZyYW1lYnVmZmVyKClcclxuICAgICAgICogVGhleSBvbmx5IG5vdCBXZWJHTCB0aGluZyBpdCBkb2VzIGlzIGZpbHRlcmluZyB0aGUgbm9kZXMgdG8gcGljaywgd2hpY2ggY291bGQgYmUgZG9uZSBpbiBwaWNrKCkgaXRzZWxmLi4uXHJcbiAgICAgICAqIC0+IG9yIG1ha2UgdGhpcyBtZXRob2Qgb25seSBjb2xsZWN0IHRoZSBub2RlcyBhbmQgZ2l6bW9zIGZyb20gYnJhbmNoIGFuZCB0aGVuIHBhc3MgdGhlbSB0byBhbiBhcHByb3ByaWF0ZSBtZXRob2QgaW4gUmVuZGVyV2ViR0w/XHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBBbHNvIHtAbGluayBSZW5kZXIuxpJwaWNrZWR9IGFuZCB7QGxpbmsgUmVuZGVyLnNpemVQaWNrfSBzZWVtIHRvIG9ubHkgZXZlciBiZSB1c2VkIGluIHRoZSBtZXRob2RzIGNhbGxlZCBmcm9tIHRoaXMgbWV0aG9kLiBcclxuICAgICAgICogc2l6ZVBpY2sgZ2V0cyBzZXQgaW4gY3JlYXRlUGlja1RleHR1cmUoKSBhbmQgdXNlZCBpbiBwaWNrKCkgdmlhIHRoZSBwcm9wZXJ0eSBidXQgcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIGdldFBpY2tzKCkuXHJcbiAgICAgICAqIMaScGlja2VkIGlzIG9ubHkgdXNlZCBpbiBnZXRQaWNrcygpLCBwaWNrKCkgYW5kIHBpY2tHaXptb3MoKSBhbmQgb25seSBldmVyIHNldCB0byBhbiBlbXB0eSBhcnJheSBpbiB0aGlzIG1ldGhvZC5cclxuICAgICAgICogLT4gYm90aCBjb3VsZCBiZSBsb2NhbCB2YXJpYWJsZXMgYW5kIHBhc3NlZCBhcyBhcmd1bWVudHMgdG8gdGhlIG1ldGhvZHMgdGhhdCBuZWVkIHRoZW0uXHJcbiAgICAgICAqLyBcclxuICAgICAgUmVuZGVyLsaScGlja2VkID0gW107XHJcbiAgICAgIGxldCBzaXplOiBudW1iZXIgPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KF9ub2Rlcy5sZW5ndGggKyBSZW5kZXIuZ2l6bW9zLmxlbmd0aCkpOyAvLyBnaXptb3MubGVuZ3RoIG1pZ2h0IGJlIGJpZ2dlciB0aGFuIG5lZWRlZC4uLlxyXG4gICAgICBSZW5kZXIuY3JlYXRlUGlja1RleHR1cmUoc2l6ZSk7XHJcbiAgICAgIFJlbmRlci5zZXRCbGVuZE1vZGUoQkxFTkQuT1BBUVVFKTtcclxuXHJcbiAgICAgIGxldCBnaXptb3M6IENvbXBvbmVudFtdID0gW107XHJcblxyXG4gICAgICBmb3IgKGxldCBub2RlIG9mIF9ub2Rlcykge1xyXG4gICAgICAgIGxldCBjbXBNZXNoOiBDb21wb25lbnRNZXNoID0gbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgICAgbGV0IGNtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCA9IG5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1hdGVyaWFsKTtcclxuICAgICAgICBpZiAoY21wTWVzaCAmJiBjbXBNZXNoLmlzQWN0aXZlICYmIGNtcE1hdGVyaWFsICYmIGNtcE1hdGVyaWFsLmlzQWN0aXZlKVxyXG4gICAgICAgICAgUmVuZGVyLnBpY2sobm9kZSwgX2NtcENhbWVyYSk7XHJcblxyXG4gICAgICAgIGlmIChfcGlja0dpem1vcyAmJiBfZ2l6bW9zRmlsdGVyKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBnaXptbyBvZiBub2RlLmdldEFsbENvbXBvbmVudHMoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWdpem1vLmlzQWN0aXZlIHx8ICFfZ2l6bW9zRmlsdGVyLmdldChnaXptby50eXBlKSB8fCAhZ2l6bW8uZHJhd0dpem1vcylcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgXHJcbiAgICAgICAgICAgIGdpem1vcy5wdXNoKGdpem1vKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChfcGlja0dpem1vcylcclxuICAgICAgICBSZW5kZXIucGlja0dpem1vcyhnaXptb3MsIF9jbXBDYW1lcmEpO1xyXG5cclxuICAgICAgUmVuZGVyLnNldEJsZW5kTW9kZShCTEVORC5UUkFOU1BBUkVOVCk7XHJcblxyXG4gICAgICBsZXQgcGlja3M6IFBpY2tbXSA9IFJlbmRlci5nZXRQaWNrcyhzaXplLCBfY21wQ2FtZXJhKTtcclxuICAgICAgUmVuZGVyLnJlc2V0RnJhbWVidWZmZXIoKTtcclxuICAgICAgcmV0dXJuIHBpY2tzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIERyYXdpbmdcclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgdGhlIHNjZW5lIGZyb20gdGhlIHBvaW50IG9mIHZpZXcgb2YgdGhlIGdpdmVuIGNhbWVyYVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXcoX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IG5vZGUgb2YgUmVuZGVyLm5vZGVzQWxwaGEpXHJcbiAgICAgICAgUmVmbGVjdC5zZXQobm9kZSwgXCJ6Q2FtZXJhXCIsIF9jbXBDYW1lcmEucG9pbnRXb3JsZFRvQ2xpcChub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNZXNoKS5tdHhXb3JsZC50cmFuc2xhdGlvbikueik7XHJcblxyXG4gICAgICBjb25zdCBzb3J0ZWQ6IE5vZGVbXSA9IFJlbmRlci5ub2Rlc0FscGhhLmdldFNvcnRlZCgoX2E6IE5vZGUsIF9iOiBOb2RlKSA9PiBSZWZsZWN0LmdldChfYiwgXCJ6Q2FtZXJhXCIpIC0gUmVmbGVjdC5nZXQoX2EsIFwiekNhbWVyYVwiKSk7XHJcblxyXG4gICAgICBSZW5kZXIuZHJhd05vZGVzKFJlbmRlci5ub2Rlc1NpbXBsZSwgc29ydGVkLCBfY21wQ2FtZXJhKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBQaHlzaWNzXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0cmFuc2Zvcm1CeVBoeXNpY3MoX25vZGU6IE5vZGUsIF9jbXBSaWdpZGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keSk6IHZvaWQge1xyXG4gICAgICBpZiAoIV9jbXBSaWdpZGJvZHkuaXNJbml0aWFsaXplZCkgLy8gfHwgUHJvamVjdC5tb2RlID09IE1PREUuRURJVE9SKVxyXG4gICAgICAgIF9jbXBSaWdpZGJvZHkuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgaWYgKCFQaHlzaWNzLmdldEJvZHlMaXN0KCkubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGlmICghX25vZGUubXR4TG9jYWwpIHtcclxuICAgICAgICB0aHJvdyAobmV3IEVycm9yKFwiQ29tcG9uZW50UmlnaWRib2R5IHJlcXVpcmVzIENvbXBvbmVudFRyYW5zZm9ybSBhdCB0aGUgc2FtZSBOb2RlXCIpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gX2NtcFJpZ2lkYm9keS5jaGVja0NvbGxpc2lvbkV2ZW50cygpO1xyXG5cclxuICAgICAgaWYgKF9jbXBSaWdpZGJvZHkudHlwZUJvZHkgPT0gQk9EWV9UWVBFLktJTkVNQVRJQyB8fCBQcm9qZWN0Lm1vZGUgPT0gTU9ERS5FRElUT1IpIHsgLy9DYXNlIG9mIEtpbmVtYXRpYyBSaWdpZGJvZHlcclxuICAgICAgICBsZXQgbXR4UGl2b3RXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LlBST0RVQ1QoX25vZGUubXR4V29ybGQsIF9jbXBSaWdpZGJvZHkubXR4UGl2b3RVbnNjYWxlZCk7XHJcbiAgICAgICAgX2NtcFJpZ2lkYm9keS5zZXRQb3NpdGlvbihtdHhQaXZvdFdvcmxkLnRyYW5zbGF0aW9uKTtcclxuICAgICAgICBfY21wUmlnaWRib2R5LnNldFJvdGF0aW9uKG10eFBpdm90V29ybGQucm90YXRpb24pO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFBpdm90V29ybGQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG10eFdvcmxkOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuQ09NUE9TSVRJT04oXHJcbiAgICAgICAgX2NtcFJpZ2lkYm9keS5nZXRQb3NpdGlvbigpLCBfY21wUmlnaWRib2R5LmdldFJvdGF0aW9uKCksIG51bGwpO1xyXG4gICAgICBtdHhXb3JsZC5tdWx0aXBseShfY21wUmlnaWRib2R5Lm10eFBpdm90SW52ZXJzZSk7XHJcbiAgICAgIF9ub2RlLm10eFdvcmxkLnRyYW5zbGF0aW9uID0gbXR4V29ybGQudHJhbnNsYXRpb247XHJcbiAgICAgIF9ub2RlLm10eFdvcmxkLnJvdGF0aW9uID0gbXR4V29ybGQucm90YXRpb247XHJcbiAgICAgIGxldCBtdHhMb2NhbDogTWF0cml4NHg0ID0gX25vZGUuZ2V0UGFyZW50KCkgPyBNYXRyaXg0eDQuUkVMQVRJVkUoX25vZGUubXR4V29ybGQsIF9ub2RlLmdldFBhcmVudCgpLm10eFdvcmxkKSA6IF9ub2RlLm10eFdvcmxkO1xyXG4gICAgICBfbm9kZS5tdHhMb2NhbC5jb3B5KG10eExvY2FsKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4V29ybGQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhMb2NhbCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyQnVmZmVycyB7XHJcbiAgICB2ZXJ0aWNlcz86IFdlYkdMQnVmZmVyO1xyXG4gICAgaW5kaWNlcz86IFdlYkdMQnVmZmVyO1xyXG4gICAgdGV4dHVyZVVWcz86IFdlYkdMQnVmZmVyO1xyXG4gICAgbm9ybWFscz86IFdlYkdMQnVmZmVyO1xyXG4gICAgY29sb3JzPzogV2ViR0xCdWZmZXI7XHJcbiAgICBib25lcz86IFdlYkdMQnVmZmVyO1xyXG4gICAgdGFuZ2VudHM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIHdlaWdodHM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIG5JbmRpY2VzPzogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zZXJ0ZWQgaW50byBhIHtAbGluayBNZXNofSwgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBjYWxjdWxhdGVzIGFuZCByZXByZXNlbnRzIHRoZSBtZXNoIGRhdGEgaW4gdGhlIGZvcm0gbmVlZGVkIGJ5IHRoZSByZW5kZXIgZW5naW5lXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlck1lc2gge1xyXG4gICAgcHVibGljIGJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMgPSBudWxsO1xyXG4gICAgcHVibGljIG1lc2g6IE1lc2g7XHJcblxyXG4gICAgLyoqIHZlcnRpY2VzIG9mIHRoZSBhY3R1YWwgcG9pbnQgY2xvdWQsIHNvbWUgcG9pbnRzIG1pZ2h0IGJlIGluIHRoZSBzYW1lIGxvY2F0aW9uIGluIG9yZGVyIHRvIHJlZmVyIHRvIGRpZmZlcmVudCB0ZXhlbHMgKi9cclxuICAgICN2ZXJ0aWNlczogRmxvYXQzMkFycmF5O1xyXG4gICAgLyoqIGluZGljZXMgdG8gY3JlYXRlIGZhY2VzIGZyb20gdGhlIHZlcnRpY2VzLCByb3RhdGlvbiBkZXRlcm1pbmVzIGRpcmVjdGlvbiBvZiBmYWNlLW5vcm1hbCAqL1xyXG4gICAgI2luZGljZXM6IFVpbnQxNkFycmF5O1xyXG4gICAgLyoqIHRleHR1cmUgY29vcmRpbmF0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSB2ZXJ0aWNlcyBieSB0aGUgcG9zaXRpb24gaW4gdGhlIGFycmF5ICovXHJcbiAgICAjdGV4dHVyZVVWczogRmxvYXQzMkFycmF5O1xyXG4gICAgLyoqIHZlcnRleCBub3JtYWxzIGZvciBzbW9vdGggc2hhZGluZywgaW50ZXJwb2xhdGVkIGJldHdlZW4gdmVydGljZXMgZHVyaW5nIHJlbmRlcmluZyAqL1xyXG4gICAgI25vcm1hbHM6IEZsb2F0MzJBcnJheTtcclxuICAgIC8qIGNvbG9ycyAqL1xyXG4gICAgI2NvbG9yczogRmxvYXQzMkFycmF5O1xyXG4gICAgLyoqIHZlcnRleCB0YW5nZW50cyBmb3Igbm9ybWFsIG1hcHBpbmcsIGJhc2VkIG9uIHRoZSB2ZXJ0ZXggbm9ybWFscyBhbmQgdGhlIFVWIGNvb3JkaW5hdGVzICovXHJcbiAgICAjdGFuZ2VudHM6IEZsb2F0MzJBcnJheTtcclxuICAgIC8qKiBib25lcyAqL1xyXG4gICAgI2JvbmVzOiBVaW50OEFycmF5O1xyXG4gICAgI3dlaWdodHM6IEZsb2F0MzJBcnJheTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX21lc2g6IE1lc2gpIHtcclxuICAgICAgdGhpcy5tZXNoID0gX21lc2g7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB2ZXJ0aWNlcygpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdmVydGljZXMgfHwgKCAvLyByZXR1cm4gY2FjaGUgb3IgLi4uXHJcbiAgICAgICAgLy8gLi4uIGZsYXR0ZW4gYWxsIHZlcnRleCBwb3NpdGlvbnMgZnJvbSBjbG91ZCBpbnRvIGEgdHlwZWQgYXJyYXlcclxuICAgICAgICB0aGlzLiN2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5tZXNoLnZlcnRpY2VzLmZsYXRNYXAoKF92ZXJ0ZXg6IFZlcnRleCwgX2luZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgIHJldHVybiBbLi4udGhpcy5tZXNoLnZlcnRpY2VzLnBvc2l0aW9uKF9pbmRleCkuZ2V0KCldO1xyXG4gICAgICAgIH0pKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHZlcnRpY2VzKF92ZXJ0aWNlczogRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgIHRoaXMuI3ZlcnRpY2VzID0gX3ZlcnRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaW5kaWNlcygpOiBVaW50MTZBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNpbmRpY2VzIHx8ICggLy8gcmV0dXJuIGNhY2hlIG9yIC4uLlxyXG4gICAgICAgIC8vIC4uLiBmbGF0dGVuIGFsbCBpbmRpY2VzIGZyb20gdGhlIGZhY2VzIGludG8gYSB0eXBlZCBhcnJheVxyXG4gICAgICAgIHRoaXMuI2luZGljZXMgPSBuZXcgVWludDE2QXJyYXkodGhpcy5tZXNoLmZhY2VzLmZsYXRNYXAoKF9mYWNlOiBGYWNlKSA9PiBbLi4uX2ZhY2UuaW5kaWNlc10pXHJcbiAgICAgICAgKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGluZGljZXMoX2luZGljZXM6IFVpbnQxNkFycmF5KSB7XHJcbiAgICAgIHRoaXMuI2luZGljZXMgPSBfaW5kaWNlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IG5vcm1hbHMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgaWYgKHRoaXMuI25vcm1hbHMgPT0gbnVsbCkge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBpbXBsZW1lbnQgYSBjaGVjayBzaW1pbGlhciB0byB0aGUgb25lIGZvciB0YW5nZW50cyBiZWxvdywgdG8gc2VlIGlmIG5vcm1hbHMgYXJlIGFscmVhZHkgcHJlc2VudCBpbiB0aGUgdmVydGljZXNcclxuXHJcbiAgICAgICAgLy8gc3VtIHVwIGFsbCB1bnNjYWxlZCBub3JtYWxzIG9mIGZhY2VzIGNvbm5lY3RlZCB0byBvbmUgdmVydGV4LCB3ZWlnaHRlZCBieSB0aGUgYW5nbGUgYmV0d2VlbiB0aGUgdHdvIG5laWdoYm91ciB2ZXJ0aWNlcy4uLlxyXG4gICAgICAgIHRoaXMubWVzaC52ZXJ0aWNlcy5mb3JFYWNoKF92ZXJ0ZXggPT4gX3ZlcnRleC5ub3JtYWwuc2V0KDAsIDAsIDApKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZmFjZSBvZiB0aGlzLm1lc2guZmFjZXMpXHJcbiAgICAgICAgICBmYWNlLmluZGljZXMuZm9yRWFjaCgoX2lWZXJ0ZXgsIF9pRmFjZVZlcnRleCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1lc2gudmVydGljZXMubm9ybWFsKF9pVmVydGV4KS5hZGQoVmVjdG9yMy5TQ0FMRShmYWNlLm5vcm1hbFVuc2NhbGVkLCBmYWNlLmFuZ2xlc1tfaUZhY2VWZXJ0ZXhdKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAvLyAuLi4gYW5kIG5vcm1hbGl6ZSB0aGVtXHJcbiAgICAgICAgdGhpcy5tZXNoLnZlcnRpY2VzLmZvckVhY2goX3ZlcnRleCA9PiB7XHJcbiAgICAgICAgICAvLyBzb21lIHZlcnRpY2VzIG1pZ2h0IGJlIHVudXNlZCBhbmQgeWllbGQgYSB6ZXJvLW5vcm1hbC4uLlxyXG4gICAgICAgICAgaWYgKF92ZXJ0ZXgubm9ybWFsLm1hZ25pdHVkZVNxdWFyZWQgPiAwKVxyXG4gICAgICAgICAgICBfdmVydGV4Lm5vcm1hbC5ub3JtYWxpemUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy7Gkm5vcm1hbHNWZXJ0ZXggPSBuZXcgRmxvYXQzMkFycmF5KG5vcm1hbHNWZXJ0ZXguZmxhdE1hcCgoX25vcm1hbDogVmVjdG9yMykgPT4gWy4uLl9ub3JtYWwuZ2V0KCldKSk7XHJcblxyXG4gICAgICAgIHRoaXMuI25vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KFxyXG4gICAgICAgICAgdGhpcy5tZXNoLnZlcnRpY2VzLmZsYXRNYXAoKF92ZXJ0ZXgsIF9pbmRleCkgPT4gWy4uLnRoaXMubWVzaC52ZXJ0aWNlcy5ub3JtYWwoX2luZGV4KS5nZXQoKV0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuI25vcm1hbHM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IG5vcm1hbHMoX25vcm1hbHM6IEZsb2F0MzJBcnJheSkge1xyXG4gICAgICB0aGlzLiNub3JtYWxzID0gX25vcm1hbHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0YW5nZW50cygpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICBpZiAodGhpcy4jdGFuZ2VudHMgPT0gbnVsbCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZXNoLnZlcnRpY2VzLnNvbWUoX3ZlcnRleCA9PiAhX3ZlcnRleC51dikpIHsgLy8gYXNzdW1lIGFsbCB2ZXJ0aWNlcyBoYXZlIHRleHR1cmUgY29vcmRpbmF0ZXMgb3Igbm9uZVxyXG4gICAgICAgICAgdGhpcy4jdGFuZ2VudHMgPSBuZXcgRmxvYXQzMkFycmF5KCk7IC8vIG5vIHRleHR1cmUgY29vcmRpbmF0ZXMsIG5vIHRhbmdlbnRzXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy4jdGFuZ2VudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tZXNoLnZlcnRpY2VzLnNvbWUoX3ZlcnRleCA9PiAhX3ZlcnRleC50YW5nZW50KSkgeyAvLyBhc3N1bWUgYWxsIHZlcnRpY2VzIGhhdmUgdGFuZ2VudHMgb3Igbm9uZVxyXG4gICAgICAgICAgY29uc3QgdGFuZ2VudHM6IFZlY3RvcjNbXSA9IG5ldyBBcnJheSh0aGlzLm1lc2gudmVydGljZXMubGVuZ3RoKTtcclxuICAgICAgICAgIGNvbnN0IGJpdGFuZ2VudHM6IFZlY3RvcjNbXSA9IG5ldyBBcnJheSh0aGlzLm1lc2gudmVydGljZXMubGVuZ3RoKTtcclxuICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0YW5nZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0YW5nZW50c1tpXSA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgICAgICAgICBiaXRhbmdlbnRzW2ldID0gVmVjdG9yMy5aRVJPKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gdGhpcy5tZXNoLnZlcnRpY2VzLmZvckVhY2goX3ZlcnRleCA9PiBfdmVydGV4LnRhbmdlbnQuc2V0KDAsIDAsIDApKTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBmYWNlIG9mIHRoaXMubWVzaC5mYWNlcykge1xyXG4gICAgICAgICAgICBsZXQgaTA6IG51bWJlciA9IGZhY2UuaW5kaWNlc1swXTtcclxuICAgICAgICAgICAgbGV0IGkxOiBudW1iZXIgPSBmYWNlLmluZGljZXNbMV07XHJcbiAgICAgICAgICAgIGxldCBpMjogbnVtYmVyID0gZmFjZS5pbmRpY2VzWzJdO1xyXG5cclxuICAgICAgICAgICAgLy92ZXJ0aWNlcyBzdXJyb3VuZGluZyBvbmUgdHJpYW5nbGVcclxuICAgICAgICAgICAgbGV0IHYwOiBWZWN0b3IzID0gdGhpcy5tZXNoLnZlcnRpY2VzLnBvc2l0aW9uKGkwKTtcclxuICAgICAgICAgICAgbGV0IHYxOiBWZWN0b3IzID0gdGhpcy5tZXNoLnZlcnRpY2VzLnBvc2l0aW9uKGkxKTtcclxuICAgICAgICAgICAgbGV0IHYyOiBWZWN0b3IzID0gdGhpcy5tZXNoLnZlcnRpY2VzLnBvc2l0aW9uKGkyKTtcclxuXHJcbiAgICAgICAgICAgIC8vdGhlaXIgVVZzXHJcbiAgICAgICAgICAgIGxldCB1djA6IFZlY3RvcjIgPSB0aGlzLm1lc2gudmVydGljZXMudXYoaTApO1xyXG4gICAgICAgICAgICBsZXQgdXYxOiBWZWN0b3IyID0gdGhpcy5tZXNoLnZlcnRpY2VzLnV2KGkxKTtcclxuICAgICAgICAgICAgbGV0IHV2MjogVmVjdG9yMiA9IHRoaXMubWVzaC52ZXJ0aWNlcy51dihpMik7XHJcblxyXG4gICAgICAgICAgICAvL1dlIGNvbXB1dGUgdGhlIGVkZ2VzIG9mIHRoZSB0cmlhbmdsZS4uLlxyXG4gICAgICAgICAgICBsZXQgZGVsdGFQb3MwOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKHYxLCB2MCk7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YVBvczE6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UodjIsIHYwKTtcclxuXHJcbiAgICAgICAgICAgIC8vLi4uYW5kIHRoZSBlZGdlcyBvZiB0aGUgdHJpYW5nbGVzIGluIFVWIHNwYWNlLi4uXHJcbiAgICAgICAgICAgIGxldCBkZWx0YVVWMDogVmVjdG9yMiA9IFZlY3RvcjIuRElGRkVSRU5DRSh1djEsIHV2MCk7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YVVWMTogVmVjdG9yMiA9IFZlY3RvcjIuRElGRkVSRU5DRSh1djIsIHV2MCk7XHJcblxyXG4gICAgICAgICAgICAvLy4uLmFuZCBjb21wdXRlIHRoZSB0YW5nZW50XHJcbiAgICAgICAgICAgIGxldCByOiBudW1iZXIgPSAxIC8gVmVjdG9yMi5DUk9TUyhkZWx0YVVWMCwgZGVsdGFVVjEpO1xyXG4gICAgICAgICAgICBsZXQgZmFjZVRhbmdlbnQ6IFZlY3RvcjMgPSBWZWN0b3IzLlNDQUxFKFZlY3RvcjMuRElGRkVSRU5DRShWZWN0b3IzLlNDQUxFKGRlbHRhUG9zMCwgZGVsdGFVVjEueSksIFZlY3RvcjMuU0NBTEUoZGVsdGFQb3MxLCBkZWx0YVVWMC55KSksIHIpO1xyXG4gICAgICAgICAgICBsZXQgZmFjZUJpdGFuZ2VudDogVmVjdG9yMyA9IFZlY3RvcjMuU0NBTEUoVmVjdG9yMy5ESUZGRVJFTkNFKFZlY3RvcjMuU0NBTEUoZGVsdGFQb3MxLCAtZGVsdGFVVjAueCksIFZlY3RvcjMuU0NBTEUoZGVsdGFQb3MwLCAtZGVsdGFVVjEueCkpLCByKTsgLy8gZm9yIHdpbmRpbmcgb3JkZXIgY291bnRlciBjbG9ja3dpc2VcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRhbmdlbnRzW2kwXS5hZGQoVmVjdG9yMy5TQ0FMRShmYWNlVGFuZ2VudCwgZmFjZS5hbmdsZXNbMF0pKTtcclxuICAgICAgICAgICAgdGFuZ2VudHNbaTFdLmFkZChWZWN0b3IzLlNDQUxFKGZhY2VUYW5nZW50LCBmYWNlLmFuZ2xlc1sxXSkpO1xyXG4gICAgICAgICAgICB0YW5nZW50c1tpMl0uYWRkKFZlY3RvcjMuU0NBTEUoZmFjZVRhbmdlbnQsIGZhY2UuYW5nbGVzWzJdKSk7XHJcblxyXG4gICAgICAgICAgICBiaXRhbmdlbnRzW2kwXS5hZGQoVmVjdG9yMy5TQ0FMRShmYWNlQml0YW5nZW50LCBmYWNlLmFuZ2xlc1swXSkpO1xyXG4gICAgICAgICAgICBiaXRhbmdlbnRzW2kxXS5hZGQoVmVjdG9yMy5TQ0FMRShmYWNlQml0YW5nZW50LCBmYWNlLmFuZ2xlc1sxXSkpO1xyXG4gICAgICAgICAgICBiaXRhbmdlbnRzW2kyXS5hZGQoVmVjdG9yMy5TQ0FMRShmYWNlQml0YW5nZW50LCBmYWNlLmFuZ2xlc1syXSkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMubWVzaC52ZXJ0aWNlcy5mb3JFYWNoKChfdmVydGV4LCBfaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgbGV0IG5vcm1hbDogVmVjdG9yMyA9IHRoaXMubWVzaC52ZXJ0aWNlcy5ub3JtYWwoX2luZGV4KTtcclxuICAgICAgICAgICAgbGV0IHRhbmdlbnQ6IFZlY3RvcjMgPSB0YW5nZW50c1tfaW5kZXhdO1xyXG4gICAgICAgICAgICBsZXQgYml0YW5nZW50OiBWZWN0b3IzID0gYml0YW5nZW50c1tfaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVvcnRob2dvbmFsaXplXHJcbiAgICAgICAgICAgIHRhbmdlbnQuYWRkKFZlY3RvcjMuU0NBTEUobm9ybWFsLCAtIFZlY3RvcjMuRE9UKG5vcm1hbCwgdGFuZ2VudCkpKTtcclxuICAgICAgICAgICAgaWYgKHRhbmdlbnQubWFnbml0dWRlU3F1YXJlZCA+IDApIC8vIHNvbWUgdmVydGljZXMgbWlnaHQgYmUgdW51c2VkIGFuZCB5aWVsZCBhIHplcm8tdGFuZ2VudC4uLlxyXG4gICAgICAgICAgICAgIHRhbmdlbnQubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaGFuZGVkbmVzczogbnVtYmVyID0gKFZlY3RvcjMuRE9UKFZlY3RvcjMuQ1JPU1Mobm9ybWFsLCB0YW5nZW50KSwgYml0YW5nZW50KSA8IDApID8gLTEgOiAxO1xyXG5cclxuICAgICAgICAgICAgX3ZlcnRleC50YW5nZW50ID0gbmV3IFZlY3RvcjQodGFuZ2VudC54LCB0YW5nZW50LnksIHRhbmdlbnQueiwgaGFuZGVkbmVzcyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI3RhbmdlbnRzID0gbmV3IEZsb2F0MzJBcnJheShcclxuICAgICAgICAgIHRoaXMubWVzaC52ZXJ0aWNlcy5mbGF0TWFwKF92ZXJ0ZXggPT4gX3ZlcnRleC50YW5nZW50LmdldCgpKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLiN0YW5nZW50cztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgdGFuZ2VudHMoX3RhbmdlbnRzOiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgdGhpcy4jdGFuZ2VudHMgPSBfdGFuZ2VudHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0ZXh0dXJlVVZzKCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN0ZXh0dXJlVVZzIHx8ICggLy8gcmV0dXJuIGNhY2hlIG9yIC4uLlxyXG4gICAgICAgIC8vIC4uLiBmbGF0dGVuIGFsbCB1dnMgZnJvbSB0aGUgY2xvdXMgaW50byBhIHR5cGVkIGFycmF5XHJcbiAgICAgICAgdGhpcy4jdGV4dHVyZVVWcyA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5tZXNoLnZlcnRpY2VzXHJcbiAgICAgICAgICAuZmlsdGVyKF92ZXJ0ZXggPT4gX3ZlcnRleC51dilcclxuICAgICAgICAgIC5mbGF0TWFwKChfdmVydGV4OiBWZXJ0ZXgpID0+IFsuLi5fdmVydGV4LnV2LmdldCgpXSlcclxuICAgICAgICApKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgdGV4dHVyZVVWcyhfdGV4dHVyZVVWczogRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgIHRoaXMuI3RleHR1cmVVVnMgPSBfdGV4dHVyZVVWcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNvbG9ycygpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gdGhpcy4jY29sb3JzIHx8IChcclxuICAgICAgICB0aGlzLiNjb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMubWVzaC52ZXJ0aWNlc1xyXG4gICAgICAgICAgLmZpbHRlcihfdmVydGV4ID0+IF92ZXJ0ZXguY29sb3IpXHJcbiAgICAgICAgICAuZmxhdE1hcChfdmVydGV4ID0+IFsuLi5fdmVydGV4LmNvbG9yLmdldCgpXSlcclxuICAgICAgICApKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgY29sb3JzKF9jb2xvcnM6IEZsb2F0MzJBcnJheSkge1xyXG4gICAgICB0aGlzLiNjb2xvcnMgPSBfY29sb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgYm9uZXMoKTogVWludDhBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNib25lcyB8fCAoIC8vIHJldHVybiBjYWNoZSBvciAuLi5cclxuICAgICAgICB0aGlzLiNib25lcyA9IHRoaXMubWVzaC52ZXJ0aWNlcy5zb21lKF92ZXJ0ZXggPT4gX3ZlcnRleC5ib25lcykgP1xyXG4gICAgICAgICAgbmV3IFVpbnQ4QXJyYXkodGhpcy5tZXNoLnZlcnRpY2VzLmZsYXRNYXAoKF92ZXJ0ZXg6IFZlcnRleCwgX2luZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9uZXM6IEJvbmVbXSA9IHRoaXMubWVzaC52ZXJ0aWNlcy5ib25lcyhfaW5kZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gW2JvbmVzPy5bMF0/LmluZGV4IHx8IDAsIGJvbmVzPy5bMV0/LmluZGV4IHx8IDAsIGJvbmVzPy5bMl0/LmluZGV4IHx8IDAsIGJvbmVzPy5bM10/LmluZGV4IHx8IDBdO1xyXG4gICAgICAgICAgfSkpIDpcclxuICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBib25lcyhfaUJvbmVzOiBVaW50OEFycmF5KSB7XHJcbiAgICAgIHRoaXMuI2JvbmVzID0gX2lCb25lcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHdlaWdodHMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3dlaWdodHMgfHwgKCAvLyByZXR1cm4gY2FjaGUgb3IgLi4uXHJcbiAgICAgICAgdGhpcy4jd2VpZ2h0cyA9IHRoaXMubWVzaC52ZXJ0aWNlcy5zb21lKF92ZXJ0ZXggPT4gX3ZlcnRleC5ib25lcykgP1xyXG4gICAgICAgICAgbmV3IEZsb2F0MzJBcnJheSh0aGlzLm1lc2gudmVydGljZXMuZmxhdE1hcCgoX3ZlcnRleDogVmVydGV4LCBfaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBib25lczogQm9uZVtdID0gdGhpcy5tZXNoLnZlcnRpY2VzLmJvbmVzKF9pbmRleCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbYm9uZXM/LlswXT8ud2VpZ2h0IHx8IDAsIGJvbmVzPy5bMV0/LndlaWdodCB8fCAwLCBib25lcz8uWzJdPy53ZWlnaHQgfHwgMCwgYm9uZXM/LlszXT8ud2VpZ2h0IHx8IDBdO1xyXG4gICAgICAgICAgfSkpIDpcclxuICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCB3ZWlnaHRzKF93ZWlnaHRzOiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgdGhpcy4jd2VpZ2h0cyA9IF93ZWlnaHRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoaXMgcmVuZGVyIG1lc2ggYW5kIGFsbCBpdHMgYnVmZmVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuYnVmZmVycyA9IG51bGw7XHJcblxyXG4gICAgICB0aGlzLiN2ZXJ0aWNlcyA9IG51bGw7XHJcbiAgICAgIHRoaXMuI2luZGljZXMgPSBudWxsO1xyXG4gICAgICB0aGlzLiN0ZXh0dXJlVVZzID0gbnVsbDtcclxuICAgICAgdGhpcy4jbm9ybWFscyA9IG51bGw7XHJcbiAgICAgIHRoaXMuI2NvbG9ycyA9IG51bGw7XHJcbiAgICAgIHRoaXMuI3RhbmdlbnRzID0gbnVsbDtcclxuXHJcbiAgICAgIHRoaXMuI2JvbmVzID0gbnVsbDtcclxuICAgICAgdGhpcy4jd2VpZ2h0cyA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQ29udHJvbHMgdGhlIHJlbmRlcmluZyBvZiBhIGJyYW5jaCwgdXNpbmcgdGhlIGdpdmVuIHtAbGluayBDb21wb25lbnRDYW1lcmF9LFxyXG4gICAqIGFuZCB0aGUgcHJvcGFnYXRpb24gb2YgdGhlIHJlbmRlcmVkIGltYWdlIGZyb20gdGhlIG9mZnNjcmVlbiByZW5kZXJidWZmZXIgdG8gdGhlIHRhcmdldCBjYW52YXNcclxuICAgKiB0aHJvdWdoIGEgc2VyaWVzIG9mIHtAbGluayBGcmFtaW5nfSBvYmplY3RzLiBUaGUgc3RhZ2VzIGludm9sdmVkIGFyZSBpbiBvcmRlciBvZiByZW5kZXJpbmdcclxuICAgKiB7QGxpbmsgUmVuZGVyfS52aWV3cG9ydCAtPiB7QGxpbmsgVmlld3BvcnR9LnNvdXJjZSAtPiB7QGxpbmsgVmlld3BvcnR9LmRlc3RpbmF0aW9uIC0+IERPTS1DYW52YXMgLT4gQ2xpZW50KENTUylcclxuICAgKiBAYXV0aG9ycyBKYXNjaGEgS2FyYWfDtmwsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5LTIwMjIgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vaHMtZnVydHdhbmdlbi9GVURHRS93aWtpL1ZpZXdwb3J0XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFZpZXdwb3J0IGV4dGVuZHMgRXZlbnRUYXJnZXRVbmlmaWVkIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGZvY3VzOiBWaWV3cG9ydDtcclxuXHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJWaWV3cG9ydFwiOyAvLyBUaGUgbmFtZSB0byBjYWxsIHRoaXMgdmlld3BvcnQgYnkuXHJcbiAgICBwdWJsaWMgY2FtZXJhOiBDb21wb25lbnRDYW1lcmEgPSBudWxsOyAvLyBUaGUgY2FtZXJhIHJlcHJlc2VudGluZyB0aGUgdmlldyBwYXJhbWV0ZXJzIHRvIHJlbmRlciB0aGUgYnJhbmNoLlxyXG4gICAgcHVibGljIHJlY3RTb3VyY2U6IFJlY3RhbmdsZTtcclxuICAgIHB1YmxpYyByZWN0RGVzdGluYXRpb246IFJlY3RhbmdsZTtcclxuXHJcbiAgICAvLyBUT0RPOiB2ZXJpZnkgaWYgY2xpZW50IHRvIGNhbnZhcyBzaG91bGQgYmUgaW4gVmlld3BvcnQgb3Igc29tZXdoZXJlIGVsc2UgKFdpbmRvdywgQ29udGFpbmVyPylcclxuICAgIC8vIE11bHRpcGxlIHZpZXdwb3J0cyB1c2luZyB0aGUgc2FtZSBjYW52YXMgc2hvdWxkbid0IGRpZmZlciBoZXJlLi4uXHJcbiAgICAvLyBkaWZmZXJlbnQgZnJhbWluZyBtZXRob2RzIGNhbiBiZSB1c2VkLCB0aGlzIGlzIHRoZSBkZWZhdWx0XHJcbiAgICBwdWJsaWMgZnJhbWVDbGllbnRUb0NhbnZhczogRnJhbWluZ1NjYWxlZCA9IG5ldyBGcmFtaW5nU2NhbGVkKCk7XHJcbiAgICBwdWJsaWMgZnJhbWVDYW52YXNUb0Rlc3RpbmF0aW9uOiBGcmFtaW5nQ29tcGxleCA9IG5ldyBGcmFtaW5nQ29tcGxleCgpO1xyXG4gICAgcHVibGljIGZyYW1lRGVzdGluYXRpb25Ub1NvdXJjZTogRnJhbWluZ1NjYWxlZCA9IG5ldyBGcmFtaW5nU2NhbGVkKCk7XHJcbiAgICBwdWJsaWMgZnJhbWVTb3VyY2VUb1JlbmRlcjogRnJhbWluZ1NjYWxlZCA9IG5ldyBGcmFtaW5nU2NhbGVkKCk7XHJcblxyXG4gICAgcHVibGljIGFkanVzdGluZ0ZyYW1lczogYm9vbGVhbiA9IHRydWU7IC8vIFRPRE86IG1heWJlIG9ubHkgYWRqdXN0IGZyYW1lcyB3aGVuIGFueXRoaW5nIGNoYW5nZXMgaW5zdGVhZCBvZiBldmVyeSBkcmF3biBmcmFtZT9cclxuICAgIHB1YmxpYyBhZGp1c3RpbmdDYW1lcmE6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHVibGljIHBoeXNpY3NEZWJ1Z01vZGU6IFBIWVNJQ1NfREVCVUdNT0RFID0gUEhZU0lDU19ERUJVR01PREUuTk9ORTtcclxuXHJcbiAgICBwdWJsaWMgZ2l6bW9zRW5hYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHVibGljIGdpem1vc1NlbGVjdGVkOiBOb2RlW107XHJcbiAgICBwdWJsaWMgZ2l6bW9zRmlsdGVyOiBNYXA8c3RyaW5nLCBib29sZWFuPiA9IG5ldyBNYXAoQ29tcG9uZW50LnN1YmNsYXNzZXMgLy8gVE9ETzogbWF5YmUgbWFrZSB0aGlzIGxhenlcclxuICAgICAgLmZpbHRlcigoX2NsYXNzOiB0eXBlb2YgQ29tcG9uZW50KSA9PiAoX2NsYXNzLnByb3RvdHlwZSkuZHJhd0dpem1vcyB8fCAoX2NsYXNzLnByb3RvdHlwZSkuZHJhd0dpem1vc1NlbGVjdGVkKVxyXG4gICAgICAubWFwKChfY2xhc3M6IHR5cGVvZiBDb21wb25lbnQpID0+IFtfY2xhc3MubmFtZSwgdHJ1ZV0pXHJcbiAgICApO1xyXG5cclxuICAgIHB1YmxpYyBjb21wb25lbnRzUGljazogUmVjeWNhYmxlQXJyYXk8Q29tcG9uZW50UGljaz4gPSBuZXcgUmVjeWNhYmxlQXJyYXkoKTtcclxuXHJcbiAgICAjYnJhbmNoOiBOb2RlID0gbnVsbDsgLy8gVGhlIHRvIHJlbmRlciB3aXRoIGFsbCBpdHMgZGVzY2VuZGFudHMuXHJcbiAgICAjY3JjMjogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gbnVsbDtcclxuICAgICNjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gbnVsbDtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vICNyZWdpb24gRXZlbnRzIChwYXNzaW5nIGZyb20gY2FudmFzIHRvIHZpZXdwb3J0IGFuZCBmcm9tIHRoZXJlIGludG8gYnJhbmNoKVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyB2aWV3cG9ydCBjdXJyZW50bHkgaGFzIGZvY3VzIGFuZCB0aHVzIHJlY2VpdmVzIGtleWJvYXJkIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGhhc0ZvY3VzKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKFZpZXdwb3J0LmZvY3VzID09IHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGRlc3RpbmF0aW9uIGNhbnZhc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjYW52YXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSAyRC1jb250ZXh0IGF0dGFjaGVkIHRvIHRoZSBkZXN0aW5hdGlvbiBjYW52YXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjcmMyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ubmVjdHMgdGhlIHZpZXdwb3J0IHRvIHRoZSBnaXZlbiBjYW52YXMgdG8gcmVuZGVyIHRoZSBnaXZlbiBicmFuY2ggdG8gdXNpbmcgdGhlIGdpdmVuIGNhbWVyYS1jb21wb25lbnQsIGFuZCBuYW1lcyB0aGUgdmlld3BvcnQgYXMgZ2l2ZW4uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKF9uYW1lOiBzdHJpbmcsIF9icmFuY2g6IE5vZGUsIF9jYW1lcmE6IENvbXBvbmVudENhbWVyYSwgX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuY2FtZXJhID0gX2NhbWVyYTtcclxuICAgICAgdGhpcy4jY2FudmFzID0gX2NhbnZhcztcclxuICAgICAgdGhpcy4jY3JjMiA9IF9jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICB0aGlzLiNjYW52YXMudGFiSW5kZXggPSAwOyAvLyBjYW4gZ2V0IGZvY3VzIGFuZCByZWNlaXZlIGtleWJvYXJkIGV2ZW50c1xyXG5cclxuICAgICAgdGhpcy5yZWN0U291cmNlID0gUmVuZGVyLmdldENhbnZhc1JlY3QoKTtcclxuICAgICAgdGhpcy5yZWN0RGVzdGluYXRpb24gPSB0aGlzLmdldENsaWVudFJlY3RhbmdsZSgpO1xyXG5cclxuICAgICAgdGhpcy5zZXRCcmFuY2goX2JyYW5jaCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBkZXN0aW5hdGlvbiBjYW52YXMgYXMgYSByZWN0YW5nbGUsIHggYW5kIHkgYXJlIGFsd2F5cyAwIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2FudmFzUmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIHJldHVybiBSZWN0YW5nbGUuR0VUKDAsIDAsIHRoaXMuI2NhbnZhcy53aWR0aCwgdGhpcy4jY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjbGllbnQgcmVjdGFuZ2xlIHRoZSBjYW52YXMgaXMgZGlzcGxheWVkIGFuZCBmaXQgaW4sIHggYW5kIHkgYXJlIGFsd2F5cyAwIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2xpZW50UmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIC8vIEZVREdFIGRvZXNuJ3QgY2FyZSBhYm91dCB3aGVyZSB0aGUgY2xpZW50IHJlY3QgaXMsIG9ubHkgYWJvdXQgdGhlIHNpemUgbWF0dGVycy5cclxuICAgICAgLy8gcmV0dXJuIFJlY3RhbmdsZS5HRVQodGhpcy5jYW52YXMub2Zmc2V0TGVmdCwgdGhpcy5jYW52YXMub2Zmc2V0VG9wLCB0aGlzLmNhbnZhcy5jbGllbnRXaWR0aCwgdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0KTtcclxuICAgICAgcmV0dXJuIFJlY3RhbmdsZS5HRVQoMCwgMCwgdGhpcy4jY2FudmFzLmNsaWVudFdpZHRoLCB0aGlzLiNjYW52YXMuY2xpZW50SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgYnJhbmNoIHRvIGJlIGRyYXduIGluIHRoZSB2aWV3cG9ydC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEJyYW5jaChfYnJhbmNoOiBOb2RlKTogdm9pZCB7XHJcbiAgICAgIGlmIChfYnJhbmNoKSB7XHJcbiAgICAgICAgX2JyYW5jaC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlQuQVRUQUNIX0JSQU5DSCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuI2JyYW5jaCA9IF9icmFuY2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgYnJhbmNoIHRoaXMgdmlld3BvcnQgcmVuZGVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QnJhbmNoKCk6IE5vZGUge1xyXG4gICAgICByZXR1cm4gdGhpcy4jYnJhbmNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICNyZWdpb24gRHJhd2luZ1xyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3IHRoaXMgdmlld3BvcnQgZGlzcGxheWluZyBpdHMgYnJhbmNoLiBCeSBkZWZhdWx0LCB0aGUgdHJhbnNmb3JtcyBpbiB0aGUgYnJhbmNoIGFyZSByZWNhbGN1bGF0ZWQgZmlyc3QuXHJcbiAgICAgKiBQYXNzIGBmYWxzZWAgaWYgY2FsY3VsYXRpb24gd2FzIGFscmVhZHkgZG9uZSBmb3IgdGhpcyBmcmFtZSBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYXcoX3ByZXBhcmVCcmFuY2g6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucHJlcGFyZShfcHJlcGFyZUJyYW5jaCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5waHlzaWNzRGVidWdNb2RlICE9IFBIWVNJQ1NfREVCVUdNT0RFLlBIWVNJQ19PQkpFQ1RTX09OTFkpIHtcclxuICAgICAgICBSZW5kZXIuZHJhdyh0aGlzLmNhbWVyYSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdpem1vc0VuYWJsZWQpXHJcbiAgICAgICAgICBHaXptb3MuZHJhdyh0aGlzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucGh5c2ljc0RlYnVnTW9kZSAhPSBQSFlTSUNTX0RFQlVHTU9ERS5OT05FKSB7XHJcbiAgICAgICAgUGh5c2ljcy5kcmF3KHRoaXMuY2FtZXJhLCB0aGlzLnBoeXNpY3NEZWJ1Z01vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULlJFTkRFUl9FTkQpKTtcclxuXHJcbiAgICAgIHRoaXMuI2NyYzIuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuI2NyYzIuZHJhd0ltYWdlKFxyXG4gICAgICAgIFJlbmRlci5nZXRDYW52YXMoKSxcclxuICAgICAgICB0aGlzLnJlY3RTb3VyY2UueCwgdGhpcy5yZWN0U291cmNlLnksIHRoaXMucmVjdFNvdXJjZS53aWR0aCwgdGhpcy5yZWN0U291cmNlLmhlaWdodCxcclxuICAgICAgICB0aGlzLnJlY3REZXN0aW5hdGlvbi54LCB0aGlzLnJlY3REZXN0aW5hdGlvbi55LCB0aGlzLnJlY3REZXN0aW5hdGlvbi53aWR0aCwgdGhpcy5yZWN0RGVzdGluYXRpb24uaGVpZ2h0XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFkanVzdHMgYWxsIGZyYW1lcyBhbmQgdGhlIGNhbWVyYSB0byBmaXQgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgY2FudmFzLiBQcmVwYXJlcyB0aGUgYnJhbmNoIGZvciByZW5kZXJpbmcuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHByZXBhcmUoX3ByZXBhcmVCcmFuY2g6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy4jYnJhbmNoKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgaWYgKCF0aGlzLmNhbWVyYS5pc0FjdGl2ZSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBpZiAodGhpcy5hZGp1c3RpbmdGcmFtZXMpXHJcbiAgICAgICAgdGhpcy5hZGp1c3RGcmFtZXMoKTtcclxuICAgICAgaWYgKHRoaXMuYWRqdXN0aW5nQ2FtZXJhKVxyXG4gICAgICAgIHRoaXMuYWRqdXN0Q2FtZXJhKCk7XHJcbiAgICAgIGlmIChfcHJlcGFyZUJyYW5jaClcclxuICAgICAgICB0aGlzLnByZXBhcmVCcmFuY2goKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByZXBhcmVzIGFsbCBub2RlcyBpbiB0aGUgYnJhbmNoIGZvciByZW5kZXJpbmcgYnkgdXBkYXRpbmcgdGhlaXIgd29ybGQgdHJhbnNmb3JtcyBldGMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwcmVwYXJlQnJhbmNoKCk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4Um9vdDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcbiAgICAgIGlmICh0aGlzLiNicmFuY2guZ2V0UGFyZW50KCkpXHJcbiAgICAgICAgbXR4Um9vdCA9IHRoaXMuI2JyYW5jaC5nZXRQYXJlbnQoKS5tdHhXb3JsZDtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5SRU5ERVJfUFJFUEFSRV9TVEFSVCkpO1xyXG4gICAgICBSZW5kZXIucHJlcGFyZSh0aGlzLiNicmFuY2gsIHsgZ2l6bW9zRW5hYmxlZDogdGhpcy5naXptb3NFbmFibGVkLCBnaXptb3NGaWx0ZXI6IHRoaXMuZ2l6bW9zRmlsdGVyIH0sIG10eFJvb3QpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULlJFTkRFUl9QUkVQQVJFX0VORCkpO1xyXG4gICAgICB0aGlzLmNvbXBvbmVudHNQaWNrID0gUmVuZGVyLmNvbXBvbmVudHNQaWNrO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgYSBwaWNrIG9uIGFsbCB7QGxpbmsgQ29tcG9uZW50UGlja31zIGluIHRoZSBicmFuY2ggb2YgdGhpcyB2aWV3cG9ydFxyXG4gICAgICogdXNpbmcgYSByYXkgZnJvbSBpdHMgY2FtZXJhIHRocm91Z2ggdGhlIGNsaWVudCBjb29yZGluYXRlcyBnaXZlbiBpbiB0aGUgZXZlbnQuXHJcbiAgICAgKiBEaXNwYXRjaGVzIHRoZSBldmVudCB0byBhbGwgbm9kZXMgaGl0LiAgXHJcbiAgICAgKiBJZiB7QGxpbmsgUElDSy5DQU1FUkF9IHdhcyBjaG9zZW4gYXMgdGhlIG1ldGhvZCB0byBwaWNrLCBhIHBpY2sgcHJvcGVydHkgZ2V0cyBhZGRlZCB0byB0aGUgZXZlbnQsIFxyXG4gICAgICogd2hpY2ggaG9sZHMgdGhlIGRldGFpbGVkIGluZm9ybWF0aW9uLCBidXQgaXMgb3ZlcndyaXR0ZW4gZm9yIGVhY2ggbm9kZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpc3BhdGNoUG9pbnRlckV2ZW50KF9ldmVudDogUG9pbnRlckV2ZW50KTogdm9pZCB7XHJcbiAgICAgIGxldCBwb3NDbGllbnQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihfZXZlbnQuY2xpZW50WCwgX2V2ZW50LmNsaWVudFkpO1xyXG4gICAgICBsZXQgcmF5OiBSYXkgPSB0aGlzLmdldFJheUZyb21DbGllbnQocG9zQ2xpZW50KTtcclxuICAgICAgLy8gbGV0IGNhbWVyYVBpY2tzOiBSZWN5Y2FibGVBcnJheTxOb2RlPiA9IFJlY3ljbGVyLmdldChSZWN5Y2FibGVBcnJheSk7IC8vVE9ETzogdGhpbmsgYWJvdXQgb3B0aW1pemF0aW9uIGxhdGVyXHJcbiAgICAgIGxldCBjYW1lcmFQaWNrczogTm9kZVtdID0gW107XHJcbiAgICAgIGxldCBvdGhlclBpY2tzOiBDb21wb25lbnRQaWNrW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgY21wUGljayBvZiB0aGlzLmNvbXBvbmVudHNQaWNrKVxyXG4gICAgICAgIGlmIChjbXBQaWNrLnBpY2sgPT0gUElDSy5DQU1FUkEpXHJcbiAgICAgICAgICBjYW1lcmFQaWNrcy5wdXNoKGNtcFBpY2subm9kZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgb3RoZXJQaWNrcy5wdXNoKGNtcFBpY2spO1xyXG5cclxuXHJcbiAgICAgIGlmIChjYW1lcmFQaWNrcy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgcGlja3M6IFBpY2tbXSA9IFBpY2tlci5waWNrQ2FtZXJhKGNhbWVyYVBpY2tzLCB0aGlzLmNhbWVyYSwgdGhpcy5wb2ludENsaWVudFRvUHJvamVjdGlvbihwb3NDbGllbnQpLCB0aGlzLmdpem1vc0VuYWJsZWQsIHRoaXMuZ2l6bW9zRmlsdGVyKTtcclxuICAgICAgICBmb3IgKGxldCBwaWNrIG9mIHBpY2tzKSB7XHJcbiAgICAgICAgICBSZWZsZWN0LnNldChfZXZlbnQsIFwicGlja1wiLCBwaWNrKTtcclxuICAgICAgICAgIHBpY2subm9kZS5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGxldCBjbXBQaWNrIG9mIG90aGVyUGlja3MpIHtcclxuICAgICAgICBjbXBQaWNrLnBpY2tBbmREaXNwYXRjaChyYXksIF9ldmVudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkanVzdCBhbGwgZnJhbWVzIGludm9sdmVkIGluIHRoZSByZW5kZXJpbmcgcHJvY2VzcyBmcm9tIHRoZSBkaXNwbGF5IGFyZWEgaW4gdGhlIGNsaWVudCB1cCB0byB0aGUgcmVuZGVyZXIgY2FudmFzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGp1c3RGcmFtZXMoKTogdm9pZCB7XHJcbiAgICAgIC8vIGdldCB0aGUgcmVjdGFuZ2xlIG9mIHRoZSBjYW52YXMgYXJlYSBhcyBkaXNwbGF5ZWQgKGNvbnNpZGVyIGNzcylcclxuICAgICAgbGV0IHJlY3RDbGllbnQ6IFJlY3RhbmdsZSA9IHRoaXMuZ2V0Q2xpZW50UmVjdGFuZ2xlKCk7XHJcbiAgICAgIC8vIGFkanVzdCB0aGUgY2FudmFzIHNpemUgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBmcmFtaW5nIGFwcGxpZWQgdG8gY2xpZW50XHJcbiAgICAgIGxldCByZWN0Q2FudmFzOiBSZWN0YW5nbGUgPSB0aGlzLmZyYW1lQ2xpZW50VG9DYW52YXMuZ2V0UmVjdChyZWN0Q2xpZW50KTtcclxuICAgICAgdGhpcy4jY2FudmFzLndpZHRoID0gcmVjdENhbnZhcy53aWR0aDtcclxuICAgICAgdGhpcy4jY2FudmFzLmhlaWdodCA9IHJlY3RDYW52YXMuaGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IHJlY3RUZW1wOiBSZWN0YW5nbGU7XHJcbiAgICAgIC8vIGFkanVzdCB0aGUgZGVzdGluYXRpb24gYXJlYSBvbiB0aGUgdGFyZ2V0LWNhbnZhcyB0byByZW5kZXIgdG8gYnkgYXBwbHlpbmcgdGhlIGZyYW1pbmcgdG8gY2FudmFzXHJcbiAgICAgIHJlY3RUZW1wID0gdGhpcy5mcmFtZUNhbnZhc1RvRGVzdGluYXRpb24uZ2V0UmVjdChyZWN0Q2FudmFzKTtcclxuICAgICAgdGhpcy5yZWN0RGVzdGluYXRpb24uY29weShyZWN0VGVtcCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHJlY3RUZW1wKTtcclxuICAgICAgLy8gYWRqdXN0IHRoZSBhcmVhIG9uIHRoZSBzb3VyY2UtY2FudmFzIHRvIHJlbmRlciBmcm9tIGJ5IGFwcGx5aW5nIHRoZSBmcmFtaW5nIHRvIGRlc3RpbmF0aW9uIGFyZWFcclxuICAgICAgcmVjdFRlbXAgPSB0aGlzLmZyYW1lRGVzdGluYXRpb25Ub1NvdXJjZS5nZXRSZWN0KHRoaXMucmVjdERlc3RpbmF0aW9uKTtcclxuXHJcbiAgICAgIHRoaXMucmVjdFNvdXJjZS5jb3B5KHJlY3RUZW1wKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVjdFRlbXApO1xyXG5cclxuICAgICAgLy8gaGF2aW5nIGFuIG9mZnNldCBzb3VyY2UgZG9lcyBtYWtlIHNlbnNlIG9ubHkgd2hlbiBtdWx0aXBsZSB2aWV3cG9ydHMgZGlzcGxheSBwYXJ0cyBvZiB0aGUgc2FtZSByZW5kZXJpbmcuIEZvciBub3c6IHNoaWZ0IGl0IHRvIDAsMFxyXG4gICAgICB0aGlzLnJlY3RTb3VyY2UueCA9IHRoaXMucmVjdFNvdXJjZS55ID0gMDtcclxuICAgICAgLy8gc3RpbGwsIGEgcGFydGlhbCBpbWFnZSBvZiB0aGUgcmVuZGVyaW5nIG1heSBiZSByZXRyaWV2ZWQgYnkgbW92aW5nIGFuZCByZXNpemluZyB0aGUgcmVuZGVyIHZpZXdwb3J0LiBGb3Igbm93LCBpdCdzIGFsd2F5cyBhZGp1c3RlZCB0byB0aGUgY3VycmVudCB2aWV3cG9ydFxyXG4gICAgICBsZXQgcmVjdFJlbmRlcjogUmVjdGFuZ2xlID0gdGhpcy5mcmFtZVNvdXJjZVRvUmVuZGVyLmdldFJlY3QodGhpcy5yZWN0U291cmNlKTtcclxuICAgICAgUmVuZGVyLnNldFJlbmRlclJlY3RhbmdsZShyZWN0UmVuZGVyKTtcclxuXHJcbiAgICAgIGxldCByZWN0T2Zmc2NyZWVuQ2FudmFzOiBSZWN0YW5nbGUgPSBSZW5kZXIuZ2V0Q2FudmFzUmVjdCgpOyAvLyB0aGVyZSBhcmUgZmFyIHRvIG1hbnkgcmVjdGFuZ2xlcyBpbnZvbHZlZCBoZXJlLi4uXHJcblxyXG4gICAgICAvLyBubyBtb3JlIHRyYW5zZm9ybWF0aW9uIGFmdGVyIHRoaXMgZm9yIG5vdywgb2Zmc2NyZWVuIGNhbnZhcyBhbmQgcmVuZGVyLXZpZXdwb3J0IGhhdmUgdGhlIHNhbWUgc2l6ZVxyXG4gICAgICBSZW5kZXIuc2V0Q2FudmFzU2l6ZShyZWN0UmVuZGVyLndpZHRoLCByZWN0UmVuZGVyLmhlaWdodCk7XHJcblxyXG4gICAgICBpZiAocmVjdFJlbmRlci53aWR0aCAhPSByZWN0T2Zmc2NyZWVuQ2FudmFzLndpZHRoIHx8IHJlY3RSZW5kZXIuaGVpZ2h0ICE9IHJlY3RPZmZzY3JlZW5DYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgIFJlbmRlci5hZGp1c3RBdHRhY2htZW50cygpO1xyXG5cclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVjdENsaWVudCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHJlY3RDYW52YXMpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShyZWN0UmVuZGVyKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVjdE9mZnNjcmVlbkNhbnZhcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGp1c3QgdGhlIGNhbWVyYSBwYXJhbWV0ZXJzIHRvIGZpdCB0aGUgcmVuZGVyaW5nIGludG8gdGhlIHJlbmRlciB2aWV3cG9ydFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRqdXN0Q2FtZXJhKCk6IHZvaWQge1xyXG4gICAgICBsZXQgcmVjdDogUmVjdGFuZ2xlID0gUmVuZGVyLmdldFJlbmRlclJlY3RhbmdsZSgpO1xyXG4gICAgICAvLyBpZiAodGhpcy5jYW1lcmEuZ2V0UHJvamVjdGlvbigpID09IFBST0pFQ1RJT04uT1JUSE9HUkFQSElDKVxyXG4gICAgICAvLyAgIHRoaXMuY2FtZXJhLnByb2plY3RPcnRob2dyYXBoaWMoLXJlY3Qud2lkdGggLyAyMCwgcmVjdC53aWR0aCAvIDIwLCByZWN0LmhlaWdodCAvIDIwLCAtcmVjdC5oZWlnaHQgLyAyMCk7XHJcbiAgICAgIC8vIGVsc2VcclxuICAgICAgdGhpcy5jYW1lcmEucHJvamVjdENlbnRyYWwoXHJcbiAgICAgICAgcmVjdC53aWR0aCAvIHJlY3QuaGVpZ2h0LCB0aGlzLmNhbWVyYS5nZXRGaWVsZE9mVmlldygpLCB0aGlzLmNhbWVyYS5nZXREaXJlY3Rpb24oKSwgdGhpcy5jYW1lcmEuZ2V0TmVhcigpLCB0aGlzLmNhbWVyYS5nZXRGYXIoKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmNhbWVyYS5yZXNldFdvcmxkVG9WaWV3KCk7XHJcbiAgICB9XHJcbiAgICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFBvaW50c1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFJheX0gaW4gd29ybGQgY29vcmRpbmF0ZXMgZnJvbSB0aGlzIGNhbWVyYSB0aHJvdWdoIHRoZSBwb2ludCBnaXZlbiBpbiBjbGllbnQgc3BhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJheUZyb21DbGllbnQoX3BvaW50OiBWZWN0b3IyKTogUmF5IHtcclxuICAgICAgbGV0IHBvc1Byb2plY3Rpb246IFZlY3RvcjIgPSB0aGlzLnBvaW50Q2xpZW50VG9Qcm9qZWN0aW9uKF9wb2ludCk7XHJcbiAgICAgIGxldCByYXk6IFJheSA9IG5ldyBSYXkobmV3IFZlY3RvcjMoLXBvc1Byb2plY3Rpb24ueCwgcG9zUHJvamVjdGlvbi55LCAxKSk7XHJcblxyXG4gICAgICAvLyByYXkuZGlyZWN0aW9uLnNjYWxlKGNhbWVyYS5kaXN0YW5jZSk7XHJcbiAgICAgIHJheS50cmFuc2Zvcm0odGhpcy5jYW1lcmEubXR4UGl2b3QpO1xyXG4gICAgICBsZXQgY2FtZXJhTm9kZTogTm9kZSA9IHRoaXMuY2FtZXJhLm5vZGU7XHJcbiAgICAgIGlmIChjYW1lcmFOb2RlKVxyXG4gICAgICAgIHJheS50cmFuc2Zvcm0oY2FtZXJhTm9kZS5tdHhXb3JsZCk7XHJcblxyXG4gICAgICByZXR1cm4gcmF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIHRoZSBjbGllbnQgcmVjdGFuZ2xlIG1hdGNoaW5nIHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBnaXZlbiBwb2ludCBpbiB3b3JsZCBzcGFjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRXb3JsZFRvQ2xpZW50KF9wb3NpdGlvbjogVmVjdG9yMyk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcHJvamVjdGlvbjogVmVjdG9yMyA9IHRoaXMuY2FtZXJhLnBvaW50V29ybGRUb0NsaXAoX3Bvc2l0aW9uKTtcclxuICAgICAgbGV0IHBvc0NsaWVudDogVmVjdG9yMiA9IHRoaXMucG9pbnRDbGlwVG9DbGllbnQocHJvamVjdGlvbi50b1ZlY3RvcjIoKSk7XHJcbiAgICAgIHJldHVybiBwb3NDbGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcG9pbnQgb24gdGhlIHNvdXJjZS1yZWN0YW5nbGUgbWF0Y2hpbmcgdGhlIGdpdmVuIHBvaW50IG9uIHRoZSBjbGllbnQgcmVjdGFuZ2xlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwb2ludENsaWVudFRvU291cmNlKF9jbGllbnQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMiA9IHRoaXMuZnJhbWVDbGllbnRUb0NhbnZhcy5nZXRQb2ludChfY2xpZW50LCB0aGlzLmdldENsaWVudFJlY3RhbmdsZSgpKTtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5mcmFtZUNhbnZhc1RvRGVzdGluYXRpb24uZ2V0UG9pbnQocmVzdWx0LCB0aGlzLmdldENhbnZhc1JlY3RhbmdsZSgpKTtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5mcmFtZURlc3RpbmF0aW9uVG9Tb3VyY2UuZ2V0UG9pbnQocmVzdWx0LCB0aGlzLnJlY3RTb3VyY2UpO1xyXG4gICAgICAvL1RPRE86IHdoZW4gU291cmNlLCBSZW5kZXIgYW5kIFJlbmRlclZpZXdwb3J0IGRldmlhdGUsIGNvbnRpbnVlIHRyYW5zZm9ybWF0aW9uIFxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIHRoZSByZW5kZXItcmVjdGFuZ2xlIG1hdGNoaW5nIHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgc291cmNlIHJlY3RhbmdsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRTb3VyY2VUb1JlbmRlcihfc291cmNlOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCBwcm9qZWN0aW9uUmVjdGFuZ2xlOiBSZWN0YW5nbGUgPSB0aGlzLmNhbWVyYS5nZXRQcm9qZWN0aW9uUmVjdGFuZ2xlKCk7XHJcbiAgICAgIGxldCBwb2ludDogVmVjdG9yMiA9IHRoaXMuZnJhbWVTb3VyY2VUb1JlbmRlci5nZXRQb2ludChfc291cmNlLCBwcm9qZWN0aW9uUmVjdGFuZ2xlKTtcclxuICAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdGlvblJlY3RhbmdsZS50b1N0cmluZygpKTtcclxuICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIHRoZSByZW5kZXItcmVjdGFuZ2xlIG1hdGNoaW5nIHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgY2xpZW50IHJlY3RhbmdsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRDbGllbnRUb1JlbmRlcihfY2xpZW50OiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCBwb2ludDogVmVjdG9yMiA9IHRoaXMucG9pbnRDbGllbnRUb1NvdXJjZShfY2xpZW50KTtcclxuICAgICAgcG9pbnQgPSB0aGlzLnBvaW50U291cmNlVG9SZW5kZXIocG9pbnQpO1xyXG4gICAgICAvL1RPRE86IHdoZW4gUmVuZGVyIGFuZCBSZW5kZXJWaWV3cG9ydCBkZXZpYXRlLCBjb250aW51ZSB0cmFuc2Zvcm1hdGlvbiBcclxuICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIGEgcHJvamVjdGlvbiBzdXJmYWNlIGluIHRoZSBoeXBvdGhldGljYWwgZGlzdGFuY2Ugb2YgMSB0byB0aGUgY2FtZXJhICBcclxuICAgICAqIG1hdGNoaW5nIHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgY2xpZW50IHJlY3RhbmdsZVxyXG4gICAgICogVE9ETzogZXhhbWluZSwgaWYgdGhpcyBzaG91bGQgYmUgYSBjYW1lcmEtbWV0aG9kLiBDdXJyZW50IGltcGxlbWVudGF0aW9uIGlzIGZvciBjZW50cmFsLXByb2plY3Rpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50Q2xpZW50VG9Qcm9qZWN0aW9uKF9jbGllbnQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHBvc1JlbmRlcjogVmVjdG9yMiA9IHRoaXMucG9pbnRDbGllbnRUb1JlbmRlcihfY2xpZW50KTtcclxuICAgICAgbGV0IHJlY3RSZW5kZXI6IFJlY3RhbmdsZSA9IHRoaXMuZnJhbWVTb3VyY2VUb1JlbmRlci5nZXRSZWN0KHRoaXMucmVjdFNvdXJjZSk7XHJcbiAgICAgIGxldCByZWN0UHJvamVjdGlvbjogUmVjdGFuZ2xlID0gdGhpcy5jYW1lcmEuZ2V0UHJvamVjdGlvblJlY3RhbmdsZSgpO1xyXG5cclxuICAgICAgbGV0IHBvc1Byb2plY3Rpb246IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICByZWN0UHJvamVjdGlvbi53aWR0aCAqIHBvc1JlbmRlci54IC8gcmVjdFJlbmRlci53aWR0aCxcclxuICAgICAgICByZWN0UHJvamVjdGlvbi5oZWlnaHQgKiBwb3NSZW5kZXIueSAvIHJlY3RSZW5kZXIuaGVpZ2h0XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBwb3NQcm9qZWN0aW9uLnN1YnRyYWN0KG5ldyBWZWN0b3IyKHJlY3RQcm9qZWN0aW9uLndpZHRoIC8gMiwgcmVjdFByb2plY3Rpb24uaGVpZ2h0IC8gMikpO1xyXG4gICAgICBwb3NQcm9qZWN0aW9uLnkgKj0gLTE7XHJcblxyXG4gICAgICByZXR1cm4gcG9zUHJvamVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwb2ludCBpbiB0aGUgY2xpZW50IHJlY3RhbmdsZSBtYXRjaGluZyB0aGUgZ2l2ZW4gcG9pbnQgaW4gbm9ybWVkIGNsaXBzcGFjZSByZWN0YW5nbGUsIFxyXG4gICAgICogd2hpY2ggc3RyZXRjaGVzIGZyb20gLTEgdG8gMSBpbiBib3RoIGRpbWVuc2lvbnMsIHkgcG9pbnRpbmcgdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50Q2xpcFRvQ2xpZW50KF9ub3JtZWQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgLy8gbGV0IHJlY3RDbGllbnQ6IFJlY3RhbmdsZSA9IHRoaXMuZ2V0Q2xpZW50UmVjdGFuZ2xlKCk7XHJcbiAgICAgIC8vIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBWZWN0b3IyLk9ORSgwLjUpO1xyXG4gICAgICAvLyByZXN1bHQueCAqPSAoX25vcm1lZC54ICsgMSkgKiByZWN0Q2xpZW50LndpZHRoO1xyXG4gICAgICAvLyByZXN1bHQueSAqPSAoMSAtIF9ub3JtZWQueSkgKiByZWN0Q2xpZW50LmhlaWdodDtcclxuICAgICAgLy8gcmVzdWx0LmFkZChyZWN0Q2xpZW50LnBvc2l0aW9uKTtcclxuICAgICAgLy9UT0RPOiBjaGVjayBpZiByZWN0RGVzdGluYXRpb24gY2FuIHNhZmVseSAoYW5kIG1vcmUgcGVyZm9tYW50KSBiZSB1c2VkIGluc3RlYWQgZ2V0Q2xpZW50UmVjdGFuZ2xlXHJcbiAgICAgIGxldCBwb2ludENsaWVudDogVmVjdG9yMiA9IFJlbmRlci5yZWN0Q2xpcC5wb2ludFRvUmVjdChfbm9ybWVkLCB0aGlzLnJlY3REZXN0aW5hdGlvbik7XHJcbiAgICAgIHJldHVybiBwb2ludENsaWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwb2ludCBpbiB0aGUgY2xpZW50IHJlY3RhbmdsZSBtYXRjaGluZyB0aGUgZ2l2ZW4gcG9pbnQgaW4gbm9ybWVkIGNsaXBzcGFjZSByZWN0YW5nbGUsIFxyXG4gICAgICogd2hpY2ggc3RyZXRjaGVzIGZyb20gLTEgdG8gMSBpbiBib3RoIGRpbWVuc2lvbnMsIHkgcG9pbnRpbmcgdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50Q2xpcFRvQ2FudmFzKF9ub3JtZWQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHBvaW50Q2FudmFzOiBWZWN0b3IyID0gUmVuZGVyLnJlY3RDbGlwLnBvaW50VG9SZWN0KF9ub3JtZWQsIHRoaXMuZ2V0Q2FudmFzUmVjdGFuZ2xlKCkpO1xyXG4gICAgICByZXR1cm4gcG9pbnRDYW52YXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcG9pbnQgaW4gdGhlIGJyb3dzZXIgcGFnZSBtYXRjaGluZyB0aGUgZ2l2ZW4gcG9pbnQgb2YgdGhlIHZpZXdwb3J0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwb2ludENsaWVudFRvU2NyZWVuKF9jbGllbnQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHNjcmVlbjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKHRoaXMuI2NhbnZhcy5vZmZzZXRMZWZ0ICsgX2NsaWVudC54LCB0aGlzLiNjYW52YXMub2Zmc2V0VG9wICsgX2NsaWVudC55KTtcclxuICAgICAgcmV0dXJuIHNjcmVlbjtcclxuICAgIH1cclxuICAgIC8vICNlbmRyZWdpb25cclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGlmZmVyZW50IHhyIHNlc3Npb24gbW9kZXMgYXZhaWxhYmxlLiBDb3VsZCBiZSBleHBhbmQgd2l0aCBtb3JlIG1vZGVzIGluIHRoZSBmdXR1cmUuXHJcbiAgICogQGF1dGhvcnMgVmFsZW50aW4gU2NobWlkYmVyZ2VyLCBIRlUsIDIwMjIgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBYUl9TRVNTSU9OX01PREUge1xyXG4gICAgSU1NRVJTSVZFX1ZSID0gXCJpbW1lcnNpdmUtdnJcIlxyXG4gICAgLy9JTU1FUlNJVkVfQVIgPSBcImltbWVyc2l2ZS1hclwiLFxyXG4gICAgLy9JTkxJTkUgPSBcImlubGluZVwiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaWZmZXJlbnQgcmVmZXJlbmNlIHZyLXNwYWNlcyBhdmFpbGFibGUsIGNyZWF0b3IgaGFzIHRvIGNoZWNrIGlmIHRoZSBzcGFjZSBpcyBzdXBwb3J0ZWQgd2l0aCBpdHMgZGV2aWNlLlxyXG4gICAqIENvdWxkIGJlIGV4cGFuZCB3aXRoIG1vcmUgYXZhaWxhYmxlIHNwYWNlIHR5cGVzIGluIHRoZSBmdXR1cmUuXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gWFJfUkVGRVJFTkNFX1NQQUNFIHtcclxuICAgIFZJRVdFUiA9IFwidmlld2VyXCIsXHJcbiAgICBMT0NBTCA9IFwibG9jYWxcIlxyXG4gICAgLy8gTE9DQUxfRkxPT1IgPSBcImxvY2FsLWZsb29yXCIsXHJcbiAgICAvLyBCT1VOREVEX0ZMT09SID0gXCJib3VuZGVkLWZsb29yXCIsXHJcbiAgICAvLyBVTkJPVU5ERUQgPSBcInVuYm91bmRlZFwiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBYUlZpZXdwb3J0ICh3ZWJYUiktZXh0ZW5zaW9uIG9mIFZpZXdwb3J0LCB0byBkaXNwbGF5aW5nIGl0cyBicmFuY2ggb24gSGVhZCBNb3VudGVkIGFuZCBBUiAobm90IGltcGxlbXRlZCB5ZXQpIERldmljZXMgXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFhSVmlld3BvcnQgZXh0ZW5kcyBWaWV3cG9ydCB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB4clZpZXdwb3J0SW5zdGFuY2U6IFhSVmlld3BvcnQgPSBudWxsO1xyXG4gICAgcHVibGljIHZyRGV2aWNlOiBDb21wb25lbnRWUkRldmljZSA9IG51bGw7XHJcbiAgICBwdWJsaWMgc2Vzc2lvbjogWFJTZXNzaW9uID0gbnVsbDtcclxuICAgIHB1YmxpYyByZWZlcmVuY2VTcGFjZTogWFJSZWZlcmVuY2VTcGFjZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIHVzZVZSQ29udHJvbGxlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8vIHByaXZhdGUgcG9zZU10eDogTWF0cml4NHg0ID0gbmV3IE1hdHJpeDR4NCgpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICBYUlZpZXdwb3J0LnhyVmlld3BvcnRJbnN0YW5jZSA9IHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUbyByZXRyaWV2ZSBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZSBvZiB4ciB2aWV3cG9ydCwgcmVhZG9ubHkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGRlZmF1bHQoKTogWFJWaWV3cG9ydCB7XHJcbiAgICAgIHJldHVybiB0aGlzLnhyVmlld3BvcnRJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBDb25uZWN0cyB0aGUgdmlld3BvcnQgdG8gdGhlIGdpdmVuIGNhbnZhcyB0byByZW5kZXIgdGhlIGdpdmVuIGJyYW5jaCB0byB1c2luZyB0aGUgZ2l2ZW4gY2FtZXJhLWNvbXBvbmVudCwgYW5kIG5hbWVzIHRoZSB2aWV3cG9ydCBhcyBnaXZlbi5cclxuICAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKF9uYW1lOiBzdHJpbmcsIF9icmFuY2g6IE5vZGUsIF9jYW1lcmFYUjogQ29tcG9uZW50VlJEZXZpY2UgLyogfCBDb21wb25lbnRDYW1lcmFBUiovLCBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICBzdXBlci5pbml0aWFsaXplKF9uYW1lLCBfYnJhbmNoLCBfY2FtZXJhWFIsIF9jYW52YXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIFZSIFNlc3Npb24gaXMgaW5pdGlhbGl6ZWQgaGVyZSwgYWxzbyBWUiAtIENvbnRyb2xsZXIgYXJlIGluaXRpYWxpemVkLCBpZiBib29sZWFuIGlzIHRydWUuXHJcbiAgICAgKiBDcmVhdG9yIGhhcyB0byBjYWxsIEZyYW1lUmVxdWVzdFhSIGFmdGVyIHRoaXMgTWV0aG9kIHRvIHJ1biB0aGUgdmlld3BvcnQgaW4gdmlydHVhbCByZWFsaXR5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZVZSKF92clNlc3Npb25Nb2RlOiBYUl9TRVNTSU9OX01PREUgPSBYUl9TRVNTSU9OX01PREUuSU1NRVJTSVZFX1ZSLCBfdnJSZWZlcmVuY2VTcGFjZVR5cGU6IFhSX1JFRkVSRU5DRV9TUEFDRSA9IFhSX1JFRkVSRU5DRV9TUEFDRS5MT0NBTCwgX3ZyQ29udHJvbGxlcjogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGxldCBzZXNzaW9uOiBYUlNlc3Npb24gPSBhd2FpdCBuYXZpZ2F0b3IueHIucmVxdWVzdFNlc3Npb24oX3ZyU2Vzc2lvbk1vZGUpO1xyXG4gICAgICB0aGlzLnJlZmVyZW5jZVNwYWNlID0gYXdhaXQgc2Vzc2lvbi5yZXF1ZXN0UmVmZXJlbmNlU3BhY2UoX3ZyUmVmZXJlbmNlU3BhY2VUeXBlKTtcclxuICAgICAgYXdhaXQgUmVuZGVyLmdldFJlbmRlcmluZ0NvbnRleHQoKS5tYWtlWFJDb21wYXRpYmxlKCk7XHJcbiAgICAgIGxldCBuYXRpdmVTY2FsZUZhY3RvcjogbnVtYmVyID0gWFJXZWJHTExheWVyLmdldE5hdGl2ZUZyYW1lYnVmZmVyU2NhbGVGYWN0b3Ioc2Vzc2lvbik7XHJcbiAgICAgIC8vVE9ETzogIEZpZWxkIG9mIHZpZXcga8O2bm50ZSBhbiBkZXIgU3RlbGxlIG5vY2ggdmVyw6RuZGVydCB3ZXJkZW4uXHJcbiAgICAgIGxldCBiYXNlTGF5ZXI6IFhSV2ViR0xMYXllciA9IG5ldyBYUldlYkdMTGF5ZXIoc2Vzc2lvbiwgUmVuZGVyLmdldFJlbmRlcmluZ0NvbnRleHQoKSwgeyBmcmFtZWJ1ZmZlclNjYWxlRmFjdG9yOiBuYXRpdmVTY2FsZUZhY3RvciB9KTtcclxuICAgICAgYXdhaXQgc2Vzc2lvbi51cGRhdGVSZW5kZXJTdGF0ZSh7IGJhc2VMYXllcjogYmFzZUxheWVyIH0pO1xyXG4gICAgICBSZW5kZXIuc2V0RnJhbWVidWZmZXJUYXJnZXQoYmFzZUxheWVyLmZyYW1lYnVmZmVyKTtcclxuICAgICAgUmVuZGVyLnNldENhbnZhc1NpemUoYmFzZUxheWVyLmZyYW1lYnVmZmVyV2lkdGgsIGJhc2VMYXllci5mcmFtZWJ1ZmZlckhlaWdodCk7XHJcbiAgICAgIFJlbmRlci5zZXRSZW5kZXJSZWN0YW5nbGUoUmVjdGFuZ2xlLkdFVCgwLCAwLCBiYXNlTGF5ZXIuZnJhbWVidWZmZXJXaWR0aCwgYmFzZUxheWVyLmZyYW1lYnVmZmVySGVpZ2h0KSk7XHJcbiAgICAgIFJlbmRlci5hZGp1c3RBdHRhY2htZW50cygpO1xyXG4gICAgICB0aGlzLmFkanVzdGluZ0ZyYW1lcyA9IGZhbHNlOyAvLyB3ZWIgeHIgaGFuZGxlcyB0aGlzIG5vd1xyXG4gICAgICB0aGlzLnZyRGV2aWNlID0gPENvbXBvbmVudFZSRGV2aWNlPnRoaXMuY2FtZXJhO1xyXG4gICAgICB0aGlzLmluaXRpYWxpemVSZWZlcmVuY2VTcGFjZSgpO1xyXG5cclxuICAgICAgdGhpcy51c2VWUkNvbnRyb2xsZXIgPSBfdnJDb250cm9sbGVyO1xyXG4gICAgICBpZiAoX3ZyQ29udHJvbGxlcikge1xyXG4gICAgICAgIHRoaXMudnJEZXZpY2UucmlnaHRDbnRybC5jbXBUcmFuc2Zvcm0gPSBuZXcgQ29tcG9uZW50VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgdGhpcy52ckRldmljZS5sZWZ0Q250cmwuY21wVHJhbnNmb3JtID0gbmV3IENvbXBvbmVudFRyYW5zZm9ybSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xyXG5cclxuICAgICAgdGhpcy5wcmVwYXJlQnJhbmNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgQVIgc2Vzc2lvbiBjb3VsZCBiZSBpbml0aWFsaXplZCBoZXJlLiBVcCB0aWxsIG5vdyBub3QgaW1wbGVtZW50ZWQuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZUFSKF9hclNlc3Npb25Nb2RlOiBYUl9TRVNTSU9OX01PREUgPSBudWxsLCBfYXJSZWZlcmVuY2VTcGFjZVR5cGU6IFhSX1JFRkVSRU5DRV9TUEFDRSA9IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgRGVidWcuZXJyb3IoXCJOT1QgSU1QTEVNRU5URUQgWUVUISBDaGVjayBvdXQgaW5pdGlhbGl6ZVZSIVwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXcgdGhlIHhyIHZpZXdwb3J0IGRpc3BsYXlpbmcgaXRzIGJyYW5jaC4gQnkgZGVmYXVsdCwgdGhlIHRyYW5zZm9ybXMgaW4gdGhlIGJyYW5jaCBhcmUgcmVjYWxjdWxhdGVkIGZpcnN0LlxyXG4gICAgICogUGFzcyBgZmFsc2VgIGlmIGNhbGN1bGF0aW9uIHdhcyBhbHJlYWR5IGRvbmUgZm9yIHRoaXMgZnJhbWUgXHJcbiAgICAgKiBDYWxsZWQgZnJvbSBsb29wIG1ldGhvZCB7QGxpbmsgTG9vcH0gYWdhaW4gd2l0aCB0aGUgeHJGcmFtZSBwYXJhbWV0ZXIgaGFuZG92ZXIsIGFzIHNvb24gYXMgRlJBTUVfUkVRVUVTVF9YUiBpcyBjYWxsZWQgZnJvbSBjcmVhdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZHJhdyhfcHJlcGFyZUJyYW5jaDogYm9vbGVhbiA9IHRydWUsIF94ckZyYW1lOiBYUkZyYW1lID0gbnVsbCk6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMuc2Vzc2lvbikge1xyXG4gICAgICAgIHN1cGVyLmRyYXcoX3ByZXBhcmVCcmFuY2gpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHBvc2U6IFhSVmlld2VyUG9zZSA9IF94ckZyYW1lPy5nZXRWaWV3ZXJQb3NlKHRoaXMucmVmZXJlbmNlU3BhY2UpO1xyXG4gICAgICBpZiAoIXBvc2UpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgdGhpcy52ckRldmljZS5tdHhMb2NhbC5zZXQocG9zZS50cmFuc2Zvcm0ubWF0cml4KTtcclxuICAgICAgdGhpcy52ckRldmljZS5tdHhMb2NhbC5yb3RhdGVZKDE4MCk7IC8vIHJvdGF0ZSBiYWNrIGJlY2F1c2UgdGhlIFhSIFJpZyBpcyBsb29raW5nIGluIHRoZSBkaXJlY3Rpb24gb2YgbmVnYXRpdmUgelxyXG4gICAgICBzdXBlci5wcmVwYXJlKF9wcmVwYXJlQnJhbmNoKTtcclxuXHJcbiAgICAgIGxldCBnbExheWVyOiBYUldlYkdMTGF5ZXIgPSB0aGlzLnNlc3Npb24ucmVuZGVyU3RhdGUuYmFzZUxheWVyO1xyXG4gICAgICBmb3IgKGxldCB2aWV3IG9mIHBvc2Uudmlld3MpIHtcclxuICAgICAgICBsZXQgdmlld3BvcnQ6IGdsb2JhbFRoaXMuWFJWaWV3cG9ydCA9IGdsTGF5ZXIuZ2V0Vmlld3BvcnQodmlldyk7XHJcbiAgICAgICAgUmVuZGVyLnNldFZpZXdwb3J0KHZpZXdwb3J0LngsIHZpZXdwb3J0LnksIHZpZXdwb3J0LndpZHRoLCB2aWV3cG9ydC5oZWlnaHQpO1xyXG4gICAgICAgIFJlbmRlci5zZXRTY2lzc29yVGVzdCh0cnVlLCB2aWV3cG9ydC54LCB2aWV3cG9ydC55LCB2aWV3cG9ydC53aWR0aCwgdmlld3BvcnQuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlVlJDb250cm9sbGVyKVxyXG4gICAgICAgICAgdGhpcy5zZXRDb250cm9sbGVyQ29uZmlncyhfeHJGcmFtZSk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEucmVzZXRXb3JsZFRvVmlldygpOyAvLyBUT0RPOiBmaW5kIGEgbGVzcyBleHBlbnNpdmUgd2F5IHRvIGRvIHRoaXMsIG1heWJlIHVzZSB0d28gY2FtZXJhc1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLm10eFByb2plY3Rpb24uc2V0KHZpZXcucHJvamVjdGlvbk1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEubXR4Q2FtZXJhSW52ZXJzZS5zZXQodmlldy50cmFuc2Zvcm0uaW52ZXJzZS5tYXRyaXgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5waHlzaWNzRGVidWdNb2RlICE9IFBIWVNJQ1NfREVCVUdNT0RFLlBIWVNJQ19PQkpFQ1RTX09OTFkpXHJcbiAgICAgICAgICBSZW5kZXIuZHJhdyh0aGlzLmNhbWVyYSk7XHJcbiAgICAgICAgaWYgKHRoaXMucGh5c2ljc0RlYnVnTW9kZSAhPSBQSFlTSUNTX0RFQlVHTU9ERS5OT05FKSB7XHJcbiAgICAgICAgICBQaHlzaWNzLmRyYXcodGhpcy5jYW1lcmEsIHRoaXMucGh5c2ljc0RlYnVnTW9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZXNldCBmb3Igb3RoZXIgcmVuZGVyIG9wZXJhdGlvbnMgZS5nLiBwaWNraW5nXHJcbiAgICAgIFJlbmRlci5zZXRTY2lzc29yVGVzdChmYWxzZSk7XHJcbiAgICAgIFJlbmRlci5zZXRSZW5kZXJSZWN0YW5nbGUoUmVuZGVyLmdldFJlbmRlclJlY3RhbmdsZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1vdmUgdGhlIHJlZmVyZW5jZSBzcGFjZSB0byBzZXQgdGhlIGluaXRpYWwgcG9zaXRpb24vb3JpZW50YXRpb24gb2YgdGhlIHZyIGRldmljZSBpbiBhY2NvcmRhbmNlIHRvIHRoZSBub2RlIHRoZSB2ciBkZXZpY2UgaXMgYXR0YWNoZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVJlZmVyZW5jZVNwYWNlKCk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4V29ybGQ6IE1hdHJpeDR4NCA9IHRoaXMudnJEZXZpY2Uubm9kZT8uZ2V0Q29tcG9uZW50KENvbXBvbmVudFZSRGV2aWNlKT8ubXR4V29ybGQ7XHJcbiAgICAgIGlmICghbXR4V29ybGQpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgbXR4V29ybGQgPSBtdHhXb3JsZC5jbG9uZTtcclxuICAgICAgbXR4V29ybGQucm90YXRlWSgxODApOyAvLyByb3RhdGUgYmVjYXVzZSB0aGUgWFIgUmlnIGlzIGxvb2tpbmcgaW4gdGhlIGRpcmVjdGlvbiBvZiBuZWdhdGl2ZSB6XHJcbiAgICAgIGxldCBpbnZNdHhUcmFuc2ZvbTogTWF0cml4NHg0ID0gTWF0cml4NHg0LklOVkVSU0UobXR4V29ybGQpOyAvLyBpbnZlcnNlIGJlY2F1c2Ugd2UgYXJlIG1vdmluZyB0aGUgcmVmZXJlbmNlIHNwYWNlXHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSA9IFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZS5nZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShuZXcgWFJSaWdpZFRyYW5zZm9ybShpbnZNdHhUcmFuc2ZvbS50cmFuc2xhdGlvbiwgaW52TXR4VHJhbnNmb20ucXVhdGVybmlvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vU2V0cyBjb250cm9sbGVyIG1hdHJpY2VzIGFuZCB0aHVtYnN0aWNrcyBtb3ZlbWVudHMuXHJcbiAgICBwcml2YXRlIHNldENvbnRyb2xsZXJDb25maWdzKF94ckZyYW1lOiBYUkZyYW1lKTogdm9pZCB7XHJcbiAgICAgIGlmIChfeHJGcmFtZSkge1xyXG4gICAgICAgIGlmIChYUlZpZXdwb3J0LmRlZmF1bHQuc2Vzc2lvbi5pbnB1dFNvdXJjZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnNlc3Npb24uaW5wdXRTb3VyY2VzLmZvckVhY2goX2NvbnRyb2xsZXIgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRyb2xsZXIuaGFuZGVkbmVzcykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoXCJyaWdodFwiKTpcclxuICAgICAgICAgICAgICAgICAgdGhpcy52ckRldmljZS5yaWdodENudHJsLmNtcFRyYW5zZm9ybS5tdHhMb2NhbC5zZXQoX3hyRnJhbWUuZ2V0UG9zZShfY29udHJvbGxlci50YXJnZXRSYXlTcGFjZSwgWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlKS50cmFuc2Zvcm0ubWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZyRGV2aWNlLnJpZ2h0Q250cmwuZ2FtZVBhZClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZyRGV2aWNlLnJpZ2h0Q250cmwuZ2FtZVBhZCA9IF9jb250cm9sbGVyLmdhbWVwYWQ7XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnJEZXZpY2UucmlnaHRDbnRybC50aHVtYnN0aWNrWCA9IF9jb250cm9sbGVyLmdhbWVwYWQuYXhlc1syXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZyRGV2aWNlLnJpZ2h0Q250cmwudGh1bWJzdGlja1kgPSBfY29udHJvbGxlci5nYW1lcGFkLmF4ZXNbM107XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIChcImxlZnRcIik6XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudnJEZXZpY2UubGVmdENudHJsLmNtcFRyYW5zZm9ybS5tdHhMb2NhbC5zZXQoX3hyRnJhbWUuZ2V0UG9zZShfY29udHJvbGxlci50YXJnZXRSYXlTcGFjZSwgWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlKS50cmFuc2Zvcm0ubWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy52ckRldmljZS5sZWZ0Q250cmwuZ2FtZVBhZClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZyRGV2aWNlLmxlZnRDbnRybC5nYW1lUGFkID0gX2NvbnRyb2xsZXIuZ2FtZXBhZDtcclxuICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ckRldmljZS5sZWZ0Q250cmwudGh1bWJzdGlja1ggPSBfY29udHJvbGxlci5nYW1lcGFkLmF4ZXNbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ckRldmljZS5sZWZ0Q250cmwudGh1bWJzdGlja1kgPSBfY29udHJvbGxlci5nYW1lcGFkLmF4ZXNbM107XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XHJcbiAgICAgICAgICAgICAgRGVidWcuaW5mbyhcIklucHV0IFNvdXJjZXMgRXJyb3I6IFwiICsgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWFwRmlsZW5hbWVUb0NvbnRlbnQge1xyXG4gICAgW2ZpbGVuYW1lOiBzdHJpbmddOiBzdHJpbmc7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXMgZmlsZSB0cmFuc2ZlciBmcm9tIGEgRlVER0UtQnJvd3NlcmFwcCB0byB0aGUgbG9jYWwgZmlsZXN5c3RlbSB3aXRob3V0IGEgbG9jYWwgc2VydmVyLiAgXHJcbiAgICogU2F2ZXMgdG8gdGhlIGRvd25sb2FkLXBhdGggZ2l2ZW4gYnkgdGhlIGJyb3dzZXIsIGxvYWRzIGZyb20gdGhlIHBsYXllcidzIGNob2ljZS5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRmlsZUlvQnJvd3NlckxvY2FsIGV4dGVuZHMgRXZlbnRUYXJnZXRTdGF0aWMge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2VsZWN0b3I6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAvLyBUT0RPOiByZWZhY3RvciB0byBhc3luYyBmdW5jdGlvbiB0byBiZSBoYW5kbGVkIHVzaW5nIHByb21pc2UsIGluc3RlYWQgb2YgdXNpbmcgZXZlbnQgdGFyZ2V0XHJcbiAgICAvKipcclxuICAgICAqIE9wZW4gZmlsZSBzZWxlY3QgZGlhbG9nIHRvIGxvYWQgZmlsZXMgZnJvbSBsb2NhbCBmaWxlc3lzdGVtIGludG8gYnJvd3NlciBhcHBsaWNhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkKF9tdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxNYXBGaWxlbmFtZVRvQ29udGVudD4ge1xyXG4gICAgICBGaWxlSW9Ccm93c2VyTG9jYWwuc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvci50eXBlID0gXCJmaWxlXCI7XHJcbiAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvci5tdWx0aXBsZSA9IF9tdWx0aXBsZTtcclxuICAgICAgRmlsZUlvQnJvd3NlckxvY2FsLnNlbGVjdG9yLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIEZpbGVJb0Jyb3dzZXJMb2NhbC5oYW5kbGVGaWxlU2VsZWN0KTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChGaWxlSW9Ccm93c2VyTG9jYWwuc2VsZWN0b3IpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE1hcEZpbGVuYW1lVG9Db250ZW50PihfcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgZnVuY3Rpb24gaG5kTG9hZGVkKF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkZJTEVfTE9BREVELCBobmRMb2FkZWQpO1xyXG4gICAgICAgICAgX3Jlc29sdmUoKDxDdXN0b21FdmVudD5fZXZlbnQpLmRldGFpbC5tYXBGaWxlbmFtZVRvQ29udGVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGaWxlSW9Ccm93c2VyTG9jYWwuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5GSUxFX0xPQURFRCwgaG5kTG9hZGVkKTtcclxuICAgICAgICBGaWxlSW9Ccm93c2VyTG9jYWwuc2VsZWN0b3IuY2xpY2soKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogcmVmYWN0b3IgdG8gYXN5bmMgZnVuY3Rpb24gdG8gYmUgaGFuZGxlZCB1c2luZyBwcm9taXNlLCBpbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IHRhcmdldFxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVuIGEgZmlsZSBkb3dubG9hZCBkaWFsb2cgdG8gc2F2ZSBmaWxlcyB0byBsb2NhbCBmaWxlc3lzdGVtLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNhdmUoX3RvU2F2ZTogTWFwRmlsZW5hbWVUb0NvbnRlbnQsIF90eXBlOiBzdHJpbmcgPSBcInRleHQvcGxhaW5cIik6IFByb21pc2U8TWFwRmlsZW5hbWVUb0NvbnRlbnQ+IHtcclxuICAgICAgZm9yIChsZXQgZmlsZW5hbWUgaW4gX3RvU2F2ZSkge1xyXG4gICAgICAgIGxldCBjb250ZW50OiBzdHJpbmcgPSBfdG9TYXZlW2ZpbGVuYW1lXTtcclxuICAgICAgICBsZXQgYmxvYjogQmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiBfdHlwZSB9KTtcclxuICAgICAgICBsZXQgdXJsOiBzdHJpbmcgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAvLyovIHVzaW5nIGFuY2hvciBlbGVtZW50IGZvciBkb3dubG9hZFxyXG4gICAgICAgIGxldCBkb3dubG9hZGVyOiBIVE1MQW5jaG9yRWxlbWVudDtcclxuICAgICAgICBkb3dubG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgZG93bmxvYWRlci5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHVybCk7XHJcbiAgICAgICAgZG93bmxvYWRlci5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLCBmaWxlbmFtZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb3dubG9hZGVyKTtcclxuICAgICAgICBkb3dubG9hZGVyLmNsaWNrKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkb3dubG9hZGVyKTtcclxuICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8TWFwRmlsZW5hbWVUb0NvbnRlbnQ+KF9yZXNvbHZlID0+IHtcclxuICAgICAgICBfcmVzb2x2ZShfdG9TYXZlKTtcclxuICAgICAgICAvLyBmdW5jdGlvbiBobmRTYXZlZChfZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gICBGaWxlSW9Ccm93c2VyTG9jYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5GSUxFX1NBVkVELCBobmRTYXZlZCk7XHJcbiAgICAgICAgLy8gICBfcmVzb2x2ZSgoPEN1c3RvbUV2ZW50Pl9ldmVudCkuZGV0YWlsKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIEZpbGVJb0Jyb3dzZXJMb2NhbC5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkZJTEVfU0FWRUQsIGhuZFNhdmVkKTtcclxuICAgICAgICAvLyBsZXQgZXZlbnQ6IEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KEVWRU5ULkZJTEVfU0FWRUQsIHsgZGV0YWlsOiB7IG1hcEZpbGVuYW1lVG9Db250ZW50OiBfdG9TYXZlIH0gfSk7XHJcbiAgICAgICAgLy8gRmlsZUlvQnJvd3NlckxvY2FsLnRhcmdldFN0YXRpYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIHRoZSB0aGUgZmlsZXMgcmVmZXJlbmNlZCBpbiB7QGxpbmsgRmlsZUxpc3R9IGludG8gdGhlIHByb3ZpZGVkIHtAbGluayBNYXBGaWxlbmFtZVRvQ29udGVudH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkRmlsZXMoX2ZpbGVMaXN0OiBGaWxlTGlzdCwgX2xvYWRlZDogTWFwRmlsZW5hbWVUb0NvbnRlbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgZm9yIChsZXQgZmlsZSBvZiBfZmlsZUxpc3QpIHtcclxuICAgICAgICBjb25zdCBjb250ZW50OiBzdHJpbmcgPSBhd2FpdCBuZXcgUmVzcG9uc2UoZmlsZSkudGV4dCgpO1xyXG4gICAgICAgIF9sb2FkZWRbZmlsZS5uYW1lXSA9IGNvbnRlbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBoYW5kbGVGaWxlU2VsZWN0KF9ldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgRGVidWcuZnVkZ2UoXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoYW5kbGVGaWxlU2VsZWN0XCIpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvcik7XHJcbiAgICAgIGxldCBmaWxlTGlzdDogRmlsZUxpc3QgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+X2V2ZW50LnRhcmdldCkuZmlsZXM7XHJcbiAgICAgIERlYnVnLmZ1ZGdlKGZpbGVMaXN0LCBmaWxlTGlzdC5sZW5ndGgpO1xyXG4gICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgbGV0IGxvYWRlZDogTWFwRmlsZW5hbWVUb0NvbnRlbnQgPSB7fTtcclxuICAgICAgYXdhaXQgRmlsZUlvQnJvd3NlckxvY2FsLmxvYWRGaWxlcyhmaWxlTGlzdCwgbG9hZGVkKTtcclxuXHJcbiAgICAgIGxldCBldmVudDogQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuRklMRV9MT0FERUQsIHsgZGV0YWlsOiB7IG1hcEZpbGVuYW1lVG9Db250ZW50OiBsb2FkZWQgfSB9KTtcclxuICAgICAgRmlsZUlvQnJvd3NlckxvY2FsLnRhcmdldFN0YXRpYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxuICB9XHJcbn0gIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogTXV0YWJsZSBhcnJheSBvZiB7QGxpbmsgTXV0YWJsZX1zLiBUaGUge0BsaW5rIE11dGF0b3J9cyBvZiB0aGUgZW50cmllcyBhcmUgaW5jbHVkZWQgYXMgYXJyYXkgaW4gdGhlIHtAbGluayBNdXRhdG9yfVxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTXV0YWJsZUFycmF5PFQgZXh0ZW5kcyBNdXRhYmxlPiBleHRlbmRzIEFycmF5PFQ+IHtcclxuICAgICN0eXBlOiBuZXcgKCkgPT4gVDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3R5cGU6IG5ldyAoKSA9PiBULCAuLi5fYXJnczogVFtdKSB7XHJcbiAgICAgIHN1cGVyKC4uLl9hcmdzKTtcclxuICAgICAgdGhpcy4jdHlwZSA9IF90eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdHlwZSgpOiBuZXcgKCkgPT4gVCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN0eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhcnJhbmdlIHRoZSBlbnRyaWVzIG9mIHRoZSBhcnJheSBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHNlcXVlbmNlIG9mIGluZGljZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlYXJyYW5nZShfc2VxdWVuY2U6IG51bWJlcltdKTogdm9pZCB7XHJcbiAgICAgIGxldCBsZW5ndGg6IG51bWJlciA9IHRoaXMubGVuZ3RoO1xyXG4gICAgICBmb3IgKGxldCBpbmRleCBvZiBfc2VxdWVuY2UpIHtcclxuICAgICAgICBsZXQgb3JpZ2luYWw6IFQgPSB0aGlzW2luZGV4XTtcclxuICAgICAgICAvLyBUT0RPOiBvcHRpbWl6ZSwgY29weSBvbmx5IGRvdWJsZSBlbnRyaWVzXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IGNvcHk6IFQgPSBuZXcgb3JpZ2luYWwuY29uc3RydWN0b3IoKTtcclxuICAgICAgICBjb3B5Lm11dGF0ZShvcmlnaW5hbC5nZXRNdXRhdG9yKCkpO1xyXG4gICAgICAgIHRoaXMucHVzaChjb3B5KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNwbGljZSgwLCBsZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhc3NvY2lhdGl2ZSBhcnJheSB3aXRoIHRoaXMgYXJyYXlzIGVsZW1lbnRzIGNvcnJlc3BvbmRpbmcgdHlwZXMgYXMgc3RyaW5nLXZhbHVlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgZW50cnkgaW4gdGhpcylcclxuICAgICAgICB0eXBlc1tlbnRyeV0gPSB0aGlzW2VudHJ5XS5jb25zdHJ1Y3Rvci5uYW1lO1xyXG5cclxuICAgICAgcmV0dXJuIHR5cGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSB3aXRoIGVhY2ggZWxlbWVudHMgbXV0YXRvciBieSBpbnZva2luZyB7QGxpbmsgTXV0YWJsZS5nZXRNdXRhdG9yfSBvbiB0aGVtXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXAoKF92YWx1ZSkgPT4gX3ZhbHVlLmdldE11dGF0b3IoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWUge0BsaW5rIE11dGFibGUuZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2V9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yRm9yVXNlckludGVyZmFjZSgpOiBNdXRhdG9yIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTXV0YXRlIGVhY2ggZWxlbWVudCBvZiB0aGlzIGFycmF5IGJ5IGludm9raW5nIHtAbGluayBNdXRhYmxlLm11dGF0ZX0gb24gaXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBmb3IgKGxldCBlbnRyeSBpbiB0aGlzKVxyXG4gICAgICAgIGF3YWl0IHRoaXNbZW50cnldLm11dGF0ZShfbXV0YXRvcltlbnRyeV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgdmFsdWVzIG9mIHRoZSBnaXZlbiBtdXRhdG9yIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgZW50cnkgaW4gdGhpcykge1xyXG4gICAgICAgIGxldCBtdXRhdG9yVmFsdWU6IE9iamVjdCA9IF9tdXRhdG9yW2VudHJ5XTtcclxuICAgICAgICBpZiAoIW11dGF0b3JWYWx1ZSlcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmICh0aGlzW2VudHJ5XSBpbnN0YW5jZW9mIE11dGFibGUpXHJcbiAgICAgICAgICBfbXV0YXRvcltlbnRyeV0gPSB0aGlzW2VudHJ5XS5nZXRNdXRhdG9yKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgX211dGF0b3JbZW50cnldID0gdGhpc1tlbnRyeV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgZW51bSBNT0RFIHtcclxuICAgIEVESVRPUiwgUlVOVElNRVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGVudW0gUkVTT1VSQ0VfU1RBVFVTIHtcclxuICAgIFBFTkRJTkcsIFJFQURZLCBFUlJPUlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemFibGVSZXNvdXJjZUV4dGVybmFsIGV4dGVuZHMgU2VyaWFsaXphYmxlUmVzb3VyY2Uge1xyXG4gICAgdXJsOiBSZXF1ZXN0SW5mbztcclxuICAgIHN0YXR1czogUkVTT1VSQ0VfU1RBVFVTO1xyXG4gICAgbG9hZCgpOiBQcm9taXNlPFNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWw+O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemFibGVSZXNvdXJjZSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBpZFJlc291cmNlOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSB0eXBlOiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFJlc291cmNlcyB7XHJcbiAgICBbaWRSZXNvdXJjZTogc3RyaW5nXTogU2VyaWFsaXphYmxlUmVzb3VyY2U7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFNlcmlhbGl6YXRpb25PZlJlc291cmNlcyB7XHJcbiAgICBbaWRSZXNvdXJjZTogc3RyaW5nXTogU2VyaWFsaXphdGlvbjtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2NyaXB0TmFtZXNwYWNlcyB7XHJcbiAgICBbbmFtZTogc3RyaW5nXTogT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRTY3JpcHRzIHtcclxuICAgIFtuYW1lc3BhY2U6IHN0cmluZ106IENvbXBvbmVudFNjcmlwdFtdO1xyXG4gIH1cclxuXHJcbiAgaW50ZXJmYWNlIEdyYXBoSW5zdGFuY2VzVG9SZXN5bmMge1xyXG4gICAgW2lkUmVzb3VyY2U6IHN0cmluZ106IEdyYXBoSW5zdGFuY2VbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YXRpYyBjbGFzcyBoYW5kbGluZyB0aGUgcmVzb3VyY2VzIHVzZWQgd2l0aCB0aGUgY3VycmVudCBGVURHRS1pbnN0YW5jZS4gIFxyXG4gICAqIEtlZXBzIGEgbGlzdCBvZiB0aGUgcmVzb3VyY2VzIGFuZCBnZW5lcmF0ZXMgaWRzIHRvIHJldHJpZXZlIHRoZW0uICBcclxuICAgKiBSZXNvdXJjZXMgYXJlIG9iamVjdHMgcmVmZXJlbmNlZCBtdWx0aXBsZSB0aW1lcyBidXQgc3VwcG9zZWQgdG8gYmUgc3RvcmVkIG9ubHkgb25jZVxyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQcm9qZWN0IGV4dGVuZHMgRXZlbnRUYXJnZXRTdGF0aWMge1xyXG4gICAgcHVibGljIHN0YXRpYyByZXNvdXJjZXM6IFJlc291cmNlcyA9IHt9O1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uT2ZSZXNvdXJjZXMgPSB7fTtcclxuICAgIHB1YmxpYyBzdGF0aWMgc2NyaXB0TmFtZXNwYWNlczogU2NyaXB0TmFtZXNwYWNlcyA9IHt9O1xyXG4gICAgcHVibGljIHN0YXRpYyBiYXNlVVJMOiBVUkwgPSBuZXcgVVJMKGxvY2F0aW9uLnRvU3RyaW5nKCkpO1xyXG4gICAgcHVibGljIHN0YXRpYyBtb2RlOiBNT0RFID0gTU9ERS5SVU5USU1FO1xyXG4gICAgcHVibGljIHN0YXRpYyBncmFwaEluc3RhbmNlc1RvUmVzeW5jOiBHcmFwaEluc3RhbmNlc1RvUmVzeW5jID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgdGhlIHJlc291cmNlIGFuZCBnZW5lcmF0ZXMgYW4gaWQgZm9yIGl0IGJ5IGRlZmF1bHQuICBcclxuICAgICAqIElmIHRoZSByZXNvdXJjZSBhbHJlYWR5IGhhcyBhbiBpZCwgdGh1cyBoYXZpbmcgYmVlbiByZWdpc3RlcmVkLCBpdHMgZGVsZXRlZCBmcm9tIHRoZSBsaXN0IGFuZCByZWdpc3RlcmVkIGFuZXcuXHJcbiAgICAgKiBJdCdzIHBvc3NpYmxlIHRvIHBhc3MgYW4gaWQsIGJ1dCBzaG91bGQgbm90IGJlIGRvbmUgZXhjZXB0IGJ5IHRoZSBTZXJpYWxpemVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKF9yZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UsIF9pZFJlc291cmNlPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIGlmIChfcmVzb3VyY2UuaWRSZXNvdXJjZSAmJiBfcmVzb3VyY2UuaWRSZXNvdXJjZSA9PSBfaWRSZXNvdXJjZSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBpZiAoX3Jlc291cmNlLmlkUmVzb3VyY2UpIC8vIGRlcmVnaXN0ZXIgdGhlIG9sZCBpZFxyXG4gICAgICAgIHRoaXMuZGVyZWdpc3RlcihfcmVzb3VyY2UpO1xyXG5cclxuICAgICAgaWYgKF9pZFJlc291cmNlKSB7XHJcbiAgICAgICAgX3Jlc291cmNlLmlkUmVzb3VyY2UgPSBfaWRSZXNvdXJjZTtcclxuICAgICAgICB0aGlzLmRlcmVnaXN0ZXIoX3Jlc291cmNlKTsgLy8gZGVyZWdpc3RlciB0aGUgbmV3IGlkXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghX3Jlc291cmNlLmlkUmVzb3VyY2UpXHJcbiAgICAgICAgX3Jlc291cmNlLmlkUmVzb3VyY2UgPSBQcm9qZWN0LmdlbmVyYXRlSWQoX3Jlc291cmNlKTtcclxuXHJcbiAgICAgIFByb2plY3QucmVzb3VyY2VzW19yZXNvdXJjZS5pZFJlc291cmNlXSA9IF9yZXNvdXJjZTtcclxuXHJcbiAgICAgIGlmIChfcmVzb3VyY2UgaW5zdGFuY2VvZiBHcmFwaClcclxuICAgICAgICBfcmVzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5HUkFQSF9NVVRBVEVELCAoX2V2ZW50OiBFdmVudCkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVC5HUkFQSF9NVVRBVEVELCB7IGRldGFpbDogX3Jlc291cmNlIH0pKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSByZXNvdXJjZSBmcm9tIHRoZSBsaXN0IG9mIHJlc291cmNlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkZXJlZ2lzdGVyKF9yZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIChQcm9qZWN0LnJlc291cmNlc1tfcmVzb3VyY2UuaWRSZXNvdXJjZV0pO1xyXG4gICAgICBkZWxldGUgKFByb2plY3Quc2VyaWFsaXphdGlvbltfcmVzb3VyY2UuaWRSZXNvdXJjZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSBsaXN0IG9mIHJlc291cmNlcyBhbmQgdGhlaXIgc2VyaWFsaXphdGlvbiwgdGh1cyByZW1vdmluZyBhbGwgcmVzb3VyY2VzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICBQcm9qZWN0LnJlc291cmNlcyA9IHt9O1xyXG4gICAgICBQcm9qZWN0LnNlcmlhbGl6YXRpb24gPSB7fTtcclxuICAgICAgUHJvamVjdC5jbGVhclNjcmlwdE5hbWVzcGFjZXMoKTtcclxuICAgICAgLy8gUHJvamVjdC5zY3JpcHROYW1lc3BhY2VzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPFQgZXh0ZW5kcyBDb21wb25lbnQ+KF9jbGFzczogbmV3ICgpID0+IFQpOiBUW10ge1xyXG4gICAgLy8gICByZXR1cm4gPFRbXT4odGhpcy5jb21wb25lbnRzW19jbGFzcy5uYW1lXSB8fCBbXSkuc2xpY2UoMCk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGFsbCByZXNvdXJjZXMgb2YgdGhlIHJlcXVlc3RlZCB0eXBlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlc291cmNlc0J5VHlwZTxUPihfdHlwZTogbmV3IChfYXJnczogR2VuZXJhbCkgPT4gVCk6IFNlcmlhbGl6YWJsZVJlc291cmNlW10ge1xyXG4gICAgICBsZXQgZm91bmQ6IFNlcmlhbGl6YWJsZVJlc291cmNlW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgcmVzb3VyY2VJZCBpbiBQcm9qZWN0LnJlc291cmNlcykge1xyXG4gICAgICAgIGxldCByZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UgPSBQcm9qZWN0LnJlc291cmNlc1tyZXNvdXJjZUlkXTtcclxuICAgICAgICBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBfdHlwZSlcclxuICAgICAgICAgIGZvdW5kLnB1c2gocmVzb3VyY2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIHJlc291cmNlcyB3aXRoIHRoZSByZXF1ZXN0ZWQgbmFtZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRSZXNvdXJjZXNCeU5hbWUoX25hbWU6IHN0cmluZyk6IFNlcmlhbGl6YWJsZVJlc291cmNlW10ge1xyXG4gICAgICBsZXQgZm91bmQ6IFNlcmlhbGl6YWJsZVJlc291cmNlW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgcmVzb3VyY2VJZCBpbiBQcm9qZWN0LnJlc291cmNlcykge1xyXG4gICAgICAgIGxldCByZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UgPSBQcm9qZWN0LnJlc291cmNlc1tyZXNvdXJjZUlkXTtcclxuICAgICAgICBpZiAocmVzb3VyY2UubmFtZSA9PSBfbmFtZSlcclxuICAgICAgICAgIGZvdW5kLnB1c2gocmVzb3VyY2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBhIHVzZXIgcmVhZGFibGUgYW5kIHVuaXF1ZSBpZCB1c2luZyB0aGUgdHlwZSBvZiB0aGUgcmVzb3VyY2UsIHRoZSBkYXRlIGFuZCByYW5kb20gbnVtYmVyc1xyXG4gICAgICogQHBhcmFtIF9yZXNvdXJjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdlbmVyYXRlSWQoX3Jlc291cmNlOiBTZXJpYWxpemFibGVSZXNvdXJjZSk6IHN0cmluZyB7XHJcbiAgICAgIC8vIFRPRE86IGJ1aWxkIGlkIGFuZCBpbnRlZ3JhdGUgaW5mbyBmcm9tIHJlc291cmNlLCBub3QganVzdCBkYXRlXHJcbiAgICAgIGxldCBpZFJlc291cmNlOiBzdHJpbmc7XHJcbiAgICAgIGRvXHJcbiAgICAgICAgaWRSZXNvdXJjZSA9IF9yZXNvdXJjZS5jb25zdHJ1Y3Rvci5uYW1lICsgXCJ8XCIgKyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgKyBcInxcIiArIE1hdGgucmFuZG9tKCkudG9QcmVjaXNpb24oNSkuc3Vic3RyKDIsIDUpO1xyXG4gICAgICB3aGlsZSAoUHJvamVjdC5yZXNvdXJjZXNbaWRSZXNvdXJjZV0pO1xyXG4gICAgICByZXR1cm4gaWRSZXNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3RzLCBpZiBhbiBvYmplY3QgaXMgYSB7QGxpbmsgU2VyaWFsaXphYmxlUmVzb3VyY2V9XHJcbiAgICAgKiBAcGFyYW0gX29iamVjdCBUaGUgb2JqZWN0IHRvIGV4YW1pbmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc1Jlc291cmNlKF9vYmplY3Q6IFNlcmlhbGl6YWJsZSk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKFJlZmxlY3QuaGFzKF9vYmplY3QsIFwiaWRSZXNvdXJjZVwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHJlc291cmNlIHN0b3JlZCB3aXRoIHRoZSBnaXZlbiBpZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFJlc291cmNlKF9pZFJlc291cmNlOiBzdHJpbmcpOiBQcm9taXNlPFNlcmlhbGl6YWJsZVJlc291cmNlPiB7XHJcbiAgICAgIGxldCByZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UgPSBQcm9qZWN0LnJlc291cmNlc1tfaWRSZXNvdXJjZV07XHJcbiAgICAgIGlmICghcmVzb3VyY2UpIHtcclxuICAgICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IFByb2plY3Quc2VyaWFsaXphdGlvbltfaWRSZXNvdXJjZV07XHJcbiAgICAgICAgaWYgKCFzZXJpYWxpemF0aW9uKSB7XHJcbiAgICAgICAgICBEZWJ1Zy5lcnJvcihcIlJlc291cmNlIG5vdCBmb3VuZFwiLCBfaWRSZXNvdXJjZSk7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzb3VyY2UgPSBhd2FpdCBQcm9qZWN0LmRlc2VyaWFsaXplUmVzb3VyY2Uoc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmVnaXN0ZXJzIGEgcmVzb3VyY2UgZnJvbSBhIHtAbGluayBOb2RlfSwgY29weWluZyB0aGUgY29tcGxldGUgZ3JhcGggc3RhcnRpbmcgd2l0aCBpdFxyXG4gICAgICogQHBhcmFtIF9ub2RlIEEgbm9kZSB0byBjcmVhdGUgdGhlIHJlc291cmNlIGZyb21cclxuICAgICAqIEBwYXJhbSBfcmVwbGFjZVdpdGhJbnN0YW5jZSBpZiB0cnVlIChkZWZhdWx0KSwgdGhlIG5vZGUgdXNlZCBhcyBvcmlnaW4gaXMgcmVwbGFjZWQgYnkgYSB7QGxpbmsgR3JhcGhJbnN0YW5jZX0gb2YgdGhlIHtAbGluayBHcmFwaH0gY3JlYXRlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlZ2lzdGVyQXNHcmFwaChfbm9kZTogTm9kZSwgX3JlcGxhY2VXaXRoSW5zdGFuY2U6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxHcmFwaD4ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IF9ub2RlLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBsZXQgZ3JhcGg6IEdyYXBoID0gbmV3IEdyYXBoKF9ub2RlLm5hbWUpO1xyXG4gICAgICBhd2FpdCBncmFwaC5kZXNlcmlhbGl6ZShzZXJpYWxpemF0aW9uKTtcclxuICAgICAgUHJvamVjdC5yZWdpc3RlcihncmFwaCk7XHJcblxyXG4gICAgICBpZiAoX3JlcGxhY2VXaXRoSW5zdGFuY2UgJiYgX25vZGUuZ2V0UGFyZW50KCkpIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2U6IEdyYXBoSW5zdGFuY2UgPSBhd2FpdCBQcm9qZWN0LmNyZWF0ZUdyYXBoSW5zdGFuY2UoZ3JhcGgpO1xyXG4gICAgICAgIF9ub2RlLmdldFBhcmVudCgpLnJlcGxhY2VDaGlsZChfbm9kZSwgaW5zdGFuY2UpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZ3JhcGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEge0BsaW5rIEdyYXBoSW5zdGFuY2V9IG9mIHRoZSBnaXZlbiB7QGxpbmsgR3JhcGh9IFxyXG4gICAgICogYW5kIGNvbm5lY3RzIGl0IHRvIHRoZSBncmFwaCBmb3Igc3luY2hyb25pc2F0aW9uIG9mIG11dGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZUdyYXBoSW5zdGFuY2UoX2dyYXBoOiBHcmFwaCk6IFByb21pc2U8R3JhcGhJbnN0YW5jZT4ge1xyXG4gICAgICBsZXQgaW5zdGFuY2U6IEdyYXBoSW5zdGFuY2UgPSBuZXcgR3JhcGhJbnN0YW5jZShfZ3JhcGgpOyAvLyBUT0RPOiBjbGVhbnVwIHNpbmNlIGNyZWF0aW9uIG1vdmVkIGhlcmVcclxuICAgICAgYXdhaXQgaW5zdGFuY2UuY29ubmVjdFRvR3JhcGgoKTtcclxuICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgdGhlIGdpdmVuIHtAbGluayBHcmFwaEluc3RhbmNlfSB0byBiZSByZXN5bmNlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyR3JhcGhJbnN0YW5jZUZvclJlc3luYyhfaW5zdGFuY2U6IEdyYXBoSW5zdGFuY2UpOiB2b2lkIHtcclxuICAgICAgbGV0IGluc3RhbmNlczogR3JhcGhJbnN0YW5jZVtdID0gUHJvamVjdC5ncmFwaEluc3RhbmNlc1RvUmVzeW5jW19pbnN0YW5jZS5pZFNvdXJjZV0gfHwgW107XHJcbiAgICAgIGluc3RhbmNlcy5wdXNoKF9pbnN0YW5jZSk7XHJcbiAgICAgIFByb2plY3QuZ3JhcGhJbnN0YW5jZXNUb1Jlc3luY1tfaW5zdGFuY2UuaWRTb3VyY2VdID0gaW5zdGFuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzeW5jIGFsbCB7QGxpbmsgR3JhcGhJbnN0YW5jZX0gcmVnaXN0ZXJlZCB0byB0aGUgZ2l2ZW4ge0BsaW5rIEdyYXBofVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlc3luY0dyYXBoSW5zdGFuY2VzKF9ncmFwaDogR3JhcGgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IGluc3RhbmNlczogR3JhcGhJbnN0YW5jZVtdID0gUHJvamVjdC5ncmFwaEluc3RhbmNlc1RvUmVzeW5jW19ncmFwaC5pZFJlc291cmNlXTtcclxuICAgICAgaWYgKCFpbnN0YW5jZXMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBmb3IgKGxldCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpXHJcbiAgICAgICAgYXdhaXQgaW5zdGFuY2UuY29ubmVjdFRvR3JhcGgoKTtcclxuICAgICAgZGVsZXRlIChQcm9qZWN0LmdyYXBoSW5zdGFuY2VzVG9SZXN5bmNbX2dyYXBoLmlkUmVzb3VyY2VdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIHRoZSBnaXZlbiBuYW1lc3BhY2UgdG8gdGhlIGxpc3Qgb2Ygc2NyaXB0LW5hbWVzcGFjZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJTY3JpcHROYW1lc3BhY2UoX25hbWVzcGFjZTogT2JqZWN0KTogdm9pZCB7XHJcbiAgICAgIGxldCBuYW1lOiBzdHJpbmcgPSBTZXJpYWxpemVyLnJlZ2lzdGVyTmFtZXNwYWNlKF9uYW1lc3BhY2UpO1xyXG4gICAgICBpZiAoIVByb2plY3Quc2NyaXB0TmFtZXNwYWNlc1tuYW1lXSlcclxuICAgICAgICBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXNbbmFtZV0gPSBfbmFtZXNwYWNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXIgdGhlIGxpc3Qgb2Ygc2NyaXB0LW5hbWVzcGFjZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXJTY3JpcHROYW1lc3BhY2VzKCk6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIFByb2plY3Quc2NyaXB0TmFtZXNwYWNlcykge1xyXG4gICAgICAgIFJlZmxlY3Quc2V0KHdpbmRvdywgbmFtZSwgdW5kZWZpbmVkKTtcclxuICAgICAgICBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXNbbmFtZV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgZGVsZXRlIFByb2plY3Quc2NyaXB0TmFtZXNwYWNlc1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29sbGVjdHMgYWxsIHtAbGluayBDb21wb25lbnRTY3JpcHR9cyByZWdpc3RlcmVkIGluIHtAbGluayBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXN9IGFuZCByZXR1cm5zIHRoZW0uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29tcG9uZW50U2NyaXB0cygpOiBDb21wb25lbnRTY3JpcHRzIHtcclxuICAgICAgbGV0IGNvbXBvbWVudHM6IENvbXBvbmVudFNjcmlwdHMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbmFtZXNwYWNlIGluIFByb2plY3Quc2NyaXB0TmFtZXNwYWNlcykge1xyXG4gICAgICAgIGNvbXBvbWVudHNbbmFtZXNwYWNlXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gUHJvamVjdC5zY3JpcHROYW1lc3BhY2VzW25hbWVzcGFjZV0pIHtcclxuICAgICAgICAgIGxldCBzY3JpcHQ6IENvbXBvbmVudFNjcmlwdCA9IFJlZmxlY3QuZ2V0KFByb2plY3Quc2NyaXB0TmFtZXNwYWNlc1tuYW1lc3BhY2VdLCBuYW1lKTtcclxuICAgICAgICAgIC8vIFVzaW5nIE9iamVjdC5jcmVhdGUgZG9lc24ndCBjYWxsIHRoZSBjb25zdHJ1Y3RvciwgYnV0IGluc3RhbmNlb2YgY2FuIGJlIHVzZWQuIE1vcmUgZWxlZ2FudCB0aGFuIHRoZSBsb29wIGFib3ZlLCB0aG91Z2ggbWF5YmUgbm90IGFzIHBlcmZvcm1hbnQuIFxyXG5cclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBvOiBHZW5lcmFsID0gT2JqZWN0LmNyZWF0ZShzY3JpcHQpO1xyXG4gICAgICAgICAgICBpZiAoby5wcm90b3R5cGUgaW5zdGFuY2VvZiBDb21wb25lbnRTY3JpcHQpXHJcbiAgICAgICAgICAgICAgY29tcG9tZW50c1tuYW1lc3BhY2VdLnB1c2goc2NyaXB0KTtcclxuICAgICAgICAgIH0gY2F0Y2ggKF9lKSB7IC8qICovIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGNvbXBvbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkcyBhIHNjcmlwdCBmcm9tIHRoZSBnaXZlbiBVUkwgYW5kIGludGVncmF0ZXMgaXQgaW50byBhIHtAbGluayBIVE1MU2NyaXB0RWxlbWVudH0gaW4gdGhlIHtAbGluayBkb2N1bWVudC5oZWFkfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRTY3JpcHQoX3VybDogUmVxdWVzdEluZm8pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IHNjcmlwdDogSFRNTFNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiAgICAgIC8vIHNjcmlwdC50eXBlID0gXCJtb2R1bGVcIjtcclxuICAgICAgc2NyaXB0LmFzeW5jID0gZmFsc2U7XHJcbiAgICAgIC8vIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBoYW5kbGVMb2FkZWRTY3JpcHQpXHJcbiAgICAgIGxldCBoZWFkOiBIVE1MSGVhZEVsZW1lbnQgPSBkb2N1bWVudC5oZWFkO1xyXG4gICAgICBoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgIERlYnVnLmxvZyhcIkxvYWRpbmc6IFwiLCBfdXJsKTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcclxuICAgICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gX3Jlc29sdmUoKSk7XHJcbiAgICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKSA9PiB7XHJcbiAgICAgICAgICBEZWJ1Zy5lcnJvcihcIkxvYWRpbmcgc2NyaXB0XCIsIF91cmwpO1xyXG4gICAgICAgICAgX3JlamVjdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNjcmlwdC5zcmMgPSBfdXJsLnRvU3RyaW5nKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCB7QGxpbmsgUmVzb3VyY2VzfSBmcm9tIHRoZSBnaXZlbiB1cmxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkUmVzb3VyY2VzKF91cmw6IFJlcXVlc3RJbmZvKTogUHJvbWlzZTxSZXNvdXJjZXM+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goX3VybCk7XHJcbiAgICAgIGNvbnN0IHJlc291cmNlRmlsZUNvbnRlbnQ6IHN0cmluZyA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuXHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gU2VyaWFsaXplci5wYXJzZShyZXNvdXJjZUZpbGVDb250ZW50KTtcclxuICAgICAgbGV0IHJlY29uc3RydWN0aW9uOiBSZXNvdXJjZXMgPSBhd2FpdCBQcm9qZWN0LmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb24pO1xyXG4gICAgICBQcm9qZWN0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5ULlJFU09VUkNFU19MT0FERUQsIHsgZGV0YWlsOiB7IHVybDogX3VybCwgcmVzb3VyY2VzOiByZWNvbnN0cnVjdGlvbiB9IH0pKTtcclxuICAgICAgcmV0dXJuIHJlY29uc3RydWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBhbGwgcmVzb3VyY2VzIGZyb20gdGhlIHtAbGluayBkb2N1bWVudC5oZWFkfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRSZXNvdXJjZXNGcm9tSFRNTCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgY29uc3QgaGVhZDogSFRNTEhlYWRFbGVtZW50ID0gZG9jdW1lbnQuaGVhZDtcclxuICAgICAgbGV0IGxpbmtzOiBOb2RlTGlzdE9mPEhUTUxMaW5rRWxlbWVudD4gPSBoZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rW3R5cGU9cmVzb3VyY2VzXVwiKTtcclxuICAgICAgZm9yIChsZXQgbGluayBvZiBsaW5rcykge1xyXG4gICAgICAgIGxldCB1cmw6IFJlcXVlc3RJbmZvID0gbGluay5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XHJcbiAgICAgICAgYXdhaXQgUHJvamVjdC5sb2FkUmVzb3VyY2VzKHVybCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlcmlhbGl6ZSBhbGwgcmVzb3VyY2VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb25PZlJlc291cmNlcyB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uT2ZSZXNvdXJjZXMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgaWRSZXNvdXJjZSBpbiBQcm9qZWN0LnJlc291cmNlcykge1xyXG4gICAgICAgIGxldCByZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UgPSBQcm9qZWN0LnJlc291cmNlc1tpZFJlc291cmNlXTtcclxuICAgICAgICBpZiAoaWRSZXNvdXJjZSAhPSByZXNvdXJjZS5pZFJlc291cmNlKVxyXG4gICAgICAgICAgRGVidWcuZXJyb3IoXCJSZXNvdXJjZS1pZCBtaXNtYXRjaFwiLCByZXNvdXJjZSk7XHJcbiAgICAgICAgc2VyaWFsaXphdGlvbltpZFJlc291cmNlXSA9IFNlcmlhbGl6ZXIuc2VyaWFsaXplKHJlc291cmNlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSByZXNvdXJjZXMgZnJvbSBhIHNlcmlhbGl6YXRpb24sIGRlbGV0aW5nIGFsbCByZXNvdXJjZXMgcHJldmlvdXNseSByZWdpc3RlcmVkXHJcbiAgICAgKiBAcGFyYW0gX3NlcmlhbGl6YXRpb24gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb25PZlJlc291cmNlcyk6IFByb21pc2U8UmVzb3VyY2VzPiB7XHJcbiAgICAgIFByb2plY3Quc2VyaWFsaXphdGlvbiA9IF9zZXJpYWxpemF0aW9uO1xyXG4gICAgICBQcm9qZWN0LnJlc291cmNlcyA9IHt9O1xyXG4gICAgICBmb3IgKGxldCBpZFJlc291cmNlIGluIF9zZXJpYWxpemF0aW9uKSB7XHJcbiAgICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBfc2VyaWFsaXphdGlvbltpZFJlc291cmNlXTtcclxuICAgICAgICBsZXQgcmVzb3VyY2U6IFNlcmlhbGl6YWJsZVJlc291cmNlID0gYXdhaXQgUHJvamVjdC5kZXNlcmlhbGl6ZVJlc291cmNlKHNlcmlhbGl6YXRpb24pO1xyXG4gICAgICAgIGlmIChyZXNvdXJjZSlcclxuICAgICAgICAgIFByb2plY3QucmVzb3VyY2VzW2lkUmVzb3VyY2VdID0gcmVzb3VyY2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb2plY3QucmVzb3VyY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplUmVzb3VyY2UoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZVJlc291cmNlPiB7XHJcbiAgICAgIHJldHVybiA8UHJvbWlzZTxTZXJpYWxpemFibGVSZXNvdXJjZT4+U2VyaWFsaXplci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZCWCB7XHJcbiAgLyoqXHJcbiAgICogUmVhZGVyIHRvIHJlYWQgZGF0YSBmcm9tIGFuIGFycmF5IGJ1ZmZlciBtb3JlIGNvbnZlbmllbnRseS5cclxuICAgKiBJdCBzYXZlcyBhIGN1cnJlbnQgb2Zmc2V0IHdoaWNoIGlzIHVwZGF0ZWQgd2hlbiBkYXRhIGlzIHJlYWQgZHVlIHRvIGl0cyBieXRlbGVuZ3RoLlxyXG4gICAqIGRlc3BpdGUgZ2V0U2VxdWVuY2UgaXQgaXMgbW9zdGx5IGEgY29weSBvZiB0aGUgcmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vcGljb2RlNy9iaW5hcnktcmVhZGVyXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBCdWZmZXJSZWFkZXIge1xyXG4gICAgcHVibGljIG9mZnNldDogbnVtYmVyO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHZpZXc6IERhdGFWaWV3O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYnVmZmVyOiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICB0aGlzLnZpZXcgPSBuZXcgRGF0YVZpZXcoX2J1ZmZlcik7XHJcbiAgICAgIHRoaXMub2Zmc2V0ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2hhcihfb2Zmc2V0OiBudW1iZXIgPSB0aGlzLm9mZnNldCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuZ2V0VWludDgoX29mZnNldCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRCb29sKF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldFVpbnQ4KF9vZmZzZXQpICE9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFVpbnQ4KF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogbnVtYmVyIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgMTtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRVaW50OChfb2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VWludDMyKF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogbnVtYmVyIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgNDtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRVaW50MzIoX29mZnNldCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFVpbnQ2NChfb2Zmc2V0OiBudW1iZXIgPSB0aGlzLm9mZnNldCk6IGJpZ2ludCB7XHJcbiAgICAgIHRoaXMub2Zmc2V0ID0gX29mZnNldCArIDg7XHJcbiAgICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0QmlnVWludDY0KF9vZmZzZXQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJbnQxNihfb2Zmc2V0OiBudW1iZXIgPSB0aGlzLm9mZnNldCk6IG51bWJlciB7XHJcbiAgICAgIHRoaXMub2Zmc2V0ID0gX29mZnNldCArIDI7XHJcbiAgICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0SW50MTYoX29mZnNldCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEludDMyKF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogbnVtYmVyIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgNDtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRJbnQzMihfb2Zmc2V0LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50NjQoX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBiaWdpbnQge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF9vZmZzZXQgKyA4O1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LmdldEJpZ0ludDY0KF9vZmZzZXQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGbG9hdDMyKF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogbnVtYmVyIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgNDtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRGbG9hdDMyKF9vZmZzZXQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGbG9hdDY0KF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogbnVtYmVyIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgODtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRGbG9hdDY0KF9vZmZzZXQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTdHJpbmcoX2xlbmd0aDogbnVtYmVyLCBfb2Zmc2V0OiBudW1iZXIgPSB0aGlzLm9mZnNldCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnRoaXMuZ2V0U2VxdWVuY2UodGhpcy5nZXRVaW50OCwgX2xlbmd0aCwgX29mZnNldCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyAqZ2V0U2VxdWVuY2U8VCBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oX2dldHRlcjogKCkgPT4gVCwgX2xlbmd0aDogbnVtYmVyLCBfb2Zmc2V0OiBudW1iZXIgPSB0aGlzLm9mZnNldCk6IEdlbmVyYXRvcjxUPiB7XHJcbiAgICAgIHRoaXMub2Zmc2V0ID0gX29mZnNldDtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IF9sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHlpZWxkIF9nZXR0ZXIuY2FsbCh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGQlgge1xyXG4gIC8qKlxyXG4gICAqIEludGVyZmFjZSB0byByZXByZXNlbnQgZmJ4IGZpbGVzIGNvbnRhaW5pbmcgaXRzIGRvY3VtZW50cywgZGVmaW5pdGlvbnMsIG9iamVjdHMgYW5kIGNvbm5lY3Rpb25zLlxyXG4gICAqIEl0cyBvYmplY3RzIGFyZSBkZXZpZGVkIGluIGFsbCBhbmQgdGhlIGRpZmZlcmVudCBvYmplY3QgdHlwZXMuXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgRkJYIHtcclxuICAgIGRvY3VtZW50czogRG9jdW1lbnRbXTtcclxuICAgIGRlZmluaXRpb25zPzogRGVmaW5pdGlvbnM7XHJcbiAgICBvYmplY3RzOiB7XHJcbiAgICAgIGFsbDogT2JqZWN0W107XHJcbiAgICAgIG1vZGVsczogTW9kZWxbXTtcclxuICAgICAgZ2VvbWV0cmllczogR2VvbWV0cnlbXTtcclxuICAgICAgcG9zZXM6IE9iamVjdFtdO1xyXG4gICAgICBtYXRlcmlhbHM6IE1hdGVyaWFsW107XHJcbiAgICAgIHRleHR1cmVzOiBUZXh0dXJlW107XHJcbiAgICAgIGFuaW1TdGFja3M6IE9iamVjdFtdO1xyXG4gICAgfTtcclxuICAgIGNvbm5lY3Rpb25zOiBDb25uZWN0aW9uW107XHJcbiAgfVxyXG5cclxuICBpbnRlcmZhY2UgT2JqZWN0QmFzZSB7XHJcbiAgICB1aWQ6IG51bWJlcjtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHR5cGU/OiBzdHJpbmc7XHJcbiAgICBzdWJ0eXBlPzogc3RyaW5nO1xyXG4gICAgY2hpbGRyZW4/OiBPYmplY3RbXTtcclxuICAgIHBhcmVudHM/OiBPYmplY3RbXTtcclxuXHJcbiAgICBsb2FkZWQ6IGJvb2xlYW47XHJcbiAgICBsb2FkOiAoKSA9PiBPYmplY3Q7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnRlcmZhY2UgdG8gcmVwcmVzZW50IGZieC1vYmplY3RzLlxyXG4gICAqIEFsbCBmaWVsZHMgb3RoZXIgdGhhbiB1aWQsIG5hbWUsIHR5cGUsIHN1YnR5cGUsIGNoaWxkcmVuIGFuZCBwYXJlbnRzIGFyZSBsb2FkZWQgd2l0aCB0aGUgbG9hZC1tZXRob2QuXHJcbiAgICogRWFjaCBvYmplY3QgY2FuIGJlIGludGVycHJldGVkIGFzIGFuIGV4cGxpY2l0IGZieCBvYmplY3QgdHlwZSBkZWZpbmVkIGluIEZ1ZGdlQ29yZS5GQlguIEV4cGxpY2l0IHR5cGVzIGhhdmUgYmVlbiBkZWZpbmVkXHJcbiAgICogd2l0aCB0aGUgaGVscCBvZiBmb2xsb3dpbmcgcmVmZXJlbmNlOlxyXG4gICAqIGh0dHBzOi8vYXJjaGl2ZS5ibGVuZGVyLm9yZy93aWtpL2luZGV4LnBocC9Vc2VyOk1vbnQyOS9Gb3VuZGF0aW9uL0ZCWF9GaWxlX1N0cnVjdHVyZS8jU29tZV9TcGVjaWZpY19Qcm9wZXJ0eV9UeXBlc1xyXG4gICAqIEBhdXRob3IgTWF0dGhpYXMgUm9taW5nLCBIRlUsIDIwMjNcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBPYmplY3QgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFtuYW1lOiBzdHJpbmddOiBOb2RlUHJvcGVydHkgfCB7IFtuYW1lOiBzdHJpbmddOiBOb2RlUHJvcGVydHkgfSB8IFByb3BlcnR5NzAgfCBPYmplY3QgfCBPYmplY3RbXSB8ICgoKSA9PiBPYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudCBleHRlbmRzIE9iamVjdEJhc2Uge1xyXG4gICAgU291cmNlT2JqZWN0PzogdW5kZWZpbmVkO1xyXG4gICAgQWN0aXZlQW5pbVN0YWNrTmFtZT86IHN0cmluZztcclxuICAgIFJvb3ROb2RlPzogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBOb2RlQXR0cmlidXRlIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBUeXBlRmxhZ3M/OiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEdlb21ldHJ5IGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBHZW9tZXRyeVZlcnNpb24/OiBudW1iZXI7XHJcbiAgICBWZXJ0aWNlcz86IEZsb2F0MzJBcnJheTtcclxuICAgIFBvbHlnb25WZXJ0ZXhJbmRleD86IEludDMyQXJyYXk7XHJcbiAgICBMYXllckVsZW1lbnROb3JtYWw/OiBMYXllckVsZW1lbnROb3JtYWw7XHJcbiAgICBMYXllckVsZW1lbnRVVj86IExheWVyRWxlbWVudFVWOyAvLyB8IExheWVyRWxlbWVudFVWW107IC8vIFRPRE86IG1pZ2h0IG5lZWQgdG8gcmVhZGQgdGhpc1xyXG4gICAgTGF5ZXJFbGVtZW50TWF0ZXJpYWw/OiBMYXllckVsZW1lbnRNYXRlcmlhbDtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTW9kZWwgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFZlcnNpb24/OiBudW1iZXI7XHJcbiAgICBMY2xUcmFuc2xhdGlvbj86IEZ1ZGdlQ29yZS5WZWN0b3IzIHwgQW5pbUN1cnZlTm9kZTtcclxuICAgIExjbFJvdGF0aW9uPzogRnVkZ2VDb3JlLlZlY3RvcjMgfCBBbmltQ3VydmVOb2RlO1xyXG4gICAgTGNsU2NhbGluZz86IEZ1ZGdlQ29yZS5WZWN0b3IzIHwgQW5pbUN1cnZlTm9kZTtcclxuICAgIFByZVJvdGF0aW9uPzogRnVkZ2VDb3JlLlZlY3RvcjM7XHJcbiAgICBQb3N0Um90YXRpb24/OiBGdWRnZUNvcmUuVmVjdG9yMztcclxuICAgIFNjYWxpbmdPZmZzZXQ/OiBGdWRnZUNvcmUuVmVjdG9yMztcclxuICAgIFNjYWxpbmdQaXZvdD86IEZ1ZGdlQ29yZS5WZWN0b3IzO1xyXG4gICAgUm90YXRpb25PZmZzZXQ/OiBGdWRnZUNvcmUuVmVjdG9yMztcclxuICAgIFJvdGF0aW9uUGl2b3Q/OiBGdWRnZUNvcmUuVmVjdG9yMztcclxuICAgIEluaGVyaXRUeXBlPzogbnVtYmVyO1xyXG4gICAgRXVsZXJPcmRlcj86IHN0cmluZztcclxuICAgIGN1cnJlbnRVVlNldD86IHN0cmluZztcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWwgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFZlcnNpb24/OiBudW1iZXI7XHJcbiAgICBTaGFkaW5nTW9kZWw/OiBzdHJpbmc7XHJcblxyXG4gICAgRGlmZnVzZT86IEZ1ZGdlQ29yZS5WZWN0b3IzO1xyXG4gICAgRGlmZnVzZUNvbG9yPzogRnVkZ2VDb3JlLlZlY3RvcjMgfCBUZXh0dXJlO1xyXG4gICAgRGlmZnVzZUZhY3Rvcj86IG51bWJlcjtcclxuXHJcbiAgICBBbWJpZW50PzogRnVkZ2VDb3JlLlZlY3RvcjM7XHJcbiAgICBBbWJpZW50Q29sb3I/OiBGdWRnZUNvcmUuVmVjdG9yMyB8IFRleHR1cmU7XHJcblxyXG4gICAgU2hpbmluZXNzPzogbnVtYmVyO1xyXG4gICAgU2hpbmluZXNzRXhwb25lbnQ/OiBGdWRnZUNvcmUuVmVjdG9yMyB8IFRleHR1cmU7XHJcblxyXG4gICAgU3BlY3VsYXI/OiBGdWRnZUNvcmUuVmVjdG9yMztcclxuICAgIFNwZWN1bGFyQ29sb3I/OiBGdWRnZUNvcmUuVmVjdG9yMyB8IFRleHR1cmU7XHJcbiAgICBTcGVjdWxhckZhY3Rvcj86IG51bWJlcjtcclxuXHJcbiAgICBSZWZsZWN0aXZpdHk/OiBudW1iZXI7XHJcbiAgICBSZWZsZWN0aW9uRmFjdG9yPzogbnVtYmVyO1xyXG5cclxuICAgIE9wYWNpdHk/OiBudW1iZXI7XHJcbiAgICBUcmFuc3BhcmVuY3lGYWN0b3I/OiBudW1iZXI7XHJcblxyXG4gICAgRW1pc3NpdmU/OiBGdWRnZUNvcmUuVmVjdG9yMztcclxuICAgIE5vcm1hbE1hcD86IFRleHR1cmU7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIERlZm9ybWVyIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBWZXJzaW9uPzogbnVtYmVyO1xyXG4gICAgU2tpbm5pbmdUeXBlPzogc3RyaW5nO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBTdWJEZWZvcm1lciBleHRlbmRzIE9iamVjdEJhc2Uge1xyXG4gICAgVmVyc2lvbj86IG51bWJlcjtcclxuICAgIFRyYW5zZm9ybT86IEZsb2F0MzJBcnJheTtcclxuICAgIFRyYW5zZm9ybUxpbms/OiBGbG9hdDMyQXJyYXk7XHJcbiAgICBJbmRleGVzPzogVWludDE2QXJyYXk7XHJcbiAgICBXZWlnaHRzPzogRmxvYXQzMkFycmF5O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBUZXh0dXJlIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBGaWxlTmFtZT86IHN0cmluZztcclxuICAgIFJlbGF0aXZlRmlsZW5hbWU/OiBzdHJpbmc7XHJcbiAgICBNb2RlbFVWU2NhbGluZz86IG51bWJlcjtcclxuICAgIE1vZGVsVVZUcmFuc2xhdGlvbj86IG51bWJlcjtcclxuICAgIFVWU2V0Pzogc3RyaW5nO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBWaWRlbyBleHRlbmRzIE9iamVjdEJhc2Uge1xyXG4gICAgRmlsZU5hbWU/OiBzdHJpbmc7XHJcbiAgICBSZWxhdGl2ZUZpbGVuYW1lPzogc3RyaW5nO1xyXG4gICAgVXNlTWlwTWFwPzogbnVtYmVyO1xyXG4gICAgQ29udGVudD86IFVpbnQ4QXJyYXk7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1DdXJ2ZU5vZGUgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIGRYPzogbnVtYmVyIHwgQW5pbUN1cnZlO1xyXG4gICAgZFk/OiBudW1iZXIgfCBBbmltQ3VydmU7XHJcbiAgICBkWj86IG51bWJlciB8IEFuaW1DdXJ2ZTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbUN1cnZlIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBLZXlWZXI/OiBudW1iZXI7XHJcbiAgICBEZWZhdWx0PzogbnVtYmVyO1xyXG4gICAgS2V5VGltZT86IEJpZ0ludDY0QXJyYXk7XHJcbiAgICBLZXlWYWx1ZUZsb2F0PzogRmxvYXQzMkFycmF5O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBMYXllckVsZW1lbnQge1xyXG4gICAgTmFtZTogc3RyaW5nO1xyXG4gICAgVmVyc2lvbjogbnVtYmVyO1xyXG4gICAgTWFwcGluZ0luZm9ybWF0aW9uVHlwZTogc3RyaW5nO1xyXG4gICAgUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlOiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIExheWVyRWxlbWVudE5vcm1hbCBleHRlbmRzIExheWVyRWxlbWVudCB7XHJcbiAgICBOb3JtYWxzOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBOb3JtYWxzVzogRmxvYXQzMkFycmF5O1xyXG4gICAgTm9ybWFsc0luZGV4PzogVWludDE2QXJyYXk7IC8vIFRPRE86IGZpbmQgYW4gRkJYIGZpbGUgd2hpY2ggdXNlcyBub3JtYWxzIGluZGV4XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIExheWVyRWxlbWVudFVWIGV4dGVuZHMgTGF5ZXJFbGVtZW50IHtcclxuICAgIFVWPzogRmxvYXQzMkFycmF5O1xyXG4gICAgVVZJbmRleD86IFVpbnQxNkFycmF5O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBMYXllckVsZW1lbnRNYXRlcmlhbCBleHRlbmRzIExheWVyRWxlbWVudCB7XHJcbiAgICBNYXRlcmlhbHM/OiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgZW51bSBNQVBQSU5HX0lORk9STUFUSU9OX1RZUEUge1xyXG4gICAgQllfVkVSVEVYLCBCWV9QT0xZR09OLCBCWV9QT0xZR09OX1ZFUlRFWCwgQllfRURHRSwgQUxMX1NBTUVcclxuICB9XHJcblxyXG4gIGV4cG9ydCBlbnVtIFJFRkVSRU5DRV9JTkZPUk1BVElPTl9UWVBFIHtcclxuICAgIERJUkVDVCwgSU5ERVhfVE9fRElSRUNUXHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb24ge1xyXG4gICAgcGFyZW50VUlEOiBudW1iZXI7XHJcbiAgICBjaGlsZFVJRDogbnVtYmVyO1xyXG4gICAgcHJvcGVydHlOYW1lOiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIERlZmluaXRpb25zIHtcclxuICAgIHZlcnNpb246IG51bWJlcjtcclxuICAgIG9iamVjdFR5cGVzOiBPYmplY3RUeXBlW107XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIE9iamVjdFR5cGUge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY291bnQ6IG51bWJlcjtcclxuICAgIHByb3BlcnR5VGVtcGxhdGU6IFByb3BlcnR5VGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5VGVtcGxhdGUge1xyXG4gICAgW3Byb3BlcnR5TmFtZTogc3RyaW5nXTogUHJvcGVydHk3MDtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBc3NldCBsb2FkZXIgZm9yIEZpbG1ib3ggZmlsZXMuXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBGQlhMb2FkZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbG9hZGVyczogeyBbdXJpOiBzdHJpbmddOiBGQlhMb2FkZXIgfTtcclxuXHJcbiAgICBzdGF0aWMgI2RlZmF1bHRNYXRlcmlhbDogTWF0ZXJpYWw7XHJcbiAgICBzdGF0aWMgI2RlZmF1bHRTa2luTWF0ZXJpYWw6IE1hdGVyaWFsO1xyXG5cclxuICAgIHB1YmxpYyByZWFkb25seSBmYng6IEZCWC5GQlg7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbm9kZXM6IEZCWC5Ob2RlW107XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgdXJpOiBzdHJpbmc7XHJcblxyXG4gICAgI3NjZW5lczogR3JhcGhbXTtcclxuICAgICNub2RlczogTm9kZVtdO1xyXG4gICAgI21lc2hlczogTWVzaEZCWFtdO1xyXG4gICAgI21hdGVyaWFsczogTWF0ZXJpYWxbXTtcclxuICAgICNza2luTWF0ZXJpYWxzOiBNYXRlcmlhbFtdID0gW107XHJcbiAgICAjdGV4dHVyZXM6IFRleHR1cmVbXTtcclxuICAgICNza2VsZXRvbnM6IENvbXBvbmVudFNrZWxldG9uW107XHJcbiAgICAjYW5pbWF0aW9uczogQW5pbWF0aW9uW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9idWZmZXI6IEFycmF5QnVmZmVyLCBfdXJpOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy51cmkgPSBfdXJpO1xyXG4gICAgICB0aGlzLm5vZGVzID0gRkJYLnBhcnNlTm9kZXNGcm9tQmluYXJ5KF9idWZmZXIpO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLm5vZGVzKTtcclxuICAgICAgdGhpcy5mYnggPSBGQlgubG9hZEZyb21Ob2Rlcyh0aGlzLm5vZGVzKTtcclxuICAgICAgY29uc29sZS5sb2codGhpcy5mYngpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBkZWZhdWx0TWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZGVmYXVsdE1hdGVyaWFsIHx8ICh0aGlzLiNkZWZhdWx0TWF0ZXJpYWwgPVxyXG4gICAgICAgIG5ldyBNYXRlcmlhbChcIkZCWERlZmF1bHRNYXRlcmlhbFwiLCBTaGFkZXJHb3VyYXVkLCBuZXcgQ29hdFJlbWlzc2l2ZShDb2xvci5DU1MoXCJ3aGl0ZVwiKSkpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0IGRlZmF1bHRTa2luTWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZGVmYXVsdFNraW5NYXRlcmlhbCB8fCAodGhpcy4jZGVmYXVsdFNraW5NYXRlcmlhbCA9XHJcbiAgICAgICAgbmV3IE1hdGVyaWFsKFwiRkJYRGVmYXVsdFNraW5NYXRlcmlhbFwiLCBTaGFkZXJHb3VyYXVkU2tpbiwgbmV3IENvYXRSZW1pc3NpdmUoQ29sb3IuQ1NTKFwid2hpdGVcIikpKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgTE9BRChfdXJpOiBzdHJpbmcpOiBQcm9taXNlPEZCWExvYWRlcj4ge1xyXG4gICAgICBpZiAoIXRoaXMubG9hZGVycylcclxuICAgICAgICB0aGlzLmxvYWRlcnMgPSB7fTtcclxuICAgICAgaWYgKCF0aGlzLmxvYWRlcnNbX3VyaV0pIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZTogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChfdXJpKTtcclxuICAgICAgICBjb25zdCBiaW5hcnk6IEFycmF5QnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgICB0aGlzLmxvYWRlcnNbX3VyaV0gPSBuZXcgRkJYTG9hZGVyKGJpbmFyeSwgX3VyaSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMubG9hZGVyc1tfdXJpXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U2NlbmUoX2luZGV4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxHcmFwaD4ge1xyXG4gICAgICBpZiAoIXRoaXMuI3NjZW5lcylcclxuICAgICAgICB0aGlzLiNzY2VuZXMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNzY2VuZXNbX2luZGV4XSkge1xyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50RkJYOiBGQlguRG9jdW1lbnQgPSB0aGlzLmZieC5kb2N1bWVudHNbX2luZGV4XS5sb2FkKCk7XHJcbiAgICAgICAgY29uc3Qgc2NlbmU6IEdyYXBoID0gbmV3IEdyYXBoKGRvY3VtZW50RkJYLm5hbWUpO1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGRGQlggb2YgZG9jdW1lbnRGQlguY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGlmIChjaGlsZEZCWC50eXBlID09IFwiTW9kZWxcIikge1xyXG4gICAgICAgICAgICBzY2VuZS5hZGRDaGlsZChhd2FpdCB0aGlzLmdldE5vZGUodGhpcy5mYngub2JqZWN0cy5tb2RlbHMuaW5kZXhPZihjaGlsZEZCWCkpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZieC5vYmplY3RzLmFuaW1TdGFja3MgJiYgdGhpcy5mYngub2JqZWN0cy5hbmltU3RhY2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbjogQW5pbWF0aW9uID0gYXdhaXQgdGhpcy5nZXRBbmltYXRpb24oZG9jdW1lbnRGQlguQWN0aXZlQW5pbVN0YWNrTmFtZS5sZW5ndGggPiAwID9cclxuICAgICAgICAgICAgdGhpcy5mYngub2JqZWN0cy5hbmltU3RhY2tzLmZpbmRJbmRleChfYW5pbVN0YWNrID0+IF9hbmltU3RhY2submFtZSA9PSBkb2N1bWVudEZCWC5BY3RpdmVBbmltU3RhY2tOYW1lKSA6IDApO1xyXG4gICAgICAgICAgaWYgKGFuaW1hdGlvbilcclxuICAgICAgICAgICAgc2NlbmUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRBbmltYXRvcihhbmltYXRpb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgc2tlbGV0b24gb2YgdGhpcy4jc2tlbGV0b25zKVxyXG4gICAgICAgICAgc2NlbmUuYWRkQ29tcG9uZW50KHNrZWxldG9uKTtcclxuXHJcbiAgICAgICAgUHJvamVjdC5yZWdpc3RlcihzY2VuZSk7XHJcbiAgICAgICAgdGhpcy4jc2NlbmVzW19pbmRleF0gPSBzY2VuZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jc2NlbmVzW19pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldE5vZGUoX2luZGV4OiBudW1iZXIpOiBQcm9taXNlPE5vZGU+IHtcclxuICAgICAgaWYgKCF0aGlzLiNub2RlcylcclxuICAgICAgICB0aGlzLiNub2RlcyA9IFtdO1xyXG4gICAgICBpZiAoIXRoaXMuI25vZGVzW19pbmRleF0pIHtcclxuICAgICAgICAvLyBjcmVhdGUgbm9kZSB3aXRoIHRyYW5zZm9ybVxyXG4gICAgICAgIGNvbnN0IG1vZGVsRkJYOiBGQlguTW9kZWwgPSB0aGlzLmZieC5vYmplY3RzLm1vZGVsc1tfaW5kZXhdLmxvYWQoKTtcclxuICAgICAgICBjb25zdCBub2RlOiBOb2RlID0gbmV3IE5vZGUobW9kZWxGQlgubmFtZSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZW5lcmF0ZVRyYW5zZm9ybShtb2RlbEZCWCwgbm9kZSk7XHJcbiAgICAgICAgdGhpcy4jbm9kZXNbX2luZGV4XSA9IG5vZGU7XHJcblxyXG4gICAgICAgIC8vIGF0dGFjaCBjaGlsZHJlbiBhbmQgY29tcG9uZW50c1xyXG4gICAgICAgIGlmIChtb2RlbEZCWC5jaGlsZHJlbikgZm9yIChjb25zdCBjaGlsZEZCWCBvZiBtb2RlbEZCWC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgaWYgKGNoaWxkRkJYLnR5cGUgPT0gXCJNb2RlbFwiKSB7XHJcbiAgICAgICAgICAgIG5vZGUuYWRkQ2hpbGQoYXdhaXQgdGhpcy5nZXROb2RlKHRoaXMuZmJ4Lm9iamVjdHMubW9kZWxzLmluZGV4T2YoY2hpbGRGQlgpKSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkRkJYLnR5cGUgPT0gXCJHZW9tZXRyeVwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2g6IE1lc2hGQlggPSBhd2FpdCB0aGlzLmdldE1lc2godGhpcy5mYngub2JqZWN0cy5nZW9tZXRyaWVzLmluZGV4T2YoY2hpbGRGQlgpKTtcclxuICAgICAgICAgICAgY29uc3QgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IG5ldyBDb21wb25lbnRNZXNoKG1lc2gpO1xyXG4gICAgICAgICAgICBub2RlLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50TWF0ZXJpYWwoRkJYTG9hZGVyLmRlZmF1bHRNYXRlcmlhbCkpO1xyXG4gICAgICAgICAgICBpZiAobWVzaC5yZW5kZXJNZXNoLmJvbmVzKSB7XHJcbiAgICAgICAgICAgICAgY21wTWVzaC5za2VsZXRvbiA9IGF3YWl0IHRoaXMuZ2V0U2tlbGV0b24oY2hpbGRGQlguY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0pO1xyXG4gICAgICAgICAgICAgIC8vIGZvciAoY29uc3Qgc3ViRGVmb3JtZXJGQlggb2YgY2hpbGRGQlguY2hpbGRyZW5bMF0uY2hpbGRyZW4gYXMgRkJYLlN1YkRlZm9ybWVyW10pIHtcclxuICAgICAgICAgICAgICAvLyAgIGNvbnN0IGJvbmU6IE5vZGUgPSBjbXBNZXNoLnNrZWxldG9uLmJvbmVzW3N1YkRlZm9ybWVyRkJYLmNoaWxkcmVuWzBdLm5hbWVdO1xyXG4gICAgICAgICAgICAgIC8vICAgYm9uZS5tdHhMb2NhbC5zZXQoc3ViRGVmb3JtZXJGQlguVHJhbnNmb3JtTGluayk7XHJcbiAgICAgICAgICAgICAgLy8gICBpZiAoYm9uZS5nZXRQYXJlbnQoKSlcclxuICAgICAgICAgICAgICAvLyAgICAgYm9uZS5tdHhMb2NhbC5tdWx0aXBseShib25lLmdldFBhcmVudCgpLm10eFdvcmxkSW52ZXJzZSk7XHJcbiAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgIG5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1hdGVyaWFsKS5tYXRlcmlhbCA9IEZCWExvYWRlci5kZWZhdWx0U2tpbk1hdGVyaWFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcE1lc2gpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChjaGlsZEZCWC50eXBlID09IFwiTWF0ZXJpYWxcIikge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGRpdGlvbmFsIHNraW4gbWF0ZXJpYWxzIGdldCBjcmVhdGVkIGhlcmUsIGNoZWNrIGlmIHRoZSBvcmlnaW5hbCBtYXRlcmlhbCBpcyBzdGlsbCBuZWVkZWRcclxuICAgICAgICAgICAgY29uc3QgaU1hdGVyaWFsOiBudW1iZXIgPSB0aGlzLmZieC5vYmplY3RzLm1hdGVyaWFscy5pbmRleE9mKGNoaWxkRkJYKTtcclxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWw6IE1hdGVyaWFsID0gYXdhaXQgdGhpcy5nZXRNYXRlcmlhbChpTWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNYXRlcmlhbCkubWF0ZXJpYWwgPSBub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNZXNoKS5tZXNoLnJlbmRlck1lc2guYm9uZXMgP1xyXG4gICAgICAgICAgICAgIHRoaXMuI3NraW5NYXRlcmlhbHNbaU1hdGVyaWFsXSB8fCAodGhpcy4jc2tpbk1hdGVyaWFsc1tpTWF0ZXJpYWxdID0gbmV3IE1hdGVyaWFsKFxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwubmFtZSxcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLmdldFNoYWRlcigpID09IFNoYWRlclBob25nID9cclxuICAgICAgICAgICAgICAgICAgU2hhZGVyUGhvbmdTa2luIDpcclxuICAgICAgICAgICAgICAgICAgU2hhZGVyUGhvbmdUZXh0dXJlZFNraW4sXHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5jb2F0XHJcbiAgICAgICAgICAgICAgKSkgOlxyXG4gICAgICAgICAgICAgIG1hdGVyaWFsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jbm9kZXNbX2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWVzaChfaW5kZXg6IG51bWJlcik6IFByb21pc2U8TWVzaEZCWD4ge1xyXG4gICAgICBpZiAoIXRoaXMuI21lc2hlcylcclxuICAgICAgICB0aGlzLiNtZXNoZXMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNtZXNoZXNbX2luZGV4XSlcclxuICAgICAgICB0aGlzLiNtZXNoZXNbX2luZGV4XSA9IGF3YWl0IG5ldyBNZXNoRkJYKCkubG9hZCh0aGlzLnVyaSwgX2luZGV4KTtcclxuICAgICAgcmV0dXJuIHRoaXMuI21lc2hlc1tfaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRNYXRlcmlhbChfaW5kZXg6IG51bWJlcik6IFByb21pc2U8TWF0ZXJpYWw+IHtcclxuICAgICAgaWYgKCF0aGlzLiNtYXRlcmlhbHMpXHJcbiAgICAgICAgdGhpcy4jbWF0ZXJpYWxzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jbWF0ZXJpYWxzW19pbmRleF0pIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbEZCWDogRkJYLk1hdGVyaWFsID0gdGhpcy5mYngub2JqZWN0cy5tYXRlcmlhbHNbX2luZGV4XS5sb2FkKCk7XHJcbiAgICAgICAgaWYgKCEobWF0ZXJpYWxGQlguRGlmZnVzZUNvbG9yIGluc3RhbmNlb2YgVmVjdG9yMykpXHJcbiAgICAgICAgICBtYXRlcmlhbEZCWC5EaWZmdXNlQ29sb3I/LmNoaWxkcmVuWzBdLmxvYWQoKTtcclxuICAgICAgICAvLyBGQlggc3VwcG9ydHMgbGFtYmVydCBhbmQgcGhvbmcgc2hhZGluZywgZWl0aGVyIHdheSBmdWRnZSBoYXMgbm8gbGFtYmVydCBzaGFkZXIgc28gd2UgYWx3YXlzIHVzZSBwaG9uZy5cclxuICAgICAgICAvLyBJbiBEaWZmdXNlQ29sb3IgdGhlIHRleHR1cmUgb2YgdGhlIG1hdGVyaWFsIGNvbG9yIGlzIHN0b3JlZCwgaWYgaXQncyBkZWZpbmVkIHdlIHVzZSBhIHRleHR1cmUgc2hhZGVyLlxyXG4gICAgICAgIC8vIFRPRE86IG1hdGVyaWFsRkJYIGFsc28gY29udGFpbnMgYWRkaXRpb25hbCB2YWx1ZXMgbGlrZSBzaGluaW5lc3MgYW5kIHJlZmxlY3Rpdml0eSAoYW5kIG90aGVycykgd2hpY2ggYXJlIG5vdCBzdXBwcG9ydGVkLlxyXG4gICAgICAgIHRoaXMuI21hdGVyaWFsc1tfaW5kZXhdID0gbmV3IE1hdGVyaWFsKFxyXG4gICAgICAgICAgbWF0ZXJpYWxGQlgubmFtZSxcclxuICAgICAgICAgIG1hdGVyaWFsRkJYLkRpZmZ1c2VDb2xvciAmJiAhKG1hdGVyaWFsRkJYLkRpZmZ1c2VDb2xvciBpbnN0YW5jZW9mIFZlY3RvcjMpID9cclxuICAgICAgICAgICAgU2hhZGVyUGhvbmdUZXh0dXJlZCA6XHJcbiAgICAgICAgICAgIFNoYWRlclBob25nLFxyXG4gICAgICAgICAgbWF0ZXJpYWxGQlguRGlmZnVzZUNvbG9yICYmICEobWF0ZXJpYWxGQlguRGlmZnVzZUNvbG9yIGluc3RhbmNlb2YgVmVjdG9yMykgP1xyXG4gICAgICAgICAgICBuZXcgQ29hdFJlbWlzc2l2ZVRleHR1cmVkKFxyXG4gICAgICAgICAgICAgIG5ldyBDb2xvciguLi5tYXRlcmlhbEZCWC5EaWZmdXNlLmdldCgpKSxcclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldFRleHR1cmUodGhpcy5mYngub2JqZWN0cy50ZXh0dXJlcy5pbmRleE9mKG1hdGVyaWFsRkJYLkRpZmZ1c2VDb2xvcikpLFxyXG4gICAgICAgICAgICAgIG1hdGVyaWFsRkJYLkRpZmZ1c2VGYWN0b3IgPz8gMSxcclxuICAgICAgICAgICAgICBtYXRlcmlhbEZCWC5TcGVjdWxhckZhY3RvciA/PyBhdmVyYWdlKG1hdGVyaWFsRkJYLlNwZWN1bGFyPy5nZXQoKSkgPz8gMFxyXG4gICAgICAgICAgICApIDpcclxuICAgICAgICAgICAgbmV3IENvYXRSZW1pc3NpdmUoXHJcbiAgICAgICAgICAgICAgbmV3IENvbG9yKC4uLihtYXRlcmlhbEZCWC5EaWZmdXNlQ29sb3IgYXMgVmVjdG9yMyA/PyBtYXRlcmlhbEZCWC5EaWZmdXNlKS5nZXQoKSksXHJcbiAgICAgICAgICAgICAgbWF0ZXJpYWxGQlguRGlmZnVzZUZhY3RvciA/PyAxLFxyXG4gICAgICAgICAgICAgIG1hdGVyaWFsRkJYLlNwZWN1bGFyRmFjdG9yID8/IGF2ZXJhZ2UobWF0ZXJpYWxGQlguU3BlY3VsYXI/LmdldCgpKSA/PyAwXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXRlcmlhbHNbX2luZGV4XTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGF2ZXJhZ2UoX2FycmF5OiBGbG9hdDMyQXJyYXkpOiBudW1iZXIgeyAvLyBUT0RPOiBzcGVjdWxhciBmYWN0b3IgdmVjdG9yICh0b2dldGhlciB3aXRoIHNwZWN1bGFyIGNvbG9yIHRleHR1cmUpIGlzIG5vdCBzdXBwb3J0ZWQgc28gd2UgdXNlIHRoZSBhdmVyYWdlIG9mIHRoZSB2ZWN0b3IgdG8gYXBwcm94aW1hdGUgYSBzaW5ndWxhciBzcGVjdWxhciBmYWN0b3IuXHJcbiAgICAgICAgaWYgKF9hcnJheSlcclxuICAgICAgICAgIHJldHVybiBfYXJyYXkucmVkdWNlKChfYSwgX2IpID0+IF9hICsgX2IpIC8gX2FycmF5Lmxlbmd0aDtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFRleHR1cmUoX2luZGV4OiBudW1iZXIpOiBQcm9taXNlPFRleHR1cmU+IHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy4jdGV4dHVyZXMpXHJcbiAgICAgICAgICB0aGlzLiN0ZXh0dXJlcyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLiN0ZXh0dXJlc1tfaW5kZXhdKVxyXG4gICAgICAgICAgcmV0dXJuIF9yZXNvbHZlKHRoaXMuI3RleHR1cmVzW19pbmRleF0pO1xyXG5cclxuICAgICAgICBjb25zdCB2aWRlb0ZCWDogRkJYLlZpZGVvID0gdGhpcy5mYngub2JqZWN0cy50ZXh0dXJlc1tfaW5kZXhdLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgIGNvbnN0IHRleHR1cmU6IFRleHR1cmVJbWFnZSA9IG5ldyBUZXh0dXJlSW1hZ2UoKTtcclxuICAgICAgICB0ZXh0dXJlLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgdGV4dHVyZS5pbWFnZS5vbmxvYWQgPSAoKSA9PiBfcmVzb2x2ZSh0ZXh0dXJlKTtcclxuICAgICAgICB0ZXh0dXJlLmltYWdlLm9uZXJyb3IgPSBfcmVqZWN0O1xyXG4gICAgICAgIHRleHR1cmUuaW1hZ2Uuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbdmlkZW9GQlguQ29udGVudF0sIHsgdHlwZTogXCJpbWFnZS9wbmdcIiB9KSk7XHJcbiAgICAgICAgdGhpcy4jdGV4dHVyZXNbX2luZGV4XSA9IHRleHR1cmU7XHJcbiAgICAgICAgLy8gVE9ETzogZ2V0IGFuZCBzZXQgbWlwbWFwIGluZm9ybWF0aW9uID8/P1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcm9ibGVtOiBtZWhyZXJlIERlZm9ybWVyIHZlcndlaXNlbiBhdWYgZGFzIHNlbGJlIFNrZWxldHQgYWJlciBudXR6ZW4gZGFiZWkgbmljaHQgaW1tZXIgYWxsZSBLbm9jaGVuXHJcbiAgICAvLyA9PiBQcm9ibGVtIGJlc3RlaHQgYXVjaCBpbSBHTFRGTG9hZGVyXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZWZzIHRoZSBza2VsZXRvbiBjb250YWluaW5nIHRoZSBnaXZlbiBsaW1iIG5vZGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBnZXRTa2VsZXRvbihfZmJ4TGltYk5vZGU6IEZCWC5Nb2RlbCk6IFByb21pc2U8Q29tcG9uZW50U2tlbGV0b24+IHtcclxuICAgICAgaWYgKCF0aGlzLiNza2VsZXRvbnMpXHJcbiAgICAgICAgdGhpcy4jc2tlbGV0b25zID0gW107XHJcbiAgICAgIHJldHVybiB0aGlzLiNza2VsZXRvbnMuZmluZChfc2tlbGV0b24gPT4gX2ZieExpbWJOb2RlLm5hbWUgaW4gX3NrZWxldG9uLmJvbmVzKSB8fCBhd2FpdCAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNrZWxldG9uOiBDb21wb25lbnRTa2VsZXRvbiA9IG5ldyBDb21wb25lbnRTa2VsZXRvbigpOyAvLyBuZXcgU2tlbGV0b24oYFNrZWxldG9uJHt0aGlzLiNza2VsZXRvbnMubGVuZ3RofWApO1xyXG4gICAgICAgIGxldCByb290Tm9kZTogRkJYLk1vZGVsID0gX2ZieExpbWJOb2RlO1xyXG4gICAgICAgIHdoaWxlIChyb290Tm9kZS5wYXJlbnRzICYmIHJvb3ROb2RlLnBhcmVudHMuc29tZShfcGFyZW50ID0+IF9wYXJlbnQuc3VidHlwZSA9PSBcIkxpbWJOb2RlXCIpKVxyXG4gICAgICAgICAgcm9vdE5vZGUgPSByb290Tm9kZS5wYXJlbnRzLmZpbmQoX3BhcmVudCA9PiBfcGFyZW50LnN1YnR5cGUgPT0gXCJMaW1iTm9kZVwiKTtcclxuICAgICAgICBjb25zdCBpUm9vdE5vZGU6IG51bWJlciA9IHRoaXMuZmJ4Lm9iamVjdHMubW9kZWxzLmZpbmRJbmRleChfbW9kZWwgPT4gX21vZGVsLm5hbWUgPT0gcm9vdE5vZGUubmFtZSk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBhd2FpdCB0aGlzLmdldE5vZGUoaVJvb3ROb2RlKSkge1xyXG4gICAgICAgICAgLy8gVE9ETzogbWF5YmUgbW92ZSB0aGlzIGludG8gdGhlIGNvbXBvbmVudCwgYXMgdGhpcyBpcyBwcm9iYWJseSBuZWVkZWQgaW4gZ2x0ZiBpbXBvcnQgYXN3ZWxsXHJcbiAgICAgICAgICBpZiAodGhpcy5mYngub2JqZWN0cy5tb2RlbHNbdGhpcy4jbm9kZXMuaW5kZXhPZihub2RlKV0uc3VidHlwZSA9PSBcIkxpbWJOb2RlXCIpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50OiBOb2RlID0gbm9kZS5nZXRQYXJlbnQoKTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudClcclxuICAgICAgICAgICAgICBub2RlLm10eFdvcmxkLmNvcHkoXHJcbiAgICAgICAgICAgICAgICBub2RlLmNtcFRyYW5zZm9ybSA/XHJcbiAgICAgICAgICAgICAgICAgIE1hdHJpeDR4NC5QUk9EVUNUKHBhcmVudC5tdHhXb3JsZCwgbm9kZS5tdHhMb2NhbCkgOlxyXG4gICAgICAgICAgICAgICAgICBwYXJlbnQubXR4V29ybGRcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBub2RlLm10eFdvcmxkSW52ZXJzZS5jb3B5KE1hdHJpeDR4NC5JTlZFUlNFKG5vZGUubXR4V29ybGQpKTtcclxuICAgICAgICAgICAgc2tlbGV0b24uYWRkQm9uZShub2RlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI3NrZWxldG9ucy5wdXNoKHNrZWxldG9uKTtcclxuICAgICAgICByZXR1cm4gc2tlbGV0b247XHJcbiAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldEFuaW1hdGlvbihfaW5kZXg6IG51bWJlcik6IFByb21pc2U8QW5pbWF0aW9uPiB7XHJcbiAgICAgIGlmICghdGhpcy4jYW5pbWF0aW9ucylcclxuICAgICAgICB0aGlzLiNhbmltYXRpb25zID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jYW5pbWF0aW9uc1tfaW5kZXhdKSB7XHJcbiAgICAgICAgY29uc3QgYW5pbVN0YWNrOiBGQlguT2JqZWN0ID0gdGhpcy5mYngub2JqZWN0cy5hbmltU3RhY2tzW19pbmRleF07XHJcbiAgICAgICAgY29uc3QgYW5pbU5vZGVzRkJYOiBGQlguQW5pbUN1cnZlTm9kZVtdID0gYW5pbVN0YWNrLmNoaWxkcmVuWzBdLmNoaWxkcmVuO1xyXG5cclxuICAgICAgICBsZXQgZmJ4QW5pbU5vZGVHcm91cGVkOiBNYXA8RkJYLk1vZGVsLCBGQlguQW5pbUN1cnZlTm9kZVtdPiA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGZieEFuaW1Ob2RlIG9mIGFuaW1Ob2Rlc0ZCWCkge1xyXG4gICAgICAgICAgY29uc3Qga2V5OiBGQlguTW9kZWwgPSBmYnhBbmltTm9kZS5wYXJlbnRzLmZpbmQoX3BhcmVudCA9PiBfcGFyZW50LnR5cGUgPT0gXCJNb2RlbFwiKTtcclxuICAgICAgICAgIGlmIChrZXkgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIGlmICghZmJ4QW5pbU5vZGVHcm91cGVkLmhhcyhrZXkpKVxyXG4gICAgICAgICAgICBmYnhBbmltTm9kZUdyb3VwZWQuc2V0KGtleSwgW10pO1xyXG4gICAgICAgICAgZmJ4QW5pbU5vZGVHcm91cGVkLmdldChrZXkpLnB1c2goZmJ4QW5pbU5vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uU3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUgPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBbZmJ4TW9kZWwsIGZieEFuaW1Ob2Rlc10gb2YgZmJ4QW5pbU5vZGVHcm91cGVkKSB7XHJcbiAgICAgICAgICBsZXQgY3VycmVudFN0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlID0gYW5pbWF0aW9uU3RydWN0dXJlO1xyXG5cclxuICAgICAgICAgIGxldCBwYXJlbnQ6IEZCWC5Nb2RlbCA9IGZieE1vZGVsLnBhcmVudHMuZmluZChfcGFyZW50ID0+IF9wYXJlbnQudHlwZSA9PSBcIk1vZGVsXCIpO1xyXG4gICAgICAgICAgbGV0IHBhdGg6IEZCWC5Nb2RlbFtdID0gW107XHJcbiAgICAgICAgICBwYXRoLnB1c2goZmJ4TW9kZWwpO1xyXG4gICAgICAgICAgd2hpbGUgKHBhcmVudCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcGF0aC5wdXNoKHBhcmVudCk7XHJcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRzLmZpbmQoX3BhcmVudCA9PiBfcGFyZW50LnR5cGUgPT0gXCJNb2RlbFwiKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGZieFBhdGhNb2RlbCBvZiBwYXRoLnJldmVyc2UoKSkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFN0cnVjdHVyZS5jaGlsZHJlbiA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgY3VycmVudFN0cnVjdHVyZS5jaGlsZHJlbiA9IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKChjdXJyZW50U3RydWN0dXJlLmNoaWxkcmVuIGFzIEFuaW1hdGlvblN0cnVjdHVyZSlbZmJ4UGF0aE1vZGVsLm5hbWVdID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAoY3VycmVudFN0cnVjdHVyZS5jaGlsZHJlbiBhcyBBbmltYXRpb25TdHJ1Y3R1cmUpW2ZieFBhdGhNb2RlbC5uYW1lXSA9IHt9O1xyXG4gICAgICAgICAgICBjdXJyZW50U3RydWN0dXJlID0gKGN1cnJlbnRTdHJ1Y3R1cmUuY2hpbGRyZW4gYXMgQW5pbWF0aW9uU3RydWN0dXJlKVtmYnhQYXRoTW9kZWwubmFtZV0gYXMgQW5pbWF0aW9uU3RydWN0dXJlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZieFBhdGhNb2RlbCA9PSBmYnhNb2RlbCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG10eExvY2FsOiBBbmltYXRpb25TZXF1ZW5jZU1hdHJpeDR4NCA9IHt9O1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgZmJ4QW5pbU5vZGUgb2YgZmJ4QW5pbU5vZGVzKVxyXG4gICAgICAgICAgICAgICAgbXR4TG9jYWxbe1xyXG4gICAgICAgICAgICAgICAgICBUOiBcInRyYW5zbGF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgIFI6IFwicm90YXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgUzogXCJzY2FsZVwiXHJcbiAgICAgICAgICAgICAgICB9W2ZieEFuaW1Ob2RlLm5hbWVdXSA9IHRoaXMuZ2V0QW5pbWF0aW9uVmVjdG9yMyhmYnhBbmltTm9kZSwgZmJ4UGF0aE1vZGVsKTtcclxuICAgICAgICAgICAgICBjdXJyZW50U3RydWN0dXJlLmNvbXBvbmVudHMgPSB7XHJcbiAgICAgICAgICAgICAgICBDb21wb25lbnRUcmFuc2Zvcm06IFtcclxuICAgICAgICAgICAgICAgICAgeyBtdHhMb2NhbDogbXR4TG9jYWwgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2FuaW1hdGlvbnNbX2luZGV4XSA9IG5ldyBBbmltYXRpb24oYW5pbVN0YWNrLm5hbWUsIGFuaW1hdGlvblN0cnVjdHVyZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuI2FuaW1hdGlvbnNbX2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZldGNoZWQgZnJvbSB0aHJlZS5qcywgYWRhcHRlZCB0byBGVURHRSBhbmQgb3B0aW1pemVkXHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvZGV2L2V4YW1wbGVzL2pzbS9sb2FkZXJzL0ZCWExvYWRlci5qc1xyXG4gICAgICogbGluZSAzOTUwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVUcmFuc2Zvcm0oX21vZGVsRkJYOiBGQlguTW9kZWwsIF9ub2RlOiBOb2RlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGNvbnN0IHBhcmVudEluZGV4OiBudW1iZXIgPSB0aGlzLmZieC5vYmplY3RzLm1vZGVscy5pbmRleE9mKF9tb2RlbEZCWC5wYXJlbnRzLmZpbmQoX3BhcmVudCA9PiBfcGFyZW50LnR5cGUgPT0gXCJNb2RlbFwiKSk7XHJcbiAgICAgIGNvbnN0IHBhcmVudDogTm9kZSA9IHBhcmVudEluZGV4ID49IDAgPyBhd2FpdCB0aGlzLmdldE5vZGUocGFyZW50SW5kZXgpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgY29uc3QgbXR4TG9jYWxSb3RhdGlvbjogTWF0cml4NHg0ID0gX21vZGVsRkJYLlByZVJvdGF0aW9uIHx8IF9tb2RlbEZCWC5MY2xSb3RhdGlvbiB8fCBfbW9kZWxGQlguUG9zdFJvdGF0aW9uID9cclxuICAgICAgICBNYXRyaXg0eDQuSURFTlRJVFkoKSA6XHJcbiAgICAgICAgdW5kZWZpbmVkO1xyXG4gICAgICBpZiAoX21vZGVsRkJYLlByZVJvdGF0aW9uKSB7XHJcbiAgICAgICAgbXR4TG9jYWxSb3RhdGlvbi5yb3RhdGUodGhpcy5nZXRPcmRlcmVkKF9tb2RlbEZCWC5QcmVSb3RhdGlvbiwgX21vZGVsRkJYKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKF9tb2RlbEZCWC5MY2xSb3RhdGlvbikge1xyXG4gICAgICAgIG10eExvY2FsUm90YXRpb24ucm90YXRlKHRoaXMuZ2V0T3JkZXJlZCh0aGlzLmdldFRyYW5zZm9ybVZlY3RvcihfbW9kZWxGQlguTGNsUm90YXRpb24sIFZlY3RvcjMuWkVSTyksIF9tb2RlbEZCWCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChfbW9kZWxGQlguUG9zdFJvdGF0aW9uKSB7XHJcbiAgICAgICAgbGV0IG10eFBvc3RSb3RhdGlvbkludmVyc2U6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5ST1RBVElPTih0aGlzLmdldE9yZGVyZWQoX21vZGVsRkJYLlBvc3RSb3RhdGlvbiwgX21vZGVsRkJYKSk7XHJcbiAgICAgICAgbXR4UG9zdFJvdGF0aW9uSW52ZXJzZSA9IE1hdHJpeDR4NC5JTlZFUlNFKG10eFBvc3RSb3RhdGlvbkludmVyc2UpO1xyXG4gICAgICAgIG10eExvY2FsUm90YXRpb24ubXVsdGlwbHkobXR4UG9zdFJvdGF0aW9uSW52ZXJzZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG10eExvY2FsU2NhbGluZzogTWF0cml4NHg0ID0gX21vZGVsRkJYLkxjbFNjYWxpbmcgP1xyXG4gICAgICAgIE1hdHJpeDR4NC5TQ0FMSU5HKHRoaXMuZ2V0VHJhbnNmb3JtVmVjdG9yKF9tb2RlbEZCWC5MY2xTY2FsaW5nLCBWZWN0b3IzLk9ORSkpIDpcclxuICAgICAgICB1bmRlZmluZWQ7XHJcblxyXG4gICAgICBjb25zdCBtdHhQYXJlbnRXb3JsZFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBwYXJlbnQgPyBNYXRyaXg0eDQuUk9UQVRJT04ocGFyZW50Lm10eFdvcmxkLnJvdGF0aW9uKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgIGNvbnN0IG10eFBhcmVudFdvcmxkU2NhbGU6IE1hdHJpeDR4NCA9IHBhcmVudCA/ICgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbXR4UGFyZW50V29ybGRTY2FsZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LklOVkVSU0UobXR4UGFyZW50V29ybGRSb3RhdGlvbik7XHJcbiAgICAgICAgbXR4UGFyZW50V29ybGRTY2FsZS50cmFuc2xhdGUoVmVjdG9yMy5TQ0FMRShwYXJlbnQubXR4V29ybGQudHJhbnNsYXRpb24sIC0xKSk7XHJcbiAgICAgICAgbXR4UGFyZW50V29ybGRTY2FsZS5tdWx0aXBseShwYXJlbnQubXR4V29ybGQpO1xyXG4gICAgICAgIHJldHVybiBtdHhQYXJlbnRXb3JsZFNjYWxlO1xyXG4gICAgICB9KSgpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgY29uc3QgbXR4V29ybGRSb3RhdGlvblNjYWxlOiBNYXRyaXg0eDQgPSBwYXJlbnQgfHwgbXR4TG9jYWxSb3RhdGlvbiB8fCBtdHhMb2NhbFNjYWxpbmcgPyBNYXRyaXg0eDQuSURFTlRJVFkoKSA6IHVuZGVmaW5lZDtcclxuICAgICAgaWYgKHBhcmVudCB8fCBtdHhMb2NhbFJvdGF0aW9uIHx8IG10eExvY2FsU2NhbGluZykge1xyXG4gICAgICAgIGNvbnN0IGluaGVyaXRUeXBlOiBudW1iZXIgPSBfbW9kZWxGQlguSW5oZXJpdFR5cGUgfHwgMDtcclxuICAgICAgICBpZiAoaW5oZXJpdFR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgaWYgKHBhcmVudClcclxuICAgICAgICAgICAgbXR4V29ybGRSb3RhdGlvblNjYWxlLm11bHRpcGx5KG10eFBhcmVudFdvcmxkUm90YXRpb24pO1xyXG4gICAgICAgICAgaWYgKG10eExvY2FsUm90YXRpb24pXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhMb2NhbFJvdGF0aW9uKTtcclxuICAgICAgICAgIGlmIChwYXJlbnQpXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRXb3JsZFNjYWxlKTtcclxuICAgICAgICAgIGlmIChtdHhMb2NhbFNjYWxpbmcpXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhMb2NhbFNjYWxpbmcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5oZXJpdFR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4UGFyZW50V29ybGRSb3RhdGlvbik7XHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRXb3JsZFNjYWxlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChtdHhMb2NhbFJvdGF0aW9uKVxyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4TG9jYWxSb3RhdGlvbik7XHJcbiAgICAgICAgICBpZiAobXR4TG9jYWxTY2FsaW5nKVxyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4TG9jYWxTY2FsaW5nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHBhcmVudClcclxuICAgICAgICAgICAgbXR4V29ybGRSb3RhdGlvblNjYWxlLm11bHRpcGx5KG10eFBhcmVudFdvcmxkUm90YXRpb24pO1xyXG4gICAgICAgICAgaWYgKG10eExvY2FsUm90YXRpb24pXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhMb2NhbFJvdGF0aW9uKTtcclxuICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgbXR4V29ybGRSb3RhdGlvblNjYWxlLm11bHRpcGx5KG10eFBhcmVudFdvcmxkU2NhbGUpO1xyXG4gICAgICAgICAgICBsZXQgbXR4UGFyZW50TG9jYWxTY2FsaW5nSW52ZXJzZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LlNDQUxJTkcocGFyZW50Lm10eExvY2FsLnNjYWxpbmcpO1xyXG4gICAgICAgICAgICBtdHhQYXJlbnRMb2NhbFNjYWxpbmdJbnZlcnNlID0gTWF0cml4NHg0LklOVkVSU0UobXR4UGFyZW50TG9jYWxTY2FsaW5nSW52ZXJzZSk7XHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRMb2NhbFNjYWxpbmdJbnZlcnNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChtdHhMb2NhbFNjYWxpbmcpXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhMb2NhbFNjYWxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBsb2NhbCB0cmFuc2Zvcm0gbWF0cml4XHJcbiAgICAgIGxldCB0cmFuc2xhdGlvbjogVmVjdG9yMztcclxuICAgICAgdHJhbnNsYXRpb24gPSBWZWN0b3IzLlpFUk8oKTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5MY2xUcmFuc2xhdGlvbilcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQodGhpcy5nZXRUcmFuc2Zvcm1WZWN0b3IoX21vZGVsRkJYLkxjbFRyYW5zbGF0aW9uLCBWZWN0b3IzLlpFUk8pKTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5Sb3RhdGlvbk9mZnNldClcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQoX21vZGVsRkJYLlJvdGF0aW9uT2Zmc2V0KTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5Sb3RhdGlvblBpdm90KVxyXG4gICAgICAgIHRyYW5zbGF0aW9uLmFkZChfbW9kZWxGQlguUm90YXRpb25QaXZvdCk7XHJcblxyXG4gICAgICBjb25zdCBtdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5UUkFOU0xBVElPTih0cmFuc2xhdGlvbik7XHJcbiAgICAgIGlmIChtdHhMb2NhbFJvdGF0aW9uKVxyXG4gICAgICAgIG10eFRyYW5zZm9ybS5tdWx0aXBseShtdHhMb2NhbFJvdGF0aW9uKTtcclxuXHJcbiAgICAgIHRyYW5zbGF0aW9uID0gVmVjdG9yMy5aRVJPKCk7XHJcbiAgICAgIGlmIChfbW9kZWxGQlguUm90YXRpb25QaXZvdClcclxuICAgICAgICB0cmFuc2xhdGlvbi5zdWJ0cmFjdChfbW9kZWxGQlguUm90YXRpb25QaXZvdCk7XHJcbiAgICAgIGlmIChfbW9kZWxGQlguU2NhbGluZ09mZnNldClcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQoX21vZGVsRkJYLlNjYWxpbmdPZmZzZXQpO1xyXG4gICAgICBpZiAoX21vZGVsRkJYLlNjYWxpbmdQaXZvdClcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQoX21vZGVsRkJYLlNjYWxpbmdQaXZvdCk7XHJcbiAgICAgIG10eFRyYW5zZm9ybS50cmFuc2xhdGUodHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgaWYgKG10eExvY2FsU2NhbGluZylcclxuICAgICAgICBtdHhUcmFuc2Zvcm0ubXVsdGlwbHkobXR4TG9jYWxTY2FsaW5nKTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5TY2FsaW5nUGl2b3QpXHJcbiAgICAgICAgbXR4VHJhbnNmb3JtLnRyYW5zbGF0ZShWZWN0b3IzLlNDQUxFKF9tb2RlbEZCWC5TY2FsaW5nUGl2b3QsIC0xKSk7XHJcblxyXG4gICAgICBjb25zdCBtdHhXb3JsZFRyYW5zbGF0aW9uOiBNYXRyaXg0eDQgPSBwYXJlbnQgP1xyXG4gICAgICAgIE1hdHJpeDR4NC5UUkFOU0xBVElPTihNYXRyaXg0eDQuUFJPRFVDVChcclxuICAgICAgICAgIHBhcmVudC5tdHhXb3JsZCxcclxuICAgICAgICAgIE1hdHJpeDR4NC5UUkFOU0xBVElPTihtdHhUcmFuc2Zvcm0udHJhbnNsYXRpb24pXHJcbiAgICAgICAgKS50cmFuc2xhdGlvbikgOlxyXG4gICAgICAgIE1hdHJpeDR4NC5UUkFOU0xBVElPTihtdHhUcmFuc2Zvcm0udHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgbXR4VHJhbnNmb3JtLmNvcHkobXR4V29ybGRUcmFuc2xhdGlvbik7XHJcbiAgICAgIG10eFRyYW5zZm9ybS5tdWx0aXBseShtdHhXb3JsZFJvdGF0aW9uU2NhbGUpO1xyXG4gICAgICBfbm9kZS5tdHhXb3JsZC5jb3B5KG10eFRyYW5zZm9ybSk7XHJcblxyXG4gICAgICBpZiAocGFyZW50KVxyXG4gICAgICAgIG10eFRyYW5zZm9ybS5tdWx0aXBseShNYXRyaXg0eDQuSU5WRVJTRShwYXJlbnQubXR4V29ybGQpLCB0cnVlKTtcclxuICAgICAgX25vZGUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRUcmFuc2Zvcm0obXR4VHJhbnNmb3JtKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRUcmFuc2Zvcm1WZWN0b3IoX3ZlY3RvcjogVmVjdG9yMyB8IEZCWC5BbmltQ3VydmVOb2RlLCBfZGVmYXVsdDogKCkgPT4gVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIF92ZWN0b3IgPT0gdW5kZWZpbmVkID9cclxuICAgICAgICAgIF9kZWZhdWx0KCkgOlxyXG4gICAgICAgICAgX3ZlY3RvciBpbnN0YW5jZW9mIFZlY3RvcjMgP1xyXG4gICAgICAgICAgICBfdmVjdG9yIDpcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgdHlwZW9mIChfdmVjdG9yID0gX3ZlY3Rvci5sb2FkKCkpLmRYID09IFwibnVtYmVyXCIgP1xyXG4gICAgICAgICAgICAgICAgX3ZlY3Rvci5kWCA6XHJcbiAgICAgICAgICAgICAgICAoX3ZlY3Rvci5kWC5sb2FkKCkgYXMgRkJYLkFuaW1DdXJ2ZSkuRGVmYXVsdCxcclxuICAgICAgICAgICAgICB0eXBlb2YgX3ZlY3Rvci5kWSA9PSBcIm51bWJlclwiID9cclxuICAgICAgICAgICAgICAgIF92ZWN0b3IuZFkgOlxyXG4gICAgICAgICAgICAgICAgKF92ZWN0b3IuZFkubG9hZCgpIGFzIEZCWC5BbmltQ3VydmUpLkRlZmF1bHQsXHJcbiAgICAgICAgICAgICAgdHlwZW9mIF92ZWN0b3IuZFogPT0gXCJudW1iZXJcIiA/XHJcbiAgICAgICAgICAgICAgICBfdmVjdG9yLmRaIDpcclxuICAgICAgICAgICAgICAgIChfdmVjdG9yLmRaLmxvYWQoKSBhcyBGQlguQW5pbUN1cnZlKS5EZWZhdWx0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEFuaW1hdGlvblZlY3RvcjMoX2FuaW1Ob2RlOiBGQlguQW5pbUN1cnZlTm9kZSwgX3RhcmdldDogRkJYLk1vZGVsKTogQW5pbWF0aW9uU2VxdWVuY2VWZWN0b3IzIHtcclxuICAgICAgY29uc3QgdmVjdG9yU2VxdWVuY2U6IEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yMyA9IHt9O1xyXG4gICAgICBmb3IgKGNvbnN0IHZhbHVlTmFtZSBpbiBfYW5pbU5vZGUpIGlmICh2YWx1ZU5hbWUgPT0gXCJkWFwiIHx8IHZhbHVlTmFtZSA9PSBcImRZXCIgfHwgdmFsdWVOYW1lID09IFwiZFpcIikge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlOiBGQlguQW5pbUN1cnZlIHwgbnVtYmVyID0gX2FuaW1Ob2RlW3ZhbHVlTmFtZV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICBjb25zdCBzZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UgPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoKTtcclxuICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB2YWx1ZS5LZXlUaW1lLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUgcmVmZXJlbmNlIHRpbWUgaXMgZGVmaW5lZCBhcyBhIHNpZ25lZCBpbnQ2NCwgdW5pdCBiZWluZyAxLzQ2MTg2MTU4MDAwIHNlY29uZHNcclxuICAgICAgICAgICAgLy8gcmVmOiBodHRwczovL2FyY2hpdmUuYmxlbmRlci5vcmcvd2lraS9pbmRleC5waHAvVXNlcjpNb250MjkvRm91bmRhdGlvbi9GQlhfRmlsZV9TdHJ1Y3R1cmUvI1NvbWVfU3BlY2lmaWNfUHJvcGVydHlfVHlwZXNcclxuICAgICAgICAgICAgc2VxdWVuY2UuYWRkS2V5KG5ldyBBbmltYXRpb25LZXkoXHJcbiAgICAgICAgICAgICAgTnVtYmVyKCh2YWx1ZS5LZXlUaW1lW2ldIC0gdmFsdWUuS2V5VGltZS5yZWR1Y2UoKF9taW4sIF92KSA9PiBfdiA8IF9taW4gPyBfdiA6IF9taW4pKSAvIEJpZ0ludChcIjQ2MTg2MTU4XCIpKSxcclxuICAgICAgICAgICAgICB2YWx1ZS5LZXlWYWx1ZUZsb2F0W2ldXHJcbiAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmVjdG9yU2VxdWVuY2VbdmFsdWVOYW1lWzFdLnRvTG93ZXJDYXNlKCldID0gc2VxdWVuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoX2FuaW1Ob2RlLm5hbWUgPT0gXCJSXCIgJiYgKF90YXJnZXQuUHJlUm90YXRpb24gfHwgX3RhcmdldC5Qb3N0Um90YXRpb24pKSB7XHJcbiAgICAgICAgbGV0IHByZVJvdG90YXRpb246IE1hdHJpeDR4NDtcclxuICAgICAgICBpZiAoX3RhcmdldC5QcmVSb3RhdGlvbilcclxuICAgICAgICAgIHByZVJvdG90YXRpb24gPSBNYXRyaXg0eDQuUk9UQVRJT04oX3RhcmdldC5QcmVSb3RhdGlvbik7XHJcbiAgICAgICAgbGV0IHBvc3RSb3RhdGlvbjogTWF0cml4NHg0O1xyXG4gICAgICAgIGlmIChfdGFyZ2V0LlBvc3RSb3RhdGlvbilcclxuICAgICAgICAgIHBvc3RSb3RhdGlvbiA9IE1hdHJpeDR4NC5ST1RBVElPTihfdGFyZ2V0LlBvc3RSb3RhdGlvbik7XHJcblxyXG4gICAgICAgIFt2ZWN0b3JTZXF1ZW5jZS54LCB2ZWN0b3JTZXF1ZW5jZS55LCB2ZWN0b3JTZXF1ZW5jZS56XVxyXG4gICAgICAgICAgLmZsYXRNYXAoX3NlcSA9PiBfc2VxPy5nZXRLZXlzKCkpXHJcbiAgICAgICAgICAubWFwKF9rZXkgPT4gX2tleT8udGltZSlcclxuICAgICAgICAgIC5zb3J0KChfdGltZUEsIF90aW1lQikgPT4gX3RpbWVBIC0gX3RpbWVCKSAvLyBzb3J0IHRpbWVzXHJcbiAgICAgICAgICAuZmlsdGVyKChfdGltZSwgX2luZGV4LCBfdGltZXMpID0+IF90aW1lICE9IF90aW1lc1tfaW5kZXggKyAxXSkgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcclxuICAgICAgICAgIC5tYXAoX3RpbWUgPT4geyAvLyBmaW5kIGtleXMgZm9yIGFsbCBheGVzIGF0IHRpbWVcclxuICAgICAgICAgICAgcmV0dXJuIHsgeDogZmluZEtleSh2ZWN0b3JTZXF1ZW5jZS54KSwgeTogZmluZEtleSh2ZWN0b3JTZXF1ZW5jZS55KSwgejogZmluZEtleSh2ZWN0b3JTZXF1ZW5jZS56KSB9O1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kS2V5KF9zZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UpOiBBbmltYXRpb25LZXkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBfc2VxdWVuY2U/LmdldEtleXMoKS5maW5kKF9rZXkgPT4gX2tleS50aW1lID09IF90aW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5mb3JFYWNoKF9mcmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2Y3RFdWxlckFuZ2xlczogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgICAgICAgdmN0RXVsZXJBbmdsZXMuc2V0KFxyXG4gICAgICAgICAgICAgIF9mcmFtZS54Py52YWx1ZSA/PyAwLFxyXG4gICAgICAgICAgICAgIF9mcmFtZS55Py52YWx1ZSA/PyAwLFxyXG4gICAgICAgICAgICAgIF9mcmFtZS56Py52YWx1ZSA/PyAwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG10eFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT04odmN0RXVsZXJBbmdsZXMpO1xyXG4gICAgICAgICAgICBpZiAocHJlUm90b3RhdGlvbilcclxuICAgICAgICAgICAgICBtdHhSb3RhdGlvbi5tdWx0aXBseShwcmVSb3RvdGF0aW9uLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKHBvc3RSb3RhdGlvbilcclxuICAgICAgICAgICAgICBtdHhSb3RhdGlvbi5tdWx0aXBseShwb3N0Um90YXRpb24pO1xyXG4gICAgICAgICAgICB2Y3RFdWxlckFuZ2xlcyA9IG10eFJvdGF0aW9uLnJvdGF0aW9uO1xyXG4gICAgICAgICAgICBpZiAoX2ZyYW1lLngpXHJcbiAgICAgICAgICAgICAgX2ZyYW1lLngudmFsdWUgPSB2Y3RFdWxlckFuZ2xlcy54O1xyXG4gICAgICAgICAgICBpZiAoX2ZyYW1lLnkpXHJcbiAgICAgICAgICAgICAgX2ZyYW1lLnkudmFsdWUgPSB2Y3RFdWxlckFuZ2xlcy55O1xyXG4gICAgICAgICAgICBpZiAoX2ZyYW1lLnopXHJcbiAgICAgICAgICAgICAgX2ZyYW1lLnoudmFsdWUgPSB2Y3RFdWxlckFuZ2xlcy56O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB2ZWN0b3JTZXF1ZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldE9yZGVyZWQoX3JvdGF0aW9uOiBWZWN0b3IzLCBfbW9kZWxGQlg6IEZCWC5Nb2RlbCk6IFZlY3RvcjMge1xyXG4gICAgICBpZiAoIV9tb2RlbEZCWC5FdWxlck9yZGVyKVxyXG4gICAgICAgIHJldHVybiBfcm90YXRpb247XHJcblxyXG4gICAgICBjb25zdCBkYXRhOiBGbG9hdDMyQXJyYXkgPSBfcm90YXRpb24uZ2V0KCk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICBkYXRhW19tb2RlbEZCWC5FdWxlck9yZGVyLmluZGV4T2YoXCJaXCIpXSxcclxuICAgICAgICBkYXRhW19tb2RlbEZCWC5FdWxlck9yZGVyLmluZGV4T2YoXCJZXCIpXSxcclxuICAgICAgICBkYXRhW19tb2RlbEZCWC5FdWxlck9yZGVyLmluZGV4T2YoXCJYXCIpXVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRkJYIHtcclxuICAvKipcclxuICAgKiBJbnRlcmZhY2UgdG8gcmVwcmVzZW50IGZieC1ub2RlcyBjb250YWluaW5nIGl0cyBuYW1lLCBjaGlsZHJlbiBhbmQgcHJvcGVydGllcy5cclxuICAgKiBDaGlsZHJlbiBhbmQgcHJvcGVyaXRlcyBhcmUgbGF6eS5cclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE5vZGUge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBsb2FkUHJvcGVydGllczogKCkgPT4gTm9kZVByb3BlcnR5W107XHJcbiAgICBwcml2YXRlIGxvYWRDaGlsZHJlbjogKCkgPT4gTm9kZVtdO1xyXG4gICAgXHJcbiAgICAjY2hpbGRyZW46IE5vZGVbXTtcclxuICAgICNwcm9wZXJ0aWVzOiBOb2RlUHJvcGVydHlbXTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZywgX2xvYWRQcm9wZXJ0aWVzOiAoKSA9PiBOb2RlUHJvcGVydHlbXSwgX2xvYWRDaGlsZHJlbjogKCkgPT4gTm9kZVtdKSB7XHJcbiAgICAgIHRoaXMubmFtZSA9IF9uYW1lO1xyXG4gICAgICB0aGlzLmxvYWRQcm9wZXJ0aWVzID0gX2xvYWRQcm9wZXJ0aWVzO1xyXG4gICAgICB0aGlzLmxvYWRDaGlsZHJlbiA9IF9sb2FkQ2hpbGRyZW47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBwcm9wZXJ0aWVzKCk6IE5vZGVQcm9wZXJ0eVtdIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3Byb3BlcnRpZXMgfHwgKHRoaXMuI3Byb3BlcnRpZXMgPSB0aGlzLmxvYWRQcm9wZXJ0aWVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2hpbGRyZW4oKTogTm9kZVtdIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2NoaWxkcmVuIHx8ICh0aGlzLiNjaGlsZHJlbiA9IHRoaXMubG9hZENoaWxkcmVuKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IHR5cGUgUHJvcGVydHk3MCA9IGJvb2xlYW4gfCBudW1iZXIgfCBzdHJpbmcgfCBGdWRnZUNvcmUuVmVjdG9yMztcclxuXHJcbiAgZXhwb3J0IHR5cGUgTm9kZVByb3BlcnR5ID0gYm9vbGVhbiB8IG51bWJlciB8IHN0cmluZyB8IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IEZsb2F0MzJBcnJheTtcclxuXHJcbiAgZXhwb3J0IGVudW0gQVJSQVlfRU5DT0RJTkcge1xyXG4gICAgVU5DT01QUkVTU0VELCBDT01QUkVTU0VEXHJcbiAgfVxyXG4gIFxyXG59IiwibmFtZXNwYWNlIEZCWCB7XHJcbiAgLyoqXHJcbiAgICogTG9hZHMgYW4gZmJ4IGZpbGUgZnJvbSBpdHMgZmJ4LW5vZGUgYXJyYXkgd2hpY2ggbWF5IGJlIHJldHJpZXZlZCBieSBwYXJzZU5vZGVzRnJvbUJpbmFyeS5cclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGxvYWRGcm9tTm9kZXMoX25vZGVzOiBOb2RlW10pOiBGQlgge1xyXG4gICAgY29uc3QgZmJ4OiBGQlggPSB7XHJcbiAgICAgIGRvY3VtZW50czogdW5kZWZpbmVkLFxyXG4gICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgYWxsOiB1bmRlZmluZWQsXHJcbiAgICAgICAgbW9kZWxzOiBbXSxcclxuICAgICAgICBnZW9tZXRyaWVzOiBbXSxcclxuICAgICAgICBtYXRlcmlhbHM6IFtdLFxyXG4gICAgICAgIHBvc2VzOiBbXSxcclxuICAgICAgICB0ZXh0dXJlczogW10sXHJcbiAgICAgICAgYW5pbVN0YWNrczogW11cclxuICAgICAgfSxcclxuICAgICAgY29ubmVjdGlvbnM6IHVuZGVmaW5lZFxyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgX25vZGVzKSB7XHJcbiAgICAgIGlmIChub2RlLm5hbWUgPT0gXCJEb2N1bWVudHNcIilcclxuICAgICAgICBmYnguZG9jdW1lbnRzID0gbm9kZS5jaGlsZHJlblxyXG4gICAgICAgICAgLmZpbHRlcihfZG9jdW1lbnROb2RlID0+IF9kb2N1bWVudE5vZGUubmFtZSA9PSBcIkRvY3VtZW50XCIpXHJcbiAgICAgICAgICAubWFwKF9kb2N1bWVudE5vZGUgPT4gZ2V0RG9jdW1lbnQoX2RvY3VtZW50Tm9kZSkpO1xyXG4gICAgICBlbHNlIGlmIChub2RlLm5hbWUgPT0gXCJPYmplY3RzXCIpXHJcbiAgICAgICAgZmJ4Lm9iamVjdHMuYWxsID0gbm9kZS5jaGlsZHJlbi5tYXAoX29iamVjdE5vZGUgPT4gZ2V0T2JqZWN0KF9vYmplY3ROb2RlLCBmYngpKTtcclxuICAgICAgZWxzZSBpZiAobm9kZS5uYW1lID09IFwiQ29ubmVjdGlvbnNcIilcclxuICAgICAgICBmYnguY29ubmVjdGlvbnMgPSBub2RlLmNoaWxkcmVuLm1hcChfY29ubmVjdGlvbk5vZGUgPT4gZ2V0Q29ubmVjdGlvbihfY29ubmVjdGlvbk5vZGUpKTtcclxuICAgICAgaWYgKGZieC5kb2N1bWVudHMgJiYgZmJ4Lm9iamVjdHMuYWxsICYmIGZieC5jb25uZWN0aW9ucylcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBncm91cE9iamVjdHMoZmJ4KTtcclxuICAgIGFwcGx5Q29ubmVjdGlvbnMoZmJ4LmNvbm5lY3Rpb25zLCBmYnguZG9jdW1lbnRzLCBmYngub2JqZWN0cy5hbGwpO1xyXG5cclxuICAgIHJldHVybiBmYng7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXREb2N1bWVudChfbm9kZTogTm9kZSk6IERvY3VtZW50IHtcclxuICAgIGNvbnN0IGRvY3VtZW50OiBPYmplY3QgPSB7XHJcbiAgICAgIHVpZDogX25vZGUucHJvcGVydGllc1swXSBhcyBudW1iZXIsXHJcbiAgICAgIG5hbWU6IF9ub2RlLnByb3BlcnRpZXNbMl0gYXMgc3RyaW5nLFxyXG4gICAgICBsb2FkZWQ6IGZhbHNlLFxyXG4gICAgICBsb2FkOiAoKSA9PiBsb2FkT2JqZWN0UHJvcGVydGllcyhfbm9kZSwgZG9jdW1lbnQpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGRvY3VtZW50O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2JqZWN0KF9ub2RlOiBOb2RlLCBfZmJ4OiBGQlgpOiBPYmplY3Qge1xyXG4gICAgY29uc3QgbmFtZUFuZFR5cGU6IHN0cmluZ1tdID0gKF9ub2RlLnByb3BlcnRpZXNbMV0gYXMgc3RyaW5nKS5zcGxpdChcIjo6XCIpO1xyXG4gICAgY29uc3Qgb2JqZWN0OiBPYmplY3QgPSB7XHJcbiAgICAgIHVpZDogX25vZGUucHJvcGVydGllc1swXSBhcyBudW1iZXIsXHJcbiAgICAgIG5hbWU6IG5hbWVBbmRUeXBlWzBdLFxyXG4gICAgICB0eXBlOiBuYW1lQW5kVHlwZVsxXSxcclxuICAgICAgc3VidHlwZTogX25vZGUucHJvcGVydGllc1syXSBhcyBzdHJpbmcsXHJcbiAgICAgIGxvYWRlZDogZmFsc2UsXHJcbiAgICAgIGxvYWQ6ICgpID0+IGxvYWRPYmplY3RQcm9wZXJ0aWVzKF9ub2RlLCBvYmplY3QpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG9iamVjdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdyb3VwT2JqZWN0cyhfZmJ4OiBGQlgpOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIF9mYngub2JqZWN0cy5hbGwpIHtcclxuICAgICAgaWYgKG9iamVjdC50eXBlID09IFwiTW9kZWxcIilcclxuICAgICAgICBfZmJ4Lm9iamVjdHMubW9kZWxzLnB1c2gob2JqZWN0KTtcclxuICAgICAgZWxzZSBpZiAob2JqZWN0LnR5cGUgPT0gXCJHZW9tZXRyeVwiKVxyXG4gICAgICAgIF9mYngub2JqZWN0cy5nZW9tZXRyaWVzLnB1c2gob2JqZWN0KTtcclxuICAgICAgZWxzZSBpZiAob2JqZWN0LnR5cGUgPT0gXCJNYXRlcmlhbFwiKVxyXG4gICAgICAgIF9mYngub2JqZWN0cy5tYXRlcmlhbHMucHVzaChvYmplY3QpO1xyXG4gICAgICBlbHNlIGlmIChvYmplY3QudHlwZSA9PSBcIlBvc2VcIilcclxuICAgICAgICBfZmJ4Lm9iamVjdHMucG9zZXMucHVzaChvYmplY3QpO1xyXG4gICAgICBlbHNlIGlmIChvYmplY3QudHlwZSA9PSBcIlRleHR1cmVcIilcclxuICAgICAgICBfZmJ4Lm9iamVjdHMudGV4dHVyZXMucHVzaChvYmplY3QpO1xyXG4gICAgICBlbHNlIGlmIChvYmplY3QudHlwZSA9PSBcIkFuaW1TdGFja1wiKVxyXG4gICAgICAgIF9mYngub2JqZWN0cy5hbmltU3RhY2tzLnB1c2gob2JqZWN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldENvbm5lY3Rpb24oX25vZGU6IE5vZGUpOiBDb25uZWN0aW9uIHtcclxuICAgIGlmICghKF9ub2RlLnByb3BlcnRpZXNbMF0gPT0gXCJPT1wiIHx8IF9ub2RlLnByb3BlcnRpZXNbMF0gPT0gXCJPUFwiKSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYENvbm5lY3Rpb24gdHlwZSAke19ub2RlLnByb3BlcnRpZXNbMF19IGlzIG5vdCBzdXBwb3J0ZWRgKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGlsZFVJRDogX25vZGUucHJvcGVydGllc1sxXSBhcyBudW1iZXIsXHJcbiAgICAgIHBhcmVudFVJRDogX25vZGUucHJvcGVydGllc1syXSBhcyBudW1iZXIsXHJcbiAgICAgIHByb3BlcnR5TmFtZTogX25vZGUucHJvcGVydGllc1swXSA9PSBcIk9QXCIgPyBfbm9kZS5wcm9wZXJ0aWVzWzNdIGFzIHN0cmluZyA6IG51bGxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhcHBseUNvbm5lY3Rpb25zKF9jb25uZWN0aW9uczogQ29ubmVjdGlvbltdLCBfZG9jdW1lbnRzOiBEb2N1bWVudFtdLCBfb2JqZWN0czogT2JqZWN0W10pOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3QgY29ubmVjdGlvbiBvZiBfY29ubmVjdGlvbnMpIHtcclxuICAgICAgbGV0IHBhcmVudDogT2JqZWN0ID0gX2RvY3VtZW50cy5maW5kKF9kb2N1bWVudCA9PiBfZG9jdW1lbnQubG9hZCgpLlJvb3ROb2RlID09IGNvbm5lY3Rpb24ucGFyZW50VUlEKSBhcyBPYmplY3Q7XHJcbiAgICAgIGxldCBjaGlsZDogT2JqZWN0O1xyXG4gICAgICBmb3IgKGNvbnN0IG9iamVjdCBvZiBfb2JqZWN0cykge1xyXG4gICAgICAgIGlmIChwYXJlbnQgPT0gdW5kZWZpbmVkICYmIG9iamVjdC51aWQgPT0gY29ubmVjdGlvbi5wYXJlbnRVSUQpXHJcbiAgICAgICAgICBwYXJlbnQgPSBvYmplY3Q7XHJcbiAgICAgICAgaWYgKGNoaWxkID09IHVuZGVmaW5lZCAmJiBvYmplY3QudWlkID09IGNvbm5lY3Rpb24uY2hpbGRVSUQpXHJcbiAgICAgICAgICBjaGlsZCA9IG9iamVjdDtcclxuICAgICAgICBpZiAocGFyZW50ICE9IHVuZGVmaW5lZCAmJiBjaGlsZCAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hpbGQpXHJcbiAgICAgICAgKGNoaWxkLnBhcmVudHMgfHwgKGNoaWxkLnBhcmVudHMgPSBbXSkpLnB1c2gocGFyZW50KTtcclxuICAgICAgaWYgKGNvbm5lY3Rpb24ucHJvcGVydHlOYW1lID09IG51bGwpXHJcbiAgICAgICAgKHBhcmVudC5jaGlsZHJlbiB8fCAocGFyZW50LmNoaWxkcmVuID0gW10pKS5wdXNoKGNoaWxkKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIChwYXJlbnQgYXMgT2JqZWN0KVtmb3JtYXRQcm9wZXJ0eU5hbWUoY29ubmVjdGlvbi5wcm9wZXJ0eU5hbWUpXSA9IGNoaWxkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbG9hZE9iamVjdFByb3BlcnRpZXMoX25vZGU6IE5vZGUsIF9vYmplY3Q6IE9iamVjdCk6IE9iamVjdCB7XHJcbiAgICBpZiAoX29iamVjdC5sb2FkZWQpXHJcbiAgICAgIHJldHVybiBfb2JqZWN0O1xyXG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBfbm9kZS5jaGlsZHJlbikge1xyXG4gICAgICBpZiAoY2hpbGQubmFtZSA9PSBcIlByb3BlcnRpZXM3MFwiKVxyXG4gICAgICAgIGZvciAoY29uc3QgcHJvcGVydHk3MCBvZiBjaGlsZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgY29uc3QgbmFtZTogc3RyaW5nID0gZm9ybWF0UHJvcGVydHlOYW1lKHByb3BlcnR5NzAucHJvcGVydGllc1swXSBhcyBzdHJpbmcpO1xyXG4gICAgICAgICAgaWYgKCFfb2JqZWN0W25hbWVdKVxyXG4gICAgICAgICAgICBfb2JqZWN0W25hbWVdID0gZ2V0UHJvcGVydHk3MFZhbHVlKHByb3BlcnR5NzApO1xyXG4gICAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbmFtZTogc3RyaW5nID0gZm9ybWF0UHJvcGVydHlOYW1lKGNoaWxkLm5hbWUpO1xyXG4gICAgICAgIGlmICghX29iamVjdFtuYW1lXSlcclxuICAgICAgICAgIF9vYmplY3RbbmFtZV0gPSBnZXRQcm9wZXJ0eVZhbHVlKGNoaWxkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29iamVjdC5sb2FkZWQgPSB0cnVlO1xyXG4gICAgcmV0dXJuIF9vYmplY3Q7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlKF9ub2RlOiBOb2RlKTogTm9kZVByb3BlcnR5IHwgT2JqZWN0IHtcclxuICAgIHJldHVybiBfbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwXHJcbiAgICAgID8gX25vZGUuY2hpbGRyZW4ucmVkdWNlKFxyXG4gICAgICAgIChfc3ViUHJvcGVydGllcywgX3N1YlByb3BlcnR5KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBuYW1lOiBzdHJpbmcgPSBmb3JtYXRQcm9wZXJ0eU5hbWUoX3N1YlByb3BlcnR5Lm5hbWUpO1xyXG4gICAgICAgICAgaWYgKF9zdWJQcm9wZXJ0aWVzW25hbWVdID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgX3N1YlByb3BlcnRpZXNbbmFtZV0gPSBnZXRQcm9wZXJ0eVZhbHVlKF9zdWJQcm9wZXJ0eSk7XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCEoX3N1YlByb3BlcnRpZXNbbmFtZV0gaW5zdGFuY2VvZiBBcnJheSkpXHJcbiAgICAgICAgICAgICAgX3N1YlByb3BlcnRpZXNbbmFtZV0gPSBbX3N1YlByb3BlcnRpZXNbbmFtZV0gYXMgT2JqZWN0XTtcclxuICAgICAgICAgICAgKF9zdWJQcm9wZXJ0aWVzW25hbWVdIGFzIE9iamVjdFtdKS5wdXNoKGdldFByb3BlcnR5VmFsdWUoX3N1YlByb3BlcnR5KSBhcyBPYmplY3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIF9zdWJQcm9wZXJ0aWVzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge30gYXMgT2JqZWN0XHJcbiAgICAgIClcclxuICAgICAgOiBfbm9kZS5wcm9wZXJ0aWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0UHJvcGVydHk3MFZhbHVlKF9ub2RlOiBOb2RlKTogUHJvcGVydHk3MCB7XHJcbiAgICBzd2l0Y2ggKF9ub2RlLnByb3BlcnRpZXNbMV0gYXMgc3RyaW5nKSB7XHJcbiAgICAgIGNhc2UgXCJib29sXCI6XHJcbiAgICAgICAgcmV0dXJuIF9ub2RlLnByb3BlcnRpZXNbNF0gYXMgYm9vbGVhbjtcclxuXHJcbiAgICAgIGNhc2UgXCJpbnRcIjpcclxuICAgICAgY2FzZSBcImVudW1cIjpcclxuICAgICAgY2FzZSBcIlVMb25nTG9uZ1wiOlxyXG4gICAgICBjYXNlIFwiZG91YmxlXCI6XHJcbiAgICAgIGNhc2UgXCJOdW1iZXJcIjpcclxuICAgICAgY2FzZSBcIkZpZWxkT2ZWaWV3XCI6XHJcbiAgICAgICAgcmV0dXJuIF9ub2RlLnByb3BlcnRpZXNbNF0gYXMgbnVtYmVyO1xyXG5cclxuICAgICAgY2FzZSBcIkNvbG9yXCI6XHJcbiAgICAgIGNhc2UgXCJDb2xvclJHQlwiOlxyXG4gICAgICBjYXNlIFwiVmVjdG9yM0RcIjpcclxuICAgICAgY2FzZSBcIkxjbCBUcmFuc2xhdGlvblwiOlxyXG4gICAgICBjYXNlIFwiTGNsIFJvdGF0aW9uXCI6XHJcbiAgICAgIGNhc2UgXCJMY2wgU2NhbGluZ1wiOlxyXG4gICAgICAgIHJldHVybiBuZXcgRnVkZ2VDb3JlLlZlY3RvcjMoLi4uX25vZGUucHJvcGVydGllcy5zbGljZSg0LCA3KSBhcyBudW1iZXJbXSk7XHJcblxyXG4gICAgICBjYXNlIFwiS1N0cmluZ1wiOlxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBfbm9kZS5wcm9wZXJ0aWVzWzRdIGFzIHN0cmluZztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5TmFtZShfbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBfbmFtZS5yZXBsYWNlKC9bXmEtekEtWl0vLCBcIlwiKTtcclxuICB9XHJcblxyXG59IiwibmFtZXNwYWNlIEZCWCB7XHJcbiAgLyoqXHJcbiAgICogUGFyc2VzIGZieC1ub2RlcyBhcnJheSBmcm9tIGEgYmluYXJ5IGZieC1maWxlLlxyXG4gICAqIGRlc3BpdGUgdGhlIGxhenkgbm9kZSBpbXBsZW1lbnRhdGlvbiBpdCBpcyBtb3N0bHkgYSBjb3B5IG9mIHRoZSByZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9waWNvZGU3L2ZieC1wYXJzZXJcclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTm9kZXNGcm9tQmluYXJ5KF9idWZmZXI6IEFycmF5QnVmZmVyKTogTm9kZVtdIHtcclxuICAgIGlmIChfYnVmZmVyLmJ5dGVMZW5ndGggPCBiaW5hcnlTdGFydENoYXJzLmxlbmd0aClcclxuICAgICAgdGhyb3cgXCJOb3QgYSBiaW5hcnkgRkJYIGZpbGVcIjtcclxuXHJcbiAgICBjb25zdCBkYXRhOiBCdWZmZXJSZWFkZXIgPSBuZXcgQnVmZmVyUmVhZGVyKF9idWZmZXIpO1xyXG4gICAgY29uc3QgZmlyc3RDaGFyczogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEuZ2V0U2VxdWVuY2UoZGF0YS5nZXRVaW50OCwgYmluYXJ5U3RhcnRDaGFycy5sZW5ndGgpKTtcclxuICAgIGNvbnN0IG1hdGNoZXNGQlhCaW5hcnlGaXJzdENoYXJzOiBib29sZWFuXHJcbiAgICAgID0gZmlyc3RDaGFycy5ldmVyeSgoX3ZhbHVlLCBfaW5kZXgpID0+IF92YWx1ZSA9PSBiaW5hcnlTdGFydENoYXJzW19pbmRleF0pO1xyXG4gICAgaWYgKCFtYXRjaGVzRkJYQmluYXJ5Rmlyc3RDaGFycylcclxuICAgICAgdGhyb3cgXCJOb3QgYSBiaW5hcnkgRkJYIGZpbGVcIjtcclxuXHJcbiAgICBjb25zdCB2ZXJzaW9uOiBudW1iZXIgPSBkYXRhLmdldFVpbnQzMigpO1xyXG4gICAgY29uc3Qgbm9kZUF0dHJpYnV0ZXNBc1VJbnQ2NDogYm9vbGVhbiA9IHZlcnNpb24gPj0gNzUwMDsgLy8gV2FydW0gPj0gNzUwMD9cclxuICAgIGNvbnN0IG5vZGVzOiBOb2RlW10gPSBbXTtcclxuXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBjb25zdCBub2RlOiBOb2RlID0gcmVhZE5vZGUoZGF0YSwgbm9kZUF0dHJpYnV0ZXNBc1VJbnQ2NCk7XHJcbiAgICAgIGlmIChub2RlID09IG51bGwpIGJyZWFrO1xyXG4gICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBub2RlcztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWROb2RlKF9kYXRhOiBCdWZmZXJSZWFkZXIsIF9hdHRyaWJ1dGVzQXNVaW50NjQ6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGNvbnN0IGVuZE9mZnNldDogbnVtYmVyID0gX2F0dHJpYnV0ZXNBc1VpbnQ2NCA/IE51bWJlcihfZGF0YS5nZXRVaW50NjQoKSkgOiBfZGF0YS5nZXRVaW50MzIoKTtcclxuICAgIGlmIChlbmRPZmZzZXQgPT0gMClcclxuICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY29uc3QgcHJvcGVydGllc0xlbmd0aDogbnVtYmVyID0gX2F0dHJpYnV0ZXNBc1VpbnQ2NCA/IE51bWJlcihfZGF0YS5nZXRVaW50NjQoKSkgOiBfZGF0YS5nZXRVaW50MzIoKTtcclxuICAgIGNvbnN0IHByb3BlcnRpZXNCeXRlTGVuZ3RoOiBudW1iZXIgPSBfYXR0cmlidXRlc0FzVWludDY0ID8gTnVtYmVyKF9kYXRhLmdldFVpbnQ2NCgpKSA6IF9kYXRhLmdldFVpbnQzMigpO1xyXG4gICAgY29uc3QgbmFtZUxlbmd0aDogbnVtYmVyID0gX2RhdGEuZ2V0VWludDgoKTtcclxuICAgIGNvbnN0IG5hbWU6IHN0cmluZyA9IF9kYXRhLmdldFN0cmluZyhuYW1lTGVuZ3RoKTtcclxuICAgIGNvbnN0IHByb3BlcnRpZXNPZmZzZXQ6IG51bWJlciA9IF9kYXRhLm9mZnNldDtcclxuICAgIGNvbnN0IGNoaWxkcmVuT2Zmc2V0OiBudW1iZXIgPSBwcm9wZXJ0aWVzT2Zmc2V0ICsgcHJvcGVydGllc0J5dGVMZW5ndGg7XHJcblxyXG4gICAgY29uc3Qgbm9kZTogTm9kZSA9IG5ldyBOb2RlKFxyXG4gICAgICBuYW1lLFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgX2RhdGEub2Zmc2V0ID0gcHJvcGVydGllc09mZnNldDtcclxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzOiBOb2RlUHJvcGVydHlbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGlQcm9wZXJ0eTogbnVtYmVyID0gMDsgaVByb3BlcnR5IDwgcHJvcGVydGllc0xlbmd0aDsgaVByb3BlcnR5KyspIHtcclxuICAgICAgICAgIHByb3BlcnRpZXMucHVzaChyZWFkUHJvcGVydHkoX2RhdGEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XHJcbiAgICAgIH0sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICBfZGF0YS5vZmZzZXQgPSBjaGlsZHJlbk9mZnNldDtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbjogTm9kZVtdID0gW107XHJcbiAgICAgICAgd2hpbGUgKGVuZE9mZnNldCAtIF9kYXRhLm9mZnNldCA+IG51bGxDb3VudEF0Tm9kZUVuZCkge1xyXG4gICAgICAgICAgY29uc3QgY2hpbGQ6IEZCWC5Ob2RlID0gcmVhZE5vZGUoX2RhdGEsIF9hdHRyaWJ1dGVzQXNVaW50NjQpO1xyXG4gICAgICAgICAgaWYgKGNoaWxkKSBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIF9kYXRhLm9mZnNldCA9IGVuZE9mZnNldDtcclxuXHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRQcm9wZXJ0eShfZGF0YTogQnVmZmVyUmVhZGVyKTogRkJYLk5vZGVQcm9wZXJ0eSB7XHJcbiAgICBjb25zdCB0eXBlQ29kZTogc3RyaW5nID0gX2RhdGEuZ2V0Q2hhcigpO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlOiBGQlguTm9kZVByb3BlcnR5ID0ge1xyXG4gICAgICBDOiBfZGF0YS5nZXRCb29sLFxyXG4gICAgICBZOiBfZGF0YS5nZXRJbnQxNixcclxuICAgICAgSTogX2RhdGEuZ2V0SW50MzIsXHJcbiAgICAgIEw6IF9kYXRhLmdldEludDY0LFxyXG4gICAgICBGOiBfZGF0YS5nZXRGbG9hdDMyLFxyXG4gICAgICBEOiBfZGF0YS5nZXRGbG9hdDY0LFxyXG4gICAgICBTOiAoKSA9PiBfZGF0YS5nZXRTdHJpbmcoX2RhdGEuZ2V0VWludDMyKCkpLnJlcGxhY2UoXCJcXHgwMFxceDAxXCIsIFwiOjpcIiksXHJcbiAgICAgIHM6ICgpID0+IF9kYXRhLmdldFN0cmluZyhfZGF0YS5nZXRVaW50MzIoKSkucmVwbGFjZShcIlxceDAwXFx4MDFcIiwgXCI6OlwiKSxcclxuICAgICAgUjogKCkgPT4gbmV3IFVpbnQ4QXJyYXkocmVhZFJhdyhfZGF0YSwgX2RhdGEuZ2V0VWludDgpKSxcclxuICAgICAgcjogKCkgPT4gbmV3IFVpbnQ4QXJyYXkocmVhZEFycmF5KF9kYXRhLCBfZGF0YS5nZXRVaW50OCkpLFxyXG4gICAgICBiOiAoKSA9PiBuZXcgVWludDhBcnJheShyZWFkQXJyYXkoX2RhdGEsIF9kYXRhLmdldFVpbnQ4KSksXHJcbiAgICAgIGk6ICgpID0+IG5ldyBJbnQzMkFycmF5KHJlYWRBcnJheShfZGF0YSwgX2RhdGEuZ2V0SW50MzIpKSxcclxuICAgICAgbDogKCkgPT4gbmV3IEJpZ0ludDY0QXJyYXkocmVhZEFycmF5KF9kYXRhLCBfZGF0YS5nZXRJbnQ2NCkpLFxyXG4gICAgICBmOiAoKSA9PiBuZXcgRmxvYXQzMkFycmF5KHJlYWRBcnJheShfZGF0YSwgX2RhdGEuZ2V0RmxvYXQzMikpLFxyXG4gICAgICBkOiAoKSA9PiBuZXcgRmxvYXQzMkFycmF5KHJlYWRBcnJheShfZGF0YSwgX2RhdGEuZ2V0RmxvYXQ2NCkpXHJcbiAgICB9W3R5cGVDb2RlXT8uY2FsbChfZGF0YSk7XHJcblxyXG4gICAgaWYgKHZhbHVlID09IG51bGwpXHJcbiAgICAgIEZ1ZGdlQ29yZS5EZWJ1Zy53YXJuKGBVbmtub3duIHByb3BlcnR5IHR5cGUgJHt0eXBlQ29kZS5jaGFyQ29kZUF0KDApfWApO1xyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRBcnJheTxUIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50PihfZGF0YTogQnVmZmVyUmVhZGVyLCBfZ2V0dGVyOiAoKSA9PiBUKTogR2VuZXJhdG9yPFQ+IHtcclxuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gX2RhdGEuZ2V0VWludDMyKCk7XHJcbiAgICBjb25zdCBlbmNvZGluZzogRkJYLkFSUkFZX0VOQ09ESU5HID0gX2RhdGEuZ2V0VWludDMyKCk7XHJcbiAgICBjb25zdCBieXRlTGVuZ3RoOiBudW1iZXIgPSBfZGF0YS5nZXRVaW50MzIoKTtcclxuICAgIGNvbnN0IGVuZE9mZnNldDogbnVtYmVyID0gX2RhdGEub2Zmc2V0ICsgYnl0ZUxlbmd0aDtcclxuXHJcbiAgICBjb25zdCBpdGVyYWJsZTogR2VuZXJhdG9yPFQ+ID0gZW5jb2RpbmcgPT0gRkJYLkFSUkFZX0VOQ09ESU5HLkNPTVBSRVNTRUQgP1xyXG4gICAgICAoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFycmF5RGF0YTogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KF9kYXRhLnZpZXcuYnVmZmVyLCBfZGF0YS5vZmZzZXQsIGJ5dGVMZW5ndGgpO1xyXG4gICAgICAgIGNvbnN0IGluZmxhdGVkRGF0YTogVWludDhBcnJheSA9IChSZWZsZWN0LmdldChnbG9iYWxUaGlzLCBcInBha29cIikgPyBwYWtvLmluZmxhdGUgOiBmZmxhdGUuaW5mbGF0ZVN5bmMpKGFycmF5RGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJSZWFkZXIoaW5mbGF0ZWREYXRhLmJ1ZmZlcikuZ2V0U2VxdWVuY2UoX2dldHRlciwgbGVuZ3RoKTtcclxuICAgICAgfSkoKSA6XHJcbiAgICAgIF9kYXRhLmdldFNlcXVlbmNlKF9nZXR0ZXIsIGxlbmd0aCk7XHJcblxyXG4gICAgX2RhdGEub2Zmc2V0ID0gZW5kT2Zmc2V0O1xyXG5cclxuICAgIHJldHVybiBpdGVyYWJsZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRSYXc8VCBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oX2RhdGE6IEJ1ZmZlclJlYWRlciwgX2dldHRlcjogKCkgPT4gVCk6IEdlbmVyYXRvcjxUPiB7XHJcbiAgICAvLyByYXcgYmluYXJ5IGRhdGEgbmVlZHMgdG8gYmUgaW50ZXJwcmV0ZWQgaW4gYSBzcGVjaWFsIHdheSBzZWU6XHJcbiAgICAvLyBodHRwczovL2NvZGUuYmxlbmRlci5vcmcvMjAxMy8wOC9mYngtYmluYXJ5LWZpbGUtZm9ybWF0LXNwZWNpZmljYXRpb24vXHJcbiAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IF9kYXRhLmdldFVpbnQzMigpO1xyXG4gICAgcmV0dXJuIF9kYXRhLmdldFNlcXVlbmNlKF9nZXR0ZXIsIGxlbmd0aCk7O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYmluYXJ5U3RhcnRDaGFyczogVWludDhBcnJheVxyXG4gICAgPSBVaW50OEFycmF5LmZyb20oXCJLYXlkYXJhIEZCWCBCaW5hcnlcXHgyMFxceDIwXFx4MDBcXHgxYVxceDAwXCIuc3BsaXQoXCJcIiksIF92ID0+IF92LmNoYXJDb2RlQXQoMCkpO1xyXG5cclxuICBjb25zdCBudWxsQ291bnRBdE5vZGVFbmQ6IG51bWJlciA9IDEzO1xyXG5cclxufSIsIm5hbWVzcGFjZSBHTFRGIHtcclxuICBleHBvcnQgdHlwZSBHbFRmSWQgPSBudW1iZXI7XHJcbiAgLyoqXHJcbiAgICogQW4gb2JqZWN0IHBvaW50aW5nIHRvIGEgYnVmZmVyIHZpZXcgY29udGFpbmluZyB0aGUgaW5kaWNlcyBvZiBkZXZpYXRpbmcgYWNjZXNzb3IgdmFsdWVzLiBUaGUgbnVtYmVyIG9mIGluZGljZXMgaXMgZXF1YWwgdG8gYGFjY2Vzc29yLnNwYXJzZS5jb3VudGAuIEluZGljZXMgKipNVVNUKiogc3RyaWN0bHkgaW5jcmVhc2UuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBY2Nlc3NvclNwYXJzZUluZGljZXMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGJ1ZmZlciB2aWV3IHdpdGggc3BhcnNlIGluZGljZXMuIFRoZSByZWZlcmVuY2VkIGJ1ZmZlciB2aWV3ICoqTVVTVCBOT1QqKiBoYXZlIGl0cyBgdGFyZ2V0YCBvciBgYnl0ZVN0cmlkZWAgcHJvcGVydGllcyBkZWZpbmVkLiBUaGUgYnVmZmVyIHZpZXcgYW5kIHRoZSBvcHRpb25hbCBgYnl0ZU9mZnNldGAgKipNVVNUKiogYmUgYWxpZ25lZCB0byB0aGUgYGNvbXBvbmVudFR5cGVgIGJ5dGUgbGVuZ3RoLlxyXG4gICAgICovXHJcbiAgICBcImJ1ZmZlclZpZXdcIjogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgb2Zmc2V0IHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGUgYnVmZmVyIHZpZXcgaW4gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIFwiYnl0ZU9mZnNldFwiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kaWNlcyBkYXRhIHR5cGUuXHJcbiAgICAgKi9cclxuICAgIFwiY29tcG9uZW50VHlwZVwiOiBDT01QT05FTlRfVFlQRS5VTlNJR05FRF9CWVRFIHwgQ09NUE9ORU5UX1RZUEUuVU5TSUdORURfU0hPUlQgfCBDT01QT05FTlRfVFlQRS5VTlNJR05FRF9JTlQ7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBbiBvYmplY3QgcG9pbnRpbmcgdG8gYSBidWZmZXIgdmlldyBjb250YWluaW5nIHRoZSBkZXZpYXRpbmcgYWNjZXNzb3IgdmFsdWVzLiBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGlzIGVxdWFsIHRvIGBhY2Nlc3Nvci5zcGFyc2UuY291bnRgIHRpbWVzIG51bWJlciBvZiBjb21wb25lbnRzLiBUaGUgZWxlbWVudHMgaGF2ZSB0aGUgc2FtZSBjb21wb25lbnQgdHlwZSBhcyB0aGUgYmFzZSBhY2Nlc3Nvci4gVGhlIGVsZW1lbnRzIGFyZSB0aWdodGx5IHBhY2tlZC4gRGF0YSAqKk1VU1QqKiBiZSBhbGlnbmVkIGZvbGxvd2luZyB0aGUgc2FtZSBydWxlcyBhcyB0aGUgYmFzZSBhY2Nlc3Nvci5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFjY2Vzc29yU3BhcnNlVmFsdWVzIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBidWZmZXJWaWV3IHdpdGggc3BhcnNlIHZhbHVlcy4gVGhlIHJlZmVyZW5jZWQgYnVmZmVyIHZpZXcgKipNVVNUIE5PVCoqIGhhdmUgaXRzIGB0YXJnZXRgIG9yIGBieXRlU3RyaWRlYCBwcm9wZXJ0aWVzIGRlZmluZWQuXHJcbiAgICAgKi9cclxuICAgIFwiYnVmZmVyVmlld1wiOiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBidWZmZXJWaWV3IGluIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBcImJ5dGVPZmZzZXRcIj86IG51bWJlcjtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNwYXJzZSBzdG9yYWdlIG9mIGFjY2Vzc29yIHZhbHVlcyB0aGF0IGRldmlhdGUgZnJvbSB0aGVpciBpbml0aWFsaXphdGlvbiB2YWx1ZS5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFjY2Vzc29yU3BhcnNlIHtcclxuICAgIC8qKlxyXG4gICAgICogTnVtYmVyIG9mIGRldmlhdGluZyBhY2Nlc3NvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBzcGFyc2UgYXJyYXkuXHJcbiAgICAgKi9cclxuICAgIFwiY291bnRcIjogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvYmplY3QgcG9pbnRpbmcgdG8gYSBidWZmZXIgdmlldyBjb250YWluaW5nIHRoZSBpbmRpY2VzIG9mIGRldmlhdGluZyBhY2Nlc3NvciB2YWx1ZXMuIFRoZSBudW1iZXIgb2YgaW5kaWNlcyBpcyBlcXVhbCB0byBgY291bnRgLiBJbmRpY2VzICoqTVVTVCoqIHN0cmljdGx5IGluY3JlYXNlLlxyXG4gICAgICovXHJcbiAgICBcImluZGljZXNcIjogQWNjZXNzb3JTcGFyc2VJbmRpY2VzO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvYmplY3QgcG9pbnRpbmcgdG8gYSBidWZmZXIgdmlldyBjb250YWluaW5nIHRoZSBkZXZpYXRpbmcgYWNjZXNzb3IgdmFsdWVzLlxyXG4gICAgICovXHJcbiAgICBcInZhbHVlc1wiOiBBY2Nlc3NvclNwYXJzZVZhbHVlcztcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEEgdHlwZWQgdmlldyBpbnRvIGEgYnVmZmVyIHZpZXcgdGhhdCBjb250YWlucyByYXcgYmluYXJ5IGRhdGEuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBY2Nlc3NvciB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYnVmZmVyVmlldy5cclxuICAgICAqL1xyXG4gICAgXCJidWZmZXJWaWV3XCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBidWZmZXIgdmlldyBpbiBieXRlcy5cclxuICAgICAqL1xyXG4gICAgXCJieXRlT2Zmc2V0XCI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkYXRhdHlwZSBvZiB0aGUgYWNjZXNzb3IncyBjb21wb25lbnRzLlxyXG4gICAgICovXHJcbiAgICBcImNvbXBvbmVudFR5cGVcIjogQ09NUE9ORU5UX1RZUEU7XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIGludGVnZXIgZGF0YSB2YWx1ZXMgYXJlIG5vcm1hbGl6ZWQgYmVmb3JlIHVzYWdlLlxyXG4gICAgICovXHJcbiAgICBcIm5vcm1hbGl6ZWRcIj86IGJvb2xlYW47XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgcmVmZXJlbmNlZCBieSB0aGlzIGFjY2Vzc29yLlxyXG4gICAgICovXHJcbiAgICBcImNvdW50XCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogU3BlY2lmaWVzIGlmIHRoZSBhY2Nlc3NvcidzIGVsZW1lbnRzIGFyZSBzY2FsYXJzLCB2ZWN0b3JzLCBvciBtYXRyaWNlcy5cclxuICAgICAqL1xyXG4gICAgXCJ0eXBlXCI6IEFDQ0VTU09SX1RZUEU7XHJcbiAgICAvKipcclxuICAgICAqIE1heGltdW0gdmFsdWUgb2YgZWFjaCBjb21wb25lbnQgaW4gdGhpcyBhY2Nlc3Nvci5cclxuICAgICAqL1xyXG4gICAgXCJtYXhcIj86IG51bWJlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIGVhY2ggY29tcG9uZW50IGluIHRoaXMgYWNjZXNzb3IuXHJcbiAgICAgKi9cclxuICAgIFwibWluXCI/OiBudW1iZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogU3BhcnNlIHN0b3JhZ2Ugb2YgZWxlbWVudHMgdGhhdCBkZXZpYXRlIGZyb20gdGhlaXIgaW5pdGlhbGl6YXRpb24gdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIFwic3BhcnNlXCI/OiBBY2Nlc3NvclNwYXJzZTtcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGh0dHBzOi8vcmVnaXN0cnkua2hyb25vcy5vcmcvZ2xURi9zcGVjcy8yLjAvZ2xURi0yLjAuaHRtbCNhY2Nlc3Nvci1kYXRhLXR5cGVzXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gQ09NUE9ORU5UX1RZUEUge1xyXG4gICAgQllURSA9IDUxMjAsXHJcbiAgICBVTlNJR05FRF9CWVRFID0gNTEyMSxcclxuICAgIFNIT1JUID0gNTEyMixcclxuICAgIFVOU0lHTkVEX1NIT1JUID0gNTEyMyxcclxuICAgIFVOU0lHTkVEX0lOVCA9IDUxMjUsXHJcbiAgICBGTE9BVCA9IDUxMjZcclxuICB9XHJcblxyXG4gIGV4cG9ydCBlbnVtIEFDQ0VTU09SX1RZUEUge1xyXG4gICAgU0NBTEFSID0gXCJTQ0FMQVJcIixcclxuICAgIFZFQzIgPSBcIlZFQzJcIixcclxuICAgIFZFQzMgPSBcIlZFQzNcIixcclxuICAgIFZFQzQgPSBcIlZFQzRcIixcclxuICAgIE1BVDIgPSBcIk1BVDJcIixcclxuICAgIE1BVDMgPSBcIk1BVDNcIixcclxuICAgIE1BVDQgPSBcIk1BVDRcIlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGRlc2NyaXB0b3Igb2YgdGhlIGFuaW1hdGVkIHByb3BlcnR5LlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uQ2hhbm5lbFRhcmdldCB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBhbmltYXRlLiBXaGVuIHVuZGVmaW5lZCwgdGhlIGFuaW1hdGVkIG9iamVjdCAqKk1BWSoqIGJlIGRlZmluZWQgYnkgYW4gZXh0ZW5zaW9uLlxyXG4gICAgICovXHJcbiAgICBcIm5vZGVcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIG5vZGUncyBUUlMgcHJvcGVydHkgdG8gYW5pbWF0ZSwgb3IgdGhlIGBcIndlaWdodHNcImAgb2YgdGhlIE1vcnBoIFRhcmdldHMgaXQgaW5zdGFudGlhdGVzLiBGb3IgdGhlIGBcInRyYW5zbGF0aW9uXCJgIHByb3BlcnR5LCB0aGUgdmFsdWVzIHRoYXQgYXJlIHByb3ZpZGVkIGJ5IHRoZSBzYW1wbGVyIGFyZSB0aGUgdHJhbnNsYXRpb24gYWxvbmcgdGhlIFgsIFksIGFuZCBaIGF4ZXMuIEZvciB0aGUgYFwicm90YXRpb25cImAgcHJvcGVydHksIHRoZSB2YWx1ZXMgYXJlIGEgcXVhdGVybmlvbiBpbiB0aGUgb3JkZXIgKHgsIHksIHosIHcpLCB3aGVyZSB3IGlzIHRoZSBzY2FsYXIuIEZvciB0aGUgYFwic2NhbGVcImAgcHJvcGVydHksIHRoZSB2YWx1ZXMgYXJlIHRoZSBzY2FsaW5nIGZhY3RvcnMgYWxvbmcgdGhlIFgsIFksIGFuZCBaIGF4ZXMuXHJcbiAgICAgKi9cclxuICAgIFwicGF0aFwiOiBcInRyYW5zbGF0aW9uXCIgfCBcInJvdGF0aW9uXCIgfCBcInNjYWxlXCIgfCBcIndlaWdodHNcIjsgLy8gaHR0cHM6Ly9yZWdpc3RyeS5raHJvbm9zLm9yZy9nbFRGL3NwZWNzLzIuMC9nbFRGLTIuMC5odG1sI2FuaW1hdGlvbnNcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFuIGFuaW1hdGlvbiBjaGFubmVsIGNvbWJpbmVzIGFuIGFuaW1hdGlvbiBzYW1wbGVyIHdpdGggYSB0YXJnZXQgcHJvcGVydHkgYmVpbmcgYW5pbWF0ZWQuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25DaGFubmVsIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIGEgc2FtcGxlciBpbiB0aGlzIGFuaW1hdGlvbiB1c2VkIHRvIGNvbXB1dGUgdGhlIHZhbHVlIGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBcInNhbXBsZXJcIjogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGVzY3JpcHRvciBvZiB0aGUgYW5pbWF0ZWQgcHJvcGVydHkuXHJcbiAgICAgKi9cclxuICAgIFwidGFyZ2V0XCI6IEFuaW1hdGlvbkNoYW5uZWxUYXJnZXQ7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBbiBhbmltYXRpb24gc2FtcGxlciBjb21iaW5lcyB0aW1lc3RhbXBzIHdpdGggYSBzZXF1ZW5jZSBvZiBvdXRwdXQgdmFsdWVzIGFuZCBkZWZpbmVzIGFuIGludGVycG9sYXRpb24gYWxnb3JpdGhtLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uU2FtcGxlciB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiBhbiBhY2Nlc3NvciBjb250YWluaW5nIGtleWZyYW1lIHRpbWVzdGFtcHMuXHJcbiAgICAgKi9cclxuICAgIFwiaW5wdXRcIjogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcnBvbGF0aW9uIGFsZ29yaXRobS5cclxuICAgICAqL1xyXG4gICAgXCJpbnRlcnBvbGF0aW9uXCI/OiBcIkxJTkVBUlwiIHwgXCJTVEVQXCIgfCBcIkNVQklDU1BMSU5FXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiBhbiBhY2Nlc3NvciwgY29udGFpbmluZyBrZXlmcmFtZSBvdXRwdXQgdmFsdWVzLlxyXG4gICAgICovXHJcbiAgICBcIm91dHB1dFwiOiBHbFRmSWQ7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBIGtleWZyYW1lIGFuaW1hdGlvbi5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvbiB7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGFycmF5IG9mIGFuaW1hdGlvbiBjaGFubmVscy4gQW4gYW5pbWF0aW9uIGNoYW5uZWwgY29tYmluZXMgYW4gYW5pbWF0aW9uIHNhbXBsZXIgd2l0aCBhIHRhcmdldCBwcm9wZXJ0eSBiZWluZyBhbmltYXRlZC4gRGlmZmVyZW50IGNoYW5uZWxzIG9mIHRoZSBzYW1lIGFuaW1hdGlvbiAqKk1VU1QgTk9UKiogaGF2ZSB0aGUgc2FtZSB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICBcImNoYW5uZWxzXCI6IEFuaW1hdGlvbkNoYW5uZWxbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgYW5pbWF0aW9uIHNhbXBsZXJzLiBBbiBhbmltYXRpb24gc2FtcGxlciBjb21iaW5lcyB0aW1lc3RhbXBzIHdpdGggYSBzZXF1ZW5jZSBvZiBvdXRwdXQgdmFsdWVzIGFuZCBkZWZpbmVzIGFuIGludGVycG9sYXRpb24gYWxnb3JpdGhtLlxyXG4gICAgICovXHJcbiAgICBcInNhbXBsZXJzXCI6IEFuaW1hdGlvblNhbXBsZXJbXTtcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogTWV0YWRhdGEgYWJvdXQgdGhlIGdsVEYgYXNzZXQuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBc3NldCB7XHJcbiAgICAvKipcclxuICAgICAqIEEgY29weXJpZ2h0IG1lc3NhZ2Ugc3VpdGFibGUgZm9yIGRpc3BsYXkgdG8gY3JlZGl0IHRoZSBjb250ZW50IGNyZWF0b3IuXHJcbiAgICAgKi9cclxuICAgIFwiY29weXJpZ2h0XCI/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRvb2wgdGhhdCBnZW5lcmF0ZWQgdGhpcyBnbFRGIG1vZGVsLiAgVXNlZnVsIGZvciBkZWJ1Z2dpbmcuXHJcbiAgICAgKi9cclxuICAgIFwiZ2VuZXJhdG9yXCI/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBnbFRGIHZlcnNpb24gaW4gdGhlIGZvcm0gb2YgYDxtYWpvcj4uPG1pbm9yPmAgdGhhdCB0aGlzIGFzc2V0IHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIFwidmVyc2lvblwiOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtaW5pbXVtIGdsVEYgdmVyc2lvbiBpbiB0aGUgZm9ybSBvZiBgPG1ham9yPi48bWlub3I+YCB0aGF0IHRoaXMgYXNzZXQgdGFyZ2V0cy4gVGhpcyBwcm9wZXJ0eSAqKk1VU1QgTk9UKiogYmUgZ3JlYXRlciB0aGFuIHRoZSBhc3NldCB2ZXJzaW9uLlxyXG4gICAgICovXHJcbiAgICBcIm1pblZlcnNpb25cIj86IHN0cmluZztcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEEgYnVmZmVyIHBvaW50cyB0byBiaW5hcnkgZ2VvbWV0cnksIGFuaW1hdGlvbiwgb3Igc2tpbnMuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBCdWZmZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgVVJJIChvciBJUkkpIG9mIHRoZSBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIFwidXJpXCI/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsZW5ndGggb2YgdGhlIGJ1ZmZlciBpbiBieXRlcy5cclxuICAgICAqL1xyXG4gICAgXCJieXRlTGVuZ3RoXCI6IG51bWJlcjtcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSB2aWV3IGludG8gYSBidWZmZXIgZ2VuZXJhbGx5IHJlcHJlc2VudGluZyBhIHN1YnNldCBvZiB0aGUgYnVmZmVyLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQnVmZmVyVmlldyB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYnVmZmVyLlxyXG4gICAgICovXHJcbiAgICBcImJ1ZmZlclwiOiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvZmZzZXQgaW50byB0aGUgYnVmZmVyIGluIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBcImJ5dGVPZmZzZXRcIj86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxlbmd0aCBvZiB0aGUgYnVmZmVyVmlldyBpbiBieXRlcy5cclxuICAgICAqL1xyXG4gICAgXCJieXRlTGVuZ3RoXCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmlkZSwgaW4gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIFwiYnl0ZVN0cmlkZVwiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaGludCByZXByZXNlbnRpbmcgdGhlIGludGVuZGVkIEdQVSBidWZmZXIgdHlwZSB0byB1c2Ugd2l0aCB0aGlzIGJ1ZmZlciB2aWV3LlxyXG4gICAgICovXHJcbiAgICBcInRhcmdldFwiPzogbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBbiBvcnRob2dyYXBoaWMgY2FtZXJhIGNvbnRhaW5pbmcgcHJvcGVydGllcyB0byBjcmVhdGUgYW4gb3J0aG9ncmFwaGljIHByb2plY3Rpb24gbWF0cml4LlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2FtZXJhT3J0aG9ncmFwaGljIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IGhvcml6b250YWwgbWFnbmlmaWNhdGlvbiBvZiB0aGUgdmlldy4gVGhpcyB2YWx1ZSAqKk1VU1QgTk9UKiogYmUgZXF1YWwgdG8gemVyby4gVGhpcyB2YWx1ZSAqKlNIT1VMRCBOT1QqKiBiZSBuZWdhdGl2ZS5cclxuICAgICAqL1xyXG4gICAgXCJ4bWFnXCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IHZlcnRpY2FsIG1hZ25pZmljYXRpb24gb2YgdGhlIHZpZXcuIFRoaXMgdmFsdWUgKipNVVNUIE5PVCoqIGJlIGVxdWFsIHRvIHplcm8uIFRoaXMgdmFsdWUgKipTSE9VTEQgTk9UKiogYmUgbmVnYXRpdmUuXHJcbiAgICAgKi9cclxuICAgIFwieW1hZ1wiOiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmbG9hdGluZy1wb2ludCBkaXN0YW5jZSB0byB0aGUgZmFyIGNsaXBwaW5nIHBsYW5lLiBUaGlzIHZhbHVlICoqTVVTVCBOT1QqKiBiZSBlcXVhbCB0byB6ZXJvLiBgemZhcmAgKipNVVNUKiogYmUgZ3JlYXRlciB0aGFuIGB6bmVhcmAuXHJcbiAgICAgKi9cclxuICAgIFwiemZhclwiOiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmbG9hdGluZy1wb2ludCBkaXN0YW5jZSB0byB0aGUgbmVhciBjbGlwcGluZyBwbGFuZS5cclxuICAgICAqL1xyXG4gICAgXCJ6bmVhclwiOiBudW1iZXI7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBIHBlcnNwZWN0aXZlIGNhbWVyYSBjb250YWluaW5nIHByb3BlcnRpZXMgdG8gY3JlYXRlIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXguXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBDYW1lcmFQZXJzcGVjdGl2ZSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmbG9hdGluZy1wb2ludCBhc3BlY3QgcmF0aW8gb2YgdGhlIGZpZWxkIG9mIHZpZXcuXHJcbiAgICAgKi9cclxuICAgIFwiYXNwZWN0UmF0aW9cIj86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IHZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFucy4gVGhpcyB2YWx1ZSAqKlNIT1VMRCoqIGJlIGxlc3MgdGhhbiDPgC5cclxuICAgICAqL1xyXG4gICAgXCJ5Zm92XCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IGRpc3RhbmNlIHRvIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuXHJcbiAgICAgKi9cclxuICAgIFwiemZhclwiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxvYXRpbmctcG9pbnQgZGlzdGFuY2UgdG8gdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUuXHJcbiAgICAgKi9cclxuICAgIFwiem5lYXJcIjogbnVtYmVyO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSBjYW1lcmEncyBwcm9qZWN0aW9uLiAgQSBub2RlICoqTUFZKiogcmVmZXJlbmNlIGEgY2FtZXJhIHRvIGFwcGx5IGEgdHJhbnNmb3JtIHRvIHBsYWNlIHRoZSBjYW1lcmEgaW4gdGhlIHNjZW5lLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2FtZXJhIHtcclxuICAgIC8qKlxyXG4gICAgICogQW4gb3J0aG9ncmFwaGljIGNhbWVyYSBjb250YWluaW5nIHByb3BlcnRpZXMgdG8gY3JlYXRlIGFuIG9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uIG1hdHJpeC4gVGhpcyBwcm9wZXJ0eSAqKk1VU1QgTk9UKiogYmUgZGVmaW5lZCB3aGVuIGBwZXJzcGVjdGl2ZWAgaXMgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgXCJvcnRob2dyYXBoaWNcIj86IENhbWVyYU9ydGhvZ3JhcGhpYztcclxuICAgIC8qKlxyXG4gICAgICogQSBwZXJzcGVjdGl2ZSBjYW1lcmEgY29udGFpbmluZyBwcm9wZXJ0aWVzIHRvIGNyZWF0ZSBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4LiBUaGlzIHByb3BlcnR5ICoqTVVTVCBOT1QqKiBiZSBkZWZpbmVkIHdoZW4gYG9ydGhvZ3JhcGhpY2AgaXMgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgXCJwZXJzcGVjdGl2ZVwiPzogQ2FtZXJhUGVyc3BlY3RpdmU7XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyBpZiB0aGUgY2FtZXJhIHVzZXMgYSBwZXJzcGVjdGl2ZSBvciBvcnRob2dyYXBoaWMgcHJvamVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgXCJ0eXBlXCI6IGFueSB8IGFueSB8IHN0cmluZztcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogSW1hZ2UgZGF0YSB1c2VkIHRvIGNyZWF0ZSBhIHRleHR1cmUuIEltYWdlICoqTUFZKiogYmUgcmVmZXJlbmNlZCBieSBhbiBVUkkgKG9yIElSSSkgb3IgYSBidWZmZXIgdmlldyBpbmRleC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEltYWdlIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIFVSSSAob3IgSVJJKSBvZiB0aGUgaW1hZ2UuXHJcbiAgICAgKi9cclxuICAgIFwidXJpXCI/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbWFnZSdzIG1lZGlhIHR5cGUuIFRoaXMgZmllbGQgKipNVVNUKiogYmUgZGVmaW5lZCB3aGVuIGBidWZmZXJWaWV3YCBpcyBkZWZpbmVkLlxyXG4gICAgICovXHJcbiAgICBcIm1pbWVUeXBlXCI/OiBhbnkgfCBhbnkgfCBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYnVmZmVyVmlldyB0aGF0IGNvbnRhaW5zIHRoZSBpbWFnZS4gVGhpcyBmaWVsZCAqKk1VU1QgTk9UKiogYmUgZGVmaW5lZCB3aGVuIGB1cmlgIGlzIGRlZmluZWQuXHJcbiAgICAgKi9cclxuICAgIFwiYnVmZmVyVmlld1wiPzogR2xUZklkO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSB0ZXh0dXJlLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGV4dHVyZUluZm8ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIHRleHR1cmUuXHJcbiAgICAgKi9cclxuICAgIFwiaW5kZXhcIjogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2V0IGluZGV4IG9mIHRleHR1cmUncyBURVhDT09SRCBhdHRyaWJ1dGUgdXNlZCBmb3IgdGV4dHVyZSBjb29yZGluYXRlIG1hcHBpbmcuXHJcbiAgICAgKi9cclxuICAgIFwidGV4Q29vcmRcIj86IG51bWJlcjtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEEgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdGhhdCBhcmUgdXNlZCB0byBkZWZpbmUgdGhlIG1ldGFsbGljLXJvdWdobmVzcyBtYXRlcmlhbCBtb2RlbCBmcm9tIFBoeXNpY2FsbHktQmFzZWQgUmVuZGVyaW5nIChQQlIpIG1ldGhvZG9sb2d5LlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWxQYnJNZXRhbGxpY1JvdWdobmVzcyB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmYWN0b3JzIGZvciB0aGUgYmFzZSBjb2xvciBvZiB0aGUgbWF0ZXJpYWwuXHJcbiAgICAgKi9cclxuICAgIFwiYmFzZUNvbG9yRmFjdG9yXCI/OiBudW1iZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGJhc2UgY29sb3IgdGV4dHVyZS5cclxuICAgICAqL1xyXG4gICAgXCJiYXNlQ29sb3JUZXh0dXJlXCI/OiBUZXh0dXJlSW5mbztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZhY3RvciBmb3IgdGhlIG1ldGFsbmVzcyBvZiB0aGUgbWF0ZXJpYWwuXHJcbiAgICAgKi9cclxuICAgIFwibWV0YWxsaWNGYWN0b3JcIj86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZhY3RvciBmb3IgdGhlIHJvdWdobmVzcyBvZiB0aGUgbWF0ZXJpYWwuXHJcbiAgICAgKi9cclxuICAgIFwicm91Z2huZXNzRmFjdG9yXCI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtZXRhbGxpYy1yb3VnaG5lc3MgdGV4dHVyZS5cclxuICAgICAqL1xyXG4gICAgXCJtZXRhbGxpY1JvdWdobmVzc1RleHR1cmVcIj86IFRleHR1cmVJbmZvO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgZXhwb3J0IGludGVyZmFjZSBNYXRlcmlhbE5vcm1hbFRleHR1cmVJbmZvIHtcclxuICAgIFwiaW5kZXhcIj86IGFueTtcclxuICAgIFwidGV4Q29vcmRcIj86IGFueTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNjYWxhciBwYXJhbWV0ZXIgYXBwbGllZCB0byBlYWNoIG5vcm1hbCB2ZWN0b3Igb2YgdGhlIG5vcm1hbCB0ZXh0dXJlLlxyXG4gICAgICovXHJcbiAgICBcInNjYWxlXCI/OiBudW1iZXI7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICBleHBvcnQgaW50ZXJmYWNlIE1hdGVyaWFsT2NjbHVzaW9uVGV4dHVyZUluZm8ge1xyXG4gICAgXCJpbmRleFwiPzogYW55O1xyXG4gICAgXCJ0ZXhDb29yZFwiPzogYW55O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNjYWxhciBtdWx0aXBsaWVyIGNvbnRyb2xsaW5nIHRoZSBhbW91bnQgb2Ygb2NjbHVzaW9uIGFwcGxpZWQuXHJcbiAgICAgKi9cclxuICAgIFwic3RyZW5ndGhcIj86IG51bWJlcjtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXRlcmlhbCBhcHBlYXJhbmNlIG9mIGEgcHJpbWl0aXZlLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWwge1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdGhhdCBhcmUgdXNlZCB0byBkZWZpbmUgdGhlIG1ldGFsbGljLXJvdWdobmVzcyBtYXRlcmlhbCBtb2RlbCBmcm9tIFBoeXNpY2FsbHkgQmFzZWQgUmVuZGVyaW5nIChQQlIpIG1ldGhvZG9sb2d5LiBXaGVuIHVuZGVmaW5lZCwgYWxsIHRoZSBkZWZhdWx0IHZhbHVlcyBvZiBgcGJyTWV0YWxsaWNSb3VnaG5lc3NgICoqTVVTVCoqIGFwcGx5LlxyXG4gICAgICovXHJcbiAgICBcInBick1ldGFsbGljUm91Z2huZXNzXCI/OiBNYXRlcmlhbFBick1ldGFsbGljUm91Z2huZXNzO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGFuZ2VudCBzcGFjZSBub3JtYWwgdGV4dHVyZS5cclxuICAgICAqL1xyXG4gICAgXCJub3JtYWxUZXh0dXJlXCI/OiBNYXRlcmlhbE5vcm1hbFRleHR1cmVJbmZvO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgb2NjbHVzaW9uIHRleHR1cmUuXHJcbiAgICAgKi9cclxuICAgIFwib2NjbHVzaW9uVGV4dHVyZVwiPzogTWF0ZXJpYWxPY2NsdXNpb25UZXh0dXJlSW5mbztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGVtaXNzaXZlIHRleHR1cmUuXHJcbiAgICAgKi9cclxuICAgIFwiZW1pc3NpdmVUZXh0dXJlXCI/OiBUZXh0dXJlSW5mbztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZhY3RvcnMgZm9yIHRoZSBlbWlzc2l2ZSBjb2xvciBvZiB0aGUgbWF0ZXJpYWwuXHJcbiAgICAgKi9cclxuICAgIFwiZW1pc3NpdmVGYWN0b3JcIj86IG51bWJlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYWxwaGEgcmVuZGVyaW5nIG1vZGUgb2YgdGhlIG1hdGVyaWFsLlxyXG4gICAgICovXHJcbiAgICBcImFscGhhTW9kZVwiPzogXCJPUEFRVUVcIiB8IFwiTUFTS1wiIHwgXCJCTEVORFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYWxwaGEgY3V0b2ZmIHZhbHVlIG9mIHRoZSBtYXRlcmlhbC5cclxuICAgICAqL1xyXG4gICAgXCJhbHBoYUN1dG9mZlwiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgbWF0ZXJpYWwgaXMgZG91YmxlIHNpZGVkLlxyXG4gICAgICovXHJcbiAgICBcImRvdWJsZVNpZGVkXCI/OiBib29sZWFuO1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogR2VvbWV0cnkgdG8gYmUgcmVuZGVyZWQgd2l0aCB0aGUgZ2l2ZW4gbWF0ZXJpYWwuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNZXNoUHJpbWl0aXZlIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBwbGFpbiBKU09OIG9iamVjdCwgd2hlcmUgZWFjaCBrZXkgY29ycmVzcG9uZHMgdG8gYSBtZXNoIGF0dHJpYnV0ZSBzZW1hbnRpYyBhbmQgZWFjaCB2YWx1ZSBpcyB0aGUgaW5kZXggb2YgdGhlIGFjY2Vzc29yIGNvbnRhaW5pbmcgYXR0cmlidXRlJ3MgZGF0YS5cclxuICAgICAqL1xyXG4gICAgXCJhdHRyaWJ1dGVzXCI6IHtcclxuICAgICAgW2s6IHN0cmluZ106IEdsVGZJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYWNjZXNzb3IgdGhhdCBjb250YWlucyB0aGUgdmVydGV4IGluZGljZXMuXHJcbiAgICAgKi9cclxuICAgIFwiaW5kaWNlc1wiPzogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIG1hdGVyaWFsIHRvIGFwcGx5IHRvIHRoaXMgcHJpbWl0aXZlIHdoZW4gcmVuZGVyaW5nLlxyXG4gICAgICovXHJcbiAgICBcIm1hdGVyaWFsXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0b3BvbG9neSB0eXBlIG9mIHByaW1pdGl2ZXMgdG8gcmVuZGVyLlxyXG4gICAgICovXHJcbiAgICBcIm1vZGVcIj86IE1FU0hfUFJJTUlUSVZFX01PREU7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGFycmF5IG9mIG1vcnBoIHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIFwidGFyZ2V0c1wiPzoge1xyXG4gICAgICBbazogc3RyaW5nXTogR2xUZklkO1xyXG4gICAgfVtdO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBlbnVtIE1FU0hfUFJJTUlUSVZFX01PREUge1xyXG4gICAgUE9JTlRTLFxyXG4gICAgTElORVMsXHJcbiAgICBMSU5FX0xPT1AsXHJcbiAgICBMSU5FX1NUUklQLFxyXG4gICAgVFJJQU5HTEVTLFxyXG4gICAgVFJJQU5HTEVfU1RSSVAsXHJcbiAgICBUUklBTkdMRV9GQU5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgc2V0IG9mIHByaW1pdGl2ZXMgdG8gYmUgcmVuZGVyZWQuICBJdHMgZ2xvYmFsIHRyYW5zZm9ybSBpcyBkZWZpbmVkIGJ5IGEgbm9kZSB0aGF0IHJlZmVyZW5jZXMgaXQuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNZXNoIHtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgcHJpbWl0aXZlcywgZWFjaCBkZWZpbmluZyBnZW9tZXRyeSB0byBiZSByZW5kZXJlZC5cclxuICAgICAqL1xyXG4gICAgXCJwcmltaXRpdmVzXCI6IE1lc2hQcmltaXRpdmVbXTtcclxuICAgIC8qKlxyXG4gICAgICogQXJyYXkgb2Ygd2VpZ2h0cyB0byBiZSBhcHBsaWVkIHRvIHRoZSBtb3JwaCB0YXJnZXRzLiBUaGUgbnVtYmVyIG9mIGFycmF5IGVsZW1lbnRzICoqTVVTVCoqIG1hdGNoIHRoZSBudW1iZXIgb2YgbW9ycGggdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgXCJ3ZWlnaHRzXCI/OiBudW1iZXJbXTtcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSBub2RlIGluIHRoZSBub2RlIGhpZXJhcmNoeS4gIFdoZW4gdGhlIG5vZGUgY29udGFpbnMgYHNraW5gLCBhbGwgYG1lc2gucHJpbWl0aXZlc2AgKipNVVNUKiogY29udGFpbiBgSk9JTlRTXzBgIGFuZCBgV0VJR0hUU18wYCBhdHRyaWJ1dGVzLiAgQSBub2RlICoqTUFZKiogaGF2ZSBlaXRoZXIgYSBgbWF0cml4YCBvciBhbnkgY29tYmluYXRpb24gb2YgYHRyYW5zbGF0aW9uYC9gcm90YXRpb25gL2BzY2FsZWAgKFRSUykgcHJvcGVydGllcy4gVFJTIHByb3BlcnRpZXMgYXJlIGNvbnZlcnRlZCB0byBtYXRyaWNlcyBhbmQgcG9zdG11bHRpcGxpZWQgaW4gdGhlIGBUICogUiAqIFNgIG9yZGVyIHRvIGNvbXBvc2UgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeDsgZmlyc3QgdGhlIHNjYWxlIGlzIGFwcGxpZWQgdG8gdGhlIHZlcnRpY2VzLCB0aGVuIHRoZSByb3RhdGlvbiwgYW5kIHRoZW4gdGhlIHRyYW5zbGF0aW9uLiBJZiBub25lIGFyZSBwcm92aWRlZCwgdGhlIHRyYW5zZm9ybSBpcyB0aGUgaWRlbnRpdHkuIFdoZW4gYSBub2RlIGlzIHRhcmdldGVkIGZvciBhbmltYXRpb24gKHJlZmVyZW5jZWQgYnkgYW4gYW5pbWF0aW9uLmNoYW5uZWwudGFyZ2V0KSwgYG1hdHJpeGAgKipNVVNUIE5PVCoqIGJlIHByZXNlbnQuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBOb2RlIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjYW1lcmEgcmVmZXJlbmNlZCBieSB0aGlzIG5vZGUuXHJcbiAgICAgKi9cclxuICAgIFwiY2FtZXJhXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRpY2VzIG9mIHRoaXMgbm9kZSdzIGNoaWxkcmVuLlxyXG4gICAgICovXHJcbiAgICBcImNoaWxkcmVuXCI/OiBHbFRmSWRbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBza2luIHJlZmVyZW5jZWQgYnkgdGhpcyBub2RlLlxyXG4gICAgICovXHJcbiAgICBcInNraW5cIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogQSBmbG9hdGluZy1wb2ludCA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHN0b3JlZCBpbiBjb2x1bW4tbWFqb3Igb3JkZXIuXHJcbiAgICAgKi9cclxuICAgIFwibWF0cml4XCI/OiBudW1iZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBtZXNoIGluIHRoaXMgbm9kZS5cclxuICAgICAqL1xyXG4gICAgXCJtZXNoXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub2RlJ3MgdW5pdCBxdWF0ZXJuaW9uIHJvdGF0aW9uIGluIHRoZSBvcmRlciAoeCwgeSwgeiwgdyksIHdoZXJlIHcgaXMgdGhlIHNjYWxhci5cclxuICAgICAqL1xyXG4gICAgXCJyb3RhdGlvblwiPzogbnVtYmVyW107XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub2RlJ3Mgbm9uLXVuaWZvcm0gc2NhbGUsIGdpdmVuIGFzIHRoZSBzY2FsaW5nIGZhY3RvcnMgYWxvbmcgdGhlIHgsIHksIGFuZCB6IGF4ZXMuXHJcbiAgICAgKi9cclxuICAgIFwic2NhbGVcIj86IG51bWJlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbm9kZSdzIHRyYW5zbGF0aW9uIGFsb25nIHRoZSB4LCB5LCBhbmQgeiBheGVzLlxyXG4gICAgICovXHJcbiAgICBcInRyYW5zbGF0aW9uXCI/OiBudW1iZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHdlaWdodHMgb2YgdGhlIGluc3RhbnRpYXRlZCBtb3JwaCB0YXJnZXQuIFRoZSBudW1iZXIgb2YgYXJyYXkgZWxlbWVudHMgKipNVVNUKiogbWF0Y2ggdGhlIG51bWJlciBvZiBtb3JwaCB0YXJnZXRzIG9mIHRoZSByZWZlcmVuY2VkIG1lc2guIFdoZW4gZGVmaW5lZCwgYG1lc2hgICoqTVVTVCoqIGFsc28gYmUgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgXCJ3ZWlnaHRzXCI/OiBudW1iZXJbXTtcclxuICAgIFwibmFtZVwiPzogc3RyaW5nO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEN1c3RvbSBwcm9wZXJ0eSBzZXQgYnkgRlVER0UgbG9hZGVyLiBOb3QgcGFydCBvZiBnbFRGIHN0YW5kYXJkIDIuMC5cclxuICAgICAqL1xyXG4gICAgaXNBbmltYXRlZD86IGJvb2xlYW47XHJcbiAgICAvKipcclxuICAgICAqIEN1c3RvbSBwcm9wZXJ0eSBzZXQgYnkgRlVER0UgbG9hZGVyLiBOb3QgcGFydCBvZiBnbFRGIHN0YW5kYXJkIDIuMC5cclxuICAgICAqL1xyXG4gICAgcGFyZW50PzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXRoIGZyb20gdGhlIHJvb3Qgbm9kZSB0byB0aGlzIG5vZGUuXHJcbiAgICAgKiBDdXN0b20gcHJvcGVydHkgc2V0IGJ5IEZVREdFIGxvYWRlci4gTm90IHBhcnQgb2YgZ2xURiBzdGFuZGFyZCAyLjAuXHJcbiAgICAgKi9cclxuICAgIHBhdGg/OiBudW1iZXJbXTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVGV4dHVyZSBzYW1wbGVyIHByb3BlcnRpZXMgZm9yIGZpbHRlcmluZyBhbmQgd3JhcHBpbmcgbW9kZXMuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBTYW1wbGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogTWFnbmlmaWNhdGlvbiBmaWx0ZXIuXHJcbiAgICAgKi9cclxuICAgIFwibWFnRmlsdGVyXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVFwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJMSU5FQVJcIl07XHJcbiAgICAvKipcclxuICAgICAqIE1pbmlmaWNhdGlvbiBmaWx0ZXIuXHJcbiAgICAgKi9cclxuICAgIFwibWluRmlsdGVyXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVFwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJMSU5FQVJcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVF9NSVBNQVBfTkVBUkVTVFwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJMSU5FQVJfTUlQTUFQX05FQVJFU1RcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVF9NSVBNQVBfTElORUFSXCJdIHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dFtcIkxJTkVBUl9NSVBNQVBfTElORUFSXCJdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTIChVKSB3cmFwcGluZyBtb2RlLlxyXG4gICAgICovXHJcbiAgICBcIndyYXBTXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiQ0xBTVBfVE9fRURHRVwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJNSVJST1JFRF9SRVBFQVRcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiUkVQRUFUXCJdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUIChWKSB3cmFwcGluZyBtb2RlLlxyXG4gICAgICovXHJcbiAgICBcIndyYXBUXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiQ0xBTVBfVE9fRURHRVwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJNSVJST1JFRF9SRVBFQVRcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiUkVQRUFUXCJdO1xyXG4gICAgXCJuYW1lXCI/OiBzdHJpbmc7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGUgcm9vdCBub2RlcyBvZiBhIHNjZW5lLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2NlbmUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kaWNlcyBvZiBlYWNoIHJvb3Qgbm9kZS5cclxuICAgICAqL1xyXG4gICAgXCJub2Rlc1wiPzogR2xUZklkW107XHJcbiAgICBcIm5hbWVcIj86IGFueTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEpvaW50cyBhbmQgbWF0cmljZXMgZGVmaW5pbmcgYSBza2luLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2tpbiB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYWNjZXNzb3IgY29udGFpbmluZyB0aGUgZmxvYXRpbmctcG9pbnQgNHg0IGludmVyc2UtYmluZCBtYXRyaWNlcy5cclxuICAgICAqL1xyXG4gICAgXCJpbnZlcnNlQmluZE1hdHJpY2VzXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgbm9kZSB1c2VkIGFzIGEgc2tlbGV0b24gcm9vdC5cclxuICAgICAqL1xyXG4gICAgXCJza2VsZXRvblwiPzogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2VzIG9mIHNrZWxldG9uIG5vZGVzLCB1c2VkIGFzIGpvaW50cyBpbiB0aGlzIHNraW4uXHJcbiAgICAgKi9cclxuICAgIFwiam9pbnRzXCI6IEdsVGZJZFtdO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBIHRleHR1cmUgYW5kIGl0cyBzYW1wbGVyLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGV4dHVyZSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgc2FtcGxlciB1c2VkIGJ5IHRoaXMgdGV4dHVyZS4gV2hlbiB1bmRlZmluZWQsIGEgc2FtcGxlciB3aXRoIHJlcGVhdCB3cmFwcGluZyBhbmQgYXV0byBmaWx0ZXJpbmcgKipTSE9VTEQqKiBiZSB1c2VkLlxyXG4gICAgICovXHJcbiAgICBcInNhbXBsZXJcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBpbWFnZSB1c2VkIGJ5IHRoaXMgdGV4dHVyZS4gV2hlbiB1bmRlZmluZWQsIGFuIGV4dGVuc2lvbiBvciBvdGhlciBtZWNoYW5pc20gKipTSE9VTEQqKiBzdXBwbHkgYW4gYWx0ZXJuYXRlIHRleHR1cmUgc291cmNlLCBvdGhlcndpc2UgYmVoYXZpb3IgaXMgdW5kZWZpbmVkLlxyXG4gICAgICovXHJcbiAgICBcInNvdXJjZVwiPzogR2xUZklkO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGUgcm9vdCBvYmplY3QgZm9yIGEgZ2xURiBhc3NldC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEdsVGYge1xyXG4gICAgLyoqXHJcbiAgICAgKiBOYW1lcyBvZiBnbFRGIGV4dGVuc2lvbnMgdXNlZCBpbiB0aGlzIGFzc2V0LlxyXG4gICAgICovXHJcbiAgICBcImV4dGVuc2lvbnNVc2VkXCI/OiBzdHJpbmdbXTtcclxuICAgIC8qKlxyXG4gICAgICogTmFtZXMgb2YgZ2xURiBleHRlbnNpb25zIHJlcXVpcmVkIHRvIHByb3Blcmx5IGxvYWQgdGhpcyBhc3NldC5cclxuICAgICAqL1xyXG4gICAgXCJleHRlbnNpb25zUmVxdWlyZWRcIj86IHN0cmluZ1tdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBhY2Nlc3NvcnMuXHJcbiAgICAgKi9cclxuICAgIFwiYWNjZXNzb3JzXCI/OiBBY2Nlc3NvcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBrZXlmcmFtZSBhbmltYXRpb25zLlxyXG4gICAgICovXHJcbiAgICBcImFuaW1hdGlvbnNcIj86IEFuaW1hdGlvbltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRhZGF0YSBhYm91dCB0aGUgZ2xURiBhc3NldC5cclxuICAgICAqL1xyXG4gICAgXCJhc3NldFwiOiBBc3NldDtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgYnVmZmVycy5cclxuICAgICAqL1xyXG4gICAgXCJidWZmZXJzXCI/OiBCdWZmZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgYnVmZmVyVmlld3MuXHJcbiAgICAgKi9cclxuICAgIFwiYnVmZmVyVmlld3NcIj86IEJ1ZmZlclZpZXdbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgY2FtZXJhcy5cclxuICAgICAqL1xyXG4gICAgXCJjYW1lcmFzXCI/OiBDYW1lcmFbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgaW1hZ2VzLlxyXG4gICAgICovXHJcbiAgICBcImltYWdlc1wiPzogSW1hZ2VbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgbWF0ZXJpYWxzLlxyXG4gICAgICovXHJcbiAgICBcIm1hdGVyaWFsc1wiPzogTWF0ZXJpYWxbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgbWVzaGVzLlxyXG4gICAgICovXHJcbiAgICBcIm1lc2hlc1wiPzogTWVzaFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBub2Rlcy5cclxuICAgICAqL1xyXG4gICAgXCJub2Rlc1wiPzogTm9kZVtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBzYW1wbGVycy5cclxuICAgICAqL1xyXG4gICAgXCJzYW1wbGVyc1wiPzogU2FtcGxlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGRlZmF1bHQgc2NlbmUuXHJcbiAgICAgKi9cclxuICAgIFwic2NlbmVcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2Ygc2NlbmVzLlxyXG4gICAgICovXHJcbiAgICBcInNjZW5lc1wiPzogU2NlbmVbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2Ygc2tpbnMuXHJcbiAgICAgKi9cclxuICAgIFwic2tpbnNcIj86IFNraW5bXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgdGV4dHVyZXMuXHJcbiAgICAgKi9cclxuICAgIFwidGV4dHVyZXNcIj86IFRleHR1cmVbXTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFzc2V0IGxvYWRlciBmb3IgZ2wgVHJhbnNmZXIgRm9ybWF0IGZpbGVzLlxyXG4gICAqIEBhdXRob3JzIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIyIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEdMVEZMb2FkZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbG9hZGVyczogeyBbdXJsOiBzdHJpbmddOiBHTFRGTG9hZGVyIH07XHJcblxyXG4gICAgc3RhdGljICNkZWZhdWx0TWF0ZXJpYWw6IE1hdGVyaWFsO1xyXG4gICAgc3RhdGljICNkZWZhdWx0U2tpbk1hdGVyaWFsOiBNYXRlcmlhbDtcclxuXHJcbiAgICByZWFkb25seSAjdXJsOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSAjZ2x0ZjogR0xURi5HbFRmO1xyXG5cclxuICAgICNyZXNvdXJjZXM6IFJlc291cmNlcyA9IHt9O1xyXG5cclxuICAgICNub2RlczogTm9kZVtdID0gW107XHJcbiAgICAjY2FtZXJhczogQ29tcG9uZW50Q2FtZXJhW107XHJcbiAgICAjc2tlbGV0b25zOiBDb21wb25lbnRTa2VsZXRvbltdO1xyXG5cclxuICAgICNidWZmZXJzOiBBcnJheUJ1ZmZlcltdO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoX2dsdGY6IEdMVEYuR2xUZiwgX3VybDogc3RyaW5nLCBfYnVmZmVyQ2h1bms/OiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICB0aGlzLiNnbHRmID0gX2dsdGY7XHJcbiAgICAgIHRoaXMuI3VybCA9IF91cmw7XHJcbiAgICAgIGlmIChfYnVmZmVyQ2h1bmspXHJcbiAgICAgICAgdGhpcy4jYnVmZmVycyA9IFtfYnVmZmVyQ2h1bmtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBkZWZhdWx0TWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xyXG4gICAgICBpZiAoIXRoaXMuI2RlZmF1bHRNYXRlcmlhbCkge1xyXG4gICAgICAgIHRoaXMuI2RlZmF1bHRNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChcIkdMVEZEZWZhdWx0TWF0ZXJpYWxcIiwgU2hhZGVyUGhvbmcsIG5ldyBDb2F0UmVtaXNzaXZlKENvbG9yLkNTUyhcIndoaXRlXCIpLCAxLCAwLjUpKTtcclxuICAgICAgICBQcm9qZWN0LmRlcmVnaXN0ZXIodGhpcy4jZGVmYXVsdE1hdGVyaWFsKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jZGVmYXVsdE1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldCBkZWZhdWx0U2tpbk1hdGVyaWFsKCk6IE1hdGVyaWFsIHtcclxuICAgICAgaWYgKCF0aGlzLiNkZWZhdWx0U2tpbk1hdGVyaWFsKSB7XHJcbiAgICAgICAgdGhpcy4jZGVmYXVsdFNraW5NYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChcIkdMVEZEZWZhdWx0U2tpbk1hdGVyaWFsXCIsIFNoYWRlclBob25nU2tpbiwgbmV3IENvYXRSZW1pc3NpdmUoQ29sb3IuQ1NTKFwid2hpdGVcIiksIDEsIDAuNSkpO1xyXG4gICAgICAgIFByb2plY3QuZGVyZWdpc3Rlcih0aGlzLiNkZWZhdWx0U2tpbk1hdGVyaWFsKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jZGVmYXVsdFNraW5NYXRlcmlhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGxvYWRpbmcgb2YgYW4gZXh0ZXJuYWwgcmVzb3VyY2UgZnJvbSBhIGdsVEYgZmlsZS4gVXNlZCBieSB0aGUge0BsaW5rIFNlcmlhbGl6YWJsZVJlc291cmNlRXh0ZXJuYWx9R0xURiBzcGVjaWFsaXphdGlvbnMgdG8gbG9hZCB0aGVtc2VsdmVzLlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc291cmNlPFQgZXh0ZW5kcyBHcmFwaEdMVEYgfCBNZXNoR0xURiB8IE1hdGVyaWFsR0xURiB8IEFuaW1hdGlvbkdMVEYgfCBHcmFwaEluc3RhbmNlPihfcmVzb3VyY2U6IFQsIF91cmw/OiBSZXF1ZXN0SW5mbyk6IFByb21pc2U8VD4ge1xyXG4gICAgICBjb25zdCBsb2FkZXI6IEdMVEZMb2FkZXIgPSBhd2FpdCBHTFRGTG9hZGVyLkxPQUQoKCg8U2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbD5fcmVzb3VyY2UpLnVybCA/PyBfdXJsKS50b1N0cmluZygpKTtcclxuXHJcbiAgICAgIGlmICghbG9hZGVyKSB7XHJcbiAgICAgICAgaWYgKCEoX3Jlc291cmNlIGluc3RhbmNlb2YgR3JhcGhJbnN0YW5jZSkpXHJcbiAgICAgICAgICBfcmVzb3VyY2Uuc3RhdHVzID0gUkVTT1VSQ0VfU1RBVFVTLkVSUk9SO1xyXG4gICAgICAgIHJldHVybiBfcmVzb3VyY2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBsb2FkZWQ6IFQ7XHJcblxyXG4gICAgICBpZiAoX3Jlc291cmNlIGluc3RhbmNlb2YgR3JhcGhJbnN0YW5jZSlcclxuICAgICAgICBsb2FkZWQgPSBhd2FpdCBsb2FkZXIuZ2V0R3JhcGgoX3Jlc291cmNlLmdldCgpLm5hbWUsIF9yZXNvdXJjZSk7XHJcbiAgICAgIGVsc2UgaWYgKF9yZXNvdXJjZSBpbnN0YW5jZW9mIEdyYXBoR0xURilcclxuICAgICAgICBsb2FkZWQgPSBhd2FpdCBsb2FkZXIuZ2V0R3JhcGgoX3Jlc291cmNlLm5hbWUsIF9yZXNvdXJjZSk7XHJcbiAgICAgIGVsc2UgaWYgKF9yZXNvdXJjZSBpbnN0YW5jZW9mIE1lc2hHTFRGKVxyXG4gICAgICAgIGxvYWRlZCA9IGF3YWl0IGxvYWRlci5nZXRNZXNoKF9yZXNvdXJjZS5uYW1lLCBfcmVzb3VyY2UuaVByaW1pdGl2ZSwgX3Jlc291cmNlKTtcclxuICAgICAgZWxzZSBpZiAoX3Jlc291cmNlIGluc3RhbmNlb2YgTWF0ZXJpYWxHTFRGKVxyXG4gICAgICAgIGxvYWRlZCA9IGF3YWl0IGxvYWRlci5nZXRNYXRlcmlhbChfcmVzb3VyY2UubmFtZSwgX3Jlc291cmNlKTtcclxuICAgICAgZWxzZSBpZiAoX3Jlc291cmNlIGluc3RhbmNlb2YgQW5pbWF0aW9uR0xURilcclxuICAgICAgICBsb2FkZWQgPSBhd2FpdCBsb2FkZXIuZ2V0QW5pbWF0aW9uKF9yZXNvdXJjZS5uYW1lLCBfcmVzb3VyY2UpO1xyXG5cclxuICAgICAgaWYgKCFsb2FkZWQpIHtcclxuICAgICAgICBEZWJ1Zy5lcnJvcihgJHtfcmVzb3VyY2UuY29uc3RydWN0b3IubmFtZX0gfCAke19yZXNvdXJjZSBpbnN0YW5jZW9mIEdyYXBoSW5zdGFuY2UgPyBfcmVzb3VyY2UuaWRTb3VyY2UgOiBfcmVzb3VyY2UuaWRSZXNvdXJjZX06IEZhaWxlZCB0byBsb2FkIHJlc291cmNlLmApO1xyXG4gICAgICAgIGlmICghKF9yZXNvdXJjZSBpbnN0YW5jZW9mIEdyYXBoSW5zdGFuY2UpKVxyXG4gICAgICAgICAgX3Jlc291cmNlLnN0YXR1cyA9IFJFU09VUkNFX1NUQVRVUy5FUlJPUjtcclxuXHJcbiAgICAgICAgcmV0dXJuIF9yZXNvdXJjZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCEobG9hZGVkIGluc3RhbmNlb2YgR3JhcGhJbnN0YW5jZSkpIHtcclxuICAgICAgICBsb2FkZWQuc3RhdHVzID0gUkVTT1VSQ0VfU1RBVFVTLlJFQURZO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBpZiAoY2FjaGVkICYmICEoX3Jlc291cmNlIGluc3RhbmNlb2YgR3JhcGhJbnN0YW5jZSkpIHtcclxuXHJcbiAgICAgIC8vICAgaWYgKCFQcm9qZWN0LnJlc291cmNlc1tjYWNoZWQuaWRSZXNvdXJjZV0pXHJcbiAgICAgIC8vICAgICBjYWNoZWQuaWRSZXNvdXJjZSA9IF9yZXNvdXJjZS5pZFJlc291cmNlOyAvLyBjaGFuZ2UgdGhlIGlkIG9mIHRoZSBjYWNoZWQgcmVzb3VyY2UgdG8gdGhlIGlkIG9mIHRoZSByZXNvdXJjZSB0aGF0IHJlcXVlc3RlZCBpdFxyXG5cclxuICAgICAgLy8gICBpZiAoY2FjaGVkLmlkUmVzb3VyY2UgIT0gX3Jlc291cmNlLmlkUmVzb3VyY2UpIHtcclxuICAgICAgLy8gICAgIC8vIHR3byBkaWZmZXJlbnQgcmVzb3VyY2VzIGhhdmUgcmVxdWVzdGVkIHRoZSBzYW1lIGNhY2hlZCByZXNvdXJjZVxyXG4gICAgICAvLyAgICAgRGVidWcuZXJyb3IoYCR7X3Jlc291cmNlLmlkUmVzb3VyY2V9OiBGYWlsZWQgdG8gbG9hZCByZXNvdXJjZS4gJHtfcmVzb3VyY2UudHlwZX0gd2l0aCBuYW1lICcke19yZXNvdXJjZS5uYW1lfScgZnJvbSAnJHtsb2FkZXIubmFtZX0nIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGJ5ICcke2NhY2hlZC5pZFJlc291cmNlfScuIFBsZWFzZSBkZWxldGUgdGhlIGR1cGxpY2F0ZSAnJHtfcmVzb3VyY2UuaWRSZXNvdXJjZX0nIGZyb20gdGhlIHByb2plY3QuYCk7XHJcbiAgICAgIC8vICAgICByZXR1cm4gX3Jlc291cmNlO1xyXG4gICAgICAvLyAgIH1cclxuXHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIHJldHVybiBsb2FkZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIEdMVEZMb2FkZXJ9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gdXJsIG9yIG51bGwgaWYgdGhlIHVybCBjYW4ndCBiZSByZXNvbHZlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBMT0FEKF91cmw6IHN0cmluZywgX3JlZ2lzdGVyUmVzb3VyY2VzOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEdMVEZMb2FkZXI+IHtcclxuICAgICAgaWYgKCF0aGlzLmxvYWRlcnMpXHJcbiAgICAgICAgR0xURkxvYWRlci5sb2FkZXJzID0ge307XHJcblxyXG4gICAgICBpZiAoIXRoaXMubG9hZGVyc1tfdXJsXSkge1xyXG4gICAgICAgIGxldCBnbHRmOiBHTFRGLkdsVGY7XHJcbiAgICAgICAgbGV0IGJ1ZmZlcjogQXJyYXlCdWZmZXI7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKG5ldyBVUkwoX3VybCwgUHJvamVjdC5iYXNlVVJMKSk7XHJcbiAgICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uOiBzdHJpbmcgPSBfdXJsLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgaWYgKGZpbGVFeHRlbnNpb24gPT0gXCJnbHRmXCIpXHJcbiAgICAgICAgICAgIGdsdGYgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICAgICAgaWYgKGZpbGVFeHRlbnNpb24gPT0gXCJnbGJcIikge1xyXG4gICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlcjogQXJyYXlCdWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVmlldzogRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWFnaWM6IG51bWJlciA9IGRhdGFWaWV3LmdldFVpbnQzMigwLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKG1hZ2ljICE9PSAweDQ2NTQ2QzY3KVxyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtHTFRGTG9hZGVyLm5hbWV9IHwgJHtfdXJsfTogSW52YWxpZCBtYWdpYyBudW1iZXIgaW4gR0xCIGZpbGUuYCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uOiBudW1iZXIgPSBkYXRhVmlldy5nZXRVaW50MzIoNCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uICE9IDIpXHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke0dMVEZMb2FkZXIubmFtZX0gfCAke191cmx9OiBVbnN1cHBvcnRlZCB2ZXJzaW9uIGluIEdMQiBmaWxlLmApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QganNvbkxlbmd0aDogbnVtYmVyID0gZGF0YVZpZXcuZ2V0VWludDMyKDEyLCB0cnVlKTtcclxuICAgICAgICAgICAgY29uc3QganNvbkZvcm1hdDogbnVtYmVyID0gZGF0YVZpZXcuZ2V0VWludDMyKDE2LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChqc29uRm9ybWF0ICE9PSAweDRFNEY1MzRBKVxyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmb3JtYXQuIFRoZSBmaXJzdCBjaHVuayBvZiB0aGUgZmlsZSBpcyBub3QgaW4gSlNPTiBmb3JtYXQuJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyOiBUZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBqc29uQ2h1bms6IHN0cmluZyA9IGRlY29kZXIuZGVjb2RlKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCAyMCwganNvbkxlbmd0aCkpO1xyXG4gICAgICAgICAgICBnbHRmID0gSlNPTi5wYXJzZShqc29uQ2h1bmspO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFycmF5QnVmZmVyLmJ5dGVMZW5ndGggPj0gMjAgKyBqc29uTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYmluYXJ5TGVuZ3RoOiBudW1iZXIgPSBkYXRhVmlldy5nZXRVaW50MzIoMjAgKyBqc29uTGVuZ3RoLCB0cnVlKTtcclxuICAgICAgICAgICAgICBjb25zdCBiaW5hcnlGb3JtYXQ6IG51bWJlciA9IGRhdGFWaWV3LmdldFVpbnQzMigyNCArIGpzb25MZW5ndGgsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoYmluYXJ5Rm9ybWF0ICE9PSAweDAwNEU0OTQyKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZvcm1hdC4gVGhlIHNlY29uZCBjaHVuayBvZiB0aGUgZmlsZSBpcyBub3QgaW4gYmluYXJ5IGZvcm1hdC4nKTtcclxuXHJcbiAgICAgICAgICAgICAgYnVmZmVyID0gYXJyYXlCdWZmZXIuc2xpY2UoMjggKyBqc29uTGVuZ3RoLCAyOCArIGpzb25MZW5ndGggKyBiaW5hcnlMZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcclxuICAgICAgICAgIERlYnVnLmVycm9yKGAke0dMVEZMb2FkZXIubmFtZX0gfCAke191cmx9OiBGYWlsZWQgdG8gbG9hZCBmaWxlLiAke2Vycm9yfWApO1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHTFRGTG9hZGVyLmNoZWNrQ29tcGF0aWJpbGl0eShnbHRmLCBfdXJsKTtcclxuICAgICAgICBHTFRGTG9hZGVyLnByZVByb2Nlc3MoZ2x0ZiwgX3VybCk7XHJcblxyXG4gICAgICAgIEdMVEZMb2FkZXIubG9hZGVyc1tfdXJsXSA9IG5ldyBHTFRGTG9hZGVyKGdsdGYsIF91cmwsIGJ1ZmZlcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBHTFRGTG9hZGVyLmxvYWRlcnNbX3VybF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2hlY2tDb21wYXRpYmlsaXR5KF9nbHRmOiBHTFRGLkdsVGYsIF91cmw6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBpZiAoX2dsdGYuYXNzZXQudmVyc2lvbiAhPSBcIjIuMFwiKVxyXG4gICAgICAgIERlYnVnLndhcm4oYCR7R0xURkxvYWRlci5uYW1lfSB8ICR7X3VybH06IFRoaXMgbG9hZGVyIHdhcyBkZXZlbG9wZWQgZm9yIGdsVEYgMi4wLiBJdCBtYXkgbm90IHdvcmsgYXMgaW50ZW5kZWQgd2l0aCB2ZXJzaW9uICR7X2dsdGYuYXNzZXQudmVyc2lvbn0uYCk7XHJcbiAgICAgIGlmIChfZ2x0Zi5hc3NldC5taW5WZXJzaW9uICE9IHVuZGVmaW5lZCAmJiBfZ2x0Zi5hc3NldC5taW5WZXJzaW9uICE9IFwiMi4wXCIpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke0dMVEZMb2FkZXIubmFtZX0gfCAke191cmx9OiBUaGlzIGxvYWRlciB3YXMgZGV2ZWxvcGVkIGZvciBnbFRGIDIuMC4gSXQgZG9lcyBub3Qgd29yayB3aXRoIHJlcXVpcmVkIG1pbiB2ZXJzaW9uICR7X2dsdGYuYXNzZXQubWluVmVyc2lvbn0uYCk7XHJcbiAgICAgIGlmIChfZ2x0Zi5leHRlbnNpb25zVXNlZD8ubGVuZ3RoID4gMClcclxuICAgICAgICBEZWJ1Zy53YXJuKGAke0dMVEZMb2FkZXIubmFtZX0gfCAke191cmx9OiBUaGlzIGxvYWRlciBkb2VzIG5vdCBzdXBwb3J0IGdsVEYgZXh0ZW5zaW9ucy4gSXQgbWF5IG5vdCB3b3JrIGFzIGludGVuZGVkIHdpdGggZXh0ZW5zaW9ucyAke19nbHRmLmV4dGVuc2lvbnNVc2VkLnRvU3RyaW5nKCl9LmApO1xyXG4gICAgICBpZiAoX2dsdGYuZXh0ZW5zaW9uc1JlcXVpcmVkPy5sZW5ndGggPiAwKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtHTFRGTG9hZGVyLm5hbWV9IHwgJHtfdXJsfTogVGhpcyBsb2FkZXIgZG9lcyBub3Qgc3VwcG9ydCBnbFRGIGV4dGVuc2lvbnMuIEl0IGRvZXMgbm90IHdvcmsgd2l0aCByZXF1aXJlZCBleHRlbnNpb25zICR7X2dsdGYuZXh0ZW5zaW9uc1JlcXVpcmVkLnRvU3RyaW5nKCl9LmApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHByZVByb2Nlc3MoX2dsdGY6IEdMVEYuR2xUZiwgX3VybDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIC8vIGFkZCBhIG5hbWUgdG8gZWFjaCBzY2VuZVxyXG4gICAgICBpZiAoX2dsdGYuc2NlbmVzKSB7XHJcbiAgICAgICAgX2dsdGYuc2NlbmUgPSBfZ2x0Zi5zY2VuZSA/PyAwO1xyXG4gICAgICAgIGFkZE5hbWVzKFwiU2NlbmVcIiwgX2dsdGYuc2NlbmVzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKF9nbHRmLm5vZGVzKSB7XHJcbiAgICAgICAgLy8gbWFyayBhbGwgbm9kZXMgdGhhdCBhcmUgYW5pbWF0ZWRcclxuICAgICAgICBfZ2x0Zi5hbmltYXRpb25zPy5mb3JFYWNoKF9hbmltYXRpb24gPT4ge1xyXG4gICAgICAgICAgX2FuaW1hdGlvbi5jaGFubmVscy5mb3JFYWNoKF9jaGFubmVsID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaU5vZGU6IG51bWJlciA9IF9jaGFubmVsLnRhcmdldC5ub2RlO1xyXG4gICAgICAgICAgICBpZiAoaU5vZGUgIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgIF9nbHRmLm5vZGVzW2lOb2RlXS5pc0FuaW1hdGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBtYXJrIHBhcmVudCBvZiBlYWNoIG5vZGVcclxuICAgICAgICBfZ2x0Zi5ub2Rlcy5mb3JFYWNoKChfbm9kZSwgX2lOb2RlKSA9PiBfbm9kZS5jaGlsZHJlbj8uZm9yRWFjaChfaUNoaWxkID0+IF9nbHRmLm5vZGVzW19pQ2hpbGRdLnBhcmVudCA9IF9pTm9kZSkpO1xyXG5cclxuICAgICAgICBfZ2x0Zi5ub2Rlcy5mb3JFYWNoKChfbm9kZSwgX2lOb2RlKSA9PiB7XHJcbiAgICAgICAgICAvLyBhZGQgbmFtZXMgdG8gbm9kZXMgdGhhdCBkb24ndCBoYXZlIG9uZVxyXG4gICAgICAgICAgaWYgKF9ub2RlLm5hbWUgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBfbm9kZS5uYW1lID0gYE5vZGUke19pTm9kZX1gO1xyXG5cclxuICAgICAgICAgIGlmIChfbm9kZS5pc0FuaW1hdGVkKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBwYXRoIHRvIGVhY2ggYW5pbWF0ZWQgbm9kZVxyXG4gICAgICAgICAgICBsZXQgaVBhcmVudDogbnVtYmVyID0gX25vZGUucGFyZW50O1xyXG4gICAgICAgICAgICBsZXQgcGF0aDogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAgICAgcGF0aC5wdXNoKF9pTm9kZSk7XHJcbiAgICAgICAgICAgIHdoaWxlIChpUGFyZW50ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHBhdGgucHVzaChpUGFyZW50KTtcclxuICAgICAgICAgICAgICBpUGFyZW50ID0gX2dsdGYubm9kZXNbaVBhcmVudF0ucGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9ub2RlLnBhdGggPSBwYXRoLnJldmVyc2UoKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChfZ2x0Zi5tYXRlcmlhbHMpXHJcbiAgICAgICAgYWRkTmFtZXMoXCJNYXRlcmlhbFwiLCBfZ2x0Zi5tYXRlcmlhbHMpO1xyXG5cclxuICAgICAgaWYgKF9nbHRmLm1lc2hlcylcclxuICAgICAgICBhZGROYW1lcyhcIk1lc2hcIiwgX2dsdGYubWVzaGVzKTtcclxuXHJcbiAgICAgIGlmIChfZ2x0Zi5hbmltYXRpb25zKVxyXG4gICAgICAgIGFkZE5hbWVzKFwiQW5pbWF0aW9uXCIsIF9nbHRmLmFuaW1hdGlvbnMpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gYWRkTmFtZXMoX3RlbXBsYXRlOiBzdHJpbmcsIF90YXJnZXQ6IHsgbmFtZT86IHN0cmluZyB9W10pOiB2b2lkIHtcclxuICAgICAgICBfdGFyZ2V0LmZvckVhY2goKF9pdGVtLCBfaW5kZXgpID0+IHtcclxuICAgICAgICAgIGlmIChfaXRlbS5uYW1lID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgX2l0ZW0ubmFtZSA9IGAke190ZW1wbGF0ZX0ke19pbmRleH1gO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBnbFRGIGZpbGUgbmFtZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN1cmwuc3BsaXQoXCJcXFxcXCIpLnBvcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBuZXcgaW5zdGFuY2VzIG9mIGFsbCByZXNvdXJjZXMgb2YgdGhlIGdpdmVuIHR5cGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkUmVzb3VyY2VzPFQgZXh0ZW5kcyBTZXJpYWxpemFibGVSZXNvdXJjZUV4dGVybmFsPihfY2xhc3M6IG5ldyAoKSA9PiBUKTogUHJvbWlzZTxUW10+IHtcclxuICAgICAgbGV0IHJlc291cmNlczogU2VyaWFsaXphYmxlUmVzb3VyY2VFeHRlcm5hbFtdID0gW107XHJcbiAgICAgIHN3aXRjaCAoX2NsYXNzLm5hbWUpIHtcclxuICAgICAgICBjYXNlIEdyYXBoLm5hbWU6XHJcbiAgICAgICAgICBmb3IgKGxldCBpU2NlbmU6IG51bWJlciA9IDA7IGlTY2VuZSA8IHRoaXMuI2dsdGYuc2NlbmVzPy5sZW5ndGg7IGlTY2VuZSsrKVxyXG4gICAgICAgICAgICByZXNvdXJjZXMucHVzaChhd2FpdCB0aGlzLmdldEdyYXBoKGlTY2VuZSwgbmV3IEdyYXBoR0xURigpKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE1lc2gubmFtZTpcclxuICAgICAgICAgIGZvciAobGV0IGlNZXNoOiBudW1iZXIgPSAwOyBpTWVzaCA8IHRoaXMuI2dsdGYubWVzaGVzPy5sZW5ndGg7IGlNZXNoKyspXHJcbiAgICAgICAgICAgIGZvciAobGV0IGlQcmltaXRpdmU6IG51bWJlciA9IDA7IGlQcmltaXRpdmUgPCB0aGlzLiNnbHRmLm1lc2hlc1tpTWVzaF0ucHJpbWl0aXZlcy5sZW5ndGg7IGlQcmltaXRpdmUrKylcclxuICAgICAgICAgICAgICByZXNvdXJjZXMucHVzaChhd2FpdCB0aGlzLmdldE1lc2goaU1lc2gsIGlQcmltaXRpdmUsIG5ldyBNZXNoR0xURigpKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE1hdGVyaWFsLm5hbWU6XHJcbiAgICAgICAgICBmb3IgKGxldCBpTWF0ZXJpYWw6IG51bWJlciA9IDA7IGlNYXRlcmlhbCA8IHRoaXMuI2dsdGYubWF0ZXJpYWxzPy5sZW5ndGg7IGlNYXRlcmlhbCsrKVxyXG4gICAgICAgICAgICByZXNvdXJjZXMucHVzaChhd2FpdCB0aGlzLmdldE1hdGVyaWFsKGlNYXRlcmlhbCwgbmV3IE1hdGVyaWFsR0xURihcIkhpIDopXCIpKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFuaW1hdGlvbi5uYW1lOlxyXG4gICAgICAgICAgZm9yIChsZXQgaUFuaW1hdGlvbjogbnVtYmVyID0gMDsgaUFuaW1hdGlvbiA8IHRoaXMuI2dsdGYuYW5pbWF0aW9ucz8ubGVuZ3RoOyBpQW5pbWF0aW9uKyspXHJcbiAgICAgICAgICAgIHJlc291cmNlcy5wdXNoKGF3YWl0IHRoaXMuZ2V0QW5pbWF0aW9uKGlBbmltYXRpb24sIG5ldyBBbmltYXRpb25HTFRGKCkpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHJlc291cmNlcykge1xyXG4gICAgICAgIGlmICghUHJvamVjdC5yZXNvdXJjZXNbcmVzb3VyY2UuaWRSZXNvdXJjZV0pXHJcbiAgICAgICAgICBQcm9qZWN0LnJlZ2lzdGVyKHJlc291cmNlKTtcclxuXHJcbiAgICAgICAgcmVzb3VyY2Uuc3RhdHVzID0gUkVTT1VSQ0VfU1RBVFVTLlJFQURZO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gPFRbXT5yZXNvdXJjZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIEdyYXBofSBmb3IgdGhlIGdpdmVuIHNjZW5lIG5hbWUgb3IgdGhlIGRlZmF1bHQgc2NlbmUgaWYgbm8gbmFtZSBpcyBnaXZlbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldEdyYXBoKF9uYW1lPzogc3RyaW5nKTogUHJvbWlzZTxHcmFwaD47XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgR3JhcGh9IGZvciB0aGUgZ2l2ZW4gc2NlbmUgaW5kZXggb3IgdGhlIGRlZmF1bHQgc2NlbmUgaWYgbm8gaW5kZXggaXMgZ2l2ZW4uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBnZXRHcmFwaChfaVNjZW5lPzogbnVtYmVyKTogUHJvbWlzZTxHcmFwaD47XHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGEgc2NlbmUgZnJvbSB0aGUgZ2xURiBmaWxlIGludG8gdGhlIGdpdmVuIHtAbGluayBHcmFwaH0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldEdyYXBoPFQgZXh0ZW5kcyBOb2RlPihfaVNjZW5lOiBudW1iZXIgfCBzdHJpbmcsIF9ncmFwaDogVCk6IFByb21pc2U8VD47XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0R3JhcGgoX2lTY2VuZTogbnVtYmVyIHwgc3RyaW5nID0gdGhpcy4jZ2x0Zi5zY2VuZSwgX2dyYXBoPzogTm9kZSk6IFByb21pc2U8Tm9kZT4ge1xyXG4gICAgICBfaVNjZW5lID0gdGhpcy5nZXRJbmRleChfaVNjZW5lLCB0aGlzLiNnbHRmLnNjZW5lcyk7XHJcblxyXG4gICAgICBpZiAoX2lTY2VuZSA9PSAtMSlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSBgJHtHcmFwaEdMVEYubmFtZX18JHtfaVNjZW5lfWA7XHJcblxyXG4gICAgICBpZiAoIV9ncmFwaCAmJiB0aGlzLiNyZXNvdXJjZXNbaWRdKVxyXG4gICAgICAgIHJldHVybiA8Tm9kZT48dW5rbm93bj50aGlzLiNyZXNvdXJjZXNbaWRdO1xyXG5cclxuICAgICAgdGhpcy4jbm9kZXMgPSBbXTtcclxuICAgICAgdGhpcy4jY2FtZXJhcyA9IFtdO1xyXG4gICAgICB0aGlzLiNza2VsZXRvbnMgPSBbXTtcclxuXHJcbiAgICAgIGNvbnN0IGdsdGZTY2VuZTogR0xURi5TY2VuZSA9IHRoaXMuI2dsdGYuc2NlbmVzW19pU2NlbmVdO1xyXG4gICAgICBjb25zdCBncmFwaDogTm9kZSA9IF9ncmFwaCA/PyBuZXcgR3JhcGhHTFRGKCk7XHJcbiAgICAgIGdyYXBoLm5hbWUgPSBnbHRmU2NlbmUubmFtZTtcclxuICAgICAgaWYgKGdyYXBoIGluc3RhbmNlb2YgR3JhcGhHTFRGKVxyXG4gICAgICAgIGdyYXBoLnVybCA9IHRoaXMuI3VybDtcclxuICAgICAgaWYgKF9ncmFwaCkge1xyXG4gICAgICAgIF9ncmFwaC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgIF9ncmFwaC5yZW1vdmVDb21wb25lbnRzKENvbXBvbmVudFNrZWxldG9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChjb25zdCBpTm9kZSBvZiBnbHRmU2NlbmUubm9kZXMpXHJcbiAgICAgICAgZ3JhcGguYWRkQ2hpbGQoYXdhaXQgdGhpcy5nZXROb2RlQnlJbmRleChpTm9kZSkpO1xyXG5cclxuICAgICAgLy8gaWYgKHRoaXMuI2dsdGYuYW5pbWF0aW9ucz8ubGVuZ3RoID4gMCAmJiAhZ3JhcGguZ2V0Q29tcG9uZW50KENvbXBvbmVudEFuaW1hdG9yKSkge1xyXG4gICAgICAvLyAgIGxldCBhbmltYXRpb246IEFuaW1hdGlvbiA9IGF3YWl0IHRoaXMuZ2V0QW5pbWF0aW9uKDApO1xyXG4gICAgICAvLyAgIFByb2plY3QucmVnaXN0ZXIoYW5pbWF0aW9uKTtcclxuICAgICAgLy8gICBncmFwaC5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudEFuaW1hdG9yKGFuaW1hdGlvbikpO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICAvLyBUT0RPOiBsb2FkIG9ubHkgc2tlbGV0b25zIHdoaWNoIGJlbG9uZyB0byB0aGUgc2NlbmU/Pz9cclxuICAgICAgLy8gaWYgKHRoaXMuZ2x0Zi5za2lucz8ubGVuZ3RoID4gMClcclxuICAgICAgLy8gICBmb3IgKGxldCBpU2tpbjogbnVtYmVyID0gMDsgaVNraW4gPCB0aGlzLmdsdGYuc2tpbnMubGVuZ3RoOyBpU2tpbisrKVxyXG4gICAgICAvLyAgICAgc2NlbmUuYWRkQ29tcG9uZW50KGF3YWl0IHRoaXMuZ2V0U2tlbGV0b25CeUluZGV4KGlTa2luKSk7XHJcbiAgICAgIGlmICh0aGlzLiNza2VsZXRvbnMpXHJcbiAgICAgICAgZm9yIChjb25zdCBza2VsZXRvbiBvZiB0aGlzLiNza2VsZXRvbnMpXHJcbiAgICAgICAgICBncmFwaC5hZGRDb21wb25lbnQoc2tlbGV0b24pO1xyXG5cclxuICAgICAgaWYgKCFfZ3JhcGgpXHJcbiAgICAgICAgdGhpcy4jcmVzb3VyY2VzW2lkXSA9IDxHcmFwaEdMVEY+Z3JhcGg7XHJcblxyXG4gICAgICByZXR1cm4gZ3JhcGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCB7QGxpbmsgTm9kZX0gd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldE5vZGUoX25hbWU6IHN0cmluZyk6IFByb21pc2U8Tm9kZT4ge1xyXG4gICAgICBjb25zdCBpTm9kZTogbnVtYmVyID0gdGhpcy4jZ2x0Zi5ub2Rlcy5maW5kSW5kZXgoX25vZGUgPT4gX25vZGUubmFtZSA9PSBfbmFtZSk7XHJcbiAgICAgIGlmIChpTm9kZSA9PSAtMSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpc306IENvdWxkbid0IGZpbmQgbmFtZSAnJHtfbmFtZX0nIGluIGdsVEYgbm9kZXMuYCk7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE5vZGVCeUluZGV4KGlOb2RlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHtAbGluayBOb2RlfSBmb3IgdGhlIGdpdmVuIGluZGV4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Tm9kZUJ5SW5kZXgoX2lOb2RlOiBudW1iZXIpOiBQcm9taXNlPE5vZGU+IHtcclxuICAgICAgaWYgKCF0aGlzLiNub2Rlc1tfaU5vZGVdKSB7XHJcbiAgICAgICAgY29uc3QgZ2x0Zk5vZGU6IEdMVEYuTm9kZSA9IHRoaXMuI2dsdGYubm9kZXNbX2lOb2RlXTtcclxuICAgICAgICBjb25zdCBub2RlOiBOb2RlID0gbmV3IE5vZGUoZ2x0Zk5vZGUubmFtZSk7XHJcblxyXG4gICAgICAgIHRoaXMuI25vZGVzW19pTm9kZV0gPSBub2RlO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3IgY2hpbGRyZW5cclxuICAgICAgICBpZiAoZ2x0Zk5vZGUuY2hpbGRyZW4pXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGlOb2RlIG9mIGdsdGZOb2RlLmNoaWxkcmVuKVxyXG4gICAgICAgICAgICBub2RlLmFkZENoaWxkKGF3YWl0IHRoaXMuZ2V0Tm9kZUJ5SW5kZXgoaU5vZGUpKTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgICAgaWYgKGdsdGZOb2RlLm1hdHJpeCB8fCBnbHRmTm9kZS5yb3RhdGlvbiB8fCBnbHRmTm9kZS5zY2FsZSB8fCBnbHRmTm9kZS50cmFuc2xhdGlvbiB8fCBnbHRmTm9kZS5pc0FuaW1hdGVkKSB7XHJcbiAgICAgICAgICBub2RlLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50VHJhbnNmb3JtKCkpO1xyXG4gICAgICAgICAgaWYgKGdsdGZOb2RlLm1hdHJpeCkge1xyXG4gICAgICAgICAgICBub2RlLm10eExvY2FsLnNldChnbHRmTm9kZS5tYXRyaXgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGdsdGZOb2RlLnRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb246IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRpb24uc2V0KGdsdGZOb2RlLnRyYW5zbGF0aW9uWzBdLCBnbHRmTm9kZS50cmFuc2xhdGlvblsxXSwgZ2x0Zk5vZGUudHJhbnNsYXRpb25bMl0pO1xyXG4gICAgICAgICAgICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbjtcclxuICAgICAgICAgICAgICBSZWN5Y2xlci5zdG9yZSh0cmFuc2xhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdsdGZOb2RlLnJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgcm90YXRpb246IFF1YXRlcm5pb24gPSBSZWN5Y2xlci5nZXQoUXVhdGVybmlvbik7XHJcbiAgICAgICAgICAgICAgcm90YXRpb24uc2V0KGdsdGZOb2RlLnJvdGF0aW9uWzBdLCBnbHRmTm9kZS5yb3RhdGlvblsxXSwgZ2x0Zk5vZGUucm90YXRpb25bMl0sIGdsdGZOb2RlLnJvdGF0aW9uWzNdKTtcclxuICAgICAgICAgICAgICBub2RlLm10eExvY2FsLnJvdGF0aW9uID0gcm90YXRpb247XHJcbiAgICAgICAgICAgICAgUmVjeWNsZXIuc3RvcmUocm90YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnbHRmTm9kZS5zY2FsZSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNjYWxlOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICAgICAgICAgIHNjYWxlLnNldChnbHRmTm9kZS5zY2FsZVswXSwgZ2x0Zk5vZGUuc2NhbGVbMV0sIGdsdGZOb2RlLnNjYWxlWzJdKTtcclxuICAgICAgICAgICAgICBub2RlLm10eExvY2FsLnNjYWxpbmcgPSBzY2FsZTtcclxuICAgICAgICAgICAgICBSZWN5Y2xlci5zdG9yZShzY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBjYW1lcmFcclxuICAgICAgICBpZiAoZ2x0Zk5vZGUuY2FtZXJhICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoYXdhaXQgdGhpcy5nZXRDYW1lcmFCeUluZGV4KGdsdGZOb2RlLmNhbWVyYSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIG1lc2ggYW5kIG1hdGVyaWFsXHJcbiAgICAgICAgaWYgKGdsdGZOb2RlLm1lc2ggIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBjb25zdCBnbHRmTWVzaDogR0xURi5NZXNoID0gdGhpcy4jZ2x0Zi5tZXNoZXM/LltnbHRmTm9kZS5tZXNoXTtcclxuICAgICAgICAgIC8vIFRPRE86IHJldmlldyB0aGlzXHJcbiAgICAgICAgICBjb25zdCBzdWJDb21wb25lbnRzOiBbQ29tcG9uZW50TWVzaCwgQ29tcG9uZW50TWF0ZXJpYWxdW10gPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGlQcmltaXRpdmU6IG51bWJlciA9IDA7IGlQcmltaXRpdmUgPCBnbHRmTWVzaC5wcmltaXRpdmVzLmxlbmd0aDsgaVByaW1pdGl2ZSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNtcE1lc2g6IENvbXBvbmVudE1lc2ggPSBuZXcgQ29tcG9uZW50TWVzaChhd2FpdCB0aGlzLmdldE1lc2goZ2x0Zk5vZGUubWVzaCwgaVByaW1pdGl2ZSkpO1xyXG4gICAgICAgICAgICBjb25zdCBpc1NraW46IGJvb2xlYW4gPSBnbHRmTm9kZS5za2luICE9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc1NraW4pXHJcbiAgICAgICAgICAgICAgY21wTWVzaC5za2VsZXRvbiA9IGF3YWl0IHRoaXMuZ2V0U2tlbGV0b25CeUluZGV4KGdsdGZOb2RlLnNraW4pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbDtcclxuICAgICAgICAgICAgY29uc3QgaU1hdGVyaWFsOiBudW1iZXIgPSBnbHRmTWVzaC5wcmltaXRpdmVzPy5baVByaW1pdGl2ZV0/Lm1hdGVyaWFsO1xyXG4gICAgICAgICAgICBpZiAoaU1hdGVyaWFsID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIGNtcE1hdGVyaWFsID0gbmV3IENvbXBvbmVudE1hdGVyaWFsKGlzU2tpbiA/XHJcbiAgICAgICAgICAgICAgICBHTFRGTG9hZGVyLmRlZmF1bHRTa2luTWF0ZXJpYWwgOlxyXG4gICAgICAgICAgICAgICAgR0xURkxvYWRlci5kZWZhdWx0TWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGlzRmxhdDogYm9vbGVhbiA9IGdsdGZNZXNoLnByaW1pdGl2ZXNbaVByaW1pdGl2ZV0uYXR0cmlidXRlcy5OT1JNQUwgPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgIGNtcE1hdGVyaWFsID0gbmV3IENvbXBvbmVudE1hdGVyaWFsKGF3YWl0IHRoaXMuZ2V0TWF0ZXJpYWwoaU1hdGVyaWFsLCBudWxsLCBpc1NraW4sIGlzRmxhdCkpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBUT0RPOiBtYXliZSB0aGlzIHNob3VsZCBiZSBhIGZ1ZGdlIG1hdGVyaWFsIHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgY29uc3QgZ2x0Zk1hdGVyaWFsOiBHTFRGLk1hdGVyaWFsID0gdGhpcy4jZ2x0Zi5tYXRlcmlhbHNbaU1hdGVyaWFsXTtcclxuICAgICAgICAgICAgICBpZiAoZ2x0Zk1hdGVyaWFsKSBcclxuICAgICAgICAgICAgICAgIGNtcE1hdGVyaWFsLnNvcnRGb3JBbHBoYSA9IGdsdGZNYXRlcmlhbC5hbHBoYU1vZGUgPT0gXCJCTEVORFwiO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdWJDb21wb25lbnRzLnB1c2goW2NtcE1lc2gsIGNtcE1hdGVyaWFsXSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHN1YkNvbXBvbmVudHMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoc3ViQ29tcG9uZW50c1swXVswXSk7XHJcbiAgICAgICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KHN1YkNvbXBvbmVudHNbMF1bMV0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3ViQ29tcG9uZW50cy5mb3JFYWNoKChbX2NtcE1lc2gsIF9jbXBNYXRlcmlhbF0sIF9pKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgbm9kZVBhcnQ6IE5vZGUgPSBuZXcgTm9kZShgJHtub2RlLm5hbWV9X1ByaW1pdGl2ZSR7X2l9YCk7XHJcbiAgICAgICAgICAgICAgbm9kZVBhcnQuYWRkQ29tcG9uZW50KF9jbXBNZXNoKTtcclxuICAgICAgICAgICAgICBub2RlUGFydC5hZGRDb21wb25lbnQoX2NtcE1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICBub2RlLmFkZENoaWxkKG5vZGVQYXJ0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jbm9kZXNbX2lOb2RlXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IHtAbGluayBDb21wb25lbnRDYW1lcmF9IHdpdGggdGhlIGdpdmVuIGNhbWVyYSBuYW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q2FtZXJhKF9uYW1lOiBzdHJpbmcpOiBQcm9taXNlPENvbXBvbmVudENhbWVyYT4ge1xyXG4gICAgICBjb25zdCBpQ2FtZXJhOiBudW1iZXIgPSB0aGlzLiNnbHRmLmNhbWVyYXMuZmluZEluZGV4KF9jYW1lcmEgPT4gX2NhbWVyYS5uYW1lID09IF9uYW1lKTtcclxuICAgICAgaWYgKGlDYW1lcmEgPT0gLTEpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXN9OiBDb3VsZG4ndCBmaW5kIG5hbWUgJyR7X25hbWV9JyBpbiBnbFRGIGNhbWVyYXMuYCk7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldENhbWVyYUJ5SW5kZXgoaUNhbWVyYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgQ29tcG9uZW50Q2FtZXJhfSBmb3IgdGhlIGdpdmVuIGNhbWVyYSBpbmRleC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldENhbWVyYUJ5SW5kZXgoX2lDYW1lcmE6IG51bWJlcik6IFByb21pc2U8Q29tcG9uZW50Q2FtZXJhPiB7XHJcbiAgICAgIGlmICghdGhpcy4jY2FtZXJhcylcclxuICAgICAgICB0aGlzLiNjYW1lcmFzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jY2FtZXJhc1tfaUNhbWVyYV0pIHtcclxuICAgICAgICBjb25zdCBnbHRmQ2FtZXJhOiBHTFRGLkNhbWVyYSA9IHRoaXMuI2dsdGYuY2FtZXJhc1tfaUNhbWVyYV07XHJcbiAgICAgICAgY29uc3QgY2FtZXJhOiBDb21wb25lbnRDYW1lcmEgPSBuZXcgQ29tcG9uZW50Q2FtZXJhKCk7XHJcblxyXG4gICAgICAgIGlmIChnbHRmQ2FtZXJhLnBlcnNwZWN0aXZlKVxyXG4gICAgICAgICAgY2FtZXJhLnByb2plY3RDZW50cmFsKFxyXG4gICAgICAgICAgICBnbHRmQ2FtZXJhLnBlcnNwZWN0aXZlLmFzcGVjdFJhdGlvLFxyXG4gICAgICAgICAgICBnbHRmQ2FtZXJhLnBlcnNwZWN0aXZlLnlmb3YgKiBDYWxjLnJhZDJkZWcsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIGdsdGZDYW1lcmEucGVyc3BlY3RpdmUuem5lYXIsXHJcbiAgICAgICAgICAgIGdsdGZDYW1lcmEucGVyc3BlY3RpdmUuemZhclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBjYW1lcmEucHJvamVjdE9ydGhvZ3JhcGhpYyhcclxuICAgICAgICAgICAgLWdsdGZDYW1lcmEub3J0aG9ncmFwaGljLnhtYWcsXHJcbiAgICAgICAgICAgIGdsdGZDYW1lcmEub3J0aG9ncmFwaGljLnhtYWcsXHJcbiAgICAgICAgICAgIC1nbHRmQ2FtZXJhLm9ydGhvZ3JhcGhpYy55bWFnLFxyXG4gICAgICAgICAgICBnbHRmQ2FtZXJhLm9ydGhvZ3JhcGhpYy55bWFnXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gY2FtZXJhO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiNjYW1lcmFzW19pQ2FtZXJhXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IHtAbGluayBBbmltYXRpb259IHdpdGggdGhlIGdpdmVuIGFuaW1hdGlvbiBuYW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0QW5pbWF0aW9uKF9uYW1lOiBzdHJpbmcpOiBQcm9taXNlPEFuaW1hdGlvbj47XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHtAbGluayBBbmltYXRpb259IGZvciB0aGUgZ2l2ZW4gYW5pbWF0aW9uIGluZGV4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0QW5pbWF0aW9uKF9pQW5pbWF0aW9uOiBudW1iZXIpOiBQcm9taXNlPEFuaW1hdGlvbj47XHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGFuIGFuaW1hdGlvbiBmcm9tIHRoZSBnbFRGIGZpbGUgaW50byB0aGUgZ2l2ZW4ge0BsaW5rIEFuaW1hdGlvbn0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldEFuaW1hdGlvbjxUIGV4dGVuZHMgQW5pbWF0aW9uPihfaUFuaW1hdGlvbjogbnVtYmVyIHwgc3RyaW5nLCBfYW5pbWF0aW9uOiBUKTogUHJvbWlzZTxUPjtcclxuICAgIHB1YmxpYyBhc3luYyBnZXRBbmltYXRpb24oX2lBbmltYXRpb246IG51bWJlciB8IHN0cmluZywgX2FuaW1hdGlvbj86IEFuaW1hdGlvbik6IFByb21pc2U8QW5pbWF0aW9uPiB7XHJcbiAgICAgIF9pQW5pbWF0aW9uID0gdGhpcy5nZXRJbmRleChfaUFuaW1hdGlvbiwgdGhpcy4jZ2x0Zi5hbmltYXRpb25zKTtcclxuXHJcbiAgICAgIGlmIChfaUFuaW1hdGlvbiA9PSAtMSlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSBgJHtBbmltYXRpb24ubmFtZX18JHtfaUFuaW1hdGlvbn1gO1xyXG5cclxuICAgICAgaWYgKCFfYW5pbWF0aW9uICYmIHRoaXMuI3Jlc291cmNlc1tpZF0pXHJcbiAgICAgICAgcmV0dXJuIDxBbmltYXRpb24+dGhpcy4jcmVzb3VyY2VzW2lkXTtcclxuXHJcbiAgICAgIGNvbnN0IGdsdGZBbmltYXRpb246IEdMVEYuQW5pbWF0aW9uID0gdGhpcy4jZ2x0Zi5hbmltYXRpb25zPy5bX2lBbmltYXRpb25dO1xyXG5cclxuICAgICAgaWYgKCFnbHRmQW5pbWF0aW9uKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzfTogQ291bGRuJ3QgZmluZCBhbmltYXRpb24gd2l0aCBpbmRleCAke19pQW5pbWF0aW9ufS5gKTtcclxuXHJcbiAgICAgIGNvbnN0IGFuaW1hdGlvblN0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlID0ge307XHJcbiAgICAgIGZvciAoY29uc3QgZ2x0ZkNoYW5uZWwgb2YgZ2x0ZkFuaW1hdGlvbi5jaGFubmVscykge1xyXG4gICAgICAgIGNvbnN0IGdsdGZOb2RlOiBHTFRGLk5vZGUgPSB0aGlzLiNnbHRmLm5vZGVzW2dsdGZDaGFubmVsLnRhcmdldC5ub2RlXTtcclxuICAgICAgICBpZiAoIWdsdGZOb2RlKVxyXG4gICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIGxldCBub2RlOiBHZW5lcmFsID0gYW5pbWF0aW9uU3RydWN0dXJlO1xyXG4gICAgICAgIGZvciAoY29uc3QgaU5vZGUgb2YgZ2x0Zk5vZGUucGF0aCkge1xyXG4gICAgICAgICAgY29uc3QgY2hpbGROYW1lOiBzdHJpbmcgPSB0aGlzLiNnbHRmLm5vZGVzW2lOb2RlXS5uYW1lO1xyXG4gICAgICAgICAgLy8gbm9kZS5jaGlsZHJlbltjaGlsZE5hbWVdXHJcbiAgICAgICAgICBub2RlID0gKG5vZGUuY2hpbGRyZW4gPz89IHt9KVtjaGlsZE5hbWVdID8/PSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vZGUuY29tcG9uZW50cy5Db21wb25lbnRUcmFuc2Zvcm1bMF0ubXR4TG9jYWxcclxuICAgICAgICBsZXQgbXR4TG9jYWw6IEFuaW1hdGlvblNlcXVlbmNlTWF0cml4NHg0ID0gPEFuaW1hdGlvblNlcXVlbmNlTWF0cml4NHg0PigoKChub2RlLmNvbXBvbmVudHMgPz89IHt9KS5Db21wb25lbnRUcmFuc2Zvcm0gPz89IFtdKVswXSA/Pz0ge30pLm10eExvY2FsID8/PSB7fSk7XHJcbiAgICAgICAgbXR4TG9jYWxbdG9JbnRlcm5UcmFuc2Zvcm1hdGlvbltnbHRmQ2hhbm5lbC50YXJnZXQucGF0aF1dID1cclxuICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QW5pbWF0aW9uU2VxdWVuY2VWZWN0b3IoZ2x0ZkFuaW1hdGlvbi5zYW1wbGVyc1tnbHRmQ2hhbm5lbC5zYW1wbGVyXSwgZ2x0ZkNoYW5uZWwudGFyZ2V0LnBhdGgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhbmltYXRpb246IEFuaW1hdGlvbiA9IF9hbmltYXRpb24gPz8gbmV3IEFuaW1hdGlvbkdMVEYoKTtcclxuICAgICAgYW5pbWF0aW9uLmFuaW1hdGlvblN0cnVjdHVyZSA9IGFuaW1hdGlvblN0cnVjdHVyZTtcclxuICAgICAgYW5pbWF0aW9uLmNsZWFyQ2FjaGUoKTtcclxuICAgICAgYW5pbWF0aW9uLm5hbWUgPSBnbHRmQW5pbWF0aW9uLm5hbWU7XHJcbiAgICAgIGFuaW1hdGlvbi5jYWxjdWxhdGVUb3RhbFRpbWUoKTtcclxuICAgICAgaWYgKGFuaW1hdGlvbiBpbnN0YW5jZW9mIEFuaW1hdGlvbkdMVEYpXHJcbiAgICAgICAgYW5pbWF0aW9uLnVybCA9IHRoaXMuI3VybDtcclxuICAgICAgaWYgKCFfYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgUHJvamVjdC5kZXJlZ2lzdGVyKGFuaW1hdGlvbik7XHJcbiAgICAgICAgdGhpcy4jcmVzb3VyY2VzW2lkXSA9IGFuaW1hdGlvbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IHtAbGluayBNZXNoR0xURn0gd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldE1lc2goX25hbWU6IHN0cmluZywgX2lQcmltaXRpdmU/OiBudW1iZXIpOiBQcm9taXNlPE1lc2g+O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgTWVzaEdMVEZ9IGZvciB0aGUgZ2l2ZW4gbWVzaCBpbmRleCBhbmQgcHJpbWl0aXZlIGluZGV4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWVzaChfaU1lc2g6IG51bWJlciwgX2lQcmltaXRpdmU/OiBudW1iZXIpOiBQcm9taXNlPE1lc2g+O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkcyBhIG1lc2ggZnJvbSB0aGUgZ2xURiBmaWxlIGludG8gdGhlIGdpdmVuIHtAbGluayBNZXNofVxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldE1lc2g8VCBleHRlbmRzIE1lc2g+KF9pTWVzaDogbnVtYmVyIHwgc3RyaW5nLCBfaVByaW1pdGl2ZTogbnVtYmVyLCBfbWVzaDogVCk6IFByb21pc2U8VD47XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWVzaChfaU1lc2g6IG51bWJlciB8IHN0cmluZywgX2lQcmltaXRpdmU6IG51bWJlciA9IDAsIF9tZXNoPzogTWVzaCk6IFByb21pc2U8TWVzaD4ge1xyXG4gICAgICBfaU1lc2ggPSB0aGlzLmdldEluZGV4KF9pTWVzaCwgdGhpcy4jZ2x0Zi5tZXNoZXMpO1xyXG5cclxuICAgICAgaWYgKF9pTWVzaCA9PSAtMSlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSBgJHtNZXNoR0xURi5uYW1lfXwke19pTWVzaH18JHtfaVByaW1pdGl2ZX1gO1xyXG5cclxuICAgICAgaWYgKCFfbWVzaCAmJiB0aGlzLiNyZXNvdXJjZXNbaWRdKVxyXG4gICAgICAgIHJldHVybiA8TWVzaEdMVEY+dGhpcy4jcmVzb3VyY2VzW2lkXTtcclxuXHJcbiAgICAgIGNvbnN0IGdsdGZNZXNoOiBHTFRGLk1lc2ggPSB0aGlzLiNnbHRmLm1lc2hlc1tfaU1lc2hdO1xyXG4gICAgICBjb25zdCBnbHRmUHJpbWl0aXZlOiBHTFRGLk1lc2hQcmltaXRpdmUgPSBnbHRmTWVzaC5wcmltaXRpdmVzW19pUHJpbWl0aXZlXTtcclxuXHJcbiAgICAgIGlmIChnbHRmUHJpbWl0aXZlLmluZGljZXMgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIERlYnVnLndhcm4oYCR7dGhpc306IE1lc2ggd2l0aCBpbmRleCAke19pTWVzaH0gcHJpbWl0aXZlICR7X2lQcmltaXRpdmV9IGhhcyBubyBpbmRpY2VzLiBGVURHRSBkb2VzIG5vdCBzdXBwb3J0IG5vbi1pbmRleGVkIG1lc2hlcy5gKTtcclxuXHJcbiAgICAgIGlmIChnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuUE9TSVRJT04gPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIERlYnVnLndhcm4oYCR7dGhpc306IE1lc2ggd2l0aCBpbmRleCAke19pTWVzaH0gcHJpbWl0aXZlICR7X2lQcmltaXRpdmV9IGhhcyBubyBwb3NpdGlvbiBhdHRyaWJ1dGUuIFByaW1pdGl2ZSB3aWxsIGJlIGlnbm9yZWQuYCk7XHJcblxyXG4gICAgICBpZiAoZ2x0ZlByaW1pdGl2ZS5tb2RlICE9IHVuZGVmaW5lZCAmJiBnbHRmUHJpbWl0aXZlLm1vZGUgIT0gR0xURi5NRVNIX1BSSU1JVElWRV9NT0RFLlRSSUFOR0xFUylcclxuICAgICAgICBEZWJ1Zy53YXJuKGAke3RoaXN9OiBNZXNoIHdpdGggaW5kZXggJHtfaU1lc2h9IHByaW1pdGl2ZSAke19pUHJpbWl0aXZlfSBoYXMgdG9wb2xvZ3kgdHlwZSBtb2RlICR7R0xURi5NRVNIX1BSSU1JVElWRV9NT0RFW2dsdGZQcmltaXRpdmUubW9kZV19LiBGVURHRSBvbmx5IHN1cHBvcnRzICR7R0xURi5NRVNIX1BSSU1JVElWRV9NT0RFWzRdfS5gKTtcclxuXHJcbiAgICAgIGNoZWNrTWF4U3VwcG9ydCh0aGlzLCBcIlRFWENPT1JEXCIsIDIpO1xyXG4gICAgICBjaGVja01heFN1cHBvcnQodGhpcywgXCJDT0xPUlwiLCAxKTtcclxuICAgICAgY2hlY2tNYXhTdXBwb3J0KHRoaXMsIFwiSk9JTlRTXCIsIDEpO1xyXG4gICAgICBjaGVja01heFN1cHBvcnQodGhpcywgXCJXRUlHSFRTXCIsIDEpO1xyXG5cclxuICAgICAgbGV0IHZlcnRpY2VzOiBGbG9hdDMyQXJyYXksIGluZGljZXM6IFVpbnQxNkFycmF5O1xyXG4gICAgICBsZXQgbm9ybWFsczogRmxvYXQzMkFycmF5LCB0YW5nZW50czogRmxvYXQzMkFycmF5O1xyXG4gICAgICBsZXQgY29sb3JzOiBGbG9hdDMyQXJyYXksIHRleHR1cmVVVnM6IEZsb2F0MzJBcnJheTtcclxuICAgICAgbGV0IGJvbmVzOiBVaW50OEFycmF5LCB3ZWlnaHRzOiBGbG9hdDMyQXJyYXk7XHJcblxyXG4gICAgICBpZiAoZ2x0ZlByaW1pdGl2ZS5pbmRpY2VzICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGluZGljZXMgPSBhd2FpdCB0aGlzLmdldFZlcnRleEluZGljZXMoZ2x0ZlByaW1pdGl2ZS5pbmRpY2VzKTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgY29uc3QgdGVtcDogbnVtYmVyID0gaW5kaWNlc1tpICsgMl07XHJcbiAgICAgICAgICBpbmRpY2VzW2kgKyAyXSA9IGluZGljZXNbaSArIDBdO1xyXG4gICAgICAgICAgaW5kaWNlc1tpICsgMF0gPSBpbmRpY2VzW2kgKyAxXTtcclxuICAgICAgICAgIGluZGljZXNbaSArIDFdID0gdGVtcDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgRGVidWcud2FybihgJHt0aGlzfTogTWVzaCB3aXRoIGluZGV4ICR7X2lNZXNofSBwcmltaXRpdmUgJHtfaVByaW1pdGl2ZX0gaGFzIG5vIGluZGljZXMuIEZVREdFIGRvZXMgbm90IHN1cHBvcnQgbm9uLWluZGV4ZWQgbWVzaGVzLmApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZ2x0ZlByaW1pdGl2ZS5hdHRyaWJ1dGVzLlBPU0lUSU9OICE9IHVuZGVmaW5lZClcclxuICAgICAgICB2ZXJ0aWNlcyA9IGF3YWl0IHRoaXMuZ2V0RmxvYXQzMkFycmF5KGdsdGZQcmltaXRpdmUuYXR0cmlidXRlcy5QT1NJVElPTik7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBEZWJ1Zy53YXJuKGAke3RoaXN9OiBNZXNoIHdpdGggaW5kZXggJHtfaU1lc2h9IHByaW1pdGl2ZSAke19pUHJpbWl0aXZlfSBoYXMgbm8gcG9zaXRpb24gYXR0cmlidXRlLiBQcmltaXRpdmUgd2lsbCBiZSBpZ25vcmVkLmApO1xyXG5cclxuICAgICAgaWYgKGdsdGZQcmltaXRpdmUuYXR0cmlidXRlcy5OT1JNQUwgIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIG5vcm1hbHMgPSBhd2FpdCB0aGlzLmdldEZsb2F0MzJBcnJheShnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuTk9STUFMKTtcclxuXHJcbiAgICAgIGlmIChnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuVEFOR0VOVCAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgdGFuZ2VudHMgPSBhd2FpdCB0aGlzLmdldEZsb2F0MzJBcnJheShnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuVEFOR0VOVCk7XHJcblxyXG4gICAgICBpZiAoZ2x0ZlByaW1pdGl2ZS5hdHRyaWJ1dGVzLlRFWENPT1JEXzEgIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHRleHR1cmVVVnMgPSBhd2FpdCB0aGlzLmdldEZsb2F0MzJBcnJheShnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuVEVYQ09PUkRfMSk7XHJcbiAgICAgIGVsc2UgaWYgKGdsdGZQcmltaXRpdmUuYXR0cmlidXRlcy5URVhDT09SRF8wICE9IHVuZGVmaW5lZClcclxuICAgICAgICB0ZXh0dXJlVVZzID0gYXdhaXQgdGhpcy5nZXRGbG9hdDMyQXJyYXkoZ2x0ZlByaW1pdGl2ZS5hdHRyaWJ1dGVzLlRFWENPT1JEXzApO1xyXG5cclxuICAgICAgaWYgKGdsdGZQcmltaXRpdmUuYXR0cmlidXRlcy5DT0xPUl8wICE9IHVuZGVmaW5lZClcclxuICAgICAgICBjb2xvcnMgPSBhd2FpdCB0aGlzLmdldFZlcnRleENvbG9ycyhnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuQ09MT1JfMCk7XHJcblxyXG4gICAgICBpZiAoZ2x0ZlByaW1pdGl2ZS5hdHRyaWJ1dGVzLkpPSU5UU18wICE9IHVuZGVmaW5lZCAmJiBnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuV0VJR0hUU18wICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGJvbmVzID0gYXdhaXQgdGhpcy5nZXRCb25lSW5kaWNlcyhnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuSk9JTlRTXzApO1xyXG4gICAgICAgIHdlaWdodHMgPSBhd2FpdCB0aGlzLmdldEZsb2F0MzJBcnJheShnbHRmUHJpbWl0aXZlLmF0dHJpYnV0ZXMuV0VJR0hUU18wKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbWVzaDogTWVzaCA9IF9tZXNoID8/IG5ldyBNZXNoR0xURigpO1xyXG4gICAgICBtZXNoLm5hbWUgPSBnbHRmTWVzaC5uYW1lO1xyXG4gICAgICBpZiAobWVzaCBpbnN0YW5jZW9mIE1lc2hHTFRGKSB7XHJcbiAgICAgICAgbWVzaC5pUHJpbWl0aXZlID0gX2lQcmltaXRpdmU7XHJcbiAgICAgICAgbWVzaC51cmwgPSB0aGlzLiN1cmw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKF9tZXNoKSB7XHJcbiAgICAgICAgX21lc2guY2xlYXIoKTtcclxuICAgICAgICBfbWVzaC5mYWNlcyA9IFtdO1xyXG4gICAgICAgIF9tZXNoLnZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKCk7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvLyBDcmVhdGUgbWVzaCB2ZXJ0aWNlcyBhbmQgZmFjZXMgc28gdGhhdCBub3JtYWxzIGFuZCB0YW5nZW50cyBjYW4gYmUgY2FsY3VsYXRlZCBpZiBtaXNzaW5nLiBJZiB0aGV5IGFyZSBub3QgbWlzc2luZyB0aGlzIGNvdWxkIGJlIG9taXR0ZWQuXHJcbiAgICAgIGZvciAobGV0IGlWZWN0b3IyOiBudW1iZXIgPSAwLCBpVmVjdG9yMzogbnVtYmVyID0gMCwgaVZlY3RvcjQ6IG51bWJlciA9IDA7IGlWZWN0b3IzIDwgdmVydGljZXM/Lmxlbmd0aDsgaVZlY3RvcjIgKz0gMiwgaVZlY3RvcjMgKz0gMywgaVZlY3RvcjQgKz0gNCkge1xyXG4gICAgICAgIG1lc2gudmVydGljZXMucHVzaChcclxuICAgICAgICAgIG5ldyBWZXJ0ZXgoXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKHZlcnRpY2VzW2lWZWN0b3IzICsgMF0sIHZlcnRpY2VzW2lWZWN0b3IzICsgMV0sIHZlcnRpY2VzW2lWZWN0b3IzICsgMl0pLFxyXG4gICAgICAgICAgICB0ZXh0dXJlVVZzID9cclxuICAgICAgICAgICAgICBuZXcgVmVjdG9yMih0ZXh0dXJlVVZzW2lWZWN0b3IyICsgMF0sIHRleHR1cmVVVnNbaVZlY3RvcjIgKyAxXSkgOlxyXG4gICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgbm9ybWFscyA/XHJcbiAgICAgICAgICAgICAgbmV3IFZlY3RvcjMobm9ybWFsc1tpVmVjdG9yMyArIDBdLCBub3JtYWxzW2lWZWN0b3IzICsgMV0sIG5vcm1hbHNbaVZlY3RvcjMgKyAyXSkgOlxyXG4gICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdGFuZ2VudHMgP1xyXG4gICAgICAgICAgICAgIG5ldyBWZWN0b3I0KHRhbmdlbnRzW2lWZWN0b3I0ICsgMF0sIHRhbmdlbnRzW2lWZWN0b3I0ICsgMV0sIHRhbmdlbnRzW2lWZWN0b3I0ICsgMl0sIHRhbmdlbnRzW2lWZWN0b3I0ICsgM10pIDpcclxuICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGNvbG9ycyA/XHJcbiAgICAgICAgICAgICAgbmV3IENvbG9yKGNvbG9yc1tpVmVjdG9yNCArIDBdLCBjb2xvcnNbaVZlY3RvcjQgKyAxXSwgY29sb3JzW2lWZWN0b3I0ICsgMl0sIGNvbG9yc1tpVmVjdG9yNCArIDNdKSA6XHJcbiAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBib25lcyAmJiB3ZWlnaHRzID9cclxuICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICB7IGluZGV4OiBib25lc1tpVmVjdG9yNCArIDBdLCB3ZWlnaHQ6IHdlaWdodHNbaVZlY3RvcjQgKyAwXSB9LFxyXG4gICAgICAgICAgICAgICAgeyBpbmRleDogYm9uZXNbaVZlY3RvcjQgKyAxXSwgd2VpZ2h0OiB3ZWlnaHRzW2lWZWN0b3I0ICsgMV0gfSxcclxuICAgICAgICAgICAgICAgIHsgaW5kZXg6IGJvbmVzW2lWZWN0b3I0ICsgMl0sIHdlaWdodDogd2VpZ2h0c1tpVmVjdG9yNCArIDJdIH0sXHJcbiAgICAgICAgICAgICAgICB7IGluZGV4OiBib25lc1tpVmVjdG9yNCArIDNdLCB3ZWlnaHQ6IHdlaWdodHNbaVZlY3RvcjQgKyAzXSB9XHJcbiAgICAgICAgICAgICAgXSA6XHJcbiAgICAgICAgICAgICAgdW5kZWZpbmVkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgaUZhY2VWZXJ0ZXhJbmRleDogbnVtYmVyID0gMDsgaUZhY2VWZXJ0ZXhJbmRleCA8IGluZGljZXM/Lmxlbmd0aDsgaUZhY2VWZXJ0ZXhJbmRleCArPSAzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIG1lc2guZmFjZXMucHVzaChuZXcgRmFjZShcclxuICAgICAgICAgICAgbWVzaC52ZXJ0aWNlcyxcclxuICAgICAgICAgICAgaW5kaWNlc1tpRmFjZVZlcnRleEluZGV4ICsgMF0sXHJcbiAgICAgICAgICAgIGluZGljZXNbaUZhY2VWZXJ0ZXhJbmRleCArIDFdLFxyXG4gICAgICAgICAgICBpbmRpY2VzW2lGYWNlVmVydGV4SW5kZXggKyAyXVxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHtcclxuICAgICAgICAgIERlYnVnLmZ1ZGdlKFwiRmFjZSBleGNsdWRlZFwiLCAoPEVycm9yPl9lKS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBtZXNoLnJlbmRlck1lc2gudmVydGljZXMgPSB2ZXJ0aWNlcztcclxuICAgICAgbWVzaC5yZW5kZXJNZXNoLmluZGljZXMgPSBpbmRpY2VzO1xyXG4gICAgICBtZXNoLnJlbmRlck1lc2gubm9ybWFscyA9IG5vcm1hbHM7XHJcbiAgICAgIG1lc2gucmVuZGVyTWVzaC50YW5nZW50cyA9IHRhbmdlbnRzO1xyXG4gICAgICBtZXNoLnJlbmRlck1lc2gudGV4dHVyZVVWcyA9IHRleHR1cmVVVnM7XHJcbiAgICAgIG1lc2gucmVuZGVyTWVzaC5jb2xvcnMgPSBjb2xvcnM7XHJcbiAgICAgIG1lc2gucmVuZGVyTWVzaC5ib25lcyA9IGJvbmVzO1xyXG4gICAgICBtZXNoLnJlbmRlck1lc2gud2VpZ2h0cyA9IHdlaWdodHM7XHJcblxyXG4gICAgICBpZiAoIV9tZXNoKSB7XHJcbiAgICAgICAgUHJvamVjdC5kZXJlZ2lzdGVyKG1lc2gpO1xyXG4gICAgICAgIC8vIG1lc2guaWRSZXNvdXJjZSA9IGlkO1xyXG4gICAgICAgIHRoaXMuI3Jlc291cmNlc1tpZF0gPSBtZXNoO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbWVzaDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNoZWNrTWF4U3VwcG9ydChfbG9hZGVyOiBHTFRGTG9hZGVyLCBfY2hlY2s6IHN0cmluZywgX21heDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGdsdGZQcmltaXRpdmUuYXR0cmlidXRlcykuZmlsdGVyKChfa2V5OiBzdHJpbmcpID0+IF9rZXkuc3RhcnRzV2l0aChfY2hlY2spKS5sZW5ndGggPiBfbWF4KVxyXG4gICAgICAgICAgRGVidWcud2FybihgJHtfbG9hZGVyfTogTWVzaCB3aXRoIGluZGV4ICR7X2lNZXNofSBwcmltaXRpdmUgJHtfaVByaW1pdGl2ZX0gaGFzIG1vcmUgdGhhbiAke19tYXh9IHNldHMgb2YgJyR7X2NoZWNrfScgYXNzb2NpYXRlZCB3aXRoIGl0LiBGVUdERSBvbmx5IHN1cHBvcnRzIHVwIHRvICR7X21heH0gJHtfY2hlY2t9IHNldHMgcGVyIHByaW1pdGl2ZS5gKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3Qge0BsaW5rIE1hdGVyaWFsR0xURn0gd2l0aCB0aGUgZ2l2ZW4gbWF0ZXJpYWwgbmFtZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldE1hdGVyaWFsKF9uYW1lOiBzdHJpbmcpOiBQcm9taXNlPE1hdGVyaWFsPjtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIE1hdGVyaWFsfSBmb3IgdGhlIGdpdmVuIG1hdGVyaWFsIGluZGV4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWF0ZXJpYWwoX2lNYXRlcmlhbDogbnVtYmVyKTogUHJvbWlzZTxNYXRlcmlhbD47XHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGEgbWF0ZXJpYWwgZnJvbSB0aGUgZ2xURiBmaWxlIGludG8gdGhlIGdpdmVuIHtAbGluayBNYXRlcmlhbH0uXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldE1hdGVyaWFsPFQgZXh0ZW5kcyBNYXRlcmlhbD4oX2lNYXRlcmlhbDogbnVtYmVyIHwgc3RyaW5nLCBfbWF0ZXJpYWw/OiBULCBfc2tpbj86IGJvb2xlYW4sIF9mbGF0PzogYm9vbGVhbik6IFByb21pc2U8VD47XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWF0ZXJpYWwoX2lNYXRlcmlhbDogbnVtYmVyIHwgc3RyaW5nLCBfbWF0ZXJpYWw/OiBNYXRlcmlhbCwgX3NraW46IGJvb2xlYW4gPSBmYWxzZSwgX2ZsYXQ6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8TWF0ZXJpYWw+IHtcclxuICAgICAgX2lNYXRlcmlhbCA9IHRoaXMuZ2V0SW5kZXgoX2lNYXRlcmlhbCwgdGhpcy4jZ2x0Zi5tYXRlcmlhbHMpO1xyXG5cclxuICAgICAgaWYgKF9pTWF0ZXJpYWwgPT0gLTEpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICBjb25zdCBpZDogc3RyaW5nID0gYCR7TWF0ZXJpYWwubmFtZX18JHtfaU1hdGVyaWFsfWA7XHJcblxyXG4gICAgICBpZiAodGhpcy4jcmVzb3VyY2VzW2lkXSAmJiAhX21hdGVyaWFsKVxyXG4gICAgICAgIHJldHVybiA8TWF0ZXJpYWw+dGhpcy4jcmVzb3VyY2VzW2lkXTtcclxuXHJcbiAgICAgIC8vIFRPRE86IGluIHRoZSBmdXR1cmUgY3JlYXRlIGFuIGFwcHJvcHJpYXRlIHNoYWRlciBiYXNlZCBvbiB0aGUgZ2xURiBtYXRlcmlhbCBwcm9wZXJ0aWVzXHJcbiAgICAgIGNvbnN0IGdsdGZNYXRlcmlhbDogR0xURi5NYXRlcmlhbCA9IHRoaXMuI2dsdGYubWF0ZXJpYWxzW19pTWF0ZXJpYWxdO1xyXG5cclxuICAgICAgaWYgKCFnbHRmTWF0ZXJpYWwpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXN9OiBDb3VsZG4ndCBmaW5kIG1hdGVyaWFsIHdpdGggaW5kZXggJHtfaU1hdGVyaWFsfS5gKTtcclxuXHJcbiAgICAgIC8vIFRPRE86IGFkZCBzdXBwb3J0IGZvciBvdGhlciBnbFRGIG1hdGVyaWFsIHByb3BlcnRpZXM6IGh0dHBzOi8vcmVnaXN0cnkua2hyb25vcy5vcmcvZ2xURi9zcGVjcy8yLjAvZ2xURi0yLjAuaHRtbCNyZWZlcmVuY2UtbWF0ZXJpYWxcclxuICAgICAgLy8gZS5nLiBvY2NsdXNpb24gYW5kIGVtaXNzaXZlIHRleHR1cmVzOyBkb3VibGVTaWRlZFxyXG4gICAgICBjb25zdCBnbHRmQmFzZUNvbG9yRmFjdG9yOiBudW1iZXJbXSA9IGdsdGZNYXRlcmlhbC5wYnJNZXRhbGxpY1JvdWdobmVzcz8uYmFzZUNvbG9yRmFjdG9yID8/IFsxLCAxLCAxLCAxXTtcclxuICAgICAgY29uc3QgZ2x0Zk1ldGFsbGljRmFjdG9yOiBudW1iZXIgPSBnbHRmTWF0ZXJpYWwucGJyTWV0YWxsaWNSb3VnaG5lc3M/Lm1ldGFsbGljRmFjdG9yID8/IDE7XHJcbiAgICAgIGNvbnN0IGdsdGZSb3VnaG5lc3NGYWN0b3I6IG51bWJlciA9IGdsdGZNYXRlcmlhbC5wYnJNZXRhbGxpY1JvdWdobmVzcz8ucm91Z2huZXNzRmFjdG9yID8/IDE7XHJcbiAgICAgIGNvbnN0IGdsdGZFbWlzc2l2ZUZhY3RvcjogbnVtYmVyW10gPSBnbHRmTWF0ZXJpYWwuZW1pc3NpdmVGYWN0b3IgPz8gWzAsIDAsIDBdO1xyXG5cclxuICAgICAgY29uc3QgZ2x0ZkJhc2VDb2xvclRleHR1cmU6IEdMVEYuVGV4dHVyZUluZm8gPSBnbHRmTWF0ZXJpYWwucGJyTWV0YWxsaWNSb3VnaG5lc3M/LmJhc2VDb2xvclRleHR1cmU7XHJcbiAgICAgIGNvbnN0IGdsdGZOb3JtYWxUZXh0dXJlOiBHTFRGLk1hdGVyaWFsTm9ybWFsVGV4dHVyZUluZm8gPSBnbHRmTWF0ZXJpYWwubm9ybWFsVGV4dHVyZTtcclxuXHJcbiAgICAgIC8vIFRoZSBkaWZmdXNlIGNvbnRyaWJ1dGlvbiBpbiB0aGUgUGhvbmcgc2hhZGluZyBtb2RlbC4gUmVwcmVzZW50cyBob3cgbXVjaCBsaWdodCBpcyBzY2F0dGVyZWQgaW4gZGlmZmVyZW50IGRpcmVjdGlvbnMgZHVlIHRvIHRoZSBtYXRlcmlhbCdzIHN1cmZhY2UgcHJvcGVydGllcy5cclxuICAgICAgY29uc3QgZGlmZnVzZTogbnVtYmVyID0gMTtcclxuICAgICAgLy8gVGhlIHNoaW5pbmVzcyBvZiB0aGUgbWF0ZXJpYWwuIEluZmx1ZW5jZXMgdGhlIHNoYXJwbmVzcyBvciBicm9hZG5lc3Mgb2YgdGhlIHNwZWN1bGFyIGhpZ2hsaWdodC4gSGlnaGVyIHNwZWN1bGFyIHZhbHVlcyByZXN1bHQgaW4gYSBzaGFycGVyIGFuZCBtb3JlIGNvbmNlbnRyYXRlZCBzcGVjdWxhciBoaWdobGlnaHQuXHJcbiAgICAgIGNvbnN0IHNwZWN1bGFyOiBudW1iZXIgPSAxLjggKiAoMSAtIGdsdGZSb3VnaG5lc3NGYWN0b3IpICsgMC42ICogZ2x0Zk1ldGFsbGljRmFjdG9yO1xyXG4gICAgICAvLyBUaGUgc3RyZW5ndGgvaW50ZW5zaXR5IG9mIHRoZSBzcGVjdWxhciByZWZsZWN0aW9uXHJcbiAgICAgIGNvbnN0IGludGVuc2l0eTogbnVtYmVyID0gMC43ICogKDEgLSBnbHRmUm91Z2huZXNzRmFjdG9yKSArIGdsdGZNZXRhbGxpY0ZhY3RvcjtcclxuICAgICAgLy8gSW5mbHVlbmNlcyBob3cgbXVjaCB0aGUgbWF0ZXJpYWwncyBjb2xvciBhZmZlY3RzIHRoZSBzcGVjdWxhciByZWZsZWN0aW9uLiBXaGVuIG1ldGFsbGljIGlzIGhpZ2hlciwgdGhlIHNwZWN1bGFyIHJlZmxlY3Rpb24gdGFrZXMgb24gdGhlIGNvbG9yIG9mIHRoZSBtYXRlcmlhbCwgY3JlYXRpbmcgYSBtZXRhbGxpYyBhcHBlYXJhbmNlLiBSYW5nZSBmcm9tIDAuMCB0byAxLjAuXHJcbiAgICAgIGNvbnN0IG1ldGFsbGljOiBudW1iZXIgPSBnbHRmTWV0YWxsaWNGYWN0b3I7XHJcblxyXG4gICAgICBjb25zdCBpc0xpdDogYm9vbGVhbiA9IGdsdGZFbWlzc2l2ZUZhY3RvclswXSA9PSAxICYmIGdsdGZFbWlzc2l2ZUZhY3RvclsxXSA9PSAxIHx8IGdsdGZFbWlzc2l2ZUZhY3RvclsyXSA9PSAxO1xyXG4gICAgICBjb25zdCBjb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IoLi4uZ2x0ZkJhc2VDb2xvckZhY3Rvcik7XHJcbiAgICAgIGNvbnN0IGNvYXQ6IENvYXQgPSBnbHRmQmFzZUNvbG9yVGV4dHVyZSA/XHJcbiAgICAgICAgaXNMaXQgPyBuZXcgQ29hdFRleHR1cmVkKGNvbG9yLCBhd2FpdCB0aGlzLmdldFRleHR1cmUoZ2x0ZkJhc2VDb2xvclRleHR1cmUuaW5kZXgpKSA6XHJcbiAgICAgICAgICBnbHRmTm9ybWFsVGV4dHVyZSA/XHJcbiAgICAgICAgICAgIG5ldyBDb2F0UmVtaXNzaXZlVGV4dHVyZWROb3JtYWxzKGNvbG9yLCBhd2FpdCB0aGlzLmdldFRleHR1cmUoZ2x0ZkJhc2VDb2xvclRleHR1cmUuaW5kZXgpLCBhd2FpdCB0aGlzLmdldFRleHR1cmUoZ2x0Zk5vcm1hbFRleHR1cmUuaW5kZXgpLCBkaWZmdXNlLCBzcGVjdWxhciwgaW50ZW5zaXR5LCBtZXRhbGxpYykgOlxyXG4gICAgICAgICAgICBuZXcgQ29hdFJlbWlzc2l2ZVRleHR1cmVkKGNvbG9yLCBhd2FpdCB0aGlzLmdldFRleHR1cmUoZ2x0ZkJhc2VDb2xvclRleHR1cmUuaW5kZXgpLCBkaWZmdXNlLCBzcGVjdWxhciwgaW50ZW5zaXR5LCBtZXRhbGxpYykgOlxyXG4gICAgICAgIGlzTGl0ID8gbmV3IENvYXRDb2xvcmVkKGNvbG9yKSA6IG5ldyBDb2F0UmVtaXNzaXZlKGNvbG9yLCBkaWZmdXNlLCBzcGVjdWxhciwgaW50ZW5zaXR5LCBtZXRhbGxpYyk7XHJcblxyXG4gICAgICBsZXQgc2hhZGVyOiB0eXBlb2YgU2hhZGVyO1xyXG4gICAgICBpZiAoX2ZsYXQpIHsgLy8gVE9ETzogbWFrZSBmbGF0IGEgZmxhZyBpbiB0aGUgbWF0ZXJpYWwgc28gdGhhdCB3ZSBjYW4gaGF2ZSBmbGF0IG1lc2ggd2l0aCBwaG9uZyBzaGFkaW5nIGdyYWRpZW50c1xyXG4gICAgICAgIHNoYWRlciA9IGdsdGZCYXNlQ29sb3JUZXh0dXJlID9cclxuICAgICAgICAgIChfc2tpbiA/IFNoYWRlckZsYXRUZXh0dXJlZFNraW4gOiBTaGFkZXJGbGF0VGV4dHVyZWQpIDpcclxuICAgICAgICAgIChfc2tpbiA/IFNoYWRlckZsYXRTa2luIDogU2hhZGVyRmxhdCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNMaXQpIHtcclxuICAgICAgICBzaGFkZXIgPSBnbHRmQmFzZUNvbG9yVGV4dHVyZSA/XHJcbiAgICAgICAgICAoX3NraW4gPyBTaGFkZXJMaXRUZXh0dXJlZFNraW4gOiBTaGFkZXJMaXRUZXh0dXJlZCkgOlxyXG4gICAgICAgICAgKF9za2luID8gU2hhZGVyTGl0U2tpbiA6IFNoYWRlckxpdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2hhZGVyID0gZ2x0ZkJhc2VDb2xvclRleHR1cmUgP1xyXG4gICAgICAgICAgZ2x0Zk5vcm1hbFRleHR1cmUgP1xyXG4gICAgICAgICAgICAoX3NraW4gPyBTaGFkZXJQaG9uZ1RleHR1cmVkTm9ybWFsc1NraW4gOiBTaGFkZXJQaG9uZ1RleHR1cmVkTm9ybWFscykgOlxyXG4gICAgICAgICAgICAoX3NraW4gPyBTaGFkZXJQaG9uZ1RleHR1cmVkU2tpbiA6IFNoYWRlclBob25nVGV4dHVyZWQpIDpcclxuICAgICAgICAgIChfc2tpbiA/IFNoYWRlclBob25nU2tpbiA6IFNoYWRlclBob25nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbWF0ZXJpYWw6IE1hdGVyaWFsID0gX21hdGVyaWFsID8/IG5ldyBNYXRlcmlhbEdMVEYoZ2x0Zk1hdGVyaWFsLm5hbWUpO1xyXG4gICAgICBtYXRlcmlhbC5uYW1lID0gZ2x0Zk1hdGVyaWFsLm5hbWU7XHJcbiAgICAgIG1hdGVyaWFsLmNvYXQgPSBjb2F0O1xyXG4gICAgICBpZiAoZ2x0Zk1hdGVyaWFsLmFscGhhQ3V0b2ZmICE9IHVuZGVmaW5lZClcclxuICAgICAgICBtYXRlcmlhbC5hbHBoYUNsaXAgPSBnbHRmTWF0ZXJpYWwuYWxwaGFDdXRvZmY7XHJcbiAgICAgIFJlZmxlY3Quc2V0KG1hdGVyaWFsLCBcInNoYWRlclR5cGVcIiwgc2hhZGVyKTtcclxuICAgICAgLy8gbWF0ZXJpYWwuc2V0U2hhZGVyKHNoYWRlcik7XHJcbiAgICAgIGlmIChtYXRlcmlhbCBpbnN0YW5jZW9mIE1hdGVyaWFsR0xURilcclxuICAgICAgICBtYXRlcmlhbC51cmwgPSB0aGlzLiN1cmw7XHJcblxyXG4gICAgICBpZiAoIV9tYXRlcmlhbCkge1xyXG4gICAgICAgIFByb2plY3QuZGVyZWdpc3RlcihtYXRlcmlhbCk7XHJcbiAgICAgICAgdGhpcy4jcmVzb3VyY2VzW2lkXSA9IG1hdGVyaWFsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgVGV4dHVyZX0gZm9yIHRoZSBnaXZlbiB0ZXh0dXJlIGluZGV4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGV4dHVyZShfaVRleHR1cmU6IG51bWJlcik6IFByb21pc2U8VGV4dHVyZT4ge1xyXG4gICAgICBjb25zdCBpZDogc3RyaW5nID0gYCR7VGV4dHVyZS5uYW1lfXwke19pVGV4dHVyZX1gO1xyXG5cclxuICAgICAgaWYgKHRoaXMuI3Jlc291cmNlc1tpZF0pXHJcbiAgICAgICAgcmV0dXJuIDxUZXh0dXJlPnRoaXMuI3Jlc291cmNlc1tpZF07XHJcblxyXG4gICAgICBjb25zdCBnbHRmVGV4dHVyZTogR0xURi5UZXh0dXJlID0gdGhpcy4jZ2x0Zi50ZXh0dXJlc1tfaVRleHR1cmVdO1xyXG4gICAgICBjb25zdCBnbHRmU2FtcGxlcjogR0xURi5TYW1wbGVyID0gdGhpcy4jZ2x0Zi5zYW1wbGVycz8uW2dsdGZUZXh0dXJlLnNhbXBsZXJdO1xyXG4gICAgICBjb25zdCBnbHRmSW1hZ2U6IEdMVEYuSW1hZ2UgPSB0aGlzLiNnbHRmLmltYWdlcz8uW2dsdGZUZXh0dXJlLnNvdXJjZV07XHJcblxyXG4gICAgICBpZiAoZ2x0ZkltYWdlID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIERlYnVnLndhcm4oYCR7dGhpc306IFRleHR1cmUgd2l0aCBpbmRleCAke19pVGV4dHVyZX0gaGFzIG5vIGltYWdlLmApO1xyXG4gICAgICAgIHJldHVybiBUZXh0dXJlRGVmYXVsdC5jb2xvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHVybDogc3RyaW5nID0gbmV3IFVSTChnbHRmSW1hZ2UudXJpLCBuZXcgVVJMKHRoaXMuI3VybCwgUHJvamVjdC5iYXNlVVJMKSkudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgIGlmICghZ2x0ZkltYWdlLnVyaSAmJiBnbHRmSW1hZ2UuYnVmZmVyVmlldykge1xyXG4gICAgICAgIC8vIFRPRE86IHRoaXMgaXMgZHVwbGljYXRlIGNvZGUgZnJvbSBnZXRCdWZmZXJEYXRhLCBtYXliZSByZWZhY3RvciBnZXRCdWZmZXJEYXRhIHRvIGhhbmRsZSBidWZmZXJWaWV3SW5kZXggaW5wdXRcclxuICAgICAgICBjb25zdCBnbHRmQnVmZmVyVmlldzogR0xURi5CdWZmZXJWaWV3ID0gdGhpcy4jZ2x0Zi5idWZmZXJWaWV3c1tnbHRmSW1hZ2UuYnVmZmVyVmlld107XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1ZmZlcjogQXJyYXlCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlcihnbHRmQnVmZmVyVmlldy5idWZmZXIpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVPZmZzZXQ6IG51bWJlciA9IGdsdGZCdWZmZXJWaWV3LmJ5dGVPZmZzZXQgfHwgMDtcclxuICAgICAgICBjb25zdCBieXRlTGVuZ3RoOiBudW1iZXIgPSBnbHRmQnVmZmVyVmlldy5ieXRlTGVuZ3RoIHx8IDA7XHJcblxyXG4gICAgICAgIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoXHJcbiAgICAgICAgICBbbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoIC8gVWludDhBcnJheS5CWVRFU19QRVJfRUxFTUVOVCldLFxyXG4gICAgICAgICAgeyB0eXBlOiBnbHRmSW1hZ2UubWltZVR5cGUgfVxyXG4gICAgICAgICkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0ZXh0dXJlOiBUZXh0dXJlSW1hZ2UgPSBuZXcgVGV4dHVyZUltYWdlKCk7XHJcbiAgICAgIGF3YWl0IHRleHR1cmUubG9hZCh1cmwpO1xyXG5cclxuICAgICAgaWYgKGdsdGZTYW1wbGVyKSB7XHJcbiAgICAgICAgZ2x0ZlNhbXBsZXIubWFnRmlsdGVyID0gZ2x0ZlNhbXBsZXIubWFnRmlsdGVyID8/IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVDsgLy8gZGVmYXVsdCB2YWx1ZVxyXG4gICAgICAgIGdsdGZTYW1wbGVyLm1pbkZpbHRlciA9IGdsdGZTYW1wbGVyLm1pbkZpbHRlciA/PyBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1Q7IC8vIGRlZmF1bHQgdmFsdWVcclxuXHJcbiAgICAgICAgaWYgKGdsdGZTYW1wbGVyLm1hZ0ZpbHRlciA9PSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QgJiYgZ2x0ZlNhbXBsZXIubWluRmlsdGVyID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVClcclxuICAgICAgICAgIHRleHR1cmUubWlwbWFwID0gTUlQTUFQLkNSSVNQO1xyXG4gICAgICAgIGVsc2UgaWYgKGdsdGZTYW1wbGVyLm1hZ0ZpbHRlciA9PSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QgJiYgZ2x0ZlNhbXBsZXIubWluRmlsdGVyID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVF9NSVBNQVBfTElORUFSKVxyXG4gICAgICAgICAgdGV4dHVyZS5taXBtYXAgPSBNSVBNQVAuTUVESVVNO1xyXG4gICAgICAgIGVsc2UgaWYgKGdsdGZTYW1wbGVyLm1hZ0ZpbHRlciA9PSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkxJTkVBUiAmJiBnbHRmU2FtcGxlci5taW5GaWx0ZXIgPT0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5MSU5FQVJfTUlQTUFQX0xJTkVBUilcclxuICAgICAgICAgIHRleHR1cmUubWlwbWFwID0gTUlQTUFQLkJMVVJSWTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBEZWJ1Zy53YXJuKGAke3RoaXN9OiBUZXh0dXJlIHdpdGggaW5kZXggJHtfaVRleHR1cmV9IGhhcyBhIG1hZ0ZpbHRlciBhbmQgbWluRmlsdGVyIG9mICcke2dldFdlYkdMUGFyYW1ldGVyTmFtZShnbHRmU2FtcGxlci5tYWdGaWx0ZXIpfScgYW5kICcke2dldFdlYkdMUGFyYW1ldGVyTmFtZShnbHRmU2FtcGxlci5taW5GaWx0ZXIpfScgcmVzcGVjdGl2ZWx5LiBGVURHRSBvbmx5IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgY29tYmluYXRpb25zOiBORUFSRVNUIGFuZCBORUFSRVNUIHwgTkVBUkVTVCBhbmQgTkVBUkVTVF9NSVBNQVBfTElORUFSIHwgTElORUFSIGFuZCBMSU5FQVJfTUlQTUFQX0xJTkVBUi5gKTtcclxuXHJcbiAgICAgICAgZ2x0ZlNhbXBsZXIud3JhcFMgPSBnbHRmU2FtcGxlci53cmFwUyA/PyBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJFUEVBVDsgLy8gZGVmYXVsdCB2YWx1ZVxyXG4gICAgICAgIGdsdGZTYW1wbGVyLndyYXBUID0gZ2x0ZlNhbXBsZXIud3JhcFQgPz8gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SRVBFQVQ7IC8vIGRlZmF1bHQgdmFsdWVcclxuXHJcbiAgICAgICAgaWYgKGdsdGZTYW1wbGVyLndyYXBTID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkVQRUFUICYmIGdsdGZTYW1wbGVyLndyYXBUID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkVQRUFUKVxyXG4gICAgICAgICAgdGV4dHVyZS53cmFwID0gV1JBUC5SRVBFQVQ7XHJcbiAgICAgICAgZWxzZSBpZiAoZ2x0ZlNhbXBsZXIud3JhcFMgPT0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DTEFNUF9UT19FREdFICYmIGdsdGZTYW1wbGVyLndyYXBUID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ0xBTVBfVE9fRURHRSlcclxuICAgICAgICAgIHRleHR1cmUud3JhcCA9IFdSQVAuQ0xBTVA7XHJcbiAgICAgICAgZWxzZSBpZiAoZ2x0ZlNhbXBsZXIud3JhcFMgPT0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5NSVJST1JFRF9SRVBFQVQgJiYgZ2x0ZlNhbXBsZXIud3JhcFQgPT0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5NSVJST1JFRF9SRVBFQVQpXHJcbiAgICAgICAgICB0ZXh0dXJlLndyYXAgPSBXUkFQLk1JUlJPUjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBEZWJ1Zy53YXJuKGAke3RoaXN9OiBUZXh0dXJlIHdpdGggaW5kZXggJHtfaVRleHR1cmV9IGhhcyBhIHdyYXBTIGFuZCB3cmFwVCBvZiAnJHtnZXRXZWJHTFBhcmFtZXRlck5hbWUoZ2x0ZlNhbXBsZXIud3JhcFMpfScgYW5kICcke2dldFdlYkdMUGFyYW1ldGVyTmFtZShnbHRmU2FtcGxlci53cmFwVCl9JyByZXNwZWN0aXZlbHkuIEZVREdFIG9ubHkgc3VwcG9ydHMgdGhlIGZvbGxvd2luZyBjb21iaW5hdGlvbnM6IFJFUEVBVCBhbmQgUkVQRUFUIHwgQ0xBTVBfVE9fRURHRSBhbmQgQ0xBTVBfVE9fRURHRSB8IE1JUlJPUkVEX1JFUEVBVCBhbmQgTUlSUk9SRURfUkVQRUFULmApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBQcm9qZWN0LmRlcmVnaXN0ZXIodGV4dHVyZSk7XHJcbiAgICAgIHRoaXMuI3Jlc291cmNlc1tpZF0gPSB0ZXh0dXJlO1xyXG5cclxuICAgICAgcmV0dXJuIHRleHR1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFJldHVybnMgdGhlIGZpcnN0IHtAbGluayBDb21wb25lbnRTa2VsZXRvbn0gd2l0aCB0aGUgZ2l2ZW4gc2tlbGV0b24gbmFtZS5cclxuICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U2tlbGV0b24oX25hbWU6IHN0cmluZyk6IFByb21pc2U8Q29tcG9uZW50U2tlbGV0b24+IHtcclxuICAgICAgY29uc3QgaVNrZWxldG9uOiBudW1iZXIgPSB0aGlzLiNnbHRmLnNraW5zLmZpbmRJbmRleChfc2tlbGV0b24gPT4gX3NrZWxldG9uLm5hbWUgPT0gX25hbWUpO1xyXG4gICAgICBpZiAoaVNrZWxldG9uID09IC0xKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzfTogQ291bGRuJ3QgZmluZCBuYW1lICcke19uYW1lfScgaW4gZ2xURiBza2lucy5gKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U2tlbGV0b25CeUluZGV4KGlTa2VsZXRvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgQ29tcG9uZW50U2tlbGV0b259IGZvciB0aGUgZ2l2ZW4gc2tlbGV0b24gaW5kZXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBnZXRTa2VsZXRvbkJ5SW5kZXgoX2lTa2VsZXRvbjogbnVtYmVyKTogUHJvbWlzZTxDb21wb25lbnRTa2VsZXRvbj4ge1xyXG4gICAgICBpZiAoIXRoaXMuI3NrZWxldG9ucylcclxuICAgICAgICB0aGlzLiNza2VsZXRvbnMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNza2VsZXRvbnNbX2lTa2VsZXRvbl0pIHtcclxuICAgICAgICBjb25zdCBnbHRmU2tpbjogR0xURi5Ta2luID0gdGhpcy4jZ2x0Zi5za2luc1tfaVNrZWxldG9uXTtcclxuICAgICAgICBjb25zdCBib25lczogTm9kZVtdID0gW107XHJcblxyXG4gICAgICAgIC8vIGNvbnZlcnQgZmxvYXQgYXJyYXkgdG8gYXJyYXkgb2YgbWF0cmljZXMgYW5kIHJlZ2lzdGVyIGJvbmVzXHJcbiAgICAgICAgbGV0IG10eERhdGE6IEZsb2F0MzJBcnJheTtcclxuICAgICAgICBpZiAoZ2x0ZlNraW4uaW52ZXJzZUJpbmRNYXRyaWNlcyAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBtdHhEYXRhID0gYXdhaXQgdGhpcy5nZXRGbG9hdDMyQXJyYXkoZ2x0ZlNraW4uaW52ZXJzZUJpbmRNYXRyaWNlcyk7XHJcbiAgICAgICAgY29uc3QgbXR4RGF0YVNwYW46IG51bWJlciA9IDE2OyAvLyBzaXplIG9mIG1hdHJpeFxyXG5cclxuICAgICAgICBjb25zdCBtdHhCaW5kSW52ZXJzZXM6IE1hdHJpeDR4NFtdID0gW107XHJcbiAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGpvaW50cyBhbmQgZ2V0IGNvcnJlc3BvbmRpbmcgbWF0cml4IGZyb20gZmxvYXQgYXJyYXlcclxuICAgICAgICBmb3IgKGxldCBpQm9uZTogbnVtYmVyID0gMDsgaUJvbmUgPCBnbHRmU2tpbi5qb2ludHMubGVuZ3RoOyBpQm9uZSsrKSB7XHJcbiAgICAgICAgICBsZXQgbXR4QmluZEludmVyc2U6IE1hdHJpeDR4NDtcclxuICAgICAgICAgIGlmIChtdHhEYXRhKSB7XHJcbiAgICAgICAgICAgIG10eEJpbmRJbnZlcnNlID0gbmV3IE1hdHJpeDR4NCgpO1xyXG4gICAgICAgICAgICBtdHhCaW5kSW52ZXJzZS5zZXQobXR4RGF0YS5zdWJhcnJheShpQm9uZSAqIG10eERhdGFTcGFuLCBpQm9uZSAqIG10eERhdGFTcGFuICsgbXR4RGF0YVNwYW4pKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBib25lcy5wdXNoKGF3YWl0IHRoaXMuZ2V0Tm9kZUJ5SW5kZXgoZ2x0ZlNraW4uam9pbnRzW2lCb25lXSkpO1xyXG4gICAgICAgICAgbXR4QmluZEludmVyc2VzLnB1c2gobXR4QmluZEludmVyc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jc2tlbGV0b25zW19pU2tlbGV0b25dID0gbmV3IENvbXBvbmVudFNrZWxldG9uKGJvbmVzLCBtdHhCaW5kSW52ZXJzZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jc2tlbGV0b25zW19pU2tlbGV0b25dO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYCR7R0xURkxvYWRlci5uYW1lfSB8ICR7dGhpcy4jdXJsfWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRJbmRleChfbmFtZU9ySW5kZXg6IHN0cmluZyB8IG51bWJlciwgX2FycmF5OiB7IG5hbWU/OiBzdHJpbmcgfVtdKTogbnVtYmVyIHtcclxuICAgICAgbGV0IGluZGV4OiBudW1iZXIgPVxyXG4gICAgICAgIHR5cGVvZiBfbmFtZU9ySW5kZXggPT0gXCJudW1iZXJcIiA/XHJcbiAgICAgICAgICBfbmFtZU9ySW5kZXggOlxyXG4gICAgICAgICAgX2FycmF5LmZpbmRJbmRleChfb2JqZWN0ID0+IF9vYmplY3QubmFtZSA9PSBfbmFtZU9ySW5kZXgpO1xyXG4gICAgICBpZiAoaW5kZXggPT0gLTEpIHtcclxuICAgICAgICBsZXQgYXJyYXlOYW1lOiBzdHJpbmcgPSBPYmplY3QuZW50cmllcyh0aGlzLiNnbHRmKS5maW5kKChbX2tleSwgX3ZhbHVlXSkgPT4gX3ZhbHVlID09IF9hcnJheSk/LlswXTtcclxuICAgICAgICBEZWJ1Zy5lcnJvcihgJHt0aGlzfTogQ291bGRuJ3QgZmluZCBuYW1lICcke19uYW1lT3JJbmRleH0nIGluIGdsVEYgJHthcnJheU5hbWV9LmApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgVWludDhBcnJheX0gZm9yIHRoZSBnaXZlbiBhY2Nlc3NvciBpbmRleC5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldEJvbmVJbmRpY2VzKF9pQWNjZXNzb3I6IG51bWJlcik6IFByb21pc2U8VWludDhBcnJheT4ge1xyXG4gICAgICBjb25zdCBhcnJheTogVHlwZWRBcnJheSA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyRGF0YShfaUFjY2Vzc29yKTtcclxuICAgICAgY29uc3QgY29tcG9uZW50VHlwZTogR0xURi5DT01QT05FTlRfVFlQRSA9IHRoaXMuI2dsdGYuYWNjZXNzb3JzW19pQWNjZXNzb3JdPy5jb21wb25lbnRUeXBlO1xyXG5cclxuICAgICAgaWYgKGNvbXBvbmVudFR5cGUgPT0gR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9CWVRFKVxyXG4gICAgICAgIHJldHVybiBhcnJheSBhcyBVaW50OEFycmF5O1xyXG5cclxuICAgICAgaWYgKGNvbXBvbmVudFR5cGUgPT0gR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9TSE9SVCkge1xyXG4gICAgICAgIERlYnVnLmxvZyhgJHt0aGlzfTogQm9uZSBpbmRpY2VzIGFyZSBzdG9yZWQgYXMgJyR7R0xURi5DT01QT05FTlRfVFlQRVtHTFRGLkNPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX1NIT1JUXX0nLiBGVURHRSB3aWxsIGNvbnZlcnQgdGhlbSB0byAnJHtHTFRGLkNPTVBPTkVOVF9UWVBFW0dMVEYuQ09NUE9ORU5UX1RZUEUuVU5TSUdORURfQllURV19Jy4gRlVER0Ugb25seSBzdXBwb3J0cyBza2VsZXRvbnMgd2l0aCB1cCB0byAyNTYgYm9uZXMsIHNvIG1ha2Ugc3VyZSB5b3VyIHNrZWxldG9uIGhhcyBubyBtb3JlIHRoYW4gMjU2IGJvbmVzLmApO1xyXG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20oYXJyYXkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpc306IEludmFsaWQgY29tcG9uZW50IHR5cGUgJyR7R0xURi5DT01QT05FTlRfVFlQRVtjb21wb25lbnRUeXBlXX0nIGZvciBib25lIGluZGljZXMuIEV4cGVjdGVkICcke0dMVEYuQ09NUE9ORU5UX1RZUEVbR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9CWVRFXX0nIG9yICcke0dMVEYuQ09NUE9ORU5UX1RZUEVbR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9TSE9SVF19Jy5gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgRmxvYXQzMkFycmF5fSBmb3IgdGhlIGdpdmVuIGFjY2Vzc29yIGluZGV4LlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0RmxvYXQzMkFycmF5KF9pQWNjZXNzb3I6IG51bWJlcik6IFByb21pc2U8RmxvYXQzMkFycmF5PiB7XHJcbiAgICAgIGNvbnN0IGFycmF5OiBUeXBlZEFycmF5ID0gYXdhaXQgdGhpcy5nZXRCdWZmZXJEYXRhKF9pQWNjZXNzb3IpO1xyXG4gICAgICBjb25zdCBnbHRmQWNjZXNzb3I6IEdMVEYuQWNjZXNzb3IgPSB0aGlzLiNnbHRmLmFjY2Vzc29yc1tfaUFjY2Vzc29yXTtcclxuXHJcbiAgICAgIGlmIChnbHRmQWNjZXNzb3IuY29tcG9uZW50VHlwZSA9PSBHTFRGLkNPTVBPTkVOVF9UWVBFLkZMT0FUKVxyXG4gICAgICAgIHJldHVybiBhcnJheSBhcyBGbG9hdDMyQXJyYXk7XHJcblxyXG4gICAgICBpZiAoZ2x0ZkFjY2Vzc29yLm5vcm1hbGl6ZWQpIHtcclxuICAgICAgICBzd2l0Y2ggKGdsdGZBY2Nlc3Nvci5jb21wb25lbnRUeXBlKSB7XHJcbiAgICAgICAgICBjYXNlIEdMVEYuQ09NUE9ORU5UX1RZUEUuQllURTpcclxuICAgICAgICAgICAgcmV0dXJuIEZsb2F0MzJBcnJheS5mcm9tKGFycmF5LCBfdmFsdWUgPT4gTWF0aC5tYXgoX3ZhbHVlIC8gMTI3LCAtMSkpO1xyXG4gICAgICAgICAgY2FzZSBHTFRGLkNPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX0JZVEU6XHJcbiAgICAgICAgICAgIHJldHVybiBGbG9hdDMyQXJyYXkuZnJvbShhcnJheSwgX3ZhbHVlID0+IF92YWx1ZSAvIDI1NSk7XHJcbiAgICAgICAgICBjYXNlIEdMVEYuQ09NUE9ORU5UX1RZUEUuU0hPUlQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGbG9hdDMyQXJyYXkuZnJvbShhcnJheSwgX3ZhbHVlID0+IE1hdGgubWF4KF92YWx1ZSAvIDMyNzY3LCAtMSkpO1xyXG4gICAgICAgICAgY2FzZSBHTFRGLkNPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX1NIT1JUOlxyXG4gICAgICAgICAgICByZXR1cm4gRmxvYXQzMkFycmF5LmZyb20oYXJyYXksIF92YWx1ZSA9PiBfdmFsdWUgLyA2NTUzNSk7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpc306IEludmFsaWQgY29tcG9uZW50IHR5cGUgJyR7R0xURi5DT01QT05FTlRfVFlQRVtnbHRmQWNjZXNzb3IuY29tcG9uZW50VHlwZV19JyBmb3Igbm9ybWFsaXplZCBhY2Nlc3Nvci5gKTtcclxuICAgICAgICAgIC8vIGh0dHBzOi8vcmVnaXN0cnkua2hyb25vcy5vcmcvZ2xURi9zcGVjcy8yLjAvZ2xURi0yLjAuaHRtbCNfYWNjZXNzb3Jfbm9ybWFsaXplZFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgRGVidWcud2FybihgJHt0aGlzfTogRXhwZWN0ZWQgY29tcG9uZW50IHR5cGUgJyR7R0xURi5DT01QT05FTlRfVFlQRVtHTFRGLkNPTVBPTkVOVF9UWVBFLkZMT0FUXX0nIGJ1dCB3YXMgJyR7R0xURi5DT01QT05FTlRfVFlQRVtnbHRmQWNjZXNzb3I/LmNvbXBvbmVudFR5cGVdfScuYCk7XHJcbiAgICAgIHJldHVybiBGbG9hdDMyQXJyYXkuZnJvbShhcnJheSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFVpbnQxNkFycmF5fSBmb3IgdGhlIGdpdmVuIGFjY2Vzc29yIGluZGV4LiBPbmx5IHVzZWQgdG8gZ2V0IHRoZSB2ZXJ0ZXggaW5kaWNlcy5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldFZlcnRleEluZGljZXMoX2lBY2Nlc3NvcjogbnVtYmVyKTogUHJvbWlzZTxVaW50MTZBcnJheT4ge1xyXG4gICAgICBjb25zdCBhcnJheTogVHlwZWRBcnJheSA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyRGF0YShfaUFjY2Vzc29yKTtcclxuICAgICAgY29uc3QgZ2x0ZkFjY2Vzc29yOiBHTFRGLkFjY2Vzc29yID0gdGhpcy4jZ2x0Zi5hY2Nlc3NvcnNbX2lBY2Nlc3Nvcl07XHJcblxyXG4gICAgICBpZiAoZ2x0ZkFjY2Vzc29yLmNvbXBvbmVudFR5cGUgPT0gR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9TSE9SVClcclxuICAgICAgICByZXR1cm4gYXJyYXkgYXMgVWludDE2QXJyYXk7XHJcblxyXG4gICAgICBpZiAoZ2x0ZkFjY2Vzc29yLmNvdW50ID4gNjU1MzUgJiYgZ2x0ZkFjY2Vzc29yLnR5cGUgPT0gXCJTQ0FMQVJcIilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpc306IEZpbGUgaW5jbHVkZXMgYSBtZXNoIHdpdGggbW9yZSB0aGFuIDY1NTM1IHZlcnRpY2VzLiBGVURHRSBkb2VzIG5vdCBzdXBwb3J0IG1lc2hlcyB3aXRoIG1vcmUgdGhhbiA2NTUzNSB2ZXJ0aWNlcy5gKTtcclxuXHJcbiAgICAgIGlmIChnbHRmQWNjZXNzb3IuY29tcG9uZW50VHlwZSA9PSBHTFRGLkNPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX0JZVEUgfHwgZ2x0ZkFjY2Vzc29yLmNvbXBvbmVudFR5cGUgPT0gR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9JTlQpXHJcbiAgICAgICAgcmV0dXJuIFVpbnQxNkFycmF5LmZyb20oYXJyYXkpO1xyXG5cclxuICAgICAgRGVidWcud2FybihgJHt0aGlzfTogRXhwZWN0ZWQgYW4gdW5zaWduZWQgaW50ZWdlciBjb21wb25lbnQgdHlwZSBidXQgd2FzICcke0dMVEYuQ09NUE9ORU5UX1RZUEVbdGhpcy4jZ2x0Zi5hY2Nlc3NvcnNbX2lBY2Nlc3Nvcl0/LmNvbXBvbmVudFR5cGVdfScuYCk7XHJcbiAgICAgIHJldHVybiBVaW50MTZBcnJheS5mcm9tKGFycmF5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHtAbGluayBGbG9hdDMyQXJyYXl9IGZvciB0aGUgZ2l2ZW4gYWNjZXNzb3IgaW5kZXguIFRoZSBhcnJheSBjb250YWlucyB0aGUgdmVydGV4IGNvbG9ycyBpbiBSR0JBIGZvcm1hdC5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldFZlcnRleENvbG9ycyhfaUFjY2Vzc29yOiBudW1iZXIpOiBQcm9taXNlPEZsb2F0MzJBcnJheT4ge1xyXG4gICAgICBjb25zdCBhcnJheTogRmxvYXQzMkFycmF5ID0gYXdhaXQgdGhpcy5nZXRGbG9hdDMyQXJyYXkoX2lBY2Nlc3Nvcik7XHJcbiAgICAgIGNvbnN0IGdsdGZBY2Nlc3NvcjogR0xURi5BY2Nlc3NvciA9IHRoaXMuI2dsdGYuYWNjZXNzb3JzW19pQWNjZXNzb3JdO1xyXG5cclxuICAgICAgaWYgKGdsdGZBY2Nlc3Nvci50eXBlID09IEdMVEYuQUNDRVNTT1JfVFlQRS5WRUMzKSB7XHJcbiAgICAgICAgY29uc3QgcmdiYUFycmF5OiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGFycmF5Lmxlbmd0aCAqIDQgLyAzKTtcclxuICAgICAgICBmb3IgKGxldCBpVmVjMzogbnVtYmVyID0gMCwgaVZlYzQ6IG51bWJlciA9IDA7IGlWZWMzIDwgYXJyYXkubGVuZ3RoOyBpVmVjMyArPSAzLCBpVmVjNCArPSA0KSB7XHJcbiAgICAgICAgICByZ2JhQXJyYXlbaVZlYzRdID0gYXJyYXlbaVZlYzNdO1xyXG4gICAgICAgICAgcmdiYUFycmF5W2lWZWM0ICsgMV0gPSBhcnJheVtpVmVjMyArIDFdO1xyXG4gICAgICAgICAgcmdiYUFycmF5W2lWZWM0ICsgMl0gPSBhcnJheVtpVmVjMyArIDJdO1xyXG4gICAgICAgICAgcmdiYUFycmF5W2lWZWM0ICsgM10gPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmdiYUFycmF5O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRCdWZmZXJEYXRhKF9pQWNjZXNzb3I6IG51bWJlcik6IFByb21pc2U8VHlwZWRBcnJheT4ge1xyXG4gICAgICBjb25zdCBnbHRmQWNjZXNzb3I6IEdMVEYuQWNjZXNzb3IgPSB0aGlzLiNnbHRmLmFjY2Vzc29yc1tfaUFjY2Vzc29yXTtcclxuICAgICAgaWYgKCFnbHRmQWNjZXNzb3IpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXN9OiBDb3VsZG4ndCBmaW5kIGFjY2Vzc29yIHdpdGggaW5kZXggJHtfaUFjY2Vzc29yfS5gKTtcclxuXHJcbiAgICAgIGxldCBhcnJheTogVHlwZWRBcnJheTtcclxuICAgICAgY29uc3QgY29tcG9uZW50VHlwZTogR0xURi5DT01QT05FTlRfVFlQRSA9IGdsdGZBY2Nlc3Nvci5jb21wb25lbnRUeXBlO1xyXG4gICAgICBjb25zdCBhY2Nlc3NvclR5cGU6IEdMVEYuQUNDRVNTT1JfVFlQRSA9IGdsdGZBY2Nlc3Nvci50eXBlO1xyXG5cclxuICAgICAgaWYgKGdsdGZBY2Nlc3Nvci5idWZmZXJWaWV3ICE9IHVuZGVmaW5lZClcclxuICAgICAgICBhcnJheSA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyVmlld0RhdGEodGhpcy4jZ2x0Zi5idWZmZXJWaWV3c1tnbHRmQWNjZXNzb3IuYnVmZmVyVmlld10sIGdsdGZBY2Nlc3Nvci5ieXRlT2Zmc2V0LCBjb21wb25lbnRUeXBlLCBhY2Nlc3NvclR5cGUpO1xyXG5cclxuICAgICAgaWYgKGdsdGZBY2Nlc3Nvci5zcGFyc2UpIHtcclxuICAgICAgICBjb25zdCBnbHRmQnVmZmVyVmlld0luZGljZXM6IEdMVEYuQnVmZmVyVmlldyA9IHRoaXMuI2dsdGYuYnVmZmVyVmlld3NbZ2x0ZkFjY2Vzc29yLnNwYXJzZS5pbmRpY2VzLmJ1ZmZlclZpZXddO1xyXG4gICAgICAgIGNvbnN0IGdsdGZCdWZmZXJWaWV3VmFsdWVzOiBHTFRGLkJ1ZmZlclZpZXcgPSB0aGlzLiNnbHRmLmJ1ZmZlclZpZXdzW2dsdGZBY2Nlc3Nvci5zcGFyc2UudmFsdWVzLmJ1ZmZlclZpZXddO1xyXG5cclxuICAgICAgICBpZiAoIWdsdGZCdWZmZXJWaWV3SW5kaWNlcyB8fCAhZ2x0ZkJ1ZmZlclZpZXdWYWx1ZXMpXHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpc306IENvdWxkbid0IGZpbmQgYnVmZmVyIHZpZXdzIGZvciBzcGFyc2UgaW5kaWNlcyBvciB2YWx1ZXMgb2YgYWNjZXNzb3Igd2l0aCBpbmRleCAke19pQWNjZXNzb3J9LmApO1xyXG5cclxuICAgICAgICBjb25zdCBhcnJheUluZGljZXM6IFR5cGVkQXJyYXkgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlclZpZXdEYXRhKGdsdGZCdWZmZXJWaWV3SW5kaWNlcywgZ2x0ZkFjY2Vzc29yLnNwYXJzZS5pbmRpY2VzLmJ5dGVPZmZzZXQsIGdsdGZBY2Nlc3Nvci5zcGFyc2UuaW5kaWNlcy5jb21wb25lbnRUeXBlLCBHTFRGLkFDQ0VTU09SX1RZUEUuU0NBTEFSKTtcclxuICAgICAgICBjb25zdCBhcnJheVZhbHVlczogVHlwZWRBcnJheSA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyVmlld0RhdGEoZ2x0ZkJ1ZmZlclZpZXdWYWx1ZXMsIGdsdGZBY2Nlc3Nvci5zcGFyc2UudmFsdWVzLmJ5dGVPZmZzZXQsIGNvbXBvbmVudFR5cGUsIGFjY2Vzc29yVHlwZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjY2Vzc29yVHlwZUxlbmd0aDogbnVtYmVyID0gdG9BY2Nlc3NvclR5cGVMZW5ndGhbZ2x0ZkFjY2Vzc29yLnR5cGVdO1xyXG4gICAgICAgIGlmIChnbHRmQWNjZXNzb3IuYnVmZmVyVmlldyA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBhcnJheSA9IG5ldyB0b0FycmF5Q29uc3RydWN0b3JbZ2x0ZkFjY2Vzc29yLmNvbXBvbmVudFR5cGVdKGdsdGZBY2Nlc3Nvci5jb3VudCAqIGFjY2Vzc29yVHlwZUxlbmd0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBnbHRmQWNjZXNzb3Iuc3BhcnNlLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgIGFycmF5LnNldChhcnJheVZhbHVlcy5zbGljZShpICogYWNjZXNzb3JUeXBlTGVuZ3RoLCAoaSArIDEpICogYWNjZXNzb3JUeXBlTGVuZ3RoKSwgYXJyYXlJbmRpY2VzW2ldICogYWNjZXNzb3JUeXBlTGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldEJ1ZmZlclZpZXdEYXRhKF9idWZmZXJWaWV3OiBHTFRGLkJ1ZmZlclZpZXcsIF9ieXRlT2Zmc2V0OiBudW1iZXIsIF9jb21wb25lbnRUeXBlOiBHTFRGLkNPTVBPTkVOVF9UWVBFLCBfYWNjZXNzb3JUeXBlOiBHTFRGLkFDQ0VTU09SX1RZUEUpOiBQcm9taXNlPFR5cGVkQXJyYXk+IHtcclxuICAgICAgY29uc3QgYnVmZmVyOiBBcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyKF9idWZmZXJWaWV3LmJ1ZmZlcik7XHJcbiAgICAgIGNvbnN0IGJ5dGVPZmZzZXQ6IG51bWJlciA9IChfYnVmZmVyVmlldy5ieXRlT2Zmc2V0ID8/IDApICsgKF9ieXRlT2Zmc2V0ID8/IDApO1xyXG4gICAgICBjb25zdCBieXRlTGVuZ3RoOiBudW1iZXIgPSBfYnVmZmVyVmlldy5ieXRlTGVuZ3RoID8/IDA7XHJcbiAgICAgIGNvbnN0IGJ5dGVTdHJpZGU6IG51bWJlciA9IF9idWZmZXJWaWV3LmJ5dGVTdHJpZGU7XHJcblxyXG4gICAgICBjb25zdCBhcnJheUNvbnN0cnVjdG9yOiBUeXBlZEFycmF5Q29uc3RydWN0b3IgPSB0b0FycmF5Q29uc3RydWN0b3JbX2NvbXBvbmVudFR5cGVdO1xyXG4gICAgICBjb25zdCBhcnJheTogVHlwZWRBcnJheSA9IG5ldyBhcnJheUNvbnN0cnVjdG9yKGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCAvIGFycmF5Q29uc3RydWN0b3IuQllURVNfUEVSX0VMRU1FTlQpO1xyXG5cclxuICAgICAgaWYgKGJ5dGVTdHJpZGUgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gVE9ETzogaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgYnVmZmVycyBtYXliZSByYXRoZXIgcGFzcyBzdHJpZGUgaW50byB0aGUgcmVuZGVyIG1lc2g/IGFuZCBzZXQgaXQgd2hlbiBkYXRhIGlzIHBhc3NlZCB0byB0aGUgZ3B1P1xyXG4gICAgICAgIGNvbnN0IG5Db21wb25lbnRzUGVyRWxlbWVudDogbnVtYmVyID0gdG9BY2Nlc3NvclR5cGVMZW5ndGhbX2FjY2Vzc29yVHlwZV07IC8vIGFtb3VudCBvZiBjb21wb25lbnRzIHBlciBlbGVtZW50IG9mIHRoZSBhY2Nlc3NvciB0eXBlLCBlLmcuIDMgZm9yIFZFQzNcclxuICAgICAgICBjb25zdCBuRWxlbWVudHM6IG51bWJlciA9IGJ5dGVMZW5ndGggLyBieXRlU3RyaWRlOyAvLyBhbW91bnQgb2YgZWxlbWVudHMsIGUuZy4gbipWRUMzIFxyXG4gICAgICAgIGNvbnN0IHN0cmlkZTogbnVtYmVyID0gYnl0ZVN0cmlkZSAvIGFycmF5Q29uc3RydWN0b3IuQllURVNfUEVSX0VMRU1FTlQ7XHJcbiAgICAgICAgY29uc3QgbmV3QXJyYXk6IFR5cGVkQXJyYXkgPSBuZXcgYXJyYXlDb25zdHJ1Y3RvcihuRWxlbWVudHMgKiBuQ29tcG9uZW50c1BlckVsZW1lbnQpO1xyXG4gICAgICAgIGZvciAobGV0IGlOZXdFbGVtZW50OiBudW1iZXIgPSAwOyBpTmV3RWxlbWVudCA8IG5FbGVtZW50czsgaU5ld0VsZW1lbnQrKykge1xyXG4gICAgICAgICAgY29uc3QgaUVsZW1lbnQ6IG51bWJlciA9IGlOZXdFbGVtZW50ICogc3RyaWRlO1xyXG4gICAgICAgICAgLy8gVE9ETzogY2hlY2sgaWYgbG9vcCBpcyBmYXN0ZXIgdGhhbiBzZXQgKyBzbGljZVxyXG4gICAgICAgICAgZm9yIChsZXQgaUNvbXBvbmVudDogbnVtYmVyID0gMDsgaUNvbXBvbmVudCA8IG5Db21wb25lbnRzUGVyRWxlbWVudDsgaUNvbXBvbmVudCsrKVxyXG4gICAgICAgICAgICBuZXdBcnJheVtpTmV3RWxlbWVudCAqIG5Db21wb25lbnRzUGVyRWxlbWVudCArIGlDb21wb25lbnRdID0gYXJyYXlbaUVsZW1lbnQgKyBpQ29tcG9uZW50XTtcclxuICAgICAgICAgIC8vIG5ld0FycmF5LnNldChhcnJheS5zbGljZShpRWxlbWVudCwgaUVsZW1lbnQgKyBuQ29tcG9uZW50c1BlckVsZW1lbnQpLCBpTmV3RWxlbWVudCAqIG5Db21wb25lbnRzUGVyRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3QXJyYXk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldEJ1ZmZlcihfaUJ1ZmZlcjogbnVtYmVyKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xyXG4gICAgICBjb25zdCBnbHRmQnVmZmVyOiBHTFRGLkJ1ZmZlciA9IHRoaXMuI2dsdGYuYnVmZmVyc1tfaUJ1ZmZlcl07XHJcbiAgICAgIGlmICghZ2x0ZkJ1ZmZlcilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpc306IENvdWxkbid0IGZpbmQgYnVmZmVyIHdpdGggaW5kZXggJHtfaUJ1ZmZlcn0uYCk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuI2J1ZmZlcnMpXHJcbiAgICAgICAgdGhpcy4jYnVmZmVycyA9IFtdO1xyXG4gICAgICBpZiAoIXRoaXMuI2J1ZmZlcnNbX2lCdWZmZXJdKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlID0gYXdhaXQgZmV0Y2gobmV3IFVSTChnbHRmQnVmZmVyLnVyaSwgbmV3IFVSTCh0aGlzLiN1cmwsIFByb2plY3QuYmFzZVVSTCkpKTtcclxuICAgICAgICB0aGlzLiNidWZmZXJzW19pQnVmZmVyXSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLiNidWZmZXJzW19pQnVmZmVyXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yKF9zYW1wbGVyOiBHTFRGLkFuaW1hdGlvblNhbXBsZXIsIF90cmFuc2Zvcm1hdGlvblR5cGU6IEdMVEYuQW5pbWF0aW9uQ2hhbm5lbFRhcmdldFtcInBhdGhcIl0pOiBQcm9taXNlPEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yMyB8IEFuaW1hdGlvblNlcXVlbmNlVmVjdG9yND4ge1xyXG4gICAgICBjb25zdCBpbnB1dDogRmxvYXQzMkFycmF5ID0gYXdhaXQgdGhpcy5nZXRGbG9hdDMyQXJyYXkoX3NhbXBsZXIuaW5wdXQpO1xyXG4gICAgICBjb25zdCBvdXRwdXQ6IEZsb2F0MzJBcnJheSA9IGF3YWl0IHRoaXMuZ2V0RmxvYXQzMkFycmF5KF9zYW1wbGVyLm91dHB1dCk7XHJcblxyXG4gICAgICBjb25zdCBtaWxsaXNQZXJTZWNvbmQ6IG51bWJlciA9IDEwMDA7XHJcbiAgICAgIGNvbnN0IGlzUm90YXRpb246IGJvb2xlYW4gPSBfdHJhbnNmb3JtYXRpb25UeXBlID09IFwicm90YXRpb25cIjtcclxuICAgICAgY29uc3QgdmVjdG9yTGVuZ3RoOiBudW1iZXIgPSBpc1JvdGF0aW9uID8gNCA6IDM7IC8vIHJvdGF0aW9uIGlzIHN0b3JlZCBhcyBxdWF0ZXJuaW9uXHJcbiAgICAgIGNvbnN0IGludGVycG9sYXRpb246IEFOSU1BVElPTl9JTlRFUlBPTEFUSU9OID0gdGhpcy50b0ludGVybkludGVycG9sYXRpb24oX3NhbXBsZXIuaW50ZXJwb2xhdGlvbik7XHJcbiAgICAgIGNvbnN0IGlzQ3ViaWM6IHRydWUgfCB1bmRlZmluZWQgPSBpbnRlcnBvbGF0aW9uID09IEFOSU1BVElPTl9JTlRFUlBPTEFUSU9OLkNVQklDID8gdHJ1ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgY29uc3QgdmVjdG9yc1BlcklucHV0OiBudW1iZXIgPSBpc0N1YmljID8gMyA6IDE7IC8vIGN1YmljIGludGVycG9sYXRpb24gdXNlcyAzIHZhbHVlcyBwZXIgaW5wdXQ6IGluLXRhbmdlbnQsIHByb3BlcnR5IHZhbHVlIGFuZCBvdXQtdGFuZ2VudC4gaHR0cHM6Ly9yZWdpc3RyeS5raHJvbm9zLm9yZy9nbFRGL3NwZWNzLzIuMC9nbFRGLTIuMC5odG1sI2ludGVycG9sYXRpb24tY3ViaWNcclxuXHJcbiAgICAgIC8vIHVzZWQgb25seSBmb3Igcm90YXRpb24gaW50ZXJwb2xhdGlvblxyXG4gICAgICBsZXQgbGFzdFJvdGF0aW9uOiBRdWF0ZXJuaW9uO1xyXG4gICAgICBsZXQgbmV4dFJvdGF0aW9uOiBRdWF0ZXJuaW9uO1xyXG5cclxuICAgICAgY29uc3Qgc2VxdWVuY2VzOiB7IHg6IEFuaW1hdGlvbktleVtdOyB5OiBBbmltYXRpb25LZXlbXTsgejogQW5pbWF0aW9uS2V5W107IHc/OiBBbmltYXRpb25LZXlbXSB9ID0geyB4OiBbXSwgeTogW10sIHo6IFtdIH07XHJcbiAgICAgIGlmIChpc1JvdGF0aW9uKSB7XHJcbiAgICAgICAgc2VxdWVuY2VzLncgPSBbXTtcclxuICAgICAgICBsYXN0Um90YXRpb24gPSBSZWN5Y2xlci5nZXQoUXVhdGVybmlvbik7XHJcbiAgICAgICAgbmV4dFJvdGF0aW9uID0gUmVjeWNsZXIuZ2V0KFF1YXRlcm5pb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGxldCBpSW5wdXQ6IG51bWJlciA9IDA7IGlJbnB1dCA8IGlucHV0Lmxlbmd0aDsgaUlucHV0KyspIHtcclxuICAgICAgICBjb25zdCBpT3V0cHV0OiBudW1iZXIgPSBpSW5wdXQgKiB2ZWN0b3JzUGVySW5wdXQgKiB2ZWN0b3JMZW5ndGggKyAoaXNDdWJpYyA/IHZlY3Rvckxlbmd0aCA6IDApO1xyXG4gICAgICAgIGNvbnN0IGlPdXRwdXRTbG9wZUluOiBudW1iZXIgPSBpT3V0cHV0IC0gdmVjdG9yTGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGlPdXRwdXRTbG9wZU91dDogbnVtYmVyID0gaU91dHB1dCArIHZlY3Rvckxlbmd0aDtcclxuICAgICAgICBjb25zdCB0aW1lOiBudW1iZXIgPSBtaWxsaXNQZXJTZWNvbmQgKiBpbnB1dFtpSW5wdXRdO1xyXG5cclxuICAgICAgICBpZiAoaXNSb3RhdGlvbikge1xyXG4gICAgICAgICAgLy8gVGFrZSB0aGUgc2hvcnRlc3QgcGF0aCBiZXR3ZWVuIHR3byByb3RhdGlvbnMsIGkuZS4gaWYgdGhlIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlIHRoZW4gdGhlIG5leHQgcXVhdGVybmlvbiBuZWVkcyB0byBiZSBuZWdhdGVkLlxyXG4gICAgICAgICAgLy8gcSBhbmQgLXEgcmVwcmVzZW50IHRoZSBzYW1lIHJvdGF0aW9uIGJ1dCBpbnRlcnBvbGF0aW9uIHdpbGwgdGFrZSBlaXRoZXIgdGhlIGxvbmcgd2F5IG9yIHRoZSBzaG9ydCB3YXkgYXJvdW5kIHRoZSBzcGhlcmUgZGVwZW5kaW5nIG9uIHdoaWNoIHdlIHVzZS5cclxuICAgICAgICAgIG5leHRSb3RhdGlvbi5zZXQob3V0cHV0W2lPdXRwdXQgKyAwXSwgb3V0cHV0W2lPdXRwdXQgKyAxXSwgb3V0cHV0W2lPdXRwdXQgKyAyXSwgb3V0cHV0W2lPdXRwdXQgKyAzXSk7XHJcbiAgICAgICAgICBpZiAoUXVhdGVybmlvbi5ET1QobGFzdFJvdGF0aW9uLCBuZXh0Um90YXRpb24pIDwgMClcclxuICAgICAgICAgICAgbmV4dFJvdGF0aW9uLm5lZ2F0ZSgpO1xyXG4gICAgICAgICAgb3V0cHV0W2lPdXRwdXQgKyAwXSA9IG5leHRSb3RhdGlvbi54O1xyXG4gICAgICAgICAgb3V0cHV0W2lPdXRwdXQgKyAxXSA9IG5leHRSb3RhdGlvbi55O1xyXG4gICAgICAgICAgb3V0cHV0W2lPdXRwdXQgKyAyXSA9IG5leHRSb3RhdGlvbi56O1xyXG4gICAgICAgICAgb3V0cHV0W2lPdXRwdXQgKyAzXSA9IG5leHRSb3RhdGlvbi53O1xyXG4gICAgICAgICAgbGFzdFJvdGF0aW9uLnNldChuZXh0Um90YXRpb24ueCwgbmV4dFJvdGF0aW9uLnksIG5leHRSb3RhdGlvbi56LCBuZXh0Um90YXRpb24udyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXF1ZW5jZXMueC5wdXNoKG5ldyBBbmltYXRpb25LZXkodGltZSwgb3V0cHV0W2lPdXRwdXQgKyAwXSwgaW50ZXJwb2xhdGlvbiwgaXNDdWJpYyAmJiBvdXRwdXRbaU91dHB1dFNsb3BlSW4gKyAwXSAvIG1pbGxpc1BlclNlY29uZCwgaXNDdWJpYyAmJiBvdXRwdXRbaU91dHB1dFNsb3BlT3V0ICsgMF0gLyBtaWxsaXNQZXJTZWNvbmQpKTtcclxuICAgICAgICBzZXF1ZW5jZXMueS5wdXNoKG5ldyBBbmltYXRpb25LZXkodGltZSwgb3V0cHV0W2lPdXRwdXQgKyAxXSwgaW50ZXJwb2xhdGlvbiwgaXNDdWJpYyAmJiBvdXRwdXRbaU91dHB1dFNsb3BlSW4gKyAxXSAvIG1pbGxpc1BlclNlY29uZCwgaXNDdWJpYyAmJiBvdXRwdXRbaU91dHB1dFNsb3BlT3V0ICsgMV0gLyBtaWxsaXNQZXJTZWNvbmQpKTtcclxuICAgICAgICBzZXF1ZW5jZXMuei5wdXNoKG5ldyBBbmltYXRpb25LZXkodGltZSwgb3V0cHV0W2lPdXRwdXQgKyAyXSwgaW50ZXJwb2xhdGlvbiwgaXNDdWJpYyAmJiBvdXRwdXRbaU91dHB1dFNsb3BlSW4gKyAyXSAvIG1pbGxpc1BlclNlY29uZCwgaXNDdWJpYyAmJiBvdXRwdXRbaU91dHB1dFNsb3BlT3V0ICsgMl0gLyBtaWxsaXNQZXJTZWNvbmQpKTtcclxuICAgICAgICBpZiAoaXNSb3RhdGlvbilcclxuICAgICAgICAgIHNlcXVlbmNlcy53LnB1c2gobmV3IEFuaW1hdGlvbktleSh0aW1lLCBvdXRwdXRbaU91dHB1dCArIDNdLCBpbnRlcnBvbGF0aW9uLCBpc0N1YmljICYmIG91dHB1dFtpT3V0cHV0U2xvcGVJbiArIDNdIC8gbWlsbGlzUGVyU2Vjb25kLCBpc0N1YmljICYmIG91dHB1dFtpT3V0cHV0U2xvcGVPdXQgKyAzXSAvIG1pbGxpc1BlclNlY29uZCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNSb3RhdGlvbikge1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKGxhc3RSb3RhdGlvbik7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUobmV4dFJvdGF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzZXF1ZW5jZXMpLm1hcCgoW19rZXksIF92YWx1ZV0pID0+IFtfa2V5LCBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoX3ZhbHVlKV0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvSW50ZXJuSW50ZXJwb2xhdGlvbihfaW50ZXJwb2xhdGlvbjogR0xURi5BbmltYXRpb25TYW1wbGVyW1wiaW50ZXJwb2xhdGlvblwiXSk6IEFOSU1BVElPTl9JTlRFUlBPTEFUSU9OIHtcclxuICAgICAgc3dpdGNoIChfaW50ZXJwb2xhdGlvbikge1xyXG4gICAgICAgIGNhc2UgXCJMSU5FQVJcIjpcclxuICAgICAgICAgIHJldHVybiBBTklNQVRJT05fSU5URVJQT0xBVElPTi5MSU5FQVI7XHJcbiAgICAgICAgY2FzZSBcIlNURVBcIjpcclxuICAgICAgICAgIHJldHVybiBBTklNQVRJT05fSU5URVJQT0xBVElPTi5DT05TVEFOVDtcclxuICAgICAgICBjYXNlIFwiQ1VCSUNTUExJTkVcIjpcclxuICAgICAgICAgIHJldHVybiBBTklNQVRJT05fSU5URVJQT0xBVElPTi5DVUJJQztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgaWYgKF9pbnRlcnBvbGF0aW9uICE9IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgRGVidWcud2FybihgJHt0aGlzfTogVW5rbm93biBpbnRlcnBvbGF0aW9uIHR5cGUgJHtfaW50ZXJwb2xhdGlvbn0uYCk7XHJcbiAgICAgICAgICByZXR1cm4gQU5JTUFUSU9OX0lOVEVSUE9MQVRJT04uTElORUFSO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRXZWJHTFBhcmFtZXRlck5hbWUoX3ZhbHVlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQpLmZpbmQoX2tleSA9PiBSZWZsZWN0LmdldChXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCBfa2V5KSA9PSBfdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgdHlwZSBUeXBlZEFycmF5ID0gVWludDhBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXkgfCBJbnQ4QXJyYXkgfCBJbnQxNkFycmF5IHwgRmxvYXQzMkFycmF5O1xyXG4gIHR5cGUgVHlwZWRBcnJheUNvbnN0cnVjdG9yID0gVWludDhBcnJheUNvbnN0cnVjdG9yIHwgVWludDE2QXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQzMkFycmF5Q29uc3RydWN0b3IgfCBJbnQ4QXJyYXlDb25zdHJ1Y3RvciB8IEludDE2QXJyYXlDb25zdHJ1Y3RvciB8IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yO1xyXG5cclxuICBjb25zdCB0b0ludGVyblRyYW5zZm9ybWF0aW9uOiBSZWNvcmQ8R0xURi5BbmltYXRpb25DaGFubmVsVGFyZ2V0W1wicGF0aFwiXSwgc3RyaW5nPiA9IHtcclxuICAgIFwidHJhbnNsYXRpb25cIjogXCJ0cmFuc2xhdGlvblwiLFxyXG4gICAgXCJyb3RhdGlvblwiOiBcInJvdGF0aW9uXCIsXHJcbiAgICBcInNjYWxlXCI6IFwic2NhbGluZ1wiLFxyXG4gICAgXCJ3ZWlnaHRzXCI6IFwid2VpZ2h0c1wiXHJcbiAgfTtcclxuXHJcbiAgLy8gbnVtYmVyIG9mIGNvbXBvbmVudHMgZGVmaW5lZCBieSAndHlwZSdcclxuICBjb25zdCB0b0FjY2Vzc29yVHlwZUxlbmd0aDogUmVjb3JkPEdMVEYuQUNDRVNTT1JfVFlQRSwgbnVtYmVyPiA9IHtcclxuICAgIFwiU0NBTEFSXCI6IDEsXHJcbiAgICBcIlZFQzJcIjogMixcclxuICAgIFwiVkVDM1wiOiAzLFxyXG4gICAgXCJWRUM0XCI6IDQsXHJcbiAgICBcIk1BVDJcIjogNCxcclxuICAgIFwiTUFUM1wiOiA5LFxyXG4gICAgXCJNQVQ0XCI6IDE2XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9BcnJheUNvbnN0cnVjdG9yOiBSZWNvcmQ8R0xURi5DT01QT05FTlRfVFlQRSwgVHlwZWRBcnJheUNvbnN0cnVjdG9yPiA9IHtcclxuICAgIFtHTFRGLkNPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX0JZVEVdOiBVaW50OEFycmF5LFxyXG4gICAgW0dMVEYuQ09NUE9ORU5UX1RZUEUuQllURV06IEludDhBcnJheSxcclxuICAgIFtHTFRGLkNPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX1NIT1JUXTogVWludDE2QXJyYXksXHJcbiAgICBbR0xURi5DT01QT05FTlRfVFlQRS5TSE9SVF06IEludDE2QXJyYXksXHJcbiAgICBbR0xURi5DT01QT05FTlRfVFlQRS5VTlNJR05FRF9JTlRdOiBVaW50MzJBcnJheSxcclxuICAgIFtHTFRGLkNPTVBPTkVOVF9UWVBFLkZMT0FUXTogRmxvYXQzMkFycmF5XHJcbiAgfTtcclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBsZXQgc2hhZGVyU291cmNlczoge1tzb3VyY2U6IHN0cmluZ106IHN0cmluZ30gPSB7fTtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyQW1iaWVudE9jY2x1c2lvbi5mcmFnXCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuICogQ2FsY3VsYXRlcyBhbWJpZW50IG9jY2x1c2lvbiBmb3IgYSBnaXZlbiBmcmFnbWVudFxyXG4gKiBAYXV0aG9ycyBSb2xhbmQgSGVlciwgSEZVLCAyMDIzIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiAqIGFkYXB0aW9uIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS90c2hlcmlmL3dlYmdsMmV4YW1wbGVzL2Jsb2IvZGExMTUzYTE1ZWJjMDliYjEzNDk4ZTVmNzMyZWYyMDM2NTA3NzQwYy9zc2FvLmh0bWxcclxuICogc2VlIGhlcmUgZm9yIGFuIGluIGRlcHRoIGV4cGxhbmF0aW9uOiBcclxuKi9cclxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbnByZWNpc2lvbiBoaWdocCBpbnQ7XHJcblxyXG5jb25zdCBmbG9hdCBzaW40NSA9IDAuNzA3MTA3OyAvLyA0NSBkZWdyZWVzIGluIHJhZGlhbnNcclxuY29uc3QgdmVjMiBrZXJuZWxbNF0gPSB2ZWMyWzRdKHZlYzIoMC4wLCAxLjApLCB2ZWMyKDEuMCwgMC4wKSwgdmVjMigwLjAsIC0xLjApLCB2ZWMyKC0xLjAsIDAuMCkpO1xyXG5cclxudW5pZm9ybSBmbG9hdCB1X2ZOZWFyO1xyXG51bmlmb3JtIGZsb2F0IHVfZkZhcjtcclxudW5pZm9ybSBmbG9hdCB1X2ZTYW1wbGVSYWRpdXM7XHJcbnVuaWZvcm0gZmxvYXQgdV9mQmlhcztcclxudW5pZm9ybSBmbG9hdCB1X2ZBdHRlbnVhdGlvbkNvbnN0YW50O1xyXG51bmlmb3JtIGZsb2F0IHVfZkF0dGVudWF0aW9uTGluZWFyO1xyXG51bmlmb3JtIGZsb2F0IHVfZkF0dGVudWF0aW9uUXVhZHJhdGljO1xyXG51bmlmb3JtIHZlYzIgdV92Y3RSZXNvbHV0aW9uO1xyXG51bmlmb3JtIHZlYzMgdV92Y3RDYW1lcmE7XHJcbi8vIHVuaWZvcm0gbWF0NCB1X210eFZpZXdQcm9qZWN0aW9uSW52ZXJzZTtcclxuXHJcbnVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4UG9zaXRpb247XHJcbnVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4Tm9ybWFsO1xyXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleE5vaXNlO1xyXG4vLyB1bmlmb3JtIHNhbXBsZXIyRCB1X3RleERlcHRoO1xyXG5cclxuaW4gdmVjMiB2X3ZjdFRleHR1cmU7XHJcbm91dCB2ZWM0IHZjdEZyYWc7XHJcblxyXG5sYXlvdXQoc3RkMTQwKSB1bmlmb3JtIEZvZyB7XHJcbiAgYm9vbCB1X2JGb2dBY3RpdmU7XHJcbiAgZmxvYXQgdV9mRm9nTmVhcjtcclxuICBmbG9hdCB1X2ZGb2dGYXI7XHJcbiAgZmxvYXQgcGFkaW5nO1xyXG4gIHZlYzQgdV92Y3RGb2dDb2xvcjtcclxufTtcclxuXHJcbi8vIFRoaXMgZnVuY3Rpb24gY291bGQgYmUgdXNlZCB0byBjYWxjdWxhdGUgdGhlIHBvc2l0aW9uIGZyb20gdGhlIGRlcHRoIHRleHR1cmUsIGJ1dCBtb2JpbGUgZGV2aWNlcyBzZWVtcyB0byBsYWNrIGluIHByZWNpc2lvbiB0byBkbyB0aGlzXHJcbi8vIHZlYzMgZ2V0UG9zaXRpb24odmVjMiBfdmN0VGV4dHVyZSkge1xyXG4vLyAgIGZsb2F0IGZEZXB0aCA9IHRleHR1cmUodV90ZXhEZXB0aCwgX3ZjdFRleHR1cmUpLnI7XHJcbi8vICAgdmVjNCBjbGlwU3BhY2VQb3NpdGlvbiA9IHZlYzQoX3ZjdFRleHR1cmUgKiAyLjAgLSAxLjAsIGZEZXB0aCAqIDIuMCAtIDEuMCwgMS4wKTtcclxuLy8gICB2ZWM0IHdvcmxkU3BhY2VQb3NpdGlvbiA9IHVfbXR4Vmlld1Byb2plY3Rpb25JbnZlcnNlICogY2xpcFNwYWNlUG9zaXRpb247XHJcbi8vICAgcmV0dXJuIHdvcmxkU3BhY2VQb3NpdGlvbi54eXogLyB3b3JsZFNwYWNlUG9zaXRpb24udztcclxuLy8gfVxyXG5cclxuZmxvYXQgZ2V0T2NjbHVzaW9uKHZlYzMgX3ZjdFBvc2l0aW9uLCB2ZWMzIF92Y3ROb3JtYWwsIHZlYzIgX3ZjdFRleHR1cmUpIHtcclxuICB2ZWMzIHZjdE9jY2x1ZGVyID0gdGV4dHVyZSh1X3RleFBvc2l0aW9uLCBfdmN0VGV4dHVyZSkueHl6O1xyXG5cclxuICBpZiAodmN0T2NjbHVkZXIueCA9PSAwLjAgJiYgdmN0T2NjbHVkZXIueSA9PSAwLjAgJiYgdmN0T2NjbHVkZXIueiA9PSAwLjApIC8vIG5vIG9jY2x1ZGVyIGF0IHRoaXMgcG9zaXRpb25cclxuICAgIHJldHVybiAwLjA7XHJcblxyXG4gIHZlYzMgdmN0RGlzdGFuY2UgPSB2Y3RPY2NsdWRlciAtIF92Y3RQb3NpdGlvbjtcclxuICBmbG9hdCBmSW50ZW5zaXR5ID0gbWF4KGRvdChfdmN0Tm9ybWFsLCBub3JtYWxpemUodmN0RGlzdGFuY2UpKSAtIHVfZkJpYXMsIDAuMCk7XHJcblxyXG4gIGZsb2F0IGZEaXN0YW5jZSA9IGxlbmd0aCh2Y3REaXN0YW5jZSk7XHJcbiAgZmxvYXQgZkF0dGVudWF0aW9uID0gMS4wIC8gKHVfZkF0dGVudWF0aW9uQ29uc3RhbnQgKyB1X2ZBdHRlbnVhdGlvbkxpbmVhciAqIGZEaXN0YW5jZSArIHVfZkF0dGVudWF0aW9uUXVhZHJhdGljICogZkRpc3RhbmNlICogZkRpc3RhbmNlKTtcclxuXHJcbiAgcmV0dXJuIGZJbnRlbnNpdHkgKiBmQXR0ZW51YXRpb247XHJcbn1cclxuXHJcbmZsb2F0IGdldEZvZyh2ZWMzIF92Y3RQb3NpdGlvbikge1xyXG4gIGZsb2F0IGZEaXN0YW5jZSA9IGxlbmd0aChfdmN0UG9zaXRpb24gLSB1X3ZjdENhbWVyYSk7IC8vIG1heWJlIHVzZSB6LWRlcHRoIGluc3RlYWQgb2YgZXVjbGlkZWFuIGRlcHRoXHJcbiAgZmxvYXQgZkZvZyA9IGNsYW1wKChmRGlzdGFuY2UgLSB1X2ZGb2dOZWFyKSAvICh1X2ZGb2dGYXIgLSB1X2ZGb2dOZWFyKSwgMC4wLCAxLjApO1xyXG4gIGZGb2cgPSAtcG93KGZGb2csIDIuMCkgKyAoMi4wICogZkZvZyk7IC8vIGxldHMgZm9nIGFwcGVhciBxdWlja2VyIGFuZCBmYWxsIG9mZiBzbG93ZXIgcmVzdWx0cyBpbiBhIG1vcmUgZ3JhZHVhbCBmYWxsb2ZmXHJcbiAgcmV0dXJuIGZGb2cgKiB1X3ZjdEZvZ0NvbG9yLmE7XHJcbn1cclxuXHJcbnZvaWQgbWFpbigpIHtcclxuICB2ZWMzIHZjdFBvc2l0aW9uID0gdGV4dHVyZSh1X3RleFBvc2l0aW9uLCB2X3ZjdFRleHR1cmUpLnh5ejtcclxuICB2ZWMzIHZjdE5vcm1hbCA9IHRleHR1cmUodV90ZXhOb3JtYWwsIHZfdmN0VGV4dHVyZSkueHl6O1xyXG4gIHZlYzIgdmN0UmFuZG9tID0gbm9ybWFsaXplKHRleHR1cmUodV90ZXhOb2lzZSwgdl92Y3RUZXh0dXJlKS54eSAqIDIuMCAtIDEuMCk7XHJcbiAgZmxvYXQgZkRlcHRoID0gKGxlbmd0aCh2Y3RQb3NpdGlvbiAtIHVfdmN0Q2FtZXJhKSAtIHVfZk5lYXIpIC8gKHVfZkZhciAtIHVfZk5lYXIpOyAvLyBsaW5lYXIgZXVjbGlkZWFuIGRlcHRoIGluIHJhbmdlIFswLDFdLCB3aGVuIGNoYW5naW5nIHRvIHZpZXcgc3BhY2UsIGRvbid0IHN1YnRyYWN0IGNhbWVyYSBwb3NpdGlvblxyXG4gIGZsb2F0IGZLZXJuZWxSYWRpdXMgPSB1X2ZTYW1wbGVSYWRpdXMgKiAoMS4wIC0gZkRlcHRoKTtcclxuXHJcbiAgZmxvYXQgZk9jY2x1c2lvbiA9IDAuMDtcclxuICBmb3IgKGludCBpID0gMDsgaSA8IDQ7ICsraSkge1xyXG4gICAgdmVjMiB2Y3RLMSA9IHJlZmxlY3Qoa2VybmVsW2ldLCB2Y3RSYW5kb20pO1xyXG4gICAgdmVjMiB2Y3RLMiA9IHZlYzIodmN0SzEueCAqIHNpbjQ1IC0gdmN0SzEueSAqIHNpbjQ1LCB2Y3RLMS54ICogc2luNDUgKyB2Y3RLMS55ICogc2luNDUpO1xyXG5cclxuICAgIHZjdEsxIC89IHVfdmN0UmVzb2x1dGlvbjtcclxuICAgIHZjdEsyIC89IHVfdmN0UmVzb2x1dGlvbjtcclxuXHJcbiAgICB2Y3RLMSAqPSBmS2VybmVsUmFkaXVzO1xyXG4gICAgdmN0SzIgKj0gZktlcm5lbFJhZGl1cztcclxuXHJcbiAgICBmT2NjbHVzaW9uICs9IGdldE9jY2x1c2lvbih2Y3RQb3NpdGlvbiwgdmN0Tm9ybWFsLCB2X3ZjdFRleHR1cmUgKyB2Y3RLMSk7XHJcbiAgICBmT2NjbHVzaW9uICs9IGdldE9jY2x1c2lvbih2Y3RQb3NpdGlvbiwgdmN0Tm9ybWFsLCB2X3ZjdFRleHR1cmUgKyB2Y3RLMiAqIDAuNzUpO1xyXG4gICAgZk9jY2x1c2lvbiArPSBnZXRPY2NsdXNpb24odmN0UG9zaXRpb24sIHZjdE5vcm1hbCwgdl92Y3RUZXh0dXJlICsgdmN0SzEgKiAwLjUpO1xyXG4gICAgZk9jY2x1c2lvbiArPSBnZXRPY2NsdXNpb24odmN0UG9zaXRpb24sIHZjdE5vcm1hbCwgdl92Y3RUZXh0dXJlICsgdmN0SzIgKiAwLjI1KTtcclxuICB9XHJcblxyXG4gIGZPY2NsdXNpb24gPSBjbGFtcChmT2NjbHVzaW9uIC8gMTYuMCwgMC4wLCAxLjApO1xyXG5cclxuICBpZiAodV9iRm9nQWN0aXZlICYmIGZPY2NsdXNpb24gPiAwLjApIC8vIGNvcnJlY3Qgb2NjbHVzaW9uIGJ5IGZvZyBmYWN0b3JcclxuICAgIGZPY2NsdXNpb24gPSBtaXgoZk9jY2x1c2lvbiwgMC4wLCBnZXRGb2codmN0UG9zaXRpb24pKTtcclxuICBcclxuICB2Y3RGcmFnLnJnYiA9IHZlYzMoZk9jY2x1c2lvbik7XHJcbiAgdmN0RnJhZy5hID0gMS4wO1xyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyQmxvb20uZnJhZ1wiXSA9IC8qZ2xzbCovIGAjdmVyc2lvbiAzMDAgZXNcclxuLyoqXHJcbiAqIEV4dHJhY3RzIGNvbG9ycywgZG93bnNhbXBsZXMgYW5kIHVwc2FtcGxlcyBhIHRleHR1cmVcclxuICogQWRhcHRpb24gb2YgdGhlIFwiZHVhbCBmaWx0ZXJpbmcga2F3YXNlXCIgbWV0aG9kIGRlc2NyaWJlZCBpbiBTSUdHUkFQSCAyMDE1IGJ5IE1hcml1cyBCasO4cmdlXHJcbiAqIGh0dHBzOi8vY29tbXVuaXR5LmFybS5jb20vY2ZzLWZpbGUvX19rZXkvY29tbXVuaXR5c2VydmVyLWJsb2dzLWNvbXBvbmVudHMtd2VibG9nZmlsZXMvMDAtMDAtMDAtMjAtNjYvc2lnZ3JhcGgyMDE1XzJEMDBfbW1nXzJEMDBfbWFyaXVzXzJEMDBfbm90ZXMucGRmXHJcbiAqIEBhdXRob3JzIFJvbGFuZCBIZWVyLCBIRlUsIDIwMjMgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMyB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4gKi9cclxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbnByZWNpc2lvbiBoaWdocCBpbnQ7XHJcblxyXG51bmlmb3JtIGludCB1X2lNb2RlOyAvLyAwOiBleHRyYWN0LCAxOiBkb3duc2FtcGxlLCAyOiB1cHNhbXBsZSwgMzogYXBwbHlcclxudW5pZm9ybSBmbG9hdCB1X2ZUaHJlc2hvbGQ7XHJcbnVuaWZvcm0gZmxvYXQgdV9mSW50ZW5zaXR5O1xyXG51bmlmb3JtIGZsb2F0IHVfZkhpZ2hsaWdodERlc2F0dXJhdGlvbjtcclxudW5pZm9ybSB2ZWMyIHVfdmN0VGV4ZWw7XHJcblxyXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleFNvdXJjZTtcclxuXHJcbmluIHZlYzIgdl92Y3RUZXh0dXJlO1xyXG5vdXQgdmVjNCB2Y3RGcmFnO1xyXG5cclxuLy8gb2xkIGdhdXNzaWFuIGJsdXJcclxuLy8gZmxhdCBpbiB2ZWMyWzldIHZfdmN0T2Zmc2V0cztcclxuLy8gY29uc3QgZmxvYXQgZ2F1c3NpYW5LZXJuZWxbOV0gPSBmbG9hdFtdKDAuMDQ1LCAwLjEyMiwgMC4wNDUsIDAuMTIyLCAwLjMzMiwgMC4xMjIsIDAuMDQ1LCAwLjEyMiwgMC4wNDUpO1xyXG4vLyB2ZWM0IGRvd25zYW1wbGUodmVjMiBfdmN0VGV4dHVyZSkge1xyXG4vLyAgIHZlYzQgdmN0Q29sb3IgPSB2ZWM0KDAuMCk7XHJcbi8vICAgZm9yIChpbnQgaSA9IDA7IGkgPCA5OyBpKyspIFxyXG4vLyAgICAgdmN0Q29sb3IgKz0gdGV4dHVyZSh1X3RleFNvdXJjZSwgdl92Y3RUZXh0dXJlICsgdl92Y3RPZmZzZXRzW2ldKSAqIGdhdXNzaWFuS2VybmVsW2ldO1xyXG4vLyAgIHJldHVybiB2Y3RDb2xvcjtcclxuLy8gfVxyXG4vLyB2ZWM0IHVwc2FtcGxlKHZlYzIgX3ZjdFRleHR1cmUpIHtcclxuLy8gICB2ZWM0IHZjdENvbG9yID0gdmVjNCgwLjApO1xyXG4vLyAgIGZvciAoaW50IGkgPSAwOyBpIDwgOTsgaSsrKSBcclxuLy8gICAgIHZjdENvbG9yICs9IHRleHR1cmUodV90ZXhTb3VyY2UsIF92Y3RUZXh0dXJlICsgdl92Y3RPZmZzZXRzW2ldKSAqIGdhdXNzaWFuS2VybmVsW2ldO1xyXG4vLyAgIHJldHVybiB2Y3RDb2xvcjtcclxuLy8gfVxyXG5cclxuLy8gdmVjMyBleHRyYWN0KHZlYzIgX3ZjdFRleHR1cmUpIHtcclxuLy8gICB2ZWMzIHZjdENvbG9yID0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUpLnJnYjtcclxuLy8gICBpZihhbnkoZ3JlYXRlclRoYW4odmN0Q29sb3IsIHZlYzModV9mVGhyZXNob2xkKSkpKVxyXG4vLyAgICAgcmV0dXJuIHZjdENvbG9yO1xyXG4vLyAgIGRpc2NhcmQ7XHJcbi8vIH1cclxuXHJcbi8vIHZlYzMgZXh0cmFjdCh2ZWMyIF92Y3RUZXh0dXJlKSB7XHJcbi8vICAgdmVjMyB2Y3RDb2xvciA9IHRleHR1cmUodV90ZXhTb3VyY2UsIF92Y3RUZXh0dXJlKS5yZ2I7XHJcbi8vICAgZmxvYXQgbHVtaW5hbmNlID0gZG90KHZjdENvbG9yLCB2ZWMzKDAuMjk5LCAwLjU4NywgMC4xMTQpKTtcclxuLy8gICBpZihsdW1pbmFuY2UgPiB1X2ZUaHJlc2hvbGQpXHJcbi8vICAgICByZXR1cm4gdmN0Q29sb3I7XHJcbi8vICAgZGlzY2FyZDtcclxuLy8gfVxyXG5cclxuLy8gb2xkIGV4dHJhY3Rpb24gd2l0aCBhdmVyYWdlIGJyaWdodG5lc3NcclxudmVjMyBleHRyYWN0KHZlYzIgX3ZjdFRleHR1cmUpIHtcclxuICB2ZWMzIHZjdENvbG9yID0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUpLnJnYjtcclxuICBmbG9hdCBmVGhyZXNob2xkID0gdV9mVGhyZXNob2xkO1xyXG4gIGlmKGZUaHJlc2hvbGQgPj0gMS4wKVxyXG4gICAgZlRocmVzaG9sZCA9IDAuOTk5OTk5O1xyXG5cclxuICB2Y3RDb2xvciA9IHZjdENvbG9yIC0gZlRocmVzaG9sZDtcclxuICB2Y3RDb2xvciA9IHZjdENvbG9yIC8gKDEuMCAtIGZUaHJlc2hvbGQpOyAvLyBuZWdhdGl2ZSB2YWx1ZXMgbWlnaHQgcmVjZWl2ZSB2YWx1ZXMgYWJvdmUgMS4wLi4uXHJcbiAgXHJcbiAgZmxvYXQgYXZlcmFnZUJyaWdodG5lc3MgPSAoKCh2Y3RDb2xvci5yICsgdmN0Q29sb3IuZyArIHZjdENvbG9yLmIpIC8gMy4wKSAqIDAuMikgKyAwLjg7IC8vdGhlIGVmZmVjdCBpcyByZWR1Y2VkIGJ5IGZpcnN0IHNldHRpbmcgaXQgdG8gYSAwLjAtMC4yIHJhbmdlIGFuZCB0aGVuIGFkZGluZyAwLjhcclxuICB2Y3RDb2xvciA9IGNsYW1wKHZjdENvbG9yLCAwLjAsIDEuMCkgKiBjbGFtcChhdmVyYWdlQnJpZ2h0bmVzcywgMC4wLCAxLjApO1xyXG4gIHJldHVybiB2Y3RDb2xvcjtcclxufVxyXG5cclxudmVjNCBkb3duc2FtcGxlKHZlYzIgX3ZjdFRleHR1cmUpIHtcclxuICB2ZWM0IHN1bSA9IHRleHR1cmUodV90ZXhTb3VyY2UsIF92Y3RUZXh0dXJlKSAqIDQuMDtcclxuICBzdW0gKz0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUgLSB1X3ZjdFRleGVsLnh5KTtcclxuICBzdW0gKz0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUgKyB1X3ZjdFRleGVsLnh5KTtcclxuICBzdW0gKz0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUgKyB2ZWMyKHVfdmN0VGV4ZWwueCwgLXVfdmN0VGV4ZWwueSkpO1xyXG4gIHN1bSArPSB0ZXh0dXJlKHVfdGV4U291cmNlLCBfdmN0VGV4dHVyZSAtIHZlYzIodV92Y3RUZXhlbC54LCAtdV92Y3RUZXhlbC55KSk7XHJcblxyXG4gIHJldHVybiBzdW0gLyA4LjA7XHJcbn1cclxuXHJcbnZlYzQgdXBzYW1wbGUodmVjMiBfdmN0VGV4dHVyZSkge1xyXG4gIHZlYzQgc3VtID0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUgKyB2ZWMyKC11X3ZjdFRleGVsLnggKiAyLjAsIDAuMCkpO1xyXG4gIHN1bSArPSB0ZXh0dXJlKHVfdGV4U291cmNlLCBfdmN0VGV4dHVyZSArIHZlYzIoLXVfdmN0VGV4ZWwueCwgdV92Y3RUZXhlbC55KSkgKiAyLjA7XHJcbiAgc3VtICs9IHRleHR1cmUodV90ZXhTb3VyY2UsIF92Y3RUZXh0dXJlICsgdmVjMigwLjAsIHVfdmN0VGV4ZWwueSAqIDIuMCkpO1xyXG4gIHN1bSArPSB0ZXh0dXJlKHVfdGV4U291cmNlLCBfdmN0VGV4dHVyZSArIHZlYzIodV92Y3RUZXhlbC54LCB1X3ZjdFRleGVsLnkpKSAqIDIuMDtcclxuICBzdW0gKz0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUgKyB2ZWMyKHVfdmN0VGV4ZWwueCAqIDIuMCwgMC4wKSk7XHJcbiAgc3VtICs9IHRleHR1cmUodV90ZXhTb3VyY2UsIF92Y3RUZXh0dXJlICsgdmVjMih1X3ZjdFRleGVsLngsIC11X3ZjdFRleGVsLnkpKSAqIDIuMDtcclxuICBzdW0gKz0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUgKyB2ZWMyKDAuMCwgLXVfdmN0VGV4ZWwueSAqIDIuMCkpO1xyXG4gIHN1bSArPSB0ZXh0dXJlKHVfdGV4U291cmNlLCBfdmN0VGV4dHVyZSArIHZlYzIoLXVfdmN0VGV4ZWwueCwgLXVfdmN0VGV4ZWwueSkpICogMi4wO1xyXG4gIHJldHVybiBzdW0gLyAxMi4wO1xyXG59XHJcblxyXG52ZWMzIGFwcGx5KHZlYzIgX3ZjdFRleHR1cmUpIHtcclxuICB2ZWMzIHZjdEJsb29tID0gdGV4dHVyZSh1X3RleFNvdXJjZSwgX3ZjdFRleHR1cmUpLnJnYjtcclxuICBpZiAodmN0Qmxvb20uciA+PSAxLjAgfHwgdmN0Qmxvb20uZyA+PSAxLjAgfHwgdmN0Qmxvb20uYiA+PSAxLjApIC8vIG1heWJlIHVzZSB0aHJlc2hvbGQgaW5zdGVhZCBvZiAxLjA/XHJcbiAgICB2Y3RCbG9vbSA9IG1peCh2Y3RCbG9vbSwgdmVjMygxLjApLCB1X2ZIaWdobGlnaHREZXNhdHVyYXRpb24pO1xyXG4gIHZjdEJsb29tID0gY2xhbXAodmN0Qmxvb20gKiB1X2ZJbnRlbnNpdHksIDAuMCwgMS4wKTtcclxuICByZXR1cm4gdmN0Qmxvb207XHJcbn1cclxuXHJcbnZvaWQgbWFpbigpIHtcclxuICBzd2l0Y2godV9pTW9kZSkge1xyXG4gICAgY2FzZSAwOlxyXG4gICAgICB2Y3RGcmFnLnJnYiA9IGV4dHJhY3Qodl92Y3RUZXh0dXJlKTtcclxuICAgICAgdmN0RnJhZy5hID0gMS4wO1xyXG4gICAgICByZXR1cm47XHJcbiAgICBjYXNlIDE6XHJcbiAgICAgIHZjdEZyYWcgPSBkb3duc2FtcGxlKHZfdmN0VGV4dHVyZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIGNhc2UgMjpcclxuICAgICAgdmN0RnJhZyA9IHVwc2FtcGxlKHZfdmN0VGV4dHVyZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIGNhc2UgMzpcclxuICAgICAgdmN0RnJhZy5yZ2IgPSBhcHBseSh2X3ZjdFRleHR1cmUpO1xyXG4gICAgICB2Y3RGcmFnLmEgPSAxLjA7XHJcbiAgICAgIHJldHVybjtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHZjdEZyYWcgPSB0ZXh0dXJlKHVfdGV4U291cmNlLCB2X3ZjdFRleHR1cmUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgfVxyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyR2l6bW8uZnJhZ1wiXSA9IC8qZ2xzbCovIGAjdmVyc2lvbiAzMDAgZXNcclxuLyoqXHJcbiogLi4uXHJcbiogQGF1dGhvcnMgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiovXHJcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG5wcmVjaXNpb24gaGlnaHAgaW50O1xyXG5cclxudW5pZm9ybSB2ZWM0IHVfdmN0Q29sb3I7XHJcblxyXG5vdXQgdmVjNCB2Y3RGcmFnO1xyXG5cclxuLy8gdW5pZm9ybSBzYW1wbGVyMkQgdV90ZXhEZXB0aFN0ZW5jaWw7XHJcbiNpZiBkZWZpbmVkKFRFWFRVUkUpXHJcbiAgdW5pZm9ybSBzYW1wbGVyMkQgdV90ZXhDb2xvcjtcclxuICBpbiB2ZWMyIHZfdmN0VGV4dHVyZTtcclxuI2VuZGlmXHJcblxyXG4vLyAvLyA0eDQgQmF5ZXIgbWF0cml4IGZvciBkaXRoZXJpbmdcclxuLy8gY29uc3QgZmxvYXQgbXR4RGl0aGVyWzE2XSA9IGZsb2F0W10oXHJcbi8vICAgMS4wIC8gMTcuMCwgIDkuMCAvIDE3LjAsICAzLjAgLyAxNy4wLCAxMS4wIC8gMTcuMCxcclxuLy8gICAxMy4wIC8gMTcuMCwgIDUuMCAvIDE3LjAsIDE1LjAgLyAxNy4wLCAgNy4wIC8gMTcuMCxcclxuLy8gICA0LjAgLyAxNy4wLCAxMi4wIC8gMTcuMCwgIDIuMCAvIDE3LjAsIDEwLjAgLyAxNy4wLFxyXG4vLyAgIDE2LjAgLyAxNy4wLCAgOC4wIC8gMTcuMCwgMTQuMCAvIDE3LjAsICA2LjAgLyAxNy4wXHJcbi8vICk7XHJcblxyXG52b2lkIG1haW4oKSB7XHJcbiAgdmN0RnJhZyA9IHVfdmN0Q29sb3I7XHJcblxyXG4gICNpZiBkZWZpbmVkKFRFWFRVUkUpXHJcblxyXG4gICAgICB2Y3RGcmFnICo9IHRleHR1cmUodV90ZXhDb2xvciwgdl92Y3RUZXh0dXJlKTtcclxuXHJcbiAgI2VuZGlmXHJcblxyXG4gIC8vIGludCB4ID0gaW50KGdsX0ZyYWdDb29yZC54KSAlIDQ7XHJcbiAgLy8gaW50IHkgPSBpbnQoZ2xfRnJhZ0Nvb3JkLnkpICUgNDtcclxuICAvLyBpbnQgaW5kZXggPSB5ICogNCArIHg7XHJcbiAgLy8gLy8gRGlzY2FyZCB0aGUgZnJhZ21lbnQgaWYgaXRzIGFscGhhIGlzIGxlc3MgdGhhbiB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBpbiB0aGUgZGl0aGVyaW5nIG1hdHJpeFxyXG4gIC8vIGlmICh2Y3RGcmFnLmEgPCBtdHhEaXRoZXJbaW5kZXhdKSBcclxuICAvLyAgIGRpc2NhcmQ7XHJcblxyXG4gIC8vIC8vIERpc2NhcmQgdGhlIGZyYWdtZW50IGlmIGl0cyBhbHBoYSBpcyAwXHJcbiAgLy8gaWYgKHZjdEZyYWcuYSA9PSAwLjApXHJcbiAgLy8gICBkaXNjYXJkO1xyXG5cclxuICAvLyAvLyBDcmVhdGUgYSBjaGVja2VyYm9hcmQgcGF0dGVybiBmb3IgYWxwaGEgdmFsdWVzIGxlc3MgdGhhbiAwLjVcclxuICAvLyBlbHNlIGlmICh2Y3RGcmFnLmEgPCAwLjUgJiYgKCh4ICsgeSkgJSAyID09IDApKVxyXG4gIC8vICAgZGlzY2FyZDtcclxuXHJcbiAgLy8gdmN0RnJhZy5hID0gMS4wO1xyXG5cclxuICBpZiAodmN0RnJhZy5hIDwgMC4wMSlcclxuICAgIGRpc2NhcmQ7XHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJHaXptby52ZXJ0XCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiAuLi5cclxuKiBAYXV0aG9ycyBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuKi9cclxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbnByZWNpc2lvbiBoaWdocCBpbnQ7XHJcblxyXG4vLyB1bmlmb3JtIG1hdDQgdV9tdHhWaWV3UHJvamVjdGlvbjtcclxuLy8gdW5pZm9ybSBtYXQ0IHVfbXR4TW9kZWw7XHJcbnVuaWZvcm0gbWF0NCB1X210eE1lc2hUb1ZpZXc7IC8vIG1vZGVsLXZpZXctcHJvamVjdGlvbiBtYXRyaXhcclxuXHJcbmluIHZlYzMgYV92Y3RQb3NpdGlvbjtcclxuXHJcbiNpZiBkZWZpbmVkKFRFWFRVUkUpXHJcblxyXG4gIGluIHZlYzIgYV92Y3RUZXh0dXJlO1xyXG4gIG91dCB2ZWMyIHZfdmN0VGV4dHVyZTtcclxuXHJcbiNlbmRpZlxyXG5cclxudm9pZCBtYWluKCkge1xyXG4gIGdsX1Bvc2l0aW9uID0gdV9tdHhNZXNoVG9WaWV3ICogdmVjNChhX3ZjdFBvc2l0aW9uLCAxLjApO1xyXG5cclxuICAjaWYgZGVmaW5lZChURVhUVVJFKVxyXG5cclxuICAgIHZfdmN0VGV4dHVyZSA9IGFfdmN0VGV4dHVyZTtcclxuXHJcbiAgI2VuZGlmXHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaG9uZy5mcmFnXCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiBQaG9uZyBzaGFkaW5nXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjIgfCBSb2xhbmQgSGVlciwgSEZVLCAyMDIzIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiovXHJcblxyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbnVuaWZvcm0gdmVjNCB1X3ZjdENvbG9yO1xyXG51bmlmb3JtIGZsb2F0IHVfZkRpZmZ1c2U7XHJcbnVuaWZvcm0gZmxvYXQgdV9mU3BlY3VsYXI7XHJcbnVuaWZvcm0gZmxvYXQgdV9mSW50ZW5zaXR5O1xyXG51bmlmb3JtIGZsb2F0IHVfZk1ldGFsbGljO1xyXG51bmlmb3JtIHZlYzMgdV92Y3RDYW1lcmE7XHJcblxyXG51bmlmb3JtIGJvb2wgdV9iRm9nO1xyXG51bmlmb3JtIHZlYzQgdV92Y3RGb2dDb2xvcjtcclxudW5pZm9ybSBmbG9hdCB1X2ZGb2dOZWFyO1xyXG51bmlmb3JtIGZsb2F0IHVfZkZvZ0ZhcjtcclxuXHJcbmluIHZlYzQgdl92Y3RDb2xvcjtcclxuaW4gdmVjMyB2X3ZjdFBvc2l0aW9uO1xyXG5cclxubGF5b3V0KGxvY2F0aW9uID0gMCkgb3V0IHZlYzQgdmN0RnJhZztcclxubGF5b3V0KGxvY2F0aW9uID0gMSkgb3V0IHZlYzQgdmN0RnJhZ1Bvc2l0aW9uO1xyXG5sYXlvdXQobG9jYXRpb24gPSAyKSBvdXQgdmVjNCB2Y3RGcmFnTm9ybWFsO1xyXG5cclxuI2lmZGVmIFBIT05HXHJcblxyXG4gIGluIHZlYzMgdl92Y3ROb3JtYWw7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZmRlZiBGTEFUXHJcblxyXG4gIGZsYXQgaW4gdmVjMyB2X3ZjdFBvc2l0aW9uRmxhdDtcclxuXHJcbiNlbmRpZlxyXG5cclxuc3RydWN0IExpZ2h0IHtcclxuICB2ZWM0IHZjdENvbG9yO1xyXG4gIG1hdDQgbXR4U2hhcGU7XHJcbiAgbWF0NCBtdHhTaGFwZUludmVyc2U7XHJcbn07XHJcblxyXG5jb25zdCB1aW50IE1BWF9MSUdIVFNfRElSRUNUSU9OQUwgPSAxNXU7XHJcbmNvbnN0IHVpbnQgTUFYX0xJR0hUU19QT0lOVCA9IDEwMHU7XHJcbmNvbnN0IHVpbnQgTUFYX0xJR0hUU19TUE9UID0gMTAwdTtcclxuXHJcbmxheW91dChzdGQxNDApIHVuaWZvcm0gTGlnaHRzIHtcclxuICB1aW50IHVfbkxpZ2h0c0RpcmVjdGlvbmFsO1xyXG4gIHVpbnQgdV9uTGlnaHRzUG9pbnQ7XHJcbiAgdWludCB1X25MaWdodHNTcG90O1xyXG4gIHVpbnQgcGFkZGluZzsgLy8gQWRkIHBhZGRpbmcgdG8gYWxpZ24gdG8gMTYgYnl0ZXNcclxuICBMaWdodCB1X2FtYmllbnQ7XHJcbiAgTGlnaHQgdV9kaXJlY3Rpb25hbFtNQVhfTElHSFRTX0RJUkVDVElPTkFMXTtcclxuICBMaWdodCB1X3BvaW50W01BWF9MSUdIVFNfUE9JTlRdO1xyXG4gIExpZ2h0IHVfc3BvdFtNQVhfTElHSFRTX1NQT1RdO1xyXG59O1xyXG5cclxuLy8gVEVYVFVSRTogaW5wdXQgVVZzIGFuZCB0ZXh0dXJlXHJcbiNpZmRlZiBURVhUVVJFXHJcblxyXG4gIGluIHZlYzIgdl92Y3RUZXh0dXJlO1xyXG4gIHVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4Q29sb3I7XHJcblxyXG4jZW5kaWZcclxuXHJcbi8vIE5PUk1BTE1BUDogaW5wdXQgVVZzIGFuZCB0ZXh0dXJlXHJcbiNpZmRlZiBOT1JNQUxNQVBcclxuXHJcbiAgaW4gdmVjMyB2X3ZjdFRhbmdlbnQ7XHJcbiAgaW4gdmVjMyB2X3ZjdEJpdGFuZ2VudDtcclxuICB1bmlmb3JtIHNhbXBsZXIyRCB1X3RleE5vcm1hbDtcclxuXHJcbiNlbmRpZlxyXG5cclxuLy8gUmV0dXJucyBhIHZlY3RvciBmb3IgdmlzdWFsaXppbmcgb24gbW9kZWwuIEdyZWF0IGZvciBkZWJ1Z2dpbmdcclxudmVjNCBzaG93VmVjdG9yQXNDb2xvcih2ZWMzIF92ZWN0b3IsIGJvb2wgX2NsYW1wKSB7XHJcbiAgaWYoX2NsYW1wKSB7XHJcbiAgICBfdmVjdG9yICo9IDAuNTtcclxuICAgIF92ZWN0b3IgKz0gMC41O1xyXG4gIH1cclxuICByZXR1cm4gdmVjNChfdmVjdG9yLngsIF92ZWN0b3IueSwgX3ZlY3Rvci56LCAxKTtcclxufVxyXG5cclxudm9pZCBpbGx1bWluYXRlRGlyZWN0ZWQodmVjMyBfdmN0RGlyZWN0aW9uLCB2ZWMzIF92Y3RWaWV3LCB2ZWMzIF92Y3ROb3JtYWwsIHZlYzMgX3ZjdENvbG9yLCBpbm91dCB2ZWMzIF92Y3REaWZmdXNlLCBpbm91dCB2ZWMzIF92Y3RTcGVjdWxhcikge1xyXG4gIHZlYzMgdmN0RGlyZWN0aW9uID0gbm9ybWFsaXplKF92Y3REaXJlY3Rpb24pO1xyXG4gIGZsb2F0IGZJbGx1bWluYXRpb24gPSAtZG90KF92Y3ROb3JtYWwsIHZjdERpcmVjdGlvbik7XHJcbiAgaWYoZklsbHVtaW5hdGlvbiA+IDAuMCkge1xyXG4gICAgX3ZjdERpZmZ1c2UgKz0gdV9mRGlmZnVzZSAqIGZJbGx1bWluYXRpb24gKiBfdmN0Q29sb3I7XHJcblxyXG4gICAgaWYodV9mU3BlY3VsYXIgPD0gMC4wKVxyXG4gICAgICByZXR1cm47XHJcbiAgICAgIFxyXG4gICAgLy9CTElOTi1QaG9uZyBTaGFkaW5nXHJcbiAgICB2ZWMzIGhhbGZ3YXlEaXIgPSBub3JtYWxpemUoLXZjdERpcmVjdGlvbiAtIF92Y3RWaWV3KTtcclxuICAgIGZsb2F0IGZhY3RvciA9IG1heChkb3QoLXZjdERpcmVjdGlvbiwgX3ZjdE5vcm1hbCksIDAuMCk7IC8vRmFjdG9yIGZvciBzbW9vdGhpbmcgb3V0IHRyYW5zaXRpb24gZnJvbSBzdXJmYWNlIGZhY2luZyB0aGUgbGlnaHRzb3VyY2UgdG8gc3VyZmFjZSBmYWNpbmcgYXdheSBmcm9tIHRoZSBsaWdodHNvdXJjZVxyXG4gICAgZmFjdG9yID0gMS4wIC0gKHBvdyhmYWN0b3IgLSAxLjAsIDguMCkpOyAgICAgICAgICAgICAgICAgLy9UaGUgZmFjdG9yIGlzIGFsdGVyZWQgaW4gb3JkZXIgdG8gY2xlYXJseSBzZWUgdGhlIHNwZWN1bGFyIGhpZ2hsaWdodCBldmVuIGF0IHN0ZWVwIGFuZ2xlcywgd2hpbGUgc3RpbGwgcHJldmVudGluZyBhcnRpZmFjdHNcclxuXHJcbiAgICBfdmN0U3BlY3VsYXIgKz0gcG93KG1heChkb3QoX3ZjdE5vcm1hbCwgaGFsZndheURpciksIDAuMCksIGV4cDIodV9mU3BlY3VsYXIgKiA1LjApKSAqIHVfZlNwZWN1bGFyICogdV9mSW50ZW5zaXR5ICogZmFjdG9yICogX3ZjdENvbG9yO1xyXG4gIH1cclxufVxyXG5cclxuZmxvYXQgZ2V0Rm9nKHZlYzMgX3ZjdFBvc2l0aW9uKSB7XHJcbiAgZmxvYXQgZkRpc3RhbmNlID0gbGVuZ3RoKF92Y3RQb3NpdGlvbiAtIHVfdmN0Q2FtZXJhKTsgLy8gbWF5YmUgdXNlIHotZGVwdGggaW5zdGVhZCBvZiBldWNsaWRlYW4gZGVwdGhcclxuICBmbG9hdCBmRm9nID0gY2xhbXAoKGZEaXN0YW5jZSAtIHVfZkZvZ05lYXIpIC8gKHVfZkZvZ0ZhciAtIHVfZkZvZ05lYXIpLCAwLjAsIDEuMCk7XHJcbiAgZkZvZyA9IC1wb3coZkZvZywgMi4wKSArICgyLjAgKiBmRm9nKTsgLy8gbGV0cyBmb2cgYXBwZWFyIHF1aWNrZXIgYW5kIGZhbGwgb2ZmIHNsb3dlciByZXN1bHRzIGluIGEgbW9yZSBncmFkdWFsIGZhbGxvZmZcclxuICByZXR1cm4gZkZvZztcclxufVxyXG5cclxudm9pZCBtYWluKCkge1xyXG4gICNpZiBkZWZpbmVkKFBIT05HKSAmJiAhZGVmaW5lZChGTEFUKVxyXG5cclxuICAgICNpZmRlZiBOT1JNQUxNQVBcclxuXHJcbiAgICAgIG1hdDMgbXR4VEJOID0gbWF0Myhub3JtYWxpemUodl92Y3RUYW5nZW50KSwgbm9ybWFsaXplKHZfdmN0Qml0YW5nZW50KSwgbm9ybWFsaXplKHZfdmN0Tm9ybWFsKSk7XHJcbiAgICAgIHZlYzMgdmN0Tm9ybWFsID0gdGV4dHVyZSh1X3RleE5vcm1hbCwgdl92Y3RUZXh0dXJlKS54eXogKiAyLjAgLSAxLjA7XHJcbiAgICAgIHZjdE5vcm1hbCA9IG5vcm1hbGl6ZShtdHhUQk4gKiB2Y3ROb3JtYWwpO1xyXG5cclxuICAgICNlbHNlXHJcblxyXG4gICAgICB2ZWMzIHZjdE5vcm1hbCA9IG5vcm1hbGl6ZSh2X3ZjdE5vcm1hbCk7XHJcblxyXG4gICAgI2VuZGlmXHJcblxyXG4gICAgdmVjMyB2Y3RWaWV3ID0gbm9ybWFsaXplKHZfdmN0UG9zaXRpb24gLSB1X3ZjdENhbWVyYSk7XHJcbiAgICB2ZWMzIHZjdFBvc2l0aW9uID0gdl92Y3RQb3NpdGlvbjtcclxuXHJcbiAgI2VuZGlmXHJcblxyXG4gICNpZmRlZiBGTEFUXHJcblxyXG4gICAgdmVjMyB2Y3RGZHggPSBkRmR4KHZfdmN0UG9zaXRpb24pO1xyXG4gICAgdmVjMyB2Y3RGZHkgPSBkRmR5KHZfdmN0UG9zaXRpb24pO1xyXG4gICAgdmVjMyB2Y3ROb3JtYWwgPSBub3JtYWxpemUoY3Jvc3ModmN0RmR4LCB2Y3RGZHkpKTtcclxuICAgIHZlYzMgdmN0VmlldyA9IG5vcm1hbGl6ZSh2X3ZjdFBvc2l0aW9uRmxhdCAtIHVfdmN0Q2FtZXJhKTtcclxuICAgIHZlYzMgdmN0UG9zaXRpb24gPSB2X3ZjdFBvc2l0aW9uRmxhdDtcclxuXHJcbiAgI2VuZGlmXHJcblxyXG4gIHZlYzMgdmN0RGlmZnVzZSA9IHVfZkRpZmZ1c2UgKiB1X2FtYmllbnQudmN0Q29sb3IucmdiO1xyXG4gIHZlYzMgdmN0U3BlY3VsYXIgPSB2ZWMzKDAsIDAsIDApO1xyXG5cclxuICAvLyBjYWxjdWxhdGUgZGlyZWN0aW9uYWwgbGlnaHQgZWZmZWN0XHJcbiAgZm9yKHVpbnQgaSA9IDB1OyBpIDwgdV9uTGlnaHRzRGlyZWN0aW9uYWw7IGkrKykge1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb24gPSB2ZWMzKHVfZGlyZWN0aW9uYWxbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAxLjAsIDEuMCkpO1xyXG4gICAgaWxsdW1pbmF0ZURpcmVjdGVkKHZjdERpcmVjdGlvbiwgdmN0VmlldywgdmN0Tm9ybWFsLCB1X2RpcmVjdGlvbmFsW2ldLnZjdENvbG9yLnJnYiwgdmN0RGlmZnVzZSwgdmN0U3BlY3VsYXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FsY3VsYXRlIHBvaW50IGxpZ2h0IGVmZmVjdFxyXG4gIGZvcih1aW50IGkgPSAwdTsgaSA8IHVfbkxpZ2h0c1BvaW50OyBpKyspIHtcclxuICAgIHZlYzMgdmN0UG9zaXRpb25MaWdodCA9IHZlYzModV9wb2ludFtpXS5tdHhTaGFwZSAqIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKSk7XHJcbiAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZjdFBvc2l0aW9uIC0gdmN0UG9zaXRpb25MaWdodDtcclxuICAgIGZsb2F0IGZJbnRlbnNpdHkgPSAxLjAgLSBsZW5ndGgobWF0Myh1X3BvaW50W2ldLm10eFNoYXBlSW52ZXJzZSkgKiB2Y3REaXJlY3Rpb24pO1xyXG4gICAgaWYoZkludGVuc2l0eSA8IDAuMClcclxuICAgICAgY29udGludWU7XHJcblxyXG4gICAgaWxsdW1pbmF0ZURpcmVjdGVkKHZjdERpcmVjdGlvbiwgdmN0VmlldywgdmN0Tm9ybWFsLCB1X3BvaW50W2ldLnZjdENvbG9yLnJnYiAqIGZJbnRlbnNpdHksIHZjdERpZmZ1c2UsIHZjdFNwZWN1bGFyKTtcclxuICB9XHJcblxyXG4gIC8vIGNhbGN1bGF0ZSBzcG90IGxpZ2h0IGVmZmVjdFxyXG4gIGZvcih1aW50IGkgPSAwdTsgaSA8IHVfbkxpZ2h0c1Nwb3Q7IGkrKykge1xyXG4gICAgdmVjMyB2Y3RQb3NpdGlvbkxpZ2h0ID0gdmVjMyh1X3Nwb3RbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCkpO1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb24gPSB2Y3RQb3NpdGlvbiAtIHZjdFBvc2l0aW9uTGlnaHQ7XHJcbiAgICB2ZWMzIHZjdERpcmVjdGlvbkludmVydGVkID0gbWF0Myh1X3Nwb3RbaV0ubXR4U2hhcGVJbnZlcnNlKSAqIHZjdERpcmVjdGlvbjtcclxuICAgIGlmKHZjdERpcmVjdGlvbkludmVydGVkLnogPD0gMC4wKVxyXG4gICAgICBjb250aW51ZTtcclxuXHJcbiAgICBmbG9hdCBmSW50ZW5zaXR5ID0gMS4wIC0gbWluKDEuMCwgMi4wICogbGVuZ3RoKHZjdERpcmVjdGlvbkludmVydGVkLnh5KSAvIHZjdERpcmVjdGlvbkludmVydGVkLnopOyAgICAvL0NvbmVzaGFwZSB0aGF0IGlzIGJyaWdodGVzdCBpbiB0aGUgY2VudGVyLiBQb3NzaWJsZSBUT0RPOiBcIlZhcmlhYmxlIFNwb3RsaWdodHNvZnRuZXNzXCJcclxuICAgIGZJbnRlbnNpdHkgKj0gMS4wIC0gcG93KHZjdERpcmVjdGlvbkludmVydGVkLnosIDIuMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUHJldmVudHMgaGFyc2ggbGlnaHRpbmcgYXJ0aWZhY3RzIGF0IGJvdW5kYXJ5IG9mIHRoZSBnaXZlbiBzcG90bGlnaHRcclxuICAgIGlmKGZJbnRlbnNpdHkgPCAwLjApXHJcbiAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgIGlsbHVtaW5hdGVEaXJlY3RlZCh2Y3REaXJlY3Rpb24sIHZjdFZpZXcsIHZjdE5vcm1hbCwgdV9zcG90W2ldLnZjdENvbG9yLnJnYiAqIGZJbnRlbnNpdHksIHZjdERpZmZ1c2UsIHZjdFNwZWN1bGFyKTtcclxuICB9XHJcblxyXG4gIHZjdEZyYWcucmdiID0gdmN0RGlmZnVzZSArIHZjdFNwZWN1bGFyICogdV9mTWV0YWxsaWM7XHJcbiAgdmN0RnJhZy5hID0gMS4wO1xyXG5cclxuICAjaWZkZWYgVEVYVFVSRVxyXG5cclxuICAgIHZlYzQgdmN0Q29sb3JUZXh0dXJlID0gdGV4dHVyZSh1X3RleENvbG9yLCB2X3ZjdFRleHR1cmUpO1xyXG4gICAgdmN0RnJhZyAqPSB2Y3RDb2xvclRleHR1cmU7XHJcblxyXG4gICNlbmRpZlxyXG5cclxuICB2Y3RGcmFnICo9IHVfdmN0Q29sb3IgKiB2X3ZjdENvbG9yO1xyXG4gIHZjdEZyYWcucmdiICs9IHZjdFNwZWN1bGFyICogKDEuMCAtIHVfZk1ldGFsbGljKTtcclxuXHJcbiAgdmN0RnJhZ1Bvc2l0aW9uID0gdmVjNCh2X3ZjdFBvc2l0aW9uLCAxLjApOyAvLyBkb24ndCB1c2UgZmxhdCBoZXJlLCBiZWNhdXNlIHdlIHdhbnQgdG8gaW50ZXJwb2xhdGUgdGhlIHBvc2l0aW9uXHJcbiAgdmN0RnJhZ05vcm1hbCA9IHZlYzQodmN0Tm9ybWFsLCAxLjApO1xyXG5cclxuICBpZiAodV9iRm9nKSBcclxuICAgIHZjdEZyYWcucmdiID0gbWl4KHZjdEZyYWcucmdiLCB1X3ZjdEZvZ0NvbG9yLnJnYiwgZ2V0Rm9nKHZjdFBvc2l0aW9uKSAqIHVfdmN0Rm9nQ29sb3IuYSk7XHJcblxyXG4gIHZjdEZyYWcucmdiICo9IHZjdEZyYWcuYTtcclxuXHJcbiAgaWYodmN0RnJhZy5hIDwgMC4wMSlcclxuICAgIGRpc2NhcmQ7XHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaWNrLmZyYWdcIl0gPSAvKmdsc2wqLyBgI3ZlcnNpb24gMzAwIGVzXHJcbi8qKlxyXG4qIFJlbmRlcnMgZm9yIFJheWNhc3RpbmdcclxuKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4qL1xyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbnVuaWZvcm0gaW50IHVfaWQ7XHJcbnVuaWZvcm0gdmVjMiB1X3ZjdFNpemU7XHJcbnVuaWZvcm0gdmVjNCB1X3ZjdENvbG9yO1xyXG5vdXQgaXZlYzQgdmN0RnJhZztcclxuXHJcbnZvaWQgbWFpbigpIHtcclxuICAgIGludCBwaXhlbCA9IGludCh0cnVuYyhnbF9GcmFnQ29vcmQueCkgKyB1X3ZjdFNpemUueCAqIHRydW5jKGdsX0ZyYWdDb29yZC55KSk7XHJcblxyXG4gICAgaWYgKHBpeGVsICE9IHVfaWQpXHJcbiAgICAgIGRpc2NhcmQ7XHJcblxyXG4gICAgdWludCBpY29sb3IgPSB1aW50KHVfdmN0Q29sb3IuciAqIDI1NS4wKSA8PCAyNCB8IHVpbnQodV92Y3RDb2xvci5nICogMjU1LjApIDw8IDE2IHwgdWludCh1X3ZjdENvbG9yLmIgKiAyNTUuMCkgPDwgOCB8IHVpbnQodV92Y3RDb2xvci5hICogMjU1LjApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICB2Y3RGcmFnID0gaXZlYzQoZmxvYXRCaXRzVG9JbnQoZ2xfRnJhZ0Nvb3JkLnopLCBpY29sb3IsIDAsIDApO1xyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGljay52ZXJ0XCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiBSZW5kZXJzIGZvciBSYXljYXN0aW5nXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuKi9cclxuaW4gdmVjMyBhX3ZjdFBvc2l0aW9uOyAgICAgICBcclxudW5pZm9ybSBtYXQ0IHVfbXR4TWVzaFRvVmlldztcclxuXHJcbnZvaWQgbWFpbigpIHsgICBcclxuICAgIGdsX1Bvc2l0aW9uID0gdV9tdHhNZXNoVG9WaWV3ICogdmVjNChhX3ZjdFBvc2l0aW9uLCAxLjApO1xyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGlja1RleHR1cmVkLmZyYWdcIl0gPSAvKmdsc2wqLyBgI3ZlcnNpb24gMzAwIGVzXHJcbi8qKlxyXG4qIFJlbmRlcnMgZm9yIFJheWNhc3RpbmdcclxuKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4qL1xyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbnVuaWZvcm0gaW50IHVfaWQ7XHJcbnVuaWZvcm0gdmVjMiB1X3ZjdFNpemU7XHJcbmluIHZlYzIgdl92Y3RUZXh0dXJlO1xyXG51bmlmb3JtIHZlYzQgdV92Y3RDb2xvcjtcclxudW5pZm9ybSBzYW1wbGVyMkQgdV90ZXhDb2xvcjtcclxuXHJcbm91dCBpdmVjNCB2Y3RGcmFnO1xyXG5cclxudm9pZCBtYWluKCkge1xyXG4gIGludCBwaXhlbCA9IGludCh0cnVuYyhnbF9GcmFnQ29vcmQueCkgKyB1X3ZjdFNpemUueCAqIHRydW5jKGdsX0ZyYWdDb29yZC55KSk7XHJcblxyXG4gIGlmIChwaXhlbCAhPSB1X2lkKVxyXG4gICAgZGlzY2FyZDtcclxuICBcclxuICB2ZWM0IHZjdENvbG9yID0gdV92Y3RDb2xvciAqIHRleHR1cmUodV90ZXhDb2xvciwgdl92Y3RUZXh0dXJlKTtcclxuICB1aW50IGljb2xvciA9IHVpbnQodmN0Q29sb3IuciAqIDI1NS4wKSA8PCAyNCB8IHVpbnQodmN0Q29sb3IuZyAqIDI1NS4wKSA8PCAxNiB8IHVpbnQodmN0Q29sb3IuYiAqIDI1NS4wKSA8PCA4IHwgdWludCh2Y3RDb2xvci5hICogMjU1LjApO1xyXG4gIFxyXG4gIHZjdEZyYWcgPSBpdmVjNChmbG9hdEJpdHNUb0ludChnbF9GcmFnQ29vcmQueiksIGljb2xvciwgZmxvYXRCaXRzVG9JbnQodl92Y3RUZXh0dXJlLngpLCBmbG9hdEJpdHNUb0ludCh2X3ZjdFRleHR1cmUueSkpO1xyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGlja1RleHR1cmVkLnZlcnRcIl0gPSAvKmdsc2wqLyBgI3ZlcnNpb24gMzAwIGVzXHJcbi8qKlxyXG4qIFJlbmRlcnMgZm9yIFJheWNhc3RpbmdcclxuKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4qL1xyXG5pbiB2ZWMzIGFfdmN0UG9zaXRpb247ICAgICAgIFxyXG5pbiB2ZWMyIGFfdmN0VGV4dHVyZTtcclxudW5pZm9ybSBtYXQ0IHVfbXR4TWVzaFRvVmlldztcclxudW5pZm9ybSBtYXQzIHVfbXR4UGl2b3Q7XHJcblxyXG5vdXQgdmVjMiB2X3ZjdFRleHR1cmU7XHJcblxyXG52b2lkIG1haW4oKSB7ICAgXHJcbiAgZ2xfUG9zaXRpb24gPSB1X210eE1lc2hUb1ZpZXcgKiB2ZWM0KGFfdmN0UG9zaXRpb24sIDEuMCk7XHJcbiAgdl92Y3RUZXh0dXJlID0gKHVfbXR4UGl2b3QgKiB2ZWMzKGFfdmN0VGV4dHVyZSwgMS4wKSkueHk7XHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJTY3JlZW4udmVydFwiXSA9IC8qZ2xzbCovIGAjdmVyc2lvbiAzMDAgZXNcclxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbnByZWNpc2lvbiBoaWdocCBpbnQ7XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgZnVsbHNjcmVlbiB0cmlhbmdsZSB3aGljaCBjb3RhaW5zIHRoZSBzY3JlZW4gcXVhZCBhbmQgc2V0cyB0aGUgdGV4dHVyZSBjb29yZGluYXRlcyBhY2NvcmRpbmdseS5cclxuICogQGF1dGhvcnMgUm9sYW5kIEhlZXIsIEhGVSwgMjAyMyB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIzIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiAqXHJcbiAqICAyICAzIC5cclxuICogICAgICAgLiAgLlxyXG4gKiAgICAgICAuICAgICAuICBcclxuICogICAgICAgLiAgICAgICAgLlxyXG4gKiAgMSAgMSAuLi4uLi4uLi4uICAuXHJcbiAqICAgICAgIC4gc2NyZWVuIC4gICAgIC5cclxuICogICAgICAgLiAgcXVhZCAgLiAgICAgICAgLlxyXG4gKiAgMCAtMSAuLi4uLi4uLi4uICAuICAuICAuICAuXHJcbiAqICAgIHAgLTEgICAgICAgIDEgICAgICAgICAgIDNcclxuICogIHQgICAgMCAgICAgICAgMSAgICAgICAgICAgMlxyXG4gKiAgXHJcbiAqICBwID09IHBvc3Rpb25cclxuICogIHQgPT0gdGV4dHVyZSBjb29yZGluYXRlXHJcbiAqL1xyXG5cclxudW5pZm9ybSBmbG9hdCB1X3dpZHRoO1xyXG51bmlmb3JtIGZsb2F0IHVfaGVpZ2h0O1xyXG51bmlmb3JtIHZlYzIgdV92Y3RSZXNvbHV0aW9uO1xyXG5cclxub3V0IHZlYzIgdl92Y3RUZXh0dXJlO1xyXG5cclxuI2lmZGVmIFNBTVBMRVxyXG5cclxuICBmbGF0IG91dCB2ZWMyWzldIHZfdmN0T2Zmc2V0cztcclxuXHJcbiNlbmRpZlxyXG5cclxudm9pZCBtYWluKCkge1xyXG4gIGZsb2F0IHggPSBmbG9hdCgoZ2xfVmVydGV4SUQgJSAyKSAqIDQpOyAvLyAwLCA0LCAwXHJcbiAgZmxvYXQgeSA9IGZsb2F0KChnbF9WZXJ0ZXhJRCAvIDIpICogNCk7IC8vIDAsIDAsIDRcclxuICBnbF9Qb3NpdGlvbiA9IHZlYzQoeCAtIDEuMCwgeSAtIDEuMCwgMC4wLCAxLjApOyAvLyAoLTEsIC0xKSwgKDMsIC0xKSwgKC0xLCAzKVxyXG4gIHZfdmN0VGV4dHVyZSA9IHZlYzIoeCAvIDIuMCwgeSAvIDIuMCk7ICAvLyAoMCwgMCksICgyLCAwKSwgKDAsIDIpIC0+IGludGVycG9sYXRpb24gd2lsbCB5aWVsZCAoMCwgMCksICgxLCAwKSwgKDAsIDEpIGFzIHRoZSBwb3NpdGlvbnMgYXJlIGRvdWJsZSB0aGUgc2l6ZSBvZiB0aGUgc2NyZWVuXHJcblxyXG4gICNpZmRlZiBTQU1QTEVcclxuXHJcbiAgICB2ZWMyIG9mZnNldCA9IHZlYzIoMS4wIC8gdV92Y3RSZXNvbHV0aW9uLngsIDEuMCAvIHVfdmN0UmVzb2x1dGlvbi55KTtcclxuICAgIHZfdmN0T2Zmc2V0cyA9IHZlYzJbXShcclxuICAgICAgdmVjMigtb2Zmc2V0LngsIG9mZnNldC55KSwgIHZlYzIoMC4wLCBvZmZzZXQueSksICB2ZWMyKG9mZnNldC54LCBvZmZzZXQueSksXHJcbiAgICAgIHZlYzIoLW9mZnNldC54LCAwLjApLCAgICAgICB2ZWMyKDAuMCwgMC4wKSwgICAgICAgdmVjMihvZmZzZXQueCwgMC4wKSxcclxuICAgICAgdmVjMigtb2Zmc2V0LngsIC1vZmZzZXQueSksIHZlYzIoMC4wLCAtb2Zmc2V0LnkpLCAgdmVjMihvZmZzZXQueCwgLW9mZnNldC55KVxyXG4gICAgKTtcclxuXHJcbiAgI2VuZGlmXHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJVbml2ZXJzYWwuZnJhZ1wiXSA9IC8qZ2xzbCovIGAjdmVyc2lvbiAzMDAgZXNcclxuLyoqXHJcbiogVW5pdmVyc2FsIFNoYWRlciBhcyBiYXNlIGZvciBtYW55IG90aGVycy4gQ29udHJvbGxlZCBieSBjb21waWxlciBkaXJlY3RpdmVzXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjEgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuKi9cclxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbnByZWNpc2lvbiBoaWdocCBpbnQ7XHJcblxyXG4vLyBNSU5JTUFMXHJcbnVuaWZvcm0gdmVjNCB1X3ZjdENvbG9yO1xyXG51bmlmb3JtIHZlYzMgdV92Y3RDYW1lcmE7IC8vIG5lZWRlZCBmb3IgZm9nXHJcbnVuaWZvcm0gZmxvYXQgdV9mQWxwaGFDbGlwO1xyXG5cclxubGF5b3V0KHN0ZDE0MCkgdW5pZm9ybSBGb2cge1xyXG4gIGJvb2wgdV9iRm9nQWN0aXZlO1xyXG4gIGZsb2F0IHVfZkZvZ05lYXI7XHJcbiAgZmxvYXQgdV9mRm9nRmFyO1xyXG4gIGZsb2F0IGZvZ1BhZGRpbmc7IC8vIGFkZCBwYWRkaW5nIHRvIGFsaWduIHRvIDE2IGJ5dGVzXHJcbiAgdmVjNCB1X3ZjdEZvZ0NvbG9yO1xyXG59O1xyXG5cclxuaW4gdmVjMyB2X3ZjdFBvc2l0aW9uO1xyXG5pbiB2ZWM0IHZfdmN0Q29sb3I7XHJcblxyXG5sYXlvdXQobG9jYXRpb24gPSAwKSBvdXQgdmVjNCB2Y3RGcmFnO1xyXG5sYXlvdXQobG9jYXRpb24gPSAxKSBvdXQgdmVjNCB2Y3RGcmFnUG9zaXRpb247IC8vIFRPRE86IG1ha2UgdGhlc2Ugb3B0aW9uYWw/XHJcbmxheW91dChsb2NhdGlvbiA9IDIpIG91dCB2ZWM0IHZjdEZyYWdOb3JtYWw7XHJcblxyXG4jaWYgZGVmaW5lZChGTEFUKSB8fCBkZWZpbmVkKEdPVVJBVUQpIHx8IGRlZmluZWQoUEhPTkcpXHJcblxyXG4gIGluIHZlYzMgdl92Y3ROb3JtYWw7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKEZMQVQpXHJcblxyXG4gIGZsYXQgaW4gdmVjMyB2X3ZjdFBvc2l0aW9uRmxhdDtcclxuXHJcbiNlbmRpZlxyXG5cclxuI2lmIGRlZmluZWQoR09VUkFVRClcclxuXHJcbiAgdW5pZm9ybSBmbG9hdCB1X2ZNZXRhbGxpYztcclxuICBpbiB2ZWMzIHZfdmN0RGlmZnVzZTtcclxuICBpbiB2ZWMzIHZfdmN0U3BlY3VsYXI7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKFRPT04pXHJcblxyXG4gIHVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4VG9vbjtcclxuXHJcbiNlbmRpZlxyXG5cclxuI2lmIGRlZmluZWQoUEhPTkcpIHx8IGRlZmluZWQoRkxBVClcclxuXHJcbiAgdW5pZm9ybSBmbG9hdCB1X2ZEaWZmdXNlO1xyXG4gIHVuaWZvcm0gZmxvYXQgdV9mU3BlY3VsYXI7XHJcbiAgdW5pZm9ybSBmbG9hdCB1X2ZJbnRlbnNpdHk7XHJcbiAgdW5pZm9ybSBmbG9hdCB1X2ZNZXRhbGxpYztcclxuXHJcbiAgc3RydWN0IExpZ2h0IHtcclxuICAgIHZlYzQgdmN0Q29sb3I7XHJcbiAgICBtYXQ0IG10eFNoYXBlO1xyXG4gICAgbWF0NCBtdHhTaGFwZUludmVyc2U7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdWludCBNQVhfTElHSFRTX0RJUkVDVElPTkFMID0gMTV1O1xyXG4gIGNvbnN0IHVpbnQgTUFYX0xJR0hUU19QT0lOVCA9IDEwMHU7XHJcbiAgY29uc3QgdWludCBNQVhfTElHSFRTX1NQT1QgPSAxMDB1O1xyXG5cclxuICBsYXlvdXQoc3RkMTQwKSB1bmlmb3JtIExpZ2h0cyB7XHJcbiAgICB1aW50IHVfbkxpZ2h0c0RpcmVjdGlvbmFsO1xyXG4gICAgdWludCB1X25MaWdodHNQb2ludDtcclxuICAgIHVpbnQgdV9uTGlnaHRzU3BvdDtcclxuICAgIHVpbnQgbGlndGhzUGFkZGluZzsgLy8gQWRkIHBhZGRpbmcgdG8gYWxpZ24gdG8gMTYgYnl0ZXNcclxuICAgIExpZ2h0IHVfYW1iaWVudDtcclxuICAgIExpZ2h0IHVfZGlyZWN0aW9uYWxbTUFYX0xJR0hUU19ESVJFQ1RJT05BTF07XHJcbiAgICBMaWdodCB1X3BvaW50W01BWF9MSUdIVFNfUE9JTlRdO1xyXG4gICAgTGlnaHQgdV9zcG90W01BWF9MSUdIVFNfU1BPVF07XHJcbiAgfTtcclxuXHJcbiAgdm9pZCBpbGx1bWluYXRlRGlyZWN0ZWQodmVjMyBfdmN0RGlyZWN0aW9uLCB2ZWMzIF92Y3RWaWV3LCB2ZWMzIF92Y3ROb3JtYWwsIHZlYzMgX3ZjdENvbG9yLCBpbm91dCB2ZWMzIF92Y3REaWZmdXNlLCBpbm91dCB2ZWMzIF92Y3RTcGVjdWxhcikge1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb24gPSBub3JtYWxpemUoX3ZjdERpcmVjdGlvbik7XHJcbiAgICBmbG9hdCBmRGlmZnVzZSA9IC1kb3QoX3ZjdE5vcm1hbCwgdmN0RGlyZWN0aW9uKTtcclxuXHJcbiAgICAjaWYgZGVmaW5lZChUT09OKVxyXG4gICAgICBcclxuICAgICAgZkRpZmZ1c2UgPSB0ZXh0dXJlKHVfdGV4VG9vbiwgdmVjMihmRGlmZnVzZSwgMCkpLnI7XHJcblxyXG4gICAgI2VuZGlmXHJcblxyXG4gICAgaWYoZkRpZmZ1c2UgPiAwLjApIHtcclxuXHJcbiAgICAgIF92Y3REaWZmdXNlICs9IHVfZkRpZmZ1c2UgKiBmRGlmZnVzZSAqIF92Y3RDb2xvcjtcclxuXHJcbiAgICAgIGlmKHVfZlNwZWN1bGFyIDw9IDAuMClcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgIC8vQkxJTk4tUGhvbmcgU2hhZGluZ1xyXG4gICAgICB2ZWMzIGhhbGZ3YXlEaXIgPSBub3JtYWxpemUoLXZjdERpcmVjdGlvbiAtIF92Y3RWaWV3KTtcclxuICAgICAgZmxvYXQgZmFjdG9yID0gbWF4KGRvdCgtdmN0RGlyZWN0aW9uLCBfdmN0Tm9ybWFsKSwgMC4wKTsgLy9GYWN0b3IgZm9yIHNtb290aGluZyBvdXQgdHJhbnNpdGlvbiBmcm9tIHN1cmZhY2UgZmFjaW5nIHRoZSBsaWdodHNvdXJjZSB0byBzdXJmYWNlIGZhY2luZyBhd2F5IGZyb20gdGhlIGxpZ2h0c291cmNlXHJcbiAgICAgIGZhY3RvciA9IDEuMCAtIChwb3coZmFjdG9yIC0gMS4wLCA4LjApKTsgICAgICAgICAgICAgICAgIC8vVGhlIGZhY3RvciBpcyBhbHRlcmVkIGluIG9yZGVyIHRvIGNsZWFybHkgc2VlIHRoZSBzcGVjdWxhciBoaWdobGlnaHQgZXZlbiBhdCBzdGVlcCBhbmdsZXMsIHdoaWxlIHN0aWxsIHByZXZlbnRpbmcgYXJ0aWZhY3RzXHJcblxyXG4gICAgICBmbG9hdCBmU3BlY3VsYXIgPSBwb3cobWF4KGRvdChfdmN0Tm9ybWFsLCBoYWxmd2F5RGlyKSwgMC4wKSwgZXhwMih1X2ZTcGVjdWxhciAqIDUuMCkpICogZmFjdG9yOyBcclxuXHJcbiAgICAgICNpZiBkZWZpbmVkKFRPT04pXHJcbiAgICAgICAgXHJcbiAgICAgICAgZlNwZWN1bGFyID0gdGV4dHVyZSh1X3RleFRvb24sIHZlYzIoZlNwZWN1bGFyLCAwLjApKS5nICogZkRpZmZ1c2U7XHJcblxyXG4gICAgICAjZW5kaWZcclxuXHJcbiAgICAgIF92Y3RTcGVjdWxhciArPSBmU3BlY3VsYXIgKiB1X2ZTcGVjdWxhciAqIHVfZkludGVuc2l0eSAqIF92Y3RDb2xvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKFRFWFRVUkUpIHx8IGRlZmluZWQoTUFUQ0FQKVxyXG5cclxuICB1bmlmb3JtIHNhbXBsZXIyRCB1X3RleENvbG9yO1xyXG4gIGluIHZlYzIgdl92Y3RUZXh0dXJlO1xyXG5cclxuI2VuZGlmXHJcblxyXG4jaWYgZGVmaW5lZChOT1JNQUxNQVApXHJcblxyXG4gIHVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4Tm9ybWFsO1xyXG4gIGluIHZlYzMgdl92Y3RUYW5nZW50O1xyXG4gIGluIHZlYzMgdl92Y3RCaXRhbmdlbnQ7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKFBBUlRJQ0xFKVxyXG5cclxuICB1bmlmb3JtIGludCB1X2lCbGVuZE1vZGU7XHJcblxyXG4jZW5kaWZcclxuXHJcbmZsb2F0IGdldEZvZyh2ZWMzIF92Y3RQb3NpdGlvbikge1xyXG4gIGZsb2F0IGZEaXN0YW5jZSA9IGxlbmd0aChfdmN0UG9zaXRpb24gLSB1X3ZjdENhbWVyYSk7IC8vIG1heWJlIHVzZSB6LWRlcHRoIGluc3RlYWQgb2YgZXVjbGlkZWFuIGRlcHRoXHJcbiAgZmxvYXQgZkZvZyA9IGNsYW1wKChmRGlzdGFuY2UgLSB1X2ZGb2dOZWFyKSAvICh1X2ZGb2dGYXIgLSB1X2ZGb2dOZWFyKSwgMC4wLCAxLjApO1xyXG4gIGZGb2cgPSAtcG93KGZGb2csIDIuMCkgKyAoMi4wICogZkZvZyk7IC8vIGxldHMgZm9nIGFwcGVhciBxdWlja2VyIGFuZCBmYWxsIG9mZiBzbG93ZXIgcmVzdWx0cyBpbiBhIG1vcmUgZ3JhZHVhbCBmYWxsb2ZmXHJcbiAgcmV0dXJuIGZGb2cgKiB1X3ZjdEZvZ0NvbG9yLmE7XHJcbn1cclxuXHJcbnZvaWQgbWFpbigpIHtcclxuXHJcbiAgI2lmIGRlZmluZWQoRkxBVClcclxuXHJcbiAgICB2ZWMzIHZjdEZkeCA9IGRGZHgodl92Y3RQb3NpdGlvbik7XHJcbiAgICB2ZWMzIHZjdEZkeSA9IGRGZHkodl92Y3RQb3NpdGlvbik7XHJcbiAgICB2ZWMzIHZjdE5vcm1hbCA9IG5vcm1hbGl6ZShjcm9zcyh2Y3RGZHgsIHZjdEZkeSkpO1xyXG4gICAgdmVjMyB2Y3RWaWV3ID0gbm9ybWFsaXplKHZfdmN0UG9zaXRpb25GbGF0IC0gdV92Y3RDYW1lcmEpO1xyXG4gICAgdmVjMyB2Y3RQb3NpdGlvbiA9IHZfdmN0UG9zaXRpb25GbGF0O1xyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIChkZWZpbmVkKFBIT05HKSB8fCBkZWZpbmVkKEdPVVJBVUQpKSAmJiAhZGVmaW5lZChOT1JNQUxNQVApXHJcblxyXG4gICAgdmVjMyB2Y3ROb3JtYWwgPSBub3JtYWxpemUodl92Y3ROb3JtYWwpO1xyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoUEhPTkcpXHJcblxyXG4gICAgdmVjMyB2Y3RWaWV3ID0gbm9ybWFsaXplKHZfdmN0UG9zaXRpb24gLSB1X3ZjdENhbWVyYSk7XHJcbiAgICB2ZWMzIHZjdFBvc2l0aW9uID0gdl92Y3RQb3NpdGlvbjtcclxuXHJcbiAgI2VuZGlmXHJcblxyXG4gICNpZiBkZWZpbmVkKE5PUk1BTE1BUClcclxuXHJcbiAgICBtYXQzIG10eFRCTiA9IG1hdDMobm9ybWFsaXplKHZfdmN0VGFuZ2VudCksIG5vcm1hbGl6ZSh2X3ZjdEJpdGFuZ2VudCksIG5vcm1hbGl6ZSh2X3ZjdE5vcm1hbCkpO1xyXG4gICAgdmVjMyB2Y3ROb3JtYWwgPSB0ZXh0dXJlKHVfdGV4Tm9ybWFsLCB2X3ZjdFRleHR1cmUpLnh5eiAqIDIuMCAtIDEuMDtcclxuICAgIHZjdE5vcm1hbCA9IG5vcm1hbGl6ZShtdHhUQk4gKiB2Y3ROb3JtYWwpO1xyXG5cclxuICAjZW5kaWZcclxuICBcclxuICAjaWYgZGVmaW5lZChGTEFUKSB8fCBkZWZpbmVkKFBIT05HKVxyXG5cclxuICAgIHZlYzMgdmN0RGlmZnVzZSA9IHVfZkRpZmZ1c2UgKiB1X2FtYmllbnQudmN0Q29sb3IucmdiO1xyXG4gICAgdmVjMyB2Y3RTcGVjdWxhciA9IHZlYzMoMCwgMCwgMCk7XHJcblxyXG4gICAgLy8gZGlyZWN0aW9uYWwgbGlnaHRzXHJcbiAgICBmb3IodWludCBpID0gMHU7IGkgPCB1X25MaWdodHNEaXJlY3Rpb25hbDsgaSsrKSB7XHJcbiAgICAgIHZlYzMgdmN0RGlyZWN0aW9uID0gdmVjMyh1X2RpcmVjdGlvbmFsW2ldLm10eFNoYXBlICogdmVjNCgwLjAsIDAuMCwgMS4wLCAxLjApKTtcclxuICAgICAgaWxsdW1pbmF0ZURpcmVjdGVkKHZjdERpcmVjdGlvbiwgdmN0VmlldywgdmN0Tm9ybWFsLCB1X2RpcmVjdGlvbmFsW2ldLnZjdENvbG9yLnJnYiwgdmN0RGlmZnVzZSwgdmN0U3BlY3VsYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBvaW50IGxpZ2h0c1xyXG4gICAgZm9yKHVpbnQgaSA9IDB1OyBpIDwgdV9uTGlnaHRzUG9pbnQ7IGkrKykge1xyXG4gICAgICB2ZWMzIHZjdFBvc2l0aW9uTGlnaHQgPSB2ZWMzKHVfcG9pbnRbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCkpO1xyXG4gICAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZjdFBvc2l0aW9uIC0gdmN0UG9zaXRpb25MaWdodDtcclxuICAgICAgZmxvYXQgZkludGVuc2l0eSA9IDEuMCAtIGxlbmd0aChtYXQzKHVfcG9pbnRbaV0ubXR4U2hhcGVJbnZlcnNlKSAqIHZjdERpcmVjdGlvbik7XHJcbiAgICAgIGlmKGZJbnRlbnNpdHkgPCAwLjApXHJcbiAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICBpbGx1bWluYXRlRGlyZWN0ZWQodmN0RGlyZWN0aW9uLCB2Y3RWaWV3LCB2Y3ROb3JtYWwsIHVfcG9pbnRbaV0udmN0Q29sb3IucmdiICogZkludGVuc2l0eSwgdmN0RGlmZnVzZSwgdmN0U3BlY3VsYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNwb3QgbGlnaHRzXHJcbiAgICBmb3IodWludCBpID0gMHU7IGkgPCB1X25MaWdodHNTcG90OyBpKyspIHtcclxuICAgICAgdmVjMyB2Y3RQb3NpdGlvbkxpZ2h0ID0gdmVjMyh1X3Nwb3RbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCkpO1xyXG4gICAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZjdFBvc2l0aW9uIC0gdmN0UG9zaXRpb25MaWdodDtcclxuICAgICAgdmVjMyB2Y3REaXJlY3Rpb25JbnZlcnRlZCA9IG1hdDModV9zcG90W2ldLm10eFNoYXBlSW52ZXJzZSkgKiB2Y3REaXJlY3Rpb247XHJcbiAgICAgIGlmKHZjdERpcmVjdGlvbkludmVydGVkLnogPD0gMC4wKVxyXG4gICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgZmxvYXQgZkludGVuc2l0eSA9IDEuMCAtIG1pbigxLjAsIDIuMCAqIGxlbmd0aCh2Y3REaXJlY3Rpb25JbnZlcnRlZC54eSkgLyB2Y3REaXJlY3Rpb25JbnZlcnRlZC56KTsgICAgLy9Db25lc2hhcGUgdGhhdCBpcyBicmlnaHRlc3QgaW4gdGhlIGNlbnRlci4gUG9zc2libGUgVE9ETzogXCJWYXJpYWJsZSBTcG90bGlnaHRzb2Z0bmVzc1wiXHJcbiAgICAgIGZJbnRlbnNpdHkgKj0gMS4wIC0gcG93KHZjdERpcmVjdGlvbkludmVydGVkLnosIDIuMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUHJldmVudHMgaGFyc2ggbGlnaHRpbmcgYXJ0aWZhY3RzIGF0IGJvdW5kYXJ5IG9mIHRoZSBnaXZlbiBzcG90bGlnaHRcclxuICAgICAgaWYoZkludGVuc2l0eSA8IDAuMClcclxuICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgIGlsbHVtaW5hdGVEaXJlY3RlZCh2Y3REaXJlY3Rpb24sIHZjdFZpZXcsIHZjdE5vcm1hbCwgdV9zcG90W2ldLnZjdENvbG9yLnJnYiAqIGZJbnRlbnNpdHksIHZjdERpZmZ1c2UsIHZjdFNwZWN1bGFyKTtcclxuICAgIH1cclxuXHJcbiAgI2VuZGlmXHJcblxyXG4gIHZlYzQgdmN0Q29sb3IgPSB1X3ZjdENvbG9yICogdl92Y3RDb2xvcjtcclxuXHJcbiAgI2lmIGRlZmluZWQoR09VUkFVRClcclxuXHJcbiAgICB2ZWMzIHZjdERpZmZ1c2UgPSB2X3ZjdERpZmZ1c2U7XHJcbiAgICB2ZWMzIHZjdFNwZWN1bGFyID0gdl92Y3RTcGVjdWxhcjtcclxuXHJcbiAgI2VuZGlmXHJcblxyXG4gICNpZiBkZWZpbmVkKEZMQVQpIHx8IGRlZmluZWQoR09VUkFVRCkgfHwgZGVmaW5lZChQSE9ORylcclxuXHJcbiAgICB2Y3RGcmFnLnJnYiA9IHZjdERpZmZ1c2UgKyB2Y3RTcGVjdWxhciAqIHVfZk1ldGFsbGljO1xyXG4gICAgdmN0RnJhZy5hID0gMS4wO1xyXG5cclxuICAjZWxzZVxyXG5cclxuICAgIC8vIE1JTklNQUw6IHNldCB0aGUgYmFzZSBjb2xvclxyXG4gICAgdmN0RnJhZyA9IHZjdENvbG9yO1xyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoVEVYVFVSRSkgfHwgZGVmaW5lZChNQVRDQVApXHJcbiAgICBcclxuICAgIC8vIFRFWFRVUkU6IG11bHRpcGx5IHdpdGggdGV4ZWwgY29sb3JcclxuICAgIHZlYzQgdmN0Q29sb3JUZXh0dXJlID0gdGV4dHVyZSh1X3RleENvbG9yLCB2X3ZjdFRleHR1cmUpOyAvLyBoYXMgcHJlbXVsdGlwbGllZCBhbHBoYSBieSB3ZWJnbCBmb3IgY29ycmVjdCBmaWx0ZXJpbmdcclxuICAgIGlmICh2Y3RDb2xvclRleHR1cmUuYSA+IDAuMCkgLy8gdW5wcmVtdWx0aXBseSBhbHBoYVxyXG4gICAgICB2Y3RDb2xvclRleHR1cmUucmdiIC89IHZjdENvbG9yVGV4dHVyZS5hOyBcclxuICAgIHZjdEZyYWcgKj0gdmN0Q29sb3JUZXh0dXJlO1xyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoRkxBVCkgfHwgZGVmaW5lZChHT1VSQVVEKSB8fCBkZWZpbmVkKFBIT05HKVxyXG5cclxuICAgIHZjdEZyYWcgKj0gdmN0Q29sb3I7XHJcbiAgICB2Y3RGcmFnLnJnYiArPSB2Y3RTcGVjdWxhciAqICgxLjAgLSB1X2ZNZXRhbGxpYyk7XHJcblxyXG4gICAgdmN0RnJhZ1Bvc2l0aW9uID0gdmVjNCh2X3ZjdFBvc2l0aW9uLCAxLjApO1xyXG4gICAgdmN0RnJhZ05vcm1hbCA9IHZlYzQodmN0Tm9ybWFsLCAxLjApO1xyXG4gIFxyXG4gICNlbmRpZlxyXG5cclxuICAjaWYgIWRlZmluZWQoUEhPTkcpICYmICFkZWZpbmVkKEZMQVQpICYmICFkZWZpbmVkKEdPVVJBVUQpIC8vIE1JTklNQUxcclxuXHJcbiAgICB2Y3RGcmFnUG9zaXRpb24gPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCk7IC8vICgwLCAwLCAwKSB3aWxsIHRyZWF0IG9jY2x1ZGVycyBhcyBub24gZXhpc3RpbmcgaW4gc3Nhb1xyXG4gICAgdmN0RnJhZ05vcm1hbCA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTsgLy8gKDAsIDAsIDApIG5vcm1hbCB3aWxsIHlpZWxkIG5vdCBvY2NsdXNpb24gaW4gc3Nhb1xyXG4gIFxyXG4gICNlbmRpZlxyXG5cclxuICAvLyBkaXNjYXJkIHBpeGVsIGFsbHRvZ2V0aGVyIHdoZW4gdHJhbnNwYXJlbnQ6IGRvbid0IHNob3cgaW4gWi1CdWZmZXJcclxuICBpZih2Y3RGcmFnLmEgPCB1X2ZBbHBoYUNsaXApXHJcbiAgICBkaXNjYXJkO1xyXG5cclxuICBpZiAodV9iRm9nQWN0aXZlKSB7XHJcbiAgICBmbG9hdCBmRm9nID0gZ2V0Rm9nKHZfdmN0UG9zaXRpb24pO1xyXG4gICAgdmN0RnJhZy5yZ2IgPSBtaXgodmN0RnJhZy5yZ2IsIHVfdmN0Rm9nQ29sb3IucmdiLCBmRm9nKTtcclxuXHJcbiAgICAjaWYgZGVmaW5lZChQQVJUSUNMRSlcclxuXHJcbiAgICAgIGlmICh1X2lCbGVuZE1vZGUgPT0gMiB8fCB1X2lCbGVuZE1vZGUgPT0gMyB8fCB1X2lCbGVuZE1vZGUgPT0gNCkgIC8vIGZvciBibGVuZCBhZGRpdGl2ZSwgc3VidHJhY3RpdmUsIG1vZHVsYXRlXHJcbiAgICAgICAgdmN0RnJhZy5hID0gbWl4KHZjdEZyYWcuYSwgMC4wLCBmRm9nKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhZGUgb3V0IHBhcnRpY2xlIHdoZW4gaW4gZm9nIHRvIG1ha2UgaXQgZGlzYXBwZWFyIGNvbXBsZXRlbHlcclxuXHJcbiAgICAjZW5kaWZcclxuICB9XHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJVbml2ZXJzYWwudmVydFwiXSA9IC8qZ2xzbCovIGAjdmVyc2lvbiAzMDAgZXNcclxuLyoqXHJcbiogVW5pdmVyc2FsIFNoYWRlciBhcyBiYXNlIGZvciBtYW55IG90aGVycy4gQ29udHJvbGxlZCBieSBjb21waWxlciBkaXJlY3RpdmVzXHJcbiogQGF1dGhvcnMgMjAyMSwgTHVpcyBLZWNrLCBIRlUsIDIwMjEgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMSB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4qL1xyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbnVuaWZvcm0gbWF0NCB1X210eE1lc2hUb1dvcmxkOyAvLyBuZWVkZWQgZm9yIEZPR1xyXG51bmlmb3JtIG1hdDQgdV9tdHhNZXNoVG9WaWV3O1xyXG5cclxuaW4gdmVjMyBhX3ZjdFBvc2l0aW9uO1xyXG5pbiB2ZWM0IGFfdmN0Q29sb3I7IC8vIFRPRE86IHRoaW5rIGFib3V0IG1ha2luZyB2ZXJ0ZXggY29sb3Igb3B0aW9uYWxcclxuXHJcbm91dCB2ZWMzIHZfdmN0UG9zaXRpb247XHJcbm91dCB2ZWM0IHZfdmN0Q29sb3I7XHJcblxyXG4jaWYgZGVmaW5lZChGTEFUKSB8fCBkZWZpbmVkKEdPVVJBVUQpIHx8IGRlZmluZWQoUEhPTkcpIHx8IGRlZmluZWQoUEFSVElDTEUpIHx8IGRlZmluZWQoTUFUQ0FQKVxyXG5cclxuICB1bmlmb3JtIHZlYzMgdV92Y3RDYW1lcmE7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKEZMQVQpIHx8IGRlZmluZWQoR09VUkFVRCkgfHwgZGVmaW5lZChQSE9ORylcclxuXHJcbiAgdW5pZm9ybSBtYXQ0IHVfbXR4Tm9ybWFsTWVzaFRvV29ybGQ7XHJcblxyXG4gIGluIHZlYzMgYV92Y3ROb3JtYWw7XHJcbiAgb3V0IHZlYzMgdl92Y3ROb3JtYWw7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKEZMQVQpXHJcblxyXG4gIGZsYXQgb3V0IHZlYzMgdl92Y3RQb3NpdGlvbkZsYXQ7XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKEdPVVJBVUQpXHJcblxyXG4gIHVuaWZvcm0gZmxvYXQgdV9mRGlmZnVzZTtcclxuICB1bmlmb3JtIGZsb2F0IHVfZlNwZWN1bGFyO1xyXG4gIHVuaWZvcm0gZmxvYXQgdV9mSW50ZW5zaXR5O1xyXG5cclxuICBvdXQgdmVjMyB2X3ZjdERpZmZ1c2U7XHJcbiAgb3V0IHZlYzMgdl92Y3RTcGVjdWxhcjtcclxuXHJcbiAgc3RydWN0IExpZ2h0IHtcclxuICAgIHZlYzQgdmN0Q29sb3I7XHJcbiAgICBtYXQ0IG10eFNoYXBlO1xyXG4gICAgbWF0NCBtdHhTaGFwZUludmVyc2U7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdWludCBNQVhfTElHSFRTX0RJUkVDVElPTkFMID0gMTV1O1xyXG4gIGNvbnN0IHVpbnQgTUFYX0xJR0hUU19QT0lOVCA9IDEwMHU7XHJcbiAgY29uc3QgdWludCBNQVhfTElHSFRTX1NQT1QgPSAxMDB1O1xyXG5cclxuICBsYXlvdXQoc3RkMTQwKSB1bmlmb3JtIExpZ2h0cyB7XHJcbiAgICB1aW50IHVfbkxpZ2h0c0RpcmVjdGlvbmFsO1xyXG4gICAgdWludCB1X25MaWdodHNQb2ludDtcclxuICAgIHVpbnQgdV9uTGlnaHRzU3BvdDtcclxuICAgIHVpbnQgcGFkZGluZzsgLy8gQWRkIHBhZGRpbmcgdG8gYWxpZ24gdG8gMTYgYnl0ZXNcclxuICAgIExpZ2h0IHVfYW1iaWVudDtcclxuICAgIExpZ2h0IHVfZGlyZWN0aW9uYWxbTUFYX0xJR0hUU19ESVJFQ1RJT05BTF07XHJcbiAgICBMaWdodCB1X3BvaW50W01BWF9MSUdIVFNfUE9JTlRdO1xyXG4gICAgTGlnaHQgdV9zcG90W01BWF9MSUdIVFNfU1BPVF07XHJcbiAgfTtcclxuXHJcbiAgdm9pZCBpbGx1bWluYXRlRGlyZWN0ZWQodmVjMyBfdmN0RGlyZWN0aW9uLCB2ZWMzIF92Y3RWaWV3LCB2ZWMzIF92Y3ROb3JtYWwsIHZlYzMgX3ZjdENvbG9yLCBpbm91dCB2ZWMzIF92Y3REaWZmdXNlLCBpbm91dCB2ZWMzIF92Y3RTcGVjdWxhcikge1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb24gPSBub3JtYWxpemUoX3ZjdERpcmVjdGlvbik7XHJcbiAgICBmbG9hdCBmSWxsdW1pbmF0aW9uID0gLWRvdChfdmN0Tm9ybWFsLCB2Y3REaXJlY3Rpb24pO1xyXG4gICAgaWYoZklsbHVtaW5hdGlvbiA+IDAuMCkge1xyXG4gICAgICBfdmN0RGlmZnVzZSArPSB1X2ZEaWZmdXNlICogZklsbHVtaW5hdGlvbiAqIF92Y3RDb2xvcjtcclxuXHJcbiAgICAgIGlmKHVfZlNwZWN1bGFyIDw9IDAuMClcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAvL0JMSU5OXHJcbiAgICAgIHZlYzMgaGFsZndheURpciA9IG5vcm1hbGl6ZSgtdmN0RGlyZWN0aW9uIC0gX3ZjdFZpZXcpO1xyXG4gICAgICBmbG9hdCBmYWN0b3IgPSBtYXgoZG90KC12Y3REaXJlY3Rpb24sIF92Y3ROb3JtYWwpLCAwLjApOyAvL0ZhY3RvciBmb3Igc21vb3RoaW5nIG91dCB0cmFuc2l0aW9uIGZyb20gc3VyZmFjZSBmYWNpbmcgdGhlIGxpZ2h0c291cmNlIHRvIHN1cmZhY2UgZmFjaW5nIGF3YXkgZnJvbSB0aGUgbGlnaHRzb3VyY2VcclxuICAgICAgZmFjdG9yID0gMS4wIC0gKHBvdyhmYWN0b3IgLSAxLjAsIDguMCkpOyAgICAgICAgICAgICAgICAgLy9UaGUgZmFjdG9yIGlzIGFsdGVyZWQgaW4gb3JkZXIgdG8gY2xlYXJseSBzZWUgdGhlIHNwZWN1bGFyIGhpZ2hsaWdodCBldmVuIGF0IHN0ZWVwIGFuZ2xlcywgd2hpbGUgc3RpbGwgcHJldmVudGluZyBhcnRpZmFjdHNcclxuXHJcbiAgICAgIF92Y3RTcGVjdWxhciArPSBwb3cobWF4KGRvdChfdmN0Tm9ybWFsLCBoYWxmd2F5RGlyKSwgMC4wKSwgZXhwMih1X2ZTcGVjdWxhciAqIDUuMCkpICogdV9mU3BlY3VsYXIgKiB1X2ZJbnRlbnNpdHkgKiBmYWN0b3IgKiBfdmN0Q29sb3I7XHJcblxyXG4gICAgICAvL1BIT05HIChvbGQpXHJcbiAgICAgIC8vIHZlYzMgdmN0UmVmbGVjdGlvbiA9IG5vcm1hbGl6ZShyZWZsZWN0KC12Y3REaXJlY3Rpb24sIF92Y3ROb3JtYWwpKTtcclxuICAgICAgLy8gZmxvYXQgZkhpdENhbWVyYSA9IGRvdCh2Y3RSZWZsZWN0aW9uLCBfdmN0Vmlldyk7XHJcbiAgICAgIC8vIF92Y3RTcGVjdWxhciArPSBwb3cobWF4KGZIaXRDYW1lcmEsIDAuMCksIHVfZlNwZWN1bGFyICogMTAuMCkgKiB1X2ZTcGVjdWxhciAqIF92Y3RDb2xvcjsgLy8gMTAuMCA9IG1hZ2ljIG51bWJlciwgbG9va3MgZ29vZC4uLiBcclxuICAgIH1cclxuICB9XHJcblxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKFRFWFRVUkUpIHx8IGRlZmluZWQoTk9STUFMTUFQKVxyXG5cclxuICB1bmlmb3JtIG1hdDMgdV9tdHhQaXZvdDtcclxuXHJcbiAgaW4gdmVjMiBhX3ZjdFRleHR1cmU7XHJcbiAgb3V0IHZlYzIgdl92Y3RUZXh0dXJlO1xyXG5cclxuI2VuZGlmXHJcblxyXG4jaWYgZGVmaW5lZChOT1JNQUxNQVApXHJcblxyXG4gIGluIHZlYzQgYV92Y3RUYW5nZW50O1xyXG4gIG91dCB2ZWMzIHZfdmN0VGFuZ2VudDtcclxuICBvdXQgdmVjMyB2X3ZjdEJpdGFuZ2VudDtcclxuXHJcbiNlbmRpZlxyXG5cclxuLy8gTUFUQ0FQOiBvZmZlciBidWZmZXJzIGZvciBVVnMgYW5kIHBpdm90IG1hdHJpeFxyXG4jaWYgZGVmaW5lZChNQVRDQVApIC8vIE1hdENhcC1zaGFkZXIgZ2VuZXJhdGVzIHRleHR1cmUgY29vcmRpbmF0ZXMgZnJvbSBzdXJmYWNlIG5vcm1hbHNcclxuICBcclxuICB1bmlmb3JtIG1hdDQgdV9tdHhXb3JsZFRvQ2FtZXJhO1xyXG4gIHVuaWZvcm0gbWF0NCB1X210eE5vcm1hbE1lc2hUb1dvcmxkO1xyXG5cclxuICBpbiB2ZWMzIGFfdmN0Tm9ybWFsO1xyXG4gIG91dCB2ZWMyIHZfdmN0VGV4dHVyZTtcclxuXHJcbiNlbmRpZlxyXG5cclxuI2lmIGRlZmluZWQoU0tJTilcclxuXHJcbiAgLy8gQm9uZXMgaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9ibG9iL2Rldi9zcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvc2tpbm5pbmdfcGFyc192ZXJ0ZXguZ2xzbC5qc1xyXG4gIHVuaWZvcm0gbWF0NCB1X210eFdvcmxkVG9WaWV3O1xyXG4gIGluIHV2ZWM0IGFfdmN0Qm9uZXM7XHJcbiAgaW4gdmVjNCBhX3ZjdFdlaWdodHM7XHJcblxyXG4gIGNvbnN0IHVpbnQgTUFYX0JPTkVTID0gMjU2dTsgLy8gQ0FVVElPTjogdGhpcyBudW1iZXIgbXVzdCBiZSB0aGUgc2FtZSBhcyBpbiBSZW5kZXJJbmplY3RvclNrZWxldG9uSW5zdGFuY2Ugd2hlcmUgdGhlIGNvcnJlc3BvbmRpbmcgYnVmZmVycyBhcmUgY3JlYXRlZFxyXG4gIGxheW91dChzdGQxNDApIHVuaWZvcm0gU2tpbiB7XHJcbiAgICBtYXQ0IHVfbXR4Qm9uZXNbTUFYX0JPTkVTXTtcclxuICB9O1xyXG5cclxuI2VuZGlmXHJcblxyXG4jaWYgZGVmaW5lZChQQVJUSUNMRSlcclxuXHJcbiAgdW5pZm9ybSBtYXQ0IHVfbXR4V29ybGRUb1ZpZXc7XHJcbiAgdW5pZm9ybSBmbG9hdCB1X2ZQYXJ0aWNsZVN5c3RlbUR1cmF0aW9uO1xyXG4gIHVuaWZvcm0gZmxvYXQgdV9mUGFydGljbGVTeXN0ZW1TaXplO1xyXG4gIHVuaWZvcm0gZmxvYXQgdV9mUGFydGljbGVTeXN0ZW1UaW1lO1xyXG4gIHVuaWZvcm0gc2FtcGxlcjJEIHVfcGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzO1xyXG4gIHVuaWZvcm0gYm9vbCB1X2JQYXJ0aWNsZVN5c3RlbUZhY2VDYW1lcmE7XHJcbiAgdW5pZm9ybSBib29sIHVfYlBhcnRpY2xlU3lzdGVtUmVzdHJpY3Q7XHJcblxyXG4gIG1hdDQgbG9va0F0KHZlYzMgX3ZjdFRyYW5zbGF0aW9uLCB2ZWMzIF92Y3RUYXJnZXQpIHtcclxuICAgIHZlYzMgdmN0VXAgPSB2ZWMzKDAuMCwgMS4wLCAwLjApO1xyXG4gICAgdmVjMyB6QXhpcyA9IG5vcm1hbGl6ZShfdmN0VGFyZ2V0IC0gX3ZjdFRyYW5zbGF0aW9uKTtcclxuICAgIHZlYzMgeEF4aXMgPSBub3JtYWxpemUoY3Jvc3ModmN0VXAsIHpBeGlzKSk7XHJcbiAgICB2ZWMzIHlBeGlzID0gdV9iUGFydGljbGVTeXN0ZW1SZXN0cmljdCA/IHZjdFVwIDogbm9ybWFsaXplKGNyb3NzKHpBeGlzLCB4QXhpcykpO1xyXG4gICAgekF4aXMgPSB1X2JQYXJ0aWNsZVN5c3RlbVJlc3RyaWN0ID8gbm9ybWFsaXplKGNyb3NzKHhBeGlzLCB2Y3RVcCkpIDogekF4aXM7XHJcblxyXG4gICAgcmV0dXJuIG1hdDQoeEF4aXMueCwgeEF4aXMueSwgeEF4aXMueiwgMC4wLCB5QXhpcy54LCB5QXhpcy55LCB5QXhpcy56LCAwLjAsIHpBeGlzLngsIHpBeGlzLnksIHpBeGlzLnosIDAuMCwgX3ZjdFRyYW5zbGF0aW9uLngsIF92Y3RUcmFuc2xhdGlvbi55LCBfdmN0VHJhbnNsYXRpb24ueiwgMS4wKTtcclxuICB9XHJcblxyXG4gIGZsb2F0IGZldGNoUmFuZG9tTnVtYmVyKGludCBfaUluZGV4LCBpbnQgX2lQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNTaXplLCBpbnQgX2lQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNMZW5ndGgpIHtcclxuICAgIF9pSW5kZXggPSBfaUluZGV4ICUgX2lQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNMZW5ndGg7XHJcbiAgICByZXR1cm4gdGV4ZWxGZXRjaCh1X3BhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVycywgaXZlYzIoX2lJbmRleCAlIF9pUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzU2l6ZSwgX2lJbmRleCAvIF9pUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzU2l6ZSksIDApLnI7XHJcbiAgfVxyXG5cclxuI2VuZGlmXHJcblxyXG52b2lkIG1haW4oKSB7XHJcblxyXG4gIHZlYzQgdmN0UG9zaXRpb24gPSB2ZWM0KGFfdmN0UG9zaXRpb24sIDEuMCk7XHJcbiAgbWF0NCBtdHhNZXNoVG9Xb3JsZCA9IHVfbXR4TWVzaFRvV29ybGQ7XHJcbiAgbWF0NCBtdHhNZXNoVG9WaWV3ID0gdV9tdHhNZXNoVG9WaWV3O1xyXG5cclxuICAjaWYgZGVmaW5lZChGTEFUKSB8fCBkZWZpbmVkKEdPVVJBVUQpIHx8IGRlZmluZWQoUEhPTkcpIC8vIG9ubHkgdGhlc2Ugd29yayB3aXRoIHBhcnRpY2xlIGFuZCBza2lubmluZ1xyXG5cclxuICAgIG1hdDQgbXR4Tm9ybWFsTWVzaFRvV29ybGQgPSB1X210eE5vcm1hbE1lc2hUb1dvcmxkO1xyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoUEFSVElDTEUpXHJcbiAgXHJcbiAgICBmbG9hdCBmUGFydGljbGVJZCA9IGZsb2F0KGdsX0luc3RhbmNlSUQpO1xyXG4gICAgaW50IGlQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNTaXplID0gdGV4dHVyZVNpemUodV9wYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnMsIDApLng7IC8vIHRoZSBkaW1lbnNpb24gb2YgdGhlIHF1YWRyYXRpYyB0ZXh0dXJlXHJcbiAgICBpbnQgaVBhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVyc0xlbmd0aCA9IGlQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNTaXplICogaVBhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVyc1NpemU7IC8vIHRoZSB0b3RhbCBudW1iZXIgb2YgdGV4ZWxzIGluIHRoZSB0ZXh0dXJlXHJcbiAgICAvKiR2YXJpYWJsZXMqL1xyXG4gICAgLyokbXR4TG9jYWwqL1xyXG4gICAgLyokbXR4V29ybGQqL1xyXG4gICAgbXR4TWVzaFRvV29ybGQgPSAvKiRtdHhXb3JsZCovIG10eE1lc2hUb1dvcmxkIC8qJG10eExvY2FsKi87XHJcbiAgICBpZih1X2JQYXJ0aWNsZVN5c3RlbUZhY2VDYW1lcmEpIG10eE1lc2hUb1dvcmxkID0gbG9va0F0KHZlYzMobXR4TWVzaFRvV29ybGRbM11bMF0sIG10eE1lc2hUb1dvcmxkWzNdWzFdLCBtdHhNZXNoVG9Xb3JsZFszXVsyXSksIHVfdmN0Q2FtZXJhKSAqXHJcbiAgICAgIG1hdDQobGVuZ3RoKHZlYzMobXR4TWVzaFRvV29ybGRbMF1bMF0sIG10eE1lc2hUb1dvcmxkWzFdWzBdLCBtdHhNZXNoVG9Xb3JsZFsyXVswXSkpLCAwLjAsIDAuMCwgMC4wLCAwLjAsIGxlbmd0aCh2ZWMzKG10eE1lc2hUb1dvcmxkWzBdWzFdLCBtdHhNZXNoVG9Xb3JsZFsxXVsxXSwgbXR4TWVzaFRvV29ybGRbMl1bMV0pKSwgMC4wLCAwLjAsIDAuMCwgMC4wLCBsZW5ndGgodmVjMyhtdHhNZXNoVG9Xb3JsZFswXVsyXSwgbXR4TWVzaFRvV29ybGRbMV1bMl0sIG10eE1lc2hUb1dvcmxkWzJdWzJdKSksIDAuMCwgMC4wLCAwLjAsIDAuMCwgMS4wKTtcclxuICAgIG10eE1lc2hUb1ZpZXcgPSB1X210eFdvcmxkVG9WaWV3ICogbXR4TWVzaFRvV29ybGQ7XHJcblxyXG4gICAgI2lmIGRlZmluZWQoRkxBVCkgfHwgZGVmaW5lZChHT1VSQVVEKSB8fCBkZWZpbmVkKFBIT05HKVxyXG5cclxuICAgICAgbXR4Tm9ybWFsTWVzaFRvV29ybGQgPSB0cmFuc3Bvc2UoaW52ZXJzZShtdHhNZXNoVG9Xb3JsZCkpO1xyXG5cclxuICAgICNlbmRpZlxyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoU0tJTilcclxuXHJcbiAgICBtdHhNZXNoVG9Xb3JsZCA9IGFfdmN0V2VpZ2h0cy54ICogdV9tdHhCb25lc1thX3ZjdEJvbmVzLnhdICtcclxuICAgICAgYV92Y3RXZWlnaHRzLnkgKiB1X210eEJvbmVzW2FfdmN0Qm9uZXMueV0gK1xyXG4gICAgICBhX3ZjdFdlaWdodHMueiAqIHVfbXR4Qm9uZXNbYV92Y3RCb25lcy56XSArXHJcbiAgICAgIGFfdmN0V2VpZ2h0cy53ICogdV9tdHhCb25lc1thX3ZjdEJvbmVzLnddO1xyXG5cclxuICAgIG10eE1lc2hUb1ZpZXcgPSB1X210eFdvcmxkVG9WaWV3ICogbXR4TWVzaFRvV29ybGQ7XHJcblxyXG4gICAgI2lmIGRlZmluZWQoRkxBVCkgfHwgZGVmaW5lZChHT1VSQVVEKSB8fCBkZWZpbmVkKFBIT05HKVxyXG5cclxuICAgICAgbXR4Tm9ybWFsTWVzaFRvV29ybGQgPSB0cmFuc3Bvc2UoaW52ZXJzZShtdHhNZXNoVG9Xb3JsZCkpO1xyXG5cclxuICAgICNlbmRpZlxyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgZ2xfUG9zaXRpb24gPSBtdHhNZXNoVG9WaWV3ICogdmN0UG9zaXRpb247IFxyXG4gIHZjdFBvc2l0aW9uID0gbXR4TWVzaFRvV29ybGQgKiB2Y3RQb3NpdGlvbjtcclxuXHJcbiAgdl92Y3RDb2xvciA9IGFfdmN0Q29sb3I7XHJcbiAgdl92Y3RQb3NpdGlvbiA9IHZjdFBvc2l0aW9uLnh5ejtcclxuXHJcbiAgI2lmIGRlZmluZWQoUEFSVElDTEVfQ09MT1IpXHJcblxyXG4gICAgdl92Y3RDb2xvciAqPSAvKiRjb2xvciovO1xyXG5cclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoRkxBVClcclxuXHJcbiAgICB2X3ZjdFBvc2l0aW9uRmxhdCA9IHZfdmN0UG9zaXRpb247XHJcbiAgICBcclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoRkxBVCkgfHwgZGVmaW5lZChHT1VSQVVEKSB8fCBkZWZpbmVkKFBIT05HKVxyXG5cclxuICAgIHZfdmN0Tm9ybWFsID0gbWF0MyhtdHhOb3JtYWxNZXNoVG9Xb3JsZCkgKiBhX3ZjdE5vcm1hbDsgLy8gdW5ub3JtYWxpemVkIGFzIGl0IG11c3QgYmUgbm9ybWFsaXplZCBpbiB0aGUgZnJhZ21lbnQgc2hhZGVyIGFueXdheVxyXG5cclxuICAjZW5kaWYgXHJcblxyXG4gICNpZiBkZWZpbmVkKE5PUk1BTE1BUClcclxuXHJcbiAgICB2X3ZjdFRhbmdlbnQgPSBtYXQzKG10eE5vcm1hbE1lc2hUb1dvcmxkKSAqIGFfdmN0VGFuZ2VudC54eXo7XHJcbiAgICB2X3ZjdEJpdGFuZ2VudCA9IGNyb3NzKHZfdmN0Tm9ybWFsLCB2X3ZjdFRhbmdlbnQpICogYV92Y3RUYW5nZW50Lnc7XHJcblxyXG4gICNlbmRpZlxyXG5cclxuICAjaWYgZGVmaW5lZChHT1VSQVVEKVxyXG4gIFxyXG4gICAgdmVjMyB2Y3RWaWV3ID0gbm9ybWFsaXplKHZjdFBvc2l0aW9uLnh5eiAtIHVfdmN0Q2FtZXJhKTtcclxuICAgIHZlYzMgdmN0Tm9ybWFsID0gbm9ybWFsaXplKHZfdmN0Tm9ybWFsKTtcclxuICAgIHZfdmN0RGlmZnVzZSA9IHVfZkRpZmZ1c2UgKiB1X2FtYmllbnQudmN0Q29sb3IucmdiO1xyXG4gICAgdl92Y3RTcGVjdWxhciA9IHZlYzMoMCwgMCwgMCk7XHJcblxyXG4gICAgLy8gY2FsY3VsYXRlIGRpcmVjdGlvbmFsIGxpZ2h0IGVmZmVjdFxyXG4gICAgZm9yKHVpbnQgaSA9IDB1OyBpIDwgdV9uTGlnaHRzRGlyZWN0aW9uYWw7IGkgKyspIHtcclxuICAgICAgdmVjMyB2Y3REaXJlY3Rpb24gPSB2ZWMzKHVfZGlyZWN0aW9uYWxbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAxLjAsIDEuMCkpO1xyXG4gICAgICBpbGx1bWluYXRlRGlyZWN0ZWQodmN0RGlyZWN0aW9uLCB2Y3RWaWV3LCB2Y3ROb3JtYWwsIHVfZGlyZWN0aW9uYWxbaV0udmN0Q29sb3IucmdiLCB2X3ZjdERpZmZ1c2UsIHZfdmN0U3BlY3VsYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSBwb2ludCBsaWdodCBlZmZlY3RcclxuICAgIGZvcih1aW50IGkgPSAwdTtpIDwgdV9uTGlnaHRzUG9pbnQ7aSArKykge1xyXG4gICAgICB2ZWMzIHZjdFBvc2l0aW9uTGlnaHQgPSB2ZWMzKHVfcG9pbnRbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCkpO1xyXG4gICAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZjdFBvc2l0aW9uLnh5eiAtIHZjdFBvc2l0aW9uTGlnaHQ7XHJcbiAgICAgIGZsb2F0IGZJbnRlbnNpdHkgPSAxLjAgLSBsZW5ndGgobWF0Myh1X3BvaW50W2ldLm10eFNoYXBlSW52ZXJzZSkgKiB2Y3REaXJlY3Rpb24pO1xyXG4gICAgICBpZihmSW50ZW5zaXR5IDwgMC4wKSBjb250aW51ZTtcclxuXHJcbiAgICAgIGlsbHVtaW5hdGVEaXJlY3RlZCh2Y3REaXJlY3Rpb24sIHZjdFZpZXcsIHZjdE5vcm1hbCwgdV9wb2ludFtpXS52Y3RDb2xvci5yZ2IgKiBmSW50ZW5zaXR5LCB2X3ZjdERpZmZ1c2UsIHZfdmN0U3BlY3VsYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSBzcG90IGxpZ2h0IGVmZmVjdFxyXG4gICAgZm9yKHVpbnQgaSA9IDB1O2kgPCB1X25MaWdodHNTcG90O2kgKyspIHtcclxuICAgICAgdmVjMyB2Y3RQb3NpdGlvbkxpZ2h0ID0gdmVjMyh1X3Nwb3RbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCkpO1xyXG4gICAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZjdFBvc2l0aW9uLnh5eiAtIHZjdFBvc2l0aW9uTGlnaHQ7XHJcbiAgICAgIHZlYzMgdmN0RGlyZWN0aW9uSW52ZXJ0ZWQgPSBtYXQzKHVfc3BvdFtpXS5tdHhTaGFwZUludmVyc2UpICogdmN0RGlyZWN0aW9uO1xyXG4gICAgICBpZih2Y3REaXJlY3Rpb25JbnZlcnRlZC56IDw9IDAuMCkgY29udGludWU7XHJcblxyXG4gICAgICBmbG9hdCBmSW50ZW5zaXR5ID0gMS4wIC0gbWluKDEuMCwgMi4wICogbGVuZ3RoKHZjdERpcmVjdGlvbkludmVydGVkLnh5KSAvIHZjdERpcmVjdGlvbkludmVydGVkLnopOyAgICAvL0NvbmVzaGFwZSB0aGF0IGlzIGJyaWdodGVzdCBpbiB0aGUgY2VudGVyLiBQb3NzaWJsZSBUT0RPOiBcIlZhcmlhYmxlIFNwb3RsaWdodHNvZnRuZXNzXCJcclxuICAgICAgZkludGVuc2l0eSAqPSAxLjAgLSBwb3codmN0RGlyZWN0aW9uSW52ZXJ0ZWQueiwgMi4wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9QcmV2ZW50cyBoYXJzaCBsaWdodGluZyBhcnRpZmFjdHMgYXQgYm91bmRhcnkgb2YgdGhlIGdpdmVuIHNwb3RsaWdodFxyXG4gICAgICBpZihmSW50ZW5zaXR5IDwgMC4wKSBjb250aW51ZTtcclxuXHJcbiAgICAgIGlsbHVtaW5hdGVEaXJlY3RlZCh2Y3REaXJlY3Rpb24sIHZjdFZpZXcsIHZjdE5vcm1hbCwgdV9zcG90W2ldLnZjdENvbG9yLnJnYiAqIGZJbnRlbnNpdHksIHZfdmN0RGlmZnVzZSwgdl92Y3RTcGVjdWxhcik7XHJcbiAgICB9XHJcblxyXG4gICNlbmRpZlxyXG5cclxuICAgIC8vIFRFWFRVUkU6IHRyYW5zZm9ybSBVVnNcclxuICAjaWYgZGVmaW5lZChURVhUVVJFKSB8fCBkZWZpbmVkKE5PUk1BTE1BUClcclxuXHJcbiAgICB2X3ZjdFRleHR1cmUgPSB2ZWMyKHVfbXR4UGl2b3QgKiB2ZWMzKGFfdmN0VGV4dHVyZSwgMS4wKSkueHk7XHJcblxyXG4gICNlbmRpZlxyXG5cclxuICAjaWYgZGVmaW5lZChNQVRDQVApXHJcblxyXG4gICAgdmVjNCB2Y3RWZXJ0ZXhJbkNhbWVyYSA9IG5vcm1hbGl6ZSh1X210eFdvcmxkVG9DYW1lcmEgKiB2Y3RQb3NpdGlvbik7XHJcbiAgICB2Y3RWZXJ0ZXhJbkNhbWVyYS54eSAqPSAtIDEuMDtcclxuICAgIG1hdDQgbXR4X1JvdFggPSBtYXQ0KDEsIDAsIDAsIDAsIDAsIHZjdFZlcnRleEluQ2FtZXJhLnosIHZjdFZlcnRleEluQ2FtZXJhLnksIDAsIDAsIC0gdmN0VmVydGV4SW5DYW1lcmEueSwgdmN0VmVydGV4SW5DYW1lcmEueiwgMCwgMCwgMCwgMCwgMSk7XHJcbiAgICBtYXQ0IG10eF9Sb3RZID0gbWF0NCh2Y3RWZXJ0ZXhJbkNhbWVyYS56LCAwLCAtIHZjdFZlcnRleEluQ2FtZXJhLngsIDAsIDAsIDEsIDAsIDAsIHZjdFZlcnRleEluQ2FtZXJhLngsIDAsIHZjdFZlcnRleEluQ2FtZXJhLnosIDAsIDAsIDAsIDAsIDEpO1xyXG5cclxuICAgIHZlYzMgdmN0Tm9ybWFsID0gbWF0Myh1X210eE5vcm1hbE1lc2hUb1dvcmxkKSAqIGFfdmN0Tm9ybWFsO1xyXG5cclxuICAgIC8vIGFkZHMgY29ycmVjdGlvbiBmb3IgdGhpbmdzIGJlaW5nIGZhciBhbmQgdG8gdGhlIHNpZGUsIGJ1dCBkaXN0b3J0aW9uIGZvciB0aGluZ3MgYmVpbmcgY2xvc2VcclxuICAgIHZjdE5vcm1hbCA9IG1hdDMobXR4X1JvdFggKiBtdHhfUm90WSkgKiB2Y3ROb3JtYWw7XHJcblxyXG4gICAgdmVjMyB2Y3RSZWZsZWN0aW9uID0gbm9ybWFsaXplKG1hdDModV9tdHhXb3JsZFRvQ2FtZXJhKSAqIG5vcm1hbGl6ZSh2Y3ROb3JtYWwpKTtcclxuICAgIHZjdFJlZmxlY3Rpb24ueSA9IC0gdmN0UmVmbGVjdGlvbi55O1xyXG5cclxuICAgIHZfdmN0VGV4dHVyZSA9IDAuNSAqIHZjdFJlZmxlY3Rpb24ueHkgKyAwLjU7XHJcblxyXG4gICNlbmRpZlxyXG59YDtcclxuXHJcbn0iLCIvLyAvIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvYXQvQ29hdC50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEludGVyZmFjZSB0byBhY2Nlc3MgZGF0YSBmcm9tIGEgV2ViR2wgc2hhZGVycHJvZ3JhbS4gXHJcbiAgICogVGhpcyBzaG91bGQgYWx3YXlzIG1pcnJvciB0aGUgKHN0YXRpYykgaW50ZXJmYWNlIG9mIHtAbGluayBTaGFkZXJ9LiBJdCBleHBvc2VzIHRoZSBzdGF0aWMgbWVtYmVycyBvZiBTaGFkZXIgaW4gYW4gaW5zdGFuY2UtYmFzZWQgd2F5LiBlLmcuOlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiBsZXQgc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2U7XHJcbiAgICogYGBgXHJcbiAgICogY2FuIHRha2UgdmFsdWVzIG9mIHR5cGUgXHJcbiAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAqIHR5cGVvZiBTaGFkZXIgfCBTaGFkZXJJbnRlZmFjZVxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2hhZGVySW50ZXJmYWNlIHtcclxuICAgIGRlZmluZTogc3RyaW5nW107XHJcbiAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcbiAgICBhdHRyaWJ1dGVzOiB7IFtuYW1lOiBzdHJpbmddOiBudW1iZXIgfTtcclxuICAgIHVuaWZvcm1zOiB7IFtuYW1lOiBzdHJpbmddOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiB9O1xyXG4gICAgLyoqIFJldHVybnMgdGhlIHZlcnRleCBzaGFkZXIgc291cmNlIGNvZGUgZm9yIHRoZSByZW5kZXIgZW5naW5lICovXHJcbiAgICBnZXRWZXJ0ZXhTaGFkZXJTb3VyY2UoKTogc3RyaW5nO1xyXG4gICAgLyoqIFJldHVybnMgdGhlIGZyYWdtZW50IHNoYWRlciBzb3VyY2UgY29kZSBmb3IgdGhlIHJlbmRlciBlbmdpbmUgKi9cclxuICAgIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZztcclxuICAgIC8qKiBAaW50ZXJuYWwgSW5qZWN0ZWQgYnkgZGVjb3JhdG9yLiBVc2VkIGJ5IHRoZSByZW5kZXIgc3lzdGVtLiAqL1xyXG4gICAgZGVsZXRlUHJvZ3JhbSh0aGlzOiBTaGFkZXJJbnRlcmZhY2UpOiB2b2lkO1xyXG4gICAgLyoqIEBpbnRlcm5hbCBJbmplY3RlZCBieSBkZWNvcmF0b3IuIFVzZWQgYnkgdGhlIHJlbmRlciBzeXN0ZW0uICovXHJcbiAgICB1c2VQcm9ncmFtKHRoaXM6IFNoYWRlckludGVyZmFjZSk6IHZvaWQ7XHJcbiAgICAvKiogQGludGVybmFsIEluamVjdGVkIGJ5IGRlY29yYXRvci4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS4gKi9cclxuICAgIGNyZWF0ZVByb2dyYW0odGhpczogU2hhZGVySW50ZXJmYWNlKTogdm9pZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YXRpYyBzdXBlcmNsYXNzIGZvciB0aGUgcmVwcmVzZW50YXRpb24gb2YgV2ViR2wgc2hhZGVycHJvZ3JhbXMuIFxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICAvLyBUT0RPOiBkZWZpbmUgYXR0cmlidXRlL3VuaWZvcm1zIGFzIGxheW91dCBhbmQgdXNlIHRob3NlIGNvbnNpc3RlbnRseSBpbiBzaGFkZXJzXHJcbiAgQFJlbmRlckluamVjdG9yU2hhZGVyLmRlY29yYXRlXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlciB7XHJcbiAgICAvKiogcmVmZXJzIGJhY2sgdG8gdGhpcyBjbGFzcyBmcm9tIGFueSBzdWJjbGFzcyBlLmcuIGluIG9yZGVyIHRvIGZpbmQgY29tcGF0aWJsZSBvdGhlciByZXNvdXJjZXMqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBiYXNlQ2xhc3M6IHR5cGVvZiBTaGFkZXIgPSBTaGFkZXI7XHJcbiAgICAvKiogbGlzdCBvZiBhbGwgdGhlIHN1YmNsYXNzZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MsIGlmIHRoZXkgcmVnaXN0ZXJlZCBwcm9wZXJseSovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHN1YmNsYXNzZXM6IHR5cGVvZiBTaGFkZXJbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXTtcclxuICAgIC8vIHB1YmxpYyBzdGF0aWMgdmVydGV4U2hhZGVyU291cmNlOiBzdHJpbmc7XHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIGZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmc7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcbiAgICBwdWJsaWMgc3RhdGljIGF0dHJpYnV0ZXM6IHsgW25hbWU6IHN0cmluZ106IG51bWJlciB9O1xyXG4gICAgcHVibGljIHN0YXRpYyB1bmlmb3JtczogeyBbbmFtZTogc3RyaW5nXTogV2ViR0xVbmlmb3JtTG9jYXRpb24gfTtcclxuXHJcbiAgICAvKiogVGhlIHR5cGUgb2YgY29hdCB0aGF0IGNhbiBiZSB1c2VkIHdpdGggdGhpcyBzaGFkZXIgdG8gY3JlYXRlIGEgbWF0ZXJpYWwgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0Q29sb3JlZDsgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIHZlcnRleCBzaGFkZXIgc291cmNlIGNvZGUgZm9yIHRoZSByZW5kZXIgZW5naW5lICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJVbml2ZXJzYWwudmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIGZyYWdtZW50IHNoYWRlciBzb3VyY2UgY29kZSBmb3IgdGhlIHJlbmRlciBlbmdpbmUgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyVW5pdmVyc2FsLmZyYWdcIl0sIHRoaXMuZGVmaW5lKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yU2hhZGVyfS4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVsZXRlUHJvZ3JhbSh0aGlzOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgZGVjb3JhdG9yICovIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yU2hhZGVyfS4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgdXNlUHJvZ3JhbSh0aGlzOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgZGVjb3JhdG9yICovIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgSW5qZWN0ZWQgYnkge0BsaW5rIFJlbmRlckluamVjdG9yU2hhZGVyfS4gVXNlZCBieSB0aGUgcmVuZGVyIHN5c3RlbS4gKi8gLy8gVE9ETzogbWF5YmUgZG9uJ3QgZmxhZyB0aGlzIGFzIGludGVybmFsLCBzbyBzaGFkZXJzIGNhbiBiZSBwcmVjb21waWxlZCBpbiBmdXR1cmUgRlVER0UgYXBwcy4gT3IgY3JlYXRlIGFuIEFQSSB0byBwcmVjb21waWxlIHNoYWRlcnMsIGxvYWQgdGV4dHVyZXMgZXRjLlxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVQcm9ncmFtKHRoaXM6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBkZWNvcmF0b3IgKi8gfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVnaXN0ZXJTdWJjbGFzcyhfc3ViY2xhc3M6IHR5cGVvZiBTaGFkZXIpOiBudW1iZXIgeyByZXR1cm4gU2hhZGVyLnN1YmNsYXNzZXMucHVzaChfc3ViY2xhc3MpIC0gMTsgfVxyXG5cclxuICAgIC8vIHJlcGxhY2UgdGhlIG1hbmRhdG9yeSBoZWFkZXIgb2YgdGhlIHNoYWRlciB3aXRoIGl0c2VsZiBwbHVzIHRoZSBkZWZpbml0aW9ucyBnaXZlblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBpbnNlcnREZWZpbmVzKF9zaGFkZXI6IHN0cmluZywgX2RlZmluZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICAgICAgaWYgKCFfZGVmaW5lcylcclxuICAgICAgICByZXR1cm4gX3NoYWRlcjtcclxuXHJcbiAgICAgIGxldCBjb2RlOiBzdHJpbmcgPSBcIiN2ZXJzaW9uIDMwMCBlc1xcblwiO1xyXG4gICAgICBmb3IgKGxldCBkZWZpbmUgb2YgX2RlZmluZXMpXHJcbiAgICAgICAgY29kZSArPSBgI2RlZmluZSAke2RlZmluZX1cXG5gO1xyXG5cclxuICAgICAgcmV0dXJuIF9zaGFkZXIucmVwbGFjZShcIiN2ZXJzaW9uIDMwMCBlc1wiLCBjb2RlKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyQW1iaWVudE9jY2x1c2lvbiBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJTY3JlZW4udmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyQW1iaWVudE9jY2x1c2lvbi5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckJsb29tIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmVydGV4U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluc2VydERlZmluZXMoc2hhZGVyU291cmNlc1tcIlNoYWRlclNjcmVlbi52ZXJ0XCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJCbG9vbS5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckZsYXQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckZsYXQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJGTEFUXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmU7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyRmxhdFNraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckZsYXRTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiRkxBVFwiLFxyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZTsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJGbGF0VGV4dHVyZWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckZsYXRUZXh0dXJlZCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIkZMQVRcIixcclxuICAgICAgXCJURVhUVVJFXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJGbGF0VGV4dHVyZWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJGbGF0VGV4dHVyZWRTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiRkxBVFwiLFxyXG4gICAgICBcIlRFWFRVUkVcIixcclxuICAgICAgXCJTS0lOXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJHaXptbyBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJHaXptby52ZXJ0XCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJHaXptby5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckdpem1vVGV4dHVyZWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1wiVEVYVFVSRVwiXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJHaXptby52ZXJ0XCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJHaXptby5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckdvdXJhdWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckdvdXJhdWQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJHT1VSQVVEXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmU7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyR291cmF1ZFNraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckdvdXJhdWRTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiR09VUkFVRFwiLFxyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZTsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJHb3VyYXVkVGV4dHVyZWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckdvdXJhdWRUZXh0dXJlZCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIkdPVVJBVURcIixcclxuICAgICAgXCJURVhUVVJFXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJHb3VyYXVkVGV4dHVyZWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJHb3VyYXVkVGV4dHVyZWRTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiR09VUkFVRFwiLFxyXG4gICAgICBcIlRFWFRVUkVcIixcclxuICAgICAgXCJTS0lOXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJMaXQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckxpdCk7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyTGl0U2tpbiBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyTGl0U2tpbik7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiU0tJTlwiXHJcbiAgICBdO1xyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJMaXRUZXh0dXJlZCBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyTGl0VGV4dHVyZWQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJURVhUVVJFXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJMaXRUZXh0dXJlZFNraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckxpdFRleHR1cmVkU2tpbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlRFWFRVUkVcIixcclxuICAgICAgXCJTS0lOXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJNYXRDYXAgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlck1hdENhcCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIk1BVENBUFwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0VGV4dHVyZWQ7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyUGhvbmcgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlclBob25nKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiUEhPTkdcIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZTsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJQaG9uZ1NraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlclBob25nU2tpbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiU0tJTlwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0UmVtaXNzaXZlOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBob25nVGV4dHVyZWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlclBob25nVGV4dHVyZWQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJQSE9OR1wiLFxyXG4gICAgICBcIlRFWFRVUkVcIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZVRleHR1cmVkOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBob25nVGV4dHVyZWROb3JtYWxzIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJQaG9uZ1RleHR1cmVkTm9ybWFscyk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiVEVYVFVSRVwiLFxyXG4gICAgICBcIk5PUk1BTE1BUFwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0UmVtaXNzaXZlVGV4dHVyZWROb3JtYWxzOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBob25nVGV4dHVyZWROb3JtYWxzU2tpbiBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyUGhvbmdUZXh0dXJlZE5vcm1hbHNTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiUEhPTkdcIixcclxuICAgICAgXCJURVhUVVJFXCIsXHJcbiAgICAgIFwiTk9STUFMTUFQXCIsXHJcbiAgICAgIFwiU0tJTlwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0UmVtaXNzaXZlVGV4dHVyZWROb3JtYWxzOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBob25nVGV4dHVyZWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJQaG9uZ1RleHR1cmVkU2tpbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiVEVYVFVSRVwiLFxyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZVRleHR1cmVkOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBpY2sgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW107XHJcbiAgICBcclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmVydGV4U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluc2VydERlZmluZXMoc2hhZGVyU291cmNlc1tcIlNoYWRlclBpY2sudmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGljay5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBpY2tUZXh0dXJlZCBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaWNrVGV4dHVyZWQudmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGlja1RleHR1cmVkLmZyYWdcIl0sIHRoaXMuZGVmaW5lKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyVG9vbiBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyVG9vbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiVE9PTlwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0VG9vbjsgfVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclRvb25Ta2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJUb29uU2tpbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiVE9PTlwiLFxyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFRvb247IH1cclxuICB9XHJcblxyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJUb29uVGV4dHVyZWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlclRvb25UZXh0dXJlZCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiVE9PTlwiLFxyXG4gICAgICBcIlRFWFRVUkVcIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFRvb25UZXh0dXJlZDsgfVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclRvb25UZXh0dXJlZFNraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlclRvb25UZXh0dXJlZFNraW4pO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJQSE9OR1wiLFxyXG4gICAgICBcIlRPT05cIixcclxuICAgICAgXCJURVhUVVJFXCIsXHJcbiAgICAgIFwiU0tJTlwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0VG9vblRleHR1cmVkOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqIHtAbGluayBUZXhJbWFnZVNvdXJjZX0gaXMgYSB1bmlvbiB0eXBlIHdoaWNoIGFzIG9mIG5vdyBpbmNsdWRlcyB7QGxpbmsgVmlkZW9GcmFtZX0uIEFsbCBvdGhlciBwYXJ0cyBvZiB0aGlzIHVuaW9uIGhhdmUgYSAud2lkdGggYW5kIC5oZWlnaHQgcHJvcGVydHkgYnV0IFZpZGVvRnJhbWUgZG9lcyBub3QuIEFuZCBzaW5jZSB3ZSBvbmx5IGV2ZXIgdXNlIHtAbGluayBIVE1MSW1hZ2VFbGVtZW50fSBhbmQge0BsaW5rIE9mZnNjcmVlbkNhbnZhc30gY3VycmVudGx5IFZpZGVvRnJhbWUgY2FuIGJlIGV4Y2x1ZGVkIGZvciBjb252ZW5pZW5jZSBvZiBhY2Nlc3NpbmcgLndpZHRoIGFuZCAuaGVpZ2h0ICovXHJcbiAgdHlwZSBJbWFnZVNvdXJjZSA9IEV4Y2x1ZGU8VGV4SW1hZ2VTb3VyY2UsIFZpZGVvRnJhbWU+O1xyXG5cclxuICAvKipcclxuICAgKiAtIENSSVNQOiBubyBtaXBtYXBwaW5nLCBtYWcgZmlsdGVyIG5lYXJlc3QsIG1pbiBmaWx0ZXIgbmVhcmVzdFxyXG4gICAqIC0gTUVESVVNOiBtaXBtYXBwaW5nLCBtYWcgZmlsdGVyIG5lYXJlc3QsIG1pbiBmaWx0ZXIgbmVhcmVzdF9taXBtYXBfbGluZWFyXHJcbiAgICogLSBCTFVSUlk6IG1pcG1hcHBpbmcsIG1hZyBmaWx0ZXIgbGluZWFyLCBtaW4gZmlsdGVyIGxpbmVhcl9taXBtYXBfbGluZWFyXHJcbiAgICogLSBTTU9PVEg6IG5vIG1pcG1hcHBpbmcsIG1hZyBmaWx0ZXIgbGluZWFyLCBtaW4gZmlsdGVyIGxpbmVhclxyXG4gICAqL1xyXG4gIGV4cG9ydCBlbnVtIE1JUE1BUCB7XHJcbiAgICBDUklTUCwgTUVESVVNLCBCTFVSUlksIFNNT09USFxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGVudW0gV1JBUCB7XHJcbiAgICBSRVBFQVQsIENMQU1QLCBNSVJST1JcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEJhc2VjbGFzcyBmb3IgZGlmZmVyZW50IGtpbmRzIG9mIHRleHR1cmVzLiBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3RvclRleHR1cmUuZGVjb3JhdGVcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgVGV4dHVyZSBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGVSZXNvdXJjZSB7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGlkUmVzb3VyY2U6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVuZGVyRGF0YTogdW5rbm93bjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgdGV4dHVyZURpcnR5OiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByb3RlY3RlZCBtaXBtYXBEaXJ0eTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcm90ZWN0ZWQgd3JhcERpcnR5OiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICAjbWlwbWFwOiBNSVBNQVAgPSBNSVBNQVAuQ1JJU1A7XHJcbiAgICAjd3JhcDogV1JBUCA9IFdSQVAuUkVQRUFUO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJUZXh0dXJlXCIpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBtaXBtYXAoX21pcG1hcDogTUlQTUFQKSB7XHJcbiAgICAgIHRoaXMuI21pcG1hcCA9IF9taXBtYXA7XHJcbiAgICAgIHRoaXMubWlwbWFwRGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbWlwbWFwKCk6IE1JUE1BUCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtaXBtYXA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB3cmFwKF93cmFwOiBXUkFQKSB7XHJcbiAgICAgIHRoaXMuI3dyYXAgPSBfd3JhcDtcclxuICAgICAgdGhpcy53cmFwRGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgd3JhcCgpOiBXUkFQIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3dyYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBpbWFnZSBzb3VyY2Ugb2YgdGhpcyB0ZXh0dXJlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0IHRleEltYWdlU291cmNlKCk6IEltYWdlU291cmNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuZCBiaW5kcyB0aGUgdGV4dHVyZSBpbiBXZWJHTCBmcm9tIHRoZSB7QGxpbmsgdGV4SW1hZ2VTb3VyY2V9LiBcclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvclRleHR1cmV9LiBVc2VkIGJ5IHRoZSByZW5kZXIgc3lzdGVtLlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1c2VSZW5kZXJEYXRhKF90ZXh0dXJlVW5pdDogbnVtYmVyID0gMCk6IHZvaWQgey8qIGluamVjdGVkIGJ5IFJlbmRlckluamVjdG9yKi8gfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlcyB0aGUgdGV4dHVyZSBpbiBXZWJHTCBmcmVlaW5nIHRoZSBhbGxvY2F0ZWQgZ3B1IG1lbW9yeS5cclxuICAgICAqIEluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3RvclRleHR1cmV9LlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVSZW5kZXJEYXRhKCk6IHZvaWQgey8qIGluamVjdGVkIGJ5IFJlbmRlckluamVjdG9yKi8gfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaGVzIHRoZSBpbWFnZSBkYXRhIGluIHRoZSByZW5kZXIgZW5naW5lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVmcmVzaCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy50ZXh0dXJlRGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgaWRSZXNvdXJjZTogdGhpcy5pZFJlc291cmNlLFxyXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICBtaXBtYXA6IE1JUE1BUFt0aGlzLiNtaXBtYXBdLFxyXG4gICAgICAgIHdyYXA6IFdSQVBbdGhpcy4jd3JhcF1cclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMsIF9zZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfc2VyaWFsaXphdGlvbi5uYW1lO1xyXG4gICAgICB0aGlzLiNtaXBtYXAgPSA8bnVtYmVyPjx1bmtub3duPk1JUE1BUFtfc2VyaWFsaXphdGlvbi5taXBtYXBdO1xyXG4gICAgICB0aGlzLiN3cmFwID0gPG51bWJlcj48dW5rbm93bj5XUkFQW19zZXJpYWxpemF0aW9uLndyYXBdO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcihfZXh0ZW5kYWJsZT86IGJvb2xlYW4pOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICBtdXRhdG9yLm1pcG1hcCA9IHRoaXMuI21pcG1hcDtcclxuICAgICAgbXV0YXRvci53cmFwID0gdGhpcy4jd3JhcDtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLm1pcG1hcClcclxuICAgICAgICB0eXBlcy5taXBtYXAgPSBNSVBNQVA7XHJcbiAgICAgIGlmICh0eXBlcy53cmFwKVxyXG4gICAgICAgIHR5cGVzLndyYXAgPSBXUkFQO1xyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmlkUmVzb3VyY2U7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5yZW5kZXJEYXRhO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IudGV4dHVyZURpcnR5O1xyXG4gICAgICBkZWxldGUgX211dGF0b3IubWlwbWFwRGlydHk7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5taXBtYXBHZW5lcmF0ZWQ7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci53cmFwRGlydHk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXh0dXJlIGNyZWF0ZWQgZnJvbSBhbiBleGlzdGluZyBpbWFnZVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlSW1hZ2UgZXh0ZW5kcyBUZXh0dXJlIHtcclxuICAgIHB1YmxpYyBpbWFnZTogSFRNTEltYWdlRWxlbWVudCA9IG51bGw7XHJcbiAgICBwdWJsaWMgdXJsOiBSZXF1ZXN0SW5mbztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3VybD86IFJlcXVlc3RJbmZvKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIGlmIChfdXJsKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkKF91cmwpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IF91cmwudG9TdHJpbmcoKS5zcGxpdChcIi9cIikucG9wKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0ZXhJbWFnZVNvdXJjZSgpOiBJbWFnZVNvdXJjZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXN5bmNocm9ub3VzbHkgbG9hZHMgdGhlIGltYWdlIGZyb20gdGhlIGdpdmVuIHVybFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZChfdXJsOiBSZXF1ZXN0SW5mbyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICB0aGlzLnVybCA9IF91cmw7XHJcbiAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcblxyXG4gICAgICAvLyBjb25zdCByZXNwb25zZTogUmVzcG9uc2UgPSBhd2FpdCB3aW5kb3cuZmV0Y2godGhpcy51cmwpO1xyXG4gICAgICAvLyBjb25zdCBibG9iOiBCbG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG4gICAgICAvLyBsZXQgb2JqZWN0VVJMOiBzdHJpbmcgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAvLyB0aGlzLmltYWdlLnNyYyA9IG9iamVjdFVSTDtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSA9IG51bGw7IC8vIHJlZnJlc2ggcmVuZGVyIGRhdGEgb24gbmV4dCBkcmF3IGNhbGxcclxuICAgICAgICAgIF9yZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKCkgPT4gX3JlamVjdCgpKTtcclxuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IG5ldyBVUkwodGhpcy51cmwudG9TdHJpbmcoKSwgUHJvamVjdC5iYXNlVVJMKS50b1N0cmluZygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdXJsOiB0aGlzLnVybCxcclxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsIC8vIHNlcmlhbGl6ZSBmb3IgZWRpdG9yIHZpZXdzXHJcbiAgICAgICAgW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdOiBzdXBlci5zZXJpYWxpemUoKVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBhd2FpdCB0aGlzLmxvYWQoX3NlcmlhbGl6YXRpb24udXJsKTtcclxuICAgICAgLy8gdGhpcy50eXBlIGlzIGFuIGFjY2Vzc29yIG9mIE11dGFibGUgZG9lc24ndCBuZWVkIHRvIGJlIGRlc2VyaWFsaXplZFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKF9tdXRhdG9yLnVybCAmJiBfbXV0YXRvci51cmwgIT0gdGhpcy51cmwudG9TdHJpbmcoKSlcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWQoX211dGF0b3IudXJsKTtcclxuICAgICAgLy8gZXhjZXB0IHVybCBmcm9tIG11dGF0b3IgZm9yIGZ1cnRoZXIgcHJvY2Vzc2luZ1xyXG4gICAgICBkZWxldGUgKF9tdXRhdG9yLnVybCk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvciwgX3NlbGVjdGlvbiwgX2Rpc3BhdGNoTXV0YXRlKTtcclxuICAgICAgLy8gVE9ETzogZXhhbWluZSBuZWNlc3NpdHkgdG8gcmVjb25zdHJ1Y3QsIGlmIG11dGF0b3IgaXMga2VwdCBieSBjYWxsZXJcclxuICAgICAgLy8gX211dGF0b3IudXJsID0gdGhpcy51cmw7IFxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXh0dXJlIGNyZWF0ZWQgZnJvbSBhIGNhbnZhc1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlQmFzZTY0IGV4dGVuZHMgVGV4dHVyZSB7XHJcbiAgICBwdWJsaWMgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZywgX2Jhc2U2NDogc3RyaW5nLCBfbWlwbWFwOiBNSVBNQVAgPSBNSVBNQVAuQ1JJU1AsIF93cmFwOiBXUkFQID0gV1JBUC5SRVBFQVQsIF93aWR0aD86IG51bWJlciwgX2hlaWdodD86IG51bWJlcikge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gX2Jhc2U2NDtcclxuICAgICAgdGhpcy5taXBtYXAgPSBfbWlwbWFwO1xyXG4gICAgICB0aGlzLndyYXAgPSBfd3JhcDtcclxuICAgICAgaWYgKF93aWR0aClcclxuICAgICAgICB0aGlzLmltYWdlLndpZHRoID0gX3dpZHRoO1xyXG4gICAgICBpZiAoX2hlaWdodClcclxuICAgICAgICB0aGlzLmltYWdlLmhlaWdodCA9IF9oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0ZXhJbWFnZVNvdXJjZSgpOiBJbWFnZVNvdXJjZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmltYWdlO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBUZXh0dXJlIGNyZWF0ZWQgZnJvbSBhIGNhbnZhc1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlQ2FudmFzIGV4dGVuZHMgVGV4dHVyZSB7XHJcbiAgICBwdWJsaWMgY3JjMjogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nLCBfY3JjMjogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgdGhpcy5jcmMyID0gX2NyYzI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHRleEltYWdlU291cmNlKCk6IEltYWdlU291cmNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3JjMi5jYW52YXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXh0dXJlIGNyZWF0ZWQgZnJvbSBhIHRleHQuIFRleHR1cmUgdXBhdGVzIHdoZW4gdGhlIHRleHQgb3IgZm9udCBjaGFuZ2VzLiBUaGUgdGV4dHVyZSBpcyByZXNpemVkIHRvIGZpdCB0aGUgdGV4dC5cclxuICAgKiBAYXV0aG9ycyBKb25hcyBQbG90emt5LCBIRlUsIDIwMjRcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgVGV4dHVyZVRleHQgZXh0ZW5kcyBUZXh0dXJlIHtcclxuICAgIHByb3RlY3RlZCBjcmMyOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICAjdGV4dDogc3RyaW5nO1xyXG4gICAgI2ZvbnQ6IHN0cmluZztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZywgX3RleHQ6IHN0cmluZyA9IFwiVGV4dFwiLCBfZm9udDogc3RyaW5nID0gXCIyMHB4IG1vbm9zcGFjZVwiKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgdGhpcy5jcmMyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgIHRoaXMudGV4dCA9IF90ZXh0O1xyXG4gICAgICB0aGlzLmZvbnQgPSBfZm9udDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHRleHQoX3RleHQ6IHN0cmluZykge1xyXG4gICAgICB0aGlzLiN0ZXh0ID0gX3RleHQ7XHJcbiAgICAgIHRoaXMudGV4dHVyZURpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRleHQoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3RleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBmb250KF9mb250OiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy4jZm9udCA9IF9mb250O1xyXG4gICAgICBkb2N1bWVudC5mb250cy5sb2FkKHRoaXMuI2ZvbnQpXHJcbiAgICAgICAgLmNhdGNoKChfZXJyb3IpID0+IERlYnVnLmVycm9yKGAke1RleHR1cmVUZXh0Lm5hbWV9OiAke19lcnJvcn1gKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB0aGlzLnRleHR1cmVEaXJ0eSA9IHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZm9udCgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZm9udDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRleEltYWdlU291cmNlKCk6IEltYWdlU291cmNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBoYXNUcmFuc3BhcmVuY3koKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IGNhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB8IE9mZnNjcmVlbkNhbnZhcyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNyYzIuY2FudmFzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1c2VSZW5kZXJEYXRhKF90ZXh0dXJlVW5pdD86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy50ZXh0dXJlRGlydHkpIHtcclxuICAgICAgICB0aGlzLmNyYzIuZm9udCA9IHRoaXMuZm9udDtcclxuXHJcbiAgICAgICAgbGV0IG1ldHJpY3M6IFRleHRNZXRyaWNzID0gdGhpcy5jcmMyLm1lYXN1cmVUZXh0KHRoaXMudGV4dCk7XHJcbiAgICAgICAgbGV0IHdpZHRoOiBudW1iZXIgPSBtZXRyaWNzLndpZHRoO1xyXG4gICAgICAgIGxldCBoZWlnaHQ6IG51bWJlciA9IG1ldHJpY3MuZm9udEJvdW5kaW5nQm94QXNjZW50ICsgbWV0cmljcy5mb250Qm91bmRpbmdCb3hEZXNjZW50O1xyXG5cclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoICsgdGhpcy5jcmMyLm1lYXN1cmVUZXh0KFwiICBcIikud2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0ICogMS4xOyAvLyBwYWRkaW5nLCBvdGhlcndpc2Ugb24gc29tZSBnbHlwaHMgbWlnaHQgZ2V0IGN1dCBvZmZcclxuICAgICAgICBpZiAodGhpcy5jYW52YXMud2lkdGggPT0gMClcclxuICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5jcmMyLmZvbnQgPSB0aGlzLmZvbnQ7IC8vIFRPRE86IHdhaXQgZm9yIGZvbnQgdG8gYmUgbG9hZGVkIHVzaW5nIGRvY3VtZW50LmZvbnRzXHJcbiAgICAgICAgdGhpcy5jcmMyLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgdGhpcy5jcmMyLnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgdGhpcy5jcmMyLmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgICAgICB0aGlzLmNyYzIuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuY3JjMi5maWxsVGV4dCh0aGlzLiN0ZXh0LCB0aGlzLmNhbnZhcy53aWR0aCAvIDIsIHRoaXMuY2FudmFzLmhlaWdodCAvIDIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzdXBlci51c2VSZW5kZXJEYXRhKF90ZXh0dXJlVW5pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIHRleHQ6IHRoaXMudGV4dCxcclxuICAgICAgICBmb250OiB0aGlzLmZvbnRcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHRoaXMudGV4dCA9IF9zZXJpYWxpemF0aW9uLnRleHQ7XHJcbiAgICAgIHRoaXMuZm9udCA9IF9zZXJpYWxpemF0aW9uLmZvbnQ7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKF9leHRlbmRhYmxlPzogYm9vbGVhbik6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IodHJ1ZSk7XHJcbiAgICAgIG11dGF0b3IudGV4dCA9IHRoaXMudGV4dDtcclxuICAgICAgbXV0YXRvci5mb250ID0gdGhpcy5mb250O1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRleHR1cmUgY3JlYXRlZCBmcm9tIGEgRlVER0UtU2tldGNoXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRleHR1cmVTa2V0Y2ggZXh0ZW5kcyBUZXh0dXJlQ2FudmFzIHtcclxuICAgIHB1YmxpYyBnZXQgdGV4SW1hZ2VTb3VyY2UoKTogSW1hZ2VTb3VyY2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogVGV4dHVyZSBjcmVhdGVkIGZyb20gYW4gSFRNTC1wYWdlXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRleHR1cmVIVE1MIGV4dGVuZHMgVGV4dHVyZUNhbnZhcyB7XHJcbiAgICBwdWJsaWMgZ2V0IHRleEltYWdlU291cmNlKCk6IEltYWdlU291cmNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGNsYXNzIFRleHR1cmVEZWZhdWx0IGV4dGVuZHMgVGV4dHVyZUJhc2U2NCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbG9yOiBUZXh0dXJlQmFzZTY0ID0gbmV3IFRleHR1cmVEZWZhdWx0KFwiVGV4dHVyZURlZmF1bHRcIiwgVGV4dHVyZURlZmF1bHQuZ2V0Q29sb3IoKSwgTUlQTUFQLk1FRElVTSk7XHJcbiAgICBwdWJsaWMgc3RhdGljIG5vcm1hbDogVGV4dHVyZUJhc2U2NCA9IG5ldyBUZXh0dXJlRGVmYXVsdChcIlRleHR1cmVOb3JtYWxEZWZhdWx0XCIsIFRleHR1cmVEZWZhdWx0LmdldE5vcm1hbCgpLCBNSVBNQVAuTUVESVVNKTtcclxuICAgIHB1YmxpYyBzdGF0aWMgdG9vbjogVGV4dHVyZUJhc2U2NCA9IG5ldyBUZXh0dXJlRGVmYXVsdChcIlRleHR1cmVUb29uRGVmYXVsdFwiLCBUZXh0dXJlRGVmYXVsdC5nZXRUb29uKCksIE1JUE1BUC5TTU9PVEgsIFdSQVAuQ0xBTVApO1xyXG5cclxuICAgIC8vIFRPRE86IG1heWJlIG1ha2UgdGhlc2UgbGF6eVxyXG4gICAgcHVibGljIHN0YXRpYyBpY29uTGlnaHQ6IFRleHR1cmVCYXNlNjQgPSBuZXcgVGV4dHVyZURlZmF1bHQoXCJJY29uRGVmYXVsdExpZ2h0XCIsIFRleHR1cmVEZWZhdWx0LmdldEljb25MaWdodCgpLCBNSVBNQVAuQkxVUlJZLCBXUkFQLkNMQU1QLCAyNTYsIDI1Nik7XHJcbiAgICBwdWJsaWMgc3RhdGljIGljb25DYW1lcmE6IFRleHR1cmVCYXNlNjQgPSBuZXcgVGV4dHVyZURlZmF1bHQoXCJJY29uRGVmYXVsdENhbWVyYVwiLCBUZXh0dXJlRGVmYXVsdC5nZXRJY29uQ2FtZXJhKCksIE1JUE1BUC5CTFVSUlksIFdSQVAuQ0xBTVAsIDI1NiwgMjU2KTtcclxuICAgIHB1YmxpYyBzdGF0aWMgaWNvbkF1ZGlvOiBUZXh0dXJlQmFzZTY0ID0gbmV3IFRleHR1cmVEZWZhdWx0KFwiSWNvbkRlZmF1bHRBdWRpb1wiLCBUZXh0dXJlRGVmYXVsdC5nZXRJY29uQXVkaW8oKSwgTUlQTUFQLkJMVVJSWSwgV1JBUC5DTEFNUCwgMjU2LCAyNTYpO1xyXG4gICAgLy8gcHVibGljIHN0YXRpYyBpY29uUGFydGljbGVzOiBUZXh0dXJlQmFzZTY0ID0gbmV3IFRleHR1cmVEZWZhdWx0KFwiSWNvbkRlZmF1bHRQYXJ0aWNsZVwiLCBUZXh0dXJlRGVmYXVsdC5nZXRJY29uUGFydGljbGVzKCksIE1JUE1BUC5CTFVSUlksIDI1NiwgMjU2KTtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRDb2xvcigpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVpBQUFBR1FDQVlBQUFDQXZ6Yk1BQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNNQUFBN0RBY2R2cUdRQUFEV0xTVVJCVkhoZTdkMEhuRlRsdmYveEg5dVhaWUdsOXlyU1JKcEVVZXhZc0pJYmE4UmU0OThXTmNaRWIrNDFlcE9Jc1dzME5peXhtMmcwZHV3YWV3TzdvcUpDQUduU3Q3SC84MzA0QjRkbGRwazVaM2Izek83bnpldTg1cHd6TTh2TXM3UFBiMzVQTzYxcVBCWmpyVnExOHZmaUtlYkZSL2xGUlBsRlEvbEZFL2Z5eS9GdkFRQklDd0VFQUJBS0FRUUFFQXA5SUJIUmhob041UmNONVJkTlN5Zy8vWXpDd2tKcjNicTFPMTY5ZXJYYk1vRUFFaEYvd05GUWZ0RlFmdEUwOS9MTHpjMjFMbDI2MkU5KzhoTWJQMzY4VlZkWDIrdXZ2MjdUcDA5M1FTVHEreWVBUk1RZmNEU1VYelNVWHpUTnRmeHljbktzcEtURUJnMGFaRWNlZWFRZGV1aWh0bUxGQ3Z2c3M4OXMzcng1OXZqamo5dkREejhjT1JPSkhFQ3FxcXBzOXV6WnRtelpNbHU1Y3FWTGxkcTFhMmQ5Ky9aMSsxSHhBWXlHOG91RzhvdUc4b3NtVFBubDUrZGI5KzdkYmZmZGQ3ZFRUejNWMWNYdnZ2dXV2Znp5eXk0RGtWV3JWdG1OTjk1b1M1WXNjY2RoaFE0ZzVlWGw5dXl6ejlxTUdUTnN6Wm8xL3RrZktRSXErdTI5OTk1V1dscnFuMDBmSDhCb0tMOW9LTDlvS0w5bzBpay9QYlpObXphMnhSWmIySEhISFdlVEowKzJoUXNYMnBOUFBtbUxGeS8ySDdYT2YvN3pIN3YxMWx0ZFBSNUZxQUN5WU1FQ3UrZWVlMUtLWG12WHJyWDk5dHZQUm84ZTdZSkt1dmdBUmtQNVJST1VuejY3K2lLVWw1ZG5sWldWdG56NThsaThkajUvMFRTbjhsT1QxYjc3N21zWFhIQ0JkZTdjMlY1NzdUVjc4ODAzazc3SGI3LzkxdTY0NHc2cnFLand6NFNUZGdCUnRxSFVKNGhvQ2hDZmZQS0pmZlhWVjY0OXJYMzc5alpnd0FDM0JaUXVUWm8weWJiYmJqdVhYcVdERDJBMGxGODBRZmwxN05qUmpqbm1HT3ZVcVpOOTg4MDM5c0FERDdndlVrMzkrdm44UmRPY3lxOXIxNjQyZGVwVTIzcnJyZTNSUng5MVgzSkVkYlNhc0lxTGkyM1lzR0h1WEtZQ1NOb3BnWHJ2ZytDaC9vLzc3cnZQdlZpOStKLy8vT2QyOU5GSDI5Q2hROTBMREdqNG1OSWxCWm00LzhMUXNzeWNPZE0xeGI3NjZxdEptMkpGMlVmUG5qM3QxNy8rdFUyWU1NRjIzWFZYTy9iWVkxMVFRZk0xZi81OHUrbW1tMXpmZ2ZwNDQwNzFzVjZ6UHN0QjhGQTlyQy84VHozMWxPc1h5YlMwTXBBZmZ2akJycjc2NnZVZE1VRWZpRkttL2ZmZjM4ckt5dGFuK01wR1ZQakJZL1hIcWV6anJMUE9jcDNzcWVJYlREU1VYLzMrOEljL3VNK3I2RXZRVDMvNlV6ZnNNU2czM1NxQXFGMzVtV2Vlc1d1dnZkYWRsNGNlZXNqZWUrODkvNmhwOFBtTHByN3kwNmlsSzYrODBsWE0wcjkvZnhzNWNxVDdnbHhRVU9ET05iUjB5aS80b25QRUVVZTRZNDIwZXVlZGQ5eGdwcU9PT3NwMjNIRkhOd3BMbWlRRCtlQ0REemJveFgvNzdiZGR4bkhnZ1FkYW56NTlyRzNidGk3YlVJRG8xcTJiNjBBUEZCVVYyWFBQUFJlTHRCOUlSbjlRTDczMFVzb2RpN1U3SnRHOHFFTjZsMTEyOFkvTXZ2NzZhL3ZuUC85cGYvN3puKzNCQngrMEw3LzhNbFoxbVpxcTVzNmQ2ejdIK3FLalppdlIrMURnQ3lZU1psSmFBZVNMTDc3dzk4dysvL3h6OThJVTdmVE5MVm1rSERGaXhBWWQ1M3E4M2xUVW5uK2dJU2pEMWxEMFZDdUY0TXNVbWkvMUo2aHpXcCtKWUZQR3FxWlBWZFNYWG5xcHkwdzEyaWtPOUpsVWRyRjA2ZEwxbjJOTkpteW9qQ25sQUtJWDg5MTMzL2xINWlLZDJvUFZycFlZSkJLcE9VdWpBUUxxZ0h6cnJiZnFiR3NHZ0RoUjNUWnUzTGlONnJpZ2N0WVhqbGRlZWNWOTQ3LysrdXZ0alRmZWNLMHpUU2w0YlkwaDVRQ2liMmRCVzZCb0NLK0c1cXBudno3S1RnSnEydnIwMDAvSlFBQmtEVFgvMUZjcEIvZXBBMXY5RG1yaXV2dnV1KzNqano5dTlsbHF5Z0drOXB3UFJWa04xZDNVc0Z3TjZ3Mm9qMFJESUlOT1N3Q0lPOVZoNlV5R1ZrQlJFLys5OTk1ckYxOThjU3o3U3pJbDVRQlNPeTFUNzcwS1Z1MXI5VWtNTU5wWGxLYnRHRUEyNmQyN2Q1MU45Y2tvV0toZldGK1dQL3p3UTlkZmN0VlZWN2xCR21yTmFTNVNIc2FyNFlvYWdSQzQvUExMM1dKYzIyNjdyZXZycUl0V2ZuemlpU2Y4STdNcnJyakNEUzNUa0xoVTFPNmNWMmVRUm56RnhXT1BQZWJ2eGROZWUrM2w3OFZUVTVXZnZzejA2dFhMVGJ3S01tTE5hZEtvd2ozMzNIUDlPbTRxUDFVY20yKyt1ZDEyMjIxdUdIdEE0K3MxOGtXZHJFMkZ6MTgwcVphZlJweHFDR3pVTENLb3ozcjA2T0c2QURROHZMNDFBOU1aeGxzWERVdlhjSFgxUVFmRHpqTTFqRGZsQUtJcDhZbUZyWGErRjE1NHdVYU5HbFZ2WkZhd2VPU1JSL3lqZFlGSEhVMzZnMHhGN1FKVW44b3ZmdkVML3dnSXAwT0hEaTVZNkZ0aEVFRFU1REI4K0hBYlBIandCcG16UG9QNkk1d3laWW9iZFJPNDVaWmIzRUNTVkQvTFFHMmEzdkNyWC8ycXpqcTAyUVNRMm9IZ3Nzc3Vjek1lTmFtbXZqZFpPL0JjY3NrbGJvMFdSZDVVMVA3WmFqWkxuRi9TMVBSdE5jNFNzNzg0YXFyeVUzL2NicnZ0NXI3UUJBRkU2N3RwM1AvWXNXUFhEM3RVK2VtUFd4TzB6ajMzWEpkQkJ6UlJkclBOTm5QM05SVStmOUdrV242TEZpMXlRMk16U2F2a2FvU1h2clRVcGRrRUVNMDRWMmRRUURNMGxZRW9FTlQzSmhWa05JMWUxUGVoQUtJM29XOTVxY2hFQVRha0ZJdXZ5VkIrOVV1Y2lmNzN2Ly9kclpSdzBFRUhyUjlkcVBKVFA1K2FHMVFaWG5QTk5lNjhxQWxyenB3NS9sSFQ0UE1YVGFybHArWjYxVnRoeTF1ZklkVi9XcTFqekpneHR1V1dXN292TVp1U2lmSnJ5QUNTY3E5UTdZa29tdFdvUDd4TkZXamlrTjFnT1pQRTVnR2dLU1gyMzZrdlEwUFZFei9UK2dQVzhITmxKZWwwb3FKNTBVV1kxTitWanFEeVZ4K0hnb2FXV0QvdHROTmNzMmNxd1NNYnBQd1hVWHNZbTJhVmE4R3VUUlZxNGlKa1d2cEJQMmRUSTdlQXhwTFlnYWtBb2hFeWlhTUU5WTFSRitaUjgxVmNaaHVqY2VsTGhRSklPdG1BSGp0dzRFQzN6SlA2T0RTWW9DbWJPaHRLeWdFa2NUNkg2UGo3NzcvZllISmhNb25yQldrdWlVYSsxRGRxQzJoTWlTdnFxajlEUVNMeE02M21yRC85NlU4dSswaHN3a1hMb1RrZG0ycHBDWUtMVnVaUXNGRFFPT3l3dzl6eTZjMzVDM1BLQVVSdHdvbUxjYW1ndExSSmZRRkVUVnhhOGlTZzltSU53YVVKQzNHaGpzeUFQdE1hcXBrNDUrbVBmL3lqYTRaVkIzdlU2MGNqTzJrcVFyTHNJMmpTVkwyb3p2Q1RUanJKVGpqaEJMZS9xUlU2R290ZWR6cVpVN3BTRGlBcXJNUzVHNXFGcnFuNjlhMXJwZG1YUVFlbGFEVkxkUjVwNkJvUUIxcW1JcEZHeEdnK2lCYkwwd1N3cDU5K2VuM3dVSWRqcGtmaUlONzBKWG4yN05uck01Q2dRbFlyaWhhTDFXS3laNTk5dHJ0Z1h1S3lUVTFCcjB0ZEM1cjBxQy9xd2FhbXMyUnpsZFN2cmZ2MGVIV3doNUZ5QUpFaFE0YjRlK3VHUWVvQ1VYVXRIS1lDMXlKakFmMFMxTDQ4ZnZ6NDJFUm5RSi9qYmJiWnhqOWE5MFZKL1hiLytNYy8zRlVIUC9yb0kvZFoxcUo1dDk5K2UxWmNXQWlab2Y1ZGpiNUtwQy9SdXRiNE9lZWM0MjUxM0pEZjhOT2hURWlYdEwzenpqdmRuS1pndStHR0cyeUhIWGJZNEhVR0NZRVdnTlRqenovL2ZMZndiYnJ2SmEwQW9qa2ZpZjBYbWtTb0licTFVM3Y5d1dtSll3MFZDMmp1aHg2dlNWYzBZU0ZPSms2YzZFWmFKY3VtVllrb0c5SHdYVjNMUmtNaUF5ekowN3hwM1Q3MTgyclNxVDRqdi96bEwrM3d3dzkzclNoeHJNUFVzcU02VnYzVEdxNnJTMmRvL3A0bWJtc1ZFVjE2UEtCZ29TdHJxcFZJMTNsU1A4M0pKNStjOXFvS2FWMlJVUFNDRkpXRFNLVW1LblUrYnJYVlZpNENxcU5jTHo1eDZYY2Rhd3k5Smg4cTVVdm5SY1lsdXRjbHplSnJkSlJmYW5UMU9hMmdxbTlzQ2d6Nm9xU01XWDkwd2VWQmRVN3psOVJNb005M1U4OEJFVDUvMGRSWGZycFA5WmtDU0ZOSnAveFVyeW9yMGtUcjRNcUQ2ZEk4UFdYYnFVbzdnSWpXdmxka1R1WE5hUVNETHYyNXh4NTd1Rm0vYW05THAxQ29BS09oL0ZLbklLTGhtbG85WWRhc1dhNjVTa3YySkw1R3BmNHFVNTFMZDE1QVErRHpGMDF6S3o5OXVUbjQ0SVBkYUZmMTJhWHovalJpVnMxZDZRZ1ZRTlR2b1d3aVNPK1NVV2VqL2hDMUNKa1dYTlRqTldzOTNTRnRmQUNqb2Z6U3B5WlpaZFlLRUpvSEVtZDgvcUpwYnVXbnh5c1RVWE5XN1RsTm02S3lTTGM4UWdVUTBiZXpKNTk4MGkwb3B6UlB6VmQ2OGZvV3AwaW1GRi9YUlQva2tFUGNvblVhdFJWbS9nY2Z3R2dvdjJnb3YyZ292MmppWG42aEE0am9tNXFDaFliejZrcURTdjgxTDBTVHN6UjhUQjA2Nm5UVVNKZGd6SFM2K0FCR1EvbEZRL2xGUS9sRjA2d0RTRURwdnRyYkZEejA0OVJNcFZFS1dpWWlhZ0h3QVl5RzhvdUc4b3VHOG9zbTd1V1hrUURTa1BnQVJrUDVSVVA1UlVQNVJSUDM4Z3ZYcmdRQWFQRUlJQUNBVUFnZ0FJQlExTUFXNzBiQWRhOFJJWTBkT3pidXY5OVllK3Z0dC8wOWhORXE1bjBNY1JmMzBpTURBUUNFUWdBQkFJUkNBQUVBaEVJQUFRQ0VRZ0FCQUlSQ0FBRUFoSktSQUtLckRPcEtYVnR2dmJWL0JnRFEzR1VrZ09oeW9BTUhEZ3g5WVhZQVFQYWhDUXNBRUVwR0FramNWN1FFQUdRZUdRZ0FJQlFDQ0FBZ0ZBSUlBQ0NVakFhUXVGODlDd0NRT1dRZ0FJQlFDQ0FBZ0ZBeUVrQVl4Z3NBTFE4WkNBQWdGQUlJQUNDVWpBWVFSbUVCUU10QkJnSUFDSVVBQWdBSWhRQUNBQWdsSXdHRVlid0EwUEtRZ1FBQVFpR0FBQUJDeVdnQVlSZ3ZBTFFjWkNBQWdGQUlJQUNBVUFnZ0FJQlFNaEpBR01ZTEFDMFBHUWdBSUJRQ0NBQWdsSXdHRUlieEFrRExRUVlDQUFpRkFBSUFDSVVBQWdBSUpTTUJoR0c4QU5EeWtJRUFBRUxKVWZZUWRaczJiWnI3WVVjZGRWVFMrNk5zQU5CU2FXUnJuTGVNWkNENlFRQ0Fsb1VtTEFCQUtBUVFBRUFvR1EwZzlGa0FRTXRCQmdJQUNJVUFBZ0FJaFFBQ0FBZ2xJd0dFWWJ3QTBQS1FnUUFBUWlHQUFBQkN5V2dBWVJndkFMUWNaQ0FBZ0ZBSUlBQ0FVQWdnQUlCUU1oSkFHTVlMQUMwUEdRZ0FJQlFDQ0FBZ2xJd0dFSWJ4QWtETFFRWUNBQWlGQUFJQUNJVUFBZ0FJSlNNQmhHRzhBTkR5a0lFQUFFSWhnQUFBUXNsb0FHRVlMd0MwSEdRZ0FJQlFDQ0FBZ0ZBeUVrQVloUVVBTFE4WkNBQWdGQUlJQUNBVUFnZ0FJSlNNQmhDRzhRSkF5MEVHQWdBSWhRQUNBQWdsSXdHRVlid0EwUEtRZ1FBQVFpR0FBQUJDSVlBQUFFTEphQUJoR0M4QXRCenEvWTVjNnc4Yk5zd09PdWdnKy9EREQrMysrKy8zejJhR0Y1UjI5bmNSd29rbm52aWN2NHNRYnZqckRmNGV3cWhweFpmS1NHSmVmRFJoQVFCQ3lVZ0FDWnF1R000TEFDMEhHUWdBSUJRQ0NBQWdGQUlJQUNBVUFnZ0FJQlFDQ0FBZ0ZBSUlBQ0NVakFRUWh2RUNRTXREQmdJQUNJVUFBZ0FJaFFBQ0FBaUZBQUlBQ0lVQUFnQUloUUFDQUFnbEl3R0VZYndBMFBLUWdRQUFRaUdBQUFCQ0lZQUFBRUloZ0FBQVFpR0FBQUJDSVlBQUFFTEpTQUJoR0M4QXREeGtJQUNBVUFnZ0FJQlFDQ0FBZ0ZBSUlBQ0FVQWdnQUlCUU1oSkFHSVVGQUMwUEdRZ0FJQlFDQ0FBZ0ZBSUlBQ0FVQWdnQUlCUUNDQUFnRkFJSUFDQ1VqQVFRaHZFQ1FNdERCZ0lBQ0lVQUFnQUloUUFDQUFnbFIvMFhVYmZISDMvYy9iQTk5OXd6NmYxUk5nQm9xZFN2SE9lTkRBUUFFQW9CQkFBUUNnRUVBQkFLQVFRQUVBb0JCQUFRQ2dFRUFCQktSZ0tJaG5NSncyNEJvT1VnQXdFQWhFSUFBUUNFUWdBQkFJUkNBQUVBaEVJQUFRQ0VrcEVBd2lnc0FHaDV5RUFBQUtFUVFBQUFvUkJBQUFDaEVFQUFBS0VRUUFBQW9SQkFBQUNoWkNTQU1Jd1hBRm9lTWhBQVFDZ0VFQUJBS0FRUUFFQW9CQkFBUUNnRUVBQkFLQVFRQUVBb0dRa2dET01GZ0phSERBUUFFRXBHQWtodWJxNjdyYTZ1ZHJjQWdPWXY1UUN5WXNVS3UrT09PK3pHRzIrMGUrNjV4NVl2WCs3ZlU3ODMzbmpEcGsyYlpqZmZmTE45L1BISC9sa0FRTFpMT1lBb3k1ZzllN2JOblR2WFB2MzBVN3Z3d2d2dDg4OC90N1ZyMS9xUDJKZ3lrbWVmZmRhKytlWWIrKzY3Nyt5cXE2N3k3d0VBWkx1VUEwaHhjYkgxNzkvZlB6SmJ2WHExM1gvLy9TNHpDUVNkNllFdnZ2akN5c3ZMM2I2Q3ljTVBQK3oyQVFEWkw2MCtrRkdqUnZsN1pwMDZkYkxubm51dTNxYXNtVE5uK250bVgzNzVwUzFidHN3L0FnQmt1N1FDeU9EQmc5ZDNtSXYyUC92c002dXFxdkxQL0VqbmxJRUVQdnJvSXhzM2JweC9CQURJZG1rRmtMeThQQnN5WkloL3RDNmdQUFBNTTdacTFTci96SS9VUHhJMFgxVlVWTGhnTW1uU0pIY01BTWgrYVFVUUdUTm1qTDluMXFGREIzdnR0ZGZXQjVERVBwQVBQL3pRM3pQWDZWNVFVR0FUSjA3MHp3QUFzbDNhQWFSZnYzNVdXRmpvSDVuYm56VnJsdXNrVjVDUXlzcEsxN1FWVUREWmZ2dnRyVWVQSHY0WkFFQzJTenVBNU9UazJKWmJidWtmbVd2U2V2SEZGMTJmaDVxNFJNRkRRVVEwU2t2RGVQZmVlMjhyTFMxMTV3QUEyUy90QUNKang0NzE5OHphdG0xck0yYk1jUE5CMnJScDQ4NGxObCtwODd5c3JNeTIyMjQ3TnhRWUFOQThxTk1pclJVUTI3ZHZiNmVjY29vTEhFSGZ4NXR2dm1tOWV2V3luWGJheVhiZmZYZTc3cnJyMW8vTXV1R0dHMnorL1BtaGx6bXBxYW01d045RkNGNzUvNCsvaXhCT1BQRUVmdzloMU5Sc09EY002WXIzQXJWcFp5QnFrcG8rZmJvTkh6N2NQMk0yZE9oUU4wdTlUNTgrYnI1SEVEeSsvLzU3TjNPZE5iSUFvUGxKTzRBb09HaFprc1FsVE5SMHRXVEpFbXZYcnAwYmNSWFFSTUxhczlNQkFNMURxRDRRelNoLzZxbW4zR3owUVBmdTNlMkREejZ3cjcvKzJoM3IyaURxR3dFQU5FK2hBb2lhc1RUeWF0Q2dRZjRaczgwMzM5eXR2QnMwWDZsSmErblNwVnhrQ2dDYXFWQUJSTTFYQ3hZc3NJVUxGNjV2b21yZHVyWGw1K2U3ZlZFMmtyanNDUUNnZVFrVlFDUm94dXJaczZkL1p0Mkt2YUlzUkVONXlUNEFvUGtLSFVBMGhGZk5XSW16MGdPYVNLamwzdXU3VmdnQUlMdUZEaURLTHRUUGNkRkZGN25GRW9OZ29mNFI5WVZveG5veWRaMEhBR1NYdENjUzFxWitqaEVqUnJpQW9pRzhhOWFzOGU5SlRvOVBaMTZJOTNPWlNCZ0JFd21qWVNKaE5Fd2tqS3FaVFNTc1RjRkFvNjAwQTMyZmZmYnh6OWFOU1lVQTBEeWtGRURVejZIT2NpMVgwclZyMS9XTEpnWVVGRXBLU3R4RXdvQ2FxclRjdTU2alZYZzFTZ3NBMEh5a0ZFQjBZYWc1YythNEdlaGExeXFZNjFFZjlZa3NYcnpZUFVmTG1TUzc2QlFBSUh2Um93MEFDQ1VqQVlUNUhnRFE4cENCQUFCQ0lZQUFBRUloZ0FBQVFzbG9BT0hhSHdEUWNwQ0JBQUJDSVlBQUFFTEpTQUJoR0M4QXREeGtJQUNBVUFnZ0FJQlFDQ0FBZ0ZBeUdrQVl4Z3NBTFFjWkNBQWdGQUlJQUNDVWpBUVFodkVDUU10REJnSUFDSVVBQWdBSWhRQUNBQWdsb3dHRVlid0EwSEtRZ1FBQVFpR0FBQUJDeVVnQVlSZ3ZBTFE4WkNBQWdGQUlJQUNBVURMYWhNVW9MQUJvT2NoQUFBQ2g1Q2g3aUxxOTg4NDc3b2VOSGowNjZmMVJOZ0JvcWRTcUUrZU5EQVFBRUVwR0FvZ2lrWkF4QUVETFFRWUNBQWlGQUFJQUNJVUFBZ0FJaFFBQ0FBaUZBQUlBQ0lVQUFnQUlKU01CaEdHOEFORHlrSUVBQUVJaGdBQUFRaUdBQUFCQ0lZQUFBRUloZ0FBQVFpR0FBQUJDeVVnQVlSZ3ZBTFE4WkNBQWdGQUlJQUNBVUFnZ0FJQlFDQ0FBZ0ZBSUlBQ0FVRElTUUJpRkJRQXREeGtJQUNBVUFnZ0FJQlFDQ0FBZ2xJejJnUUFBV2c0eUVBQkFLQVFRQUVBb0dRMGdET01GZ0phRERBUUFFQW9CQkFBUUNnRUVBQkJLUmdJSXczZ0JvT1VoQXdFQWhFSUFBUUNFa3RFQXdqQmVBR2c1eUVBQUFLRVFRQUFBb1dRa2dEQUtDd0JhSHRYOGtUc3VPbmJzYUtlZWVxb3RXclRJcnI3NmF2OXNadFRVMUx6Zzd5S0V0OTkrZTBkL0Z5R01IVHZXMzF1bjlwZWwydjErVFgxL2JiVWZYMXREUHgvTkcwMVlBSUJRQ0NBQVdoeGxUbTVidTNiOVB0S1hrUUJDNFFPSU05VlJWWldWdG1EZWQzYmpuODZ4dllZVWVGdSs3VFhVdi9XMnN3L2J5VDU2OTFXcnFDaTN0VjVnd2FhUmdRRDFVQjlBNGhaOFd3MjJwcjRmZFZNUVdMSm9nYjN5OUVOMjBqNGpiZDh0aXUzSUhmdlpQNlpkNXQyN2NkbDkrTmJMZHRZaDI5ditJMHJzb0syNzJEOXZ2OFlXelo5cjFkVlYvaU5RR3dFRVFMT2hvUEgxNXgvYXZYKzkyQVdCbjIvYnd5NDY1UUQ3NW91UC9FZWtadVd5cFhiOS81MWhVM2JvWXo4YjI5RnVudm9ibS9YeGUxNHdxZllmQWNsb0U1YStJUUZBWTFJL3hnZGU5bkRuTlJmWno4YVUyUys4Yk9QV3k4NXpRU0FUeWxldnRBZHV2c1JPbWJ5VisvbC91L3IzOXNHYkwvbjN0bXhrSUFDeVJ0QjB0M1p0dGMxODgwV2JkdWw1dHQrSUV2dlZZVHQ1RmZ2LzJocXZzbTlJNVd0V2VZSHE5L2FyS1R2YnZ0Ny9lK2MxRjlwbk05OXltVTlMYkZKVXloRDVYWmVWbGRucHA1OXVpeGN2dHF1dXVzby9teG5lTDRWNUlCRXdEeVNhdU04RDJaVGF6Njl0VXordm9aK2ZLdjJjNnFvcW0vM0ZSemI5d2R2dHlRZW0yZXFWeS94N20xNVpwMjYyNitURGJlOURUN0RPM1h0YlRrNXUycityYkVRR0FpQ1dncUF4NSt2UDdkb0xUclZqZHg5aXAwd2Vhdy9kZG1Xc2dvY3NXVGpQSHJqcEVqdDYxMEYyK3MrMnNUdXZ2Y2dXZnovUDFsWlhaeXlJeGhFQkJFQ3NxS1A2aHlVTDdiNGJwdHJwQjR5MzQvWVlhby9lZmIwdG1EdmJmMFM4cWJQOXpxc3ZzQ04yNm1mbkhyVzdQZit2ZTJ6bDhoK2FaU0FoZ0FDSWhWVXJsdGtMajkxblp4MjZnMDNadnJmckNKLzE4YnYrdlEwbko2ZVY1ZVhsdXZiOFRGTDJOUE9ORjJ6cTJZZTd6T1NDWDB5MlQ5OS93OHJYclBZZmtmMVVacEhESW4wZzhVVWZTRFJiYmJXVnY3ZE83VytSNmZaWk5QVDl0ZFYrZkcxTi9Yek5zVmd3NXh1NzY5cUw3TTBYSG5PWlIwTW9MQ2l3Zm4xNzJFNFR4bGxKU1pFN3A1ZGVYRnhzblR1VldWNXVycFZYVk5pc3I3NjFCeDZhYnZNWExIS1B5VFNWbC9wSWR2dXZvMjNQZzQ2eGpsMTZiTElNNDB5dnZQN2ZjQXJhdDI5dlo1eHhoaTFac3NTdXZQSksvMnhtZUI5QUFrZ0VCSkJvQ0NBTjgvektpbkkzOVBhNkMwKzNPYk0vZDMwRkRhVjN6NjcyMjdPUGQ0RmlVNjlYMUlRMjQ4UFA3ZkpyNzdDVkt4c3VXOGd2S0xTK2c0YmJLZjk3clcwMmJMVGw1dVg1OTJRUG1yQUFOQ3IxWlJ5ejIyRDc3ZEY3MkxkZmZ0S2d3U00vUDgvTytlVXgxcVZ6aDVTQ2grUjYyY2lvRVlQdDdGT1A5TTgwREFYUkx6NTh4ODQ0Y0ZzN1l1Zis5dkY3ci9uM1pBOENDSUJHTmZQWmgyek45M1A4bzRiVnl2dFhWVlcxeVV5cU5nV2JGU3RYK1VjTnJjYldMSnBuajE3NUcvODRleEJBZ0hxbzRrbmNWTEVrYm5HN3YvWlcrL0cxdDJUUFNkeVNQU2R4Uy9hY3hDMlpaUXZuV1k4MmhkYTNwTUNLYzFQTENzS3FxS3kwczM1N3FkMTIxeVAyM3N4UGJla1B5emU1VUtKZTk4TEZTKzNPK3g3MXp6UWN2ZjkrSmZuV3l5c1BWY1oxbFZsYzZiY1grUlhUQnhKZjlJRkV3d1dsb2owL21RY3VPY3RldXYrdi9wSFptcXBxVzdpbXlsWlZwLyt6d2lndUtyUlJXdzYyenAwNldOdlNFaXNveUhmblNsb1h1ODV6QlpyM1Avak1mM1RES01sclpaMEs4Nnd3TDljL1k5WnJ5R2c3NjlZWExDY25lNzdYazRFQWFGUlZsUlgrM2pwRlhpV3FiK0I5dlcvaXBWN0YydEJXcnltM1Y5K1lZUTgvOXJ6OTdkNUg3Wlk3SHJKcmI3elhwbDU1cTkxMjl5TU5HanphNXVkWXZ6WUYxck9rY0lQZ0lUVmE5VGRFUUc1S0JCQUFqYXE2c3RMZjI1QXExTzVleGRyZnEyQTdGR3hZdVdZemhjUk9oYmsyb0xUQXVyVXVzSUxjNU5XdVJuK0Z5ZWlhVWtZRHlLYlNYU0RiNkRPZHVPa1BQSEZyNnZ1elVlME1wTFo4cjRMdFdKUm5BMHNMcll0M202MFVBcnNWZSsramJhR1ZGZVpaM2lhYXBySngyUk15RUFDTnFycXEvZ0FpQ3BhNU9hMnN2VmZ4YnVaVndEMWI1MXQrbG53L0xmWmVkKy9XZVRiQWU5MXRDL0lzeHcvK20xS3pWc09aQ1NBQVVLZFdyZEtyZGxRQmwrVG5Xajh2STFIL1FadThITmNzRkNkNlIyWDVPZGEvdE1CNmU2K3pPRDh2cGFDeGdTeHN3TWxJQU1uV1ZCcEE0OHZOei9mMzBxTUtXZjBIM2Ixc1JCVjFwNEpjYTRRKzkzb1ZlRFZvOStJODcvVVVXdWZXQlpZZllRUlZ1b0UxRHJMdkZRT05LTEcvUVpzcXNjU3RxZS9mMUZiNytiVzNaTTlKM0pJOUozRkw5cHpFTFpuY3ZIQUJKS0NmcS82RXNxSThsNVgwOWdKSzYxenYvL1B2YjJpcU5OdDZXWkE2Ky91MktiVFNnanpYM0JaVksrOW4xRlZtY1VVQUFkQ29vZ2FRZ0NwYk5XOFY1K2RhejVJQ2YvUldUb1AxbFJSNUZYeFhMMmdwKyttcVBoa3ZHOHBraGI4dUF5R0FBRUNka2dXUWJqMjYyZW5ublc3SG4zNmNqZGw2dEJVVUZQajNwTVpsSlc3MFZyNlhGUlJZTDYrQ2I1TVhQU3RSRTFsN0x5aXA3NlczdDdVdHlQV3lqY3dHam9BTElOa1ZQekliUUxJdC9RTFErSkwxZ1J4dytNKzhJTkxWQm13K3dOcy93TTZmZXA1dHYrdjIvcjJwYzFtSlY4RzM5cktTN3EwTDNOeUxMa1c1VnBUbWtpbWE4S2NncE1EUjJRdEs2bnZSejI3SU9xNlZBaE1aQ05COEJKVkdzRzJxRDZDeDc4OUd5VEtRN2oyNyszdnJ5anpmQ3pLVGZycW4vZnpZUS8yejZkUFBVYmJRdmpEZmV2dE5YSnJRcDQ3dlpOcDVRYU5iVVo1dDVrLzRVeEJTTU5MUGlhcHp0ODYyNStROVhZQ3NTeWIrbjhaR0FBSFFxSklGa0VVTE43NkFreXJVTFVadllXUEhiN2dlV1JndUtIbFpSQWN2bStoWFdtUUR2U0RSb3pqZnVubWJPdUVWTkxwNlFhTnRZVjdHMTZLYWZNaGtPK084TTJ6SDNYYXdZMDg5eHIyblpGcmw1R1pkRU1sSVNXWHJOeUVBalM5WkFQbGs1aWYrM29aVW9VN2NhMWYvS0hPVW1iUXB5SFY5R3VxRWI0Z0ZEUFB5OHV5WVU0NjJuMHdZNS8zOGRZRkIvODlCUng3bzdxdk5YVkNxSlFZUUFFaFZzZ0R5ek9QUHVyV2drbWxYMXM3YWxMYnhqN0pEVVhHUm5may92N1JCUXdkdGxGV29lYTVuMzU3K1VhSjF6WlRaaEFBQzFLTjJuNFArd0JPM3VOMWZlNnY5K05wYnN1Y2tic21lazdnbGUwN2lsa3hPa2dCU3ZxYmMzbnpscmFUUDBmL1R0bjFiL3lnN0hIYjhZVmJXb2N3LzJwRGU0L0lmbHZ0SDJZMEFBcUJSRlJTMTl2YzI5TTk3LzJtelo4M2VLSWpvZUZXalhSMHdPbVZMQXdmVjNWbStjdmxLVzd4d3NYK1UzVExhQjZKdkNnQlFuNktTVW45dlkzKzkvQWFiL3VoMFc3bGk1ZnA2WmZhWDM5alN4VXZkZmpZWXNzVmdONnM4R1YwTjhaRUgvdVVmWlQ4eUVBQ05xcWlrL3Vhb1p4OS96aTc2OWYvWmY1LytPL3ZkTC8vSC9uclpqMWN2akQwdmJvejZ5U2ovWUdQUFBmRzh6WGg3aG4rVS9RZ2dRRDBTMi91MTZWdHg0dGJVOTJlajBsYXJyWDFCbGJkWC83WEoxYWxlV1pIODRsTnhsWnVUdThHY2xvQitWN08vbk8yeXE0MnR0VEt2UElhM0wvZVBzd2NCQkVDanFsdzYxNnNzSzIxNHV3b3J6TW0rYTJEVXAzcHR0YzM1ZHE1L3RDNXdxTm5xcVVlZXR1c3ZyWjFKMVZocFhyV045QUxITUs4OGNsdGxYemtRUUFBMHF2Smw2eVlOdGkrc3NURWRLMnhBU1lYbHVteWtHUVFTN3kxb01NQ3lINWE1d0xGdy9rS2JkdTJ0OXZ5VHovc1BrQm9yOGdMbjBMYmxOcUtzd3Rxa3QreFhyQkJBQURTcXRRbVh0RlZmYy9lU3RiWlZwM0xyMDdyU1dqV0RRTEpvd1NLNzVIZVgyTVgvUGRVdXUraHkrK0tUTC94N2FpeS8xVm9iVkZwaG96dFVXSWNpTlZINmQvbXlyVmt5SjJoTGpiTE5tVFBIL2JBZVBYb2t2VC9LQmpTbDRET1krRmxVWDBSdzI5VDNCN1NmN0ZqUFMzeHU3ZU5BUXowL21iWFZHMS9TTnMvN0t0dTdUYlZ0MWJIY3VoVlZlWUZrNC84am0xUlZWZHV5cGN1OEF0TlJqWmRoMWRpQU5oVTIxbnQvWFlyWFdyS0o3elZleHVJL1liMmdIT082WlNRRDBROENtaU45dGxWaHh2VTJHNjJ0cXJ0anZDRFhiR0RiS3U4YitocHJsNmVPOXV3T0pEbmU2Ky90WlZaak82NnhibDdneUsybnhsMWJXZTRIa2V4QkV4WlFqMVFxOGFhOERUWWRKNTZMeTNFeU5RbE5XSFVwempNYlhsWnBvOHZXV0VsdTluVzBleVZnWFF2WEJZN2VKZFdXN3dWR3IxanFWYlBXZTU5MWxGbGNFVUNBZWdTVllWeHZzOUhhNnRTRzVucHYwVnJubTQzc1VHRmp2SXhFSGM5NStYbldxVXNuNjlDcGcvK29PTkh2bzhiYTUxZlpPQzl3S0pOU1JxWDNrWXFhbXV6S1BpU2pBU1JiUDlCQVhlcXJ2T055Ryt6SDhUaVorcHF3a3RHUFVVYWlFVnRuL3VvNE8vTjN2N1N6Ly9jc08vYTBZOU8rY21IRHFiRTJlZFcyZGFjMWJraHVLaGxIYldxKzhrclBQOG9PWkNCQVBZSktNYTYzMldodDFhYWJzSkpwWGRiQnlucjJjZTlkMjJhREI5cXZMenJIaWxvWCtZOW9DbXZkWEk2eFhvWTBza09sR3d6Z3ZiUndhbWpDQXBxVlZDcnhwcndOTmgwbm5vdkxjVEtwTm1IVlZybHFwWnRia2FoMVNXczc0b1REL2FQR0ZFd0NyTEF0TzFSWTBjYVg5MGhidG5XZ0N3RUVxRWRRR2NiMU5odWwyNFFWcUtvb3R6a3ozdktQZnRTNVk2a05iUmQwdGplMEdtdWJYMlZidGwvakFrZWJnc3o5RGx3QXliTGZLUUVFcUVjcWxYaFQzd2I3Y1R4T3BpWmtCaUl6SHJuWGxzMy9jYWtRWlNUdlBYU1hkU2lzY1ozdHc3eEEwcnFCQW9tR0ZZOW9YMjVidEsrMDBnYnBlc20rTHdRcEJaQTFhOWJZeXBVci9hUHdGaTFhVk9kVng0QTRDaXJGdU41bW81eTg4TFd2dnFYL2U5clZOdi96ajZ4aXpXcDcrLzViYmVtM1g3bjd2Q0t4TWkrUWpOb2drRVF0SXpWVnJjczROS3k0clpkeDZQOXBDTG9tZW9QOThBYVNVZ0I1OXRsbjdZb3JyckJYWG5sbG96YklWS3hhdGNvZWV1Z2h1K2FhYSt5VFQ1SmYreGlJbzFRcThhYThEVFlkSjU2THkzRXlPZm5ST3Iycnl0ZlltM2ZkYUU5ZC9GdWIvOGxNLyt5UHZQOStmU0JSeHRCbS9ZVEVWSVBKdXNlMmRZRkQ2MVVwNDlCN1czZHZROG5KelhkbGwwMVNDaUFEQnc2MHFxb3FtejU5dWdza0w3LzhzcTFZc2NLL2Q5MjNOS245Z1ZIRzhjUVRUN2pudlAvKysrNXgvZnYzOSs4RjRpK29ET042bTQxeUN4cG4xSlJYUkM1ajJOSUxBQ1BMeXExOWZyVy9SRXBkNWVhVnE3ZHBIc2NvNy9GYk5GTGdDTFRLVlU5OGRnV1FWdDZIY0pPZlFtVWRsMXh5aVd2S2t1REQyNmxUSit2YnQ2OFZGUlc1N0tTd3NOREdqeDl2aXhjdnRxKysrc3FXTDE5dU9UazU3dm02M1d5enplelFRdzkxUHlNTkwvaTNDT0h0dDkvZTBkOUZDR1BIanQybzBvN2JyV2hmNG5xYzZNMnJUckN2bnJyWlAybzhlaWxycXMzbXJjNjE3OWZrV1dXTlhxTTJMWEpZWTUyTHFxeGJjYlVWTlZGTFVyditJMjIzSzk3ME1oSHZCZmlDY295cmxESVFWZjViYnJtbDVmcHZMUGhRTEZ5NDBONTk5MTE3OWRWWDNiRUN6SXN2dm1nelo4NTB3VU9DSmkvMWZZd2NPZEx0QTlsQ2Y4RDZ2TWYxTmh0RmJjSUt5eXN5TnlHeGYybTFqZWxZYnNQYWxWdlhva3AzcStOK2JhcmQvWHBjVThqMXlxVlZzbFVXWXl6bFZ6dHExS2lrSGVBS0VFR1EwSWRhKzhrKzJNcE9CZzhlN0I4QjJhRyt5anNPdDhHbTQ4UnpjVGxPcHJCdFIzK3Y2V2pDbi9wSk5tdGI1VzRqVFFETUZPLy9WOWxsazVRRFNQZnUzYTFqeC9SLzhmb1FLWE5KekdDQWJCRlVobkc5elVZZE5oL243eUZSNjg1OS9MM3NrVmErTkhyMGFQZkJUWWNlVC9NVnNsVXFsWGhUM3diN2NUeE9wdHVZM2EzWDlnZjZSOW1oYmJlZTFudjAxdFozcSswc3R3SFczMm8vWUxTTk8rMUcveWg3cEJWQWxFWG93NUVPUGI1ZHUzYldzMmRQL3d5UVBZSktNYTYzMlNnbk44L0duM08zYlhINFJWNEJwMVVGTmJxaTBuWTI3dWZIMjRUano3U1IreDFpSS9ZK3dIYjZmNy8xNzgyTW50djl6SGI5ODh1VzM3clVQNU05MHZydGxaYVd1bUc0K3ZDbVNoM3dZVElYSUE1U3FjU2I4amJZZEp4NExpN0hkZEZqaGgzOEc5dnBEODlZYm5GbUs4Nzg0aEpybFlIbWNtVWRPNTN5RytzNmFKaXJ4d0tGclVzeUZ2aUdUN25BdHYzMTNZMDJ0RG5UMGk0RkJZT2cwendWK2hBcGN3R3lVVkFaeHZVMjIzVVpzWVB0ZmRObjFtWFVSUDlNTk5zYy9ndmI0NXlMYk5KdnA5cjRvMDZ4amdNMjkrOUpqNXFwZm5MWUNaWlhVT2lmK1ZINXFwVmV4WmIraE9wRXVVVWx0dlBGTDlqd1E4NWZOd005UzZVZFFJWU9IWnJXR3Z5OWV2V3lzckl5L3dqSUxxbFU0azE5Ryt6SDhUZ1ZSZTI2Mkk2L2Y5ekduUEpYLzB3NEhmb01zRTUrd0ZERzBMSHZRTnRteWtsZUZ2RmJLeWhKTDh2cFBYcThGZGJ4bk1yeTFmNWVPRjFHVHJSOWIvM0dPZytmNEovSlhta0hrTHk4UEJzK2ZMajdCZW1Ec2luS1dJQnNGVlNLY2IxdExqVC9ZYk05ajdQOTdwaHJlY1Z0L2JQcDZUbHk0OUZkS3FjMkhUdmIxbE5PVFBtYnZoNDNlT2M5M1hPVEtTNXQ1KytsYjl3WnQ5aU9GejV1QlczYSsyZXlXNmlHUE0wSlVUTldYUVVjVUpBWk5teVlmd1JrbjFRcThhYThEVFlkSjU2THkzRzZpc3E2MnVTN0Y5alFnOC96anRMck42MXZkRlRicmoxczJHNzcrVWYxSyszYVBXblQxWS9TNzg4dDdUWEU5cjFqanZXZmVLUUxsczFGcUhmU3AwOGZON0txUHZvUURSa3l4QzF6QW1Tcm9ES002MjF6bEpPWGIxdE11Y0FtM2ZpcEZYVklmZlRtM0pudituc2JVM2wxN0w5WlNwVjNhZWZ1N3ZISlZKYXZzVmR1dnR3LzJyUld1Zm11bzN5UGE5NjNvdlpkL2JQTlI2Z0Fvc0xWdkk2NkNsbjA0V2J1QjdKZGZaVjNYRzZEL1RnZWg2WG50dWsyd1BhK1paWU5tSFNpZjdaK1M3NzcydGJXYzdtSVZKZExYN0Zvdm5zUGliU00vUGRmZlc1UFgvTGZ0bUxoQXY5cy9VcDdEN1ZKZi8zRWhublpWRTVlWHFUeWlLdlF1WlNDUSsxQ1RxVE1RNHNuQXRrc3FCVGpldHVjNlQzbWV0bkkySk92dFlsWHZHR3R1OVcva25mbHFoWDI5bjNUNml5WHZNSkN5MG1oSCtTSE9kL1lkelBlc3VxcVN2ZXpsc3o1MXA2NTh2ZjIrdTEvOFFLVWxvYXZuN0tPUWZ1ZjdtVWQ3M2xCc0o5N0g4MVZTcXZ4MXVYR0cyKzB1WE4vdkRwWVFFdVdqQnMzenZiWVl3Ly9UQ1NzeGhzQnEvRkdFL2ZWZUFNNmx1QmNYSTR6cVdadHRiMTM4em4yK2IrdU1hOTI5ODl1clB1d1VUWjh6OGx1RW1DaWxZc1gyZ3ZYWFd4cnF6WWRCRVRMcStjWEZsbUZGNWhTMVc3QUtOdjY3RHVzblpkOUJHVVJSU1orUmtPSzFKc3pac3dZZjI5RFdycUV1UjlvRHZRSHJNb3dycmN0aVpxZ1JoMzNaNXQ0Nld2V3R0OFcvdG1OL2VlajkyejZGYiszTDE1KzFxb3IxMTArVjAxYnMvNzlYTXJCUTJxOElKVnE4TkFLd3lPTy9wUHRmdVZiMXI3UE1QZjdhUWtpWlNEbDVlVTJkZXJValNZV2R1alF3VTQ5OVZUL0tESXlrQWpJUUtMaGVpQ1pPYzQwTlNWOTl0QVZOdU8yODd5RHVvTkNia0dodGUzZXk4cVgvMkNydkF5a0lYUWN0cDF0ZmVadDFtWVRUV3hoQk9VWVY1RXlFQzNScm9tRmlXOVMrM1ZsSmtDMjBlZFpsV0JjYjFzcXJhYzErTC9Pc2trM2ZHeGxtNDMxejI2c3VxTGNsc3llMVNEQlE5ZDIzK2FjdTJ5WGk1OXZrT0NSRFNJRkVLbTl3S0wyUjR3WTRSOEIyUzFacFIybjIyRFRjZUs1dUJ3M0pQMC9wZDBHMks2WC90dTJPZmNlMTNuZFdIcHRmNUR0KzdlNTFtZUhnNzNYRWJrYXpWcVIzN2xHV2lYTzlSZ3dZSUMxYlJ0dUppa1FOMEZsR05kYnJNdEcra3c0MFBhL2E0SDEyZWt3NzB6RE5mdmtGWmZheEN2ZnN2RmU1bEhZaGlXYUlnY1F6VGJYekhSOW9MVXg5d1BOU1NxVmVGUGZCdnR4UEc1TUJTVnRiWnV6YjdjOS9qTFQ4a3M3K0djelE4MVZZMDY1emliZi9iMTFHTWpxNG9HTTVGN0JuQkFGRTgwK0I1cUxvRktNNnkwMjFxN1BVTnYvem5rMitJQmZ1NG8vRXErYzJ3OGNhL3ZmdmRBRzduRzhteVdQSDJVa2dIVHIxczI2ZHUzcStqN1NXYWtYaUx0VUt2R212QTAySFNlZWk4dHhVOUdFd1pGSC9jSDI4d0pKeDJFVFhDQklseTR4dThzbEw5dHVWN3krN2hvaklYNUdjeGRwR0c4aURlblZTcjBOY04xemh2Rkd3RERlYUxiYWFxdjFGV05jYjBYN0VyZmp1SmozM2pQMjlqVW4yY3A1WC9wbjZwYlh1cTFidjJyemZVL3gzay9UZHBBSDVSbFhHU3NkRGVsdGdPQUJOQ2xWaFBvamp2TnRzQi9INDdqb05tcFhtM1Q5UjE1ZytMM2xGclh4ejliaXZkNStFNCsyL2Y4Mnp3YnZkNXAzMkxUQkl4dFFRa0E5Z2tveHJyZEluZm92aGg5eW5ydm15S0Q5ei9EUHJyUFozaWZiNUhzVzJVL091TWxOUGtScU10YUUxWUJvd29xQUpxeG9XQXNyMm5HY1ZhNWVibk5lL2FmMW1uQ0E1Y1gwbXVSQmVjWVZHUWhRRC8wQnF6S002eTNDeXk4dXRYNjdUSWx0OE1nR0NtK3gvaFRHL1k5RWY4aHhSdmxGUS9sRlEvbEZFL2Z5SXdNQkFJUkNBQUdBRmtEWnpJb1ZLOXhXbjRxS0NsdTZkS2xWcGJEMFBVMVlFWkVDUjBQNVJVUDVSZE9jeXUveHh4KzNOOTU0d3pwMzdtd25uM3l5ZjNhZGp6NzZ5SjU4OGtsYnRteVpPOVlsTi9iWlp4L3IzLy9IVllSWHJWcGwvL3JYdit5VFR6NXgvNittWldpWnFrbVRKdFU1UllNTUJBQ3kzSC8rOHg5Nzg4MDNyYXlzekdVUWlXYlBubTBQUFBDQTllM2IxMDQ4OFVRNy9QREQzYVR2dSsrKzIzNzQ0UWYvVVdiMzNYZWZlK3lCQng1b0o1MTBrazJZTUVHak9HMzY5T24rSXpZV09ZQW9NblhzMk5INjlPbmpOcjBCQUVEalVMYnc2S09QMnJCaHc2eFhyMTcrMlIrOStPS0wxcTVkTzVzOGViSmJka29ycHYvMHB6KzF5c3BLZStlZGQ5eGp2djc2YXhjOGR0OTlkM2VOSnkxTnRkTk9POW1nUVlQc3JiZmVxck01SzNRQVVlcFhVbEppVzJ5eGhaMXp6amwyenozMzJKMTMzbW1ubkhLS1M0L2luaG9DUUhQdy92dnYyNElGQzF6bFg1dXVGcXZnTUhEZ1FMZlliVUNCUkpmZCtPNjc3OXp4bDErdVcrSkZBU1BSNXB0djdvS0hmbjR5b1FLSTBwOGVQWHE0aUhiRERUZTR0RWpSN0lNUFBuQVp5SEhISGVjaUhnQ2c0V2dOUWpVeDdiREREa212dzZRT2N3VVJ0UkxWcHJwNjVjcVZibDk5SThYRnhkYTZkV3QzSEFoYWxPcnFlRThyZ0NpQzZVWHFrclhubjMrK1hYSEZGYTdEUm0xcHp6MzNuTTJmUDkrOUVMMnA2dXBxLzFrQWdJYWdlbGZyRUk0ZlA5NC9zNkVnUU9neHRlbWNPczVGajZ2ck1iSjY5V3AzVzF2S0FVVEJRMm5QbENsVGJOcTBhWGJ3d1FmYnUrKys2NXF0RkRnUzZVVXBpQUFBR3NiMzMzL3ZPczczM0hQUFRTNWtxeXdrbWNUbjFmZWxQL0lvTEdVZVJ4NTVwRjE0NFlVdW1OeDIyMjMyNzMvLzIvMm42c1JaczJhTi84aDFuVHJwREQ4REFLUkh3M0xWMmQybVRSczNDa3ViTWdYVnlkcFhuUncwU1NYV3p3R2RVeisycVBtcXJzZEk4TGphVWc0Z3VsQ1Vybi8rNFljZjJyMzMzcnQrK05laVJZdGNFNWJPQXdBYXg3eDU4MXlnVUQ5MHNIM3h4UmV1djBMN3I3MzJtZ3NnR3RDMGNPRkMvMW5yNkF1K3pyVnYzOTRkS3dpcEh6dVlKeEpRL1M1MTlXbW5IRUFVaVRSSlpjYU1HZTVZVFZSUFAvMjAvZVV2ZjdIbHk1ZmJ0dHR1Njg0REFCcWU1bXFjZHRwcEcyeURCdysyMHRKU3Q2OTVIUG41K2RhelowOFhXQktINHM2YU5jdDFOV2lVbFdpT2lIejY2YWZ1VmhSa1ZOOTM2dFRKamF4Tkp1VUFvc2lrb2JxYTBmanR0OSs2d1BIS0s2KzRUcGJqanovZVpTY0FnTWFockVHanBCSTN0UlNwaTBIN0dpMHIyMisvdmVza0QxcUtYbi85ZFh2d3dRZGRuN2FtWVlnQ2lZNDFvdXZWVjE5MWo5UEV3cmx6NTlyRWlSUGRZNUxSWkkyVU95dVVDZ1dwVHRCSnJ1RmhGMTEwa1hYdjN0MTFxb3ZHRnF1UFJJK0xLdTU5S2MxcEtZU21RUGxGUS9sRjA5ektUd0ZBbGY0UlJ4emhuMWxIVXl4ZWV1a2wxeVJWVkZUa0FvWUNRK0t3WFRWOVBmWFVVeTViVWQzZHBVc1hGM3lHREJuaVAySmphUVdRWlBTZnFHTmQwWXNBRWorVVh6U1VYelNVWHpSeEw3K1VtN0FBQUVoRUFBR0FaazdOVXBkZmZybnJlbEJXYzhzdHQyUms1Q3dCQkFDYU9RMXlVai8xODg4Lzd4WlFWRWU3RmwrTWlnQUNBQzNBWG52dFplKzk5NTViL21TLy9mYkxTUDhQQVFRQVdnQU44ZFdtbWVyQkVOK29DQ0FBMEFKb2lPNklFU05zNU1pUjd1cUZtVUFBQVlCbVR0Y0UwZXh6TGZ1Kzg4NDd1NmtXdW5SdFZBUVFBR2ptdEJqdVVVY2Q1WnF3dEhySTBVY2Y3UzdGRVJVQkJBQ2FBZlZ0TEZteVpQMDFQaEpwTFN2Tk90Y3lWTnEwWGxheWkweUpsb24vNnF1dmJQSGl4ZjZadXFrYlB0SlVSMmFpTTVNMUNzb3ZHc292bXVaVWZsb2xYYzFTV2dkTGl5a20wcVUzTlBvcVdGQlJtY2crKyt6aitrUUNDaGozMzMrL1crVTNvRXZoSG5qZ2dVa3ZOaVZrSUFDUTVUUlJVQ3ZwNmd0OTdhQ2pCWEMxY3ZvMjIyeGo1NTU3cnAxNjZxbnVrdVFQUGZUUSttWGVkY0VwTFpaYlVWSGhMbEgrbTkvOHhsMnlYTmRLZitLSko5eGpra2s3Z0dnQ1NyRHBLbFc2clN1S2IrcCtBRUEwYXJwU0pUOXUzRGdYUUdwVDlxSCtqbDEyMmNWbEVtck8ybmZmZlYzUUNGcU5Qdi84YzlkMHRmdnV1N3ZXSkdVb0dxMmx5WVphMGwyQkpabVVBNGdDZ2RhRkh6VnExQWFibGdOTzFwYW1LMWdOSHo3Y3ZRaWxRWG8rQUNDemRPRW9YWWxRbzZ0cVU1UFZuRGx6WEIyYytFVmVRVVFYazlJRnFXVDI3Tm51L243OStybmp3SUFCQTF5Z1VYQkpKdVZhWGIzNHh4NTdyRXVGSG52c3NmWGJYWGZkWlR2dXVLT0xnZ0ZOVWhrNmRLamRmdnZ0OXNnamo3aXJZMmtxUFVFRUFESkgxMmw2NFlVWDNOTHNXcWE5TmkzUkxzR1ZCeFBwbks0VElucWNPdGxyOTNVRVZ5SU1IbGRiV2htSXNvcjMzMy9mcnIvK2VyZGRkOTExN3NKUzExeHp6Zm9yRllwU29EMzIyTU8xc2QxMDAwMzI0b3N2MnBRcFUxelBQd0FnTS9TRlhzMVdhZzFLSnFqNGszV0M2MnFGeWx4RWoxT3pWVzNCODRMSDFaWnlBRkdFVXNieDhjY2YrMmZTb3pRb3VBZ1ZBQ0NhYjc3NXhxMm9PMm5TcEEyYXB4SUZyVDZKbDdNTnFMTmRRVVQwdUxvZUk4SGpha3M1Z0tnVFJSMHVEenp3Z0MxWXNNQm16cHpwamxQZE5JUk0xMVVIQUVTbnBVbTZkdTFxUC96d2d4dHBwVTM3cXF1MXYzVHAwdlZYSEV4Vzl5cXJVS3VTRkJjWEozMU1NS2RFVjZKTlJtRXJyWUhhU25QVTFwWnVOcUVNSk15OEVNYVJSMFA1UlVQNVJVUDVSVk5mK1YxMjJXVzJmUGx5LzJoanUrNjZxeHU2KzhjLy90SDFTUjl3d0FIK1BldnE0NmxUcDdyTDFXcTRyaTZGKzhvcnI3ajVJNXBIRXRCbGNKOTk5bGs3ODh3emszWkJwQjFBR2hzZndHZ292MmdvdjJnb3YyalNMYisvLy8zdmJpTDM2YWVmN3A4eE42bGJrd04xTHVob1Y1LzFndzgrYUljY2NvZ05IanpZelR6WG9DY0ZuUWtUSnJqSGFHQ1UrcmlWblJ4MzNISHVYRzBNaXdLQVprenpQOVNzTlczYU5KZGxhQ1hlaHg5KzJBM3QzWHp6emQxak5IeTNmLy8rcnF0Qjk3Lzg4c3QyODgwM3V5WXhEWWlxQ3hsSVJId0RqSWJ5aTRieWk2YTVsZCtycjc3cTVtem9nbEdKMU9HdUNZV0xGaTF5V1lnQ3g3YmJidXNtZXdmVXhhQW1LNjNhcTMyTjd0cHV1KzNjbFF6clFnQ0ppRC9nYUNpL2FDaS9hQ2kvYUdqQ0FnQ0VRZ0FCQUlSZzl2OEI0aE1PcEkrWGx0c0FBQUFBU1VWT1JLNUNZSUk9XCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0Tm9ybWFsKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBSUFBQUNRZDFQZUFBQUZEbWxVV0hSWVRVdzZZMjl0TG1Ga2IySmxMbmh0Y0FBQUFBQUFQRDk0Y0dGamEyVjBJR0psWjJsdVBTTHZ1NzhpSUdsa1BTSlhOVTB3VFhCRFpXaHBTSHB5WlZONlRsUmplbXRqT1dRaVB6NEtQSGc2ZUcxd2JXVjBZU0I0Yld4dWN6cDRQU0poWkc5aVpUcHVjenB0WlhSaEx5SWdlRHA0YlhCMGF6MGlXRTFRSUVOdmNtVWdOUzQxTGpBaVBnb2dQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRLSUNBOGNtUm1Pa1JsYzJOeWFYQjBhVzl1SUhKa1pqcGhZbTkxZEQwaUlnb2dJQ0FnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklnb2dJQ0FnZUcxc2JuTTZjR2h2ZEc5emFHOXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNCb2IzUnZjMmh2Y0M4eExqQXZJZ29nSUNBZ2VHMXNibk02WlhocFpqMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzlsZUdsbUx6RXVNQzhpQ2lBZ0lDQjRiV3h1Y3pwMGFXWm1QU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNScFptWXZNUzR3THlJS0lDQWdJSGh0Ykc1ek9uaHRjRTFOUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmJXMHZJZ29nSUNBZ2VHMXNibk02YzNSRmRuUTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpVVjJaVzUwSXlJS0lDQWdlRzF3T2tOeVpXRjBaVVJoZEdVOUlqSXdNak10TURVdE1EWlVNakk2TWpnNk1EWXJNREl3TUNJS0lDQWdlRzF3T2sxdlpHbG1lVVJoZEdVOUlqSXdNak10TURVdE1EWlVNakk2TXpBNk1qRXJNREk2TURBaUNpQWdJSGh0Y0RwTlpYUmhaR0YwWVVSaGRHVTlJakl3TWpNdE1EVXRNRFpVTWpJNk16QTZNakVyTURJNk1EQWlDaUFnSUhCb2IzUnZjMmh2Y0RwRVlYUmxRM0psWVhSbFpEMGlNakF5TXkwd05TMHdObFF5TWpveU9Eb3dOaXN3TWpBd0lnb2dJQ0J3YUc5MGIzTm9iM0E2UTI5c2IzSk5iMlJsUFNJeklnb2dJQ0J3YUc5MGIzTm9iM0E2U1VORFVISnZabWxzWlQwaWMxSkhRaUJKUlVNMk1UazJOaTB5TGpFaUNpQWdJR1Y0YVdZNlVHbDRaV3hZUkdsdFpXNXphVzl1UFNJeElnb2dJQ0JsZUdsbU9sQnBlR1ZzV1VScGJXVnVjMmx2YmowaU1TSUtJQ0FnWlhocFpqcERiMnh2Y2xOd1lXTmxQU0l4SWdvZ0lDQjBhV1ptT2tsdFlXZGxWMmxrZEdnOUlqRWlDaUFnSUhScFptWTZTVzFoWjJWTVpXNW5kR2c5SWpFaUNpQWdJSFJwWm1ZNlVtVnpiMngxZEdsdmJsVnVhWFE5SWpJaUNpQWdJSFJwWm1ZNldGSmxjMjlzZFhScGIyNDlJamN5THpFaUNpQWdJSFJwWm1ZNldWSmxjMjlzZFhScGIyNDlJamN5THpFaVBnb2dJQ0E4ZUcxd1RVMDZTR2x6ZEc5eWVUNEtJQ0FnSUR4eVpHWTZVMlZ4UGdvZ0lDQWdJRHh5WkdZNmJHa0tJQ0FnSUNBZ2MzUkZkblE2WVdOMGFXOXVQU0p3Y205a2RXTmxaQ0lLSUNBZ0lDQWdjM1JGZG5RNmMyOW1kSGRoY21WQloyVnVkRDBpUVdabWFXNXBkSGtnVUdodmRHOGdNaUF5TGpBdU5DSUtJQ0FnSUNBZ2MzUkZkblE2ZDJobGJqMGlNakF5TXkwd05TMHdObFF5TWpvek1Eb3lNU3N3TWpvd01DSXZQZ29nSUNBZ1BDOXlaR1k2VTJWeFBnb2dJQ0E4TDNodGNFMU5Pa2hwYzNSdmNuaytDaUFnUEM5eVpHWTZSR1Z6WTNKcGNIUnBiMjQrQ2lBOEwzSmtaanBTUkVZK0Nqd3ZlRHA0YlhCdFpYUmhQZ284UDNod1lXTnJaWFFnWlc1a1BTSnlJajgrMElnVnhBQUFBWUJwUTBOUWMxSkhRaUJKUlVNMk1UazJOaTB5TGpFQUFDaVJkWkhQSzBSUkZNYy9NMzdtUjZOWUtCWXZEYXVoUVltTnhjaXZ3bUtNTXRqTXZQbWw1bzNYZTIvU1pLdHNGU1UyZmkzNEM5Z3FhNldJbEd4WkV4djBuT2Vwa2N5NW5Ycys5M3Z2T2QxN0xuZ2pXVlV6eTRPZzVTd2pQQnBTWnFOelN0VWpGVlRTUkF1K21HcnFrOU1qRVVyYTJ3MGVKMTUxT3JWS24vdlhhaE5KVXdWUHRmQ2dxaHVXOEpqd3hMS2xPN3dwM0tSbVlnbmhZK0dBSVJjVXZuYjB1TXRQRHFkZC9uRFlpSVNId05zZ3JLUi9jZndYcXhsREU1YVg0OWV5ZWZYblBzNUw2cEs1bVdtSmJlS3RtSVFaSllUQ09NTU0wVWMzQXpMMzBVa1BYYktpUkg3d08zK0tKY2xWWmRZcFlMQkltZ3dXQVZIelVqMHBNU1Y2VWthV2d0UC92MzAxVTcwOWJ2VzZFRlE4MlBaTE8xUnR3T2U2YmIvdjIvYm5BWlRkdzFtdW1MKzBCLzJ2b3E4WE5mOHUrRmJoNUx5b3hiZmdkQTJhNy9TWUVmdVd5c1M5cVJROEgwRjlGQm92b1diZTdkblBQb2UzRUZtUnI3cUE3UjNva1BPK2hTODI0V2ZRZ3hHQ2NnQUFBQWx3U0ZsekFBQUxFd0FBQ3hNQkFKcWNHQUFBQUF4SlJFRlVDSmxqYUdqNER3QURnd0lBVmJqV1B3QUFBQUJKUlU1RXJrSmdnZz09XCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0VG9vbigpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVA4QUFBQUJDQVlBQUFBUmtIaWpBQUFCaEdsRFExQkpRME1nY0hKdlptbHNaUUFBS0pGOWtUMUl3MEFjeFYvVFNvdFVCTzBnNHBDaE90bEZSUnhMRll0Z29iUVZXblV3dWZRTG1qUWtLUzZPZ212QndZL0Zxb09MczY0T3JvSWcrQUhpN09DazZDSWwvaThwdElqeDRMZ2Y3KzQ5N3Q0QlFxdkdWRE1RQjFUTk1qTEpoSmd2cklyQlZ3UVJRQmdoREVuTTFGUFp4Unc4eDljOWZIeTlpL0VzNzNOL2pnR2xhRExBSnhMSG1XNVl4QnZFczV1V3pubWZPTUlxa2tKOFRqeHAwQVdKSDdrdXUvekd1ZXl3d0RNalJpNHpUeHdoRnNzOUxQY3dxeGdxOFF4eFZGRTF5aGZ5TGl1Y3R6aXJ0UWJyM0pPL01GelVWckpjcHptR0pKYVFRaG9pWkRSUVJRMFdZclJxcEpqSTBIN0N3ei9xK05Qa2tzbFZCU1BIQXVwUUlUbCs4RC80M2ExWm1wNXlrOElKb08vRnRqL0dnZUF1MEc3YTl2ZXhiYmRQQVA4emNLVjEvZlVXTVBkSmVyT3JSWStBd1czZzRycXJ5WHZBNVE0dzhxUkxodVJJZnBwQ3FRUzhuOUUzRllEaFc2Qi96ZTJ0czQvVEJ5QkhYUzNmQUFlSHdFU1pzdGM5M2gzcTdlM2ZNNTMrZmdBNE9YS1B0LzdLL2dBQUFBWmlTMGRFQVA4QUFBQUFNeWQ4OHdBQUFBbHdTRmx6QUFBdUl3QUFMaU1CZUtVL2RnQUFBQWQwU1UxRkIrZ0hCQXdkSjFqOVdCc0FBQUFaZEVWWWRFTnZiVzFsYm5RQVEzSmxZWFJsWkNCM2FYUm9JRWRKVFZCWGdRNFhBQUFBVlVsRVFWUW96Mk5rWUdENHp6QUtoaDVnWldCZzRHQmdZT0JFbzJGc0tKK1hrNEZCaXBPQlFab0RRa3R4TWpDSXNERXdTSEZBTVJlRTVzVm1EaGNXTzFnWUdCZ1lHTWxJTnZqME1JN3daRWlzLzZrYmhnQzA0UWovdzcvSFpnQUFBQUJKUlU1RXJrSmdnZz09XCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0SWNvbkxpZ2h0KCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0MlM0Z4bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnIHN0YW5kYWxvbmU9J25vJyUzRiUzRSUzQ3N2ZyB2aWV3Qm94PScwIDAgMTYgMTYnIHZlcnNpb249JzEuMScgd2lkdGg9JzE2JyBoZWlnaHQ9JzE2JyBpZD0nTGlnaHQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NzdHlsZSUzRSAucyU3QmZpbGw6JTIzZmZmO3N0cm9rZTolMjMwMDA7c3Ryb2tlLXdpZHRoOi4xcHg7JTdEICUzQy9zdHlsZSUzRSUzQ3JlY3QgY2xhc3M9J3MnIHg9JzAuMTcwMzkyOTMnIHk9JzEwLjAwMjQ0OCcgd2lkdGg9JzMuOTAwMDU2OCcgaGVpZ2h0PScwLjkwMDA5OTM0JyBpZD0nTk5FJyB0cmFuc2Zvcm09J3JvdGF0ZSgtNjcuNSknIC8lM0UlM0NyZWN0IHg9JzguODI5NTA3OCcgeT0nMTAuMDAyNDQ3JyB3aWR0aD0nMy45MDAwNTY4JyBoZWlnaHQ9JzAuOTAwMDk5MzQnIGlkPSdFTkUnIHRyYW5zZm9ybT0ncm90YXRlKC0yMi41KScgY2xhc3M9J3MnIC8lM0UlM0NyZWN0IHg9JzE0Ljk1MjQ2OScgeT0nMy44Nzk1NzE3JyB3aWR0aD0nMy45MDAwMTM5JyBoZWlnaHQ9JzAuOTAwMDk5ODcnIGlkPSdFU0UnIHRyYW5zZm9ybT0ncm90YXRlKDIyLjUpJyBjbGFzcz0ncycgLyUzRSUzQ3JlY3QgeD0nMTQuOTUyNDcnIHk9Jy00Ljc3OTU0MjknIHdpZHRoPSczLjkwMDAxMzknIGhlaWdodD0nMC45MDAwOTk4NycgaWQ9J1NTRScgdHJhbnNmb3JtPSdyb3RhdGUoNjcuNSknIGNsYXNzPSdzJyAvJTNFJTNDcmVjdCB4PSctMTIuNzI5NTY1JyB5PScxMC4wMDI0NDcnIHdpZHRoPSczLjkwMDAxMzknIGhlaWdodD0nMC45MDAwOTk4NycgaWQ9J1NTVycgdHJhbnNmb3JtPSdyb3RhdGUoLTY3LjUpJyBjbGFzcz0ncycgLyUzRSUzQ3JlY3QgeD0nLTQuMDcwNDQ5OCcgeT0nMTAuMDAyNDQ3JyB3aWR0aD0nMy45MDAwMTM5JyBoZWlnaHQ9JzAuOTAwMDk5ODcnIGlkPSdXU1cnIHRyYW5zZm9ybT0ncm90YXRlKC0yMi41KScgY2xhc3M9J3MnIC8lM0UlM0NyZWN0IHg9JzIuMDUyNDY4NScgeT0nMy44Nzk1NzE3JyB3aWR0aD0nMy45MDAwMTM5JyBoZWlnaHQ9JzAuOTAwMDk5ODcnIGlkPSdXTlcnIHRyYW5zZm9ybT0ncm90YXRlKDIyLjUpJyBjbGFzcz0ncycgLyUzRSUzQ3JlY3QgeD0nMi4wNTI0Njg1JyB5PSctNC43Nzk1NDI5JyB3aWR0aD0nMy45MDAwMTM5JyBoZWlnaHQ9JzAuOTAwMDk5ODcnIGlkPSdOTlcnIHRyYW5zZm9ybT0ncm90YXRlKDY3LjUpJyBjbGFzcz0ncycgLyUzRSUzQ2VsbGlwc2UgaWQ9J0NFTlRFUicgY3g9JzguMDAwMDgyJyBjeT0nOC4wMDAyNTc1JyByeD0nMy40NTAwODIzJyByeT0nMy40NTAyNTczJyBjbGFzcz0ncycgLyUzRSUzQy9zdmclM0VcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRJY29uQ2FtZXJhKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0MlM0Z4bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnIHN0YW5kYWxvbmU9J25vJyUzRiUzRSUzQ3N2ZyBpZD0nQ2FtZXJhJyB2aWV3Qm94PScwIDAgMTYgMTYnIHZlcnNpb249JzEuMScgd2lkdGg9JzE2JyBoZWlnaHQ9JzE2JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDc3R5bGUgaWQ9J3N0eWxlMSclM0UucyU3QmZpbGw6JTIzZmZmO3N0cm9rZTolMjMwMDA7c3Ryb2tlLXdpZHRoOi4xcHg7JTdEICUzQy9zdHlsZSUzRSUzQ3BhdGggY2xhc3M9J3MnIGQ9J00gMTMuODU3MzIyLDguODc1NTI5NyBIIDEyLjQxMzQyNCBMIDEyLjQxMyw2Ljc4NyBoIC0xLjQyNTMxMSBjIDAuMjI3MDI2LC0wLjQ0OTQ2OTMgMC4zNjMyNDMsLTAuOTQ1MzkxOSAwLjM2MzI0MywtMS40ODg1MDA4IDAsLTEuNzk3ODc3NSAtMS40MDc1NzI3LC0zLjI0OTI4OTMgLTMuMTUxMTQ2NiwtMy4yNDkyODkzIC0xLjc0MzU3NDYsMCAtMy4xNTExNDc5LDEuNDUxNDExOCAtMy4xNTExNDc5LDMuMjQ5Mjg5MyB2IDAuMDI4MDkzIEMgNC41NzY0MTk0LDUuMDM2MzExOCA0LjAzMTU1MjQsNC44NTgzOTY4IDMuNDUwMzYwNiw0Ljg1ODM5NjggMS43MDY3ODYzLDQuODY3NzU2NyAwLjI5OTIxMjk4LDYuMzE5MTcyMyAwLjI5OTIxMjk4LDguMTA3Njg2IGMgMCwxLjc4ODUxMzUgMS42NjUzODU4MiwzLjMxMTc4OSAzLjQyNDU4NTEyLDMuMjQ5Mjg5IEwgMy43MzIsMTMuOTc2IGggOC42ODEgdiAtMi4xMTMzNjggaCAxLjQ0NDMyMiB6JyBpZD0ncGF0aDEnIC8lM0UlM0NyZWN0IGNsYXNzPSdzJyB4PScxMi44MDM5MScgeT0nOC4zOTc5NjgzJyB3aWR0aD0nMi44OTY4NzY2JyBoZWlnaHQ9JzMuODg2MDM3Nicgcng9JzAnIHJ5PScwJyBpZD0ncmVjdDEnIC8lM0UlM0Mvc3ZnJTNFJTBBXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0SWNvbkF1ZGlvKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0MlM0Z4bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnIHN0YW5kYWxvbmU9J25vJyUzRiUzRSUzQ3N2ZyBpZD0nQXVkaW8nIHZpZXdCb3g9JzAgMCAxNiAxNicgdmVyc2lvbj0nMS4xJyB3aWR0aD0nMTYnIGhlaWdodD0nMTYnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NzdHlsZSUzRS5zJTdCZmlsbDolMjNmZmY7c3Ryb2tlOiUyMzAwMDtzdHJva2Utd2lkdGg6LjFweDslN0QgJTNDL3N0eWxlJTNFJTNDcGF0aCBjbGFzcz0ncycgZD0nTSA5LjE1NjM1ODgsMS4wODA0MDA2IDMuNjcyOTM0MSw0LjY0MjAxNyBIIDAuNTQzNjQ5NzEgdiA2Ljc4NDAzMSBIIDMuNzU5MDYxMiBsIDUuMzk3Mjk3NiwzLjQ5Mzc3NiB6JyBpZD0ncGF0aDEnIC8lM0UlM0NwYXRoIGNsYXNzPSdzJyBkPSdtIDEzLjM0NzUxOCwxMy42NzY2NDUgLTAuNzY1MTU3LC0wLjU2MzU2NiBjIDQuMjI3NDg1LC01LjU2MDUyNDEgMC4yMTA0MTgsLTkuODgxMjAyIDAuMDM4MjUsLTEwLjA1OTY2NDggbCAwLjY5ODIwNCwtMC42NDgxMDE5IGMgMC4wNDc4MiwwLjA0Njk2NCA0Ljc1MzUzLDUuMDYyNzA3NiAwLjAzODI1LDExLjI3MTMzMjcgeicgaWQ9J3BhdGgyJyAvJTNFJTNDcGF0aCBjbGFzcz0ncycgZD0nbSAxMS4zMjE4NjgsMTEuNzk4MDkgLTAuODIyNTQxLC0wLjQ3OTAzMiBjIDIuMTQyNDM0LC0zLjU3ODY0NzQgMC4xMTQ3NzMsLTYuMzU4OTEgMC4wMjg2OSwtNi40NzE2MjMyIGwgMC43NjUxNTYsLTAuNTYzNTY2NiBjIDAuMTA1MjA4LDAuMTQwODkxNSAyLjUwNTg4MywzLjM4MTQwMDEgMC4wMjg2OSw3LjUwNDgyOTggeicgaWQ9J3BhdGgzJyAvJTNFJTNDL3N2ZyUzRSUwQVwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByaXZhdGUgc3RhdGljIGdldEljb25QYXJ0aWNsZXMoKTogc3RyaW5nIHtcclxuICAgIC8vICAgcmV0dXJuIFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQyUzRnhtbCB2ZXJzaW9uPScxLjAnIGVuY29kaW5nPSdVVEYtOCclM0YlM0UlM0NzdmcgaWQ9J1BhcnRpa2VsX1YyJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxNi4yOCAxNi41MiclM0UlM0NkZWZzJTNFJTNDc3R5bGUlM0UuY2xzLTElN0JmaWxsOiUyM2ZmZjtzdHJva2U6JTIzMDAwO3N0cm9rZS1taXRlcmxpbWl0OjE1LjEyO3N0cm9rZS13aWR0aDouMjVweDslN0QlM0Mvc3R5bGUlM0UlM0MvZGVmcyUzRSUzQ2NpcmNsZSBjbGFzcz0nY2xzLTEnIGN4PSc0LjcyJyBjeT0nNS40Nycgcj0nMi41MicvJTNFJTNDY2lyY2xlIGNsYXNzPSdjbHMtMScgY3g9JzExLjI2JyBjeT0nOC4yOCcgcj0nMS43NScvJTNFJTNDY2lyY2xlIGNsYXNzPSdjbHMtMScgY3g9JzUuOTUnIGN5PScxMi4wNScgcj0nMS4yOScvJTNFJTNDL3N2ZyUzRVwiO1xyXG4gICAgLy8gfVxyXG4gIH1cclxufSIsIi8vIC88cmVmZXJlbmNlIHBhdGg9XCIuLi9FdmVudC9FdmVudC50c1wiLz5cclxuLy8gLzxyZWZlcmVuY2UgcGF0aD1cIi4uL1RpbWUvVGltZS50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyB0aGUgbW9kZSBhIGxvb3AgcnVucyBpblxyXG4gICAqL1xyXG4gIGV4cG9ydCBlbnVtIExPT1BfTU9ERSB7XHJcbiAgICAvKiogTG9vcCBjeWNsZXMgY29udHJvbGxlZCBieSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lICovXHJcbiAgICBGUkFNRV9SRVFVRVNUID0gXCJmcmFtZVJlcXVlc3RcIixcclxuICAgIC8qKiBMb29wIGN5Y2xlcyBjb250cm9sbGVkIGJ5IHhyU2Vzc2lvbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKi9cclxuICAgIEZSQU1FX1JFUVVFU1RfWFIgPSBcImZyYW1lUmVxdWVzdFhSXCIsXHJcbiAgICAvKiogTG9vcCBjeWNsZXMgd2l0aCB0aGUgZ2l2ZW4gZnJhbWVyYXRlIGluIHtAbGluayBUaW1lLmdhbWV9ICovXHJcbiAgICBUSU1FX0dBTUUgPSBcInRpbWVHYW1lXCIsXHJcbiAgICAvKiogTG9vcCBjeWNsZXMgd2l0aCB0aGUgZ2l2ZW4gZnJhbWVyYXRlIGluIHJlYWx0aW1lLCBpbmRlcGVuZGVudCBvZiB7QGxpbmsgVGltZS5nYW1lfSAqL1xyXG4gICAgVElNRV9SRUFMID0gXCJ0aW1lUmVhbFwiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb3JlIGxvb3Agb2YgYSBGVURHRSBhcHBsaWNhdGlvbi4gSW5pdGlhbGl6ZXMgYXV0b21hdGljYWxseSBhbmQgbXVzdCBiZSBzdGFydGVkIGV4cGxpY2l0bHkuXHJcbiAgICogSXQgdGhlbiBmaXJlcyB7QGxpbmsgRVZFTlQuTE9PUF9GUkFNRX0gdG8gYWxsIGFkZGVkIGxpc3RlbmVycyBhdCBlYWNoIGZyYW1lXHJcbiAgICogXHJcbiAgICogQGF1dGhvciBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBMb29wIGV4dGVuZHMgRXZlbnRUYXJnZXRTdGF0aWMge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lU3RhcnRHYW1lOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lU3RhcnRSZWFsOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lRnJhbWVHYW1lOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lRnJhbWVSZWFsOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lRnJhbWVTdGFydEdhbWU6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyDGklRpbWVGcmFtZVN0YXJ0UmVhbDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSVGltZUxhc3RGcmFtZUdhbWVBdmc6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyDGklRpbWVMYXN0RnJhbWVSZWFsQXZnOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJGcmFtZXM6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBydW5uaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBtb2RlOiBMT09QX01PREUgPSBMT09QX01PREUuRlJBTUVfUkVRVUVTVDtcclxuICAgIHByaXZhdGUgc3RhdGljIGlkSW50ZXJ2YWxsOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaWRSZXF1ZXN0OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnBzRGVzaXJlZDogbnVtYmVyID0gMzA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBmcmFtZXNUb0F2ZXJhZ2U6IG51bWJlciA9IDMwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3luY1dpdGhBbmltYXRpb25GcmFtZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBUaGUgZ2FtZXRpbWUgdGhlIGxvb3Agd2FzIHN0YXJ0ZWQsIG92ZXJ3cml0dGVuIGF0IGVhY2ggc3RhcnQgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHRpbWVTdGFydEdhbWUoKTogbnVtYmVyIHsgcmV0dXJuIExvb3AuxpJUaW1lU3RhcnRHYW1lOyB9XHJcbiAgICAvKiogVGhlIHJlYWx0aW1lIHRoZSBsb29wIHdhcyBzdGFydGVkLCBvdmVyd3JpdHRlbiBhdCBlYWNoIHN0YXJ0ICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCB0aW1lU3RhcnRSZWFsKCk6IG51bWJlciB7IHJldHVybiBMb29wLsaSVGltZVN0YXJ0UmVhbDsgfVxyXG4gICAgLyoqIFRoZSBnYW1ldGltZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IGxvb3AgY3ljbGUgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHRpbWVGcmFtZUdhbWUoKTogbnVtYmVyIHsgcmV0dXJuIExvb3AuxpJUaW1lRnJhbWVHYW1lOyB9XHJcbiAgICAvKiogVGhlIHJlYWx0aW1lIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgbG9vcCBjeWNsZSAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdGltZUZyYW1lUmVhbCgpOiBudW1iZXIgeyByZXR1cm4gTG9vcC7GklRpbWVGcmFtZVJlYWw7IH1cclxuICAgIC8qKiBUaGUgZ2FtZXRpbWUgdGhlIGxhc3QgbG9vcCBjeWNsZSBzdGFydGVkKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHRpbWVGcmFtZVN0YXJ0R2FtZSgpOiBudW1iZXIgeyByZXR1cm4gTG9vcC7GklRpbWVGcmFtZVN0YXJ0R2FtZTsgfVxyXG4gICAgLyoqIFRoZSByZWFsdGltZSB0aGUgbGFzdCBsb29wIGN5Y2xlIHN0YXJ0ZWQqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdGltZUZyYW1lU3RhcnRSZWFsKCk6IG51bWJlciB7IHJldHVybiBMb29wLsaSVGltZUZyYW1lU3RhcnRSZWFsOyB9XHJcbiAgICAvKiogVGhlIGF2ZXJhZ2UgbnVtYmVyIG9mIGZyYW1lcyBwZXIgc2Vjb25kIGluIGdhbWV0aW1lICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBmcHNHYW1lQXZlcmFnZSgpOiBudW1iZXIgeyByZXR1cm4gMTAwMCAvIExvb3AuxpJUaW1lTGFzdEZyYW1lR2FtZUF2ZzsgfVxyXG4gICAgLyoqIFRoZSBhdmVyYWdlIG51bWJlciBvZiBmcmFtZXMgcGVyIHNlY29uZCBpbiByZWFsdGltZSAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZnBzUmVhbEF2ZXJhZ2UoKTogbnVtYmVyIHsgcmV0dXJuIDEwMDAgLyBMb29wLsaSVGltZUxhc3RGcmFtZVJlYWxBdmc7IH1cclxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGZyYW1lcyB0cmlnZ2VyZWQgc28gZmFyICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBmcmFtZXMoKTogbnVtYmVyIHsgcmV0dXJuIExvb3AuxpJGcmFtZXM7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB0aGUgbG9vcCB3aXRoIHRoZSBnaXZlbiBtb2RlIGFuZCBmcHMuICBcclxuICAgICAqIFRoZSBkZWZhdWx0IGZvciBfbW9kZSBpcyBGUkFNRV9SRVFVRVNULCBzZWUge0BsaW5rIExPT1BfTU9ERX0sIGhvb2tpbmcgdGhlIGxvb3AgdG8gdGhlIGJyb3dzZXIncyBhbmltYXRpb24gZnJhbWUuXHJcbiAgICAgKiBJcyBvbmx5IGFwcGxpY2FibGUgaW4gVElNRS1tb2Rlcy5cclxuICAgICAqIF9zeW5jV2l0aEFuaW1hdGlvbkZyYW1lIGlzIGV4cGVyaW1lbnRhbCBhbmQgb25seSBhcHBsaWNhYmxlIGluIFRJTUUtbW9kZXMsIGRlZmVycmluZyB0aGUgbG9vcC1jeWNsZSB1bnRpbCB0aGUgbmV4dCBwb3NzaWJsZSBhbmltYXRpb24gZnJhbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc3RhcnQoX21vZGU6IExPT1BfTU9ERSA9IExPT1BfTU9ERS5GUkFNRV9SRVFVRVNULCBfZnBzOiBudW1iZXIgPSA2MCwgX3N5bmNXaXRoQW5pbWF0aW9uRnJhbWU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICBMb29wLnN0b3AoKTtcclxuXHJcbiAgICAgIExvb3AuxpJUaW1lU3RhcnRHYW1lID0gVGltZS5nYW1lLmdldCgpO1xyXG4gICAgICBMb29wLsaSVGltZVN0YXJ0UmVhbCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICBMb29wLsaSVGltZUZyYW1lU3RhcnRHYW1lID0gTG9vcC7GklRpbWVTdGFydEdhbWU7XHJcbiAgICAgIExvb3AuxpJUaW1lRnJhbWVTdGFydFJlYWwgPSBMb29wLsaSVGltZVN0YXJ0UmVhbDtcclxuICAgICAgTG9vcC5mcHNEZXNpcmVkID0gKF9tb2RlID09IExPT1BfTU9ERS5GUkFNRV9SRVFVRVNUKSA/IDYwIDogX2ZwcztcclxuICAgICAgTG9vcC5mcmFtZXNUb0F2ZXJhZ2UgPSBMb29wLmZwc0Rlc2lyZWQ7XHJcbiAgICAgIExvb3AuxpJUaW1lTGFzdEZyYW1lR2FtZUF2ZyA9IExvb3AuxpJUaW1lTGFzdEZyYW1lUmVhbEF2ZyA9IDEwMDAgLyBMb29wLmZwc0Rlc2lyZWQ7XHJcbiAgICAgIExvb3AubW9kZSA9IF9tb2RlO1xyXG4gICAgICBMb29wLnN5bmNXaXRoQW5pbWF0aW9uRnJhbWUgPSBfc3luY1dpdGhBbmltYXRpb25GcmFtZTtcclxuXHJcbiAgICAgIGxldCBsb2c6IHN0cmluZyA9IGBMb29wIHN0YXJ0aW5nIGluIG1vZGUgJHtMb29wLm1vZGV9YDtcclxuICAgICAgaWYgKExvb3AubW9kZSAhPSBMT09QX01PREUuRlJBTUVfUkVRVUVTVClcclxuICAgICAgICBsb2cgKz0gYCB3aXRoIGF0dGVtcHRlZCAke19mcHN9IGZwc2A7XHJcbiAgICAgIERlYnVnLmZ1ZGdlKGxvZyk7XHJcblxyXG4gICAgICBzd2l0Y2ggKF9tb2RlKSB7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuRlJBTUVfUkVRVUVTVDpcclxuICAgICAgICAgIExvb3AubG9vcEZyYW1lKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExPT1BfTU9ERS5GUkFNRV9SRVFVRVNUX1hSOlxyXG4gICAgICAgICAgTG9vcC5sb29wRnJhbWVYUigpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuVElNRV9SRUFMOlxyXG4gICAgICAgICAgTG9vcC5pZEludGVydmFsbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChMb29wLmxvb3BUaW1lLCAxMDAwIC8gTG9vcC5mcHNEZXNpcmVkKTtcclxuICAgICAgICAgIExvb3AubG9vcFRpbWUoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTE9PUF9NT0RFLlRJTUVfR0FNRTpcclxuICAgICAgICAgIExvb3AuaWRJbnRlcnZhbGwgPSBUaW1lLmdhbWUuc2V0VGltZXIoMTAwMCAvIExvb3AuZnBzRGVzaXJlZCwgMCwgTG9vcC5sb29wVGltZSk7XHJcbiAgICAgICAgICBMb29wLmxvb3BUaW1lKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIExvb3AucnVubmluZyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyB0aGUgbG9vcFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHN0b3AoKTogdm9pZCB7XHJcbiAgICAgIGlmICghTG9vcC5ydW5uaW5nKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIHN3aXRjaCAoTG9vcC5tb2RlKSB7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuRlJBTUVfUkVRVUVTVDpcclxuICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShMb29wLmlkUmVxdWVzdCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExPT1BfTU9ERS5GUkFNRV9SRVFVRVNUX1hSOlxyXG4gICAgICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnNlc3Npb24uY2FuY2VsQW5pbWF0aW9uRnJhbWUoTG9vcC5pZFJlcXVlc3QpO1xyXG4gICAgICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnNlc3Npb24gPSBudWxsO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuVElNRV9SRUFMOlxyXG4gICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoTG9vcC5pZEludGVydmFsbCk7XHJcbiAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoTG9vcC5pZFJlcXVlc3QpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuVElNRV9HQU1FOlxyXG4gICAgICAgICAgVGltZS5nYW1lLmRlbGV0ZVRpbWVyKExvb3AuaWRJbnRlcnZhbGwpO1xyXG4gICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKExvb3AuaWRSZXF1ZXN0KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgTG9vcC5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgIERlYnVnLmZ1ZGdlKFwiTG9vcCBzdG9wcGVkIVwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnRpbnVlIHJ1bm5pbmcgdGhlIGxvb3BcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjb250aW51ZSgpOiB2b2lkIHtcclxuICAgICAgaWYgKExvb3AucnVubmluZylcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBMb29wLnN0YXJ0KExvb3AubW9kZSwgTG9vcC5mcHNEZXNpcmVkLCBMb29wLnN5bmNXaXRoQW5pbWF0aW9uRnJhbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGxvb3AoKTogdm9pZCB7XHJcbiAgICAgIGxldCB0aW1lOiBudW1iZXI7XHJcbiAgICAgIHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgTG9vcC7GklRpbWVGcmFtZVJlYWwgPSB0aW1lIC0gTG9vcC7GklRpbWVGcmFtZVN0YXJ0UmVhbDtcclxuICAgICAgTG9vcC7GklRpbWVGcmFtZVN0YXJ0UmVhbCA9IHRpbWU7XHJcblxyXG4gICAgICB0aW1lID0gVGltZS5nYW1lLmdldCgpO1xyXG4gICAgICBMb29wLsaSVGltZUZyYW1lR2FtZSA9IHRpbWUgLSBMb29wLsaSVGltZUZyYW1lU3RhcnRHYW1lO1xyXG4gICAgICBMb29wLsaSVGltZUZyYW1lU3RhcnRHYW1lID0gdGltZTtcclxuXHJcbiAgICAgIExvb3AuxpJUaW1lTGFzdEZyYW1lR2FtZUF2ZyA9ICgoTG9vcC5mcmFtZXNUb0F2ZXJhZ2UgLSAxKSAqIExvb3AuxpJUaW1lTGFzdEZyYW1lR2FtZUF2ZyArIExvb3AuxpJUaW1lRnJhbWVHYW1lKSAvIExvb3AuZnJhbWVzVG9BdmVyYWdlO1xyXG4gICAgICBMb29wLsaSVGltZUxhc3RGcmFtZVJlYWxBdmcgPSAoKExvb3AuZnJhbWVzVG9BdmVyYWdlIC0gMSkgKiBMb29wLsaSVGltZUxhc3RGcmFtZVJlYWxBdmcgKyBMb29wLsaSVGltZUZyYW1lUmVhbCkgLyBMb29wLmZyYW1lc1RvQXZlcmFnZTtcclxuXHJcbiAgICAgIC8vIFRPRE86IGNvbnNpZGVyIExvb3BFdmVudCB3aGljaCBjb252ZXlzIGluZm9ybWF0aW9uIHN1Y2ggYXMgdGltZUVsYXBzZWQgZXRjLi4uXHJcbiAgICAgIExvb3AuxpJGcmFtZXMrKztcclxuICAgICAgbGV0IGV2ZW50OiBFdmVudCA9IG5ldyBFdmVudChFVkVOVC5MT09QX0ZSQU1FKTtcclxuICAgICAgTG9vcC50YXJnZXRTdGF0aWMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbG9vcEZyYW1lKCk6IHZvaWQge1xyXG4gICAgICBMb29wLmxvb3AoKTtcclxuICAgICAgTG9vcC5pZFJlcXVlc3QgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKExvb3AubG9vcEZyYW1lKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIGxvb3BGcmFtZVhSKF90aW1lOiBudW1iZXIgPSBudWxsLCBfeHJGcmFtZTogWFJGcmFtZSA9IG51bGwpOiB2b2lkIHtcclxuICAgICAgTG9vcC5sb29wKCk7XHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5kcmF3KHRydWUsIF94ckZyYW1lKTtcclxuICAgICAgTG9vcC5pZFJlcXVlc3QgPSBYUlZpZXdwb3J0LmRlZmF1bHQuc2Vzc2lvbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoTG9vcC5sb29wRnJhbWVYUik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBsb29wVGltZSgpOiB2b2lkIHtcclxuICAgICAgaWYgKExvb3Auc3luY1dpdGhBbmltYXRpb25GcmFtZSlcclxuICAgICAgICBMb29wLmlkUmVxdWVzdCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoTG9vcC5sb29wKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIExvb3AubG9vcCgpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFRpbWVVbml0cyB7XHJcbiAgICBob3Vycz86IG51bWJlcjtcclxuICAgIG1pbnV0ZXM/OiBudW1iZXI7XHJcbiAgICBzZWNvbmRzPzogbnVtYmVyO1xyXG4gICAgdGVudGhzPzogbnVtYmVyO1xyXG4gICAgaHVuZHJlZHM/OiBudW1iZXI7XHJcbiAgICB0aG91c2FuZHM/OiBudW1iZXI7XHJcbiAgICBmcmFjdGlvbj86IG51bWJlcjtcclxuICAgIGFzSG91cnM/OiBudW1iZXI7XHJcbiAgICBhc01pbnV0ZXM/OiBudW1iZXI7XHJcbiAgICBhc1NlY29uZHM/OiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFRpbWVycyBleHRlbmRzIE9iamVjdCB7XHJcbiAgICBbaWQ6IG51bWJlcl06IFRpbWVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MgZ2VuZXJhdGUgYSB0aW1lc3RhbXAgdGhhdCBjb3JyZWxhdGVzIHdpdGggdGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgc3RhcnQgb2YgdGhlIHByb2dyYW0gYnV0IGFsbG93cyBmb3IgcmVzZXR0aW5nIGFuZCBzY2FsaW5nLiAgXHJcbiAgICogU3VwcG9ydHMge0BsaW5rIFRpbWVyfXMgc2ltaWxhciB0byB3aW5kb3cuc2V0SW50ZXJ2YWwgYnV0IHdpdGggcmVzcGVjdCB0byB0aGUgc2NhbGVkIHRpbWUuXHJcbiAgICogQWxsIHRpbWUgdmFsdWVzIGFyZSBnaXZlbiBpbiBtaWxsaXNlY29uZHNcclxuICAgKiBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBUaW1lIGV4dGVuZHMgRXZlbnRUYXJnZXRVbmlmaWVkIHtcclxuICAgIC8qKiBTdGFuZGFyZCBnYW1lIHRpbWUgc3RhcnRpbmcgYXV0b21hdGljYWxseSB3aXRoIHRoZSBhcHBsaWNhdGlvbiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBnYW1lOiBUaW1lID0gbmV3IFRpbWUoKTtcclxuICAgIHByaXZhdGUgc3RhcnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc2NhbGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgb2Zmc2V0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGxhc3RDYWxsVG9FbGFwc2VkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRpbWVyczogVGltZXJzID0ge307XHJcbiAgICBwcml2YXRlIGlkVGltZXJBZGRlZExhc3Q6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgIHRoaXMuc2NhbGUgPSAxLjA7XHJcbiAgICAgIHRoaXMub2Zmc2V0ID0gMC4wO1xyXG4gICAgICB0aGlzLmxhc3RDYWxsVG9FbGFwc2VkID0gMC4wO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyByZXByZXNlbnRpb25zIG9mIHRoZSB0aW1lIGdpdmVuIGluIG1pbGxpc2Vjb25kcyBpbiB2YXJpb3VzIGZvcm1hdHMgZGVmaW5lZCBpbiB7QGxpbmsgVGltZVVuaXRzfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFVuaXRzKF9taWxsaXNlY29uZHM6IG51bWJlcik6IFRpbWVVbml0cyB7XHJcbiAgICAgIGxldCB1bml0czogVGltZVVuaXRzID0ge307XHJcblxyXG4gICAgICB1bml0cy5hc1NlY29uZHMgPSBfbWlsbGlzZWNvbmRzIC8gMTAwMDtcclxuICAgICAgdW5pdHMuYXNNaW51dGVzID0gdW5pdHMuYXNTZWNvbmRzIC8gNjA7XHJcbiAgICAgIHVuaXRzLmFzSG91cnMgPSB1bml0cy5hc01pbnV0ZXMgLyA2MDtcclxuXHJcbiAgICAgIHVuaXRzLmhvdXJzID0gTWF0aC5mbG9vcih1bml0cy5hc0hvdXJzKTtcclxuICAgICAgdW5pdHMubWludXRlcyA9IE1hdGguZmxvb3IodW5pdHMuYXNNaW51dGVzKSAlIDYwO1xyXG4gICAgICB1bml0cy5zZWNvbmRzID0gTWF0aC5mbG9vcih1bml0cy5hc1NlY29uZHMpICUgNjA7XHJcblxyXG4gICAgICB1bml0cy5mcmFjdGlvbiA9IF9taWxsaXNlY29uZHMgJSAxMDAwO1xyXG4gICAgICB1bml0cy50aG91c2FuZHMgPSBfbWlsbGlzZWNvbmRzICUgMTA7XHJcbiAgICAgIHVuaXRzLmh1bmRyZWRzID0gX21pbGxpc2Vjb25kcyAlIDEwMCAtIHVuaXRzLnRob3VzYW5kcztcclxuICAgICAgdW5pdHMudGVudGhzID0gdW5pdHMuZnJhY3Rpb24gLSB1bml0cy5odW5kcmVkcyAtIHVuaXRzLnRob3VzYW5kcztcclxuXHJcbiAgICAgIHJldHVybiB1bml0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0L1NldCB0aW1lIGFuZCBzY2FsaW5nXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBzY2FsZWQgdGltZXN0YW1wIG9mIHRoaXMgaW5zdGFuY2UgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5zY2FsZSAqIChwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3RhcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcmVtYWluaW5nIHRpbWUgdG8gdGhlIGdpdmVuIHBvaW50IG9mIHRpbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJlbWFpbmRlcihfdG86IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBfdG8gLSB0aGlzLmdldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogKFJlLSkgU2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoaXMgaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBfdGltZSBUaGUgdGltZXN0YW1wIHRvIHJlcHJlc2VudCB0aGUgY3VycmVudCB0aW1lIChkZWZhdWx0IDAuMClcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfdGltZTogbnVtYmVyID0gMCk6IHZvaWQge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF90aW1lO1xyXG4gICAgICB0aGlzLnN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgIHRoaXMuZ2V0RWxhcHNlZFNpbmNlUHJldmlvdXNDYWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBzY2FsaW5nIG9mIHRoaXMgdGltZSwgYWxsb3dpbmcgZm9yIHNsb3dtb3Rpb24gKDwxKSBvciBmYXN0Zm9yd2FyZCAoPjEpIFxyXG4gICAgICogQHBhcmFtIF9zY2FsZSBUaGUgZGVzaXJlZCBzY2FsaW5nIChkZWZhdWx0IDEuMClcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFNjYWxlKF9zY2FsZTogbnVtYmVyID0gMS4wKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KHRoaXMuZ2V0KCkpO1xyXG4gICAgICB0aGlzLnNjYWxlID0gX3NjYWxlO1xyXG4gICAgICAvL1RPRE86IGNhdGNoIHNjYWxlPTBcclxuICAgICAgdGhpcy5yZXNjYWxlQWxsVGltZXJzKCk7XHJcbiAgICAgIHRoaXMuZ2V0RWxhcHNlZFNpbmNlUHJldmlvdXNDYWxsKCk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuVElNRV9TQ0FMRUQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBzY2FsaW5nIG9mIHRoaXMgdGltZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2NhbGUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIG9mZnNldCBvZiB0aGlzIHRpbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE9mZnNldCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5vZmZzZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHNjYWxlZCB0aW1lIGluIG1pbGxpc2Vjb25kcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgY2FsbCB0byB0aGlzIG1ldGhvZFxyXG4gICAgICogQXV0b21hdGljYWxseSByZXNldCBhdCBldmVyeSBjYWxsIHRvIHNldCguLi4pIGFuZCBzZXRTY2FsZSguLi4pXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFbGFwc2VkU2luY2VQcmV2aW91c0NhbGwoKTogbnVtYmVyIHtcclxuICAgICAgbGV0IGN1cnJlbnQ6IG51bWJlciA9IHRoaXMuZ2V0KCk7XHJcbiAgICAgIGxldCBlbGFwc2VkOiBudW1iZXIgPSBjdXJyZW50IC0gdGhpcy5sYXN0Q2FsbFRvRWxhcHNlZDtcclxuICAgICAgdGhpcy5sYXN0Q2FsbFRvRWxhcHNlZCA9IGN1cnJlbnQ7XHJcbiAgICAgIHJldHVybiBlbGFwc2VkO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUaW1lcnNcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIFByb21pc2U8dm9pZD4gdG8gYmUgcmVzb2x2ZWQgYWZ0ZXIgdGhlIHRpbWUgZ2l2ZW4uIFRvIGJlIHVzZWQgd2l0aCBhc3luYy9hd2FpdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsYXkoX2xhcHNlOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKF9yZXNvbHZlID0+IHRoaXMuc2V0VGltZXIoX2xhcHNlLCAxLCAoKSA9PiBfcmVzb2x2ZSgpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogZXhhbWluZSBpZiB3ZWItd29ya2VycyB3b3VsZCBlbmhhbmNlIHBlcmZvcm1hbmNlIGhlcmUhXHJcbiAgICAvKipcclxuICAgICAqIFN0b3BzIGFuZCBkZWxldGVzIGFsbCB7QGxpbmsgVGltZXJ9cyBhdHRhY2hlZC4gU2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBUaW1lLW9iamVjdCBsZWF2ZXMgc2NvcGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyQWxsVGltZXJzKCk6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBpZCBpbiB0aGlzLnRpbWVycykge1xyXG4gICAgICAgIHRoaXMuZGVsZXRlVGltZXIoTnVtYmVyKGlkKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZXMge0BsaW5rIFRpbWVyfSBmb3VuZCB1c2luZyB0aGUgaW50ZXJuYWwgaWQgb2YgdGhlIGNvbm5lY3RlZCBpbnRlcnZhbC1vYmplY3RcclxuICAgICAqIEBwYXJhbSBfaWQgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVUaW1lckJ5SXRzSW50ZXJuYWxJZChfaWQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBpZCBpbiB0aGlzLnRpbWVycykge1xyXG4gICAgICAgIGxldCB0aW1lcjogVGltZXIgPSB0aGlzLnRpbWVyc1tpZF07XHJcbiAgICAgICAgaWYgKHRpbWVyLmlkID09IF9pZCkge1xyXG4gICAgICAgICAgdGltZXIuY2xlYXIoKTtcclxuICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbWVyc1tpZF07XHJcbiAgICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiBhbiBlYXJseSBvdXQgaXMgT0sgaGVyZS4uLiBzaG91bGQgYmUhXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YWxscyBhIHRpbWVyIGF0IHRoaXMgdGltZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSBfbGFwc2UgVGhlIG9iamVjdC10aW1lIHRvIGVsYXBzZSBiZXR3ZWVuIHRoZSBjYWxscyB0byBfY2FsbGJhY2tcclxuICAgICAqIEBwYXJhbSBfY291bnQgVGhlIG51bWJlciBvZiBjYWxscyBkZXNpcmVkLCAwID0gSW5maW5pdGVcclxuICAgICAqIEBwYXJhbSBfaGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gY2FsbCBlYWNoIHRoZSBnaXZlbiBsYXBzZSBoYXMgZWxhcHNlZFxyXG4gICAgICogQHBhcmFtIF9hcmd1bWVudHMgQWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFRpbWVyKF9sYXBzZTogbnVtYmVyLCBfY291bnQ6IG51bWJlciwgX2hhbmRsZXI6IFRpbWVySGFuZGxlciwgLi4uX2FyZ3VtZW50czogT2JqZWN0W10pOiBudW1iZXIge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXVudXNlZC1leHByZXNzaW9uXHJcbiAgICAgIG5ldyBUaW1lcih0aGlzLCBfbGFwc2UsIF9jb3VudCwgX2hhbmRsZXIsIF9hcmd1bWVudHMpO1xyXG4gICAgICAvL3RoaXMuYWRkVGltZXIodGltZXIpO1xyXG4gICAgICByZXR1cm4gdGhpcy5pZFRpbWVyQWRkZWRMYXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGludGVybmFsbHkgYnkge0BsaW5rIFRpbWV9IGFuZCB7QGxpbmsgVGltZXJ9IGFuZCBtdXN0IG5vdCBiZSBjYWxsZWQgb3RoZXJ3aXNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRUaW1lcihfdGltZXI6IFRpbWVyKTogbnVtYmVyIHtcclxuICAgICAgdGhpcy50aW1lcnNbKyt0aGlzLmlkVGltZXJBZGRlZExhc3RdID0gX3RpbWVyO1xyXG4gICAgICByZXR1cm4gdGhpcy5pZFRpbWVyQWRkZWRMYXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlcyB0aGUgdGltZXIgd2l0aCB0aGUgaWQgZ2l2ZW4gYnkgdGhpcyB0aW1lIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlVGltZXIoX2lkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgbGV0IHRpbWVyOiBUaW1lciA9IHRoaXMudGltZXJzW19pZF07XHJcbiAgICAgIGlmICghdGltZXIpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB0aW1lci5jbGVhcigpO1xyXG4gICAgICBkZWxldGUgdGhpcy50aW1lcnNbX2lkXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIHRpbWVyIHdpdGggdGhlIGdpdmVuIGlkIG9yIG51bGwgaWYgbm90IGZvdW5kLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VGltZXIoX2lkOiBudW1iZXIpOiBUaW1lciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRpbWVyc1tfaWRdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIGxpc3Qgb2YgdGltZXJzIGN1cnJlbnRseSBpbnN0YWxsZWQgb24gdGhpcyB0aW1lIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VGltZXJzKCk6IFRpbWVycyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFRpbWVycyA9IHt9O1xyXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHRoaXMudGltZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUge0BsaW5rIFRpbWVyc30gaW5zdGFsbGVkIHRvIHRoaXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhc1RpbWVycygpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIChPYmplY3Qua2V5cyh0aGlzLnRpbWVycykubGVuZ3RoID4gMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNyZWF0ZXMge0BsaW5rIFRpbWVyfXMgd2hlbiBzY2FsaW5nIGNoYW5nZXNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZXNjYWxlQWxsVGltZXJzKCk6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBpZCBpbiB0aGlzLnRpbWVycykge1xyXG4gICAgICAgIGxldCB0aW1lcjogVGltZXIgPSB0aGlzLnRpbWVyc1tpZF07XHJcbiAgICAgICAgdGltZXIuY2xlYXIoKTtcclxuICAgICAgICBkZWxldGUgdGhpcy50aW1lcnNbaWRdO1xyXG4gICAgICAgIGlmICghdGhpcy5zY2FsZSlcclxuICAgICAgICAgIC8vIFRpbWUgaGFzIHN0b3BwZWQsIG5vIG5lZWQgdG8gcmVwbGFjZSBjbGVhcmVkIHRpbWVyc1xyXG4gICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIC8qIHRoaXMudGltZXJzW2lkXSA9ICAqL1xyXG4gICAgICAgIHRpbWVyID0gdGltZXIuaW5zdGFsbENvcHkoKTsgLy8gdGhlIHRpbWVyIGlzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhpcyB0aW1lIGluc3RhbmNlXHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGltZXJzW3RoaXMuaWRUaW1lckFkZGVkTGFzdF07IC8vIHJlbW92ZSB0aGUgY29weSBhZ2FpbiAuLi5cclxuICAgICAgICB0aGlzLnRpbWVyc1tpZF0gPSB0aW1lcjsgLy8gLi4uIGFuZCBwbGFjZSBpdCBhdCB0aGUgaWQgb2YgdGhlIG9yaWdpbmFsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBEZWZpbmVzIHRoZSBzaWduYXR1cmUgb2YgaGFuZGxlciBmdW5jdGlvbnMgZm9yIHtAbGluayBFdmVudFRpbWVyfXMsIHZlcnkgc2ltaWxhciB0byB1c3VhbCBldmVudCBoYW5kbGVyXHJcbiAgICovXHJcbiAgZXhwb3J0IHR5cGUgVGltZXJIYW5kbGVyID0gKF9ldmVudDogRXZlbnRUaW1lcikgPT4gdm9pZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQSB7QGxpbmsgVGltZXJ9LWluc3RhbmNlIGludGVybmFsbHkgdXNlcyB3aW5kb3cuc2V0SW50ZXJ2YWwgdG8gY2FsbCBhIGdpdmVuIGhhbmRsZXIgd2l0aCBhIGdpdmVuIGZyZXF1ZW5jeSBhIGdpdmVuIG51bWJlciBvZiB0aW1lcyxcclxuICAgKiBwYXNzaW5nIGFuIHtAbGluayBFdmVudFRpbWVyfS1pbnN0YW5jZSB3aXRoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYW5kIGdpdmVuIGFyZ3VtZW50cy4gXHJcbiAgICogVGhlIGZyZXF1ZW5jeSBzY2FsZXMgd2l0aCB0aGUge0BsaW5rIFRpbWV9LWluc3RhbmNlIHRoZSB7QGxpbmsgVGltZXJ9LWluc3RhbmNlIGlzIGF0dGFjaGVkIHRvLlxyXG4gICAqIFxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgVGltZXIge1xyXG4gICAgcHVibGljIGFjdGl2ZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBjb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVyOiBUaW1lckhhbmRsZXI7XHJcbiAgICBwcml2YXRlIHRpbWU6IFRpbWU7XHJcbiAgICBwcml2YXRlIGVsYXBzZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBldmVudDogRXZlbnRUaW1lcjtcclxuICAgIHByaXZhdGUgdGltZW91dFJlYWw6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaWRXaW5kb3c6IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgVGltZXJ9IGluc3RhbmNlLlxyXG4gICAgICogQHBhcmFtIF90aW1lIFRoZSB7QGxpbmsgVGltZX0gaW5zdGFuY2UsIHRoZSB0aW1lciBhdHRhY2hlcyB0b1xyXG4gICAgICogQHBhcmFtIF9lbGFwc2UgVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGVsYXBzZSwgdG8gdGhlIG5leHQgY2FsbCBvZiBfaGFuZGxlciwgbWVhc3VyZWQgaW4gX3RpbWVcclxuICAgICAqIEBwYXJhbSBfY291bnQgVGhlIGRlc2lyZWQgbnVtYmVyIG9mIGNhbGxzIHRvIF9oYW5kbGVyLCBUaW1lciBkZWluc3RhbGxzIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgbGFzdCBjYWxsLiBQYXNzaW5nIDAgaW52b2tlcyBpbmZpbml0ZSBjYWxsc1xyXG4gICAgICogQHBhcmFtIF9oYW5kbGVyIFRoZSB7QGxpbmsgVGltZXJIYW5kbGVyfSBpbnN0YW5jZSB0byBjYWxsXHJcbiAgICAgKiBAcGFyYW0gX2FyZ3VtZW50cyBBZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBwYXNzIHRvIF9oYW5kbGVyXHJcbiAgICAgKiBcclxuICAgICAqIFRPRE86IGZvciBwcm9wZXIgaGFuZGxpbmcgYW5kIGRlbGV0aW9uLCB1c2UgVGltZS5zZXRUaW1lciBpbnN0ZWFkIG9mIGluc3RhbnRpYXRpbmcgdGltZXJzIHlvdXJzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3RpbWU6IFRpbWUsIF9lbGFwc2U6IG51bWJlciwgX2NvdW50OiBudW1iZXIsIF9oYW5kbGVyOiBUaW1lckhhbmRsZXIsIC4uLl9hcmd1bWVudHM6IE9iamVjdFtdKSB7XHJcbiAgICAgIHRoaXMudGltZSA9IF90aW1lO1xyXG4gICAgICB0aGlzLmVsYXBzZSA9IF9lbGFwc2U7XHJcbiAgICAgIHRoaXMuZXZlbnQgPSBuZXcgRXZlbnRUaW1lcih0aGlzLCBfYXJndW1lbnRzKTtcclxuICAgICAgdGhpcy5oYW5kbGVyID0gX2hhbmRsZXI7XHJcbiAgICAgIHRoaXMuY291bnQgPSBfY291bnQ7XHJcblxyXG4gICAgICBsZXQgc2NhbGU6IG51bWJlciA9IE1hdGguYWJzKF90aW1lLmdldFNjYWxlKCkpO1xyXG5cclxuICAgICAgaWYgKCFzY2FsZSkge1xyXG4gICAgICAgIC8vIFRpbWUgaXMgc3RvcHBlZCwgdGltZXIgd29uJ3QgYmUgYWN0aXZlXHJcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudGltZW91dFJlYWwgPSB0aGlzLmVsYXBzZSAvIHNjYWxlO1xyXG5cclxuICAgICAgbGV0IGNhbGxiYWNrOiBGdW5jdGlvbiA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmV2ZW50LmNvdW50ID0gdGhpcy5jb3VudDtcclxuICAgICAgICB0aGlzLmV2ZW50Lmxhc3RDYWxsID0gKHRoaXMuY291bnQgPT0gMSk7XHJcbiAgICAgICAgX2hhbmRsZXIodGhpcy5ldmVudCk7XHJcbiAgICAgICAgdGhpcy5ldmVudC5maXJzdENhbGwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPiAwKVxyXG4gICAgICAgICAgaWYgKC0tdGhpcy5jb3VudCA9PSAwKVxyXG4gICAgICAgICAgICBfdGltZS5kZWxldGVUaW1lckJ5SXRzSW50ZXJuYWxJZCh0aGlzLmlkV2luZG93KTtcclxuXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmlkV2luZG93ID0gd2luZG93LnNldEludGVydmFsKGNhbGxiYWNrLCB0aGlzLnRpbWVvdXRSZWFsLCBfYXJndW1lbnRzKTtcclxuICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICBfdGltZS5hZGRUaW1lcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHdpbmRvdy1pZCBvZiB0aGUgdGltZXIsIHdoaWNoIHdhcyByZXR1cm5lZCBieSBzZXRJbnRlcnZhbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGlkKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmlkV2luZG93O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdGltZS1pbnRlcnZhbGwgZm9yIGNhbGxzIHRvIHRoZSBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGFwc2UoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWxhcHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoZXMgYSBjb3B5IG9mIHRoaXMgYXQgaXRzIGN1cnJlbnQgc3RhdGUgdG8gdGhlIHNhbWUge0BsaW5rIFRpbWV9LWluc3RhbmNlLiBVc2VkIGludGVybmFsbHkgd2hlbiByZXNjYWxpbmcge0BsaW5rIFRpbWV9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnN0YWxsQ29weSgpOiBUaW1lciB7XHJcbiAgICAgIHJldHVybiBuZXcgVGltZXIodGhpcy50aW1lLCB0aGlzLmVsYXBzZSwgdGhpcy5jb3VudCwgdGhpcy5oYW5kbGVyLCB0aGlzLmV2ZW50LmFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHRpbWVyLCByZW1vdmluZyBpdCBmcm9tIHRoZSBpbnRlcnZhbC10aW1lcnMgaGFuZGxlZCBieSB3aW5kb3dcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICAvLyBpZiAodGhpcy50eXBlID09IFRJTUVSX1RZUEUuVElNRU9VVCkge1xyXG4gICAgICAvLyAgICAgaWYgKHRoaXMuYWN0aXZlKVxyXG4gICAgICAvLyAgICAgICAgIC8vIHNhdmUgcmVtYWluaW5nIHRpbWUgdG8gdGltZW91dCBhcyBuZXcgdGltZW91dCBmb3IgcmVzdGFydFxyXG4gICAgICAvLyAgICAgICAgIHRoaXMudGltZW91dCA9IHRoaXMudGltZW91dCAqICgxIC0gKHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5zdGFydFRpbWVSZWFsKSAvIHRoaXMudGltZW91dFJlYWwpO1xyXG4gICAgICAvLyAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmlkKTtcclxuICAgICAgLy8gfVxyXG4gICAgICAvLyBlbHNlXHJcbiAgICAgIC8vIFRPRE86IHJldXNpbmcgdGltZXIgc3RhcnRzIGludGVydmFsIGFuZXcuIFNob3VsZCBiZSByZW1haW5pbmcgaW50ZXJ2YWwgYXMgdGltZW91dCwgdGhlbiBzdGFydGluZyBpbnRlcnZhbCBhbmV3IFxyXG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmlkV2luZG93KTtcclxuICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbn0iXX0=